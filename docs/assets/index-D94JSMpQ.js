(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ef(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xf={exports:{}},Ws={},Pf={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=Symbol.for("react.element"),um=Symbol.for("react.portal"),cm=Symbol.for("react.fragment"),fm=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),hm=Symbol.for("react.provider"),pm=Symbol.for("react.context"),mm=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),gm=Symbol.for("react.memo"),vm=Symbol.for("react.lazy"),Fu=Symbol.iterator;function wm(e){return e===null||typeof e!="object"?null:(e=Fu&&e[Fu]||e["@@iterator"],typeof e=="function"?e:null)}var Cf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nf=Object.assign,Of={};function hr(e,t,n){this.props=e,this.context=t,this.refs=Of,this.updater=n||Cf}hr.prototype.isReactComponent={};hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Tf(){}Tf.prototype=hr.prototype;function ha(e,t,n){this.props=e,this.context=t,this.refs=Of,this.updater=n||Cf}var pa=ha.prototype=new Tf;pa.constructor=ha;Nf(pa,hr.prototype);pa.isPureReactComponent=!0;var Bu=Array.isArray,Af=Object.prototype.hasOwnProperty,ma={current:null},If={key:!0,ref:!0,__self:!0,__source:!0};function Mf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Af.call(t,r)&&!If.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vi,type:e,key:s,ref:o,props:i,_owner:ma.current}}function Sm(e,t){return{$$typeof:vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ya(e){return typeof e=="object"&&e!==null&&e.$$typeof===vi}function km(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uu=/\/+/g;function wo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?km(""+e.key):t.toString(36)}function Ki(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vi:case um:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+wo(o,0):r,Bu(i)?(n="",e!=null&&(n=e.replace(Uu,"$&/")+"/"),Ki(i,t,n,"",function(u){return u})):i!=null&&(ya(i)&&(i=Sm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Uu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Bu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+wo(s,l);o+=Ki(s,t,n,a,i)}else if(a=wm(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+wo(s,l++),o+=Ki(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function xi(e,t,n){if(e==null)return e;var r=[],i=0;return Ki(e,r,"","",function(s){return t.call(n,s,i++)}),r}function _m(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ie={current:null},Qi={transition:null},Em={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Qi,ReactCurrentOwner:ma};function Df(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:xi,forEach:function(e,t,n){xi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xi(e,function(){t++}),t},toArray:function(e){return xi(e,function(t){return t})||[]},only:function(e){if(!ya(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};F.Component=hr;F.Fragment=cm;F.Profiler=dm;F.PureComponent=ha;F.StrictMode=fm;F.Suspense=ym;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Em;F.act=Df;F.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nf({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ma.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Af.call(t,a)&&!If.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:vi,type:e.type,key:i,ref:s,props:r,_owner:o}};F.createContext=function(e){return e={$$typeof:pm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hm,_context:e},e.Consumer=e};F.createElement=Mf;F.createFactory=function(e){var t=Mf.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:mm,render:e}};F.isValidElement=ya;F.lazy=function(e){return{$$typeof:vm,_payload:{_status:-1,_result:e},_init:_m}};F.memo=function(e,t){return{$$typeof:gm,type:e,compare:t===void 0?null:t}};F.startTransition=function(e){var t=Qi.transition;Qi.transition={};try{e()}finally{Qi.transition=t}};F.unstable_act=Df;F.useCallback=function(e,t){return Ie.current.useCallback(e,t)};F.useContext=function(e){return Ie.current.useContext(e)};F.useDebugValue=function(){};F.useDeferredValue=function(e){return Ie.current.useDeferredValue(e)};F.useEffect=function(e,t){return Ie.current.useEffect(e,t)};F.useId=function(){return Ie.current.useId()};F.useImperativeHandle=function(e,t,n){return Ie.current.useImperativeHandle(e,t,n)};F.useInsertionEffect=function(e,t){return Ie.current.useInsertionEffect(e,t)};F.useLayoutEffect=function(e,t){return Ie.current.useLayoutEffect(e,t)};F.useMemo=function(e,t){return Ie.current.useMemo(e,t)};F.useReducer=function(e,t,n){return Ie.current.useReducer(e,t,n)};F.useRef=function(e){return Ie.current.useRef(e)};F.useState=function(e){return Ie.current.useState(e)};F.useSyncExternalStore=function(e,t,n){return Ie.current.useSyncExternalStore(e,t,n)};F.useTransition=function(){return Ie.current.useTransition()};F.version="18.3.1";Pf.exports=F;var jt=Pf.exports;const j=Ef(jt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=jt,Pm=Symbol.for("react.element"),Cm=Symbol.for("react.fragment"),Nm=Object.prototype.hasOwnProperty,Om=xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tm={key:!0,ref:!0,__self:!0,__source:!0};function jf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Nm.call(t,r)&&!Tm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Pm,type:e,key:s,ref:o,props:i,_owner:Om.current}}Ws.Fragment=Cm;Ws.jsx=jf;Ws.jsxs=jf;xf.exports=Ws;var w=xf.exports,Rf={exports:{}},Ke={},Lf={exports:{}},bf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,N){var O=I.length;I.push(N);e:for(;0<O;){var B=O-1>>>1,Y=I[B];if(0<i(Y,N))I[B]=N,I[O]=Y,O=B;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var N=I[0],O=I.pop();if(O!==N){I[0]=O;e:for(var B=0,Y=I.length,Ot=Y>>>1;B<Ot;){var it=2*(B+1)-1,st=I[it],G=it+1,zn=I[G];if(0>i(st,O))G<Y&&0>i(zn,st)?(I[B]=zn,I[G]=O,B=G):(I[B]=st,I[it]=O,B=it);else if(G<Y&&0>i(zn,O))I[B]=zn,I[G]=O,B=G;else break e}}return N}function i(I,N){var O=I.sortIndex-N.sortIndex;return O!==0?O:I.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,f=null,h=3,y=!1,v=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(I){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=I)r(u),N.sortIndex=N.expirationTime,t(a,N);else break;N=n(u)}}function S(I){if(k=!1,p(I),!v)if(n(a)!==null)v=!0,Ht(C);else{var N=n(u);N!==null&&Wt(S,N.startTime-I)}}function C(I,N){v=!1,k&&(k=!1,m(D),D=-1),y=!0;var O=h;try{for(p(N),f=n(a);f!==null&&(!(f.expirationTime>N)||I&&!Z());){var B=f.callback;if(typeof B=="function"){f.callback=null,h=f.priorityLevel;var Y=B(f.expirationTime<=N);N=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(a)&&r(a),p(N)}else r(a);f=n(a)}if(f!==null)var Ot=!0;else{var it=n(u);it!==null&&Wt(S,it.startTime-N),Ot=!1}return Ot}finally{f=null,h=O,y=!1}}var T=!1,A=null,D=-1,V=5,b=-1;function Z(){return!(e.unstable_now()-b<V)}function le(){if(A!==null){var I=e.unstable_now();b=I;var N=!0;try{N=A(!0,I)}finally{N?fe():(T=!1,A=null)}}else T=!1}var fe;if(typeof d=="function")fe=function(){d(le)};else if(typeof MessageChannel<"u"){var Nt=new MessageChannel,gn=Nt.port2;Nt.port1.onmessage=le,fe=function(){gn.postMessage(null)}}else fe=function(){P(le,0)};function Ht(I){A=I,T||(T=!0,fe())}function Wt(I,N){D=P(function(){I(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,Ht(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var N=3;break;default:N=h}var O=h;h=N;try{return I()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,N){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var O=h;h=I;try{return N()}finally{h=O}},e.unstable_scheduleCallback=function(I,N,O){var B=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?B+O:B):O=B,I){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,I={id:c++,callback:N,priorityLevel:I,startTime:O,expirationTime:Y,sortIndex:-1},O>B?(I.sortIndex=O,t(u,I),n(a)===null&&I===n(u)&&(k?(m(D),D=-1):k=!0,Wt(S,O-B))):(I.sortIndex=Y,t(a,I),v||y||(v=!0,Ht(C))),I},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(I){var N=h;return function(){var O=h;h=N;try{return I.apply(this,arguments)}finally{h=O}}}})(bf);Lf.exports=bf;var Am=Lf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im=jt,We=Am;function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zf=new Set,Qr={};function Ln(e,t){ir(e,t),ir(e+"Capture",t)}function ir(e,t){for(Qr[e]=t,e=0;e<t.length;e++)zf.add(t[e])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nl=Object.prototype.hasOwnProperty,Mm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vu={},Hu={};function Dm(e){return nl.call(Hu,e)?!0:nl.call(Vu,e)?!1:Mm.test(e)?Hu[e]=!0:(Vu[e]=!0,!1)}function jm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Rm(e,t,n,r){if(t===null||typeof t>"u"||jm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){we[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];we[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){we[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){we[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){we[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){we[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){we[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){we[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){we[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var ga=/[\-:]([a-z])/g;function va(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ga,va);we[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ga,va);we[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ga,va);we[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){we[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});we.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){we[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function wa(e,t,n,r){var i=we.hasOwnProperty(t)?we[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Rm(t,n,i,r)&&(n=null),r||i===null?Dm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ut=Im.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pi=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),Sa=Symbol.for("react.strict_mode"),rl=Symbol.for("react.profiler"),$f=Symbol.for("react.provider"),Ff=Symbol.for("react.context"),ka=Symbol.for("react.forward_ref"),il=Symbol.for("react.suspense"),sl=Symbol.for("react.suspense_list"),_a=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Bf=Symbol.for("react.offscreen"),Wu=Symbol.iterator;function Sr(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,So;function Ir(e){if(So===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);So=t&&t[1]||""}return`
`+So+e}var ko=!1;function _o(e,t){if(!e||ko)return"";ko=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{ko=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ir(e):""}function Lm(e){switch(e.tag){case 5:return Ir(e.type);case 16:return Ir("Lazy");case 13:return Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 2:case 15:return e=_o(e.type,!1),e;case 11:return e=_o(e.type.render,!1),e;case 1:return e=_o(e.type,!0),e;default:return""}}function ol(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bn:return"Fragment";case Fn:return"Portal";case rl:return"Profiler";case Sa:return"StrictMode";case il:return"Suspense";case sl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ff:return(e.displayName||"Context")+".Consumer";case $f:return(e._context.displayName||"Context")+".Provider";case ka:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _a:return t=e.displayName||null,t!==null?t:ol(e.type)||"Memo";case Kt:t=e._payload,e=e._init;try{return ol(e(t))}catch{}}return null}function bm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(t);case 8:return t===Sa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Uf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zm(e){var t=Uf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ci(e){e._valueTracker||(e._valueTracker=zm(e))}function Vf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Uf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ll(e,t){var n=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hf(e,t){t=t.checked,t!=null&&wa(e,"checked",t,!1)}function al(e,t){Hf(e,t);var n=cn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ul(e,t.type,n):t.hasOwnProperty("defaultValue")&&ul(e,t.type,cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ul(e,t,n){(t!=="number"||fs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Mr=Array.isArray;function Zn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function cl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(x(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ku(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(x(92));if(Mr(n)){if(1<n.length)throw Error(x(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cn(n)}}function Wf(e,t){var n=cn(t.value),r=cn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Qu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ni,qf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ni=Ni||document.createElement("div"),Ni.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ni.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$m=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(e){$m.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zr[t]=zr[e]})});function Kf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||zr.hasOwnProperty(e)&&zr[e]?(""+t).trim():t+"px"}function Qf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Kf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Fm=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(Fm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(x(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(x(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(x(61))}if(t.style!=null&&typeof t.style!="object")throw Error(x(62))}}function hl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pl=null;function Ea(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ml=null,Gn=null,er=null;function Ju(e){if(e=ki(e)){if(typeof ml!="function")throw Error(x(280));var t=e.stateNode;t&&(t=Js(t),ml(e.stateNode,e.type,t))}}function Jf(e){Gn?er?er.push(e):er=[e]:Gn=e}function Xf(){if(Gn){var e=Gn,t=er;if(er=Gn=null,Ju(e),t)for(e=0;e<t.length;e++)Ju(t[e])}}function Zf(e,t){return e(t)}function Gf(){}var Eo=!1;function ed(e,t,n){if(Eo)return e(t,n);Eo=!0;try{return Zf(e,t,n)}finally{Eo=!1,(Gn!==null||er!==null)&&(Gf(),Xf())}}function Xr(e,t){var n=e.stateNode;if(n===null)return null;var r=Js(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(x(231,t,typeof n));return n}var yl=!1;if(bt)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){yl=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{yl=!1}function Bm(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var $r=!1,ds=null,hs=!1,gl=null,Um={onError:function(e){$r=!0,ds=e}};function Vm(e,t,n,r,i,s,o,l,a){$r=!1,ds=null,Bm.apply(Um,arguments)}function Hm(e,t,n,r,i,s,o,l,a){if(Vm.apply(this,arguments),$r){if($r){var u=ds;$r=!1,ds=null}else throw Error(x(198));hs||(hs=!0,gl=u)}}function bn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function td(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xu(e){if(bn(e)!==e)throw Error(x(188))}function Wm(e){var t=e.alternate;if(!t){if(t=bn(e),t===null)throw Error(x(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xu(i),e;if(s===r)return Xu(i),t;s=s.sibling}throw Error(x(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?e:t}function nd(e){return e=Wm(e),e!==null?rd(e):null}function rd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rd(e);if(t!==null)return t;e=e.sibling}return null}var id=We.unstable_scheduleCallback,Zu=We.unstable_cancelCallback,Ym=We.unstable_shouldYield,qm=We.unstable_requestPaint,oe=We.unstable_now,Km=We.unstable_getCurrentPriorityLevel,xa=We.unstable_ImmediatePriority,sd=We.unstable_UserBlockingPriority,ps=We.unstable_NormalPriority,Qm=We.unstable_LowPriority,od=We.unstable_IdlePriority,Ys=null,kt=null;function Jm(e){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Ys,e,void 0,(e.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:Gm,Xm=Math.log,Zm=Math.LN2;function Gm(e){return e>>>=0,e===0?32:31-(Xm(e)/Zm|0)|0}var Oi=64,Ti=4194304;function Dr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ms(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Dr(l):(s&=o,s!==0&&(r=Dr(s)))}else o=n&~i,o!==0?r=Dr(o):s!==0&&(r=Dr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ht(t),i=1<<n,r|=e[n],t&=~i;return r}function ey(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ty(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ht(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=ey(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function vl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ld(){var e=Oi;return Oi<<=1,!(Oi&4194240)&&(Oi=64),e}function xo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ht(t),e[t]=n}function ny(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ht(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Pa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ht(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var W=0;function ad(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ud,Ca,cd,fd,dd,wl=!1,Ai=[],en=null,tn=null,nn=null,Zr=new Map,Gr=new Map,Jt=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gu(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(t.pointerId)}}function _r(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ki(t),t!==null&&Ca(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function iy(e,t,n,r,i){switch(t){case"focusin":return en=_r(en,e,t,n,r,i),!0;case"dragenter":return tn=_r(tn,e,t,n,r,i),!0;case"mouseover":return nn=_r(nn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zr.set(s,_r(Zr.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gr.set(s,_r(Gr.get(s)||null,e,t,n,r,i)),!0}return!1}function hd(e){var t=Pn(e.target);if(t!==null){var n=bn(t);if(n!==null){if(t=n.tag,t===13){if(t=td(n),t!==null){e.blockedOn=t,dd(e.priority,function(){cd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);pl=r,n.target.dispatchEvent(r),pl=null}else return t=ki(n),t!==null&&Ca(t),e.blockedOn=n,!1;t.shift()}return!0}function ec(e,t,n){Ji(e)&&n.delete(t)}function sy(){wl=!1,en!==null&&Ji(en)&&(en=null),tn!==null&&Ji(tn)&&(tn=null),nn!==null&&Ji(nn)&&(nn=null),Zr.forEach(ec),Gr.forEach(ec)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,wl||(wl=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,sy)))}function ei(e){function t(i){return Er(i,e)}if(0<Ai.length){Er(Ai[0],e);for(var n=1;n<Ai.length;n++){var r=Ai[n];r.blockedOn===e&&(r.blockedOn=null)}}for(en!==null&&Er(en,e),tn!==null&&Er(tn,e),nn!==null&&Er(nn,e),Zr.forEach(t),Gr.forEach(t),n=0;n<Jt.length;n++)r=Jt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)hd(n),n.blockedOn===null&&Jt.shift()}var tr=Ut.ReactCurrentBatchConfig,ys=!0;function oy(e,t,n,r){var i=W,s=tr.transition;tr.transition=null;try{W=1,Na(e,t,n,r)}finally{W=i,tr.transition=s}}function ly(e,t,n,r){var i=W,s=tr.transition;tr.transition=null;try{W=4,Na(e,t,n,r)}finally{W=i,tr.transition=s}}function Na(e,t,n,r){if(ys){var i=Sl(e,t,n,r);if(i===null)jo(e,t,r,gs,n),Gu(e,r);else if(iy(i,e,t,n,r))r.stopPropagation();else if(Gu(e,r),t&4&&-1<ry.indexOf(e)){for(;i!==null;){var s=ki(i);if(s!==null&&ud(s),s=Sl(e,t,n,r),s===null&&jo(e,t,r,gs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else jo(e,t,r,null,n)}}var gs=null;function Sl(e,t,n,r){if(gs=null,e=Ea(r),e=Pn(e),e!==null)if(t=bn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=td(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gs=e,null}function pd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Km()){case xa:return 1;case sd:return 4;case ps:case Qm:return 16;case od:return 536870912;default:return 16}default:return 16}}var Zt=null,Oa=null,Xi=null;function md(){if(Xi)return Xi;var e,t=Oa,n=t.length,r,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Xi=i.slice(e,1<r?1-r:void 0)}function Zi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ii(){return!0}function tc(){return!1}function Qe(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ii:tc,this.isPropagationStopped=tc,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=Qe(pr),Si=ne({},pr,{view:0,detail:0}),ay=Qe(Si),Po,Co,xr,qs=ne({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Aa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xr&&(xr&&e.type==="mousemove"?(Po=e.screenX-xr.screenX,Co=e.screenY-xr.screenY):Co=Po=0,xr=e),Po)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),nc=Qe(qs),uy=ne({},qs,{dataTransfer:0}),cy=Qe(uy),fy=ne({},Si,{relatedTarget:0}),No=Qe(fy),dy=ne({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=Qe(dy),py=ne({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),my=Qe(py),yy=ne({},pr,{data:0}),rc=Qe(yy),gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wy[e])?!!t[e]:!1}function Aa(){return Sy}var ky=ne({},Si,{key:function(e){if(e.key){var t=gy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Aa,charCode:function(e){return e.type==="keypress"?Zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_y=Qe(ky),Ey=ne({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=Qe(Ey),xy=ne({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Aa}),Py=Qe(xy),Cy=ne({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ny=Qe(Cy),Oy=ne({},qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ty=Qe(Oy),Ay=[9,13,27,32],Ia=bt&&"CompositionEvent"in window,Fr=null;bt&&"documentMode"in document&&(Fr=document.documentMode);var Iy=bt&&"TextEvent"in window&&!Fr,yd=bt&&(!Ia||Fr&&8<Fr&&11>=Fr),sc=" ",oc=!1;function gd(e,t){switch(e){case"keyup":return Ay.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function My(e,t){switch(e){case"compositionend":return vd(t);case"keypress":return t.which!==32?null:(oc=!0,sc);case"textInput":return e=t.data,e===sc&&oc?null:e;default:return null}}function Dy(e,t){if(Un)return e==="compositionend"||!Ia&&gd(e,t)?(e=md(),Xi=Oa=Zt=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yd&&t.locale!=="ko"?null:t.data;default:return null}}var jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jy[e.type]:t==="textarea"}function wd(e,t,n,r){Jf(r),t=vs(t,"onChange"),0<t.length&&(n=new Ta("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Br=null,ti=null;function Ry(e){Ad(e,0)}function Ks(e){var t=Wn(e);if(Vf(t))return e}function Ly(e,t){if(e==="change")return t}var Sd=!1;if(bt){var Oo;if(bt){var To="oninput"in document;if(!To){var ac=document.createElement("div");ac.setAttribute("oninput","return;"),To=typeof ac.oninput=="function"}Oo=To}else Oo=!1;Sd=Oo&&(!document.documentMode||9<document.documentMode)}function uc(){Br&&(Br.detachEvent("onpropertychange",kd),ti=Br=null)}function kd(e){if(e.propertyName==="value"&&Ks(ti)){var t=[];wd(t,ti,e,Ea(e)),ed(Ry,t)}}function by(e,t,n){e==="focusin"?(uc(),Br=t,ti=n,Br.attachEvent("onpropertychange",kd)):e==="focusout"&&uc()}function zy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ks(ti)}function $y(e,t){if(e==="click")return Ks(t)}function Fy(e,t){if(e==="input"||e==="change")return Ks(t)}function By(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mt=typeof Object.is=="function"?Object.is:By;function ni(e,t){if(mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!nl.call(t,i)||!mt(e[i],t[i]))return!1}return!0}function cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fc(e,t){var n=cc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cc(n)}}function _d(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_d(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ed(){for(var e=window,t=fs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fs(e.document)}return t}function Ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uy(e){var t=Ed(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_d(n.ownerDocument.documentElement,n)){if(r!==null&&Ma(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=fc(n,s);var o=fc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vy=bt&&"documentMode"in document&&11>=document.documentMode,Vn=null,kl=null,Ur=null,_l=!1;function dc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_l||Vn==null||Vn!==fs(r)||(r=Vn,"selectionStart"in r&&Ma(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&ni(Ur,r)||(Ur=r,r=vs(kl,"onSelect"),0<r.length&&(t=new Ta("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vn)))}function Mi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hn={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},Ao={},xd={};bt&&(xd=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function Qs(e){if(Ao[e])return Ao[e];if(!Hn[e])return e;var t=Hn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xd)return Ao[e]=t[n];return e}var Pd=Qs("animationend"),Cd=Qs("animationiteration"),Nd=Qs("animationstart"),Od=Qs("transitionend"),Td=new Map,hc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(e,t){Td.set(e,t),Ln(t,[e])}for(var Io=0;Io<hc.length;Io++){var Mo=hc[Io],Hy=Mo.toLowerCase(),Wy=Mo[0].toUpperCase()+Mo.slice(1);pn(Hy,"on"+Wy)}pn(Pd,"onAnimationEnd");pn(Cd,"onAnimationIteration");pn(Nd,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(Od,"onTransitionEnd");ir("onMouseEnter",["mouseout","mouseover"]);ir("onMouseLeave",["mouseout","mouseover"]);ir("onPointerEnter",["pointerout","pointerover"]);ir("onPointerLeave",["pointerout","pointerover"]);Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function pc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Hm(r,t,void 0,e),e.currentTarget=null}function Ad(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;pc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;pc(i,l,u),s=a}}}if(hs)throw e=gl,hs=!1,gl=null,e}function Q(e,t){var n=t[Nl];n===void 0&&(n=t[Nl]=new Set);var r=e+"__bubble";n.has(r)||(Id(t,e,2,!1),n.add(r))}function Do(e,t,n){var r=0;t&&(r|=4),Id(n,e,r,t)}var Di="_reactListening"+Math.random().toString(36).slice(2);function ri(e){if(!e[Di]){e[Di]=!0,zf.forEach(function(n){n!=="selectionchange"&&(Yy.has(n)||Do(n,!1,e),Do(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Di]||(t[Di]=!0,Do("selectionchange",!1,t))}}function Id(e,t,n,r){switch(pd(t)){case 1:var i=oy;break;case 4:i=ly;break;default:i=Na}n=i.bind(null,t,n,e),i=void 0,!yl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jo(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Pn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ed(function(){var u=s,c=Ea(n),f=[];e:{var h=Td.get(e);if(h!==void 0){var y=Ta,v=e;switch(e){case"keypress":if(Zi(n)===0)break e;case"keydown":case"keyup":y=_y;break;case"focusin":v="focus",y=No;break;case"focusout":v="blur",y=No;break;case"beforeblur":case"afterblur":y=No;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Py;break;case Pd:case Cd:case Nd:y=hy;break;case Od:y=Ny;break;case"scroll":y=ay;break;case"wheel":y=Ty;break;case"copy":case"cut":case"paste":y=my;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ic}var k=(t&4)!==0,P=!k&&e==="scroll",m=k?h!==null?h+"Capture":null:h;k=[];for(var d=u,p;d!==null;){p=d;var S=p.stateNode;if(p.tag===5&&S!==null&&(p=S,m!==null&&(S=Xr(d,m),S!=null&&k.push(ii(d,S,p)))),P)break;d=d.return}0<k.length&&(h=new y(h,v,null,n,c),f.push({event:h,listeners:k}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==pl&&(v=n.relatedTarget||n.fromElement)&&(Pn(v)||v[zt]))break e;if((y||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?Pn(v):null,v!==null&&(P=bn(v),v!==P||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(k=nc,S="onMouseLeave",m="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(k=ic,S="onPointerLeave",m="onPointerEnter",d="pointer"),P=y==null?h:Wn(y),p=v==null?h:Wn(v),h=new k(S,d+"leave",y,n,c),h.target=P,h.relatedTarget=p,S=null,Pn(c)===u&&(k=new k(m,d+"enter",v,n,c),k.target=p,k.relatedTarget=P,S=k),P=S,y&&v)t:{for(k=y,m=v,d=0,p=k;p;p=$n(p))d++;for(p=0,S=m;S;S=$n(S))p++;for(;0<d-p;)k=$n(k),d--;for(;0<p-d;)m=$n(m),p--;for(;d--;){if(k===m||m!==null&&k===m.alternate)break t;k=$n(k),m=$n(m)}k=null}else k=null;y!==null&&mc(f,h,y,k,!1),v!==null&&P!==null&&mc(f,P,v,k,!0)}}e:{if(h=u?Wn(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var C=Ly;else if(lc(h))if(Sd)C=Fy;else{C=zy;var T=by}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=$y);if(C&&(C=C(e,u))){wd(f,C,n,c);break e}T&&T(e,h,u),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&ul(h,"number",h.value)}switch(T=u?Wn(u):window,e){case"focusin":(lc(T)||T.contentEditable==="true")&&(Vn=T,kl=u,Ur=null);break;case"focusout":Ur=kl=Vn=null;break;case"mousedown":_l=!0;break;case"contextmenu":case"mouseup":case"dragend":_l=!1,dc(f,n,c);break;case"selectionchange":if(Vy)break;case"keydown":case"keyup":dc(f,n,c)}var A;if(Ia)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Un?gd(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(yd&&n.locale!=="ko"&&(Un||D!=="onCompositionStart"?D==="onCompositionEnd"&&Un&&(A=md()):(Zt=c,Oa="value"in Zt?Zt.value:Zt.textContent,Un=!0)),T=vs(u,D),0<T.length&&(D=new rc(D,e,null,n,c),f.push({event:D,listeners:T}),A?D.data=A:(A=vd(n),A!==null&&(D.data=A)))),(A=Iy?My(e,n):Dy(e,n))&&(u=vs(u,"onBeforeInput"),0<u.length&&(c=new rc("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=A))}Ad(f,t)})}function ii(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vs(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xr(e,n),s!=null&&r.unshift(ii(e,s,i)),s=Xr(e,t),s!=null&&r.push(ii(e,s,i))),e=e.return}return r}function $n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Xr(n,s),a!=null&&o.unshift(ii(n,a,l))):i||(a=Xr(n,s),a!=null&&o.push(ii(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var qy=/\r\n?/g,Ky=/\u0000|\uFFFD/g;function yc(e){return(typeof e=="string"?e:""+e).replace(qy,`
`).replace(Ky,"")}function ji(e,t,n){if(t=yc(t),yc(e)!==t&&n)throw Error(x(425))}function ws(){}var El=null,xl=null;function Pl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cl=typeof setTimeout=="function"?setTimeout:void 0,Qy=typeof clearTimeout=="function"?clearTimeout:void 0,gc=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof gc<"u"?function(e){return gc.resolve(null).then(e).catch(Xy)}:Cl;function Xy(e){setTimeout(function(){throw e})}function Ro(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ei(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ei(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mr=Math.random().toString(36).slice(2),St="__reactFiber$"+mr,si="__reactProps$"+mr,zt="__reactContainer$"+mr,Nl="__reactEvents$"+mr,Zy="__reactListeners$"+mr,Gy="__reactHandles$"+mr;function Pn(e){var t=e[St];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[St]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vc(e);e!==null;){if(n=e[St])return n;e=vc(e)}return t}e=n,n=e.parentNode}return null}function ki(e){return e=e[St]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(x(33))}function Js(e){return e[si]||null}var Ol=[],Yn=-1;function mn(e){return{current:e}}function J(e){0>Yn||(e.current=Ol[Yn],Ol[Yn]=null,Yn--)}function q(e,t){Yn++,Ol[Yn]=e.current,e.current=t}var fn={},Pe=mn(fn),Le=mn(!1),An=fn;function sr(e,t){var n=e.type.contextTypes;if(!n)return fn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function be(e){return e=e.childContextTypes,e!=null}function Ss(){J(Le),J(Pe)}function wc(e,t,n){if(Pe.current!==fn)throw Error(x(168));q(Pe,t),q(Le,n)}function Md(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(x(108,bm(e)||"Unknown",i));return ne({},n,r)}function ks(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fn,An=Pe.current,q(Pe,e),q(Le,Le.current),!0}function Sc(e,t,n){var r=e.stateNode;if(!r)throw Error(x(169));n?(e=Md(e,t,An),r.__reactInternalMemoizedMergedChildContext=e,J(Le),J(Pe),q(Pe,e)):J(Le),q(Le,n)}var It=null,Xs=!1,Lo=!1;function Dd(e){It===null?It=[e]:It.push(e)}function eg(e){Xs=!0,Dd(e)}function yn(){if(!Lo&&It!==null){Lo=!0;var e=0,t=W;try{var n=It;for(W=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}It=null,Xs=!1}catch(i){throw It!==null&&(It=It.slice(e+1)),id(xa,yn),i}finally{W=t,Lo=!1}}return null}var qn=[],Kn=0,_s=null,Es=0,Xe=[],Ze=0,In=null,Mt=1,Dt="";function _n(e,t){qn[Kn++]=Es,qn[Kn++]=_s,_s=e,Es=t}function jd(e,t,n){Xe[Ze++]=Mt,Xe[Ze++]=Dt,Xe[Ze++]=In,In=e;var r=Mt;e=Dt;var i=32-ht(r)-1;r&=~(1<<i),n+=1;var s=32-ht(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Mt=1<<32-ht(t)+i|n<<i|r,Dt=s+e}else Mt=1<<s|n<<i|r,Dt=e}function Da(e){e.return!==null&&(_n(e,1),jd(e,1,0))}function ja(e){for(;e===_s;)_s=qn[--Kn],qn[Kn]=null,Es=qn[--Kn],qn[Kn]=null;for(;e===In;)In=Xe[--Ze],Xe[Ze]=null,Dt=Xe[--Ze],Xe[Ze]=null,Mt=Xe[--Ze],Xe[Ze]=null}var Ve=null,Be=null,X=!1,ct=null;function Rd(e,t){var n=et(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function kc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ve=e,Be=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ve=e,Be=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=In!==null?{id:Mt,overflow:Dt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=et(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ve=e,Be=null,!0):!1;default:return!1}}function Tl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Al(e){if(X){var t=Be;if(t){var n=t;if(!kc(e,t)){if(Tl(e))throw Error(x(418));t=rn(n.nextSibling);var r=Ve;t&&kc(e,t)?Rd(r,n):(e.flags=e.flags&-4097|2,X=!1,Ve=e)}}else{if(Tl(e))throw Error(x(418));e.flags=e.flags&-4097|2,X=!1,Ve=e}}}function _c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ve=e}function Ri(e){if(e!==Ve)return!1;if(!X)return _c(e),X=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pl(e.type,e.memoizedProps)),t&&(t=Be)){if(Tl(e))throw Ld(),Error(x(418));for(;t;)Rd(e,t),t=rn(t.nextSibling)}if(_c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Be=rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Be=null}}else Be=Ve?rn(e.stateNode.nextSibling):null;return!0}function Ld(){for(var e=Be;e;)e=rn(e.nextSibling)}function or(){Be=Ve=null,X=!1}function Ra(e){ct===null?ct=[e]:ct.push(e)}var tg=Ut.ReactCurrentBatchConfig;function Pr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,e))}return e}function Li(e,t){throw e=Object.prototype.toString.call(t),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ec(e){var t=e._init;return t(e._payload)}function bd(e){function t(m,d){if(e){var p=m.deletions;p===null?(m.deletions=[d],m.flags|=16):p.push(d)}}function n(m,d){if(!e)return null;for(;d!==null;)t(m,d),d=d.sibling;return null}function r(m,d){for(m=new Map;d!==null;)d.key!==null?m.set(d.key,d):m.set(d.index,d),d=d.sibling;return m}function i(m,d){return m=an(m,d),m.index=0,m.sibling=null,m}function s(m,d,p){return m.index=p,e?(p=m.alternate,p!==null?(p=p.index,p<d?(m.flags|=2,d):p):(m.flags|=2,d)):(m.flags|=1048576,d)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,d,p,S){return d===null||d.tag!==6?(d=Vo(p,m.mode,S),d.return=m,d):(d=i(d,p),d.return=m,d)}function a(m,d,p,S){var C=p.type;return C===Bn?c(m,d,p.props.children,S,p.key):d!==null&&(d.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Kt&&Ec(C)===d.type)?(S=i(d,p.props),S.ref=Pr(m,d,p),S.return=m,S):(S=ss(p.type,p.key,p.props,null,m.mode,S),S.ref=Pr(m,d,p),S.return=m,S)}function u(m,d,p,S){return d===null||d.tag!==4||d.stateNode.containerInfo!==p.containerInfo||d.stateNode.implementation!==p.implementation?(d=Ho(p,m.mode,S),d.return=m,d):(d=i(d,p.children||[]),d.return=m,d)}function c(m,d,p,S,C){return d===null||d.tag!==7?(d=Tn(p,m.mode,S,C),d.return=m,d):(d=i(d,p),d.return=m,d)}function f(m,d,p){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Vo(""+d,m.mode,p),d.return=m,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Pi:return p=ss(d.type,d.key,d.props,null,m.mode,p),p.ref=Pr(m,null,d),p.return=m,p;case Fn:return d=Ho(d,m.mode,p),d.return=m,d;case Kt:var S=d._init;return f(m,S(d._payload),p)}if(Mr(d)||Sr(d))return d=Tn(d,m.mode,p,null),d.return=m,d;Li(m,d)}return null}function h(m,d,p,S){var C=d!==null?d.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return C!==null?null:l(m,d,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Pi:return p.key===C?a(m,d,p,S):null;case Fn:return p.key===C?u(m,d,p,S):null;case Kt:return C=p._init,h(m,d,C(p._payload),S)}if(Mr(p)||Sr(p))return C!==null?null:c(m,d,p,S,null);Li(m,p)}return null}function y(m,d,p,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(p)||null,l(d,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pi:return m=m.get(S.key===null?p:S.key)||null,a(d,m,S,C);case Fn:return m=m.get(S.key===null?p:S.key)||null,u(d,m,S,C);case Kt:var T=S._init;return y(m,d,p,T(S._payload),C)}if(Mr(S)||Sr(S))return m=m.get(p)||null,c(d,m,S,C,null);Li(d,S)}return null}function v(m,d,p,S){for(var C=null,T=null,A=d,D=d=0,V=null;A!==null&&D<p.length;D++){A.index>D?(V=A,A=null):V=A.sibling;var b=h(m,A,p[D],S);if(b===null){A===null&&(A=V);break}e&&A&&b.alternate===null&&t(m,A),d=s(b,d,D),T===null?C=b:T.sibling=b,T=b,A=V}if(D===p.length)return n(m,A),X&&_n(m,D),C;if(A===null){for(;D<p.length;D++)A=f(m,p[D],S),A!==null&&(d=s(A,d,D),T===null?C=A:T.sibling=A,T=A);return X&&_n(m,D),C}for(A=r(m,A);D<p.length;D++)V=y(A,m,D,p[D],S),V!==null&&(e&&V.alternate!==null&&A.delete(V.key===null?D:V.key),d=s(V,d,D),T===null?C=V:T.sibling=V,T=V);return e&&A.forEach(function(Z){return t(m,Z)}),X&&_n(m,D),C}function k(m,d,p,S){var C=Sr(p);if(typeof C!="function")throw Error(x(150));if(p=C.call(p),p==null)throw Error(x(151));for(var T=C=null,A=d,D=d=0,V=null,b=p.next();A!==null&&!b.done;D++,b=p.next()){A.index>D?(V=A,A=null):V=A.sibling;var Z=h(m,A,b.value,S);if(Z===null){A===null&&(A=V);break}e&&A&&Z.alternate===null&&t(m,A),d=s(Z,d,D),T===null?C=Z:T.sibling=Z,T=Z,A=V}if(b.done)return n(m,A),X&&_n(m,D),C;if(A===null){for(;!b.done;D++,b=p.next())b=f(m,b.value,S),b!==null&&(d=s(b,d,D),T===null?C=b:T.sibling=b,T=b);return X&&_n(m,D),C}for(A=r(m,A);!b.done;D++,b=p.next())b=y(A,m,D,b.value,S),b!==null&&(e&&b.alternate!==null&&A.delete(b.key===null?D:b.key),d=s(b,d,D),T===null?C=b:T.sibling=b,T=b);return e&&A.forEach(function(le){return t(m,le)}),X&&_n(m,D),C}function P(m,d,p,S){if(typeof p=="object"&&p!==null&&p.type===Bn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Pi:e:{for(var C=p.key,T=d;T!==null;){if(T.key===C){if(C=p.type,C===Bn){if(T.tag===7){n(m,T.sibling),d=i(T,p.props.children),d.return=m,m=d;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Kt&&Ec(C)===T.type){n(m,T.sibling),d=i(T,p.props),d.ref=Pr(m,T,p),d.return=m,m=d;break e}n(m,T);break}else t(m,T);T=T.sibling}p.type===Bn?(d=Tn(p.props.children,m.mode,S,p.key),d.return=m,m=d):(S=ss(p.type,p.key,p.props,null,m.mode,S),S.ref=Pr(m,d,p),S.return=m,m=S)}return o(m);case Fn:e:{for(T=p.key;d!==null;){if(d.key===T)if(d.tag===4&&d.stateNode.containerInfo===p.containerInfo&&d.stateNode.implementation===p.implementation){n(m,d.sibling),d=i(d,p.children||[]),d.return=m,m=d;break e}else{n(m,d);break}else t(m,d);d=d.sibling}d=Ho(p,m.mode,S),d.return=m,m=d}return o(m);case Kt:return T=p._init,P(m,d,T(p._payload),S)}if(Mr(p))return v(m,d,p,S);if(Sr(p))return k(m,d,p,S);Li(m,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,d!==null&&d.tag===6?(n(m,d.sibling),d=i(d,p),d.return=m,m=d):(n(m,d),d=Vo(p,m.mode,S),d.return=m,m=d),o(m)):n(m,d)}return P}var lr=bd(!0),zd=bd(!1),xs=mn(null),Ps=null,Qn=null,La=null;function ba(){La=Qn=Ps=null}function za(e){var t=xs.current;J(xs),e._currentValue=t}function Il(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){Ps=e,La=Qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Re=!0),e.firstContext=null)}function nt(e){var t=e._currentValue;if(La!==e)if(e={context:e,memoizedValue:t,next:null},Qn===null){if(Ps===null)throw Error(x(308));Qn=e,Ps.dependencies={lanes:0,firstContext:e}}else Qn=Qn.next=e;return t}var Cn=null;function $a(e){Cn===null?Cn=[e]:Cn.push(e)}function $d(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,$a(t)):(n.next=i.next,i.next=n),t.interleaved=n,$t(e,r)}function $t(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qt=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,U&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,$t(e,n)}return i=r.interleaved,i===null?(t.next=t,$a(r)):(t.next=i.next,i.next=t),r.interleaved=t,$t(e,n)}function Gi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pa(e,n)}}function xc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cs(e,t,n,r){var i=e.updateQueue;Qt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,y=l.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,k=l;switch(h=t,y=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){f=v.call(y,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,h=typeof v=="function"?v.call(y,f,h):v,h==null)break e;f=ne({},f,h);break e;case 2:Qt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=y,a=f):c=c.next=y,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Dn|=o,e.lanes=o,e.memoizedState=f}}function Pc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var _i={},_t=mn(_i),oi=mn(_i),li=mn(_i);function Nn(e){if(e===_i)throw Error(x(174));return e}function Ba(e,t){switch(q(li,t),q(oi,e),q(_t,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fl(t,e)}J(_t),q(_t,t)}function ar(){J(_t),J(oi),J(li)}function Bd(e){Nn(li.current);var t=Nn(_t.current),n=fl(t,e.type);t!==n&&(q(oi,e),q(_t,n))}function Ua(e){oi.current===e&&(J(_t),J(oi))}var ee=mn(0);function Ns(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bo=[];function Va(){for(var e=0;e<bo.length;e++)bo[e]._workInProgressVersionPrimary=null;bo.length=0}var es=Ut.ReactCurrentDispatcher,zo=Ut.ReactCurrentBatchConfig,Mn=0,te=null,de=null,pe=null,Os=!1,Vr=!1,ai=0,ng=0;function Se(){throw Error(x(321))}function Ha(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mt(e[n],t[n]))return!1;return!0}function Wa(e,t,n,r,i,s){if(Mn=s,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,es.current=e===null||e.memoizedState===null?og:lg,e=n(r,i),Vr){s=0;do{if(Vr=!1,ai=0,25<=s)throw Error(x(301));s+=1,pe=de=null,t.updateQueue=null,es.current=ag,e=n(r,i)}while(Vr)}if(es.current=Ts,t=de!==null&&de.next!==null,Mn=0,pe=de=te=null,Os=!1,t)throw Error(x(300));return e}function Ya(){var e=ai!==0;return ai=0,e}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?te.memoizedState=pe=e:pe=pe.next=e,pe}function rt(){if(de===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var t=pe===null?te.memoizedState:pe.next;if(t!==null)pe=t,de=e;else{if(e===null)throw Error(x(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},pe===null?te.memoizedState=pe=e:pe=pe.next=e}return pe}function ui(e,t){return typeof t=="function"?t(e):t}function $o(e){var t=rt(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=de,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Mn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,te.lanes|=c,Dn|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,mt(r,t.memoizedState)||(Re=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,te.lanes|=s,Dn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fo(e){var t=rt(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);mt(s,t.memoizedState)||(Re=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ud(){}function Vd(e,t){var n=te,r=rt(),i=t(),s=!mt(r.memoizedState,i);if(s&&(r.memoizedState=i,Re=!0),r=r.queue,qa(Yd.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||pe!==null&&pe.memoizedState.tag&1){if(n.flags|=2048,ci(9,Wd.bind(null,n,r,i,t),void 0,null),me===null)throw Error(x(349));Mn&30||Hd(n,t,i)}return i}function Hd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wd(e,t,n,r){t.value=n,t.getSnapshot=r,qd(t)&&Kd(e)}function Yd(e,t,n){return n(function(){qd(t)&&Kd(e)})}function qd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mt(e,n)}catch{return!0}}function Kd(e){var t=$t(e,1);t!==null&&pt(t,e,1,-1)}function Cc(e){var t=vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:e},t.queue=e,e=e.dispatch=sg.bind(null,te,e),[t.memoizedState,e]}function ci(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qd(){return rt().memoizedState}function ts(e,t,n,r){var i=vt();te.flags|=e,i.memoizedState=ci(1|t,n,void 0,r===void 0?null:r)}function Zs(e,t,n,r){var i=rt();r=r===void 0?null:r;var s=void 0;if(de!==null){var o=de.memoizedState;if(s=o.destroy,r!==null&&Ha(r,o.deps)){i.memoizedState=ci(t,n,s,r);return}}te.flags|=e,i.memoizedState=ci(1|t,n,s,r)}function Nc(e,t){return ts(8390656,8,e,t)}function qa(e,t){return Zs(2048,8,e,t)}function Jd(e,t){return Zs(4,2,e,t)}function Xd(e,t){return Zs(4,4,e,t)}function Zd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gd(e,t,n){return n=n!=null?n.concat([e]):null,Zs(4,4,Zd.bind(null,t,e),n)}function Ka(){}function eh(e,t){var n=rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ha(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function th(e,t){var n=rt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ha(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nh(e,t,n){return Mn&21?(mt(n,t)||(n=ld(),te.lanes|=n,Dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Re=!0),e.memoizedState=n)}function rg(e,t){var n=W;W=n!==0&&4>n?n:4,e(!0);var r=zo.transition;zo.transition={};try{e(!1),t()}finally{W=n,zo.transition=r}}function rh(){return rt().memoizedState}function ig(e,t,n){var r=ln(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ih(e))sh(t,n);else if(n=$d(e,t,n,r),n!==null){var i=Ae();pt(n,e,r,i),oh(n,t,r)}}function sg(e,t,n){var r=ln(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ih(e))sh(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,mt(l,o)){var a=t.interleaved;a===null?(i.next=i,$a(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=$d(e,t,i,r),n!==null&&(i=Ae(),pt(n,e,r,i),oh(n,t,r))}}function ih(e){var t=e.alternate;return e===te||t!==null&&t===te}function sh(e,t){Vr=Os=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pa(e,n)}}var Ts={readContext:nt,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},og={readContext:nt,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:nt,useEffect:Nc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ts(4194308,4,Zd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ts(4194308,4,e,t)},useInsertionEffect:function(e,t){return ts(4,2,e,t)},useMemo:function(e,t){var n=vt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ig.bind(null,te,e),[r.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:Cc,useDebugValue:Ka,useDeferredValue:function(e){return vt().memoizedState=e},useTransition:function(){var e=Cc(!1),t=e[0];return e=rg.bind(null,e[1]),vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=te,i=vt();if(X){if(n===void 0)throw Error(x(407));n=n()}else{if(n=t(),me===null)throw Error(x(349));Mn&30||Hd(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Nc(Yd.bind(null,r,s,e),[e]),r.flags|=2048,ci(9,Wd.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vt(),t=me.identifierPrefix;if(X){var n=Dt,r=Mt;n=(r&~(1<<32-ht(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ai++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ng++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lg={readContext:nt,useCallback:eh,useContext:nt,useEffect:qa,useImperativeHandle:Gd,useInsertionEffect:Jd,useLayoutEffect:Xd,useMemo:th,useReducer:$o,useRef:Qd,useState:function(){return $o(ui)},useDebugValue:Ka,useDeferredValue:function(e){var t=rt();return nh(t,de.memoizedState,e)},useTransition:function(){var e=$o(ui)[0],t=rt().memoizedState;return[e,t]},useMutableSource:Ud,useSyncExternalStore:Vd,useId:rh,unstable_isNewReconciler:!1},ag={readContext:nt,useCallback:eh,useContext:nt,useEffect:qa,useImperativeHandle:Gd,useInsertionEffect:Jd,useLayoutEffect:Xd,useMemo:th,useReducer:Fo,useRef:Qd,useState:function(){return Fo(ui)},useDebugValue:Ka,useDeferredValue:function(e){var t=rt();return de===null?t.memoizedState=e:nh(t,de.memoizedState,e)},useTransition:function(){var e=Fo(ui)[0],t=rt().memoizedState;return[e,t]},useMutableSource:Ud,useSyncExternalStore:Vd,useId:rh,unstable_isNewReconciler:!1};function lt(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ml(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gs={isMounted:function(e){return(e=e._reactInternals)?bn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ae(),i=ln(e),s=Rt(r,i);s.payload=t,n!=null&&(s.callback=n),t=sn(e,s,i),t!==null&&(pt(t,e,i,r),Gi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ae(),i=ln(e),s=Rt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=sn(e,s,i),t!==null&&(pt(t,e,i,r),Gi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ae(),r=ln(e),i=Rt(n,r);i.tag=2,t!=null&&(i.callback=t),t=sn(e,i,r),t!==null&&(pt(t,e,r,n),Gi(t,e,r))}};function Oc(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ni(n,r)||!ni(i,s):!0}function lh(e,t,n){var r=!1,i=fn,s=t.contextType;return typeof s=="object"&&s!==null?s=nt(s):(i=be(t)?An:Pe.current,r=t.contextTypes,s=(r=r!=null)?sr(e,i):fn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Tc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Gs.enqueueReplaceState(t,t.state,null)}function Dl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fa(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=nt(s):(s=be(t)?An:Pe.current,i.context=sr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ml(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Gs.enqueueReplaceState(i,i.state,null),Cs(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ur(e,t){try{var n="",r=t;do n+=Lm(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Bo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function jl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ug=typeof WeakMap=="function"?WeakMap:Map;function ah(e,t,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Is||(Is=!0,Hl=r),jl(e,t)},n}function uh(e,t,n){n=Rt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){jl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jl(e,t),typeof r!="function"&&(on===null?on=new Set([this]):on.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ac(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ug;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eg.bind(null,e,t,n),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rt(-1,1),t.tag=2,sn(n,t,1))),n.lanes|=1),e)}var cg=Ut.ReactCurrentOwner,Re=!1;function Oe(e,t,n,r){t.child=e===null?zd(t,null,n,r):lr(t,e.child,n,r)}function Dc(e,t,n,r,i){n=n.render;var s=t.ref;return nr(t,i),r=Wa(e,t,n,r,s,i),n=Ya(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ft(e,t,i)):(X&&n&&Da(t),t.flags|=1,Oe(e,t,r,i),t.child)}function jc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!nu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,ch(e,t,s,r,i)):(e=ss(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ni,n(o,r)&&e.ref===t.ref)return Ft(e,t,i)}return t.flags|=1,e=an(s,r),e.ref=t.ref,e.return=t,t.child=e}function ch(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ni(s,r)&&e.ref===t.ref)if(Re=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Re=!0);else return t.lanes=e.lanes,Ft(e,t,i)}return Rl(e,t,n,r,i)}function fh(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(Xn,Fe),Fe|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(Xn,Fe),Fe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,q(Xn,Fe),Fe|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,q(Xn,Fe),Fe|=r;return Oe(e,t,i,n),t.child}function dh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rl(e,t,n,r,i){var s=be(n)?An:Pe.current;return s=sr(t,s),nr(t,i),n=Wa(e,t,n,r,s,i),r=Ya(),e!==null&&!Re?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ft(e,t,i)):(X&&r&&Da(t),t.flags|=1,Oe(e,t,n,i),t.child)}function Rc(e,t,n,r,i){if(be(n)){var s=!0;ks(t)}else s=!1;if(nr(t,i),t.stateNode===null)ns(e,t),lh(t,n,r),Dl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nt(u):(u=be(n)?An:Pe.current,u=sr(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Tc(t,o,r,u),Qt=!1;var h=t.memoizedState;o.state=h,Cs(t,r,o,i),a=t.memoizedState,l!==r||h!==a||Le.current||Qt?(typeof c=="function"&&(Ml(t,n,c,r),a=t.memoizedState),(l=Qt||Oc(t,n,l,r,h,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:lt(t.type,l),o.props=u,f=t.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=nt(a):(a=be(n)?An:Pe.current,a=sr(t,a));var y=n.getDerivedStateFromProps;(c=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==a)&&Tc(t,o,r,a),Qt=!1,h=t.memoizedState,o.state=h,Cs(t,r,o,i);var v=t.memoizedState;l!==f||h!==v||Le.current||Qt?(typeof y=="function"&&(Ml(t,n,y,r),v=t.memoizedState),(u=Qt||Oc(t,n,u,r,h,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ll(e,t,n,r,s,i)}function Ll(e,t,n,r,i,s){dh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Sc(t,n,!1),Ft(e,t,s);r=t.stateNode,cg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=lr(t,e.child,null,s),t.child=lr(t,null,l,s)):Oe(e,t,l,s),t.memoizedState=r.state,i&&Sc(t,n,!0),t.child}function hh(e){var t=e.stateNode;t.pendingContext?wc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wc(e,t.context,!1),Ba(e,t.containerInfo)}function Lc(e,t,n,r,i){return or(),Ra(i),t.flags|=256,Oe(e,t,n,r),t.child}var bl={dehydrated:null,treeContext:null,retryLane:0};function zl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ph(e,t,n){var r=t.pendingProps,i=ee.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),q(ee,i&1),e===null)return Al(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=no(o,r,0,null),e=Tn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zl(n),t.memoizedState=bl,e):Qa(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=an(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=an(l,s):(s=Tn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?zl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=bl,r}return s=e.child,e=s.sibling,r=an(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Qa(e,t){return t=no({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bi(e,t,n,r){return r!==null&&Ra(r),lr(t,e.child,null,n),e=Qa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Bo(Error(x(422))),bi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=no({mode:"visible",children:r.children},i,0,null),s=Tn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&lr(t,e.child,null,o),t.child.memoizedState=zl(o),t.memoizedState=bl,s);if(!(t.mode&1))return bi(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(x(419)),r=Bo(s,r,void 0),bi(e,t,o,r)}if(l=(o&e.childLanes)!==0,Re||l){if(r=me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$t(e,i),pt(r,e,i,-1))}return tu(),r=Bo(Error(x(421))),bi(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=xg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Be=rn(i.nextSibling),Ve=t,X=!0,ct=null,e!==null&&(Xe[Ze++]=Mt,Xe[Ze++]=Dt,Xe[Ze++]=In,Mt=e.id,Dt=e.overflow,In=t),t=Qa(t,r.children),t.flags|=4096,t)}function bc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Il(e.return,t,n)}function Uo(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function mh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Oe(e,t,r.children,n),r=ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bc(e,n,t);else if(e.tag===19)bc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(q(ee,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ns(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ns(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ns(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ft(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(x(153));if(t.child!==null){for(e=t.child,n=an(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=an(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dg(e,t,n){switch(t.tag){case 3:hh(t),or();break;case 5:Bd(t);break;case 1:be(t.type)&&ks(t);break;case 4:Ba(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;q(xs,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(q(ee,ee.current&1),t.flags|=128,null):n&t.child.childLanes?ph(e,t,n):(q(ee,ee.current&1),e=Ft(e,t,n),e!==null?e.sibling:null);q(ee,ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),q(ee,ee.current),r)break;return null;case 22:case 23:return t.lanes=0,fh(e,t,n)}return Ft(e,t,n)}var yh,$l,gh,vh;yh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$l=function(){};gh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Nn(_t.current);var s=null;switch(n){case"input":i=ll(e,i),r=ll(e,r),s=[];break;case"select":i=ne({},i,{value:void 0}),r=ne({},r,{value:void 0}),s=[];break;case"textarea":i=cl(e,i),r=cl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ws)}dl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qr.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qr.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&Q("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};vh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Cr(e,t){if(!X)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hg(e,t,n){var r=t.pendingProps;switch(ja(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(t),null;case 1:return be(t.type)&&Ss(),ke(t),null;case 3:return r=t.stateNode,ar(),J(Le),J(Pe),Va(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ri(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ct!==null&&(ql(ct),ct=null))),$l(e,t),ke(t),null;case 5:Ua(t);var i=Nn(li.current);if(n=t.type,e!==null&&t.stateNode!=null)gh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(x(166));return ke(t),null}if(e=Nn(_t.current),Ri(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[St]=t,r[si]=s,e=(t.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Q(jr[i],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":Yu(r,s),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Q("invalid",r);break;case"textarea":Ku(r,s),Q("invalid",r)}dl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ji(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ji(r.textContent,l,e),i=["children",""+l]):Qr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Q("scroll",r)}switch(n){case"input":Ci(r),qu(r,s,!0);break;case"textarea":Ci(r),Qu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ws)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[St]=t,e[si]=r,yh(e,t,!1,!1),t.stateNode=e;e:{switch(o=hl(n,r),n){case"dialog":Q("cancel",e),Q("close",e),i=r;break;case"iframe":case"object":case"embed":Q("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Q(jr[i],e);i=r;break;case"source":Q("error",e),i=r;break;case"img":case"image":case"link":Q("error",e),Q("load",e),i=r;break;case"details":Q("toggle",e),i=r;break;case"input":Yu(e,r),i=ll(e,r),Q("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ne({},r,{value:void 0}),Q("invalid",e);break;case"textarea":Ku(e,r),i=cl(e,r),Q("invalid",e);break;default:i=r}dl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Qf(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&qf(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Jr(e,a):typeof a=="number"&&Jr(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qr.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Q("scroll",e):a!=null&&wa(e,s,a,o))}switch(n){case"input":Ci(e),qu(e,r,!1);break;case"textarea":Ci(e),Qu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Zn(e,!!r.multiple,s,!1):r.defaultValue!=null&&Zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ws)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ke(t),null;case 6:if(e&&t.stateNode!=null)vh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(x(166));if(n=Nn(li.current),Nn(_t.current),Ri(t)){if(r=t.stateNode,n=t.memoizedProps,r[St]=t,(s=r.nodeValue!==n)&&(e=Ve,e!==null))switch(e.tag){case 3:ji(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ji(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[St]=t,t.stateNode=r}return ke(t),null;case 13:if(J(ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(X&&Be!==null&&t.mode&1&&!(t.flags&128))Ld(),or(),t.flags|=98560,s=!1;else if(s=Ri(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(x(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[St]=t}else or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ke(t),s=!1}else ct!==null&&(ql(ct),ct=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?he===0&&(he=3):tu())),t.updateQueue!==null&&(t.flags|=4),ke(t),null);case 4:return ar(),$l(e,t),e===null&&ri(t.stateNode.containerInfo),ke(t),null;case 10:return za(t.type._context),ke(t),null;case 17:return be(t.type)&&Ss(),ke(t),null;case 19:if(J(ee),s=t.memoizedState,s===null)return ke(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Cr(s,!1);else{if(he!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ns(e),o!==null){for(t.flags|=128,Cr(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return q(ee,ee.current&1|2),t.child}e=e.sibling}s.tail!==null&&oe()>cr&&(t.flags|=128,r=!0,Cr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ns(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!X)return ke(t),null}else 2*oe()-s.renderingStartTime>cr&&n!==1073741824&&(t.flags|=128,r=!0,Cr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=oe(),t.sibling=null,n=ee.current,q(ee,r?n&1|2:n&1),t):(ke(t),null);case 22:case 23:return eu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Fe&1073741824&&(ke(t),t.subtreeFlags&6&&(t.flags|=8192)):ke(t),null;case 24:return null;case 25:return null}throw Error(x(156,t.tag))}function pg(e,t){switch(ja(t),t.tag){case 1:return be(t.type)&&Ss(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ar(),J(Le),J(Pe),Va(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ua(t),null;case 13:if(J(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(x(340));or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(ee),null;case 4:return ar(),null;case 10:return za(t.type._context),null;case 22:case 23:return eu(),null;case 24:return null;default:return null}}var zi=!1,xe=!1,mg=typeof WeakSet=="function"?WeakSet:Set,M=null;function Jn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function Fl(e,t,n){try{n()}catch(r){se(e,t,r)}}var zc=!1;function yg(e,t){if(El=ys,e=Ed(),Ma(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)h=f,f=y;for(;;){if(f===e)break t;if(h===n&&++u===i&&(l=o),h===s&&++c===r&&(a=o),(y=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(xl={focusedElem:e,selectionRange:n},ys=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,P=v.memoizedState,m=t.stateNode,d=m.getSnapshotBeforeUpdate(t.elementType===t.type?k:lt(t.type,k),P);m.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(S){se(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return v=zc,zc=!1,v}function Hr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fl(t,n,s)}i=i.next}while(i!==r)}}function eo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Bl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wh(e){var t=e.alternate;t!==null&&(e.alternate=null,wh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[St],delete t[si],delete t[Nl],delete t[Zy],delete t[Gy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sh(e){return e.tag===5||e.tag===3||e.tag===4}function $c(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ws));else if(r!==4&&(e=e.child,e!==null))for(Ul(e,t,n),e=e.sibling;e!==null;)Ul(e,t,n),e=e.sibling}function Vl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vl(e,t,n),e=e.sibling;e!==null;)Vl(e,t,n),e=e.sibling}var ge=null,at=!1;function qt(e,t,n){for(n=n.child;n!==null;)kh(e,t,n),n=n.sibling}function kh(e,t,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Ys,n)}catch{}switch(n.tag){case 5:xe||Jn(n,t);case 6:var r=ge,i=at;ge=null,qt(e,t,n),ge=r,at=i,ge!==null&&(at?(e=ge,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(at?(e=ge,n=n.stateNode,e.nodeType===8?Ro(e.parentNode,n):e.nodeType===1&&Ro(e,n),ei(e)):Ro(ge,n.stateNode));break;case 4:r=ge,i=at,ge=n.stateNode.containerInfo,at=!0,qt(e,t,n),ge=r,at=i;break;case 0:case 11:case 14:case 15:if(!xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fl(n,t,o),i=i.next}while(i!==r)}qt(e,t,n);break;case 1:if(!xe&&(Jn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){se(n,t,l)}qt(e,t,n);break;case 21:qt(e,t,n);break;case 22:n.mode&1?(xe=(r=xe)||n.memoizedState!==null,qt(e,t,n),xe=r):qt(e,t,n);break;default:qt(e,t,n)}}function Fc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mg),t.forEach(function(r){var i=Pg.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ot(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ge=l.stateNode,at=!1;break e;case 3:ge=l.stateNode.containerInfo,at=!0;break e;case 4:ge=l.stateNode.containerInfo,at=!0;break e}l=l.return}if(ge===null)throw Error(x(160));kh(s,o,i),ge=null,at=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){se(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_h(t,e),t=t.sibling}function _h(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ot(t,e),gt(e),r&4){try{Hr(3,e,e.return),eo(3,e)}catch(k){se(e,e.return,k)}try{Hr(5,e,e.return)}catch(k){se(e,e.return,k)}}break;case 1:ot(t,e),gt(e),r&512&&n!==null&&Jn(n,n.return);break;case 5:if(ot(t,e),gt(e),r&512&&n!==null&&Jn(n,n.return),e.flags&32){var i=e.stateNode;try{Jr(i,"")}catch(k){se(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Hf(i,s),hl(l,o);var u=hl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],f=a[o+1];c==="style"?Qf(i,f):c==="dangerouslySetInnerHTML"?qf(i,f):c==="children"?Jr(i,f):wa(i,c,f,u)}switch(l){case"input":al(i,s);break;case"textarea":Wf(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Zn(i,!!s.multiple,y,!1):h!==!!s.multiple&&(s.defaultValue!=null?Zn(i,!!s.multiple,s.defaultValue,!0):Zn(i,!!s.multiple,s.multiple?[]:"",!1))}i[si]=s}catch(k){se(e,e.return,k)}}break;case 6:if(ot(t,e),gt(e),r&4){if(e.stateNode===null)throw Error(x(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){se(e,e.return,k)}}break;case 3:if(ot(t,e),gt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ei(t.containerInfo)}catch(k){se(e,e.return,k)}break;case 4:ot(t,e),gt(e);break;case 13:ot(t,e),gt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Za=oe())),r&4&&Fc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(xe=(u=xe)||c,ot(t,e),xe=u):ot(t,e),gt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(M=e,c=e.child;c!==null;){for(f=M=c;M!==null;){switch(h=M,y=h.child,h.tag){case 0:case 11:case 14:case 15:Hr(4,h,h.return);break;case 1:Jn(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){se(r,n,k)}}break;case 5:Jn(h,h.return);break;case 22:if(h.memoizedState!==null){Uc(f);continue}}y!==null?(y.return=h,M=y):Uc(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Kf("display",o))}catch(k){se(e,e.return,k)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){se(e,e.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ot(t,e),gt(e),r&4&&Fc(e);break;case 21:break;default:ot(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sh(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jr(i,""),r.flags&=-33);var s=$c(e);Vl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=$c(e);Ul(e,l,o);break;default:throw Error(x(161))}}catch(a){se(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gg(e,t,n){M=e,Eh(e)}function Eh(e,t,n){for(var r=(e.mode&1)!==0;M!==null;){var i=M,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||zi;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||xe;l=zi;var u=xe;if(zi=o,(xe=a)&&!u)for(M=i;M!==null;)o=M,a=o.child,o.tag===22&&o.memoizedState!==null?Vc(i):a!==null?(a.return=o,M=a):Vc(i);for(;s!==null;)M=s,Eh(s),s=s.sibling;M=i,zi=l,xe=u}Bc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,M=s):Bc(e)}}function Bc(e){for(;M!==null;){var t=M;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xe||eo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xe)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:lt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Pc(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Pc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ei(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}xe||t.flags&512&&Bl(t)}catch(h){se(t,t.return,h)}}if(t===e){M=null;break}if(n=t.sibling,n!==null){n.return=t.return,M=n;break}M=t.return}}function Uc(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var n=t.sibling;if(n!==null){n.return=t.return,M=n;break}M=t.return}}function Vc(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eo(4,t)}catch(a){se(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){se(t,i,a)}}var s=t.return;try{Bl(t)}catch(a){se(t,s,a)}break;case 5:var o=t.return;try{Bl(t)}catch(a){se(t,o,a)}}}catch(a){se(t,t.return,a)}if(t===e){M=null;break}var l=t.sibling;if(l!==null){l.return=t.return,M=l;break}M=t.return}}var vg=Math.ceil,As=Ut.ReactCurrentDispatcher,Ja=Ut.ReactCurrentOwner,tt=Ut.ReactCurrentBatchConfig,U=0,me=null,ue=null,ve=0,Fe=0,Xn=mn(0),he=0,fi=null,Dn=0,to=0,Xa=0,Wr=null,je=null,Za=0,cr=1/0,Tt=null,Is=!1,Hl=null,on=null,$i=!1,Gt=null,Ms=0,Yr=0,Wl=null,rs=-1,is=0;function Ae(){return U&6?oe():rs!==-1?rs:rs=oe()}function ln(e){return e.mode&1?U&2&&ve!==0?ve&-ve:tg.transition!==null?(is===0&&(is=ld()),is):(e=W,e!==0||(e=window.event,e=e===void 0?16:pd(e.type)),e):1}function pt(e,t,n,r){if(50<Yr)throw Yr=0,Wl=null,Error(x(185));wi(e,n,r),(!(U&2)||e!==me)&&(e===me&&(!(U&2)&&(to|=n),he===4&&Xt(e,ve)),ze(e,r),n===1&&U===0&&!(t.mode&1)&&(cr=oe()+500,Xs&&yn()))}function ze(e,t){var n=e.callbackNode;ty(e,t);var r=ms(e,e===me?ve:0);if(r===0)n!==null&&Zu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zu(n),t===1)e.tag===0?eg(Hc.bind(null,e)):Dd(Hc.bind(null,e)),Jy(function(){!(U&6)&&yn()}),n=null;else{switch(ad(r)){case 1:n=xa;break;case 4:n=sd;break;case 16:n=ps;break;case 536870912:n=od;break;default:n=ps}n=Ih(n,xh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xh(e,t){if(rs=-1,is=0,U&6)throw Error(x(327));var n=e.callbackNode;if(rr()&&e.callbackNode!==n)return null;var r=ms(e,e===me?ve:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ds(e,r);else{t=r;var i=U;U|=2;var s=Ch();(me!==e||ve!==t)&&(Tt=null,cr=oe()+500,On(e,t));do try{kg();break}catch(l){Ph(e,l)}while(!0);ba(),As.current=s,U=i,ue!==null?t=0:(me=null,ve=0,t=he)}if(t!==0){if(t===2&&(i=vl(e),i!==0&&(r=i,t=Yl(e,i))),t===1)throw n=fi,On(e,0),Xt(e,r),ze(e,oe()),n;if(t===6)Xt(e,r);else{if(i=e.current.alternate,!(r&30)&&!wg(i)&&(t=Ds(e,r),t===2&&(s=vl(e),s!==0&&(r=s,t=Yl(e,s))),t===1))throw n=fi,On(e,0),Xt(e,r),ze(e,oe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(x(345));case 2:En(e,je,Tt);break;case 3:if(Xt(e,r),(r&130023424)===r&&(t=Za+500-oe(),10<t)){if(ms(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ae(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Cl(En.bind(null,e,je,Tt),t);break}En(e,je,Tt);break;case 4:if(Xt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ht(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vg(r/1960))-r,10<r){e.timeoutHandle=Cl(En.bind(null,e,je,Tt),r);break}En(e,je,Tt);break;case 5:En(e,je,Tt);break;default:throw Error(x(329))}}}return ze(e,oe()),e.callbackNode===n?xh.bind(null,e):null}function Yl(e,t){var n=Wr;return e.current.memoizedState.isDehydrated&&(On(e,t).flags|=256),e=Ds(e,t),e!==2&&(t=je,je=n,t!==null&&ql(t)),e}function ql(e){je===null?je=e:je.push.apply(je,e)}function wg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!mt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xt(e,t){for(t&=~Xa,t&=~to,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ht(t),r=1<<n;e[n]=-1,t&=~r}}function Hc(e){if(U&6)throw Error(x(327));rr();var t=ms(e,0);if(!(t&1))return ze(e,oe()),null;var n=Ds(e,t);if(e.tag!==0&&n===2){var r=vl(e);r!==0&&(t=r,n=Yl(e,r))}if(n===1)throw n=fi,On(e,0),Xt(e,t),ze(e,oe()),n;if(n===6)throw Error(x(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,En(e,je,Tt),ze(e,oe()),null}function Ga(e,t){var n=U;U|=1;try{return e(t)}finally{U=n,U===0&&(cr=oe()+500,Xs&&yn())}}function jn(e){Gt!==null&&Gt.tag===0&&!(U&6)&&rr();var t=U;U|=1;var n=tt.transition,r=W;try{if(tt.transition=null,W=1,e)return e()}finally{W=r,tt.transition=n,U=t,!(U&6)&&yn()}}function eu(){Fe=Xn.current,J(Xn)}function On(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Qy(n)),ue!==null)for(n=ue.return;n!==null;){var r=n;switch(ja(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ss();break;case 3:ar(),J(Le),J(Pe),Va();break;case 5:Ua(r);break;case 4:ar();break;case 13:J(ee);break;case 19:J(ee);break;case 10:za(r.type._context);break;case 22:case 23:eu()}n=n.return}if(me=e,ue=e=an(e.current,null),ve=Fe=t,he=0,fi=null,Xa=to=Dn=0,je=Wr=null,Cn!==null){for(t=0;t<Cn.length;t++)if(n=Cn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Cn=null}return e}function Ph(e,t){do{var n=ue;try{if(ba(),es.current=Ts,Os){for(var r=te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Os=!1}if(Mn=0,pe=de=te=null,Vr=!1,ai=0,Ja.current=null,n===null||n.return===null){he=1,fi=t,ue=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=ve,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var y=Ic(o);if(y!==null){y.flags&=-257,Mc(y,o,l,s,t),y.mode&1&&Ac(s,u,t),t=y,a=u;var v=t.updateQueue;if(v===null){var k=new Set;k.add(a),t.updateQueue=k}else v.add(a);break e}else{if(!(t&1)){Ac(s,u,t),tu();break e}a=Error(x(426))}}else if(X&&l.mode&1){var P=Ic(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Mc(P,o,l,s,t),Ra(ur(a,l));break e}}s=a=ur(a,l),he!==4&&(he=2),Wr===null?Wr=[s]:Wr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=ah(s,a,t);xc(s,m);break e;case 1:l=a;var d=s.type,p=s.stateNode;if(!(s.flags&128)&&(typeof d.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(on===null||!on.has(p)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=uh(s,l,t);xc(s,S);break e}}s=s.return}while(s!==null)}Oh(n)}catch(C){t=C,ue===n&&n!==null&&(ue=n=n.return);continue}break}while(!0)}function Ch(){var e=As.current;return As.current=Ts,e===null?Ts:e}function tu(){(he===0||he===3||he===2)&&(he=4),me===null||!(Dn&268435455)&&!(to&268435455)||Xt(me,ve)}function Ds(e,t){var n=U;U|=2;var r=Ch();(me!==e||ve!==t)&&(Tt=null,On(e,t));do try{Sg();break}catch(i){Ph(e,i)}while(!0);if(ba(),U=n,As.current=r,ue!==null)throw Error(x(261));return me=null,ve=0,he}function Sg(){for(;ue!==null;)Nh(ue)}function kg(){for(;ue!==null&&!Ym();)Nh(ue)}function Nh(e){var t=Ah(e.alternate,e,Fe);e.memoizedProps=e.pendingProps,t===null?Oh(e):ue=t,Ja.current=null}function Oh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=pg(n,t),n!==null){n.flags&=32767,ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{he=6,ue=null;return}}else if(n=hg(n,t,Fe),n!==null){ue=n;return}if(t=t.sibling,t!==null){ue=t;return}ue=t=e}while(t!==null);he===0&&(he=5)}function En(e,t,n){var r=W,i=tt.transition;try{tt.transition=null,W=1,_g(e,t,n,r)}finally{tt.transition=i,W=r}return null}function _g(e,t,n,r){do rr();while(Gt!==null);if(U&6)throw Error(x(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(x(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ny(e,s),e===me&&(ue=me=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$i||($i=!0,Ih(ps,function(){return rr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=tt.transition,tt.transition=null;var o=W;W=1;var l=U;U|=4,Ja.current=null,yg(e,n),_h(n,e),Uy(xl),ys=!!El,xl=El=null,e.current=n,gg(n),qm(),U=l,W=o,tt.transition=s}else e.current=n;if($i&&($i=!1,Gt=e,Ms=i),s=e.pendingLanes,s===0&&(on=null),Jm(n.stateNode),ze(e,oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Is)throw Is=!1,e=Hl,Hl=null,e;return Ms&1&&e.tag!==0&&rr(),s=e.pendingLanes,s&1?e===Wl?Yr++:(Yr=0,Wl=e):Yr=0,yn(),null}function rr(){if(Gt!==null){var e=ad(Ms),t=tt.transition,n=W;try{if(tt.transition=null,W=16>e?16:e,Gt===null)var r=!1;else{if(e=Gt,Gt=null,Ms=0,U&6)throw Error(x(331));var i=U;for(U|=4,M=e.current;M!==null;){var s=M,o=s.child;if(M.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(M=u;M!==null;){var c=M;switch(c.tag){case 0:case 11:case 15:Hr(8,c,s)}var f=c.child;if(f!==null)f.return=c,M=f;else for(;M!==null;){c=M;var h=c.sibling,y=c.return;if(wh(c),c===u){M=null;break}if(h!==null){h.return=y,M=h;break}M=y}}}var v=s.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}M=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,M=o;else e:for(;M!==null;){if(s=M,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,M=m;break e}M=s.return}}var d=e.current;for(M=d;M!==null;){o=M;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,M=p;else e:for(o=d;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:eo(9,l)}}catch(C){se(l,l.return,C)}if(l===o){M=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,M=S;break e}M=l.return}}if(U=i,yn(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Ys,e)}catch{}r=!0}return r}finally{W=n,tt.transition=t}}return!1}function Wc(e,t,n){t=ur(n,t),t=ah(e,t,1),e=sn(e,t,1),t=Ae(),e!==null&&(wi(e,1,t),ze(e,t))}function se(e,t,n){if(e.tag===3)Wc(e,e,n);else for(;t!==null;){if(t.tag===3){Wc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(on===null||!on.has(r))){e=ur(n,e),e=uh(t,e,1),t=sn(t,e,1),e=Ae(),t!==null&&(wi(t,1,e),ze(t,e));break}}t=t.return}}function Eg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ae(),e.pingedLanes|=e.suspendedLanes&n,me===e&&(ve&n)===n&&(he===4||he===3&&(ve&130023424)===ve&&500>oe()-Za?On(e,0):Xa|=n),ze(e,t)}function Th(e,t){t===0&&(e.mode&1?(t=Ti,Ti<<=1,!(Ti&130023424)&&(Ti=4194304)):t=1);var n=Ae();e=$t(e,t),e!==null&&(wi(e,t,n),ze(e,n))}function xg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Th(e,n)}function Pg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(t),Th(e,n)}var Ah;Ah=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Le.current)Re=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Re=!1,dg(e,t,n);Re=!!(e.flags&131072)}else Re=!1,X&&t.flags&1048576&&jd(t,Es,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ns(e,t),e=t.pendingProps;var i=sr(t,Pe.current);nr(t,n),i=Wa(null,t,r,e,i,n);var s=Ya();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,be(r)?(s=!0,ks(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fa(t),i.updater=Gs,t.stateNode=i,i._reactInternals=t,Dl(t,r,e,n),t=Ll(null,t,r,!0,s,n)):(t.tag=0,X&&s&&Da(t),Oe(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ns(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Ng(r),e=lt(r,e),i){case 0:t=Rl(null,t,r,e,n);break e;case 1:t=Rc(null,t,r,e,n);break e;case 11:t=Dc(null,t,r,e,n);break e;case 14:t=jc(null,t,r,lt(r.type,e),n);break e}throw Error(x(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lt(r,i),Rl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lt(r,i),Rc(e,t,r,i,n);case 3:e:{if(hh(t),e===null)throw Error(x(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Fd(e,t),Cs(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ur(Error(x(423)),t),t=Lc(e,t,r,n,i);break e}else if(r!==i){i=ur(Error(x(424)),t),t=Lc(e,t,r,n,i);break e}else for(Be=rn(t.stateNode.containerInfo.firstChild),Ve=t,X=!0,ct=null,n=zd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(or(),r===i){t=Ft(e,t,n);break e}Oe(e,t,r,n)}t=t.child}return t;case 5:return Bd(t),e===null&&Al(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Pl(r,i)?o=null:s!==null&&Pl(r,s)&&(t.flags|=32),dh(e,t),Oe(e,t,o,n),t.child;case 6:return e===null&&Al(t),null;case 13:return ph(e,t,n);case 4:return Ba(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lr(t,null,r,n):Oe(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lt(r,i),Dc(e,t,r,i,n);case 7:return Oe(e,t,t.pendingProps,n),t.child;case 8:return Oe(e,t,t.pendingProps.children,n),t.child;case 12:return Oe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,q(xs,r._currentValue),r._currentValue=o,s!==null)if(mt(s.value,o)){if(s.children===i.children&&!Le.current){t=Ft(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Rt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Il(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Il(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Oe(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,nr(t,n),i=nt(i),r=r(i),t.flags|=1,Oe(e,t,r,n),t.child;case 14:return r=t.type,i=lt(r,t.pendingProps),i=lt(r.type,i),jc(e,t,r,i,n);case 15:return ch(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lt(r,i),ns(e,t),t.tag=1,be(r)?(e=!0,ks(t)):e=!1,nr(t,n),lh(t,r,i),Dl(t,r,i,n),Ll(null,t,r,!0,e,n);case 19:return mh(e,t,n);case 22:return fh(e,t,n)}throw Error(x(156,t.tag))};function Ih(e,t){return id(e,t)}function Cg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(e,t,n,r){return new Cg(e,t,n,r)}function nu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ng(e){if(typeof e=="function")return nu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ka)return 11;if(e===_a)return 14}return 2}function an(e,t){var n=e.alternate;return n===null?(n=et(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ss(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")nu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Bn:return Tn(n.children,i,s,t);case Sa:o=8,i|=8;break;case rl:return e=et(12,n,t,i|2),e.elementType=rl,e.lanes=s,e;case il:return e=et(13,n,t,i),e.elementType=il,e.lanes=s,e;case sl:return e=et(19,n,t,i),e.elementType=sl,e.lanes=s,e;case Bf:return no(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $f:o=10;break e;case Ff:o=9;break e;case ka:o=11;break e;case _a:o=14;break e;case Kt:o=16,r=null;break e}throw Error(x(130,e==null?e:typeof e,""))}return t=et(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Tn(e,t,n,r){return e=et(7,e,r,t),e.lanes=n,e}function no(e,t,n,r){return e=et(22,e,r,t),e.elementType=Bf,e.lanes=n,e.stateNode={isHidden:!1},e}function Vo(e,t,n){return e=et(6,e,null,t),e.lanes=n,e}function Ho(e,t,n){return t=et(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Og(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xo(0),this.expirationTimes=xo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ru(e,t,n,r,i,s,o,l,a){return e=new Og(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=et(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(s),e}function Tg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Mh(e){if(!e)return fn;e=e._reactInternals;e:{if(bn(e)!==e||e.tag!==1)throw Error(x(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(be(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(x(171))}if(e.tag===1){var n=e.type;if(be(n))return Md(e,n,t)}return t}function Dh(e,t,n,r,i,s,o,l,a){return e=ru(n,r,!0,e,i,s,o,l,a),e.context=Mh(null),n=e.current,r=Ae(),i=ln(n),s=Rt(r,i),s.callback=t??null,sn(n,s,i),e.current.lanes=i,wi(e,i,r),ze(e,r),e}function ro(e,t,n,r){var i=t.current,s=Ae(),o=ln(i);return n=Mh(n),t.context===null?t.context=n:t.pendingContext=n,t=Rt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sn(i,t,o),e!==null&&(pt(e,i,o,s),Gi(e,i,o)),o}function js(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function iu(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}function Ag(){return null}var jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function su(e){this._internalRoot=e}io.prototype.render=su.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(x(409));ro(e,t,null,null)};io.prototype.unmount=su.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jn(function(){ro(null,e,null,null)}),t[zt]=null}};function io(e){this._internalRoot=e}io.prototype.unstable_scheduleHydration=function(e){if(e){var t=fd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jt.length&&t!==0&&t<Jt[n].priority;n++);Jt.splice(n,0,e),n===0&&hd(e)}};function ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function so(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qc(){}function Ig(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=js(o);s.call(u)}}var o=Dh(t,r,e,0,null,!1,!1,"",qc);return e._reactRootContainer=o,e[zt]=o.current,ri(e.nodeType===8?e.parentNode:e),jn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=js(a);l.call(u)}}var a=ru(e,0,!1,null,null,!1,!1,"",qc);return e._reactRootContainer=a,e[zt]=a.current,ri(e.nodeType===8?e.parentNode:e),jn(function(){ro(t,a,n,r)}),a}function oo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=js(o);l.call(a)}}ro(t,o,e,i)}else o=Ig(n,t,e,i,r);return js(o)}ud=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dr(t.pendingLanes);n!==0&&(Pa(t,n|1),ze(t,oe()),!(U&6)&&(cr=oe()+500,yn()))}break;case 13:jn(function(){var r=$t(e,1);if(r!==null){var i=Ae();pt(r,e,1,i)}}),iu(e,1)}};Ca=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var n=Ae();pt(t,e,134217728,n)}iu(e,134217728)}};cd=function(e){if(e.tag===13){var t=ln(e),n=$t(e,t);if(n!==null){var r=Ae();pt(n,e,t,r)}iu(e,t)}};fd=function(){return W};dd=function(e,t){var n=W;try{return W=e,t()}finally{W=n}};ml=function(e,t,n){switch(t){case"input":if(al(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Js(r);if(!i)throw Error(x(90));Vf(r),al(r,i)}}}break;case"textarea":Wf(e,n);break;case"select":t=n.value,t!=null&&Zn(e,!!n.multiple,t,!1)}};Zf=Ga;Gf=jn;var Mg={usingClientEntryPoint:!1,Events:[ki,Wn,Js,Jf,Xf,Ga]},Nr={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dg={bundleType:Nr.bundleType,version:Nr.version,rendererPackageName:Nr.rendererPackageName,rendererConfig:Nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nd(e),e===null?null:e.stateNode},findFiberByHostInstance:Nr.findFiberByHostInstance||Ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Ys=Fi.inject(Dg),kt=Fi}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mg;Ke.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ou(t))throw Error(x(200));return Tg(e,t,null,n)};Ke.createRoot=function(e,t){if(!ou(e))throw Error(x(299));var n=!1,r="",i=jh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ru(e,1,!1,null,null,n,!1,r,i),e[zt]=t.current,ri(e.nodeType===8?e.parentNode:e),new su(t)};Ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(x(188)):(e=Object.keys(e).join(","),Error(x(268,e)));return e=nd(t),e=e===null?null:e.stateNode,e};Ke.flushSync=function(e){return jn(e)};Ke.hydrate=function(e,t,n){if(!so(t))throw Error(x(200));return oo(null,e,t,!0,n)};Ke.hydrateRoot=function(e,t,n){if(!ou(e))throw Error(x(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Dh(t,null,e,1,n??null,i,!1,s,o),e[zt]=t.current,ri(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new io(t)};Ke.render=function(e,t,n){if(!so(t))throw Error(x(200));return oo(null,e,t,!1,n)};Ke.unmountComponentAtNode=function(e){if(!so(e))throw Error(x(40));return e._reactRootContainer?(jn(function(){oo(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Ga;Ke.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!so(n))throw Error(x(200));if(e==null||e._reactInternals===void 0)throw Error(x(38));return oo(e,t,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function Rh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rh)}catch(e){console.error(e)}}Rh(),Rf.exports=Ke;var jg=Rf.exports,Lh,Kc=jg;Lh=Kc.createRoot,Kc.hydrateRoot;let Rg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Lg=(e=21)=>{let t="",n=e|0;for(;n--;)t+=Rg[Math.random()*64|0];return t};function dt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fr(e){return!!e&&!!e[Ye]}function Rn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Hg}(e)||Array.isArray(e)||!!e[nf]||!!(!((t=e.constructor)===null||t===void 0)&&t[nf])||lu(e)||au(e))}function di(e,t,n){n===void 0&&(n=!1),yr(e)===0?(n?Object.keys:hu)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function yr(e){var t=e[Ye];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:lu(e)?2:au(e)?3:0}function Kl(e,t){return yr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bg(e,t){return yr(e)===2?e.get(t):e[t]}function bh(e,t,n){var r=yr(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function zg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function lu(e){return Ug&&e instanceof Map}function au(e){return Vg&&e instanceof Set}function xn(e){return e.o||e.t}function uu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Wg(e);delete t[Ye];for(var n=hu(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function cu(e,t){return t===void 0&&(t=!1),fu(e)||fr(e)||!Rn(e)||(yr(e)>1&&(e.set=e.add=e.clear=e.delete=$g),Object.freeze(e),t&&di(e,function(n,r){return cu(r,!0)},!0)),e}function $g(){dt(2)}function fu(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Et(e){var t=Yg[e];return t||dt(18,e),t}function Qc(){return hi}function Wo(e,t){t&&(Et("Patches"),e.u=[],e.s=[],e.v=t)}function Rs(e){Ql(e),e.p.forEach(Fg),e.p=null}function Ql(e){e===hi&&(hi=e.l)}function Jc(e){return hi={p:[],l:hi,h:e,m:!0,_:0}}function Fg(e){var t=e[Ye];t.i===0||t.i===1?t.j():t.g=!0}function Yo(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Et("ES5").S(t,e,r),r?(n[Ye].P&&(Rs(t),dt(4)),Rn(e)&&(e=Ls(t,e),t.l||bs(t,e)),t.u&&Et("Patches").M(n[Ye].t,e,t.u,t.s)):e=Ls(t,n,[]),Rs(t),t.u&&t.v(t.u,t.s),e!==zh?e:void 0}function Ls(e,t,n){if(fu(t))return t;var r=t[Ye];if(!r)return di(t,function(l,a){return Xc(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return bs(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=uu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),di(s,function(l,a){return Xc(e,r,i,l,a,n,o)}),bs(e,i,!1),n&&e.u&&Et("Patches").N(r,n,e.u,e.s)}return r.o}function Xc(e,t,n,r,i,s,o){if(fr(i)){var l=Ls(e,i,s&&t&&t.i!==3&&!Kl(t.R,r)?s.concat(r):void 0);if(bh(n,r,l),!fr(l))return;e.m=!1}else o&&n.add(i);if(Rn(i)&&!fu(i)){if(!e.h.D&&e._<1)return;Ls(e,i),t&&t.A.l||bs(e,i)}}function bs(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&cu(t,n)}function qo(e,t){var n=e[Ye];return(n?xn(n):e)[t]}function Zc(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Jl(e){e.P||(e.P=!0,e.l&&Jl(e.l))}function Ko(e){e.o||(e.o=uu(e.t))}function Xl(e,t,n){var r=lu(t)?Et("MapSet").F(t,n):au(t)?Et("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:Qc(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=Zl;o&&(a=[l],u=Rr);var c=Proxy.revocable(a,u),f=c.revoke,h=c.proxy;return l.k=h,l.j=f,h}(t,n):Et("ES5").J(t,n);return(n?n.A:Qc()).p.push(r),r}function Bg(e){return fr(e)||dt(22,e),function t(n){if(!Rn(n))return n;var r,i=n[Ye],s=yr(n);if(i){if(!i.P&&(i.i<4||!Et("ES5").K(i)))return i.t;i.I=!0,r=Gc(n,s),i.I=!1}else r=Gc(n,s);return di(r,function(o,l){i&&bg(i.t,o)===l||bh(r,o,t(l))}),s===3?new Set(r):r}(e)}function Gc(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return uu(e)}var ef,hi,du=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ug=typeof Map<"u",Vg=typeof Set<"u",tf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",zh=du?Symbol.for("immer-nothing"):((ef={})["immer-nothing"]=!0,ef),nf=du?Symbol.for("immer-draftable"):"__$immer_draftable",Ye=du?Symbol.for("immer-state"):"__$immer_state",Hg=""+Object.prototype.constructor,hu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Wg=Object.getOwnPropertyDescriptors||function(e){var t={};return hu(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Yg={},Zl={get:function(e,t){if(t===Ye)return e;var n=xn(e);if(!Kl(n,t))return function(i,s,o){var l,a=Zc(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Rn(r)?r:r===qo(e.t,t)?(Ko(e),e.o[t]=Xl(e.A.h,r,e)):r},has:function(e,t){return t in xn(e)},ownKeys:function(e){return Reflect.ownKeys(xn(e))},set:function(e,t,n){var r=Zc(xn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=qo(xn(e),t),s=i==null?void 0:i[Ye];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(zg(n,i)&&(n!==void 0||Kl(e.t,t)))return!0;Ko(e),Jl(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return qo(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ko(e),Jl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=xn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){dt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){dt(12)}},Rr={};di(Zl,function(e,t){Rr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Rr.deleteProperty=function(e,t){return Rr.set.call(this,e,t,void 0)},Rr.set=function(e,t,n){return Zl.set.call(this,e[0],t,n,e[0])};var qg=function(){function e(n){var r=this;this.O=tf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(k){var P=this;k===void 0&&(k=l);for(var m=arguments.length,d=Array(m>1?m-1:0),p=1;p<m;p++)d[p-1]=arguments[p];return a.produce(k,function(S){var C;return(C=s).call.apply(C,[P,S].concat(d))})}}var u;if(typeof s!="function"&&dt(6),o!==void 0&&typeof o!="function"&&dt(7),Rn(i)){var c=Jc(r),f=Xl(r,i,void 0),h=!0;try{u=s(f),h=!1}finally{h?Rs(c):Ql(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(k){return Wo(c,o),Yo(k,c)},function(k){throw Rs(c),k}):(Wo(c,o),Yo(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===zh&&(u=void 0),r.D&&cu(u,!0),o){var y=[],v=[];Et("Patches").M(i,u,y,v),o(y,v)}return u}dt(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(y){return i.apply(void 0,[y].concat(f))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Rn(n)||dt(8),fr(n)&&(n=Bg(n));var r=Jc(this),i=Xl(this,n,void 0);return i[Ye].C=!0,Ql(r),i},t.finishDraft=function(n,r){var i=n&&n[Ye],s=i.A;return Wo(s,r),Yo(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!tf&&dt(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Et("Patches").$;return fr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),qe=new qg,Kg=qe.produce;qe.produceWithPatches.bind(qe);qe.setAutoFreeze.bind(qe);qe.setUseProxies.bind(qe);qe.applyPatches.bind(qe);qe.createDraft.bind(qe);qe.finishDraft.bind(qe);class Qg{constructor(t){const n=Jg();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function Jg(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function rf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function $h(e,t){const n=new Qg(e),r=n.next.bind(n);return t&&rf(t,n),r.state=()=>rf(n,{}),r}class sf{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=$h(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const Xg={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new sf(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=sf.seed()),{seed:t}},playerView:()=>{}};var Zg=Function.prototype,Gg=Zg.toString;Gg.call(Object);const pi="MAKE_MOVE",lo="GAME_EVENT",ao="REDO",pu="RESET",mu="SYNC",uo="UNDO",yu="UPDATE",gu="PATCH",Fh="PLUGIN",co="STRIP_TRANSIENTS",Bh=(e,t,n,r)=>({type:pi,payload:{type:e,args:t,playerID:n,credentials:r}}),qr=(e,t,n,r)=>({type:lo,payload:{type:e,args:t,playerID:n,credentials:r}}),Uh=(e,t,n,r)=>({type:lo,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Vh=e=>({type:mu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),Hh=(e,t,n,r)=>({type:gu,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),Wh=(e,t)=>({type:yu,state:e,deltalog:t,clientOnly:!0}),Yh=e=>({type:pu,state:e,clientOnly:!0}),qh=(e,t)=>({type:uo,payload:{type:null,args:null,playerID:e,credentials:t}}),Kh=(e,t)=>({type:ao,payload:{type:null,args:null,playerID:e,credentials:t}}),ev=(e,t,n,r)=>({type:Fh,payload:{type:e,args:t,playerID:n,credentials:r}}),Qh=()=>({type:co});var tv=Object.freeze({__proto__:null,makeMove:Bh,gameEvent:qr,automaticGameEvent:Uh,sync:Vh,patch:Hh,update:Wh,reset:Yh,undo:qh,redo:Kh,plugin:ev,stripTransients:Qh});const dn="INVALID_MOVE",nv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=Kg(t.G,s=>{const o=e({...t,G:s},...n);if(o===dn){r=!0;return}return o});return r?dn:i}};var Ee;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Ee||(Ee={}));var At;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(At||(At={}));class rv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,At.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,At.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Ee.TURN_ON_END:case Ee.PHASE_ON_END:return r(s.error,At.StageEventInOnEnd);case Ee.PHASE_ON_BEGIN:return r(s.error,At.StageEventInPhaseBegin);case Ee.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,At.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Ee.TURN_ON_END||s.calledFrom===Ee.PHASE_ON_END)return r(s.error,At.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Ee.PHASE_ON_END)return r(s.error,At.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=Uh(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const vu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new rv(e.flow,t,n).api()},iv={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},sv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},ov=(...e)=>console.error(...e);function H(e){ov("ERROR:",e)}const wu=[nv,Xg,iv,sv],Ei=[...wu,vu],lv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),dr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),Jh=(e,t,n)=>[...wu,...n,vu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),av=(e,t)=>([...Ei,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),Gl=(e,t)=>([...Ei,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),uv=(e,t)=>([...wu,...t.game.plugins,vu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),cv=(e,t)=>[...Ei,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),fv=(e,t)=>[...Ei,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,Xh=(e,t)=>{const n=uv(e,t),r=fv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return H(`${i} plugin declared action invalid:
${s}`),[e,r]},Zh=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Ei,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function zs(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function $s(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Fs.NULL),n=a}else{if(zs(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Bi(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Bi(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Bi(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Bi(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function dv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=$s(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Bi(e,t,n,r,i){(typeof i!="object"||i===Fs.NULL)&&(i={stage:i}),i.stage!==void 0&&(zs(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function ea(e,t){return e[t]+""}function hv(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...dr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((h,y)=>y+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&H(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const f=ea(a,u);return r={...r,currentPlayer:f,playOrderPos:u,playOrder:a},r=$s(r,t.activePlayers||{}),r}function pv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&H(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=ea(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:H(`invalid argument to endTurn: ${u}`)}});else{const c={...dr(e),G:s,ctx:o},f=i.next(c),h=typeof f;f!==void 0&&h!=="number"&&H(`invalid value returned by turn.order.next  expected number or undefined got ${h} ${f}.`),f===void 0?a=!0:(l=f,t=ea(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const mv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Fs={NULL:null};var Su={},Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Pointer=Lt.escapeToken=Lt.unescapeToken=void 0;function Gh(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Lt.unescapeToken=Gh;function ep(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Lt.escapeToken=ep;var yv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(Gh);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(ep).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Lt.Pointer=yv;var ie={},ku={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(ku);var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.diffAny=Te.diffObjects=Te.diffArrays=Te.intersection=Te.subtract=Te.isDestructive=void 0;var mi=ku;function gv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}Te.isDestructive=gv;function ta(e,t){var n={};for(var r in e)mi.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)mi.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}Te.subtract=ta;function tp(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)mi.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}Te.intersection=tp;function vv(e){return e.op==="add"}function wv(e){return e.op==="remove"}function Qo(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function np(e,t,n,r){r===void 0&&(r=fo);var i={"0,0":{operations:[],cost:0}};function s(c,f){var h="".concat(c,",").concat(f),y=i[h];if(y===void 0){if(c>0&&f>0&&!r(e[c-1],t[f-1],n.add(String(c-1))).length)y=s(c-1,f-1);else{var v=[];if(c>0){var k=s(c-1,f),P={op:"remove",index:c-1};v.push(Qo(k,P))}if(f>0){var m=s(c,f-1),d={op:"add",index:c-1,value:t[f-1]};v.push(Qo(m,d))}if(c>0&&f>0){var p=s(c-1,f-1),S={op:"replace",index:c-1,original:e[c-1],value:t[f-1]};v.push(Qo(p,S))}var C=v.sort(function(T,A){return T.cost-A.cost})[0];y=C}i[h]=y}return y}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,f){var h=c[0],y=c[1];if(vv(f)){var v=f.index+1+y,k=v<o+y?String(v):"-",P={op:f.op,path:n.add(k).toString(),value:f.value};return[h.concat(P),y+1]}else if(wv(f)){var P={op:f.op,path:n.add(String(f.index+y)).toString()};return[h.concat(P),y-1]}else{var m=n.add(String(f.index+y)),d=r(f.original,f.value,m);return[h.concat.apply(h,d),y]}},[[],0])[0];return u}Te.diffArrays=np;function rp(e,t,n,r){r===void 0&&(r=fo);var i=[];return ta(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),ta(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),tp([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}Te.diffObjects=rp;function fo(e,t,n,r){if(r===void 0&&(r=fo),e===t)return[];var i=(0,mi.objectType)(e),s=(0,mi.objectType)(t);return i=="array"&&s=="array"?np(e,t,n,r):i=="object"&&s=="object"?rp(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Te.diffAny=fo;var _u=br&&br.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ie,"__esModule",{value:!0});ie.apply=ie.InvalidOperationError=ie.test=ie.copy=ie.move=ie.replace=ie.remove=ie.add=ie.TestError=ie.MissingError=void 0;var Bt=Lt,Eu=ku,Sv=Te,xt=function(e){_u(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);ie.MissingError=xt;var ip=function(e){_u(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);ie.TestError=ip;function xu(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function sp(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function op(e,t){var n=Bt.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new xt(t.path):(xu(n.parent,n.key,(0,Eu.clone)(t.value)),null)}ie.add=op;function lp(e,t){var n=Bt.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new xt(t.path):(sp(n.parent,n.key),null)}ie.remove=lp;function ap(e,t){var n=Bt.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new xt(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new xt(t.path)}else if(n.value===void 0)return new xt(t.path);return n.parent[n.key]=(0,Eu.clone)(t.value),null}ie.replace=ap;function up(e,t){var n=Bt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new xt(t.from);var r=Bt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new xt(t.path):(sp(n.parent,n.key),xu(r.parent,r.key,n.value),null)}ie.move=up;function cp(e,t){var n=Bt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new xt(t.from);var r=Bt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new xt(t.path):(xu(r.parent,r.key,(0,Eu.clone)(n.value)),null)}ie.copy=cp;function fp(e,t){var n=Bt.Pointer.fromJSON(t.path).evaluate(e);return(0,Sv.diffAny)(n.value,t.value,new Bt.Pointer).length?new ip(n.value,t.value):null}ie.test=fp;var dp=function(e){_u(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);ie.InvalidOperationError=dp;function kv(e,t){switch(t.op){case"add":return op(e,t);case"remove":return lp(e,t);case"replace":return ap(e,t);case"move":return up(e,t);case"copy":return cp(e,t);case"test":return fp(e,t)}return new dp(t)}ie.apply=kv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Lt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=ie,r=Te;function i(u,c){return c.map(function(f){return(0,n.apply)(u,f)})}e.applyPatch=i;function s(u){function c(f,h,y){var v=u(f,h,y);return Array.isArray(v)?v:(0,r.diffAny)(f,h,y,c)}return c}function o(u,c,f){var h=new t.Pointer;return(f?s(f):r.diffAny)(u,c,h)}e.createPatch=o;function l(u,c){var f=t.Pointer.fromJSON(c).evaluate(u);if(f!==void 0)return{op:"test",path:c,value:f.value}}function a(u,c){var f=new Array;return c.filter(r.isDestructive).forEach(function(h){var y=l(u,h.path);if(y&&f.push(y),"from"in h){var v=l(u,h.from);v&&f.push(v)}}),f}e.createTests=a})(Su);function _v({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:g})=>g),i||(i={});const l={...t};""in l&&H("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(g=>u.add(g));const f=(g,_)=>{const E=Jh(g,_,o);return z=>{const L=dr(z);return E({...L,G:z.G,ctx:z.ctx,playerID:z.playerID})}},h=g=>_=>{const E=dr(_);return g({...E,G:_.G,ctx:_.ctx})},y={onEnd:f(r,Ee.GAME_ON_END),endIf:h(n)};for(const g in l){const _=l[g];if(_.start===!0&&(c=g),_.moves!==void 0)for(const E of Object.keys(_.moves))a[g+"."+E]=_.moves[E],u.add(E);_.endIf===void 0&&(_.endIf=()=>{}),_.onBegin===void 0&&(_.onBegin=({G:E})=>E),_.onEnd===void 0&&(_.onEnd=({G:E})=>E),_.turn===void 0&&(_.turn=i),_.turn.order===void 0&&(_.turn.order=mv.DEFAULT),_.turn.onBegin===void 0&&(_.turn.onBegin=({G:E})=>E),_.turn.onEnd===void 0&&(_.turn.onEnd=({G:E})=>E),_.turn.endIf===void 0&&(_.turn.endIf=()=>!1),_.turn.onMove===void 0&&(_.turn.onMove=({G:E})=>E),_.turn.stages===void 0&&(_.turn.stages={}),zs(_.turn,!0);for(const E in _.turn.stages){const L=_.turn.stages[E].moves||{};for(const R of Object.keys(L)){const re=g+"."+E+"."+R;a[re]=L[R],u.add(R)}}if(_.wrapped={onBegin:f(_.onBegin,Ee.PHASE_ON_BEGIN),onEnd:f(_.onEnd,Ee.PHASE_ON_END),endIf:h(_.endIf)},_.turn.wrapped={onMove:f(_.turn.onMove,Ee.TURN_ON_MOVE),onBegin:f(_.turn.onBegin,Ee.TURN_ON_BEGIN),onEnd:f(_.turn.onEnd,Ee.TURN_ON_END),endIf:h(_.turn.endIf)},typeof _.next!="function"){const{next:E}=_;_.next=()=>E||null}_.wrapped.next=h(_.next)}function v(g){return g.phase?l[g.phase]:l[""]}function k(g){return g}function P(g,_){const E=new Set,z=new Set;for(let L=0;L<_.length;L++){const{fn:R,arg:re,...K}=_[L];if(R===le){z.clear();const Ce=g.ctx.phase;if(E.has(Ce)){const yt={...g.ctx,phase:null};return{...g,ctx:yt}}E.add(Ce)}const Je=[];if(g=R(g,{...K,arg:re,next:Je}),R===Z)break;const ae=D(g);if(ae){_.push({fn:Z,arg:ae,turn:g.ctx.turn,phase:g.ctx.phase,automatic:!0});continue}const ye=V(g);if(ye){_.push({fn:le,arg:ye,turn:g.ctx.turn,phase:g.ctx.phase,automatic:!0});continue}if([k,T,A].includes(R)){const Ce=b(g);if(Ce){_.push({fn:fe,arg:Ce,turn:g.ctx.turn,phase:g.ctx.phase,automatic:!0});continue}}_.push(...Je)}return g}function m(g,{next:_}){return _.push({fn:d}),g}function d(g,{next:_}){let{G:E,ctx:z}=g;return E=v(z).wrapped.onBegin(g),_.push({fn:p}),{...g,G:E,ctx:z}}function p(g,{currentPlayer:_}){let{ctx:E}=g;const z=v(E);_?(E={...E,currentPlayer:_},z.turn.activePlayers&&(E=$s(E,z.turn.activePlayers))):E=hv(g,z.turn);const L=E.turn+1;E={...E,turn:L,numMoves:0,_prevActivePlayers:[]};const R=z.turn.wrapped.onBegin({...g,ctx:E});return{...g,G:R,ctx:E,_undo:[],_redo:[]}}function S(g,{arg:_,next:E,phase:z}){const L=v({phase:z});let{ctx:R}=g;if(_&&_.next)if(_.next in l)R={...R,phase:_.next};else return H("invalid phase: "+_.next),g;else R={...R,phase:L.wrapped.next(g)||null};return g={...g,ctx:R},E.push({fn:d}),g}function C(g,{arg:_,currentPlayer:E,next:z}){let{G:L,ctx:R}=g;const re=v(R),{endPhase:K,ctx:Je}=pv(g,E,re.turn,_);return R=Je,g={...g,G:L,ctx:R},K?z.push({fn:le,turn:R.turn,phase:R.phase}):z.push({fn:p,currentPlayer:R.currentPlayer}),g}function T(g,{arg:_,playerID:E}){if((typeof _=="string"||_===Fs.NULL)&&(_={stage:_}),typeof _!="object")return g;zs(_);let{ctx:z}=g,{activePlayers:L,_activePlayersMinMoves:R,_activePlayersMaxMoves:re,_activePlayersNumMoves:K}=z;return _.stage!==void 0&&(L===null&&(L={}),L[E]=_.stage,K[E]=0,_.minMoves&&(R===null&&(R={}),R[E]=_.minMoves),_.maxMoves&&(re===null&&(re={}),re[E]=_.maxMoves)),z={...z,activePlayers:L,_activePlayersMinMoves:R,_activePlayersMaxMoves:re,_activePlayersNumMoves:K},{...g,ctx:z}}function A(g,{arg:_}){return{...g,ctx:$s(g.ctx,_)}}function D(g){return y.endIf(g)}function V(g){return v(g.ctx).wrapped.endIf(g)}function b(g){const _=v(g.ctx),E=g.ctx.numMoves||0;return _.turn.maxMoves&&E>=_.turn.maxMoves?!0:_.turn.wrapped.endIf(g)}function Z(g,{arg:_,phase:E}){g=le(g,{}),_===void 0&&(_=!0),g={...g,ctx:{...g.ctx,gameover:_}};const z=y.onEnd(g);return{...g,G:z}}function le(g,{arg:_,next:E,turn:z,automatic:L}){g=fe(g,{turn:z,force:!0,automatic:!0});const{phase:R,turn:re}=g.ctx;if(E&&E.push({fn:S,arg:_,phase:R}),R===null)return g;const Je=v(g.ctx).wrapped.onEnd(g),ae={...g.ctx,phase:null},ye=qr("endPhase",_),{_stateID:Ce}=g,yt={action:ye,_stateID:Ce,turn:re,phase:R};L&&(yt.automatic=!0);const vn=[...g.deltalog||[],yt];return{...g,G:Je,ctx:ae,deltalog:vn}}function fe(g,{arg:_,next:E,turn:z,force:L,automatic:R,playerID:re}){if(z!==g.ctx.turn)return g;const{currentPlayer:K,numMoves:Je,phase:ae,turn:ye}=g.ctx,Ce=v(g.ctx),yt=Je||0;if(!L&&Ce.turn.minMoves&&yt<Ce.turn.minMoves)return`${Ce.turn.minMoves}`,g;const vn=Ce.turn.wrapped.onEnd(g);E&&E.push({fn:C,arg:_,currentPlayer:K});let Yt={...g.ctx,activePlayers:null};if(_&&_.remove){re=re||K;const wn=Yt.playOrder.filter(am=>am!=re),lm=Yt.playOrderPos>wn.length-1?0:Yt.playOrderPos;if(Yt={...Yt,playOrder:wn,playOrderPos:lm},wn.length===0)return E.push({fn:le,turn:ye,phase:ae}),g}const go=qr("endTurn",_),{_stateID:$u}=g,wr={action:go,_stateID:$u,turn:ye,phase:ae};R&&(wr.automatic=!0);const vo=[...g.deltalog||[],wr];return{...g,G:vn,ctx:Yt,deltalog:vo,_undo:[],_redo:[]}}function Nt(g,{arg:_,next:E,automatic:z,playerID:L}){L=L||g.ctx.currentPlayer;let{ctx:R,_stateID:re}=g,{activePlayers:K,_activePlayersNumMoves:Je,_activePlayersMinMoves:ae,_activePlayersMaxMoves:ye,phase:Ce,turn:yt}=R;const vn=K!==null&&L in K,Yt=v(R);if(!_&&vn){const wn=Yt.turn.stages[K[L]];wn&&wn.next&&(_=wn.next)}if(E&&E.push({fn:T,arg:_,playerID:L}),!vn)return g;const go=Je[L]||0;if(ae&&ae[L]&&go<ae[L])return`${ae[L]}`,g;K={...K},delete K[L],ae&&(ae={...ae},delete ae[L]),ye&&(ye={...ye},delete ye[L]),R=dv({...R,activePlayers:K,_activePlayersMinMoves:ae,_activePlayersMaxMoves:ye});const wr={action:qr("endStage",_),_stateID:re,turn:yt,phase:Ce};z&&(wr.automatic=!0);const vo=[...g.deltalog||[],wr];return{...g,ctx:R,deltalog:vo}}function gn(g,_,E){const z=v(g),L=z.turn.stages,{activePlayers:R}=g;if(R&&R[E]!==void 0&&R[E]!==Fs.NULL&&L[R[E]]!==void 0&&L[R[E]].moves!==void 0){const K=L[R[E]].moves;if(_ in K)return K[_]}else if(z.moves){if(_ in z.moves)return z.moves[_]}else if(_ in e)return e[_];return null}function Ht(g,_){const{playerID:E,type:z}=_,{currentPlayer:L,activePlayers:R,_activePlayersMaxMoves:re}=g.ctx,K=gn(g.ctx,z,E),Je=!K||typeof K=="function"||K.noLimit!==!0;let{numMoves:ae,_activePlayersNumMoves:ye}=g.ctx;Je&&(E===L&&ae++,R&&ye[E]++),g={...g,ctx:{...g.ctx,numMoves:ae,_activePlayersNumMoves:ye}},re&&ye[E]>=re[E]&&(g=Nt(g,{playerID:E,automatic:!0}));const yt=v(g.ctx).turn.wrapped.onMove({...g,playerID:E});return g={...g,G:yt},P(g,[{fn:k}])}function Wt(g,_,E){return P(g,[{fn:Nt,arg:E,playerID:_}])}function I(g,_){return P(g,[{fn:Nt,playerID:_}])}function N(g,_,E){return P(g,[{fn:A,arg:E}])}function O(g,_,E){return P(g,[{fn:le,phase:g.ctx.phase,turn:g.ctx.turn,arg:{next:E}}])}function B(g){return P(g,[{fn:le,phase:g.ctx.phase,turn:g.ctx.turn}])}function Y(g,_,E){return P(g,[{fn:fe,turn:g.ctx.turn,phase:g.ctx.phase,arg:E}])}function Ot(g,_,E){return P(g,[{fn:fe,turn:g.ctx.turn,phase:g.ctx.phase,force:!0,arg:E}])}function it(g,_,E){return P(g,[{fn:Z,turn:g.ctx.turn,phase:g.ctx.phase,arg:E}])}const st={endStage:I,setStage:Wt,endTurn:Y,pass:Ot,endPhase:B,setPhase:O,endGame:it,setActivePlayers:N},G=[];s.endTurn!==!1&&G.push("endTurn"),s.pass!==!1&&G.push("pass"),s.endPhase!==!1&&G.push("endPhase"),s.setPhase!==!1&&G.push("setPhase"),s.endGame!==!1&&G.push("endGame"),s.setActivePlayers!==!1&&G.push("setActivePlayers"),s.endStage!==!1&&G.push("endStage"),s.setStage!==!1&&G.push("setStage");function zn(g,_){const{type:E,playerID:z,args:L}=_.payload;return typeof st[E]!="function"?g:st[E](g,z,...Array.isArray(L)?L:[L])}function om(g,_,E){return _.activePlayers?E in _.activePlayers:_.currentPlayer===E}return{ctx:g=>({numPlayers:g,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:g})].map((_,E)=>E+""),playOrderPos:0,phase:c,activePlayers:null}),init:g=>P(g,[{fn:m}]),isPlayerActive:om,eventHandlers:st,eventNames:Object.keys(st),enabledEventNames:G,moveMap:a,moveNames:[...u.values()],processMove:Ht,processEvent:zn,getMove:gn}}function Ev(e){return e.processMove!==void 0}function ho(e){if(Ev(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=_v(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(hp(i)&&(i=i.move),i instanceof Function){const s=Jh(i,Ee.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...dr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return H(`invalid move object: ${r.type}`),n.G}}}function hp(e){return e instanceof Object&&e.move!==void 0}var na;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(na||(na={}));var _e;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(_e||(_e={}));const Ui=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,xv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function of(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function Jo(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function Xo(e,t,n){const[r,i]=Xh(e,n);return i?[r,Ne(t,_e.PluginActionInvalid,i)]:[r]}function pp(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function Ne(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const mp=e=>t=>n=>{const r=t(n);switch(n.type){case co:return r;default:{const[,i]=pp(e.getState());return typeof i<"u"?(e.dispatch(Qh()),{...r,transients:i}):r}}};function Pu({game:e,isClient:t}){return e=ho(e),(n=null,r)=>{let[i]=pp(n);switch(r.type){case co:return i;case lo:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return H("cannot call event after game end"),Ne(i,_e.GameOver);if(Ui(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return H(`disallowed event: ${r.payload.type}`),Ne(i,_e.InactivePlayer);i=Gl(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=Xo(s,i,{game:e}),o||(s=of(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case pi:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return H(`disallowed move: ${r.payload.type}`),Ne(i,_e.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return H("cannot make move after game end"),Ne(i,_e.GameOver);if(Ui(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return H(`disallowed move: ${r.payload.type}`),Ne(i,_e.InactivePlayer);i=Gl(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===dn)return H(`invalid move: ${r.payload.type} args: ${r.payload.args}`),Ne(i,_e.InvalidMove);const a={...i,G:l};if(t&&cv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=Xo(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=Jo(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=Xo(i,s,{game:e}),u||(i=of(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case pu:case yu:case mu:return r.state;case uo:{if(i={...i,deltalog:[]},e.disableUndo)return H("Undo is not enabled"),Ne(i,_e.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return H("No moves to undo"),Ne(i,_e.ActionInvalid);const c=l[l.length-1],f=l[l.length-2];if(Ui(r)&&r.payload.playerID!==c.playerID)return H("Cannot undo other players' moves"),Ne(i,_e.ActionInvalid);if(c.moveType){const h=e.flow.getMove(f.ctx,c.moveType,c.playerID);if(!xv(s,o,h))return H("Move cannot be undone"),Ne(i,_e.ActionInvalid)}return i=Jo(i,r),{...i,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case ao:{if(i={...i,deltalog:[]},e.disableUndo)return H("Redo is not enabled"),Ne(i,_e.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return H("No moves to redo"),Ne(i,_e.ActionInvalid);const a=o[0];return Ui(r)&&r.payload.playerID!==a.playerID?(H("Cannot redo other players' moves"),Ne(i,_e.ActionInvalid)):(i=Jo(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case Fh:return lv(i,r,{game:e});case gu:{const s=i,o=JSON.parse(JSON.stringify(s)),l=Su.applyPatch(o,r.patch);return l.some(u=>u!==null)?(H(`Patch ${JSON.stringify(r.patch)} apply failed`),Ne(s,na.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(d){typeof d!="function"&&(d=new Function(""+d));for(var p=new Array(arguments.length-1),S=0;S<p.length;S++)p[S]=arguments[S+1];var C={callback:d,args:p};return r[n]=C,o(n),n++}function a(d){delete r[d]}function u(d){var p=d.callback,S=d.args;switch(S.length){case 0:p();break;case 1:p(S[0]);break;case 2:p(S[0],S[1]);break;case 3:p(S[0],S[1],S[2]);break;default:p.apply(t,S);break}}function c(d){if(i)setTimeout(c,0,d);else{var p=r[d];if(p){i=!0;try{u(p)}finally{a(d),i=!1}}}}function f(){o=function(d){process.nextTick(function(){c(d)})}}function h(){if(e.postMessage&&!e.importScripts){var d=!0,p=e.onmessage;return e.onmessage=function(){d=!1},e.postMessage("","*"),e.onmessage=p,d}}function y(){var d="setImmediate$"+Math.random()+"$",p=function(S){S.source===e&&typeof S.data=="string"&&S.data.indexOf(d)===0&&c(+S.data.slice(d.length))};e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),o=function(S){e.postMessage(d+S,"*")}}function v(){var d=new MessageChannel;d.port1.onmessage=function(p){var S=p.data;c(S)},o=function(p){d.port2.postMessage(p)}}function k(){var d=s.documentElement;o=function(p){var S=s.createElement("script");S.onreadystatechange=function(){c(p),S.onreadystatechange=null,d.removeChild(S),S=null},d.appendChild(S)}}function P(){o=function(d){setTimeout(c,0,d)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?f():h()?y():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?k():P(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?br:self);class Pv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return Bh(s.move,s.args,r);if("event"in s)return qr(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=$h(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Cv=25;class os extends Pv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Pu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((h,y)=>{const v=a[y];return v.checker(i,s)?h+v.weight:h},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Cv&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),f=this.playout(c);this.backpropagate(c,f),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function yi(e){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(e)}function Nv(e,t){if(yi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ov(e){var t=Nv(e,"string");return yi(t)=="symbol"?t:t+""}function Tv(e,t,n){return(t=Ov(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function af(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lf(Object(n),!0).forEach(function(r){Tv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $e(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var uf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),cf=function(){return Math.random().toString(36).substring(7).split("").join(".")},ff={INIT:"@@redux/INIT"+cf(),REPLACE:"@@redux/REPLACE"+cf()};function Av(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Cu(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($e(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($e(1));return n(Cu)(e,t)}if(typeof e!="function")throw new Error($e(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error($e(3));return s}function f(k){if(typeof k!="function")throw new Error($e(4));if(a)throw new Error($e(5));var P=!0;return u(),l.push(k),function(){if(P){if(a)throw new Error($e(6));P=!1,u();var d=l.indexOf(k);l.splice(d,1),o=null}}}function h(k){if(!Av(k))throw new Error($e(7));if(typeof k.type>"u")throw new Error($e(8));if(a)throw new Error($e(9));try{a=!0,s=i(s,k)}finally{a=!1}for(var P=o=l,m=0;m<P.length;m++){var d=P[m];d()}return k}function y(k){if(typeof k!="function")throw new Error($e(10));i=k,h({type:ff.REPLACE})}function v(){var k,P=f;return k={subscribe:function(d){if(typeof d!="object"||d===null)throw new Error($e(11));function p(){d.next&&d.next(c())}p();var S=P(p);return{unsubscribe:S}}},k[uf]=function(){return this},k}return h({type:ff.INIT}),r={dispatch:h,subscribe:f,getState:c,replaceReducer:y},r[uf]=v,r}function yp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function gp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error($e(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=yp.apply(void 0,l)(i.dispatch),af(af({},i),{},{dispatch:s})}}}function vp({game:e,numPlayers:t,setupData:n}){e=ho(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=av(i,{game:e}),i=Gl(i,{game:e,playerID:void 0});const s=dr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=Xh(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Nu=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Iv extends Nu{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Mv=e=>new Iv(e);class Dv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const jv=new Dv;function ra(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Ou(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=tv[e](l,a,ra(r,n,s),i);n.dispatch(u)};return o}const Rv=Ou.bind(null,"makeMove"),Lv=Ou.bind(null,"gameEvent"),bv=Ou.bind(null,"plugin");class zv{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=ho(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=jv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Pu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=vp({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(Yh(this.initialState))},this.undo=()=>{const y=qh(ra(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(y)},this.redo=()=>{const y=Kh(ra(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(y)},this.log=[];const h=gp(mp,()=>y=>v=>{const k=y(v);return this.notifySubscribers(),k},y=>v=>k=>{const P=y.getState(),m=v(k);return!("clientOnly"in k)&&k.type!==co&&this.transport.sendAction(P,k),m},y=>v=>k=>{const P=v(k),m=y.getState();switch(k.type){case pi:case lo:case uo:case ao:{const d=m.deltalog;this.log=[...this.log,...d];break}case pu:{this.log=[];break}case gu:case yu:{let d=-1;this.log.length>0&&(d=this.log[this.log.length-1]._stateID);let p=k.deltalog||[];p=p.filter(S=>S._stateID>d),this.log=[...this.log,...p];break}case mu:{this.initialState=k.initialState,this.log=k.log||[];break}}return P});a=a!==void 0?yp(h,a):h,this.store=Cu(this.reducer,this.initialState,a),i||(i=Mv),this.transport=i({transportDataCallback:y=>this.receiveTransportData(y),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=y=>{this.transport.sendChatMessage(this.matchID,{id:Lg(7),sender:this.playerID,payload:y})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=Vh(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=Wh(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=Hh(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:Zh(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Rv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Lv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=bv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function $v(e){return new zv(e)}const wp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},Sn=e=>wp(e,"game name"),Or=e=>wp(e,"match ID"),Tr=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class Fv extends Error{constructor(t,n){super(t),this.details=n}}class Bv{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new Fv(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){Sn(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return Sn(t),Or(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return Sn(t),Tr(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return Sn(t),Or(n),Tr(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){Sn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){Sn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return Sn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var Sp={exports:{}},Uv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vv=Uv,Hv=Vv;function kp(){}function _p(){}_p.resetWarningCache=kp;var Wv=function(){function e(r,i,s,o,l,a){if(a!==Hv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_p,resetWarningCache:kp};return n.PropTypes=n,n};Sp.exports=Wv();var Yv=Sp.exports;const wt=Ef(Yv);var Vt={},Tu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Tu.parse=Jv;Tu.serialize=Xv;var qv=decodeURIComponent,Kv=encodeURIComponent,Qv=/; */,Vi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Jv(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(Qv),s=r.decode||qv,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=Zv(c,s))}}return n}function Xv(e,t,n){var r=n||{},i=r.encode||Kv;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Vi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Vi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Vi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Vi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function Zv(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var df=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty,e0=Object.prototype.propertyIsEnumerable;function t0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var r0=n0()?Object.assign:function(e,t){for(var n,r=t0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)Gv.call(n,o)&&(r[o]=n[o]);if(df){i=df(n);for(var l=0;l<i.length;l++)e0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},i0={};Object.defineProperty(Vt,"__esModule",{value:!0});var s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Vt.load=Cp;Vt.loadAll=Np;Vt.select=Op;Vt.save=Tp;Vt.remove=Ap;Vt.setRawCookie=Au;Vt.plugToRequest=Ip;var o0=Tu,gr=xp(o0),l0=r0,Ep=xp(l0);function xp(e){return e&&e.__esModule?e:{default:e}}var po=typeof document>"u"||typeof process<"u"&&i0&&!1,Ue={},hn=void 0;function Pp(){return hn&&!hn.headersSent}function Cp(e,t){var n=po?Ue:gr.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Np(e){var t=po?Ue:gr.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Op(e){var t=po?Ue:gr.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,Ep.default)({},n,i)},{}):t:{}}function Tp(e,t,n){Ue[e]=t,(typeof t>"u"?"undefined":s0(t))==="object"&&(Ue[e]=JSON.stringify(t)),po||(document.cookie=gr.default.serialize(e,Ue[e],n)),Pp()&&hn.cookie&&hn.cookie(e,t,n)}function Ap(e,t){delete Ue[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Ep.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=gr.default.serialize(e,"",t)),Pp()&&hn.clearCookie&&hn.clearCookie(e,t)}function Au(e){e?Ue=gr.default.parse(e):Ue={}}function Ip(e,t){return e.cookie?Ue=e.cookie:e.cookies?Ue=e.cookies:e.headers&&e.headers.cookie?Au(e.headers.cookie):Ue={},hn=t,function(){hn=null,Ue={}}}var hf=Vt.default={setRawCookie:Au,load:Cp,loadAll:Np,select:Op,save:Tp,remove:Ap,plugToRequest:Ip},Bs;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Bs||(Bs={}));function kn(e){return e.type()===Bs.SYNC}class a0{type(){return Bs.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const u0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},c0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=u0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=vp({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},pf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),f0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class d0{constructor(t,n,r,i){this.game=ho(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(kn(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=f0(t),l=r;let a;if(kn(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return H(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){H(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Pu({game:this.game}),c=gp(mp),f=Cu(u,a,c);if(o.type==uo||o.type==ao){const m=a.ctx.activePlayers!==null,d=a.ctx.currentPlayer===i;if(!m&&!d||m&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){H(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){H(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const h=o.type==pi?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==pi&&!h){H(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(h&&hp(h)&&h.ignoreStaleStateID)){H(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const y=f.getState();f.dispatch(o),a=f.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,y,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...k}=a;let P;if(s&&(s.gameover===void 0||s.gameover===null)&&(P={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(P.gameover=a.ctx.gameover)),kn(this.storageAPI))this.storageAPI.setState(l,k,v),P&&this.storageAPI.setMetadata(l,P);else{const m=[this.storageAPI.setState(l,k,v)];P&&m.push(this.storageAPI.setMetadata(l,P)),await Promise.all(m)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=kn(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:f}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:f}))return{error:"unauthorized"};if(a===void 0){const v=c0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,f=v.metadata,this.subscribeCallback({state:a,matchID:t}),kn(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:f}):await this.storageAPI.createMatch(s,{initialState:u,metadata:f})}const h=f?pf(f):void 0,y={state:a,log:c,filteredMetadata:h,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,y]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(kn(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return H(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return H(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=pf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),kn(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const Hi=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:Zh(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),h0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=Zo(o.deltalog,t),a=Hi(e,t,o),u=o._stateID,c=Hi(e,t,s),f=Su.createPatch(c,a);return{type:"patch",args:[r,i,u,f,l]}}case"update":{const[r,i]=n.args,s=Zo(i.deltalog,t),o=Hi(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=Hi(e,t,i.state),o=Zo(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function Zo(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const Ct=Object.create(null);Ct.open="0";Ct.close="1";Ct.ping="2";Ct.pong="3";Ct.message="4";Ct.upgrade="5";Ct.noop="6";const ls=Object.create(null);Object.keys(Ct).forEach(e=>{ls[Ct[e]]=e});const ia={type:"error",data:"parser error"},Mp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Dp=typeof ArrayBuffer=="function",jp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Iu=({type:e,data:t},n,r)=>Mp&&t instanceof Blob?n?r(t):mf(t,r):Dp&&(t instanceof ArrayBuffer||jp(t))?n?r(t):mf(new Blob([t]),r):r(Ct[e]+(t||"")),mf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function yf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Go;function p0(e,t){if(Mp&&e.data instanceof Blob)return e.data.arrayBuffer().then(yf).then(t);if(Dp&&(e.data instanceof ArrayBuffer||jp(e.data)))return t(yf(e.data));Iu(e,!1,n=>{Go||(Go=new TextEncoder),t(Go.encode(n))})}const gf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<gf.length;e++)Lr[gf.charCodeAt(e)]=e;const m0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Lr[e.charCodeAt(r)],o=Lr[e.charCodeAt(r+1)],l=Lr[e.charCodeAt(r+2)],a=Lr[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},y0=typeof ArrayBuffer=="function",Mu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Rp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:g0(e.substring(1),t)}:ls[n]?e.length>1?{type:ls[n],data:e.substring(1)}:{type:ls[n]}:ia},g0=(e,t)=>{if(y0){const n=m0(e);return Rp(n,t)}else return{base64:!0,data:e}},Rp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Lp="",v0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Iu(s,!1,l=>{r[o]=l,++i===n&&t(r.join(Lp))})})},w0=(e,t)=>{const n=e.split(Lp),r=[];for(let i=0;i<n.length;i++){const s=Mu(n[i],t);if(r.push(s),s.type==="error")break}return r};function S0(){return new TransformStream({transform(e,t){p0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let el;function Wi(e){return e.reduce((t,n)=>t+n.length,0)}function Yi(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function k0(e,t){el||(el=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Wi(n)<1)break;const a=Yi(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Wi(n)<2)break;const a=Yi(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Wi(n)<8)break;const a=Yi(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(ia);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Wi(n)<i)break;const a=Yi(n,i);l.enqueue(Mu(s?a:el.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(ia);break}}}})}const bp=4;function ce(e){if(e)return _0(e)}function _0(e){for(var t in ce.prototype)e[t]=ce.prototype[t];return e}ce.prototype.on=ce.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ce.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ce.prototype.off=ce.prototype.removeListener=ce.prototype.removeAllListeners=ce.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ce.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ce.prototype.emitReserved=ce.prototype.emit;ce.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ce.prototype.hasListeners=function(e){return!!this.listeners(e).length};const mo=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Ge=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),E0="arraybuffer";function zp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const x0=Ge.setTimeout,P0=Ge.clearTimeout;function yo(e,t){t.useNativeTimers?(e.setTimeoutFn=x0.bind(Ge),e.clearTimeoutFn=P0.bind(Ge)):(e.setTimeoutFn=Ge.setTimeout.bind(Ge),e.clearTimeoutFn=Ge.clearTimeout.bind(Ge))}const C0=1.33;function N0(e){return typeof e=="string"?O0(e):Math.ceil((e.byteLength||e.size)*C0)}function O0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function $p(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function T0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function A0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class I0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Du extends ce{constructor(t){super(),this.writable=!1,yo(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new I0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Mu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=T0(t);return n.length?"?"+n:""}}class M0 extends Du{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};w0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,v0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=$p()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Fp=!1;try{Fp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const D0=Fp;function j0(){}class R0 extends M0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Pt extends ce{constructor(t,n,r){super(),this.createRequest=t,yo(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=zp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Pt.requestsCount++,Pt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=j0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Pt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Pt.requestsCount=0;Pt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",vf);else if(typeof addEventListener=="function"){const e="onpagehide"in Ge?"pagehide":"unload";addEventListener(e,vf,!1)}}function vf(){for(let e in Pt.requests)Pt.requests.hasOwnProperty(e)&&Pt.requests[e].abort()}const L0=function(){const e=Bp({xdomain:!1});return e&&e.responseType!==null}();class b0 extends R0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=L0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Pt(Bp,this.uri(),t)}}function Bp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||D0))return new XMLHttpRequest}catch{}if(!t)try{return new Ge[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Up=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class z0 extends Du{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Up?{}:zp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Iu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&mo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=$p()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const tl=Ge.WebSocket||Ge.MozWebSocket;class $0 extends z0{createSocket(t,n,r){return Up?new tl(t,n,r):n?new tl(t,n):new tl(t)}doWrite(t,n){this.ws.send(n)}}class F0 extends Du{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=k0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=S0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&mo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const B0={websocket:$0,webtransport:F0,polling:b0},U0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,V0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sa(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=U0.exec(e||""),s={},o=14;for(;o--;)s[V0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=H0(s,s.path),s.queryKey=W0(s,s.query),s}function H0(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function W0(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const oa=typeof addEventListener=="function"&&typeof removeEventListener=="function",as=[];oa&&addEventListener("offline",()=>{as.forEach(e=>e())},!1);class un extends ce{constructor(t,n){if(super(),this.binaryType=E0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=sa(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=sa(n.host).host);yo(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=A0(this.opts.query)),oa&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},as.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=bp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&un.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",un.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=N0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,mo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(un.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),oa&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=as.indexOf(this._offlineEventListener);r!==-1&&as.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}un.protocol=bp;class Y0 extends un{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;un.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;un.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let q0=class extends Y0{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>B0[i]).filter(i=>!!i)),super(t,r)}};function K0(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=sa(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Q0=typeof ArrayBuffer=="function",J0=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Vp=Object.prototype.toString,X0=typeof Blob=="function"||typeof Blob<"u"&&Vp.call(Blob)==="[object BlobConstructor]",Z0=typeof File=="function"||typeof File<"u"&&Vp.call(File)==="[object FileConstructor]";function ju(e){return Q0&&(e instanceof ArrayBuffer||J0(e))||X0&&e instanceof Blob||Z0&&e instanceof File}function us(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(us(e[n]))return!0;return!1}if(ju(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return us(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&us(e[n]))return!0;return!1}function G0(e){const t=[],n=e.data,r=e;return r.data=la(n,t),r.attachments=t.length,{packet:r,buffers:t}}function la(e,t){if(!e)return e;if(ju(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=la(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=la(e[r],t));return n}return e}function ew(e,t){return e.data=aa(e.data,t),delete e.attachments,e}function aa(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=aa(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=aa(e[n],t));return e}const Hp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tw=5;var $;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})($||($={}));class nw{constructor(t){this.replacer=t}encode(t){return(t.type===$.EVENT||t.type===$.ACK)&&us(t)?this.encodeAsBinary({type:t.type===$.EVENT?$.BINARY_EVENT:$.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===$.BINARY_EVENT||t.type===$.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=G0(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Ru extends ce{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===$.BINARY_EVENT;r||n.type===$.BINARY_ACK?(n.type=r?$.EVENT:$.ACK,this.reconstructor=new rw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(ju(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if($[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===$.BINARY_EVENT||r.type===$.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Ru.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case $.CONNECT:return Us(n);case $.DISCONNECT:return n===void 0;case $.CONNECT_ERROR:return typeof n=="string"||Us(n);case $.EVENT:case $.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Hp.indexOf(n[0])===-1);case $.ACK:case $.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class rw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=ew(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function iw(e){return typeof e=="string"}const sw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function ow(e){return e===void 0||sw(e)}function Us(e){return Object.prototype.toString.call(e)==="[object Object]"}function lw(e,t){switch(e){case $.CONNECT:return t===void 0||Us(t);case $.DISCONNECT:return t===void 0;case $.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Hp.indexOf(t[0])===-1);case $.ACK:return Array.isArray(t);case $.CONNECT_ERROR:return typeof t=="string"||Us(t);default:return!1}}function aw(e){return iw(e.nsp)&&ow(e.id)&&lw(e.type,e.data)}const uw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ru,Encoder:nw,get PacketType(){return $},isPacketValid:aw,protocol:tw},Symbol.toStringTag,{value:"Module"}));function ut(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const cw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Wp extends ce{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ut(t,"open",this.onopen.bind(this)),ut(t,"packet",this.onpacket.bind(this)),ut(t,"error",this.onerror.bind(this)),ut(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(cw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:$.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:$.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case $.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $.EVENT:case $.BINARY_EVENT:this.onevent(t);break;case $.ACK:case $.BINARY_ACK:this.onack(t);break;case $.DISCONNECT:this.ondisconnect();break;case $.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:$.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:$.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function vr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}vr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};vr.prototype.reset=function(){this.attempts=0};vr.prototype.setMin=function(e){this.ms=e};vr.prototype.setMax=function(e){this.max=e};vr.prototype.setJitter=function(e){this.jitter=e};class ua extends ce{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,yo(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new vr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||uw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new q0(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=ut(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=ut(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ut(t,"ping",this.onping.bind(this)),ut(t,"data",this.ondata.bind(this)),ut(t,"error",this.onerror.bind(this)),ut(t,"close",this.onclose.bind(this)),ut(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){mo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Wp(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ar={};function cs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=K0(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Ar[i]&&s in Ar[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new ua(r,t):(Ar[i]||(Ar[i]=new ua(r,t)),a=Ar[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(cs,{Manager:ua,Socket:Wp,io:cs,connect:cs});class Yp extends a0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class fw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class dw extends Yp{constructor(t="bgio"){super();const n=r=>new fw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function hw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class pw extends d0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const f in n){const h=n[f];o[f]=new h({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:f,...h})=>{const y=s[f];y!==void 0&&y(a(f,h))},a=h0(t),u={send:l,sendAll:f=>{for(const h in s)l({playerID:h,...f})}},c=i?new dw(r):new Yp;super(t,c,u),this.connect=(f,h)=>{s[f]=h},this.subscribe(({state:f,matchID:h})=>{if(!n)return;const y=hw(f,o);y!==null&&setTimeout(async()=>{const v=await o[y].play(f,y);await this.onUpdate(v.action,f._stateID,h,v.action.payload.playerID)},100)})}}class mw extends Nu{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const wf=new Map;function qp({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=wf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new pw({game:s,bots:e,persist:t,storageKey:n}),wf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new mw({master:o,...r})}}const Sf=cs;class yw extends Nu{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=Sf(t+this.gameName,this.socketOpts)}else this.socket=Sf("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function kf({server:e,socketOpts:t}={}){return n=>new yw({server:e,socketOpts:t,...n})}function Kp(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>j.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends j.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=$v({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return j.createElement(l);let f=null;return i&&(f=j.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),j.createElement("div",{className:"bgio-client"},f)}},t.propTypes={matchID:wt.string,playerID:wt.string,credentials:wt.string,debug:wt.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class gw{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Bv({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function vw(e){return new gw(e)}class Qp extends j.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return j.createElement("div",null,j.createElement("p",{className:"phase-title"},"Choose a player name:"),j.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),j.createElement("span",{className:"buttons"},j.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),j.createElement("br",null),j.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,j.createElement("br",null)))}}Qp.defaultProps={playerName:""};class ww extends j.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>j.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>j.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>j.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>j.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?j.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),j.createElement("tr",{key:"line-"+t.matchID},j.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),j.createElement("td",{key:"cell-status-"+t.matchID},n),j.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),j.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Sw extends j.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>j.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>j.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return j.createElement("div",null,j.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),j.createElement("span",null,"Players:"),j.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),j.createElement("span",{className:"buttons"},j.createElement("button",{onClick:this.onClickCreate},"Create")))}}var De;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(De||(De={}));class Jp extends j.Component{constructor(t){super(t),this.state={phase:De.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=vw({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:De.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:De.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?kf({server:this.props.gameServer}):kf()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=os;s=qp({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:De.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:De.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return j.createElement(ww,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=hf.load("lobbyState")||{};t.phase&&t.phase===De.PLAY&&(t.phase=De.LIST),t.phase&&t.phase!==De.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||De.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};hf.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):j.createElement("div",{id:"lobby-view",style:{padding:50}},j.createElement("div",{className:this._getPhaseVisibility(De.ENTER)},j.createElement(Qp,{key:i,playerName:i,onEnter:this._enterLobby})),j.createElement("div",{className:this._getPhaseVisibility(De.LIST)},j.createElement("p",null,"Welcome, ",i),j.createElement("div",{className:"phase-title",id:"match-creation"},j.createElement("span",null,"Create a match:"),j.createElement(Sw,{games:t,createMatch:this._createMatch})),j.createElement("p",{className:"phase-title"},"Join a match:"),j.createElement("div",{id:"instances"},j.createElement("table",null,j.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),j.createElement("span",{className:"error-msg"},r,j.createElement("br",null))),j.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),j.createElement("div",{className:this._getPhaseVisibility(De.PLAY)},o&&j.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),j.createElement("div",{className:"buttons",id:"match-exit"},j.createElement("button",{onClick:this._exitMatch},"Exit match"))),j.createElement("div",{className:"buttons",id:"lobby-exit"},j.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}Jp.propTypes={gameComponents:wt.array.isRequired,lobbyServer:wt.string,gameServer:wt.string,debug:wt.bool,clientFactory:wt.func,refreshInterval:wt.number};Jp.defaultProps={debug:!1,clientFactory:Kp,refreshInterval:2e3};const He=["Hearts","Diamonds","Clubs","Spades"],Kr=40,Xp=5,kw=["","","","","",""],_w={Hearts:"",Diamonds:"",Clubs:"",Spades:""},Zp={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function Ew(e,t){const n={};if(e.deckType===36)for(const r of He)n[r]=[{suit:r,value:1}];else for(const r of He){const i=Array.from({length:Xp},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function Gp(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of He){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),f=t[o]||[];r[o]=[...f,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function qi(e,t){return t.deckType!==36||e<2||e>5}function em(e,t,n,r,i){const s=[];for(const a of He)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>qi(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function tm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function nm(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function xw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function Pw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Cw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function ca(e){return e?3:4}function rm(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=Kr&&!e.claimedJobs.includes(r)&&Nw(e,r,n)}function Nw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Ow(e){if(!Cw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function fa(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=Kr||(t.miceVariant?Tw(e,n,r,t):t.deckType===36?Aw(e,n,r,t):Iw(e,n,r,t))}function Lu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Vs(e,`${r.suit}-${r.value}`),!0;return!1}function bu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function zu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Vs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function gi(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Tw(e,t,n,r){if(Lu(e,n,r))return;const i=bu(n,e.trump,r),s=zu(n,e.trump,r),o=im(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),Hs(e,o[0]),s&&o.length>1&&(Hs(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${gi(o[1][1])}`)))}function Aw(e,t,n,r){if(Lu(e,n,r))return;const i=bu(n,e.trump,r),s=zu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=im(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(f=>f.suit===t);for(const f of c)l.some(([y,v])=>y===u&&v.suit===f.suit&&v.value===f.value)||l.push([u,f])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((f,h)=>h.value-f.value),Hs(e,[u,c[0]]),s&&c.length>1&&(Hs(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${gi(c[1])}`)))}function Iw(e,t,n,r){if(Lu(e,n,r))return;const i=bu(n,e.trump,r),s=zu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(h=>h.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(h=>h.suit!==t);const u=(o.plot.revealed||[]).filter(h=>h.suit===t).sort((h,y)=>y.value-h.value);if(u.length===0)continue;const c=u[0],f=o.plot.revealed.findIndex(h=>h.suit===c.suit&&h.value===c.value);if(o.plot.revealed.splice(f,1),Vs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${gi(c)}`),s&&u.length>1){const h=u[1],y=o.plot.revealed.findIndex(v=>v.suit===h.suit&&v.value===h.value);o.plot.revealed.splice(y,1),Vs(e,`${h.suit}-${h.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${gi(h)}`)}}}function im(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const f of c.revealed||[])f.suit===t&&a.push({card:f,stack:c,location:"revealed"});for(const f of c.hidden||[])f.suit===t&&a.push({card:f,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const f=o.plot.hidden.findIndex(h=>h.suit===c.suit&&h.value===c.value);o.plot.hidden.splice(f,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:f,location:h}of a){const y=h==="hidden"?f.hidden:f.revealed,v=y.findIndex(k=>k.suit===c.suit&&k.value===c.value);v!==-1&&(y.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((h,y)=>y.value>h.value?y:h);if(l.some(h=>h.suit===c.suit&&h.value===c.value)){const h=o.plot.hidden.findIndex(y=>y.suit===c.suit&&y.value===c.value);o.plot.hidden.splice(h,1),o.plot.revealed.push(c),s.push([o,c])}else{const h=a.find(y=>y.card.suit===c.suit&&y.card.value===c.value);if(h){const{stack:y,location:v}=h,k=v==="hidden"?y.hidden:y.revealed,P=k.findIndex(m=>m.suit===c.suit&&m.value===c.value);P!==-1&&(k.splice(P,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function Hs(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Vs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${gi(n)}`)}function Mw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function Dw(e,t){const n=Mw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function jw(e,t){const n=Dw(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function da(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of He)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>Xp)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of He)e.workHours[o]=0;const{jobs:r,isFamine:i}=Gp(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of He)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.workersDeck=em(e.players,e.jobBuckets,e.exiled,t,n),tm(e.players,e.workersDeck,e.isFamine),!1}function sm(e,t){const n=He.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function _f(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function Rw({ctx:e,random:t},n){const r={...Zp,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...kw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(_f(0,!0,""));else{const f=Math.floor(t.Number()*s.length),h=s.splice(f,1)[0];o.push(_f(c,!1,h))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:Ew(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1};for(const c of He)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=Gp(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=em(l.players,l.jobBuckets,l.exiled,r,t),tm(l.players,l.workersDeck,l.isFamine),l}function Lw({G:e,random:t},n){n&&He.includes(n)?e.trump=n:sm(e,t)}function bw({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!nm(e,i,r))return dn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function zw({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function $w({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return dn;const r=new Set(e.lastTrick.map(([,s])=>s.suit));for(const[,s]of Object.entries(e.pendingAssignments))if(!r.has(s))return dn;rm(e,e.pendingAssignments,e.variants),e.pendingAssignments={};const i=ca(e.isFamine);if(e.trickCount>=i){console.log("[submitAssignments] Last trick - processing year end");for(const s of e.players)for(;s.hand.length>0;){const o=s.hand.pop();s.plot.hidden.push(o)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(s=>s.plot.hidden.length)),fa(e,e.variants),da(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(s=>s.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function Fw({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return dn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return dn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function Bw({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const Uw={name:"kolkhoz",setup:Rw,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:Lw},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&sm(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:bw},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=xw(e);if(n!==null){Pw(e,n);const r=Ow(e.lastTrick);r?(rm(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0;const i=ca(e.isFamine);if(!e.needsManualAssignment&&e.trickCount>=i){console.log("[trick onEnd] Last trick - processing year end");for(const s of e.players)for(;s.hand.length>0;){const o=s.hand.pop();s.plot.hidden.push(o)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(s=>s.plot.hidden.length)),fa(e,e.variants),da(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(s=>s.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=ca(e.isFamine);return console.log("[trick next] trickCount:",e.trickCount,"tricksPerYear:",t,"isFamine:",e.isFamine),e.trickCount>=t?"plotSelection":"trick"}},assignment:{moves:{assignCard:zw,submitAssignments:$w},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),fa(e,e.variants),da(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{turn:{activePlayers:{all:"swapping"},stages:{swapping:{moves:{swapCard:Fw,confirmSwap:Bw}}}},onBegin:({G:e})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(t=>t.hand.length),"plots:",e.players.map(t=>t.plot.hidden.length)),e.swapConfirmed={};for(const t of e.players)t.isHuman||(e.swapConfirmed[t.idx]=!0)},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return jw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{var o;const r=[],i=parseInt(n,10),s=e.players[i];if(t.phase==="planning")for(const l of He)r.push({move:"setTrump",args:[l]});else if(t.phase==="trick")for(let l=0;l<s.hand.length;l++)nm(e,i,l)&&r.push({move:"playCard",args:[l]});else if(t.phase==="assignment"&&i===e.lastWinner){const l=e.pendingAssignments||{};if(Object.keys(l).length===e.lastTrick.length)r.push({move:"submitAssignments",args:[]});else{const u=[...new Set(e.lastTrick.map(([,c])=>c.suit))];for(const[,c]of e.lastTrick){const f=`${c.suit}-${c.value}`;if(!l[f]){for(const h of u)r.push({move:"assignCard",args:[f,h]});break}}}}else(t.phase==="swap"||((o=t.activePlayers)==null?void 0:o[n])==="swapping")&&r.push({move:"confirmSwap",args:[]});return r}}};function Vw(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function ft({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,f=s?"assets/cards/back.svg":Vw(e);return t!==0||n!==0?w.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[w.jsx("image",{href:f,width:r,height:c,x:-r/2,y:-c/2}),l&&w.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#4CAF50",strokeWidth:"3",rx:"8"})]}):w.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:w.jsx("img",{src:f,alt:s?"Card back":`${e.value} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function Hw({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s}){if(!e||e.length===0)return w.jsx("div",{className:"hand empty",children:"No cards in hand"});const o=Math.min(8,60/e.length),a=-(o*(e.length-1))/2;return w.jsx("div",{className:"hand",children:e.map((u,c)=>{const f=!s||s.includes(c),h=a+c*o,y=Math.abs(h)*.5;return w.jsx("div",{className:`hand-card ${f&&n?"playable":""} ${f?"":"invalid"}`,style:{transform:`rotate(${h}deg) translateY(${y}px)`,zIndex:c},onClick:()=>{n&&f&&t(c)},children:w.jsx(ft,{card:u,width:100,highlight:f&&n,dimmed:!f&&n})},`${u.suit}-${u.value}-${c}`)})})}function Ww({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450}){const o=l=>{const a=[{x:0,y:100},{x:-100,y:0},{x:0,y:-100},{x:100,y:0}];return a[l]||a[0]};return w.jsxs("g",{className:"trick-area",children:[w.jsx("circle",{cx:r,cy:i,r:180,fill:"#2d5016",stroke:"#8B4513",strokeWidth:"8"}),w.jsx("circle",{cx:r,cy:i,r:160,fill:"none",stroke:"#3d6b1e",strokeWidth:"2"}),e.length>0&&w.jsxs("text",{x:r,y:i-100-40,textAnchor:"middle",fill:"#FFD700",fontSize:"14",children:["Lead: ",e[0][1].suit]}),e.map(([l,a],u)=>{const c=o(l);return w.jsx(ft,{card:a,x:r+c.x,y:i+c.y,width:80,rotation:l*90},`${a.suit}-${a.value}`)}),Array.from({length:t}).map((l,a)=>{if(e.some(([f])=>f===a))return null;const c=o(a);return w.jsx("rect",{x:r+c.x-40,y:i+c.y-56,width:80,height:112,fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"2",strokeDasharray:"5,5",rx:"8"},`slot-${a}`)})]})}function Yw({revealedJobs:e,workHours:t,jobBuckets:n,claimedJobs:r,trump:i,phase:s,pendingAssignments:o,onAssign:l,lastTrick:a}){const v=P=>P==="Hearts"||P==="Diamonds"?"#c41e3a":"#1a1a2e",k=P=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[P];return w.jsx("g",{className:"job-piles-area",children:He.map((P,m)=>{const d=80+m*130,p=150,S=(t==null?void 0:t[P])||0,C=r==null?void 0:r.includes(P),T=P===i,A=(n==null?void 0:n[P])||[],D=Math.min(80,S/Kr*80),V=e==null?void 0:e[P],b=Array.isArray(V)?V:V?[V]:[],Z=100;return w.jsxs("g",{className:`job-pile ${C?"claimed":""}`,children:[w.jsx("rect",{x:d-55,y:p-30,width:110,height:Z,fill:T?"rgba(255,215,0,0.15)":"rgba(0,0,0,0.4)",stroke:T?"#FFD700":"#555",strokeWidth:T?2:1,rx:"8"}),T&&w.jsx("text",{x:d,y:p-15,textAnchor:"middle",fill:"#FFD700",fontSize:"9",fontWeight:"bold",children:"TRUMP"}),w.jsx("text",{x:d,y:p+8,textAnchor:"middle",fill:v(P),fontSize:"20",children:k(P)}),w.jsx("text",{x:d,y:p+25,textAnchor:"middle",fill:"#bbb",fontSize:"10",children:_w[P]}),w.jsx("rect",{x:d-40,y:p+35,width:80,height:8,fill:"#333",rx:"4"}),w.jsx("rect",{x:d-40,y:p+35,width:D,height:8,fill:C||S>=Kr?"#4CAF50":"#2196F3",rx:"4"}),w.jsxs("text",{x:d,y:p+42,textAnchor:"middle",fill:"white",fontSize:"7",children:[S,"/",Kr]}),C&&w.jsx("text",{x:d,y:p+60,textAnchor:"middle",fill:"#4CAF50",fontSize:"9",fontWeight:"bold",children:"COMPLETE"}),b.map((le,fe)=>w.jsx(ft,{card:le,x:d-45/2+fe*8,y:p+Z-25,width:45},`reward-${fe}`)),A.map((le,fe)=>w.jsx(ft,{card:le,x:d-45/2,y:p+Z+50+fe*20,width:45},`assigned-${fe}`)),A.length>0&&w.jsxs("text",{x:d,y:p+Z+40,textAnchor:"middle",fill:"#888",fontSize:"9",children:[A.length," assigned"]})]},P)})})}function qw({player:e,position:t,isActive:n,isBrigadeLeader:r}){var l,a,u,c,f;const{x:i,y:s}=t,o=((l=e.hand)==null?void 0:l.length)||0;return w.jsxs("g",{className:`player-area ${n?"active":""}`,children:[w.jsx("rect",{x:i-80,y:s-60,width:160,height:120,fill:n?"rgba(76, 175, 80, 0.2)":"rgba(0,0,0,0.3)",stroke:n?"#4CAF50":"#444",strokeWidth:n?2:1,rx:"10"}),w.jsxs("text",{x:i,y:s-40,textAnchor:"middle",fill:n?"#4CAF50":"#fff",fontSize:"14",fontWeight:n?"bold":"normal",children:[e.name,r&&" "]}),w.jsxs("g",{transform:`translate(${i-30}, ${s-20})`,children:[Array.from({length:Math.min(5,o)}).map((h,y)=>w.jsx("rect",{x:y*12,y:0,width:30,height:42,fill:"#1a237e",stroke:"#3949ab",strokeWidth:"1",rx:"3"},y)),w.jsxs("text",{x:30,y:55,textAnchor:"middle",fill:"#888",fontSize:"10",children:[o," cards"]})]}),w.jsxs("text",{x:i,y:s+50,textAnchor:"middle",fill:"#888",fontSize:"11",children:["Plot: ",(((u=(a=e.plot)==null?void 0:a.revealed)==null?void 0:u.length)||0)+(((f=(c=e.plot)==null?void 0:c.hidden)==null?void 0:f.length)||0)," cards"]}),e.medals>0&&w.jsxs("text",{x:i+60,y:s-40,fill:"#FFD700",fontSize:"12",children:[" ",e.medals]})]})}function Kw({exiled:e,currentYear:t}){const l=u=>{const[c,f]=u.split("-");return{suit:c,value:parseInt(f,10)}},a=[1,2,3,4,5];return w.jsxs("g",{className:"gulag-area",children:[w.jsx("text",{x:140,y:0,textAnchor:"middle",fill:"#888",fontSize:"12",fontWeight:"bold",children:"GULAG"}),a.map((u,c)=>{const f=0+c*70,h=20,y=e[u]||[],v=u<t,k=u===t;return w.jsxs("g",{className:"gulag-year",children:[w.jsx("rect",{x:f,y:h,width:60,height:25,fill:k?"rgba(196,30,58,0.3)":"rgba(0,0,0,0.3)",stroke:k?"#c41e3a":"#444",strokeWidth:1,rx:"4"}),w.jsxs("text",{x:f+30,y:h+17,textAnchor:"middle",fill:v?"#666":k?"#c41e3a":"#888",fontSize:"11",children:["Year ",u]}),y.map((P,m)=>{const d=l(P);return w.jsx(ft,{card:d,x:f+10,y:h+35+m*18,width:40},m)}),y.length===0&&v&&w.jsx("text",{x:f+30,y:h+55,textAnchor:"middle",fill:"#444",fontSize:"9",children:"-"})]},u)})]})}function Qw({year:e,trump:t,phase:n,currentPlayer:r,players:i,isMyTurn:s,exiled:o}){var h;const u=y=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[y]||y,c=y=>y==="Hearts"||y==="Diamonds"?"#c41e3a":"#1a1a2e",f=y=>({planning:"Select Trump",trick:"Trick Phase",assignment:"Assign Cards",plotSelection:"Select Plot Card",requisition:"Requisition",swap:"Swap Cards"})[y]||y;return w.jsxs("g",{className:"right-sidebar",children:[w.jsx("rect",{x:1540,y:120,width:360,height:180,fill:"rgba(0,0,0,0.5)",stroke:"#444",strokeWidth:1,rx:"10"}),w.jsx("text",{x:1560,y:150,fill:"#888",fontSize:"11",children:"Year"}),w.jsxs("text",{x:1560,y:170,fill:"#fff",fontSize:"18",fontWeight:"bold",children:[e,"/5"]}),w.jsx("text",{x:1640,y:150,fill:"#888",fontSize:"11",children:"Trump"}),t?w.jsxs("text",{x:1640,y:170,fill:c(t),fontSize:"18",fontWeight:"bold",children:[u(t)," ",t]}):w.jsx("text",{x:1640,y:170,fill:"#666",fontSize:"14",children:"Not selected"}),w.jsx("text",{x:1560,y:205,fill:"#888",fontSize:"11",children:"Phase"}),w.jsx("text",{x:1560,y:225,fill:"#fff",fontSize:"14",children:f(n)}),w.jsx("text",{x:1560,y:255,fill:"#888",fontSize:"11",children:"Turn"}),s?w.jsx("text",{x:1560,y:275,fill:"#4CAF50",fontSize:"14",fontWeight:"bold",children:"Your Turn!"}):w.jsxs("text",{x:1560,y:275,fill:"#888",fontSize:"12",children:["Waiting for ",(h=i[parseInt(r,10)])==null?void 0:h.name,"..."]}),w.jsx("g",{transform:"translate(1545, 320)",children:w.jsx(Kw,{exiled:o,currentYear:e})})]})}function Jw({G:e,ctx:t,moves:n,playerID:r}){var A,D,V,b,Z,le,fe,Nt,gn,Ht,Wt,I;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=jt.useState(null),[u,c]=jt.useState(null),[f,h]=jt.useState(null),y=N=>{o==="trick"&&s&&n.playCard(N)},v=N=>{o==="planning"&&n.setTrump(N)},k=(N,O)=>{n.assignCard(N,O)},P=()=>{n.submitAssignments()},m=()=>{l!==null&&u!==null&&f!==null&&(n.swapCard(u,l,f),a(null),c(null),h(null))},d=(N,O)=>{u===N&&f===O?(c(null),h(null)):(c(N),h(O))},p=()=>{n.confirmSwap()},S=1e3,C=450,T=(N,O)=>{const B=[{x:S,y:750},{x:S-280,y:450},{x:S,y:150},{x:S+280,y:450}];return B[N]||B[0]};if(t.gameover){const{winner:N,scores:O}=t.gameover;return w.jsxs("div",{className:"game-over",children:[w.jsx("h1",{children:"Game Over!"}),w.jsxs("h2",{children:["Winner: ",e.players[N].name]}),w.jsx("div",{className:"final-scores",children:e.players.map((B,Y)=>w.jsxs("div",{className:Y===N?"winner":"",children:[B.name,": ",O[Y]," points"]},Y))}),w.jsx("p",{children:"(Lowest score wins)"})]})}return w.jsxs("div",{className:"game-board",children:[o==="planning"&&!e.trump&&w.jsxs("div",{className:"trump-selection",children:[w.jsx("h3",{children:"Select Trump Suit"}),w.jsx("div",{className:"suit-buttons",children:He.map(N=>w.jsxs("button",{onClick:()=>v(N),className:`suit-btn ${N.toLowerCase()}`,children:[Xw(N)," ",N]},N))})]}),w.jsxs("svg",{viewBox:"0 0 1920 1080",className:"board-svg",children:[w.jsx(Yw,{revealedJobs:e.revealedJobs,workHours:e.workHours,jobBuckets:e.jobBuckets,claimedJobs:e.claimedJobs,trump:e.trump,phase:o,pendingAssignments:e.pendingAssignments,onAssign:k,lastTrick:e.lastTrick}),w.jsx(Ww,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:S,centerY:C}),e.players.map((N,O)=>{if(O===i)return null;const B=T(O,e.numPlayers);return w.jsx(qw,{player:N,position:B,isActive:parseInt(t.currentPlayer,10)===O,isBrigadeLeader:N.brigadeLeader},O)}),w.jsx(Qw,{year:e.year,trump:e.trump,phase:o,currentPlayer:t.currentPlayer,players:e.players,isMyTurn:s,exiled:e.exiled})]}),w.jsx(Hw,{cards:((A=e.players[i])==null?void 0:A.hand)||[],onPlayCard:y,canPlay:o==="trick"&&s,leadSuit:(V=(D=e.currentTrick[0])==null?void 0:D[1])==null?void 0:V.suit,trump:e.trump,validIndices:Zw(e,i,o)}),o==="assignment"&&e.lastWinner===i&&(()=>{const N=[...new Set(e.lastTrick.map(([,O])=>O.suit))];return w.jsxs("div",{className:"assignment-ui",children:[w.jsx("h3",{children:"Assign cards to jobs"}),w.jsx("p",{children:"Assign each card to a job from this trick"}),w.jsx("div",{className:"assignment-cards",children:e.lastTrick.map(([O,B],Y)=>{var st;const Ot=`${B.suit}-${B.value}`,it=(st=e.pendingAssignments)==null?void 0:st[Ot];return w.jsxs("div",{className:"assignment-card",children:[w.jsx(ft,{card:B,width:80}),w.jsx("select",{value:it||B.suit,onChange:G=>k(Ot,G.target.value),children:N.map(G=>w.jsx("option",{value:G,children:G},G))})]},Y)})}),w.jsx("button",{onClick:P,disabled:Object.keys(e.pendingAssignments||{}).length!==e.lastTrick.length,children:"Submit Assignments"})]})})(),o==="swap"&&!((b=e.swapConfirmed)!=null&&b[i])&&w.jsxs("div",{className:"swap-ui",children:[w.jsxs("h3",{children:["Swap Cards (Year ",e.year,")"]}),w.jsx("p",{children:"Select a card from your hand and one from your plot to swap, or skip"}),w.jsxs("div",{className:"swap-section",children:[w.jsx("h4",{children:"Your Hand"}),w.jsx("div",{className:"swap-cards",children:(Z=e.players[i])==null?void 0:Z.hand.map((N,O)=>w.jsx("div",{className:`swap-card ${l===O?"selected":""}`,onClick:()=>a(l===O?null:O),children:w.jsx(ft,{card:N,width:80})},`hand-${O}`))})]}),((le=e.players[i])==null?void 0:le.plot.revealed.length)>0&&w.jsxs("div",{className:"swap-section",children:[w.jsx("h4",{children:"Your Revealed Cards (Rewards)"}),w.jsx("div",{className:"swap-cards",children:(fe=e.players[i])==null?void 0:fe.plot.revealed.map((N,O)=>w.jsx("div",{className:`swap-card ${u===O&&f==="revealed"?"selected":""}`,onClick:()=>d(O,"revealed"),children:w.jsx(ft,{card:N,width:80})},`revealed-${O}`))})]}),((Nt=e.players[i])==null?void 0:Nt.plot.hidden.length)>0&&w.jsxs("div",{className:"swap-section",children:[w.jsx("h4",{children:"Your Hidden Plot"}),w.jsx("div",{className:"swap-cards",children:(gn=e.players[i])==null?void 0:gn.plot.hidden.map((N,O)=>w.jsx("div",{className:`swap-card ${u===O&&f==="hidden"?"selected":""}`,onClick:()=>d(O,"hidden"),children:w.jsx(ft,{card:N,width:80})},`hidden-${O}`))})]}),w.jsxs("div",{className:"swap-buttons",children:[w.jsx("button",{onClick:m,disabled:l===null||u===null||f===null,children:"Swap Selected Cards"}),w.jsx("button",{onClick:p,children:"Done Swapping"})]})]}),o==="swap"&&((Ht=e.swapConfirmed)==null?void 0:Ht[i])&&w.jsx("div",{className:"swap-ui",children:w.jsx("h3",{children:"Waiting for other players..."})}),w.jsxs("div",{className:"player-plot",children:[w.jsx("h4",{children:"Your Plot"}),w.jsxs("div",{className:"plot-cards",children:[(Wt=e.players[i])==null?void 0:Wt.plot.revealed.map((N,O)=>w.jsx(ft,{card:N,width:60},`r-${O}`)),(I=e.players[i])==null?void 0:I.plot.hidden.map((N,O)=>w.jsx(ft,{card:N,width:60,faceDown:!0},`h-${O}`))]})]})]})}function Xw(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function Zw(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function Gw(){const[e,t]=jt.useState(!1),[n,r]=jt.useState({...Zp}),i=jt.useMemo(()=>e?Kp({game:Uw,board:Jw,numPlayers:4,multiplayer:qp({bots:{1:os,2:os,3:os}}),debug:!1}):null,[e]);return e?w.jsx(i,{playerID:"0",setupData:{variants:n}}):w.jsxs("div",{className:"lobby",children:[w.jsx("h1",{children:""}),w.jsx("h2",{children:""}),w.jsxs("div",{className:"variant-options",children:[w.jsx("h3",{children:"Deck Type"}),w.jsxs("label",{children:[w.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Classic)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (With job rewards)"]}),w.jsx("h3",{children:"Variant Rules"}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:s=>r({...n,nomenclature:s.target.checked})}),w.jsx("strong",{children:""})," - Face card special effects (Drunkard Jack, etc.)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:s=>r({...n,allowSwap:s.target.checked})}),w.jsx("strong",{children:""})," - Swap hand/plot cards at year start"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:s=>r({...n,northernStyle:s.target.checked})}),w.jsx("strong",{children:" "})," - Northern style (no job rewards, all vulnerable)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:s=>r({...n,miceVariant:s.target.checked})}),w.jsx("strong",{children:""})," - Mice variant (all reveal during requisition)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:s=>r({...n,ordenNachalniku:s.target.checked})}),w.jsx("strong",{children:" "})," - Stack cards when jobs complete (36-card only)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:s=>r({...n,medalsCount:s.target.checked})}),w.jsx("strong",{children:""})," - Trick wins contribute to final score"]}),n.deckType===52&&w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:s=>r({...n,accumulateJobs:s.target.checked})}),w.jsx("strong",{children:""})," - Unclaimed job rewards carry over to next year"]})]}),w.jsx("button",{onClick:()=>t(!0),children:"Start Game"})]})}const e1=Lh(document.getElementById("root"));e1.render(w.jsx(Gw,{}));
