(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zf={exports:{}},Zs={},Bf={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=Symbol.for("react.element"),Nm=Symbol.for("react.portal"),Om=Symbol.for("react.fragment"),Tm=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),Am=Symbol.for("react.provider"),Im=Symbol.for("react.context"),Mm=Symbol.for("react.forward_ref"),Dm=Symbol.for("react.suspense"),Rm=Symbol.for("react.memo"),Lm=Symbol.for("react.lazy"),Xu=Symbol.iterator;function bm(e){return e===null||typeof e!="object"?null:(e=Xu&&e[Xu]||e["@@iterator"],typeof e=="function"?e:null)}var Ff={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uf=Object.assign,Hf={};function gr(e,t,n){this.props=e,this.context=t,this.refs=Hf,this.updater=n||Ff}gr.prototype.isReactComponent={};gr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vf(){}Vf.prototype=gr.prototype;function ka(e,t,n){this.props=e,this.context=t,this.refs=Hf,this.updater=n||Ff}var xa=ka.prototype=new Vf;xa.constructor=ka;Uf(xa,gr.prototype);xa.isPureReactComponent=!0;var Zu=Array.isArray,Wf=Object.prototype.hasOwnProperty,_a={current:null},Yf={key:!0,ref:!0,__self:!0,__source:!0};function Kf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Wf.call(t,r)&&!Yf.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:_i,type:e,key:s,ref:o,props:i,_owner:_a.current}}function $m(e,t){return{$$typeof:_i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ea(e){return typeof e=="object"&&e!==null&&e.$$typeof===_i}function zm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gu=/\/+/g;function No(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zm(""+e.key):t.toString(36)}function ts(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _i:case Nm:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+No(o,0):r,Zu(i)?(n="",e!=null&&(n=e.replace(Gu,"$&/")+"/"),ts(i,t,n,"",function(u){return u})):i!=null&&(Ea(i)&&(i=$m(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Zu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+No(s,l);o+=ts(s,t,n,a,i)}else if(a=bm(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+No(s,l++),o+=ts(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ai(e,t,n){if(e==null)return e;var r=[],i=0;return ts(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Bm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ue={current:null},ns={transition:null},Fm={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ns,ReactCurrentOwner:_a};function Qf(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Ai,forEach:function(e,t,n){Ai(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ai(e,function(){t++}),t},toArray:function(e){return Ai(e,function(t){return t})||[]},only:function(e){if(!Ea(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=gr;G.Fragment=Om;G.Profiler=jm;G.PureComponent=ka;G.StrictMode=Tm;G.Suspense=Dm;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fm;G.act=Qf;G.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Uf({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=_a.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Wf.call(t,a)&&!Yf.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:_i,type:e.type,key:i,ref:s,props:r,_owner:o}};G.createContext=function(e){return e={$$typeof:Im,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Am,_context:e},e.Consumer=e};G.createElement=Kf;G.createFactory=function(e){var t=Kf.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:Mm,render:e}};G.isValidElement=Ea;G.lazy=function(e){return{$$typeof:Lm,_payload:{_status:-1,_result:e},_init:Bm}};G.memo=function(e,t){return{$$typeof:Rm,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=ns.transition;ns.transition={};try{e()}finally{ns.transition=t}};G.unstable_act=Qf;G.useCallback=function(e,t){return Ue.current.useCallback(e,t)};G.useContext=function(e){return Ue.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Ue.current.useDeferredValue(e)};G.useEffect=function(e,t){return Ue.current.useEffect(e,t)};G.useId=function(){return Ue.current.useId()};G.useImperativeHandle=function(e,t,n){return Ue.current.useImperativeHandle(e,t,n)};G.useInsertionEffect=function(e,t){return Ue.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Ue.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Ue.current.useMemo(e,t)};G.useReducer=function(e,t,n){return Ue.current.useReducer(e,t,n)};G.useRef=function(e){return Ue.current.useRef(e)};G.useState=function(e){return Ue.current.useState(e)};G.useSyncExternalStore=function(e,t,n){return Ue.current.useSyncExternalStore(e,t,n)};G.useTransition=function(){return Ue.current.useTransition()};G.version="18.3.1";Bf.exports=G;var q=Bf.exports;const U=$f(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=q,Hm=Symbol.for("react.element"),Vm=Symbol.for("react.fragment"),Wm=Object.prototype.hasOwnProperty,Ym=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Km={key:!0,ref:!0,__self:!0,__source:!0};function qf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Wm.call(t,r)&&!Km.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Hm,type:e,key:s,ref:o,props:i,_owner:Ym.current}}Zs.Fragment=Vm;Zs.jsx=qf;Zs.jsxs=qf;zf.exports=Zs;var p=zf.exports,Jf={exports:{}},ot={},Xf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,B){var F=I.length;I.push(B);e:for(;0<F;){var te=F-1>>>1,M=I[te];if(0<i(M,B))I[te]=B,I[F]=M,F=te;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var B=I[0],F=I.pop();if(F!==B){I[0]=F;e:for(var te=0,M=I.length,Y=M>>>1;te<Y;){var W=2*(te+1)-1,H=I[W],Q=W+1,ee=I[Q];if(0>i(H,F))Q<M&&0>i(ee,H)?(I[te]=ee,I[Q]=F,te=Q):(I[te]=H,I[W]=F,te=W);else if(Q<M&&0>i(ee,F))I[te]=ee,I[Q]=F,te=Q;else break e}}return B}function i(I,B){var F=I.sortIndex-B.sortIndex;return F!==0?F:I.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,f=null,d=3,g=!1,v=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=I)r(u),B.sortIndex=B.expirationTime,t(a,B);else break;B=n(u)}}function x(I){if(k=!1,y(I),!v)if(n(a)!==null)v=!0,Oe(E);else{var B=n(u);B!==null&&oe(x,B.startTime-I)}}function E(I,B){v=!1,k&&(k=!1,m(N),N=-1),g=!0;var F=d;try{for(y(B),f=n(a);f!==null&&(!(f.expirationTime>B)||I&&!R());){var te=f.callback;if(typeof te=="function"){f.callback=null,d=f.priorityLevel;var M=te(f.expirationTime<=B);B=e.unstable_now(),typeof M=="function"?f.callback=M:f===n(a)&&r(a),y(B)}else r(a);f=n(a)}if(f!==null)var Y=!0;else{var W=n(u);W!==null&&oe(x,W.startTime-B),Y=!1}return Y}finally{f=null,d=F,g=!1}}var O=!1,_=null,N=-1,j=5,P=-1;function R(){return!(e.unstable_now()-P<j)}function z(){if(_!==null){var I=e.unstable_now();P=I;var B=!0;try{B=_(!0,I)}finally{B?K():(O=!1,_=null)}}else O=!1}var K;if(typeof h=="function")K=function(){h(z)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,le=V.port2;V.port1.onmessage=z,K=function(){le.postMessage(null)}}else K=function(){T(z,0)};function Oe(I){_=I,O||(O=!0,K())}function oe(I,B){N=T(function(){I(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,Oe(E))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(I){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var F=d;d=B;try{return I()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,B){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=d;d=I;try{return B()}finally{d=F}},e.unstable_scheduleCallback=function(I,B,F){var te=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?te+F:te):F=te,I){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=F+M,I={id:c++,callback:B,priorityLevel:I,startTime:F,expirationTime:M,sortIndex:-1},F>te?(I.sortIndex=F,t(u,I),n(a)===null&&I===n(u)&&(k?(m(N),N=-1):k=!0,oe(x,F-te))):(I.sortIndex=M,t(a,I),v||g||(v=!0,Oe(E))),I},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(I){var B=d;return function(){var F=d;d=B;try{return I.apply(this,arguments)}finally{d=F}}}})(Zf);Xf.exports=Zf;var Qm=Xf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm=q,rt=Qm;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gf=new Set,ei={};function Fn(e,t){ar(e,t),ar(e+"Capture",t)}function ar(e,t){for(ei[e]=t,e=0;e<t.length;e++)Gf.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=Object.prototype.hasOwnProperty,Jm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ec={},tc={};function Xm(e){return cl.call(tc,e)?!0:cl.call(ec,e)?!1:Jm.test(e)?tc[e]=!0:(ec[e]=!0,!1)}function Zm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gm(e,t,n,r){if(t===null||typeof t>"u"||Zm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function He(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new He(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new He(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new He(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new He(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new He(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new He(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new He(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new He(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new He(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ca=/[\-:]([a-z])/g;function Pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ca,Pa);Ae[t]=new He(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ca,Pa);Ae[t]=new He(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ca,Pa);Ae[t]=new He(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new He(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new He(e,1,!1,e.toLowerCase(),null,!0,!0)});function Na(e,t,n,r){var i=Ae.hasOwnProperty(t)?Ae[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gm(t,n,i,r)&&(n=null),r||i===null?Xm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zt=qm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ii=Symbol.for("react.element"),Vn=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),Oa=Symbol.for("react.strict_mode"),fl=Symbol.for("react.profiler"),ed=Symbol.for("react.provider"),td=Symbol.for("react.context"),Ta=Symbol.for("react.forward_ref"),dl=Symbol.for("react.suspense"),hl=Symbol.for("react.suspense_list"),ja=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),nd=Symbol.for("react.offscreen"),nc=Symbol.iterator;function Pr(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,Oo;function br(e){if(Oo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Oo=t&&t[1]||""}return`
`+Oo+e}var To=!1;function jo(e,t){if(!e||To)return"";To=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{To=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?br(e):""}function ey(e){switch(e.tag){case 5:return br(e.type);case 16:return br("Lazy");case 13:return br("Suspense");case 19:return br("SuspenseList");case 0:case 2:case 15:return e=jo(e.type,!1),e;case 11:return e=jo(e.type.render,!1),e;case 1:return e=jo(e.type,!0),e;default:return""}}function pl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wn:return"Fragment";case Vn:return"Portal";case fl:return"Profiler";case Oa:return"StrictMode";case dl:return"Suspense";case hl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case td:return(e.displayName||"Context")+".Consumer";case ed:return(e._context.displayName||"Context")+".Provider";case Ta:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ja:return t=e.displayName||null,t!==null?t:pl(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return pl(e(t))}catch{}}return null}function ty(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pl(t);case 8:return t===Oa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ny(e){var t=rd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mi(e){e._valueTracker||(e._valueTracker=ny(e))}function id(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ml(e,t){var n=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=gn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sd(e,t){t=t.checked,t!=null&&Na(e,"checked",t,!1)}function yl(e,t){sd(e,t);var n=gn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gl(e,t.type,n):t.hasOwnProperty("defaultValue")&&gl(e,t.type,gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ic(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function gl(e,t,n){(t!=="number"||vs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $r=Array.isArray;function nr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+gn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function vl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if($r(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:gn(n)}}function od(e,t){var n=gn(t.value),r=gn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function oc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ld(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ld(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Di,ad=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Di=Di||document.createElement("div"),Di.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Di.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ti(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ry=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){ry.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function ud(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function cd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ud(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var iy=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sl(e,t){if(t){if(iy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function kl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xl=null;function Aa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _l=null,rr=null,ir=null;function lc(e){if(e=Pi(e)){if(typeof _l!="function")throw Error(A(280));var t=e.stateNode;t&&(t=ro(t),_l(e.stateNode,e.type,t))}}function fd(e){rr?ir?ir.push(e):ir=[e]:rr=e}function dd(){if(rr){var e=rr,t=ir;if(ir=rr=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function hd(e,t){return e(t)}function pd(){}var Ao=!1;function md(e,t,n){if(Ao)return e(t,n);Ao=!0;try{return hd(e,t,n)}finally{Ao=!1,(rr!==null||ir!==null)&&(pd(),dd())}}function ni(e,t){var n=e.stateNode;if(n===null)return null;var r=ro(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var El=!1;if(Kt)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){El=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{El=!1}function sy(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Wr=!1,ws=null,Ss=!1,Cl=null,oy={onError:function(e){Wr=!0,ws=e}};function ly(e,t,n,r,i,s,o,l,a){Wr=!1,ws=null,sy.apply(oy,arguments)}function ay(e,t,n,r,i,s,o,l,a){if(ly.apply(this,arguments),Wr){if(Wr){var u=ws;Wr=!1,ws=null}else throw Error(A(198));Ss||(Ss=!0,Cl=u)}}function Un(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ac(e){if(Un(e)!==e)throw Error(A(188))}function uy(e){var t=e.alternate;if(!t){if(t=Un(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ac(i),e;if(s===r)return ac(i),t;s=s.sibling}throw Error(A(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function gd(e){return e=uy(e),e!==null?vd(e):null}function vd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vd(e);if(t!==null)return t;e=e.sibling}return null}var wd=rt.unstable_scheduleCallback,uc=rt.unstable_cancelCallback,cy=rt.unstable_shouldYield,fy=rt.unstable_requestPaint,ke=rt.unstable_now,dy=rt.unstable_getCurrentPriorityLevel,Ia=rt.unstable_ImmediatePriority,Sd=rt.unstable_UserBlockingPriority,ks=rt.unstable_NormalPriority,hy=rt.unstable_LowPriority,kd=rt.unstable_IdlePriority,Gs=null,At=null;function py(e){if(At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Gs,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:gy,my=Math.log,yy=Math.LN2;function gy(e){return e>>>=0,e===0?32:31-(my(e)/yy|0)|0}var Ri=64,Li=4194304;function zr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=zr(l):(s&=o,s!==0&&(r=zr(s)))}else o=n&~i,o!==0?r=zr(o):s!==0&&(r=zr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_t(t),i=1<<n,r|=e[n],t&=~i;return r}function vy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-_t(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=vy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Pl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xd(){var e=Ri;return Ri<<=1,!(Ri&4194240)&&(Ri=64),e}function Io(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ei(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=n}function Sy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-_t(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ma(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_t(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var se=0;function _d(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ed,Da,Cd,Pd,Nd,Nl=!1,bi=[],an=null,un=null,cn=null,ri=new Map,ii=new Map,rn=[],ky="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cc(e,t){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ii.delete(t.pointerId)}}function Or(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Pi(t),t!==null&&Da(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xy(e,t,n,r,i){switch(t){case"focusin":return an=Or(an,e,t,n,r,i),!0;case"dragenter":return un=Or(un,e,t,n,r,i),!0;case"mouseover":return cn=Or(cn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ri.set(s,Or(ri.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ii.set(s,Or(ii.get(s)||null,e,t,n,r,i)),!0}return!1}function Od(e){var t=jn(e.target);if(t!==null){var n=Un(t);if(n!==null){if(t=n.tag,t===13){if(t=yd(n),t!==null){e.blockedOn=t,Nd(e.priority,function(){Cd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ol(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xl=r,n.target.dispatchEvent(r),xl=null}else return t=Pi(n),t!==null&&Da(t),e.blockedOn=n,!1;t.shift()}return!0}function fc(e,t,n){rs(e)&&n.delete(t)}function _y(){Nl=!1,an!==null&&rs(an)&&(an=null),un!==null&&rs(un)&&(un=null),cn!==null&&rs(cn)&&(cn=null),ri.forEach(fc),ii.forEach(fc)}function Tr(e,t){e.blockedOn===t&&(e.blockedOn=null,Nl||(Nl=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,_y)))}function si(e){function t(i){return Tr(i,e)}if(0<bi.length){Tr(bi[0],e);for(var n=1;n<bi.length;n++){var r=bi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(an!==null&&Tr(an,e),un!==null&&Tr(un,e),cn!==null&&Tr(cn,e),ri.forEach(t),ii.forEach(t),n=0;n<rn.length;n++)r=rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)Od(n),n.blockedOn===null&&rn.shift()}var sr=Zt.ReactCurrentBatchConfig,_s=!0;function Ey(e,t,n,r){var i=se,s=sr.transition;sr.transition=null;try{se=1,Ra(e,t,n,r)}finally{se=i,sr.transition=s}}function Cy(e,t,n,r){var i=se,s=sr.transition;sr.transition=null;try{se=4,Ra(e,t,n,r)}finally{se=i,sr.transition=s}}function Ra(e,t,n,r){if(_s){var i=Ol(e,t,n,r);if(i===null)Uo(e,t,r,Es,n),cc(e,r);else if(xy(i,e,t,n,r))r.stopPropagation();else if(cc(e,r),t&4&&-1<ky.indexOf(e)){for(;i!==null;){var s=Pi(i);if(s!==null&&Ed(s),s=Ol(e,t,n,r),s===null&&Uo(e,t,r,Es,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Uo(e,t,r,null,n)}}var Es=null;function Ol(e,t,n,r){if(Es=null,e=Aa(r),e=jn(e),e!==null)if(t=Un(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Es=e,null}function Td(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dy()){case Ia:return 1;case Sd:return 4;case ks:case hy:return 16;case kd:return 536870912;default:return 16}default:return 16}}var on=null,La=null,is=null;function jd(){if(is)return is;var e,t=La,n=t.length,r,i="value"in on?on.value:on.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return is=i.slice(e,1<r?1-r:void 0)}function ss(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $i(){return!0}function dc(){return!1}function lt(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$i:dc,this.isPropagationStopped=dc,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),t}var vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ba=lt(vr),Ci=ge({},vr,{view:0,detail:0}),Py=lt(Ci),Mo,Do,jr,eo=ge({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Mo=e.screenX-jr.screenX,Do=e.screenY-jr.screenY):Do=Mo=0,jr=e),Mo)},movementY:function(e){return"movementY"in e?e.movementY:Do}}),hc=lt(eo),Ny=ge({},eo,{dataTransfer:0}),Oy=lt(Ny),Ty=ge({},Ci,{relatedTarget:0}),Ro=lt(Ty),jy=ge({},vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ay=lt(jy),Iy=ge({},vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),My=lt(Iy),Dy=ge({},vr,{data:0}),pc=lt(Dy),Ry={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ly={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},by={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $y(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=by[e])?!!t[e]:!1}function $a(){return $y}var zy=ge({},Ci,{key:function(e){if(e.key){var t=Ry[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ss(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ly[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(e){return e.type==="keypress"?ss(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ss(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),By=lt(zy),Fy=ge({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=lt(Fy),Uy=ge({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),Hy=lt(Uy),Vy=ge({},vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wy=lt(Vy),Yy=ge({},eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ky=lt(Yy),Qy=[9,13,27,32],za=Kt&&"CompositionEvent"in window,Yr=null;Kt&&"documentMode"in document&&(Yr=document.documentMode);var qy=Kt&&"TextEvent"in window&&!Yr,Ad=Kt&&(!za||Yr&&8<Yr&&11>=Yr),yc=" ",gc=!1;function Id(e,t){switch(e){case"keyup":return Qy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Md(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Jy(e,t){switch(e){case"compositionend":return Md(t);case"keypress":return t.which!==32?null:(gc=!0,yc);case"textInput":return e=t.data,e===yc&&gc?null:e;default:return null}}function Xy(e,t){if(Yn)return e==="compositionend"||!za&&Id(e,t)?(e=jd(),is=La=on=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ad&&t.locale!=="ko"?null:t.data;default:return null}}var Zy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zy[e.type]:t==="textarea"}function Dd(e,t,n,r){fd(r),t=Cs(t,"onChange"),0<t.length&&(n=new ba("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,oi=null;function Gy(e){Wd(e,0)}function to(e){var t=qn(e);if(id(t))return e}function eg(e,t){if(e==="change")return t}var Rd=!1;if(Kt){var Lo;if(Kt){var bo="oninput"in document;if(!bo){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),bo=typeof wc.oninput=="function"}Lo=bo}else Lo=!1;Rd=Lo&&(!document.documentMode||9<document.documentMode)}function Sc(){Kr&&(Kr.detachEvent("onpropertychange",Ld),oi=Kr=null)}function Ld(e){if(e.propertyName==="value"&&to(oi)){var t=[];Dd(t,oi,e,Aa(e)),md(Gy,t)}}function tg(e,t,n){e==="focusin"?(Sc(),Kr=t,oi=n,Kr.attachEvent("onpropertychange",Ld)):e==="focusout"&&Sc()}function ng(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return to(oi)}function rg(e,t){if(e==="click")return to(t)}function ig(e,t){if(e==="input"||e==="change")return to(t)}function sg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:sg;function li(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cl.call(t,i)||!Ct(e[i],t[i]))return!1}return!0}function kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xc(e,t){var n=kc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kc(n)}}function bd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $d(){for(var e=window,t=vs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vs(e.document)}return t}function Ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function og(e){var t=$d(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bd(n.ownerDocument.documentElement,n)){if(r!==null&&Ba(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=xc(n,s);var o=xc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lg=Kt&&"documentMode"in document&&11>=document.documentMode,Kn=null,Tl=null,Qr=null,jl=!1;function _c(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jl||Kn==null||Kn!==vs(r)||(r=Kn,"selectionStart"in r&&Ba(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&li(Qr,r)||(Qr=r,r=Cs(Tl,"onSelect"),0<r.length&&(t=new ba("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kn)))}function zi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qn={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionend:zi("Transition","TransitionEnd")},$o={},zd={};Kt&&(zd=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function no(e){if($o[e])return $o[e];if(!Qn[e])return e;var t=Qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zd)return $o[e]=t[n];return e}var Bd=no("animationend"),Fd=no("animationiteration"),Ud=no("animationstart"),Hd=no("transitionend"),Vd=new Map,Ec="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(e,t){Vd.set(e,t),Fn(t,[e])}for(var zo=0;zo<Ec.length;zo++){var Bo=Ec[zo],ag=Bo.toLowerCase(),ug=Bo[0].toUpperCase()+Bo.slice(1);kn(ag,"on"+ug)}kn(Bd,"onAnimationEnd");kn(Fd,"onAnimationIteration");kn(Ud,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(Hd,"onTransitionEnd");ar("onMouseEnter",["mouseout","mouseover"]);ar("onMouseLeave",["mouseout","mouseover"]);ar("onPointerEnter",["pointerout","pointerover"]);ar("onPointerLeave",["pointerout","pointerover"]);Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function Cc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ay(r,t,void 0,e),e.currentTarget=null}function Wd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Cc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Cc(i,l,u),s=a}}}if(Ss)throw e=Cl,Ss=!1,Cl=null,e}function fe(e,t){var n=t[Rl];n===void 0&&(n=t[Rl]=new Set);var r=e+"__bubble";n.has(r)||(Yd(t,e,2,!1),n.add(r))}function Fo(e,t,n){var r=0;t&&(r|=4),Yd(n,e,r,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function ai(e){if(!e[Bi]){e[Bi]=!0,Gf.forEach(function(n){n!=="selectionchange"&&(cg.has(n)||Fo(n,!1,e),Fo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bi]||(t[Bi]=!0,Fo("selectionchange",!1,t))}}function Yd(e,t,n,r){switch(Td(t)){case 1:var i=Ey;break;case 4:i=Cy;break;default:i=Ra}n=i.bind(null,t,n,e),i=void 0,!El||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Uo(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=jn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}md(function(){var u=s,c=Aa(n),f=[];e:{var d=Vd.get(e);if(d!==void 0){var g=ba,v=e;switch(e){case"keypress":if(ss(n)===0)break e;case"keydown":case"keyup":g=By;break;case"focusin":v="focus",g=Ro;break;case"focusout":v="blur",g=Ro;break;case"beforeblur":case"afterblur":g=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Oy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Hy;break;case Bd:case Fd:case Ud:g=Ay;break;case Hd:g=Wy;break;case"scroll":g=Py;break;case"wheel":g=Ky;break;case"copy":case"cut":case"paste":g=My;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=mc}var k=(t&4)!==0,T=!k&&e==="scroll",m=k?d!==null?d+"Capture":null:d;k=[];for(var h=u,y;h!==null;){y=h;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,m!==null&&(x=ni(h,m),x!=null&&k.push(ui(h,x,y)))),T)break;h=h.return}0<k.length&&(d=new g(d,v,null,n,c),f.push({event:d,listeners:k}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==xl&&(v=n.relatedTarget||n.fromElement)&&(jn(v)||v[Qt]))break e;if((g||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?jn(v):null,v!==null&&(T=Un(v),v!==T||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(k=hc,x="onMouseLeave",m="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(k=mc,x="onPointerLeave",m="onPointerEnter",h="pointer"),T=g==null?d:qn(g),y=v==null?d:qn(v),d=new k(x,h+"leave",g,n,c),d.target=T,d.relatedTarget=y,x=null,jn(c)===u&&(k=new k(m,h+"enter",v,n,c),k.target=y,k.relatedTarget=T,x=k),T=x,g&&v)t:{for(k=g,m=v,h=0,y=k;y;y=Hn(y))h++;for(y=0,x=m;x;x=Hn(x))y++;for(;0<h-y;)k=Hn(k),h--;for(;0<y-h;)m=Hn(m),y--;for(;h--;){if(k===m||m!==null&&k===m.alternate)break t;k=Hn(k),m=Hn(m)}k=null}else k=null;g!==null&&Pc(f,d,g,k,!1),v!==null&&T!==null&&Pc(f,T,v,k,!0)}}e:{if(d=u?qn(u):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var E=eg;else if(vc(d))if(Rd)E=ig;else{E=ng;var O=tg}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=rg);if(E&&(E=E(e,u))){Dd(f,E,n,c);break e}O&&O(e,d,u),e==="focusout"&&(O=d._wrapperState)&&O.controlled&&d.type==="number"&&gl(d,"number",d.value)}switch(O=u?qn(u):window,e){case"focusin":(vc(O)||O.contentEditable==="true")&&(Kn=O,Tl=u,Qr=null);break;case"focusout":Qr=Tl=Kn=null;break;case"mousedown":jl=!0;break;case"contextmenu":case"mouseup":case"dragend":jl=!1,_c(f,n,c);break;case"selectionchange":if(lg)break;case"keydown":case"keyup":_c(f,n,c)}var _;if(za)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Yn?Id(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Ad&&n.locale!=="ko"&&(Yn||N!=="onCompositionStart"?N==="onCompositionEnd"&&Yn&&(_=jd()):(on=c,La="value"in on?on.value:on.textContent,Yn=!0)),O=Cs(u,N),0<O.length&&(N=new pc(N,e,null,n,c),f.push({event:N,listeners:O}),_?N.data=_:(_=Md(n),_!==null&&(N.data=_)))),(_=qy?Jy(e,n):Xy(e,n))&&(u=Cs(u,"onBeforeInput"),0<u.length&&(c=new pc("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=_))}Wd(f,t)})}function ui(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cs(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ni(e,n),s!=null&&r.unshift(ui(e,s,i)),s=ni(e,t),s!=null&&r.push(ui(e,s,i))),e=e.return}return r}function Hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ni(n,s),a!=null&&o.unshift(ui(n,a,l))):i||(a=ni(n,s),a!=null&&o.push(ui(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var fg=/\r\n?/g,dg=/\u0000|\uFFFD/g;function Nc(e){return(typeof e=="string"?e:""+e).replace(fg,`
`).replace(dg,"")}function Fi(e,t,n){if(t=Nc(t),Nc(e)!==t&&n)throw Error(A(425))}function Ps(){}var Al=null,Il=null;function Ml(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dl=typeof setTimeout=="function"?setTimeout:void 0,hg=typeof clearTimeout=="function"?clearTimeout:void 0,Oc=typeof Promise=="function"?Promise:void 0,pg=typeof queueMicrotask=="function"?queueMicrotask:typeof Oc<"u"?function(e){return Oc.resolve(null).then(e).catch(mg)}:Dl;function mg(e){setTimeout(function(){throw e})}function Ho(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),si(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);si(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var wr=Math.random().toString(36).slice(2),jt="__reactFiber$"+wr,ci="__reactProps$"+wr,Qt="__reactContainer$"+wr,Rl="__reactEvents$"+wr,yg="__reactListeners$"+wr,gg="__reactHandles$"+wr;function jn(e){var t=e[jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qt]||n[jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tc(e);e!==null;){if(n=e[jt])return n;e=Tc(e)}return t}e=n,n=e.parentNode}return null}function Pi(e){return e=e[jt]||e[Qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function ro(e){return e[ci]||null}var Ll=[],Jn=-1;function xn(e){return{current:e}}function de(e){0>Jn||(e.current=Ll[Jn],Ll[Jn]=null,Jn--)}function ue(e,t){Jn++,Ll[Jn]=e.current,e.current=t}var vn={},be=xn(vn),Ke=xn(!1),Rn=vn;function ur(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Qe(e){return e=e.childContextTypes,e!=null}function Ns(){de(Ke),de(be)}function jc(e,t,n){if(be.current!==vn)throw Error(A(168));ue(be,t),ue(Ke,n)}function Kd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(A(108,ty(e)||"Unknown",i));return ge({},n,r)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Rn=be.current,ue(be,e),ue(Ke,Ke.current),!0}function Ac(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=Kd(e,t,Rn),r.__reactInternalMemoizedMergedChildContext=e,de(Ke),de(be),ue(be,e)):de(Ke),ue(Ke,n)}var Ft=null,io=!1,Vo=!1;function Qd(e){Ft===null?Ft=[e]:Ft.push(e)}function vg(e){io=!0,Qd(e)}function _n(){if(!Vo&&Ft!==null){Vo=!0;var e=0,t=se;try{var n=Ft;for(se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ft=null,io=!1}catch(i){throw Ft!==null&&(Ft=Ft.slice(e+1)),wd(Ia,_n),i}finally{se=t,Vo=!1}}return null}var Xn=[],Zn=0,Ts=null,js=0,ut=[],ct=0,Ln=null,Ht=1,Vt="";function Nn(e,t){Xn[Zn++]=js,Xn[Zn++]=Ts,Ts=e,js=t}function qd(e,t,n){ut[ct++]=Ht,ut[ct++]=Vt,ut[ct++]=Ln,Ln=e;var r=Ht;e=Vt;var i=32-_t(r)-1;r&=~(1<<i),n+=1;var s=32-_t(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ht=1<<32-_t(t)+i|n<<i|r,Vt=s+e}else Ht=1<<s|n<<i|r,Vt=e}function Fa(e){e.return!==null&&(Nn(e,1),qd(e,1,0))}function Ua(e){for(;e===Ts;)Ts=Xn[--Zn],Xn[Zn]=null,js=Xn[--Zn],Xn[Zn]=null;for(;e===Ln;)Ln=ut[--ct],ut[ct]=null,Vt=ut[--ct],ut[ct]=null,Ht=ut[--ct],ut[ct]=null}var tt=null,Ze=null,he=!1,kt=null;function Jd(e,t){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ic(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,Ze=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,Ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ln!==null?{id:Ht,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tt=e,Ze=null,!0):!1;default:return!1}}function bl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $l(e){if(he){var t=Ze;if(t){var n=t;if(!Ic(e,t)){if(bl(e))throw Error(A(418));t=fn(n.nextSibling);var r=tt;t&&Ic(e,t)?Jd(r,n):(e.flags=e.flags&-4097|2,he=!1,tt=e)}}else{if(bl(e))throw Error(A(418));e.flags=e.flags&-4097|2,he=!1,tt=e}}}function Mc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function Ui(e){if(e!==tt)return!1;if(!he)return Mc(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ml(e.type,e.memoizedProps)),t&&(t=Ze)){if(bl(e))throw Xd(),Error(A(418));for(;t;)Jd(e,t),t=fn(t.nextSibling)}if(Mc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ze=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ze=null}}else Ze=tt?fn(e.stateNode.nextSibling):null;return!0}function Xd(){for(var e=Ze;e;)e=fn(e.nextSibling)}function cr(){Ze=tt=null,he=!1}function Ha(e){kt===null?kt=[e]:kt.push(e)}var wg=Zt.ReactCurrentBatchConfig;function Ar(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function Hi(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dc(e){var t=e._init;return t(e._payload)}function Zd(e){function t(m,h){if(e){var y=m.deletions;y===null?(m.deletions=[h],m.flags|=16):y.push(h)}}function n(m,h){if(!e)return null;for(;h!==null;)t(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function i(m,h){return m=mn(m,h),m.index=0,m.sibling=null,m}function s(m,h,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<h?(m.flags|=2,h):y):(m.flags|=2,h)):(m.flags|=1048576,h)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,h,y,x){return h===null||h.tag!==6?(h=Xo(y,m.mode,x),h.return=m,h):(h=i(h,y),h.return=m,h)}function a(m,h,y,x){var E=y.type;return E===Wn?c(m,h,y.props.children,x,y.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===tn&&Dc(E)===h.type)?(x=i(h,y.props),x.ref=Ar(m,h,y),x.return=m,x):(x=ds(y.type,y.key,y.props,null,m.mode,x),x.ref=Ar(m,h,y),x.return=m,x)}function u(m,h,y,x){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=Zo(y,m.mode,x),h.return=m,h):(h=i(h,y.children||[]),h.return=m,h)}function c(m,h,y,x,E){return h===null||h.tag!==7?(h=Dn(y,m.mode,x,E),h.return=m,h):(h=i(h,y),h.return=m,h)}function f(m,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Xo(""+h,m.mode,y),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ii:return y=ds(h.type,h.key,h.props,null,m.mode,y),y.ref=Ar(m,null,h),y.return=m,y;case Vn:return h=Zo(h,m.mode,y),h.return=m,h;case tn:var x=h._init;return f(m,x(h._payload),y)}if($r(h)||Pr(h))return h=Dn(h,m.mode,y,null),h.return=m,h;Hi(m,h)}return null}function d(m,h,y,x){var E=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(m,h,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ii:return y.key===E?a(m,h,y,x):null;case Vn:return y.key===E?u(m,h,y,x):null;case tn:return E=y._init,d(m,h,E(y._payload),x)}if($r(y)||Pr(y))return E!==null?null:c(m,h,y,x,null);Hi(m,y)}return null}function g(m,h,y,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(y)||null,l(h,m,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ii:return m=m.get(x.key===null?y:x.key)||null,a(h,m,x,E);case Vn:return m=m.get(x.key===null?y:x.key)||null,u(h,m,x,E);case tn:var O=x._init;return g(m,h,y,O(x._payload),E)}if($r(x)||Pr(x))return m=m.get(y)||null,c(h,m,x,E,null);Hi(h,x)}return null}function v(m,h,y,x){for(var E=null,O=null,_=h,N=h=0,j=null;_!==null&&N<y.length;N++){_.index>N?(j=_,_=null):j=_.sibling;var P=d(m,_,y[N],x);if(P===null){_===null&&(_=j);break}e&&_&&P.alternate===null&&t(m,_),h=s(P,h,N),O===null?E=P:O.sibling=P,O=P,_=j}if(N===y.length)return n(m,_),he&&Nn(m,N),E;if(_===null){for(;N<y.length;N++)_=f(m,y[N],x),_!==null&&(h=s(_,h,N),O===null?E=_:O.sibling=_,O=_);return he&&Nn(m,N),E}for(_=r(m,_);N<y.length;N++)j=g(_,m,N,y[N],x),j!==null&&(e&&j.alternate!==null&&_.delete(j.key===null?N:j.key),h=s(j,h,N),O===null?E=j:O.sibling=j,O=j);return e&&_.forEach(function(R){return t(m,R)}),he&&Nn(m,N),E}function k(m,h,y,x){var E=Pr(y);if(typeof E!="function")throw Error(A(150));if(y=E.call(y),y==null)throw Error(A(151));for(var O=E=null,_=h,N=h=0,j=null,P=y.next();_!==null&&!P.done;N++,P=y.next()){_.index>N?(j=_,_=null):j=_.sibling;var R=d(m,_,P.value,x);if(R===null){_===null&&(_=j);break}e&&_&&R.alternate===null&&t(m,_),h=s(R,h,N),O===null?E=R:O.sibling=R,O=R,_=j}if(P.done)return n(m,_),he&&Nn(m,N),E;if(_===null){for(;!P.done;N++,P=y.next())P=f(m,P.value,x),P!==null&&(h=s(P,h,N),O===null?E=P:O.sibling=P,O=P);return he&&Nn(m,N),E}for(_=r(m,_);!P.done;N++,P=y.next())P=g(_,m,N,P.value,x),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?N:P.key),h=s(P,h,N),O===null?E=P:O.sibling=P,O=P);return e&&_.forEach(function(z){return t(m,z)}),he&&Nn(m,N),E}function T(m,h,y,x){if(typeof y=="object"&&y!==null&&y.type===Wn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ii:e:{for(var E=y.key,O=h;O!==null;){if(O.key===E){if(E=y.type,E===Wn){if(O.tag===7){n(m,O.sibling),h=i(O,y.props.children),h.return=m,m=h;break e}}else if(O.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===tn&&Dc(E)===O.type){n(m,O.sibling),h=i(O,y.props),h.ref=Ar(m,O,y),h.return=m,m=h;break e}n(m,O);break}else t(m,O);O=O.sibling}y.type===Wn?(h=Dn(y.props.children,m.mode,x,y.key),h.return=m,m=h):(x=ds(y.type,y.key,y.props,null,m.mode,x),x.ref=Ar(m,h,y),x.return=m,m=x)}return o(m);case Vn:e:{for(O=y.key;h!==null;){if(h.key===O)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(m,h.sibling),h=i(h,y.children||[]),h.return=m,m=h;break e}else{n(m,h);break}else t(m,h);h=h.sibling}h=Zo(y,m.mode,x),h.return=m,m=h}return o(m);case tn:return O=y._init,T(m,h,O(y._payload),x)}if($r(y))return v(m,h,y,x);if(Pr(y))return k(m,h,y,x);Hi(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(m,h.sibling),h=i(h,y),h.return=m,m=h):(n(m,h),h=Xo(y,m.mode,x),h.return=m,m=h),o(m)):n(m,h)}return T}var fr=Zd(!0),Gd=Zd(!1),As=xn(null),Is=null,Gn=null,Va=null;function Wa(){Va=Gn=Is=null}function Ya(e){var t=As.current;de(As),e._currentValue=t}function zl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function or(e,t){Is=e,Va=Gn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function pt(e){var t=e._currentValue;if(Va!==e)if(e={context:e,memoizedValue:t,next:null},Gn===null){if(Is===null)throw Error(A(308));Gn=e,Is.dependencies={lanes:0,firstContext:e}}else Gn=Gn.next=e;return t}var An=null;function Ka(e){An===null?An=[e]:An.push(e)}function eh(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ka(t)):(n.next=i.next,i.next=n),t.interleaved=n,qt(e,r)}function qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var nn=!1;function Qa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function th(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qt(e,n)}return i=r.interleaved,i===null?(t.next=t,Ka(r)):(t.next=i.next,i.next=t),r.interleaved=t,qt(e,n)}function os(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ma(e,n)}}function Rc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ms(e,t,n,r){var i=e.updateQueue;nn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;o=0,c=u=a=null,l=s;do{var d=l.lane,g=l.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,k=l;switch(d=t,g=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){f=v.call(g,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,d=typeof v=="function"?v.call(g,f,d):v,d==null)break e;f=ge({},f,d);break e;case 2:nn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else g={eventTime:g,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=f):c=c.next=g,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);$n|=o,e.lanes=o,e.memoizedState=f}}function Lc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(A(191,i));i.call(r)}}}var Ni={},It=xn(Ni),fi=xn(Ni),di=xn(Ni);function In(e){if(e===Ni)throw Error(A(174));return e}function qa(e,t){switch(ue(di,t),ue(fi,e),ue(It,Ni),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wl(t,e)}de(It),ue(It,t)}function dr(){de(It),de(fi),de(di)}function nh(e){In(di.current);var t=In(It.current),n=wl(t,e.type);t!==n&&(ue(fi,e),ue(It,n))}function Ja(e){fi.current===e&&(de(It),de(fi))}var me=xn(0);function Ds(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wo=[];function Xa(){for(var e=0;e<Wo.length;e++)Wo[e]._workInProgressVersionPrimary=null;Wo.length=0}var ls=Zt.ReactCurrentDispatcher,Yo=Zt.ReactCurrentBatchConfig,bn=0,ye=null,Ee=null,Pe=null,Rs=!1,qr=!1,hi=0,Sg=0;function Ie(){throw Error(A(321))}function Za(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function Ga(e,t,n,r,i,s){if(bn=s,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ls.current=e===null||e.memoizedState===null?Eg:Cg,e=n(r,i),qr){s=0;do{if(qr=!1,hi=0,25<=s)throw Error(A(301));s+=1,Pe=Ee=null,t.updateQueue=null,ls.current=Pg,e=n(r,i)}while(qr)}if(ls.current=Ls,t=Ee!==null&&Ee.next!==null,bn=0,Pe=Ee=ye=null,Rs=!1,t)throw Error(A(300));return e}function eu(){var e=hi!==0;return hi=0,e}function Ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?ye.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function mt(){if(Ee===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Pe===null?ye.memoizedState:Pe.next;if(t!==null)Pe=t,Ee=e;else{if(e===null)throw Error(A(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Pe===null?ye.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function pi(e,t){return typeof t=="function"?t(e):t}function Ko(e){var t=mt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=Ee,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((bn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,ye.lanes|=c,$n|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Ct(r,t.memoizedState)||(Ye=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ye.lanes|=s,$n|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Qo(e){var t=mt(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ct(s,t.memoizedState)||(Ye=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function rh(){}function ih(e,t){var n=ye,r=mt(),i=t(),s=!Ct(r.memoizedState,i);if(s&&(r.memoizedState=i,Ye=!0),r=r.queue,tu(lh.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,mi(9,oh.bind(null,n,r,i,t),void 0,null),Ne===null)throw Error(A(349));bn&30||sh(n,t,i)}return i}function sh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function oh(e,t,n,r){t.value=n,t.getSnapshot=r,ah(t)&&uh(e)}function lh(e,t,n){return n(function(){ah(t)&&uh(e)})}function ah(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ct(e,n)}catch{return!0}}function uh(e){var t=qt(e,1);t!==null&&Et(t,e,1,-1)}function bc(e){var t=Ot();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:e},t.queue=e,e=e.dispatch=_g.bind(null,ye,e),[t.memoizedState,e]}function mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ch(){return mt().memoizedState}function as(e,t,n,r){var i=Ot();ye.flags|=e,i.memoizedState=mi(1|t,n,void 0,r===void 0?null:r)}function so(e,t,n,r){var i=mt();r=r===void 0?null:r;var s=void 0;if(Ee!==null){var o=Ee.memoizedState;if(s=o.destroy,r!==null&&Za(r,o.deps)){i.memoizedState=mi(t,n,s,r);return}}ye.flags|=e,i.memoizedState=mi(1|t,n,s,r)}function $c(e,t){return as(8390656,8,e,t)}function tu(e,t){return so(2048,8,e,t)}function fh(e,t){return so(4,2,e,t)}function dh(e,t){return so(4,4,e,t)}function hh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ph(e,t,n){return n=n!=null?n.concat([e]):null,so(4,4,hh.bind(null,t,e),n)}function nu(){}function mh(e,t){var n=mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Za(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yh(e,t){var n=mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Za(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gh(e,t,n){return bn&21?(Ct(n,t)||(n=xd(),ye.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=n)}function kg(e,t){var n=se;se=n!==0&&4>n?n:4,e(!0);var r=Yo.transition;Yo.transition={};try{e(!1),t()}finally{se=n,Yo.transition=r}}function vh(){return mt().memoizedState}function xg(e,t,n){var r=pn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wh(e))Sh(t,n);else if(n=eh(e,t,n,r),n!==null){var i=Fe();Et(n,e,r,i),kh(n,t,r)}}function _g(e,t,n){var r=pn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wh(e))Sh(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ct(l,o)){var a=t.interleaved;a===null?(i.next=i,Ka(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=eh(e,t,i,r),n!==null&&(i=Fe(),Et(n,e,r,i),kh(n,t,r))}}function wh(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function Sh(e,t){qr=Rs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ma(e,n)}}var Ls={readContext:pt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Eg={readContext:pt,useCallback:function(e,t){return Ot().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:$c,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,as(4194308,4,hh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4194308,4,e,t)},useInsertionEffect:function(e,t){return as(4,2,e,t)},useMemo:function(e,t){var n=Ot();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ot();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xg.bind(null,ye,e),[r.memoizedState,e]},useRef:function(e){var t=Ot();return e={current:e},t.memoizedState=e},useState:bc,useDebugValue:nu,useDeferredValue:function(e){return Ot().memoizedState=e},useTransition:function(){var e=bc(!1),t=e[0];return e=kg.bind(null,e[1]),Ot().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ye,i=Ot();if(he){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),Ne===null)throw Error(A(349));bn&30||sh(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,$c(lh.bind(null,r,s,e),[e]),r.flags|=2048,mi(9,oh.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ot(),t=Ne.identifierPrefix;if(he){var n=Vt,r=Ht;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Sg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cg={readContext:pt,useCallback:mh,useContext:pt,useEffect:tu,useImperativeHandle:ph,useInsertionEffect:fh,useLayoutEffect:dh,useMemo:yh,useReducer:Ko,useRef:ch,useState:function(){return Ko(pi)},useDebugValue:nu,useDeferredValue:function(e){var t=mt();return gh(t,Ee.memoizedState,e)},useTransition:function(){var e=Ko(pi)[0],t=mt().memoizedState;return[e,t]},useMutableSource:rh,useSyncExternalStore:ih,useId:vh,unstable_isNewReconciler:!1},Pg={readContext:pt,useCallback:mh,useContext:pt,useEffect:tu,useImperativeHandle:ph,useInsertionEffect:fh,useLayoutEffect:dh,useMemo:yh,useReducer:Qo,useRef:ch,useState:function(){return Qo(pi)},useDebugValue:nu,useDeferredValue:function(e){var t=mt();return Ee===null?t.memoizedState=e:gh(t,Ee.memoizedState,e)},useTransition:function(){var e=Qo(pi)[0],t=mt().memoizedState;return[e,t]},useMutableSource:rh,useSyncExternalStore:ih,useId:vh,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Bl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oo={isMounted:function(e){return(e=e._reactInternals)?Un(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=pn(e),s=Wt(r,i);s.payload=t,n!=null&&(s.callback=n),t=dn(e,s,i),t!==null&&(Et(t,e,i,r),os(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=pn(e),s=Wt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=dn(e,s,i),t!==null&&(Et(t,e,i,r),os(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fe(),r=pn(e),i=Wt(n,r);i.tag=2,t!=null&&(i.callback=t),t=dn(e,i,r),t!==null&&(Et(t,e,r,n),os(t,e,r))}};function zc(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!li(n,r)||!li(i,s):!0}function xh(e,t,n){var r=!1,i=vn,s=t.contextType;return typeof s=="object"&&s!==null?s=pt(s):(i=Qe(t)?Rn:be.current,r=t.contextTypes,s=(r=r!=null)?ur(e,i):vn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Bc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oo.enqueueReplaceState(t,t.state,null)}function Fl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Qa(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=pt(s):(s=Qe(t)?Rn:be.current,i.context=ur(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Bl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&oo.enqueueReplaceState(i,i.state,null),Ms(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function hr(e,t){try{var n="",r=t;do n+=ey(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ul(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ng=typeof WeakMap=="function"?WeakMap:Map;function _h(e,t,n){n=Wt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Zl=r),Ul(e,t)},n}function Eh(e,t,n){n=Wt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ul(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ul(e,t),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Fc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ng;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Fg.bind(null,e,t,n),t.then(e,e))}function Uc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wt(-1,1),t.tag=2,dn(n,t,1))),n.lanes|=1),e)}var Og=Zt.ReactCurrentOwner,Ye=!1;function ze(e,t,n,r){t.child=e===null?Gd(t,null,n,r):fr(t,e.child,n,r)}function Vc(e,t,n,r,i){n=n.render;var s=t.ref;return or(t,i),r=Ga(e,t,n,r,s,i),n=eu(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(he&&n&&Fa(t),t.flags|=1,ze(e,t,r,i),t.child)}function Wc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!cu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Ch(e,t,s,r,i)):(e=ds(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:li,n(o,r)&&e.ref===t.ref)return Jt(e,t,i)}return t.flags|=1,e=mn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Ch(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(li(s,r)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,Jt(e,t,i)}return Hl(e,t,n,r,i)}function Ph(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(tr,Xe),Xe|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(tr,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(tr,Xe),Xe|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ue(tr,Xe),Xe|=r;return ze(e,t,i,n),t.child}function Nh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hl(e,t,n,r,i){var s=Qe(n)?Rn:be.current;return s=ur(t,s),or(t,i),n=Ga(e,t,n,r,s,i),r=eu(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(he&&r&&Fa(t),t.flags|=1,ze(e,t,n,i),t.child)}function Yc(e,t,n,r,i){if(Qe(n)){var s=!0;Os(t)}else s=!1;if(or(t,i),t.stateNode===null)us(e,t),xh(t,n,r),Fl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pt(u):(u=Qe(n)?Rn:be.current,u=ur(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Bc(t,o,r,u),nn=!1;var d=t.memoizedState;o.state=d,Ms(t,r,o,i),a=t.memoizedState,l!==r||d!==a||Ke.current||nn?(typeof c=="function"&&(Bl(t,n,c,r),a=t.memoizedState),(l=nn||zc(t,n,l,r,d,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,th(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:vt(t.type,l),o.props=u,f=t.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=pt(a):(a=Qe(n)?Rn:be.current,a=ur(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||d!==a)&&Bc(t,o,r,a),nn=!1,d=t.memoizedState,o.state=d,Ms(t,r,o,i);var v=t.memoizedState;l!==f||d!==v||Ke.current||nn?(typeof g=="function"&&(Bl(t,n,g,r),v=t.memoizedState),(u=nn||zc(t,n,u,r,d,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Vl(e,t,n,r,s,i)}function Vl(e,t,n,r,i,s){Nh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Ac(t,n,!1),Jt(e,t,s);r=t.stateNode,Og.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=fr(t,e.child,null,s),t.child=fr(t,null,l,s)):ze(e,t,l,s),t.memoizedState=r.state,i&&Ac(t,n,!0),t.child}function Oh(e){var t=e.stateNode;t.pendingContext?jc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jc(e,t.context,!1),qa(e,t.containerInfo)}function Kc(e,t,n,r,i){return cr(),Ha(i),t.flags|=256,ze(e,t,n,r),t.child}var Wl={dehydrated:null,treeContext:null,retryLane:0};function Yl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Th(e,t,n){var r=t.pendingProps,i=me.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ue(me,i&1),e===null)return $l(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=uo(o,r,0,null),e=Dn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Yl(n),t.memoizedState=Wl,e):ru(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Tg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=mn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=mn(l,s):(s=Dn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Yl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Wl,r}return s=e.child,e=s.sibling,r=mn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ru(e,t){return t=uo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vi(e,t,n,r){return r!==null&&Ha(r),fr(t,e.child,null,n),e=ru(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=qo(Error(A(422))),Vi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=uo({mode:"visible",children:r.children},i,0,null),s=Dn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&fr(t,e.child,null,o),t.child.memoizedState=Yl(o),t.memoizedState=Wl,s);if(!(t.mode&1))return Vi(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(A(419)),r=qo(s,r,void 0),Vi(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ye||l){if(r=Ne,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qt(e,i),Et(r,e,i,-1))}return uu(),r=qo(Error(A(421))),Vi(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Ug.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ze=fn(i.nextSibling),tt=t,he=!0,kt=null,e!==null&&(ut[ct++]=Ht,ut[ct++]=Vt,ut[ct++]=Ln,Ht=e.id,Vt=e.overflow,Ln=t),t=ru(t,r.children),t.flags|=4096,t)}function Qc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),zl(e.return,t,n)}function Jo(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function jh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ze(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qc(e,n,t);else if(e.tag===19)Qc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(me,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ds(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ds(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jo(t,!0,n,null,s);break;case"together":Jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function us(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jg(e,t,n){switch(t.tag){case 3:Oh(t),cr();break;case 5:nh(t);break;case 1:Qe(t.type)&&Os(t);break;case 4:qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ue(As,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?Th(e,t,n):(ue(me,me.current&1),e=Jt(e,t,n),e!==null?e.sibling:null);ue(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return jh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,Ph(e,t,n)}return Jt(e,t,n)}var Ah,Kl,Ih,Mh;Ah=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kl=function(){};Ih=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,In(It.current);var s=null;switch(n){case"input":i=ml(e,i),r=ml(e,r),s=[];break;case"select":i=ge({},i,{value:void 0}),r=ge({},r,{value:void 0}),s=[];break;case"textarea":i=vl(e,i),r=vl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ps)}Sl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ei.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ei.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&fe("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Mh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ir(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ag(e,t,n){var r=t.pendingProps;switch(Ua(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Qe(t.type)&&Ns(),Me(t),null;case 3:return r=t.stateNode,dr(),de(Ke),de(be),Xa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ui(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kt!==null&&(ta(kt),kt=null))),Kl(e,t),Me(t),null;case 5:Ja(t);var i=In(di.current);if(n=t.type,e!==null&&t.stateNode!=null)Ih(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return Me(t),null}if(e=In(It.current),Ui(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[jt]=t,r[ci]=s,e=(t.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(i=0;i<Br.length;i++)fe(Br[i],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":rc(r,s),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fe("invalid",r);break;case"textarea":sc(r,s),fe("invalid",r)}Sl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Fi(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Fi(r.textContent,l,e),i=["children",""+l]):ei.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":Mi(r),ic(r,s,!0);break;case"textarea":Mi(r),oc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ps)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ld(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[jt]=t,e[ci]=r,Ah(e,t,!1,!1),t.stateNode=e;e:{switch(o=kl(n,r),n){case"dialog":fe("cancel",e),fe("close",e),i=r;break;case"iframe":case"object":case"embed":fe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)fe(Br[i],e);i=r;break;case"source":fe("error",e),i=r;break;case"img":case"image":case"link":fe("error",e),fe("load",e),i=r;break;case"details":fe("toggle",e),i=r;break;case"input":rc(e,r),i=ml(e,r),fe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ge({},r,{value:void 0}),fe("invalid",e);break;case"textarea":sc(e,r),i=vl(e,r),fe("invalid",e);break;default:i=r}Sl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?cd(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ad(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ti(e,a):typeof a=="number"&&ti(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ei.hasOwnProperty(s)?a!=null&&s==="onScroll"&&fe("scroll",e):a!=null&&Na(e,s,a,o))}switch(n){case"input":Mi(e),ic(e,r,!1);break;case"textarea":Mi(e),oc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+gn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?nr(e,!!r.multiple,s,!1):r.defaultValue!=null&&nr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ps)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)Mh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=In(di.current),In(It.current),Ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[jt]=t,(s=r.nodeValue!==n)&&(e=tt,e!==null))switch(e.tag){case 3:Fi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fi(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jt]=t,t.stateNode=r}return Me(t),null;case 13:if(de(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&Ze!==null&&t.mode&1&&!(t.flags&128))Xd(),cr(),t.flags|=98560,s=!1;else if(s=Ui(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(A(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(A(317));s[jt]=t}else cr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),s=!1}else kt!==null&&(ta(kt),kt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ce===0&&(Ce=3):uu())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return dr(),Kl(e,t),e===null&&ai(t.stateNode.containerInfo),Me(t),null;case 10:return Ya(t.type._context),Me(t),null;case 17:return Qe(t.type)&&Ns(),Me(t),null;case 19:if(de(me),s=t.memoizedState,s===null)return Me(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ir(s,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ds(e),o!==null){for(t.flags|=128,Ir(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(me,me.current&1|2),t.child}e=e.sibling}s.tail!==null&&ke()>pr&&(t.flags|=128,r=!0,Ir(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ds(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ir(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!he)return Me(t),null}else 2*ke()-s.renderingStartTime>pr&&n!==1073741824&&(t.flags|=128,r=!0,Ir(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ke(),t.sibling=null,n=me.current,ue(me,r?n&1|2:n&1),t):(Me(t),null);case 22:case 23:return au(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xe&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function Ig(e,t){switch(Ua(t),t.tag){case 1:return Qe(t.type)&&Ns(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dr(),de(Ke),de(be),Xa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ja(t),null;case 13:if(de(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));cr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(me),null;case 4:return dr(),null;case 10:return Ya(t.type._context),null;case 22:case 23:return au(),null;case 24:return null;default:return null}}var Wi=!1,Le=!1,Mg=typeof WeakSet=="function"?WeakSet:Set,$=null;function er(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(e,t,r)}else n.current=null}function Ql(e,t,n){try{n()}catch(r){we(e,t,r)}}var qc=!1;function Dg(e,t){if(Al=_s,e=$d(),Ba(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)d=f,f=g;for(;;){if(f===e)break t;if(d===n&&++u===i&&(l=o),d===s&&++c===r&&(a=o),(g=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Il={focusedElem:e,selectionRange:n},_s=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,T=v.memoizedState,m=t.stateNode,h=m.getSnapshotBeforeUpdate(t.elementType===t.type?k:vt(t.type,k),T);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(x){we(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return v=qc,qc=!1,v}function Jr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ql(t,n,s)}i=i.next}while(i!==r)}}function lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ql(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Dh(e){var t=e.alternate;t!==null&&(e.alternate=null,Dh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jt],delete t[ci],delete t[Rl],delete t[yg],delete t[gg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rh(e){return e.tag===5||e.tag===3||e.tag===4}function Jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ps));else if(r!==4&&(e=e.child,e!==null))for(Jl(e,t,n),e=e.sibling;e!==null;)Jl(e,t,n),e=e.sibling}function Xl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xl(e,t,n),e=e.sibling;e!==null;)Xl(e,t,n),e=e.sibling}var Te=null,wt=!1;function en(e,t,n){for(n=n.child;n!==null;)Lh(e,t,n),n=n.sibling}function Lh(e,t,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Gs,n)}catch{}switch(n.tag){case 5:Le||er(n,t);case 6:var r=Te,i=wt;Te=null,en(e,t,n),Te=r,wt=i,Te!==null&&(wt?(e=Te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(wt?(e=Te,n=n.stateNode,e.nodeType===8?Ho(e.parentNode,n):e.nodeType===1&&Ho(e,n),si(e)):Ho(Te,n.stateNode));break;case 4:r=Te,i=wt,Te=n.stateNode.containerInfo,wt=!0,en(e,t,n),Te=r,wt=i;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ql(n,t,o),i=i.next}while(i!==r)}en(e,t,n);break;case 1:if(!Le&&(er(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){we(n,t,l)}en(e,t,n);break;case 21:en(e,t,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,en(e,t,n),Le=r):en(e,t,n);break;default:en(e,t,n)}}function Xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mg),t.forEach(function(r){var i=Hg.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Te=l.stateNode,wt=!1;break e;case 3:Te=l.stateNode.containerInfo,wt=!0;break e;case 4:Te=l.stateNode.containerInfo,wt=!0;break e}l=l.return}if(Te===null)throw Error(A(160));Lh(s,o,i),Te=null,wt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){we(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bh(t,e),t=t.sibling}function bh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gt(t,e),Nt(e),r&4){try{Jr(3,e,e.return),lo(3,e)}catch(k){we(e,e.return,k)}try{Jr(5,e,e.return)}catch(k){we(e,e.return,k)}}break;case 1:gt(t,e),Nt(e),r&512&&n!==null&&er(n,n.return);break;case 5:if(gt(t,e),Nt(e),r&512&&n!==null&&er(n,n.return),e.flags&32){var i=e.stateNode;try{ti(i,"")}catch(k){we(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&sd(i,s),kl(l,o);var u=kl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],f=a[o+1];c==="style"?cd(i,f):c==="dangerouslySetInnerHTML"?ad(i,f):c==="children"?ti(i,f):Na(i,c,f,u)}switch(l){case"input":yl(i,s);break;case"textarea":od(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?nr(i,!!s.multiple,g,!1):d!==!!s.multiple&&(s.defaultValue!=null?nr(i,!!s.multiple,s.defaultValue,!0):nr(i,!!s.multiple,s.multiple?[]:"",!1))}i[ci]=s}catch(k){we(e,e.return,k)}}break;case 6:if(gt(t,e),Nt(e),r&4){if(e.stateNode===null)throw Error(A(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){we(e,e.return,k)}}break;case 3:if(gt(t,e),Nt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{si(t.containerInfo)}catch(k){we(e,e.return,k)}break;case 4:gt(t,e),Nt(e);break;case 13:gt(t,e),Nt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ou=ke())),r&4&&Xc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Le=(u=Le)||c,gt(t,e),Le=u):gt(t,e),Nt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for($=e,c=e.child;c!==null;){for(f=$=c;$!==null;){switch(d=$,g=d.child,d.tag){case 0:case 11:case 14:case 15:Jr(4,d,d.return);break;case 1:er(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){we(r,n,k)}}break;case 5:er(d,d.return);break;case 22:if(d.memoizedState!==null){Gc(f);continue}}g!==null?(g.return=d,$=g):Gc(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=ud("display",o))}catch(k){we(e,e.return,k)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){we(e,e.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gt(t,e),Nt(e),r&4&&Xc(e);break;case 21:break;default:gt(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Rh(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ti(i,""),r.flags&=-33);var s=Jc(e);Xl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Jc(e);Jl(e,l,o);break;default:throw Error(A(161))}}catch(a){we(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rg(e,t,n){$=e,$h(e)}function $h(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wi;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Le;l=Wi;var u=Le;if(Wi=o,(Le=a)&&!u)for($=i;$!==null;)o=$,a=o.child,o.tag===22&&o.memoizedState!==null?ef(i):a!==null?(a.return=o,$=a):ef(i);for(;s!==null;)$=s,$h(s),s=s.sibling;$=i,Wi=l,Le=u}Zc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Zc(e)}}function Zc(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||lo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Le)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Lc(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&si(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Le||t.flags&512&&ql(t)}catch(d){we(t,t.return,d)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function Gc(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function ef(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{lo(4,t)}catch(a){we(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){we(t,i,a)}}var s=t.return;try{ql(t)}catch(a){we(t,s,a)}break;case 5:var o=t.return;try{ql(t)}catch(a){we(t,o,a)}}}catch(a){we(t,t.return,a)}if(t===e){$=null;break}var l=t.sibling;if(l!==null){l.return=t.return,$=l;break}$=t.return}}var Lg=Math.ceil,bs=Zt.ReactCurrentDispatcher,iu=Zt.ReactCurrentOwner,ht=Zt.ReactCurrentBatchConfig,re=0,Ne=null,xe=null,je=0,Xe=0,tr=xn(0),Ce=0,yi=null,$n=0,ao=0,su=0,Xr=null,We=null,ou=0,pr=1/0,zt=null,$s=!1,Zl=null,hn=null,Yi=!1,ln=null,zs=0,Zr=0,Gl=null,cs=-1,fs=0;function Fe(){return re&6?ke():cs!==-1?cs:cs=ke()}function pn(e){return e.mode&1?re&2&&je!==0?je&-je:wg.transition!==null?(fs===0&&(fs=xd()),fs):(e=se,e!==0||(e=window.event,e=e===void 0?16:Td(e.type)),e):1}function Et(e,t,n,r){if(50<Zr)throw Zr=0,Gl=null,Error(A(185));Ei(e,n,r),(!(re&2)||e!==Ne)&&(e===Ne&&(!(re&2)&&(ao|=n),Ce===4&&sn(e,je)),qe(e,r),n===1&&re===0&&!(t.mode&1)&&(pr=ke()+500,io&&_n()))}function qe(e,t){var n=e.callbackNode;wy(e,t);var r=xs(e,e===Ne?je:0);if(r===0)n!==null&&uc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&uc(n),t===1)e.tag===0?vg(tf.bind(null,e)):Qd(tf.bind(null,e)),pg(function(){!(re&6)&&_n()}),n=null;else{switch(_d(r)){case 1:n=Ia;break;case 4:n=Sd;break;case 16:n=ks;break;case 536870912:n=kd;break;default:n=ks}n=Yh(n,zh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zh(e,t){if(cs=-1,fs=0,re&6)throw Error(A(327));var n=e.callbackNode;if(lr()&&e.callbackNode!==n)return null;var r=xs(e,e===Ne?je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Bs(e,r);else{t=r;var i=re;re|=2;var s=Fh();(Ne!==e||je!==t)&&(zt=null,pr=ke()+500,Mn(e,t));do try{zg();break}catch(l){Bh(e,l)}while(!0);Wa(),bs.current=s,re=i,xe!==null?t=0:(Ne=null,je=0,t=Ce)}if(t!==0){if(t===2&&(i=Pl(e),i!==0&&(r=i,t=ea(e,i))),t===1)throw n=yi,Mn(e,0),sn(e,r),qe(e,ke()),n;if(t===6)sn(e,r);else{if(i=e.current.alternate,!(r&30)&&!bg(i)&&(t=Bs(e,r),t===2&&(s=Pl(e),s!==0&&(r=s,t=ea(e,s))),t===1))throw n=yi,Mn(e,0),sn(e,r),qe(e,ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:On(e,We,zt);break;case 3:if(sn(e,r),(r&130023424)===r&&(t=ou+500-ke(),10<t)){if(xs(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Fe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Dl(On.bind(null,e,We,zt),t);break}On(e,We,zt);break;case 4:if(sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-_t(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lg(r/1960))-r,10<r){e.timeoutHandle=Dl(On.bind(null,e,We,zt),r);break}On(e,We,zt);break;case 5:On(e,We,zt);break;default:throw Error(A(329))}}}return qe(e,ke()),e.callbackNode===n?zh.bind(null,e):null}function ea(e,t){var n=Xr;return e.current.memoizedState.isDehydrated&&(Mn(e,t).flags|=256),e=Bs(e,t),e!==2&&(t=We,We=n,t!==null&&ta(t)),e}function ta(e){We===null?We=e:We.push.apply(We,e)}function bg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ct(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~su,t&=~ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function tf(e){if(re&6)throw Error(A(327));lr();var t=xs(e,0);if(!(t&1))return qe(e,ke()),null;var n=Bs(e,t);if(e.tag!==0&&n===2){var r=Pl(e);r!==0&&(t=r,n=ea(e,r))}if(n===1)throw n=yi,Mn(e,0),sn(e,t),qe(e,ke()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,On(e,We,zt),qe(e,ke()),null}function lu(e,t){var n=re;re|=1;try{return e(t)}finally{re=n,re===0&&(pr=ke()+500,io&&_n())}}function zn(e){ln!==null&&ln.tag===0&&!(re&6)&&lr();var t=re;re|=1;var n=ht.transition,r=se;try{if(ht.transition=null,se=1,e)return e()}finally{se=r,ht.transition=n,re=t,!(re&6)&&_n()}}function au(){Xe=tr.current,de(tr)}function Mn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hg(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(Ua(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ns();break;case 3:dr(),de(Ke),de(be),Xa();break;case 5:Ja(r);break;case 4:dr();break;case 13:de(me);break;case 19:de(me);break;case 10:Ya(r.type._context);break;case 22:case 23:au()}n=n.return}if(Ne=e,xe=e=mn(e.current,null),je=Xe=t,Ce=0,yi=null,su=ao=$n=0,We=Xr=null,An!==null){for(t=0;t<An.length;t++)if(n=An[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}An=null}return e}function Bh(e,t){do{var n=xe;try{if(Wa(),ls.current=Ls,Rs){for(var r=ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rs=!1}if(bn=0,Pe=Ee=ye=null,qr=!1,hi=0,iu.current=null,n===null||n.return===null){Ce=1,yi=t,xe=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=je,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Uc(o);if(g!==null){g.flags&=-257,Hc(g,o,l,s,t),g.mode&1&&Fc(s,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var k=new Set;k.add(a),t.updateQueue=k}else v.add(a);break e}else{if(!(t&1)){Fc(s,u,t),uu();break e}a=Error(A(426))}}else if(he&&l.mode&1){var T=Uc(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Hc(T,o,l,s,t),Ha(hr(a,l));break e}}s=a=hr(a,l),Ce!==4&&(Ce=2),Xr===null?Xr=[s]:Xr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=_h(s,a,t);Rc(s,m);break e;case 1:l=a;var h=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(hn===null||!hn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=Eh(s,l,t);Rc(s,x);break e}}s=s.return}while(s!==null)}Hh(n)}catch(E){t=E,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function Fh(){var e=bs.current;return bs.current=Ls,e===null?Ls:e}function uu(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Ne===null||!($n&268435455)&&!(ao&268435455)||sn(Ne,je)}function Bs(e,t){var n=re;re|=2;var r=Fh();(Ne!==e||je!==t)&&(zt=null,Mn(e,t));do try{$g();break}catch(i){Bh(e,i)}while(!0);if(Wa(),re=n,bs.current=r,xe!==null)throw Error(A(261));return Ne=null,je=0,Ce}function $g(){for(;xe!==null;)Uh(xe)}function zg(){for(;xe!==null&&!cy();)Uh(xe)}function Uh(e){var t=Wh(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?Hh(e):xe=t,iu.current=null}function Hh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ig(n,t),n!==null){n.flags&=32767,xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,xe=null;return}}else if(n=Ag(n,t,Xe),n!==null){xe=n;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);Ce===0&&(Ce=5)}function On(e,t,n){var r=se,i=ht.transition;try{ht.transition=null,se=1,Bg(e,t,n,r)}finally{ht.transition=i,se=r}return null}function Bg(e,t,n,r){do lr();while(ln!==null);if(re&6)throw Error(A(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Sy(e,s),e===Ne&&(xe=Ne=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yi||(Yi=!0,Yh(ks,function(){return lr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ht.transition,ht.transition=null;var o=se;se=1;var l=re;re|=4,iu.current=null,Dg(e,n),bh(n,e),og(Il),_s=!!Al,Il=Al=null,e.current=n,Rg(n),fy(),re=l,se=o,ht.transition=s}else e.current=n;if(Yi&&(Yi=!1,ln=e,zs=i),s=e.pendingLanes,s===0&&(hn=null),py(n.stateNode),qe(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($s)throw $s=!1,e=Zl,Zl=null,e;return zs&1&&e.tag!==0&&lr(),s=e.pendingLanes,s&1?e===Gl?Zr++:(Zr=0,Gl=e):Zr=0,_n(),null}function lr(){if(ln!==null){var e=_d(zs),t=ht.transition,n=se;try{if(ht.transition=null,se=16>e?16:e,ln===null)var r=!1;else{if(e=ln,ln=null,zs=0,re&6)throw Error(A(331));var i=re;for(re|=4,$=e.current;$!==null;){var s=$,o=s.child;if($.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for($=u;$!==null;){var c=$;switch(c.tag){case 0:case 11:case 15:Jr(8,c,s)}var f=c.child;if(f!==null)f.return=c,$=f;else for(;$!==null;){c=$;var d=c.sibling,g=c.return;if(Dh(c),c===u){$=null;break}if(d!==null){d.return=g,$=d;break}$=g}}}var v=s.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var T=k.sibling;k.sibling=null,k=T}while(k!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,$=m;break e}$=s.return}}var h=e.current;for($=h;$!==null;){o=$;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,$=y;else e:for(o=h;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lo(9,l)}}catch(E){we(l,l.return,E)}if(l===o){$=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,$=x;break e}$=l.return}}if(re=i,_n(),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Gs,e)}catch{}r=!0}return r}finally{se=n,ht.transition=t}}return!1}function nf(e,t,n){t=hr(n,t),t=_h(e,t,1),e=dn(e,t,1),t=Fe(),e!==null&&(Ei(e,1,t),qe(e,t))}function we(e,t,n){if(e.tag===3)nf(e,e,n);else for(;t!==null;){if(t.tag===3){nf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){e=hr(n,e),e=Eh(t,e,1),t=dn(t,e,1),e=Fe(),t!==null&&(Ei(t,1,e),qe(t,e));break}}t=t.return}}function Fg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Fe(),e.pingedLanes|=e.suspendedLanes&n,Ne===e&&(je&n)===n&&(Ce===4||Ce===3&&(je&130023424)===je&&500>ke()-ou?Mn(e,0):su|=n),qe(e,t)}function Vh(e,t){t===0&&(e.mode&1?(t=Li,Li<<=1,!(Li&130023424)&&(Li=4194304)):t=1);var n=Fe();e=qt(e,t),e!==null&&(Ei(e,t,n),qe(e,n))}function Ug(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Vh(e,n)}function Hg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),Vh(e,n)}var Wh;Wh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ke.current)Ye=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ye=!1,jg(e,t,n);Ye=!!(e.flags&131072)}else Ye=!1,he&&t.flags&1048576&&qd(t,js,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;us(e,t),e=t.pendingProps;var i=ur(t,be.current);or(t,n),i=Ga(null,t,r,e,i,n);var s=eu();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qe(r)?(s=!0,Os(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qa(t),i.updater=oo,t.stateNode=i,i._reactInternals=t,Fl(t,r,e,n),t=Vl(null,t,r,!0,s,n)):(t.tag=0,he&&s&&Fa(t),ze(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(us(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Wg(r),e=vt(r,e),i){case 0:t=Hl(null,t,r,e,n);break e;case 1:t=Yc(null,t,r,e,n);break e;case 11:t=Vc(null,t,r,e,n);break e;case 14:t=Wc(null,t,r,vt(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),Hl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),Yc(e,t,r,i,n);case 3:e:{if(Oh(t),e===null)throw Error(A(387));r=t.pendingProps,s=t.memoizedState,i=s.element,th(e,t),Ms(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=hr(Error(A(423)),t),t=Kc(e,t,r,n,i);break e}else if(r!==i){i=hr(Error(A(424)),t),t=Kc(e,t,r,n,i);break e}else for(Ze=fn(t.stateNode.containerInfo.firstChild),tt=t,he=!0,kt=null,n=Gd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cr(),r===i){t=Jt(e,t,n);break e}ze(e,t,r,n)}t=t.child}return t;case 5:return nh(t),e===null&&$l(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Ml(r,i)?o=null:s!==null&&Ml(r,s)&&(t.flags|=32),Nh(e,t),ze(e,t,o,n),t.child;case 6:return e===null&&$l(t),null;case 13:return Th(e,t,n);case 4:return qa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=fr(t,null,r,n):ze(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),Vc(e,t,r,i,n);case 7:return ze(e,t,t.pendingProps,n),t.child;case 8:return ze(e,t,t.pendingProps.children,n),t.child;case 12:return ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ue(As,r._currentValue),r._currentValue=o,s!==null)if(Ct(s.value,o)){if(s.children===i.children&&!Ke.current){t=Jt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Wt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zl(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(A(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zl(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ze(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,or(t,n),i=pt(i),r=r(i),t.flags|=1,ze(e,t,r,n),t.child;case 14:return r=t.type,i=vt(r,t.pendingProps),i=vt(r.type,i),Wc(e,t,r,i,n);case 15:return Ch(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vt(r,i),us(e,t),t.tag=1,Qe(r)?(e=!0,Os(t)):e=!1,or(t,n),xh(t,r,i),Fl(t,r,i,n),Vl(null,t,r,!0,e,n);case 19:return jh(e,t,n);case 22:return Ph(e,t,n)}throw Error(A(156,t.tag))};function Yh(e,t){return wd(e,t)}function Vg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(e,t,n,r){return new Vg(e,t,n,r)}function cu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wg(e){if(typeof e=="function")return cu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ta)return 11;if(e===ja)return 14}return 2}function mn(e,t){var n=e.alternate;return n===null?(n=dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ds(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")cu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Wn:return Dn(n.children,i,s,t);case Oa:o=8,i|=8;break;case fl:return e=dt(12,n,t,i|2),e.elementType=fl,e.lanes=s,e;case dl:return e=dt(13,n,t,i),e.elementType=dl,e.lanes=s,e;case hl:return e=dt(19,n,t,i),e.elementType=hl,e.lanes=s,e;case nd:return uo(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ed:o=10;break e;case td:o=9;break e;case Ta:o=11;break e;case ja:o=14;break e;case tn:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=dt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Dn(e,t,n,r){return e=dt(7,e,r,t),e.lanes=n,e}function uo(e,t,n,r){return e=dt(22,e,r,t),e.elementType=nd,e.lanes=n,e.stateNode={isHidden:!1},e}function Xo(e,t,n){return e=dt(6,e,null,t),e.lanes=n,e}function Zo(e,t,n){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yg(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Io(0),this.expirationTimes=Io(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Io(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fu(e,t,n,r,i,s,o,l,a){return e=new Yg(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=dt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qa(s),e}function Kg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Kh(e){if(!e)return vn;e=e._reactInternals;e:{if(Un(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if(Qe(n))return Kd(e,n,t)}return t}function Qh(e,t,n,r,i,s,o,l,a){return e=fu(n,r,!0,e,i,s,o,l,a),e.context=Kh(null),n=e.current,r=Fe(),i=pn(n),s=Wt(r,i),s.callback=t??null,dn(n,s,i),e.current.lanes=i,Ei(e,i,r),qe(e,r),e}function co(e,t,n,r){var i=t.current,s=Fe(),o=pn(i);return n=Kh(n),t.context===null?t.context=n:t.pendingContext=n,t=Wt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dn(i,t,o),e!==null&&(Et(e,i,o,s),os(e,i,o)),o}function Fs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function du(e,t){rf(e,t),(e=e.alternate)&&rf(e,t)}function Qg(){return null}var qh=typeof reportError=="function"?reportError:function(e){console.error(e)};function hu(e){this._internalRoot=e}fo.prototype.render=hu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));co(e,t,null,null)};fo.prototype.unmount=hu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){co(null,e,null,null)}),t[Qt]=null}};function fo(e){this._internalRoot=e}fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&Od(e)}};function pu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ho(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sf(){}function qg(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Fs(o);s.call(u)}}var o=Qh(t,r,e,0,null,!1,!1,"",sf);return e._reactRootContainer=o,e[Qt]=o.current,ai(e.nodeType===8?e.parentNode:e),zn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Fs(a);l.call(u)}}var a=fu(e,0,!1,null,null,!1,!1,"",sf);return e._reactRootContainer=a,e[Qt]=a.current,ai(e.nodeType===8?e.parentNode:e),zn(function(){co(t,a,n,r)}),a}function po(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Fs(o);l.call(a)}}co(t,o,e,i)}else o=qg(n,t,e,i,r);return Fs(o)}Ed=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=zr(t.pendingLanes);n!==0&&(Ma(t,n|1),qe(t,ke()),!(re&6)&&(pr=ke()+500,_n()))}break;case 13:zn(function(){var r=qt(e,1);if(r!==null){var i=Fe();Et(r,e,1,i)}}),du(e,1)}};Da=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var n=Fe();Et(t,e,134217728,n)}du(e,134217728)}};Cd=function(e){if(e.tag===13){var t=pn(e),n=qt(e,t);if(n!==null){var r=Fe();Et(n,e,t,r)}du(e,t)}};Pd=function(){return se};Nd=function(e,t){var n=se;try{return se=e,t()}finally{se=n}};_l=function(e,t,n){switch(t){case"input":if(yl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ro(r);if(!i)throw Error(A(90));id(r),yl(r,i)}}}break;case"textarea":od(e,n);break;case"select":t=n.value,t!=null&&nr(e,!!n.multiple,t,!1)}};hd=lu;pd=zn;var Jg={usingClientEntryPoint:!1,Events:[Pi,qn,ro,fd,dd,lu]},Mr={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xg={bundleType:Mr.bundleType,version:Mr.version,rendererPackageName:Mr.rendererPackageName,rendererConfig:Mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gd(e),e===null?null:e.stateNode},findFiberByHostInstance:Mr.findFiberByHostInstance||Qg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ki.isDisabled&&Ki.supportsFiber)try{Gs=Ki.inject(Xg),At=Ki}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jg;ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pu(t))throw Error(A(200));return Kg(e,t,null,n)};ot.createRoot=function(e,t){if(!pu(e))throw Error(A(299));var n=!1,r="",i=qh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=fu(e,1,!1,null,null,n,!1,r,i),e[Qt]=t.current,ai(e.nodeType===8?e.parentNode:e),new hu(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=gd(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return zn(e)};ot.hydrate=function(e,t,n){if(!ho(t))throw Error(A(200));return po(null,e,t,!0,n)};ot.hydrateRoot=function(e,t,n){if(!pu(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Qh(t,null,e,1,n??null,i,!1,s,o),e[Qt]=t.current,ai(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new fo(t)};ot.render=function(e,t,n){if(!ho(t))throw Error(A(200));return po(null,e,t,!1,n)};ot.unmountComponentAtNode=function(e){if(!ho(e))throw Error(A(40));return e._reactRootContainer?(zn(function(){po(null,null,e,!1,function(){e._reactRootContainer=null,e[Qt]=null})}),!0):!1};ot.unstable_batchedUpdates=lu;ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ho(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return po(e,t,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function Jh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jh)}catch(e){console.error(e)}}Jh(),Jf.exports=ot;var Zg=Jf.exports,Xh,of=Zg;Xh=of.createRoot,of.hydrateRoot;let Gg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",ev=(e=21)=>{let t="",n=e|0;for(;n--;)t+=Gg[Math.random()*64|0];return t};function xt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function mr(e){return!!e&&!!e[it]}function Bn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===av}(e)||Array.isArray(e)||!!e[pf]||!!(!((t=e.constructor)===null||t===void 0)&&t[pf])||mu(e)||yu(e))}function gi(e,t,n){n===void 0&&(n=!1),Sr(e)===0?(n?Object.keys:ku)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Sr(e){var t=e[it];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:mu(e)?2:yu(e)?3:0}function na(e,t){return Sr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function tv(e,t){return Sr(e)===2?e.get(t):e[t]}function Zh(e,t,n){var r=Sr(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nv(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function mu(e){return ov&&e instanceof Map}function yu(e){return lv&&e instanceof Set}function Tn(e){return e.o||e.t}function gu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=uv(e);delete t[it];for(var n=ku(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function vu(e,t){return t===void 0&&(t=!1),wu(e)||mr(e)||!Bn(e)||(Sr(e)>1&&(e.set=e.add=e.clear=e.delete=rv),Object.freeze(e),t&&gi(e,function(n,r){return vu(r,!0)},!0)),e}function rv(){xt(2)}function wu(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Mt(e){var t=cv[e];return t||xt(18,e),t}function lf(){return vi}function Go(e,t){t&&(Mt("Patches"),e.u=[],e.s=[],e.v=t)}function Us(e){ra(e),e.p.forEach(iv),e.p=null}function ra(e){e===vi&&(vi=e.l)}function af(e){return vi={p:[],l:vi,h:e,m:!0,_:0}}function iv(e){var t=e[it];t.i===0||t.i===1?t.j():t.g=!0}function el(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Mt("ES5").S(t,e,r),r?(n[it].P&&(Us(t),xt(4)),Bn(e)&&(e=Hs(t,e),t.l||Vs(t,e)),t.u&&Mt("Patches").M(n[it].t,e,t.u,t.s)):e=Hs(t,n,[]),Us(t),t.u&&t.v(t.u,t.s),e!==Gh?e:void 0}function Hs(e,t,n){if(wu(t))return t;var r=t[it];if(!r)return gi(t,function(l,a){return uf(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Vs(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=gu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),gi(s,function(l,a){return uf(e,r,i,l,a,n,o)}),Vs(e,i,!1),n&&e.u&&Mt("Patches").N(r,n,e.u,e.s)}return r.o}function uf(e,t,n,r,i,s,o){if(mr(i)){var l=Hs(e,i,s&&t&&t.i!==3&&!na(t.R,r)?s.concat(r):void 0);if(Zh(n,r,l),!mr(l))return;e.m=!1}else o&&n.add(i);if(Bn(i)&&!wu(i)){if(!e.h.D&&e._<1)return;Hs(e,i),t&&t.A.l||Vs(e,i)}}function Vs(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&vu(t,n)}function tl(e,t){var n=e[it];return(n?Tn(n):e)[t]}function cf(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ia(e){e.P||(e.P=!0,e.l&&ia(e.l))}function nl(e){e.o||(e.o=gu(e.t))}function sa(e,t,n){var r=mu(t)?Mt("MapSet").F(t,n):yu(t)?Mt("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:lf(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=oa;o&&(a=[l],u=Fr);var c=Proxy.revocable(a,u),f=c.revoke,d=c.proxy;return l.k=d,l.j=f,d}(t,n):Mt("ES5").J(t,n);return(n?n.A:lf()).p.push(r),r}function sv(e){return mr(e)||xt(22,e),function t(n){if(!Bn(n))return n;var r,i=n[it],s=Sr(n);if(i){if(!i.P&&(i.i<4||!Mt("ES5").K(i)))return i.t;i.I=!0,r=ff(n,s),i.I=!1}else r=ff(n,s);return gi(r,function(o,l){i&&tv(i.t,o)===l||Zh(r,o,t(l))}),s===3?new Set(r):r}(e)}function ff(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return gu(e)}var df,vi,Su=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ov=typeof Map<"u",lv=typeof Set<"u",hf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Gh=Su?Symbol.for("immer-nothing"):((df={})["immer-nothing"]=!0,df),pf=Su?Symbol.for("immer-draftable"):"__$immer_draftable",it=Su?Symbol.for("immer-state"):"__$immer_state",av=""+Object.prototype.constructor,ku=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,uv=Object.getOwnPropertyDescriptors||function(e){var t={};return ku(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},cv={},oa={get:function(e,t){if(t===it)return e;var n=Tn(e);if(!na(n,t))return function(i,s,o){var l,a=cf(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Bn(r)?r:r===tl(e.t,t)?(nl(e),e.o[t]=sa(e.A.h,r,e)):r},has:function(e,t){return t in Tn(e)},ownKeys:function(e){return Reflect.ownKeys(Tn(e))},set:function(e,t,n){var r=cf(Tn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=tl(Tn(e),t),s=i==null?void 0:i[it];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(nv(n,i)&&(n!==void 0||na(e.t,t)))return!0;nl(e),ia(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return tl(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,nl(e),ia(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Tn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){xt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){xt(12)}},Fr={};gi(oa,function(e,t){Fr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Fr.deleteProperty=function(e,t){return Fr.set.call(this,e,t,void 0)},Fr.set=function(e,t,n){return oa.set.call(this,e[0],t,n,e[0])};var fv=function(){function e(n){var r=this;this.O=hf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(k){var T=this;k===void 0&&(k=l);for(var m=arguments.length,h=Array(m>1?m-1:0),y=1;y<m;y++)h[y-1]=arguments[y];return a.produce(k,function(x){var E;return(E=s).call.apply(E,[T,x].concat(h))})}}var u;if(typeof s!="function"&&xt(6),o!==void 0&&typeof o!="function"&&xt(7),Bn(i)){var c=af(r),f=sa(r,i,void 0),d=!0;try{u=s(f),d=!1}finally{d?Us(c):ra(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(k){return Go(c,o),el(k,c)},function(k){throw Us(c),k}):(Go(c,o),el(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Gh&&(u=void 0),r.D&&vu(u,!0),o){var g=[],v=[];Mt("Patches").M(i,u,g,v),o(g,v)}return u}xt(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(f))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Bn(n)||xt(8),mr(n)&&(n=sv(n));var r=af(this),i=sa(this,n,void 0);return i[it].C=!0,ra(r),i},t.finishDraft=function(n,r){var i=n&&n[it],s=i.A;return Go(s,r),el(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!hf&&xt(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Mt("Patches").$;return mr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),st=new fv,dv=st.produce;st.produceWithPatches.bind(st);st.setAutoFreeze.bind(st);st.setUseProxies.bind(st);st.applyPatches.bind(st);st.createDraft.bind(st);st.finishDraft.bind(st);class hv{constructor(t){const n=pv();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function pv(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function mf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function ep(e,t){const n=new hv(e),r=n.next.bind(n);return t&&mf(t,n),r.state=()=>mf(n,{}),r}class yf{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=ep(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const mv={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new yf(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=yf.seed()),{seed:t}},playerView:()=>{}};var yv=Function.prototype,gv=yv.toString;gv.call(Object);const wi="MAKE_MOVE",mo="GAME_EVENT",yo="REDO",xu="RESET",_u="SYNC",go="UNDO",Eu="UPDATE",Cu="PATCH",tp="PLUGIN",vo="STRIP_TRANSIENTS",np=(e,t,n,r)=>({type:wi,payload:{type:e,args:t,playerID:n,credentials:r}}),Gr=(e,t,n,r)=>({type:mo,payload:{type:e,args:t,playerID:n,credentials:r}}),rp=(e,t,n,r)=>({type:mo,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),ip=e=>({type:_u,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),sp=(e,t,n,r)=>({type:Cu,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),op=(e,t)=>({type:Eu,state:e,deltalog:t,clientOnly:!0}),lp=e=>({type:xu,state:e,clientOnly:!0}),ap=(e,t)=>({type:go,payload:{type:null,args:null,playerID:e,credentials:t}}),up=(e,t)=>({type:yo,payload:{type:null,args:null,playerID:e,credentials:t}}),vv=(e,t,n,r)=>({type:tp,payload:{type:e,args:t,playerID:n,credentials:r}}),cp=()=>({type:vo});var wv=Object.freeze({__proto__:null,makeMove:np,gameEvent:Gr,automaticGameEvent:rp,sync:ip,patch:sp,update:op,reset:lp,undo:ap,redo:up,plugin:vv,stripTransients:cp});const wn="INVALID_MOVE",Sv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=dv(t.G,s=>{const o=e({...t,G:s},...n);if(o===wn){r=!0;return}return o});return r?wn:i}};var Re;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Re||(Re={}));var Bt;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Bt||(Bt={}));class kv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,Bt.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,Bt.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Re.TURN_ON_END:case Re.PHASE_ON_END:return r(s.error,Bt.StageEventInOnEnd);case Re.PHASE_ON_BEGIN:return r(s.error,Bt.StageEventInPhaseBegin);case Re.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,Bt.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Re.TURN_ON_END||s.calledFrom===Re.PHASE_ON_END)return r(s.error,Bt.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Re.PHASE_ON_END)return r(s.error,Bt.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=rp(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const Pu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new kv(e.flow,t,n).api()},xv={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},_v={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},Ev=(...e)=>console.error(...e);function ie(e){Ev("ERROR:",e)}const Nu=[Sv,mv,xv,_v],Oi=[...Nu,Pu],Cv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),yr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),fp=(e,t,n)=>[...Nu,...n,Pu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),Pv=(e,t)=>([...Oi,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),la=(e,t)=>([...Oi,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),Nv=(e,t)=>([...Nu,...t.game.plugins,Pu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),Ov=(e,t)=>[...Oi,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),Tv=(e,t)=>[...Oi,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,dp=(e,t)=>{const n=Nv(e,t),r=Tv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return ie(`${i} plugin declared action invalid:
${s}`),[e,r]},hp=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Oi,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function Ws(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Ys(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Ks.NULL),n=a}else{if(Ws(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Qi(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Qi(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Qi(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Qi(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function jv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=Ys(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Qi(e,t,n,r,i){(typeof i!="object"||i===Ks.NULL)&&(i={stage:i}),i.stage!==void 0&&(Ws(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function aa(e,t){return e[t]+""}function Av(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...yr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((d,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&ie(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const f=aa(a,u);return r={...r,currentPlayer:f,playOrderPos:u,playOrder:a},r=Ys(r,t.activePlayers||{}),r}function Iv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&ie(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=aa(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:ie(`invalid argument to endTurn: ${u}`)}});else{const c={...yr(e),G:s,ctx:o},f=i.next(c),d=typeof f;f!==void 0&&d!=="number"&&ie(`invalid value returned by turn.order.next  expected number or undefined got ${d} ${f}.`),f===void 0?a=!0:(l=f,t=aa(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const Mv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Ks={NULL:null};var Ou={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.Pointer=Yt.escapeToken=Yt.unescapeToken=void 0;function pp(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Yt.unescapeToken=pp;function mp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Yt.escapeToken=mp;var Dv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(pp);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(mp).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Yt.Pointer=Dv;var ve={},Tu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(Tu);var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.diffAny=Be.diffObjects=Be.diffArrays=Be.intersection=Be.subtract=Be.isDestructive=void 0;var Si=Tu;function Rv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}Be.isDestructive=Rv;function ua(e,t){var n={};for(var r in e)Si.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)Si.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}Be.subtract=ua;function yp(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)Si.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}Be.intersection=yp;function Lv(e){return e.op==="add"}function bv(e){return e.op==="remove"}function rl(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function gp(e,t,n,r){r===void 0&&(r=wo);var i={"0,0":{operations:[],cost:0}};function s(c,f){var d="".concat(c,",").concat(f),g=i[d];if(g===void 0){if(c>0&&f>0&&!r(e[c-1],t[f-1],n.add(String(c-1))).length)g=s(c-1,f-1);else{var v=[];if(c>0){var k=s(c-1,f),T={op:"remove",index:c-1};v.push(rl(k,T))}if(f>0){var m=s(c,f-1),h={op:"add",index:c-1,value:t[f-1]};v.push(rl(m,h))}if(c>0&&f>0){var y=s(c-1,f-1),x={op:"replace",index:c-1,original:e[c-1],value:t[f-1]};v.push(rl(y,x))}var E=v.sort(function(O,_){return O.cost-_.cost})[0];g=E}i[d]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,f){var d=c[0],g=c[1];if(Lv(f)){var v=f.index+1+g,k=v<o+g?String(v):"-",T={op:f.op,path:n.add(k).toString(),value:f.value};return[d.concat(T),g+1]}else if(bv(f)){var T={op:f.op,path:n.add(String(f.index+g)).toString()};return[d.concat(T),g-1]}else{var m=n.add(String(f.index+g)),h=r(f.original,f.value,m);return[d.concat.apply(d,h),g]}},[[],0])[0];return u}Be.diffArrays=gp;function vp(e,t,n,r){r===void 0&&(r=wo);var i=[];return ua(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),ua(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),yp([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}Be.diffObjects=vp;function wo(e,t,n,r){if(r===void 0&&(r=wo),e===t)return[];var i=(0,Si.objectType)(e),s=(0,Si.objectType)(t);return i=="array"&&s=="array"?gp(e,t,n,r):i=="object"&&s=="object"?vp(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Be.diffAny=wo;var ju=Hr&&Hr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ve,"__esModule",{value:!0});ve.apply=ve.InvalidOperationError=ve.test=ve.copy=ve.move=ve.replace=ve.remove=ve.add=ve.TestError=ve.MissingError=void 0;var Xt=Yt,Au=Tu,$v=Be,Dt=function(e){ju(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);ve.MissingError=Dt;var wp=function(e){ju(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);ve.TestError=wp;function Iu(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function Sp(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function kp(e,t){var n=Xt.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Dt(t.path):(Iu(n.parent,n.key,(0,Au.clone)(t.value)),null)}ve.add=kp;function xp(e,t){var n=Xt.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new Dt(t.path):(Sp(n.parent,n.key),null)}ve.remove=xp;function _p(e,t){var n=Xt.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new Dt(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new Dt(t.path)}else if(n.value===void 0)return new Dt(t.path);return n.parent[n.key]=(0,Au.clone)(t.value),null}ve.replace=_p;function Ep(e,t){var n=Xt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Dt(t.from);var r=Xt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Dt(t.path):(Sp(n.parent,n.key),Iu(r.parent,r.key,n.value),null)}ve.move=Ep;function Cp(e,t){var n=Xt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Dt(t.from);var r=Xt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Dt(t.path):(Iu(r.parent,r.key,(0,Au.clone)(n.value)),null)}ve.copy=Cp;function Pp(e,t){var n=Xt.Pointer.fromJSON(t.path).evaluate(e);return(0,$v.diffAny)(n.value,t.value,new Xt.Pointer).length?new wp(n.value,t.value):null}ve.test=Pp;var Np=function(e){ju(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);ve.InvalidOperationError=Np;function zv(e,t){switch(t.op){case"add":return kp(e,t);case"remove":return xp(e,t);case"replace":return _p(e,t);case"move":return Ep(e,t);case"copy":return Cp(e,t);case"test":return Pp(e,t)}return new Np(t)}ve.apply=zv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Yt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=ve,r=Be;function i(u,c){return c.map(function(f){return(0,n.apply)(u,f)})}e.applyPatch=i;function s(u){function c(f,d,g){var v=u(f,d,g);return Array.isArray(v)?v:(0,r.diffAny)(f,d,g,c)}return c}function o(u,c,f){var d=new t.Pointer;return(f?s(f):r.diffAny)(u,c,d)}e.createPatch=o;function l(u,c){var f=t.Pointer.fromJSON(c).evaluate(u);if(f!==void 0)return{op:"test",path:c,value:f.value}}function a(u,c){var f=new Array;return c.filter(r.isDestructive).forEach(function(d){var g=l(u,d.path);if(g&&f.push(g),"from"in d){var v=l(u,d.from);v&&f.push(v)}}),f}e.createTests=a})(Ou);function Bv({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:S})=>S),i||(i={});const l={...t};""in l&&ie("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(S=>u.add(S));const f=(S,w)=>{const C=fp(S,w,o);return D=>{const L=yr(D);return C({...L,G:D.G,ctx:D.ctx,playerID:D.playerID})}},d=S=>w=>{const C=yr(w);return S({...C,G:w.G,ctx:w.ctx})},g={onEnd:f(r,Re.GAME_ON_END),endIf:d(n)};for(const S in l){const w=l[S];if(w.start===!0&&(c=S),w.moves!==void 0)for(const C of Object.keys(w.moves))a[S+"."+C]=w.moves[C],u.add(C);w.endIf===void 0&&(w.endIf=()=>{}),w.onBegin===void 0&&(w.onBegin=({G:C})=>C),w.onEnd===void 0&&(w.onEnd=({G:C})=>C),w.turn===void 0&&(w.turn=i),w.turn.order===void 0&&(w.turn.order=Mv.DEFAULT),w.turn.onBegin===void 0&&(w.turn.onBegin=({G:C})=>C),w.turn.onEnd===void 0&&(w.turn.onEnd=({G:C})=>C),w.turn.endIf===void 0&&(w.turn.endIf=()=>!1),w.turn.onMove===void 0&&(w.turn.onMove=({G:C})=>C),w.turn.stages===void 0&&(w.turn.stages={}),Ws(w.turn,!0);for(const C in w.turn.stages){const L=w.turn.stages[C].moves||{};for(const b of Object.keys(L)){const Z=S+"."+C+"."+b;a[Z]=L[b],u.add(b)}}if(w.wrapped={onBegin:f(w.onBegin,Re.PHASE_ON_BEGIN),onEnd:f(w.onEnd,Re.PHASE_ON_END),endIf:d(w.endIf)},w.turn.wrapped={onMove:f(w.turn.onMove,Re.TURN_ON_MOVE),onBegin:f(w.turn.onBegin,Re.TURN_ON_BEGIN),onEnd:f(w.turn.onEnd,Re.TURN_ON_END),endIf:d(w.turn.endIf)},typeof w.next!="function"){const{next:C}=w;w.next=()=>C||null}w.wrapped.next=d(w.next)}function v(S){return S.phase?l[S.phase]:l[""]}function k(S){return S}function T(S,w){const C=new Set,D=new Set;for(let L=0;L<w.length;L++){const{fn:b,arg:Z,...X}=w[L];if(b===z){D.clear();const Se=S.ctx.phase;if(C.has(Se)){const at={...S.ctx,phase:null};return{...S,ctx:at}}C.add(Se)}const pe=[];if(S=b(S,{...X,arg:Z,next:pe}),b===R)break;const ne=N(S);if(ne){w.push({fn:R,arg:ne,turn:S.ctx.turn,phase:S.ctx.phase,automatic:!0});continue}const ae=j(S);if(ae){w.push({fn:z,arg:ae,turn:S.ctx.turn,phase:S.ctx.phase,automatic:!0});continue}if([k,O,_].includes(b)){const Se=P(S);if(Se){w.push({fn:K,arg:Se,turn:S.ctx.turn,phase:S.ctx.phase,automatic:!0});continue}}w.push(...pe)}return S}function m(S,{next:w}){return w.push({fn:h}),S}function h(S,{next:w}){let{G:C,ctx:D}=S;return C=v(D).wrapped.onBegin(S),w.push({fn:y}),{...S,G:C,ctx:D}}function y(S,{currentPlayer:w}){let{ctx:C}=S;const D=v(C);w?(C={...C,currentPlayer:w},D.turn.activePlayers&&(C=Ys(C,D.turn.activePlayers))):C=Av(S,D.turn);const L=C.turn+1;C={...C,turn:L,numMoves:0,_prevActivePlayers:[]};const b=D.turn.wrapped.onBegin({...S,ctx:C});return{...S,G:b,ctx:C,_undo:[],_redo:[]}}function x(S,{arg:w,next:C,phase:D}){const L=v({phase:D});let{ctx:b}=S;if(w&&w.next)if(w.next in l)b={...b,phase:w.next};else return ie("invalid phase: "+w.next),S;else b={...b,phase:L.wrapped.next(S)||null};return S={...S,ctx:b},C.push({fn:h}),S}function E(S,{arg:w,currentPlayer:C,next:D}){let{G:L,ctx:b}=S;const Z=v(b),{endPhase:X,ctx:pe}=Iv(S,C,Z.turn,w);return b=pe,S={...S,G:L,ctx:b},X?D.push({fn:z,turn:b.turn,phase:b.phase}):D.push({fn:y,currentPlayer:b.currentPlayer}),S}function O(S,{arg:w,playerID:C}){if((typeof w=="string"||w===Ks.NULL)&&(w={stage:w}),typeof w!="object")return S;Ws(w);let{ctx:D}=S,{activePlayers:L,_activePlayersMinMoves:b,_activePlayersMaxMoves:Z,_activePlayersNumMoves:X}=D;return w.stage!==void 0&&(L===null&&(L={}),L[C]=w.stage,X[C]=0,w.minMoves&&(b===null&&(b={}),b[C]=w.minMoves),w.maxMoves&&(Z===null&&(Z={}),Z[C]=w.maxMoves)),D={...D,activePlayers:L,_activePlayersMinMoves:b,_activePlayersMaxMoves:Z,_activePlayersNumMoves:X},{...S,ctx:D}}function _(S,{arg:w}){return{...S,ctx:Ys(S.ctx,w)}}function N(S){return g.endIf(S)}function j(S){return v(S.ctx).wrapped.endIf(S)}function P(S){const w=v(S.ctx),C=S.ctx.numMoves||0;return w.turn.maxMoves&&C>=w.turn.maxMoves?!0:w.turn.wrapped.endIf(S)}function R(S,{arg:w,phase:C}){S=z(S,{}),w===void 0&&(w=!0),S={...S,ctx:{...S.ctx,gameover:w}};const D=g.onEnd(S);return{...S,G:D}}function z(S,{arg:w,next:C,turn:D,automatic:L}){S=K(S,{turn:D,force:!0,automatic:!0});const{phase:b,turn:Z}=S.ctx;if(C&&C.push({fn:x,arg:w,phase:b}),b===null)return S;const pe=v(S.ctx).wrapped.onEnd(S),ne={...S.ctx,phase:null},ae=Gr("endPhase",w),{_stateID:Se}=S,at={action:ae,_stateID:Se,turn:Z,phase:b};L&&(at.automatic=!0);const bt=[...S.deltalog||[],at];return{...S,G:pe,ctx:ne,deltalog:bt}}function K(S,{arg:w,next:C,turn:D,force:L,automatic:b,playerID:Z}){if(D!==S.ctx.turn)return S;const{currentPlayer:X,numMoves:pe,phase:ne,turn:ae}=S.ctx,Se=v(S.ctx),at=pe||0;if(!L&&Se.turn.minMoves&&at<Se.turn.minMoves)return`${Se.turn.minMoves}`,S;const bt=Se.turn.wrapped.onEnd(S);C&&C.push({fn:E,arg:w,currentPlayer:X});let yt={...S.ctx,activePlayers:null};if(w&&w.remove){Z=Z||X;const $t=yt.playOrder.filter(Co=>Co!=Z),Eo=yt.playOrderPos>$t.length-1?0:yt.playOrderPos;if(yt={...yt,playOrder:$t,playOrderPos:Eo},$t.length===0)return C.push({fn:z,turn:ae,phase:ne}),S}const _r=Gr("endTurn",w),{_stateID:Ti}=S,En={action:_r,_stateID:Ti,turn:ae,phase:ne};b&&(En.automatic=!0);const Er=[...S.deltalog||[],En];return{...S,G:bt,ctx:yt,deltalog:Er,_undo:[],_redo:[]}}function V(S,{arg:w,next:C,automatic:D,playerID:L}){L=L||S.ctx.currentPlayer;let{ctx:b,_stateID:Z}=S,{activePlayers:X,_activePlayersNumMoves:pe,_activePlayersMinMoves:ne,_activePlayersMaxMoves:ae,phase:Se,turn:at}=b;const bt=X!==null&&L in X,yt=v(b);if(!w&&bt){const $t=yt.turn.stages[X[L]];$t&&$t.next&&(w=$t.next)}if(C&&C.push({fn:O,arg:w,playerID:L}),!bt)return S;const _r=pe[L]||0;if(ne&&ne[L]&&_r<ne[L])return`${ne[L]}`,S;X={...X},delete X[L],ne&&(ne={...ne},delete ne[L]),ae&&(ae={...ae},delete ae[L]),b=jv({...b,activePlayers:X,_activePlayersMinMoves:ne,_activePlayersMaxMoves:ae});const En={action:Gr("endStage",w),_stateID:Z,turn:at,phase:Se};D&&(En.automatic=!0);const Er=[...S.deltalog||[],En];return{...S,ctx:b,deltalog:Er}}function le(S,w,C){const D=v(S),L=D.turn.stages,{activePlayers:b}=S;if(b&&b[C]!==void 0&&b[C]!==Ks.NULL&&L[b[C]]!==void 0&&L[b[C]].moves!==void 0){const X=L[b[C]].moves;if(w in X)return X[w]}else if(D.moves){if(w in D.moves)return D.moves[w]}else if(w in e)return e[w];return null}function Oe(S,w){const{playerID:C,type:D}=w,{currentPlayer:L,activePlayers:b,_activePlayersMaxMoves:Z}=S.ctx,X=le(S.ctx,D,C),pe=!X||typeof X=="function"||X.noLimit!==!0;let{numMoves:ne,_activePlayersNumMoves:ae}=S.ctx;pe&&(C===L&&ne++,b&&ae[C]++),S={...S,ctx:{...S.ctx,numMoves:ne,_activePlayersNumMoves:ae}},Z&&ae[C]>=Z[C]&&(S=V(S,{playerID:C,automatic:!0}));const at=v(S.ctx).turn.wrapped.onMove({...S,playerID:C});return S={...S,G:at},T(S,[{fn:k}])}function oe(S,w,C){return T(S,[{fn:V,arg:C,playerID:w}])}function I(S,w){return T(S,[{fn:V,playerID:w}])}function B(S,w,C){return T(S,[{fn:_,arg:C}])}function F(S,w,C){return T(S,[{fn:z,phase:S.ctx.phase,turn:S.ctx.turn,arg:{next:C}}])}function te(S){return T(S,[{fn:z,phase:S.ctx.phase,turn:S.ctx.turn}])}function M(S,w,C){return T(S,[{fn:K,turn:S.ctx.turn,phase:S.ctx.phase,arg:C}])}function Y(S,w,C){return T(S,[{fn:K,turn:S.ctx.turn,phase:S.ctx.phase,force:!0,arg:C}])}function W(S,w,C){return T(S,[{fn:R,turn:S.ctx.turn,phase:S.ctx.phase,arg:C}])}const H={endStage:I,setStage:oe,endTurn:M,pass:Y,endPhase:te,setPhase:F,endGame:W,setActivePlayers:B},Q=[];s.endTurn!==!1&&Q.push("endTurn"),s.pass!==!1&&Q.push("pass"),s.endPhase!==!1&&Q.push("endPhase"),s.setPhase!==!1&&Q.push("setPhase"),s.endGame!==!1&&Q.push("endGame"),s.setActivePlayers!==!1&&Q.push("setActivePlayers"),s.endStage!==!1&&Q.push("endStage"),s.setStage!==!1&&Q.push("setStage");function ee(S,w){const{type:C,playerID:D,args:L}=w.payload;return typeof H[C]!="function"?S:H[C](S,D,...Array.isArray(L)?L:[L])}function ce(S,w,C){return w.activePlayers?C in w.activePlayers:w.currentPlayer===C}return{ctx:S=>({numPlayers:S,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:S})].map((w,C)=>C+""),playOrderPos:0,phase:c,activePlayers:null}),init:S=>T(S,[{fn:m}]),isPlayerActive:ce,eventHandlers:H,eventNames:Object.keys(H),enabledEventNames:Q,moveMap:a,moveNames:[...u.values()],processMove:Oe,processEvent:ee,getMove:le}}function Fv(e){return e.processMove!==void 0}function So(e){if(Fv(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Bv(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(Op(i)&&(i=i.move),i instanceof Function){const s=fp(i,Re.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...yr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return ie(`invalid move object: ${r.type}`),n.G}}}function Op(e){return e instanceof Object&&e.move!==void 0}var ca;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(ca||(ca={}));var De;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(De||(De={}));const qi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,Uv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function gf(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function il(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function sl(e,t,n){const[r,i]=dp(e,n);return i?[r,$e(t,De.PluginActionInvalid,i)]:[r]}function Tp(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function $e(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const jp=e=>t=>n=>{const r=t(n);switch(n.type){case vo:return r;default:{const[,i]=Tp(e.getState());return typeof i<"u"?(e.dispatch(cp()),{...r,transients:i}):r}}};function Mu({game:e,isClient:t}){return e=So(e),(n=null,r)=>{let[i]=Tp(n);switch(r.type){case vo:return i;case mo:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return ie("cannot call event after game end"),$e(i,De.GameOver);if(qi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return ie(`disallowed event: ${r.payload.type}`),$e(i,De.InactivePlayer);i=la(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=sl(s,i,{game:e}),o||(s=gf(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case wi:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return ie(`disallowed move: ${r.payload.type}`),$e(i,De.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return ie("cannot make move after game end"),$e(i,De.GameOver);if(qi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return ie(`disallowed move: ${r.payload.type}`),$e(i,De.InactivePlayer);i=la(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===wn)return ie(`invalid move: ${r.payload.type} args: ${r.payload.args}`),$e(i,De.InvalidMove);const a={...i,G:l};if(t&&Ov(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=sl(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=il(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=sl(i,s,{game:e}),u||(i=gf(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case xu:case Eu:case _u:return r.state;case go:{if(i={...i,deltalog:[]},e.disableUndo)return ie("Undo is not enabled"),$e(i,De.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return ie("No moves to undo"),$e(i,De.ActionInvalid);const c=l[l.length-1],f=l[l.length-2];if(qi(r)&&r.payload.playerID!==c.playerID)return ie("Cannot undo other players' moves"),$e(i,De.ActionInvalid);if(c.moveType){const d=e.flow.getMove(f.ctx,c.moveType,c.playerID);if(!Uv(s,o,d))return ie("Move cannot be undone"),$e(i,De.ActionInvalid)}return i=il(i,r),{...i,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case yo:{if(i={...i,deltalog:[]},e.disableUndo)return ie("Redo is not enabled"),$e(i,De.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return ie("No moves to redo"),$e(i,De.ActionInvalid);const a=o[0];return qi(r)&&r.payload.playerID!==a.playerID?(ie("Cannot redo other players' moves"),$e(i,De.ActionInvalid)):(i=il(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case tp:return Cv(i,r,{game:e});case Cu:{const s=i,o=JSON.parse(JSON.stringify(s)),l=Ou.applyPatch(o,r.patch);return l.some(u=>u!==null)?(ie(`Patch ${JSON.stringify(r.patch)} apply failed`),$e(s,ca.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(h){typeof h!="function"&&(h=new Function(""+h));for(var y=new Array(arguments.length-1),x=0;x<y.length;x++)y[x]=arguments[x+1];var E={callback:h,args:y};return r[n]=E,o(n),n++}function a(h){delete r[h]}function u(h){var y=h.callback,x=h.args;switch(x.length){case 0:y();break;case 1:y(x[0]);break;case 2:y(x[0],x[1]);break;case 3:y(x[0],x[1],x[2]);break;default:y.apply(t,x);break}}function c(h){if(i)setTimeout(c,0,h);else{var y=r[h];if(y){i=!0;try{u(y)}finally{a(h),i=!1}}}}function f(){o=function(h){process.nextTick(function(){c(h)})}}function d(){if(e.postMessage&&!e.importScripts){var h=!0,y=e.onmessage;return e.onmessage=function(){h=!1},e.postMessage("","*"),e.onmessage=y,h}}function g(){var h="setImmediate$"+Math.random()+"$",y=function(x){x.source===e&&typeof x.data=="string"&&x.data.indexOf(h)===0&&c(+x.data.slice(h.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(x){e.postMessage(h+x,"*")}}function v(){var h=new MessageChannel;h.port1.onmessage=function(y){var x=y.data;c(x)},o=function(y){h.port2.postMessage(y)}}function k(){var h=s.documentElement;o=function(y){var x=s.createElement("script");x.onreadystatechange=function(){c(y),x.onreadystatechange=null,h.removeChild(x),x=null},h.appendChild(x)}}function T(){o=function(h){setTimeout(c,0,h)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?f():d()?g():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?k():T(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?Hr:self);class Hv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return np(s.move,s.args,r);if("event"in s)return Gr(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=ep(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Vv=25;class hs extends Hv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Mu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((d,g)=>{const v=a[g];return v.checker(i,s)?d+v.weight:d},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Vv&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),f=this.playout(c);this.backpropagate(c,f),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function ki(e){"@babel/helpers - typeof";return ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ki(e)}function Wv(e,t){if(ki(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ki(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yv(e){var t=Wv(e,"string");return ki(t)=="symbol"?t:t+""}function Kv(e,t,n){return(t=Yv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vf(Object(n),!0).forEach(function(r){Kv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Je(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Sf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),kf=function(){return Math.random().toString(36).substring(7).split("").join(".")},xf={INIT:"@@redux/INIT"+kf(),REPLACE:"@@redux/REPLACE"+kf()};function Qv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Du(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Je(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Je(1));return n(Du)(e,t)}if(typeof e!="function")throw new Error(Je(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(Je(3));return s}function f(k){if(typeof k!="function")throw new Error(Je(4));if(a)throw new Error(Je(5));var T=!0;return u(),l.push(k),function(){if(T){if(a)throw new Error(Je(6));T=!1,u();var h=l.indexOf(k);l.splice(h,1),o=null}}}function d(k){if(!Qv(k))throw new Error(Je(7));if(typeof k.type>"u")throw new Error(Je(8));if(a)throw new Error(Je(9));try{a=!0,s=i(s,k)}finally{a=!1}for(var T=o=l,m=0;m<T.length;m++){var h=T[m];h()}return k}function g(k){if(typeof k!="function")throw new Error(Je(10));i=k,d({type:xf.REPLACE})}function v(){var k,T=f;return k={subscribe:function(h){if(typeof h!="object"||h===null)throw new Error(Je(11));function y(){h.next&&h.next(c())}y();var x=T(y);return{unsubscribe:x}}},k[Sf]=function(){return this},k}return d({type:xf.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:g},r[Sf]=v,r}function Ap(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Ip(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Je(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=Ap.apply(void 0,l)(i.dispatch),wf(wf({},i),{},{dispatch:s})}}}function Mp({game:e,numPlayers:t,setupData:n}){e=So(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=Pv(i,{game:e}),i=la(i,{game:e,playerID:void 0});const s=yr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=dp(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Ru=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class qv extends Ru{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Jv=e=>new qv(e);class Xv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Zv=new Xv;function fa(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Lu(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=wv[e](l,a,fa(r,n,s),i);n.dispatch(u)};return o}const Gv=Lu.bind(null,"makeMove"),e0=Lu.bind(null,"gameEvent"),t0=Lu.bind(null,"plugin");class n0{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=So(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=Zv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Mu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=Mp({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(lp(this.initialState))},this.undo=()=>{const g=ap(fa(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=up(fa(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const d=Ip(jp,()=>g=>v=>{const k=g(v);return this.notifySubscribers(),k},g=>v=>k=>{const T=g.getState(),m=v(k);return!("clientOnly"in k)&&k.type!==vo&&this.transport.sendAction(T,k),m},g=>v=>k=>{const T=v(k),m=g.getState();switch(k.type){case wi:case mo:case go:case yo:{const h=m.deltalog;this.log=[...this.log,...h];break}case xu:{this.log=[];break}case Cu:case Eu:{let h=-1;this.log.length>0&&(h=this.log[this.log.length-1]._stateID);let y=k.deltalog||[];y=y.filter(x=>x._stateID>h),this.log=[...this.log,...y];break}case _u:{this.initialState=k.initialState,this.log=k.log||[];break}}return T});a=a!==void 0?Ap(d,a):d,this.store=Du(this.reducer,this.initialState,a),i||(i=Jv),this.transport=i({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:ev(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=ip(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=op(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=sp(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:hp(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Gv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=e0(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=t0(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function r0(e){return new n0(e)}const Dp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},Cn=e=>Dp(e,"game name"),Dr=e=>Dp(e,"match ID"),Rr=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class i0 extends Error{constructor(t,n){super(t),this.details=n}}class s0{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new i0(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){Cn(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return Cn(t),Dr(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return Cn(t),Rr(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return Cn(t),Dr(n),Rr(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){Cn(t),Dr(n),Rr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){Cn(t),Dr(n),Rr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return Cn(t),Dr(n),Rr(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var Rp={exports:{}},o0="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",l0=o0,a0=l0;function Lp(){}function bp(){}bp.resetWarningCache=Lp;var u0=function(){function e(r,i,s,o,l,a){if(a!==a0){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:bp,resetWarningCache:Lp};return n.PropTypes=n,n};Rp.exports=u0();var c0=Rp.exports;const Tt=$f(c0);var Gt={},bu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */bu.parse=p0;bu.serialize=m0;var f0=decodeURIComponent,d0=encodeURIComponent,h0=/; */,Ji=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function p0(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(h0),s=r.decode||f0,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=y0(c,s))}}return n}function m0(e,t,n){var r=n||{},i=r.encode||d0;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Ji.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Ji.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Ji.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Ji.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function y0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _f=Object.getOwnPropertySymbols,g0=Object.prototype.hasOwnProperty,v0=Object.prototype.propertyIsEnumerable;function w0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function S0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var k0=S0()?Object.assign:function(e,t){for(var n,r=w0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)g0.call(n,o)&&(r[o]=n[o]);if(_f){i=_f(n);for(var l=0;l<i.length;l++)v0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},x0={};Object.defineProperty(Gt,"__esModule",{value:!0});var _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Gt.load=Fp;Gt.loadAll=Up;Gt.select=Hp;Gt.save=Vp;Gt.remove=Wp;Gt.setRawCookie=$u;Gt.plugToRequest=Yp;var E0=bu,kr=zp(E0),C0=k0,$p=zp(C0);function zp(e){return e&&e.__esModule?e:{default:e}}var ko=typeof document>"u"||typeof process<"u"&&x0&&!1,Ge={},Sn=void 0;function Bp(){return Sn&&!Sn.headersSent}function Fp(e,t){var n=ko?Ge:kr.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Up(e){var t=ko?Ge:kr.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Hp(e){var t=ko?Ge:kr.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,$p.default)({},n,i)},{}):t:{}}function Vp(e,t,n){Ge[e]=t,(typeof t>"u"?"undefined":_0(t))==="object"&&(Ge[e]=JSON.stringify(t)),ko||(document.cookie=kr.default.serialize(e,Ge[e],n)),Bp()&&Sn.cookie&&Sn.cookie(e,t,n)}function Wp(e,t){delete Ge[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,$p.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=kr.default.serialize(e,"",t)),Bp()&&Sn.clearCookie&&Sn.clearCookie(e,t)}function $u(e){e?Ge=kr.default.parse(e):Ge={}}function Yp(e,t){return e.cookie?Ge=e.cookie:e.cookies?Ge=e.cookies:e.headers&&e.headers.cookie?$u(e.headers.cookie):Ge={},Sn=t,function(){Sn=null,Ge={}}}var Ef=Gt.default={setRawCookie:$u,load:Fp,loadAll:Up,select:Hp,save:Vp,remove:Wp,plugToRequest:Yp},Qs;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Qs||(Qs={}));function Pn(e){return e.type()===Qs.SYNC}class P0{type(){return Qs.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const N0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},O0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=N0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=Mp({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},Cf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),T0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class j0{constructor(t,n,r,i){this.game=So(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(Pn(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=T0(t),l=r;let a;if(Pn(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return ie(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){ie(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Mu({game:this.game}),c=Ip(jp),f=Du(u,a,c);if(o.type==go||o.type==yo){const m=a.ctx.activePlayers!==null,h=a.ctx.currentPlayer===i;if(!m&&!h||m&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){ie(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){ie(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const d=o.type==wi?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==wi&&!d){ie(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(d&&Op(d)&&d.ignoreStaleStateID)){ie(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const g=f.getState();f.dispatch(o),a=f.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...k}=a;let T;if(s&&(s.gameover===void 0||s.gameover===null)&&(T={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(T.gameover=a.ctx.gameover)),Pn(this.storageAPI))this.storageAPI.setState(l,k,v),T&&this.storageAPI.setMetadata(l,T);else{const m=[this.storageAPI.setState(l,k,v)];T&&m.push(this.storageAPI.setMetadata(l,T)),await Promise.all(m)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=Pn(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:f}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:f}))return{error:"unauthorized"};if(a===void 0){const v=O0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,f=v.metadata,this.subscribeCallback({state:a,matchID:t}),Pn(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:f}):await this.storageAPI.createMatch(s,{initialState:u,metadata:f})}const d=f?Cf(f):void 0,g={state:a,log:c,filteredMetadata:d,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(Pn(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return ie(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return ie(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=Cf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),Pn(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const Xi=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:hp(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),A0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=ol(o.deltalog,t),a=Xi(e,t,o),u=o._stateID,c=Xi(e,t,s),f=Ou.createPatch(c,a);return{type:"patch",args:[r,i,u,f,l]}}case"update":{const[r,i]=n.args,s=ol(i.deltalog,t),o=Xi(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=Xi(e,t,i.state),o=ol(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function ol(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const Lt=Object.create(null);Lt.open="0";Lt.close="1";Lt.ping="2";Lt.pong="3";Lt.message="4";Lt.upgrade="5";Lt.noop="6";const ps=Object.create(null);Object.keys(Lt).forEach(e=>{ps[Lt[e]]=e});const da={type:"error",data:"parser error"},Kp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Qp=typeof ArrayBuffer=="function",qp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,zu=({type:e,data:t},n,r)=>Kp&&t instanceof Blob?n?r(t):Pf(t,r):Qp&&(t instanceof ArrayBuffer||qp(t))?n?r(t):Pf(new Blob([t]),r):r(Lt[e]+(t||"")),Pf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Nf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ll;function I0(e,t){if(Kp&&e.data instanceof Blob)return e.data.arrayBuffer().then(Nf).then(t);if(Qp&&(e.data instanceof ArrayBuffer||qp(e.data)))return t(Nf(e.data));zu(e,!1,n=>{ll||(ll=new TextEncoder),t(ll.encode(n))})}const Of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ur=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Of.length;e++)Ur[Of.charCodeAt(e)]=e;const M0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Ur[e.charCodeAt(r)],o=Ur[e.charCodeAt(r+1)],l=Ur[e.charCodeAt(r+2)],a=Ur[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},D0=typeof ArrayBuffer=="function",Bu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Jp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:R0(e.substring(1),t)}:ps[n]?e.length>1?{type:ps[n],data:e.substring(1)}:{type:ps[n]}:da},R0=(e,t)=>{if(D0){const n=M0(e);return Jp(n,t)}else return{base64:!0,data:e}},Jp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Xp="",L0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{zu(s,!1,l=>{r[o]=l,++i===n&&t(r.join(Xp))})})},b0=(e,t)=>{const n=e.split(Xp),r=[];for(let i=0;i<n.length;i++){const s=Bu(n[i],t);if(r.push(s),s.type==="error")break}return r};function $0(){return new TransformStream({transform(e,t){I0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let al;function Zi(e){return e.reduce((t,n)=>t+n.length,0)}function Gi(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function z0(e,t){al||(al=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Zi(n)<1)break;const a=Gi(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Zi(n)<2)break;const a=Gi(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Zi(n)<8)break;const a=Gi(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(da);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Zi(n)<i)break;const a=Gi(n,i);l.enqueue(Bu(s?a:al.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(da);break}}}})}const Zp=4;function _e(e){if(e)return B0(e)}function B0(e){for(var t in _e.prototype)e[t]=_e.prototype[t];return e}_e.prototype.on=_e.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};_e.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};_e.prototype.off=_e.prototype.removeListener=_e.prototype.removeAllListeners=_e.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};_e.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};_e.prototype.emitReserved=_e.prototype.emit;_e.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};_e.prototype.hasListeners=function(e){return!!this.listeners(e).length};const xo=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ft=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),F0="arraybuffer";function Gp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const U0=ft.setTimeout,H0=ft.clearTimeout;function _o(e,t){t.useNativeTimers?(e.setTimeoutFn=U0.bind(ft),e.clearTimeoutFn=H0.bind(ft)):(e.setTimeoutFn=ft.setTimeout.bind(ft),e.clearTimeoutFn=ft.clearTimeout.bind(ft))}const V0=1.33;function W0(e){return typeof e=="string"?Y0(e):Math.ceil((e.byteLength||e.size)*V0)}function Y0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function em(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function K0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Q0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class q0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Fu extends _e{constructor(t){super(),this.writable=!1,_o(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new q0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Bu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=K0(t);return n.length?"?"+n:""}}class J0 extends Fu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};b0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,L0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=em()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let tm=!1;try{tm=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const X0=tm;function Z0(){}class G0 extends J0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Rt extends _e{constructor(t,n,r){super(),this.createRequest=t,_o(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Gp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Rt.requestsCount++,Rt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Z0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Rt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Rt.requestsCount=0;Rt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Tf);else if(typeof addEventListener=="function"){const e="onpagehide"in ft?"pagehide":"unload";addEventListener(e,Tf,!1)}}function Tf(){for(let e in Rt.requests)Rt.requests.hasOwnProperty(e)&&Rt.requests[e].abort()}const ew=function(){const e=nm({xdomain:!1});return e&&e.responseType!==null}();class tw extends G0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=ew&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Rt(nm,this.uri(),t)}}function nm(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||X0))return new XMLHttpRequest}catch{}if(!t)try{return new ft[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const rm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class nw extends Fu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=rm?{}:Gp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;zu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&xo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=em()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const ul=ft.WebSocket||ft.MozWebSocket;class rw extends nw{createSocket(t,n,r){return rm?new ul(t,n,r):n?new ul(t,n):new ul(t)}doWrite(t,n){this.ws.send(n)}}class iw extends Fu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=z0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=$0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&xo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const sw={websocket:rw,webtransport:iw,polling:tw},ow=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,lw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ha(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=ow.exec(e||""),s={},o=14;for(;o--;)s[lw[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=aw(s,s.path),s.queryKey=uw(s,s.query),s}function aw(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function uw(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const pa=typeof addEventListener=="function"&&typeof removeEventListener=="function",ms=[];pa&&addEventListener("offline",()=>{ms.forEach(e=>e())},!1);class yn extends _e{constructor(t,n){if(super(),this.binaryType=F0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=ha(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=ha(n.host).host);_o(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Q0(this.opts.query)),pa&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ms.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Zp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&yn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",yn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=W0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,xo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(yn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),pa&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ms.indexOf(this._offlineEventListener);r!==-1&&ms.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}yn.protocol=Zp;class cw extends yn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;yn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;yn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=n.name,s(),this.emitReserved("upgradeError",d)};function l(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let fw=class extends cw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>sw[i]).filter(i=>!!i)),super(t,r)}};function dw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=ha(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const hw=typeof ArrayBuffer=="function",pw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,im=Object.prototype.toString,mw=typeof Blob=="function"||typeof Blob<"u"&&im.call(Blob)==="[object BlobConstructor]",yw=typeof File=="function"||typeof File<"u"&&im.call(File)==="[object FileConstructor]";function Uu(e){return hw&&(e instanceof ArrayBuffer||pw(e))||mw&&e instanceof Blob||yw&&e instanceof File}function ys(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(ys(e[n]))return!0;return!1}if(Uu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ys(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ys(e[n]))return!0;return!1}function gw(e){const t=[],n=e.data,r=e;return r.data=ma(n,t),r.attachments=t.length,{packet:r,buffers:t}}function ma(e,t){if(!e)return e;if(Uu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=ma(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=ma(e[r],t));return n}return e}function vw(e,t){return e.data=ya(e.data,t),delete e.attachments,e}function ya(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ya(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ya(e[n],t));return e}const sm=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ww=5;var J;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(J||(J={}));class Sw{constructor(t){this.replacer=t}encode(t){return(t.type===J.EVENT||t.type===J.ACK)&&ys(t)?this.encodeAsBinary({type:t.type===J.EVENT?J.BINARY_EVENT:J.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===J.BINARY_EVENT||t.type===J.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=gw(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Hu extends _e{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===J.BINARY_EVENT;r||n.type===J.BINARY_ACK?(n.type=r?J.EVENT:J.ACK,this.reconstructor=new kw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Uu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(J[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===J.BINARY_EVENT||r.type===J.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Hu.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case J.CONNECT:return qs(n);case J.DISCONNECT:return n===void 0;case J.CONNECT_ERROR:return typeof n=="string"||qs(n);case J.EVENT:case J.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&sm.indexOf(n[0])===-1);case J.ACK:case J.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class kw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=vw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function xw(e){return typeof e=="string"}const _w=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Ew(e){return e===void 0||_w(e)}function qs(e){return Object.prototype.toString.call(e)==="[object Object]"}function Cw(e,t){switch(e){case J.CONNECT:return t===void 0||qs(t);case J.DISCONNECT:return t===void 0;case J.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&sm.indexOf(t[0])===-1);case J.ACK:return Array.isArray(t);case J.CONNECT_ERROR:return typeof t=="string"||qs(t);default:return!1}}function Pw(e){return xw(e.nsp)&&Ew(e.id)&&Cw(e.type,e.data)}const Nw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Hu,Encoder:Sw,get PacketType(){return J},isPacketValid:Pw,protocol:ww},Symbol.toStringTag,{value:"Module"}));function St(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Ow=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class om extends _e{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[St(t,"open",this.onopen.bind(this)),St(t,"packet",this.onpacket.bind(this)),St(t,"error",this.onerror.bind(this)),St(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(Ow.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:J.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:J.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case J.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case J.EVENT:case J.BINARY_EVENT:this.onevent(t);break;case J.ACK:case J.BINARY_ACK:this.onack(t);break;case J.DISCONNECT:this.ondisconnect();break;case J.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:J.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:J.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function xr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}xr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};xr.prototype.reset=function(){this.attempts=0};xr.prototype.setMin=function(e){this.ms=e};xr.prototype.setMax=function(e){this.max=e};xr.prototype.setJitter=function(e){this.jitter=e};class ga extends _e{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,_o(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new xr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||Nw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new fw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=St(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=St(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(St(t,"ping",this.onping.bind(this)),St(t,"data",this.ondata.bind(this)),St(t,"error",this.onerror.bind(this)),St(t,"close",this.onclose.bind(this)),St(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){xo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new om(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Lr={};function gs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=dw(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Lr[i]&&s in Lr[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new ga(r,t):(Lr[i]||(Lr[i]=new ga(r,t)),a=Lr[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(gs,{Manager:ga,Socket:om,io:gs,connect:gs});class lm extends P0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class Tw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class jw extends lm{constructor(t="bgio"){super();const n=r=>new Tw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function Aw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class Iw extends j0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const f in n){const d=n[f];o[f]=new d({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:f,...d})=>{const g=s[f];g!==void 0&&g(a(f,d))},a=A0(t),u={send:l,sendAll:f=>{for(const d in s)l({playerID:d,...f})}},c=i?new jw(r):new lm;super(t,c,u),this.connect=(f,d)=>{s[f]=d},this.subscribe(({state:f,matchID:d})=>{if(!n)return;const g=Aw(f,o);g!==null&&setTimeout(async()=>{const v=await o[g].play(f,g);await this.onUpdate(v.action,f._stateID,d,v.action.payload.playerID)},100)})}}class Mw extends Ru{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const jf=new Map;function am({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=jf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new Iw({game:s,bots:e,persist:t,storageKey:n}),jf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new Mw({master:o,...r})}}const Af=gs;class Dw extends Ru{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=Af(t+this.gameName,this.socketOpts)}else this.socket=Af("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function If({server:e,socketOpts:t}={}){return n=>new Dw({server:e,socketOpts:t,...n})}function um(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>U.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends U.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=r0({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return U.createElement(l);let f=null;return i&&(f=U.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),U.createElement("div",{className:"bgio-client"},f)}},t.propTypes={matchID:Tt.string,playerID:Tt.string,credentials:Tt.string,debug:Tt.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class Rw{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new s0({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function Lw(e){return new Rw(e)}class cm extends U.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return U.createElement("div",null,U.createElement("p",{className:"phase-title"},"Choose a player name:"),U.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),U.createElement("span",{className:"buttons"},U.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),U.createElement("br",null),U.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,U.createElement("br",null)))}}cm.defaultProps={playerName:""};class bw extends U.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>U.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>U.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>U.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>U.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?U.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),U.createElement("tr",{key:"line-"+t.matchID},U.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),U.createElement("td",{key:"cell-status-"+t.matchID},n),U.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),U.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class $w extends U.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>U.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>U.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return U.createElement("div",null,U.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),U.createElement("span",null,"Players:"),U.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),U.createElement("span",{className:"buttons"},U.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Ve;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(Ve||(Ve={}));class fm extends U.Component{constructor(t){super(t),this.state={phase:Ve.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=Lw({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:Ve.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Ve.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?If({server:this.props.gameServer}):If()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=hs;s=am({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Ve.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Ve.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return U.createElement(bw,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=Ef.load("lobbyState")||{};t.phase&&t.phase===Ve.PLAY&&(t.phase=Ve.LIST),t.phase&&t.phase!==Ve.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||Ve.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};Ef.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):U.createElement("div",{id:"lobby-view",style:{padding:50}},U.createElement("div",{className:this._getPhaseVisibility(Ve.ENTER)},U.createElement(cm,{key:i,playerName:i,onEnter:this._enterLobby})),U.createElement("div",{className:this._getPhaseVisibility(Ve.LIST)},U.createElement("p",null,"Welcome, ",i),U.createElement("div",{className:"phase-title",id:"match-creation"},U.createElement("span",null,"Create a match:"),U.createElement($w,{games:t,createMatch:this._createMatch})),U.createElement("p",{className:"phase-title"},"Join a match:"),U.createElement("div",{id:"instances"},U.createElement("table",null,U.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),U.createElement("span",{className:"error-msg"},r,U.createElement("br",null))),U.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),U.createElement("div",{className:this._getPhaseVisibility(Ve.PLAY)},o&&U.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),U.createElement("div",{className:"buttons",id:"match-exit"},U.createElement("button",{onClick:this._exitMatch},"Exit match"))),U.createElement("div",{className:"buttons",id:"lobby-exit"},U.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}fm.propTypes={gameComponents:Tt.array.isRequired,lobbyServer:Tt.string,gameServer:Tt.string,debug:Tt.bool,clientFactory:Tt.func,refreshInterval:Tt.number};fm.defaultProps={debug:!1,clientFactory:um,refreshInterval:2e3};const nt=["Hearts","Diamonds","Clubs","Spades"],dm=40,hm=5,zw=["","","","","",""],pm={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function Bw(e,t){const n={};if(e.deckType===36)for(const r of nt)n[r]=[{suit:r,value:1}];else for(const r of nt){const i=Array.from({length:hm},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function mm(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of nt){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),f=t[o]||[];r[o]=[...f,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function es(e,t){return t.deckType!==36||e<2||e>5}function ym(e,t,n,r,i){const s=[];for(const a of nt)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])es(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])es(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])es(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>es(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function gm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function Fw(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function Uw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function Hw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Vw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function va(e){return e.players.every(t=>t.hand.length===1)}function vm(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=dm&&!e.claimedJobs.includes(r)&&Ww(e,r,n)}function Ww(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);e.revealedJobs[t]=null,n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Yw(e){if(!Vw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function wa(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=dm||(t.miceVariant?Kw(e,n,r,t):t.deckType===36?Qw(e,n,r,t):qw(e,n,r,t))}function Vu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Js(e,`${r.suit}-${r.value}`),!0;return!1}function Wu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function Yu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Js(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function xi(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Kw(e,t,n,r){if(Vu(e,n,r))return;const i=Wu(n,e.trump,r),s=Yu(n,e.trump,r),o=wm(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),Xs(e,o[0]),s&&o.length>1&&(Xs(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${xi(o[1][1])}`)))}function Qw(e,t,n,r){if(Vu(e,n,r))return;const i=Wu(n,e.trump,r),s=Yu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=wm(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(f=>f.suit===t);for(const f of c)l.some(([g,v])=>g===u&&v.suit===f.suit&&v.value===f.value)||l.push([u,f])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((f,d)=>d.value-f.value),Xs(e,[u,c[0]]),s&&c.length>1&&(Xs(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${xi(c[1])}`)))}function qw(e,t,n,r){if(Vu(e,n,r))return;const i=Wu(n,e.trump,r),s=Yu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(d=>d.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(d=>d.suit!==t);const u=(o.plot.revealed||[]).filter(d=>d.suit===t).sort((d,g)=>g.value-d.value);if(u.length===0)continue;const c=u[0],f=o.plot.revealed.findIndex(d=>d.suit===c.suit&&d.value===c.value);if(o.plot.revealed.splice(f,1),Js(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${xi(c)}`),s&&u.length>1){const d=u[1],g=o.plot.revealed.findIndex(v=>v.suit===d.suit&&v.value===d.value);o.plot.revealed.splice(g,1),Js(e,`${d.suit}-${d.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${xi(d)}`)}}}function wm(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const f of c.revealed||[])f.suit===t&&a.push({card:f,stack:c,location:"revealed"});for(const f of c.hidden||[])f.suit===t&&a.push({card:f,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const f=o.plot.hidden.findIndex(d=>d.suit===c.suit&&d.value===c.value);o.plot.hidden.splice(f,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:f,location:d}of a){const g=d==="hidden"?f.hidden:f.revealed,v=g.findIndex(k=>k.suit===c.suit&&k.value===c.value);v!==-1&&(g.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((d,g)=>g.value>d.value?g:d);if(l.some(d=>d.suit===c.suit&&d.value===c.value)){const d=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(d,1),o.plot.revealed.push(c),s.push([o,c])}else{const d=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(d){const{stack:g,location:v}=d,k=v==="hidden"?g.hidden:g.revealed,T=k.findIndex(m=>m.suit===c.suit&&m.value===c.value);T!==-1&&(k.splice(T,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function Xs(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Js(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${xi(n)}`)}function Jw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function Xw(e,t){const n=Jw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function Zw(e,t){const n=Xw(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function Sa(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of nt)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>hm)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of nt)e.workHours[o]=0;const{jobs:r,isFamine:i}=mm(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of nt)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.trumpSelector=(e.trumpSelector+1)%e.numPlayers,e.workersDeck=ym(e.players,e.jobBuckets,e.exiled,t,n),gm(e.players,e.workersDeck,e.isFamine),!1}function Sm(e,t){const n=nt.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function Mf(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function km(e,t,n){var f,d,g;const r=e.workHours[t]||0;if((f=e.claimedJobs)==null?void 0:f.includes(t))return-10;const s=Math.max(0,40-r),o=s<20?(20-s)*2:0,l=e.players[n],c=[...((d=l.plot)==null?void 0:d.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(v=>v.suit===t).length*15;return o+c}function Gw(e,t,n){var f,d,g,v,k;const r=e.players[t],i=r.hand[n];let s=0;const o=e.currentTrick.length===0,l=(d=(f=e.currentTrick[0])==null?void 0:f[1])==null?void 0:d.suit,a=e.currentTrick.map(([,T])=>T),u=e1(e,i,a),c=t1(e,t);if(o){const T=km(e,i.suit,t);s+=T*.3,i.value>=8&&i.value<=11&&(s+=5),i.suit===e.trump&&e.trickCount<2&&(s-=10)}else if(c>0&&u>.5?s+=c*u*20:c<0&&u<.5&&(s+=Math.abs(c)*(1-u)*15),i.suit!==l){const m=[...((g=r.plot)==null?void 0:g.revealed)||[],...((v=r.plot)==null?void 0:v.hidden)||[]].filter(h=>h.suit===i.suit).length;(k=e.claimedJobs)!=null&&k.includes(i.suit)||(s+=m*3)}return s+=Math.random()*2,s}function e1(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let i=n[0];for(const s of n)(s.suit===e.trump&&i.suit!==e.trump||s.suit===i.suit&&s.value>i.value)&&(i=s);return t.suit===e.trump&&i.suit!==e.trump?.8:t.suit===i.suit&&t.value>i.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function t1(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,s])=>s.suit))];for(const s of r){const o=km(e,s,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function n1(e,t,n){var f,d;let r=0;const i=e.players[n],s=i.hand||[],o=s.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=s.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((f=i.plot)==null?void 0:f.revealed)||[],...((d=i.plot)==null?void 0:d.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function r1(e,t,n){var s,o,l,a,u,c,f;const r=[],i=e.players[n];if(t.phase==="planning"&&!e.trump)for(const d of nt){const g=n1(e,d,n);r.push({move:"setTrump",args:[d],score:g})}else if(t.phase==="trick")for(let d=0;d<i.hand.length;d++){const g=i.hand[d],v=(o=(s=e.currentTrick[0])==null?void 0:s[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&i.hand.some(m=>m.suit===v)&&g.suit!==v)continue;const k=Gw(e,n,d);r.push({move:"playCard",args:[d],score:k})}else if(t.phase==="assignment"&&n===e.lastWinner){const d=[...new Set(e.lastTrick.map(([,_])=>_.suit))],g=e.players[n],v=[...((l=g.plot)==null?void 0:l.revealed)||[],...((a=g.plot)==null?void 0:a.hidden)||[]],k=e.lastTrick.reduce((_,[,N])=>{var j;return _+Mf(N,e.trump,(j=e.variants)==null?void 0:j.nomenclature)},0);let T=d[0],m=-1/0;for(const _ of d){const N=e.workHours[_]||0;if((u=e.claimedJobs)==null?void 0:u.includes(_)){m<0&&(m=0,T=_);continue}const P=N+k;let R=0;P>=40?(R+=200,R-=(P-40)*2):(R+=P,P>=30?R+=30:P>=20&&(R+=15));const z=v.filter(K=>K.suit===_).length;R+=z*20,R>m&&(m=R,T=_)}let h=0;const y={};for(const[,_]of e.lastTrick){const N=Mf(_,e.trump,(c=e.variants)==null?void 0:c.nomenclature);let j=_.suit,P=-1/0;for(const R of d){const z=e.workHours[R]||0,K=(f=e.claimedJobs)==null?void 0:f.includes(R);let V=0;if(K)V=0;else{const le=z+N;le>=40?V+=150:(V+=le*.5,le>=30&&(V+=15));const Oe=v.filter(oe=>oe.suit===R).length;V+=Oe*10}V>P&&(P=V,j=R)}y[`${_.suit}-${_.value}`]=j,h+=P}const x=e.pendingAssignments||{};let E;if(m>=h){E={};for(const[,_]of e.lastTrick)E[`${_.suit}-${_.value}`]=T}else E=y;let O=!1;for(const[_,N]of Object.entries(E))x[_]!==N&&(O=!0,r.push({move:"assignCard",args:[_,N],score:100}));O||r.push({move:"submitAssignments",args:[],score:100})}else t.phase;return r.sort((d,g)=>g.score-d.score),r}function Df(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function i1({ctx:e,random:t},n){const r={...pm,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...zw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Df(0,!0,""));else{const f=Math.floor(t.Number()*s.length),d=s.splice(f,1)[0];o.push(Df(c,!1,d))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:Bw(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1,trumpSelector:Math.floor(t.Number()*i)};for(const c of nt)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=mm(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=ym(l.players,l.jobBuckets,l.exiled,r,t),gm(l.players,l.workersDeck,l.isFamine),l}function s1({G:e,random:t},n){n&&nt.includes(n)?e.trump=n:Sm(e,t)}function o1({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!Fw(e,i,r))return wn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function l1({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function a1({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return wn;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return wn;if(vm(e,e.pendingAssignments,e.variants),e.pendingAssignments={},va(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),wa(e,e.variants),Sa(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function u1({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return wn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return wn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function c1({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const f1={name:"kolkhoz",setup:i1,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:s1},turn:{order:{first:({G:e})=>e.trumpSelector,next:()=>{}}},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"trumpSelector:",e.trumpSelector,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&Sm(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:o1},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=Uw(e);if(n!==null){Hw(e,n);const r=Yw(e.lastTrick);if(r?(vm(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&va(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),wa(e,e.variants),Sa(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=va(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:l1,submitAssignments:a1},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),wa(e,e.variants),Sa(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:u1,confirmSwap:c1},turn:{order:{first:()=>0,next:()=>{}}},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return Zw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),i=r1(e,t,r);return i.slice(0,Math.min(3,i.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function Ut(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function d1(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function et({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,f=s?"assets/cards/back.svg":Ut(e);return t!==0||n!==0?p.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[p.jsx("image",{href:f,width:r,height:c,x:-r/2,y:-c/2}),l&&p.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#d4a857",strokeWidth:"3",rx:"8"})]}):p.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:p.jsx("img",{src:f,alt:s?"Card back":`${d1(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function h1({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s,className:o=""}){return!e||e.length===0?p.jsx("div",{className:`hand empty ${o}`,children:"No cards in hand"}):p.jsx("div",{className:`hand ${o}`,children:e.map((l,a)=>{const u=!s||s.includes(a);return p.jsx("div",{className:`hand-card ${u&&n?"playable":""} ${u?"":"invalid"}`,style:{zIndex:a},onClick:()=>{n&&u&&t(a)},children:p.jsx(et,{card:l,width:130,highlight:u&&n,dimmed:!u&&n})},`${l.suit}-${l.value}-${a}`)})})}const Rf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function p1({player:e,position:t,isActive:n,isBrigadeLeader:r,playerIndex:i,scale:s=1,isHuman:o=!1}){var I,B,F,te;const{x:l,y:a}=t,u=((I=e.hand)==null?void 0:I.length)||0,c=((B=e.plot)==null?void 0:B.revealed)||[],f=((te=(F=e.plot)==null?void 0:F.hidden)==null?void 0:te.length)||0,d=c.reduce((M,Y)=>M+Y.value,0)+f,g=46*s,v=g*1.4,k=26*s,T=52*s,m=8*s,h=6*s;if(o){const M=235*s,Y=130*s,W=l-M/2,H=a-Y/2,Q=c.length+f,ee=Q>0?(Math.min(4,Q)-1)*k+g:0,ce=l-ee/2,S=a-v/2+10*s;return p.jsxs("g",{className:"player-area human-plot",children:[p.jsx("rect",{x:W,y:H,width:M,height:Y,fill:"none",stroke:"#d4a857",strokeWidth:2*s,strokeDasharray:`${6*s},${4*s}`,rx:4*s}),p.jsx("text",{x:W+8*s,y:H+16*s,textAnchor:"start",fill:"#d4a857",fontSize:11*s,fontFamily:"'Oswald', sans-serif",children:""}),c.map((w,C)=>p.jsx("image",{href:Ut(w),x:ce+C*k,y:S,width:g,height:v},`plot-${C}`)),Array.from({length:f}).map((w,C)=>p.jsx("image",{href:"assets/cards/back.svg",x:ce+(c.length+C)*k,y:S,width:g,height:v,opacity:.7},`hidden-${C}`))]})}const y=235*s,x=130*s,E=l-y/2,O=a-x/2,_=O+m,N=_+T/2,j=_+T+h,R=E+m,z=R+T+6*s,K=65*s,V=z+K,le=V+6*s,Oe=Math.min(4,u)*k+g-k,oe=l-Oe/2;return p.jsxs("g",{className:`player-area ${n?"active":""}`,children:[p.jsx("rect",{x:E,y:O,width:y,height:x,fill:n?"rgba(196, 30, 58, 0.25)":"rgba(20,20,20,0.9)",stroke:n?"#d4a857":"#444",strokeWidth:n?2:1,rx:4*s}),p.jsx("image",{href:Rf[(i-1)%Rf.length],x:R,y:_,width:T,height:T,style:{imageRendering:"pixelated"}}),p.jsxs("text",{x:z,y:N-6*s,textAnchor:"start",fill:n?"#d4a857":"#e8dcc4",fontSize:12*s,fontWeight:n?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[e.name,r&&" "]}),p.jsx("text",{x:z,y:N+10*s,textAnchor:"start",fill:d>0?"#c41e3a":"#888",fontSize:11*s,fontFamily:"'Oswald', sans-serif",children:d>0?`${d} pts`:`${u} cards`}),p.jsx("line",{x1:V,y1:_+4*s,x2:V,y2:_+T-4*s,stroke:"#555",strokeWidth:1}),c.slice(0,2).map((M,Y)=>p.jsx("image",{href:Ut(M),x:le+Y*k,y:_+(T-v)/2,width:g,height:v},`plot-${Y}`)),c.length===0&&f>0&&p.jsx("image",{href:"assets/cards/back.svg",x:le,y:_+(T-v)/2,width:g,height:v,opacity:.5}),Array.from({length:Math.min(4,u)}).map((M,Y)=>p.jsx("image",{href:"assets/cards/back.svg",x:oe+Y*k,y:j,width:g,height:v},`hand-${Y}`)),u>4&&p.jsxs("text",{x:oe+4*k+g/2,y:j+v/2,textAnchor:"middle",fill:"#888",fontSize:9*s,children:["+",u-4]})]})}const Lf=["Hearts","Diamonds","Clubs","Spades"];function m1({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450,scale:s=1,year:o,trump:l,phase:a,isMyTurn:u,currentPlayerName:c,showInfo:f=!1,players:d,currentPlayer:g,brigadeLeader:v,displayMode:k="game",workHours:T,claimedJobs:m,jobBuckets:h,revealedJobs:y,exiled:x,playerPlot:E}){const O={Hearts:"",Diamonds:"",Clubs:"",Spades:""},_=1100*s,N=540*s,j=220*s,P=j*1.4,R=265*s,z=85*s,K=M=>{const W=[3,0,1,2][M];return{x:-1.5*R+W*R,y:z}},V=6*s,le=10*s,Oe=6*s,oe=i-N/2+38*s,I=24*s,B=20*s,F=r-_/2+20*s,te=r+_/2-20*s;return p.jsxs("g",{className:"trick-area",children:[p.jsx("rect",{x:r-_/2,y:i-N/2,width:_,height:N,fill:"#1a1a1a",stroke:"#d4a857",strokeWidth:3*s,rx:le}),p.jsx("rect",{x:r-_/2+V,y:i-N/2+V,width:_-V*2,height:N-V*2,fill:"none",stroke:"#8b0000",strokeWidth:2*s,rx:Oe}),p.jsxs("g",{className:"trick-info-bar",children:[f?p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:F,y:oe,textAnchor:"start",fill:"#d4a857",fontSize:I,fontFamily:"'Oswald', sans-serif",children:[p.jsxs("title",{children:["Year ",o," of 5"]})," ",o,"/5"]}),p.jsxs("text",{x:F+100*s,y:oe,textAnchor:"start",fill:"#888",fontSize:I,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Trump suit"}),":"]}),p.jsx("text",{x:F+175*s,y:oe,textAnchor:"start",fill:l==="Hearts"||l==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:B,fontFamily:"'Oswald', sans-serif",children:l?O[l]:"?"})]}):null,e.length>0&&p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:F+200*s,y:oe,textAnchor:"start",fill:"#888",fontSize:I,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Lead suit"}),":"]}),p.jsx("text",{x:F+268*s,y:oe,textAnchor:"start",fill:e[0][1].suit==="Hearts"||e[0][1].suit==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:B,children:O[e[0][1].suit]})]}),f&&T&&p.jsx("g",{className:"job-progress-bar",children:Lf.map((M,Y)=>{const W=T[M]||0,H=m==null?void 0:m.includes(M),Q=M===l,ee=70*s,S=F+320*s+Y*ee;return p.jsxs("g",{children:[p.jsx("text",{x:S,y:oe,textAnchor:"middle",fill:M==="Hearts"||M==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:B,opacity:Q?1:.7,children:O[M]}),p.jsx("text",{x:S+16*s,y:oe,textAnchor:"start",fill:H?"#4CAF50":"#888",fontSize:B,fontFamily:"'Oswald', sans-serif",children:H?"":`${W}/40`})]},M)})}),f&&p.jsxs("text",{x:te,y:oe,textAnchor:"end",fill:u?"#4CAF50":"#e8dcc4",fontSize:I,fontWeight:u?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:u?"Your turn":`${c}'s turn`}),u?" ":c]})]}),k==="game"&&p.jsxs(p.Fragment,{children:[Array.from({length:t}).map((M,Y)=>{if(e.some(([Q])=>Q===Y))return null;const H=K(Y);return p.jsx("rect",{x:r+H.x-j/2,y:i+H.y-P/2,width:j,height:P,fill:"none",stroke:"rgba(255,255,255,0.15)",strokeWidth:1*s,strokeDasharray:`${4*s},${4*s}`,rx:4*s},`slot-${Y}`)}),e.map(([M,Y],W)=>{const H=K(M);return p.jsx(et,{card:Y,x:r+H.x,y:i+H.y,width:j},`${Y.suit}-${Y.value}`)}),d&&[0,1,2,3].map(M=>{const Y=K(M),W=i-N/2+115*s;return p.jsx(p1,{player:d[M],position:{x:r+Y.x,y:W},isActive:g===M,isBrigadeLeader:v===M,playerIndex:M,scale:s,isHuman:M===0},`player-${M}`)})]}),k==="jobs"&&p.jsxs("g",{className:"jobs-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),Lf.map((M,Y)=>{const W=(T==null?void 0:T[M])||0,H=m==null?void 0:m.includes(M),Q=M===l,ee=(h==null?void 0:h[M])||[],ce=y==null?void 0:y[M],S=Array.isArray(ce)?ce:ce?[ce]:[],w=95*s,C=100*s,D=i-N/2+95*s+Y*C,L=r-_/2+20*s,b=_-40*s,Z=55*s,X=Z*1.4,pe=42*s,ne=L+140*s;return p.jsxs("g",{className:`job-row ${Q?"trump":""}`,children:[p.jsx("rect",{x:L,y:D,width:b,height:w,fill:Q?"rgba(196, 30, 58, 0.15)":"rgba(30,30,30,0.5)",stroke:H?"#4CAF50":Q?"#c41e3a":"#444",strokeWidth:H?2:1,rx:4*s}),p.jsx("text",{x:L+25*s,y:D+35*s,textAnchor:"middle",fill:M==="Hearts"||M==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:28*s,children:O[M]}),p.jsx("text",{x:L+25*s,y:D+65*s,textAnchor:"middle",fill:H?"#4CAF50":"#e8dcc4",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:H?"":`${W}/40`}),S.length>0&&!H?p.jsx("image",{href:Ut(S[0]),x:L+55*s,y:D+(w-X)/2,width:Z,height:X}):p.jsx("image",{href:"assets/cards/back.svg",x:L+55*s,y:D+(w-X)/2,width:Z,height:X,opacity:H?.3:.5}),p.jsx("line",{x1:L+120*s,y1:D+10*s,x2:L+120*s,y2:D+w-10*s,stroke:"#555",strokeWidth:1}),ee.slice(0,16).map((ae,Se)=>p.jsx("image",{href:Ut(ae),x:ne+Se*pe,y:D+(w-X)/2,width:Z,height:X},`assigned-${Se}`)),ee.length>16&&p.jsxs("text",{x:ne+16*pe+Z/2,y:D+w/2+5*s,textAnchor:"middle",fill:"#888",fontSize:11*s,children:["+",ee.length-16]}),ee.length===0&&p.jsx("rect",{x:ne,y:D+(w-X)/2,width:Z,height:X,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]},M)})]}),k==="gulag"&&p.jsxs("g",{className:"gulag-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),[1,2,3,4,5].map((M,Y)=>{const W=(x==null?void 0:x[M])||[],H=M===o,Q=M<o,ee=80*s,ce=85*s,S=i-N/2+90*s+Y*ce,w=r-_/2+20*s,C=_-40*s,D=50*s,L=D*1.4,b=38*s,Z=w+80*s,X=pe=>{const[ne,ae]=pe.split("-");return{suit:ne,value:parseInt(ae,10)}};return p.jsxs("g",{className:`year-row ${H?"current":""}`,children:[p.jsx("rect",{x:w,y:S,width:C,height:ee,fill:H?"rgba(196, 30, 58, 0.2)":Q?"rgba(50,50,50,0.3)":"rgba(30,30,30,0.5)",stroke:H?"#c41e3a":"#444",strokeWidth:H?2:1,rx:4*s}),p.jsx("text",{x:w+35*s,y:S+ee/2+10*s,textAnchor:"middle",fill:H?"#c41e3a":Q?"#666":"#e8dcc4",fontSize:28*s,fontFamily:"'Russo One', 'Oswald', sans-serif",fontWeight:H?"bold":"normal",children:M}),W.length>0&&p.jsxs("g",{children:[p.jsx("circle",{cx:w+60*s,cy:S+20*s,r:12*s,fill:"#c41e3a"}),p.jsx("text",{x:w+60*s,y:S+24*s,textAnchor:"middle",fill:"#fff",fontSize:11*s,fontWeight:"bold",children:W.length})]}),W.length>0?W.slice(0,15).map((pe,ne)=>{const ae=X(pe);return p.jsx("image",{href:Ut(ae),x:Z+ne*b,y:S+(ee-L)/2,width:D,height:L},ne)}):p.jsx("rect",{x:Z,y:S+(ee-L)/2,width:D,height:L,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s}),W.length>15&&p.jsxs("text",{x:Z+15*b+D/2,y:S+ee/2+5*s,textAnchor:"middle",fill:"#888",fontSize:11*s,children:["+",W.length-15]})]},M)})]}),k==="plot"&&p.jsxs("g",{className:"plot-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),(()=>{const M=(E==null?void 0:E.revealed)||[],Y=120*s,W=i-N/2+95*s,H=r-_/2+20*s,Q=_-40*s,ee=70*s,ce=ee*1.4,S=55*s,w=H+120*s;return p.jsxs("g",{className:"revealed-row",children:[p.jsx("rect",{x:H,y:W,width:Q,height:Y,fill:"rgba(76, 175, 80, 0.1)",stroke:"#4CAF50",strokeWidth:1,rx:4*s}),p.jsx("text",{x:H+15*s,y:W+35*s,textAnchor:"start",fill:"#4CAF50",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:""}),p.jsx("text",{x:H+15*s,y:W+55*s,textAnchor:"start",fill:"#888",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:"(Revealed)"}),p.jsx("line",{x1:H+100*s,y1:W+10*s,x2:H+100*s,y2:W+Y-10*s,stroke:"#555",strokeWidth:1}),M.map((C,D)=>p.jsx("image",{href:Ut(C),x:w+D*S,y:W+(Y-ce)/2,width:ee,height:ce,className:"plot-card","data-type":"revealed","data-index":D},`revealed-${D}`)),M.length===0&&p.jsx("rect",{x:w,y:W+(Y-ce)/2,width:ee,height:ce,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]})})(),(()=>{const M=(E==null?void 0:E.hidden)||[],Y=120*s,W=i-N/2+230*s,H=r-_/2+20*s,Q=_-40*s,ee=70*s,ce=ee*1.4,S=55*s,w=H+120*s;return p.jsxs("g",{className:"hidden-row",children:[p.jsx("rect",{x:H,y:W,width:Q,height:Y,fill:"rgba(196, 30, 58, 0.1)",stroke:"#c41e3a",strokeWidth:1,rx:4*s}),p.jsx("text",{x:H+15*s,y:W+35*s,textAnchor:"start",fill:"#c41e3a",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:""}),p.jsx("text",{x:H+15*s,y:W+55*s,textAnchor:"start",fill:"#888",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:"(Hidden)"}),p.jsx("line",{x1:H+100*s,y1:W+10*s,x2:H+100*s,y2:W+Y-10*s,stroke:"#555",strokeWidth:1}),M.map((C,D)=>p.jsx("image",{href:Ut(C),x:w+D*S,y:W+(Y-ce)/2,width:ee,height:ce,className:"plot-card","data-type":"hidden","data-index":D},`hidden-${D}`)),M.length===0&&p.jsx("rect",{x:w,y:W+(Y-ce)/2,width:ee,height:ce,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]})})(),(()=>{const M=(E==null?void 0:E.revealed)||[],Y=(E==null?void 0:E.hidden)||[],W=M.reduce((Q,ee)=>Q+ee.value,0)+Y.reduce((Q,ee)=>Q+ee.value,0),H=i-N/2+365*s;return p.jsxs("text",{x:r,y:H,textAnchor:"middle",fill:W>0?"#c41e3a":"#888",fontSize:18*s,fontFamily:"'Oswald', sans-serif",children:["Total: ",W," points (",M.length+Y.length," cards)"]})})()]})]})}const y1=["Hearts","Diamonds","Clubs","Spades"],bf={Hearts:"",Diamonds:"",Clubs:"",Spades:""};function g1({lastTrick:e,pendingAssignments:t,onAssign:n,onSubmit:r,svgRef:i,centerY:s=470,scale:o=1}){const[l,a]=q.useState(null),[u,c]=q.useState(null),[f,d]=q.useState([]),g=q.useRef(null),v=q.useMemo(()=>[...new Set(e.map(([,E])=>E.suit))],[e]),k=q.useCallback(()=>{if(!(i!=null&&i.current))return;const O=i.current.getBoundingClientRect(),_={width:1920,height:1080},N=O.width/_.width,j=O.height/_.height,P=540*o,R=1100*o,z=960,K=100*o,V=95*o,le=y1.map((Oe,oe)=>{const I=s-P/2+95*o+oe*K,B=z-R/2+20*o,F=R-40*o;return{suit:Oe,left:O.left+B*N,top:O.top+I*j,width:F*N,height:V*j,centerX:O.left+(B+F/2)*N,centerY:O.top+(I+V/2)*j}});d(le)},[i,s,o]);q.useEffect(()=>(k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)),[k]);const T=E=>E.touches&&E.touches.length>0?{x:E.touches[0].clientX,y:E.touches[0].clientY}:{x:E.clientX,y:E.clientY},m=(E,O)=>{for(const _ of f)if(E>=_.left&&E<=_.left+_.width&&O>=_.top&&O<=_.top+_.height&&v.includes(_.suit))return _.suit;return null},h=(E,O,_)=>{_.preventDefault();const N=T(_),P=_.currentTarget.getBoundingClientRect();a({cardKey:E,card:O,position:N,offset:{x:N.x-(P.left+P.width/2),y:N.y-(P.top+P.height/2)},origin:{x:P.left+P.width/2,y:P.top+P.height/2},hoverZone:null})};q.useEffect(()=>{if(!l)return;const E=_=>{const N=T(_),j=m(N.x,N.y);a(P=>({...P,position:N,hoverZone:j}))},O=_=>{const N=T(_),j=m(N.x,N.y);if(j&&v.includes(j)){const P=f.find(R=>R.suit===j);c({card:l.card,cardKey:l.cardKey,targetSuit:j,from:{x:N.x-l.offset.x,y:N.y-l.offset.y},to:{x:P.centerX,y:P.centerY}})}a(null)};return document.addEventListener("mousemove",E),document.addEventListener("mouseup",O),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",O),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",O),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",O)}},[l,f,v]),q.useEffect(()=>{if(!u)return;const E=setTimeout(()=>{n(u.cardKey,u.targetSuit),c(null)},300);return()=>clearTimeout(E)},[u,n]);const y=Object.keys(t||{}).length===e.length,x=E=>(u==null?void 0:u.cardKey)===E?"flying":(l==null?void 0:l.cardKey)===E?"dragging":t!=null&&t[E]?"assigned":"available";return p.jsxs("div",{className:"assignment-drag-drop",ref:g,children:[p.jsxs("div",{className:"assignment-header",children:[p.jsx("h3",{children:"Assign Cards to Jobs"}),p.jsx("p",{children:"Drag each card to a job pile"})]}),p.jsx("div",{className:"drop-zones",children:f.map(E=>{const O=v.includes(E.suit),_=(l==null?void 0:l.hoverZone)===E.suit;return p.jsx("div",{className:`drop-zone ${O?"valid":"invalid"} ${_?"hover":""}`,style:{left:E.left,top:E.top,width:E.width,height:E.height},children:_&&p.jsxs("span",{className:"drop-hint",children:[bf[E.suit]," Drop here"]})},E.suit)})}),p.jsx("div",{className:"drag-cards",children:e.map(([E,O])=>{const _=`${O.suit}-${O.value}`,N=x(_);return N==="flying"||N==="dragging"?p.jsx("div",{className:"drag-card placeholder",children:p.jsx(et,{card:O,width:90,dimmed:!0})},_):p.jsxs("div",{className:`drag-card ${N}`,onMouseDown:j=>h(_,O,j),onTouchStart:j=>h(_,O,j),children:[p.jsx(et,{card:O,width:90}),N==="assigned"&&p.jsx("div",{className:"assigned-badge",children:bf[t[_]]})]},_)})}),l&&p.jsx("div",{className:"drag-ghost",style:{left:l.position.x-l.offset.x,top:l.position.y-l.offset.y},children:p.jsx(et,{card:l.card,width:90})}),u&&p.jsx("div",{className:"flying-card",style:{"--from-x":`${u.from.x}px`,"--from-y":`${u.from.y}px`,"--to-x":`${u.to.x}px`,"--to-y":`${u.to.y}px`},children:p.jsx(et,{card:u.card,width:60})}),p.jsx("button",{className:"assignment-submit",onClick:r,disabled:!y,children:y?"Submit Assignments":`Assign ${e.length-Object.keys(t||{}).length} more`})]})}function v1({hand:e,plot:t,onSwap:n,onConfirm:r,svgRef:i,centerY:s=470,scale:o=1,year:l}){var _,N;const[a,u]=q.useState(null),[c,f]=q.useState(null),[d,g]=q.useState(null),[v,k]=q.useState({revealed:null,hidden:null}),T=q.useRef(null),m=q.useCallback(()=>{if(!(i!=null&&i.current))return;const P=i.current.getBoundingClientRect(),R={width:1920,height:1080},z=P.width/R.width,K=P.height/R.height,V=540*o,le=1100*o,Oe=960,oe=120*o,I=s-V/2+95*o,B=Oe-le/2+20*o,F=le-40*o,te=s-V/2+230*o;k({revealed:{left:P.left+B*z,top:P.top+I*K,width:F*z,height:oe*K,centerX:P.left+(B+F/2)*z,centerY:P.top+(I+oe/2)*K},hidden:{left:P.left+B*z,top:P.top+te*K,width:F*z,height:oe*K,centerX:P.left+(B+F/2)*z,centerY:P.top+(te+oe/2)*K}})},[i,s,o]);q.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[m]);const h=j=>j.touches&&j.touches.length>0?{x:j.touches[0].clientX,y:j.touches[0].clientY}:{x:j.clientX,y:j.clientY},y=(j,P)=>{for(const[R,z]of Object.entries(v))if(z&&j>=z.left&&j<=z.left+z.width&&P>=z.top&&P<=z.top+z.height)return R;return null},x=(j,P,R)=>{(a==null?void 0:a.type)===j&&(a==null?void 0:a.index)===P?u(null):u({type:j,index:P,card:R})},E=(j,P,R)=>{R.preventDefault();const z=h(R),V=R.currentTarget.getBoundingClientRect();f({source:{type:"hand",index:j},card:P,position:z,offset:{x:z.x-(V.left+V.width/2),y:z.y-(V.top+V.height/2)},origin:{x:V.left+V.width/2,y:V.top+V.height/2},hoverZone:null})};q.useEffect(()=>{if(!c)return;const j=R=>{const z=h(R),K=y(z.x,z.y);f(V=>({...V,position:z,hoverZone:K}))},P=R=>{const z=h(R),K=y(z.x,z.y);if(K&&a&&a.type===K){const V=v[K];g({card:c.card,from:{x:z.x-c.offset.x,y:z.y-c.offset.y},to:{x:V.centerX,y:V.centerY},swapData:{plotIdx:a.index,handIdx:c.source.index,plotType:K}}),u(null)}else if(K){const V=K==="revealed"?t==null?void 0:t.revealed:t==null?void 0:t.hidden;if(V&&V.length>0){const le=v[K];g({card:c.card,from:{x:z.x-c.offset.x,y:z.y-c.offset.y},to:{x:le.centerX,y:le.centerY},swapData:{plotIdx:0,handIdx:c.source.index,plotType:K}})}}f(null)};return document.addEventListener("mousemove",j),document.addEventListener("mouseup",P),document.addEventListener("touchmove",j,{passive:!1}),document.addEventListener("touchend",P),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",P),document.removeEventListener("touchmove",j),document.removeEventListener("touchend",P)}},[c,v,a,t]),q.useEffect(()=>{if(!d)return;const j=setTimeout(()=>{const{plotIdx:P,handIdx:R,plotType:z}=d.swapData;n(P,R,z),g(null)},300);return()=>clearTimeout(j)},[d,n]);const O=(j,P)=>(a==null?void 0:a.type)===j&&(a==null?void 0:a.index)===P;return p.jsxs("div",{className:"swap-drag-drop",ref:T,children:[p.jsxs("div",{className:"swap-header",children:[p.jsxs("h3",{children:["Swap Phase - Year ",l]}),p.jsx("p",{children:a?`Selected: ${a.type} card - drag a hand card to swap`:"Click a plot card to select, then drag a hand card to swap"})]}),p.jsxs("div",{className:"drop-zones",children:[v.revealed&&p.jsx("div",{className:`drop-zone revealed ${(c==null?void 0:c.hoverZone)==="revealed"?"hover":""} ${(a==null?void 0:a.type)==="revealed"?"target-selected":""}`,style:{left:v.revealed.left,top:v.revealed.top,width:v.revealed.width,height:v.revealed.height}}),v.hidden&&p.jsx("div",{className:`drop-zone hidden ${(c==null?void 0:c.hoverZone)==="hidden"?"hover":""} ${(a==null?void 0:a.type)==="hidden"?"target-selected":""}`,style:{left:v.hidden.left,top:v.hidden.top,width:v.hidden.width,height:v.hidden.height}})]}),p.jsxs("div",{className:"plot-card-overlays",children:[(_=t==null?void 0:t.revealed)==null?void 0:_.map((j,P)=>{if(!v.revealed)return null;const R=70*o,z=55*o,V=v.revealed.left+120*o*(v.revealed.width/(1060*o))+P*z*(v.revealed.width/(1060*o)),le=v.revealed.top+(v.revealed.height-R*1.4)/2;return p.jsx("div",{className:`plot-card-overlay ${O("revealed",P)?"selected":""}`,style:{left:V,top:le,width:R*(v.revealed.width/(1060*o)),height:R*1.4*(v.revealed.height/(120*o))},onClick:()=>x("revealed",P,j)},`revealed-overlay-${P}`)}),(N=t==null?void 0:t.hidden)==null?void 0:N.map((j,P)=>{if(!v.hidden)return null;const R=70*o,z=55*o,V=v.hidden.left+120*o*(v.hidden.width/(1060*o))+P*z*(v.hidden.width/(1060*o)),le=v.hidden.top+(v.hidden.height-R*1.4)/2;return p.jsx("div",{className:`plot-card-overlay ${O("hidden",P)?"selected":""}`,style:{left:V,top:le,width:R*(v.hidden.width/(1060*o)),height:R*1.4*(v.hidden.height/(120*o))},onClick:()=>x("hidden",P,j)},`hidden-overlay-${P}`)})]}),p.jsx("div",{className:"swap-hand-cards",children:e.map((j,P)=>{const R=(c==null?void 0:c.source.index)===P,z=(d==null?void 0:d.swapData.handIdx)===P;return R||z?p.jsx("div",{className:"swap-card placeholder",children:p.jsx(et,{card:j,width:90,dimmed:!0})},`hand-${P}`):p.jsx("div",{className:"swap-card",onMouseDown:K=>E(P,j,K),onTouchStart:K=>E(P,j,K),children:p.jsx(et,{card:j,width:90})},`hand-${P}`)})}),c&&p.jsx("div",{className:"drag-ghost",style:{left:c.position.x-c.offset.x,top:c.position.y-c.offset.y},children:p.jsx(et,{card:c.card,width:90})}),d&&p.jsx("div",{className:"flying-card",style:{"--from-x":`${d.from.x}px`,"--from-y":`${d.from.y}px`,"--to-x":`${d.to.x}px`,"--to-y":`${d.to.y}px`},children:p.jsx(et,{card:d.card,width:60})}),p.jsx("button",{className:"swap-confirm",onClick:r,children:"Done Swapping"})]})}function w1({G:e,ctx:t,moves:n,playerID:r}){var B,F,te,M,Y,W,H,Q,ee,ce,S;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=q.useState(null),[u,c]=q.useState(null),[f,d]=q.useState(null),[g,v]=q.useState(null),[k,T]=q.useState(null),m=w=>T(k===w?null:w),[h,y]=q.useState(!1),x=q.useRef(e.year),E=q.useRef(null),O=1,[_,N]=q.useState([]),j=q.useRef(null),P=q.useRef(o),R=q.useRef(null);q.useEffect(()=>{o==="assignment"&&P.current!=="assignment"&&(R.current={trick:e.lastTrick,winner:e.lastWinner,jobBuckets:JSON.parse(JSON.stringify(e.jobBuckets))}),P.current=o},[o,e.lastTrick,e.lastWinner,e.jobBuckets]),q.useEffect(()=>{var D,L;if(e.lastWinner===i){j.current=e.jobBuckets;return}const w=R.current;if(!w||!j.current){j.current=e.jobBuckets;return}const C=[];for(const b of nt){const Z=((D=j.current[b])==null?void 0:D.length)||0;(((L=e.jobBuckets[b])==null?void 0:L.length)||0)>Z&&e.jobBuckets[b].slice(Z).forEach(ne=>{C.push({card:ne,targetSuit:b})})}if(C.length>0&&w.trick&&E.current){const b=E.current.getBoundingClientRect(),Z=1920,X=1080,pe=b.width/Z,ne=b.height/X,ae=960,Se=470,at=1100,bt=540,yt=265,_r=Pt=>{const ji=[3,0,1,2][Pt],Po=-1.5*yt;return{x:ae+Po+ji*yt,y:Se+85}},Ti=ae-at/2+20,En=Se-bt/2+38,Er=Ti+320,$t=70,Eo={Hearts:0,Diamonds:1,Clubs:2,Spades:3},Co=Pt=>{const Cr=Eo[Pt];return{x:Er+Cr*$t,y:En}},Ku=C.map((Pt,Cr)=>{const ji=w.trick.find(([,Ju])=>Ju.suit===Pt.card.suit&&Ju.value===Pt.card.value),Po=ji?ji[0]:0,Qu=_r(Po),qu=Co(Pt.targetSuit),_m=b.left+Qu.x*pe,Em=b.top+Qu.y*ne,Cm=b.left+qu.x*pe,Pm=b.top+qu.y*ne;return{id:`${Pt.card.suit}-${Pt.card.value}-${Date.now()}-${Cr}`,card:Pt.card,fromX:_m,fromY:Em,toX:Cm,toY:Pm,delay:Cr*100}});N(Ku);const xm=Ku.length*100;setTimeout(()=>{N([]),R.current=null},500+xm)}j.current=e.jobBuckets},[e.jobBuckets,e.lastWinner,i]),q.useEffect(()=>{e.year!==x.current&&(y(!1),x.current=e.year)},[e.year]);const z=w=>{o==="trick"&&s&&n.playCard(w)},K=w=>{o==="planning"&&n.setTrump(w)},V=(w,C)=>{n.assignCard(w,C)},le=()=>{n.submitAssignments()},Oe=()=>{y(!0),n.confirmSwap()},oe=960,I=470;if(t.gameover){const{winner:w,scores:C}=t.gameover;return p.jsxs("div",{className:"game-over",children:[p.jsx("h1",{children:"Game Over!"}),p.jsxs("h2",{children:["Winner: ",e.players[w].name]}),p.jsx("div",{className:"final-scores",children:e.players.map((D,L)=>p.jsxs("div",{className:L===w?"winner":"",children:[D.name,": ",C[L]," points"]},L))}),p.jsx("p",{children:"(Lowest score wins)"})]})}return p.jsxs("div",{className:"game-board",children:[p.jsxs("div",{className:"mobile-nav-bar",children:[p.jsxs("button",{className:`nav-btn ${k==="options"?"active":""}`,onClick:()=>m("options"),title:"Menu",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",children:"Menu"})]}),p.jsxs("button",{className:`nav-btn ${k===null?"active":""}`,onClick:()=>T(null),title:"Brigade (Playing Area)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Brigade",children:""})]}),p.jsxs("button",{className:`nav-btn ${k==="jobs"?"active":""}`,onClick:()=>m("jobs"),title:"Jobs",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Jobs",children:""})]}),p.jsxs("button",{className:`nav-btn ${k==="gulag"?"active":""}`,onClick:()=>m("gulag"),title:"The North (Gulag)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"The North",children:""})]}),p.jsxs("button",{className:`nav-btn ${k==="plot"?"active":""}`,onClick:()=>m("plot"),title:"Your Plot (Cellar)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Plot",children:""})]})]}),k==="options"&&p.jsx("div",{className:"mobile-panel-content",children:p.jsxs("div",{className:"options-panel",children:[p.jsx("h3",{title:"Menu",children:""}),p.jsxs("div",{className:"menu-options",children:[p.jsxs("div",{className:"rules-section",children:[p.jsx("h4",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h5",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h5",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h5",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]})]})]}),p.jsx("button",{className:"menu-btn-action",onClick:()=>window.location.reload(),children:" New Game"})]})]})}),p.jsxs("div",{className:"game-content",children:[o==="planning"&&!e.trump&&p.jsxs("div",{className:"trump-selection",children:[p.jsx("h3",{title:"Select Trump Suit",children:"  "}),p.jsx("div",{className:"suit-buttons",children:nt.map(w=>{const C={Hearts:{ru:"",en:"Hearts (Wheat)"},Diamonds:{ru:"",en:"Diamonds (Beets)"},Clubs:{ru:"",en:"Clubs (Potatoes)"},Spades:{ru:"",en:"Spades (Sunflowers)"}};return p.jsxs("button",{onClick:()=>K(w),className:`suit-btn ${w.toLowerCase()}`,title:C[w].en,children:[S1(w)," ",C[w].ru]},w)})})]}),p.jsxs("div",{className:"svg-container",children:[p.jsx("svg",{ref:E,viewBox:"0 0 1920 1080",className:"board-svg",children:p.jsx(m1,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:oe,centerY:I,scale:O,year:e.year,trump:e.trump,phase:o,isMyTurn:s,currentPlayerName:(B=e.players[t.currentPlayer])==null?void 0:B.name,showInfo:!0,players:e.players,currentPlayer:parseInt(t.currentPlayer,10),brigadeLeader:e.players.findIndex(w=>w.brigadeLeader),displayMode:o==="assignment"?"jobs":o==="swap"?"plot":k==="jobs"?"jobs":k==="gulag"?"gulag":k==="plot"?"plot":"game",workHours:e.workHours,claimedJobs:e.claimedJobs,jobBuckets:e.jobBuckets,revealedJobs:e.revealedJobs,exiled:e.exiled,playerPlot:(F=e.players[i])==null?void 0:F.plot})}),o==="assignment"&&e.lastWinner===i&&p.jsx(g1,{lastTrick:e.lastTrick,pendingAssignments:e.pendingAssignments,onAssign:V,onSubmit:le,svgRef:E,centerY:I,scale:O}),o==="swap"&&!((te=e.swapConfirmed)!=null&&te[i])&&!h&&p.jsx(v1,{hand:((M=e.players[i])==null?void 0:M.hand)||[],plot:(Y=e.players[i])==null?void 0:Y.plot,onSwap:(w,C,D)=>n.swapCard(w,C,D),onConfirm:Oe,svgRef:E,centerY:I,scale:O,year:e.year}),o==="swap"&&(((W=e.swapConfirmed)==null?void 0:W[i])||h)&&p.jsx("div",{className:"swap-ui",children:p.jsx("h3",{children:"Waiting for other players..."})}),p.jsxs("div",{className:"player-plot",children:[p.jsx("h4",{title:"Your Plot (Cellar)",children:""}),p.jsxs("div",{className:"plot-cards",children:[(H=e.players[i])==null?void 0:H.plot.revealed.map((w,C)=>p.jsx(et,{card:w,width:60},`r-${C}`)),(Q=e.players[i])==null?void 0:Q.plot.hidden.map((w,C)=>p.jsxs("div",{className:`hidden-plot-card ${g===C?"revealed":""}`,title:"Tap to reveal",onClick:()=>v(g===C?null:C),children:[p.jsx(et,{card:w,width:60,faceDown:!0,className:"card-back"}),p.jsx(et,{card:w,width:60,className:"card-front"})]},`h-${C}`))]})]}),_.map(w=>p.jsx("div",{className:"ai-flying-card",style:{"--from-x":`${w.fromX}px`,"--from-y":`${w.fromY}px`,"--to-x":`${w.toX}px`,"--to-y":`${w.toY}px`,"--delay":`${w.delay}ms`},children:p.jsx("img",{src:Ut(w.card),alt:`${w.card.value} of ${w.card.suit}`,width:80,height:112})},w.id))]}),p.jsx("div",{className:"hand-area",children:p.jsx(h1,{cards:((ee=e.players[i])==null?void 0:ee.hand)||[],onPlayCard:z,canPlay:o==="trick"&&s,leadSuit:(S=(ce=e.currentTrick[0])==null?void 0:ce[1])==null?void 0:S.suit,trump:e.trump,validIndices:k1(e,i,o),className:o==="assignment"?"shifted":""})})]})]})}function S1(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function k1(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function x1(){const[e,t]=q.useState(!1),[n,r]=q.useState({...pm}),i=q.useMemo(()=>e?um({game:f1,board:w1,numPlayers:4,multiplayer:am({bots:{1:hs,2:hs,3:hs}}),debug:!1}):null,[e]),[s,o]=q.useState(!1);return e?p.jsx(i,{playerID:"0",setupData:{variants:n}}):p.jsxs("div",{className:"lobby",children:[p.jsxs("div",{className:"lobby-left",children:[p.jsxs("div",{className:"lobby-title",children:[p.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),p.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""})]}),p.jsxs("div",{className:"lobby-buttons",children:[p.jsx("button",{className:"start-btn",onClick:()=>t(!0),children:"Start Game"}),p.jsx("button",{className:`rules-btn ${s?"active":""}`,onClick:()=>o(!s),children:s?"Options":"Rules"})]})]}),p.jsx("div",{className:"lobby-right-panel",children:s?p.jsxs("div",{className:"rules-panel",children:[p.jsx("h3",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h4",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h4",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h4",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),p.jsx("h4",{children:"Scoring"}),p.jsx("p",{children:"Cards in your plot = penalty points. Lowest score wins!"})]})]}):p.jsxs("div",{className:"variant-options",children:[p.jsx("h3",{children:"Deck Type"}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),p.jsx("h3",{children:"Variant Rules"}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:l=>r({...n,nomenclature:l.target.checked})}),p.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:l=>r({...n,allowSwap:l.target.checked})}),p.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:l=>r({...n,northernStyle:l.target.checked})}),p.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - No job rewards, all vulnerable"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:l=>r({...n,miceVariant:l.target.checked})}),p.jsx("strong",{title:"Myshi - Mice",children:""})," - All reveal during requisition"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:l=>r({...n,ordenNachalniku:l.target.checked})}),p.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards on job complete"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:l=>r({...n,medalsCount:l.target.checked})}),p.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins add to score"]}),n.deckType===52&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:l=>r({...n,accumulateJobs:l.target.checked})}),p.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Job rewards carry over"]})]})})]})}const _1=Xh(document.getElementById("root"));_1.render(p.jsx(x1,{}));
