(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nf={exports:{}},Ys={},Of={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=Symbol.for("react.element"),fm=Symbol.for("react.portal"),dm=Symbol.for("react.fragment"),hm=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),mm=Symbol.for("react.provider"),ym=Symbol.for("react.context"),gm=Symbol.for("react.forward_ref"),vm=Symbol.for("react.suspense"),wm=Symbol.for("react.memo"),Sm=Symbol.for("react.lazy"),Uu=Symbol.iterator;function km(e){return e===null||typeof e!="object"?null:(e=Uu&&e[Uu]||e["@@iterator"],typeof e=="function"?e:null)}var Tf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Af=Object.assign,If={};function hr(e,t,n){this.props=e,this.context=t,this.refs=If,this.updater=n||Tf}hr.prototype.isReactComponent={};hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jf(){}jf.prototype=hr.prototype;function ma(e,t,n){this.props=e,this.context=t,this.refs=If,this.updater=n||Tf}var ya=ma.prototype=new jf;ya.constructor=ma;Af(ya,hr.prototype);ya.isPureReactComponent=!0;var Hu=Array.isArray,Mf=Object.prototype.hasOwnProperty,ga={current:null},Df={key:!0,ref:!0,__self:!0,__source:!0};function Rf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Mf.call(t,r)&&!Df.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vi,type:e,key:s,ref:o,props:i,_owner:ga.current}}function xm(e,t){return{$$typeof:vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function va(e){return typeof e=="object"&&e!==null&&e.$$typeof===vi}function _m(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vu=/\/+/g;function So(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_m(""+e.key):t.toString(36)}function Qi(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vi:case fm:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+So(o,0):r,Hu(i)?(n="",e!=null&&(n=e.replace(Vu,"$&/")+"/"),Qi(i,t,n,"",function(u){return u})):i!=null&&(va(i)&&(i=xm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Hu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+So(s,l);o+=Qi(s,t,n,a,i)}else if(a=km(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+So(s,l++),o+=Qi(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ci(e,t,n){if(e==null)return e;var r=[],i=0;return Qi(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Em(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var be={current:null},Ji={transition:null},Cm={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:Ji,ReactCurrentOwner:ga};function Lf(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:Ci,forEach:function(e,t,n){Ci(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ci(e,function(){t++}),t},toArray:function(e){return Ci(e,function(t){return t})||[]},only:function(e){if(!va(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};U.Component=hr;U.Fragment=dm;U.Profiler=pm;U.PureComponent=ma;U.StrictMode=hm;U.Suspense=vm;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cm;U.act=Lf;U.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Af({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ga.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Mf.call(t,a)&&!Df.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:vi,type:e.type,key:i,ref:s,props:r,_owner:o}};U.createContext=function(e){return e={$$typeof:ym,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mm,_context:e},e.Consumer=e};U.createElement=Rf;U.createFactory=function(e){var t=Rf.bind(null,e);return t.type=e,t};U.createRef=function(){return{current:null}};U.forwardRef=function(e){return{$$typeof:gm,render:e}};U.isValidElement=va;U.lazy=function(e){return{$$typeof:Sm,_payload:{_status:-1,_result:e},_init:Em}};U.memo=function(e,t){return{$$typeof:wm,type:e,compare:t===void 0?null:t}};U.startTransition=function(e){var t=Ji.transition;Ji.transition={};try{e()}finally{Ji.transition=t}};U.unstable_act=Lf;U.useCallback=function(e,t){return be.current.useCallback(e,t)};U.useContext=function(e){return be.current.useContext(e)};U.useDebugValue=function(){};U.useDeferredValue=function(e){return be.current.useDeferredValue(e)};U.useEffect=function(e,t){return be.current.useEffect(e,t)};U.useId=function(){return be.current.useId()};U.useImperativeHandle=function(e,t,n){return be.current.useImperativeHandle(e,t,n)};U.useInsertionEffect=function(e,t){return be.current.useInsertionEffect(e,t)};U.useLayoutEffect=function(e,t){return be.current.useLayoutEffect(e,t)};U.useMemo=function(e,t){return be.current.useMemo(e,t)};U.useReducer=function(e,t,n){return be.current.useReducer(e,t,n)};U.useRef=function(e){return be.current.useRef(e)};U.useState=function(e){return be.current.useState(e)};U.useSyncExternalStore=function(e,t,n){return be.current.useSyncExternalStore(e,t,n)};U.useTransition=function(){return be.current.useTransition()};U.version="18.3.1";Of.exports=U;var xe=Of.exports;const D=Pf(xe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm=xe,Nm=Symbol.for("react.element"),Om=Symbol.for("react.fragment"),Tm=Object.prototype.hasOwnProperty,Am=Pm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Im={key:!0,ref:!0,__self:!0,__source:!0};function bf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Tm.call(t,r)&&!Im.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Nm,type:e,key:s,ref:o,props:i,_owner:Am.current}}Ys.Fragment=Om;Ys.jsx=bf;Ys.jsxs=bf;Nf.exports=Ys;var m=Nf.exports,zf={exports:{}},nt={},$f={exports:{}},Bf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,b){var $=T.length;T.push(b);e:for(;0<$;){var q=$-1>>>1,ne=T[q];if(0<i(ne,b))T[q]=b,T[$]=ne,$=q;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var b=T[0],$=T.pop();if($!==b){T[0]=$;e:for(var q=0,ne=T.length,jt=ne>>>1;q<jt;){var it=2*(q+1)-1,dt=T[it],fe=it+1,Mt=T[fe];if(0>i(dt,$))fe<ne&&0>i(Mt,dt)?(T[q]=Mt,T[fe]=$,q=fe):(T[q]=dt,T[it]=$,q=it);else if(fe<ne&&0>i(Mt,$))T[q]=Mt,T[fe]=$,q=fe;else break e}}return b}function i(T,b){var $=T.sortIndex-b.sortIndex;return $!==0?$:T.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,f=null,h=3,g=!1,w=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var b=n(u);b!==null;){if(b.callback===null)r(u);else if(b.startTime<=T)r(u),b.sortIndex=b.expirationTime,t(a,b);else break;b=n(u)}}function S(T){if(k=!1,y(T),!w)if(n(a)!==null)w=!0,Ce(N);else{var b=n(u);b!==null&&oe(S,b.startTime-T)}}function N(T,b){w=!1,k&&(k=!1,p(I),I=-1),g=!0;var $=h;try{for(y(b),f=n(a);f!==null&&(!(f.expirationTime>b)||T&&!K());){var q=f.callback;if(typeof q=="function"){f.callback=null,h=f.priorityLevel;var ne=q(f.expirationTime<=b);b=e.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(a)&&r(a),y(b)}else r(a);f=n(a)}if(f!==null)var jt=!0;else{var it=n(u);it!==null&&oe(S,it.startTime-b),jt=!1}return jt}finally{f=null,h=$,g=!1}}var A=!1,O=null,I=-1,H=5,L=-1;function K(){return!(e.unstable_now()-L<H)}function ee(){if(O!==null){var T=e.unstable_now();L=T;var b=!0;try{b=O(!0,T)}finally{b?me():(A=!1,O=null)}}else A=!1}var me;if(typeof d=="function")me=function(){d(ee)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,$e=te.port2;te.port1.onmessage=ee,me=function(){$e.postMessage(null)}}else me=function(){P(ee,0)};function Ce(T){O=T,A||(A=!0,me())}function oe(T,b){I=P(function(){T(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,Ce(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var b=3;break;default:b=h}var $=h;h=b;try{return T()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,b){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var $=h;h=T;try{return b()}finally{h=$}},e.unstable_scheduleCallback=function(T,b,$){var q=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?q+$:q):$=q,T){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=$+ne,T={id:c++,callback:b,priorityLevel:T,startTime:$,expirationTime:ne,sortIndex:-1},$>q?(T.sortIndex=$,t(u,T),n(a)===null&&T===n(u)&&(k?(p(I),I=-1):k=!0,oe(S,$-q))):(T.sortIndex=ne,t(a,T),w||g||(w=!0,Ce(N))),T},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(T){var b=h;return function(){var $=h;h=b;try{return T.apply(this,arguments)}finally{h=$}}}})(Bf);$f.exports=Bf;var jm=$f.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm=xe,Ge=jm;function C(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ff=new Set,Qr={};function bn(e,t){ir(e,t),ir(e+"Capture",t)}function ir(e,t){for(Qr[e]=t,e=0;e<t.length;e++)Ff.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),il=Object.prototype.hasOwnProperty,Dm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wu={},Yu={};function Rm(e){return il.call(Yu,e)?!0:il.call(Wu,e)?!1:Dm.test(e)?Yu[e]=!0:(Wu[e]=!0,!1)}function Lm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bm(e,t,n,r){if(t===null||typeof t>"u"||Lm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ze(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ee[e]=new ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ee[t]=new ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ee[e]=new ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ee[e]=new ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ee[e]=new ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ee[e]=new ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ee[e]=new ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ee[e]=new ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ee[e]=new ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var wa=/[\-:]([a-z])/g;function Sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wa,Sa);Ee[t]=new ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wa,Sa);Ee[t]=new ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wa,Sa);Ee[t]=new ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ee[e]=new ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ee[e]=new ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function ka(e,t,n,r){var i=Ee.hasOwnProperty(t)?Ee[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bm(t,n,i,r)&&(n=null),r||i===null?Rm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yt=Mm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pi=Symbol.for("react.element"),Bn=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),xa=Symbol.for("react.strict_mode"),sl=Symbol.for("react.profiler"),Uf=Symbol.for("react.provider"),Hf=Symbol.for("react.context"),_a=Symbol.for("react.forward_ref"),ol=Symbol.for("react.suspense"),ll=Symbol.for("react.suspense_list"),Ea=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),Vf=Symbol.for("react.offscreen"),Ku=Symbol.iterator;function Sr(e){return e===null||typeof e!="object"?null:(e=Ku&&e[Ku]||e["@@iterator"],typeof e=="function"?e:null)}var se=Object.assign,ko;function Ir(e){if(ko===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ko=t&&t[1]||""}return`
`+ko+e}var xo=!1;function _o(e,t){if(!e||xo)return"";xo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{xo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ir(e):""}function zm(e){switch(e.tag){case 5:return Ir(e.type);case 16:return Ir("Lazy");case 13:return Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 2:case 15:return e=_o(e.type,!1),e;case 11:return e=_o(e.type.render,!1),e;case 1:return e=_o(e.type,!0),e;default:return""}}function al(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fn:return"Fragment";case Bn:return"Portal";case sl:return"Profiler";case xa:return"StrictMode";case ol:return"Suspense";case ll:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hf:return(e.displayName||"Context")+".Consumer";case Uf:return(e._context.displayName||"Context")+".Provider";case _a:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ea:return t=e.displayName||null,t!==null?t:al(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return al(e(t))}catch{}}return null}function $m(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return al(t);case 8:return t===xa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bm(e){var t=Wf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){e._valueTracker||(e._valueTracker=Bm(e))}function Yf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Wf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ul(e,t){var n=t.checked;return se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=dn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kf(e,t){t=t.checked,t!=null&&ka(e,"checked",t,!1)}function cl(e,t){Kf(e,t);var n=dn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fl(e,t.type,n):t.hasOwnProperty("defaultValue")&&fl(e,t.type,dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function fl(e,t,n){(t!=="number"||ds(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var jr=Array.isArray;function Zn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function dl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(C(91));return se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ju(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(C(92));if(jr(n)){if(1<n.length)throw Error(C(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:dn(n)}}function qf(e,t){var n=dn(t.value),r=dn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oi,Jf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oi=Oi||document.createElement("div"),Oi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fm=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(e){Fm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zr[t]=zr[e]})});function Xf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||zr.hasOwnProperty(e)&&zr[e]?(""+t).trim():t+"px"}function Zf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Xf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Um=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pl(e,t){if(t){if(Um[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(C(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(C(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(C(61))}if(t.style!=null&&typeof t.style!="object")throw Error(C(62))}}function ml(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yl=null;function Ca(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gl=null,Gn=null,er=null;function Zu(e){if(e=ki(e)){if(typeof gl!="function")throw Error(C(280));var t=e.stateNode;t&&(t=Xs(t),gl(e.stateNode,e.type,t))}}function Gf(e){Gn?er?er.push(e):er=[e]:Gn=e}function ed(){if(Gn){var e=Gn,t=er;if(er=Gn=null,Zu(e),t)for(e=0;e<t.length;e++)Zu(t[e])}}function td(e,t){return e(t)}function nd(){}var Eo=!1;function rd(e,t,n){if(Eo)return e(t,n);Eo=!0;try{return td(e,t,n)}finally{Eo=!1,(Gn!==null||er!==null)&&(nd(),ed())}}function Xr(e,t){var n=e.stateNode;if(n===null)return null;var r=Xs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(C(231,t,typeof n));return n}var vl=!1;if(Ft)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){vl=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{vl=!1}function Hm(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var $r=!1,hs=null,ps=!1,wl=null,Vm={onError:function(e){$r=!0,hs=e}};function Wm(e,t,n,r,i,s,o,l,a){$r=!1,hs=null,Hm.apply(Vm,arguments)}function Ym(e,t,n,r,i,s,o,l,a){if(Wm.apply(this,arguments),$r){if($r){var u=hs;$r=!1,hs=null}else throw Error(C(198));ps||(ps=!0,wl=u)}}function zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function id(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gu(e){if(zn(e)!==e)throw Error(C(188))}function Km(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(C(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Gu(i),e;if(s===r)return Gu(i),t;s=s.sibling}throw Error(C(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?e:t}function sd(e){return e=Km(e),e!==null?od(e):null}function od(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=od(e);if(t!==null)return t;e=e.sibling}return null}var ld=Ge.unstable_scheduleCallback,ec=Ge.unstable_cancelCallback,qm=Ge.unstable_shouldYield,Qm=Ge.unstable_requestPaint,ce=Ge.unstable_now,Jm=Ge.unstable_getCurrentPriorityLevel,Pa=Ge.unstable_ImmediatePriority,ad=Ge.unstable_UserBlockingPriority,ms=Ge.unstable_NormalPriority,Xm=Ge.unstable_LowPriority,ud=Ge.unstable_IdlePriority,Ks=null,Pt=null;function Zm(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Ks,e,void 0,(e.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:ty,Gm=Math.log,ey=Math.LN2;function ty(e){return e>>>=0,e===0?32:31-(Gm(e)/ey|0)|0}var Ti=64,Ai=4194304;function Mr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ys(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Mr(l):(s&=o,s!==0&&(r=Mr(s)))}else o=n&~i,o!==0?r=Mr(o):s!==0&&(r=Mr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-wt(t),i=1<<n,r|=e[n],t&=~i;return r}function ny(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ry(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-wt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=ny(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Sl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cd(){var e=Ti;return Ti<<=1,!(Ti&4194240)&&(Ti=64),e}function Co(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wt(t),e[t]=n}function iy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-wt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Na(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-wt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Y=0;function fd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dd,Oa,hd,pd,md,kl=!1,Ii=[],nn=null,rn=null,sn=null,Zr=new Map,Gr=new Map,Zt=[],sy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tc(e,t){switch(e){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":Zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(t.pointerId)}}function xr(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ki(t),t!==null&&Oa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function oy(e,t,n,r,i){switch(t){case"focusin":return nn=xr(nn,e,t,n,r,i),!0;case"dragenter":return rn=xr(rn,e,t,n,r,i),!0;case"mouseover":return sn=xr(sn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zr.set(s,xr(Zr.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gr.set(s,xr(Gr.get(s)||null,e,t,n,r,i)),!0}return!1}function yd(e){var t=Pn(e.target);if(t!==null){var n=zn(t);if(n!==null){if(t=n.tag,t===13){if(t=id(n),t!==null){e.blockedOn=t,md(e.priority,function(){hd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yl=r,n.target.dispatchEvent(r),yl=null}else return t=ki(n),t!==null&&Oa(t),e.blockedOn=n,!1;t.shift()}return!0}function nc(e,t,n){Xi(e)&&n.delete(t)}function ly(){kl=!1,nn!==null&&Xi(nn)&&(nn=null),rn!==null&&Xi(rn)&&(rn=null),sn!==null&&Xi(sn)&&(sn=null),Zr.forEach(nc),Gr.forEach(nc)}function _r(e,t){e.blockedOn===t&&(e.blockedOn=null,kl||(kl=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,ly)))}function ei(e){function t(i){return _r(i,e)}if(0<Ii.length){_r(Ii[0],e);for(var n=1;n<Ii.length;n++){var r=Ii[n];r.blockedOn===e&&(r.blockedOn=null)}}for(nn!==null&&_r(nn,e),rn!==null&&_r(rn,e),sn!==null&&_r(sn,e),Zr.forEach(t),Gr.forEach(t),n=0;n<Zt.length;n++)r=Zt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zt.length&&(n=Zt[0],n.blockedOn===null);)yd(n),n.blockedOn===null&&Zt.shift()}var tr=Yt.ReactCurrentBatchConfig,gs=!0;function ay(e,t,n,r){var i=Y,s=tr.transition;tr.transition=null;try{Y=1,Ta(e,t,n,r)}finally{Y=i,tr.transition=s}}function uy(e,t,n,r){var i=Y,s=tr.transition;tr.transition=null;try{Y=4,Ta(e,t,n,r)}finally{Y=i,tr.transition=s}}function Ta(e,t,n,r){if(gs){var i=xl(e,t,n,r);if(i===null)Ro(e,t,r,vs,n),tc(e,r);else if(oy(i,e,t,n,r))r.stopPropagation();else if(tc(e,r),t&4&&-1<sy.indexOf(e)){for(;i!==null;){var s=ki(i);if(s!==null&&dd(s),s=xl(e,t,n,r),s===null&&Ro(e,t,r,vs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ro(e,t,r,null,n)}}var vs=null;function xl(e,t,n,r){if(vs=null,e=Ca(r),e=Pn(e),e!==null)if(t=zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=id(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vs=e,null}function gd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jm()){case Pa:return 1;case ad:return 4;case ms:case Xm:return 16;case ud:return 536870912;default:return 16}default:return 16}}var en=null,Aa=null,Zi=null;function vd(){if(Zi)return Zi;var e,t=Aa,n=t.length,r,i="value"in en?en.value:en.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Zi=i.slice(e,1<r?1-r:void 0)}function Gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function rc(){return!1}function rt(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ji:rc,this.isPropagationStopped=rc,this}return se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=rt(pr),Si=se({},pr,{view:0,detail:0}),cy=rt(Si),Po,No,Er,qs=se({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ja,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Er&&(Er&&e.type==="mousemove"?(Po=e.screenX-Er.screenX,No=e.screenY-Er.screenY):No=Po=0,Er=e),Po)},movementY:function(e){return"movementY"in e?e.movementY:No}}),ic=rt(qs),fy=se({},qs,{dataTransfer:0}),dy=rt(fy),hy=se({},Si,{relatedTarget:0}),Oo=rt(hy),py=se({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),my=rt(py),yy=se({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gy=rt(yy),vy=se({},pr,{data:0}),sc=rt(vy),wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ky={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ky[e])?!!t[e]:!1}function ja(){return xy}var _y=se({},Si,{key:function(e){if(e.key){var t=wy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ja,charCode:function(e){return e.type==="keypress"?Gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ey=rt(_y),Cy=se({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=rt(Cy),Py=se({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ja}),Ny=rt(Py),Oy=se({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ty=rt(Oy),Ay=se({},qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Iy=rt(Ay),jy=[9,13,27,32],Ma=Ft&&"CompositionEvent"in window,Br=null;Ft&&"documentMode"in document&&(Br=document.documentMode);var My=Ft&&"TextEvent"in window&&!Br,wd=Ft&&(!Ma||Br&&8<Br&&11>=Br),lc=" ",ac=!1;function Sd(e,t){switch(e){case"keyup":return jy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function Dy(e,t){switch(e){case"compositionend":return kd(t);case"keypress":return t.which!==32?null:(ac=!0,lc);case"textInput":return e=t.data,e===lc&&ac?null:e;default:return null}}function Ry(e,t){if(Un)return e==="compositionend"||!Ma&&Sd(e,t)?(e=vd(),Zi=Aa=en=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wd&&t.locale!=="ko"?null:t.data;default:return null}}var Ly={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ly[e.type]:t==="textarea"}function xd(e,t,n,r){Gf(r),t=ws(t,"onChange"),0<t.length&&(n=new Ia("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fr=null,ti=null;function by(e){Md(e,0)}function Qs(e){var t=Wn(e);if(Yf(t))return e}function zy(e,t){if(e==="change")return t}var _d=!1;if(Ft){var To;if(Ft){var Ao="oninput"in document;if(!Ao){var cc=document.createElement("div");cc.setAttribute("oninput","return;"),Ao=typeof cc.oninput=="function"}To=Ao}else To=!1;_d=To&&(!document.documentMode||9<document.documentMode)}function fc(){Fr&&(Fr.detachEvent("onpropertychange",Ed),ti=Fr=null)}function Ed(e){if(e.propertyName==="value"&&Qs(ti)){var t=[];xd(t,ti,e,Ca(e)),rd(by,t)}}function $y(e,t,n){e==="focusin"?(fc(),Fr=t,ti=n,Fr.attachEvent("onpropertychange",Ed)):e==="focusout"&&fc()}function By(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qs(ti)}function Fy(e,t){if(e==="click")return Qs(t)}function Uy(e,t){if(e==="input"||e==="change")return Qs(t)}function Hy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:Hy;function ni(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!il.call(t,i)||!kt(e[i],t[i]))return!1}return!0}function dc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hc(e,t){var n=dc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dc(n)}}function Cd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pd(){for(var e=window,t=ds();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ds(e.document)}return t}function Da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Vy(e){var t=Pd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Cd(n.ownerDocument.documentElement,n)){if(r!==null&&Da(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hc(n,s);var o=hc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wy=Ft&&"documentMode"in document&&11>=document.documentMode,Hn=null,_l=null,Ur=null,El=!1;function pc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;El||Hn==null||Hn!==ds(r)||(r=Hn,"selectionStart"in r&&Da(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&ni(Ur,r)||(Ur=r,r=ws(_l,"onSelect"),0<r.length&&(t=new Ia("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hn)))}function Mi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vn={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},Io={},Nd={};Ft&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function Js(e){if(Io[e])return Io[e];if(!Vn[e])return e;var t=Vn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Nd)return Io[e]=t[n];return e}var Od=Js("animationend"),Td=Js("animationiteration"),Ad=Js("animationstart"),Id=Js("transitionend"),jd=new Map,mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(e,t){jd.set(e,t),bn(t,[e])}for(var jo=0;jo<mc.length;jo++){var Mo=mc[jo],Yy=Mo.toLowerCase(),Ky=Mo[0].toUpperCase()+Mo.slice(1);yn(Yy,"on"+Ky)}yn(Od,"onAnimationEnd");yn(Td,"onAnimationIteration");yn(Ad,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(Id,"onTransitionEnd");ir("onMouseEnter",["mouseout","mouseover"]);ir("onMouseLeave",["mouseout","mouseover"]);ir("onPointerEnter",["pointerout","pointerover"]);ir("onPointerLeave",["pointerout","pointerover"]);bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function yc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ym(r,t,void 0,e),e.currentTarget=null}function Md(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;yc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;yc(i,l,u),s=a}}}if(ps)throw e=wl,ps=!1,wl=null,e}function X(e,t){var n=t[Tl];n===void 0&&(n=t[Tl]=new Set);var r=e+"__bubble";n.has(r)||(Dd(t,e,2,!1),n.add(r))}function Do(e,t,n){var r=0;t&&(r|=4),Dd(n,e,r,t)}var Di="_reactListening"+Math.random().toString(36).slice(2);function ri(e){if(!e[Di]){e[Di]=!0,Ff.forEach(function(n){n!=="selectionchange"&&(qy.has(n)||Do(n,!1,e),Do(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Di]||(t[Di]=!0,Do("selectionchange",!1,t))}}function Dd(e,t,n,r){switch(gd(t)){case 1:var i=ay;break;case 4:i=uy;break;default:i=Ta}n=i.bind(null,t,n,e),i=void 0,!vl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ro(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Pn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}rd(function(){var u=s,c=Ca(n),f=[];e:{var h=jd.get(e);if(h!==void 0){var g=Ia,w=e;switch(e){case"keypress":if(Gi(n)===0)break e;case"keydown":case"keyup":g=Ey;break;case"focusin":w="focus",g=Oo;break;case"focusout":w="blur",g=Oo;break;case"beforeblur":case"afterblur":g=Oo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ny;break;case Od:case Td:case Ad:g=my;break;case Id:g=Ty;break;case"scroll":g=cy;break;case"wheel":g=Iy;break;case"copy":case"cut":case"paste":g=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=oc}var k=(t&4)!==0,P=!k&&e==="scroll",p=k?h!==null?h+"Capture":null:h;k=[];for(var d=u,y;d!==null;){y=d;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,p!==null&&(S=Xr(d,p),S!=null&&k.push(ii(d,S,y)))),P)break;d=d.return}0<k.length&&(h=new g(h,w,null,n,c),f.push({event:h,listeners:k}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==yl&&(w=n.relatedTarget||n.fromElement)&&(Pn(w)||w[Ut]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?Pn(w):null,w!==null&&(P=zn(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(k=ic,S="onMouseLeave",p="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(k=oc,S="onPointerLeave",p="onPointerEnter",d="pointer"),P=g==null?h:Wn(g),y=w==null?h:Wn(w),h=new k(S,d+"leave",g,n,c),h.target=P,h.relatedTarget=y,S=null,Pn(c)===u&&(k=new k(p,d+"enter",w,n,c),k.target=y,k.relatedTarget=P,S=k),P=S,g&&w)t:{for(k=g,p=w,d=0,y=k;y;y=$n(y))d++;for(y=0,S=p;S;S=$n(S))y++;for(;0<d-y;)k=$n(k),d--;for(;0<y-d;)p=$n(p),y--;for(;d--;){if(k===p||p!==null&&k===p.alternate)break t;k=$n(k),p=$n(p)}k=null}else k=null;g!==null&&gc(f,h,g,k,!1),w!==null&&P!==null&&gc(f,P,w,k,!0)}}e:{if(h=u?Wn(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var N=zy;else if(uc(h))if(_d)N=Uy;else{N=By;var A=$y}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Fy);if(N&&(N=N(e,u))){xd(f,N,n,c);break e}A&&A(e,h,u),e==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&fl(h,"number",h.value)}switch(A=u?Wn(u):window,e){case"focusin":(uc(A)||A.contentEditable==="true")&&(Hn=A,_l=u,Ur=null);break;case"focusout":Ur=_l=Hn=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,pc(f,n,c);break;case"selectionchange":if(Wy)break;case"keydown":case"keyup":pc(f,n,c)}var O;if(Ma)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Un?Sd(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(wd&&n.locale!=="ko"&&(Un||I!=="onCompositionStart"?I==="onCompositionEnd"&&Un&&(O=vd()):(en=c,Aa="value"in en?en.value:en.textContent,Un=!0)),A=ws(u,I),0<A.length&&(I=new sc(I,e,null,n,c),f.push({event:I,listeners:A}),O?I.data=O:(O=kd(n),O!==null&&(I.data=O)))),(O=My?Dy(e,n):Ry(e,n))&&(u=ws(u,"onBeforeInput"),0<u.length&&(c=new sc("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=O))}Md(f,t)})}function ii(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ws(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xr(e,n),s!=null&&r.unshift(ii(e,s,i)),s=Xr(e,t),s!=null&&r.push(ii(e,s,i))),e=e.return}return r}function $n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Xr(n,s),a!=null&&o.unshift(ii(n,a,l))):i||(a=Xr(n,s),a!=null&&o.push(ii(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Qy=/\r\n?/g,Jy=/\u0000|\uFFFD/g;function vc(e){return(typeof e=="string"?e:""+e).replace(Qy,`
`).replace(Jy,"")}function Ri(e,t,n){if(t=vc(t),vc(e)!==t&&n)throw Error(C(425))}function Ss(){}var Cl=null,Pl=null;function Nl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ol=typeof setTimeout=="function"?setTimeout:void 0,Xy=typeof clearTimeout=="function"?clearTimeout:void 0,wc=typeof Promise=="function"?Promise:void 0,Zy=typeof queueMicrotask=="function"?queueMicrotask:typeof wc<"u"?function(e){return wc.resolve(null).then(e).catch(Gy)}:Ol;function Gy(e){setTimeout(function(){throw e})}function Lo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ei(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ei(t)}function on(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+mr,si="__reactProps$"+mr,Ut="__reactContainer$"+mr,Tl="__reactEvents$"+mr,eg="__reactListeners$"+mr,tg="__reactHandles$"+mr;function Pn(e){var t=e[Ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ut]||n[Ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Sc(e);e!==null;){if(n=e[Ct])return n;e=Sc(e)}return t}e=n,n=e.parentNode}return null}function ki(e){return e=e[Ct]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(C(33))}function Xs(e){return e[si]||null}var Al=[],Yn=-1;function gn(e){return{current:e}}function Z(e){0>Yn||(e.current=Al[Yn],Al[Yn]=null,Yn--)}function J(e,t){Yn++,Al[Yn]=e.current,e.current=t}var hn={},je=gn(hn),Ve=gn(!1),In=hn;function sr(e,t){var n=e.type.contextTypes;if(!n)return hn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function We(e){return e=e.childContextTypes,e!=null}function ks(){Z(Ve),Z(je)}function kc(e,t,n){if(je.current!==hn)throw Error(C(168));J(je,t),J(Ve,n)}function Rd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(C(108,$m(e)||"Unknown",i));return se({},n,r)}function xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hn,In=je.current,J(je,e),J(Ve,Ve.current),!0}function xc(e,t,n){var r=e.stateNode;if(!r)throw Error(C(169));n?(e=Rd(e,t,In),r.__reactInternalMemoizedMergedChildContext=e,Z(Ve),Z(je),J(je,e)):Z(Ve),J(Ve,n)}var Lt=null,Zs=!1,bo=!1;function Ld(e){Lt===null?Lt=[e]:Lt.push(e)}function ng(e){Zs=!0,Ld(e)}function vn(){if(!bo&&Lt!==null){bo=!0;var e=0,t=Y;try{var n=Lt;for(Y=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Lt=null,Zs=!1}catch(i){throw Lt!==null&&(Lt=Lt.slice(e+1)),ld(Pa,vn),i}finally{Y=t,bo=!1}}return null}var Kn=[],qn=0,_s=null,Es=0,st=[],ot=0,jn=null,bt=1,zt="";function _n(e,t){Kn[qn++]=Es,Kn[qn++]=_s,_s=e,Es=t}function bd(e,t,n){st[ot++]=bt,st[ot++]=zt,st[ot++]=jn,jn=e;var r=bt;e=zt;var i=32-wt(r)-1;r&=~(1<<i),n+=1;var s=32-wt(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,bt=1<<32-wt(t)+i|n<<i|r,zt=s+e}else bt=1<<s|n<<i|r,zt=e}function Ra(e){e.return!==null&&(_n(e,1),bd(e,1,0))}function La(e){for(;e===_s;)_s=Kn[--qn],Kn[qn]=null,Es=Kn[--qn],Kn[qn]=null;for(;e===jn;)jn=st[--ot],st[ot]=null,zt=st[--ot],st[ot]=null,bt=st[--ot],st[ot]=null}var Ze=null,Je=null,G=!1,gt=null;function zd(e,t){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _c(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ze=e,Je=on(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ze=e,Je=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jn!==null?{id:bt,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ze=e,Je=null,!0):!1;default:return!1}}function Il(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jl(e){if(G){var t=Je;if(t){var n=t;if(!_c(e,t)){if(Il(e))throw Error(C(418));t=on(n.nextSibling);var r=Ze;t&&_c(e,t)?zd(r,n):(e.flags=e.flags&-4097|2,G=!1,Ze=e)}}else{if(Il(e))throw Error(C(418));e.flags=e.flags&-4097|2,G=!1,Ze=e}}}function Ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ze=e}function Li(e){if(e!==Ze)return!1;if(!G)return Ec(e),G=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nl(e.type,e.memoizedProps)),t&&(t=Je)){if(Il(e))throw $d(),Error(C(418));for(;t;)zd(e,t),t=on(t.nextSibling)}if(Ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(C(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Je=on(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Je=null}}else Je=Ze?on(e.stateNode.nextSibling):null;return!0}function $d(){for(var e=Je;e;)e=on(e.nextSibling)}function or(){Je=Ze=null,G=!1}function ba(e){gt===null?gt=[e]:gt.push(e)}var rg=Yt.ReactCurrentBatchConfig;function Cr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(C(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cc(e){var t=e._init;return t(e._payload)}function Bd(e){function t(p,d){if(e){var y=p.deletions;y===null?(p.deletions=[d],p.flags|=16):y.push(d)}}function n(p,d){if(!e)return null;for(;d!==null;)t(p,d),d=d.sibling;return null}function r(p,d){for(p=new Map;d!==null;)d.key!==null?p.set(d.key,d):p.set(d.index,d),d=d.sibling;return p}function i(p,d){return p=cn(p,d),p.index=0,p.sibling=null,p}function s(p,d,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<d?(p.flags|=2,d):y):(p.flags|=2,d)):(p.flags|=1048576,d)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,d,y,S){return d===null||d.tag!==6?(d=Vo(y,p.mode,S),d.return=p,d):(d=i(d,y),d.return=p,d)}function a(p,d,y,S){var N=y.type;return N===Fn?c(p,d,y.props.children,S,y.key):d!==null&&(d.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Jt&&Cc(N)===d.type)?(S=i(d,y.props),S.ref=Cr(p,d,y),S.return=p,S):(S=os(y.type,y.key,y.props,null,p.mode,S),S.ref=Cr(p,d,y),S.return=p,S)}function u(p,d,y,S){return d===null||d.tag!==4||d.stateNode.containerInfo!==y.containerInfo||d.stateNode.implementation!==y.implementation?(d=Wo(y,p.mode,S),d.return=p,d):(d=i(d,y.children||[]),d.return=p,d)}function c(p,d,y,S,N){return d===null||d.tag!==7?(d=An(y,p.mode,S,N),d.return=p,d):(d=i(d,y),d.return=p,d)}function f(p,d,y){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Vo(""+d,p.mode,y),d.return=p,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Pi:return y=os(d.type,d.key,d.props,null,p.mode,y),y.ref=Cr(p,null,d),y.return=p,y;case Bn:return d=Wo(d,p.mode,y),d.return=p,d;case Jt:var S=d._init;return f(p,S(d._payload),y)}if(jr(d)||Sr(d))return d=An(d,p.mode,y,null),d.return=p,d;bi(p,d)}return null}function h(p,d,y,S){var N=d!==null?d.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(p,d,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pi:return y.key===N?a(p,d,y,S):null;case Bn:return y.key===N?u(p,d,y,S):null;case Jt:return N=y._init,h(p,d,N(y._payload),S)}if(jr(y)||Sr(y))return N!==null?null:c(p,d,y,S,null);bi(p,y)}return null}function g(p,d,y,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(y)||null,l(d,p,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pi:return p=p.get(S.key===null?y:S.key)||null,a(d,p,S,N);case Bn:return p=p.get(S.key===null?y:S.key)||null,u(d,p,S,N);case Jt:var A=S._init;return g(p,d,y,A(S._payload),N)}if(jr(S)||Sr(S))return p=p.get(y)||null,c(d,p,S,N,null);bi(d,S)}return null}function w(p,d,y,S){for(var N=null,A=null,O=d,I=d=0,H=null;O!==null&&I<y.length;I++){O.index>I?(H=O,O=null):H=O.sibling;var L=h(p,O,y[I],S);if(L===null){O===null&&(O=H);break}e&&O&&L.alternate===null&&t(p,O),d=s(L,d,I),A===null?N=L:A.sibling=L,A=L,O=H}if(I===y.length)return n(p,O),G&&_n(p,I),N;if(O===null){for(;I<y.length;I++)O=f(p,y[I],S),O!==null&&(d=s(O,d,I),A===null?N=O:A.sibling=O,A=O);return G&&_n(p,I),N}for(O=r(p,O);I<y.length;I++)H=g(O,p,I,y[I],S),H!==null&&(e&&H.alternate!==null&&O.delete(H.key===null?I:H.key),d=s(H,d,I),A===null?N=H:A.sibling=H,A=H);return e&&O.forEach(function(K){return t(p,K)}),G&&_n(p,I),N}function k(p,d,y,S){var N=Sr(y);if(typeof N!="function")throw Error(C(150));if(y=N.call(y),y==null)throw Error(C(151));for(var A=N=null,O=d,I=d=0,H=null,L=y.next();O!==null&&!L.done;I++,L=y.next()){O.index>I?(H=O,O=null):H=O.sibling;var K=h(p,O,L.value,S);if(K===null){O===null&&(O=H);break}e&&O&&K.alternate===null&&t(p,O),d=s(K,d,I),A===null?N=K:A.sibling=K,A=K,O=H}if(L.done)return n(p,O),G&&_n(p,I),N;if(O===null){for(;!L.done;I++,L=y.next())L=f(p,L.value,S),L!==null&&(d=s(L,d,I),A===null?N=L:A.sibling=L,A=L);return G&&_n(p,I),N}for(O=r(p,O);!L.done;I++,L=y.next())L=g(O,p,I,L.value,S),L!==null&&(e&&L.alternate!==null&&O.delete(L.key===null?I:L.key),d=s(L,d,I),A===null?N=L:A.sibling=L,A=L);return e&&O.forEach(function(ee){return t(p,ee)}),G&&_n(p,I),N}function P(p,d,y,S){if(typeof y=="object"&&y!==null&&y.type===Fn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Pi:e:{for(var N=y.key,A=d;A!==null;){if(A.key===N){if(N=y.type,N===Fn){if(A.tag===7){n(p,A.sibling),d=i(A,y.props.children),d.return=p,p=d;break e}}else if(A.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Jt&&Cc(N)===A.type){n(p,A.sibling),d=i(A,y.props),d.ref=Cr(p,A,y),d.return=p,p=d;break e}n(p,A);break}else t(p,A);A=A.sibling}y.type===Fn?(d=An(y.props.children,p.mode,S,y.key),d.return=p,p=d):(S=os(y.type,y.key,y.props,null,p.mode,S),S.ref=Cr(p,d,y),S.return=p,p=S)}return o(p);case Bn:e:{for(A=y.key;d!==null;){if(d.key===A)if(d.tag===4&&d.stateNode.containerInfo===y.containerInfo&&d.stateNode.implementation===y.implementation){n(p,d.sibling),d=i(d,y.children||[]),d.return=p,p=d;break e}else{n(p,d);break}else t(p,d);d=d.sibling}d=Wo(y,p.mode,S),d.return=p,p=d}return o(p);case Jt:return A=y._init,P(p,d,A(y._payload),S)}if(jr(y))return w(p,d,y,S);if(Sr(y))return k(p,d,y,S);bi(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,d!==null&&d.tag===6?(n(p,d.sibling),d=i(d,y),d.return=p,p=d):(n(p,d),d=Vo(y,p.mode,S),d.return=p,p=d),o(p)):n(p,d)}return P}var lr=Bd(!0),Fd=Bd(!1),Cs=gn(null),Ps=null,Qn=null,za=null;function $a(){za=Qn=Ps=null}function Ba(e){var t=Cs.current;Z(Cs),e._currentValue=t}function Ml(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){Ps=e,za=Qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(He=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(za!==e)if(e={context:e,memoizedValue:t,next:null},Qn===null){if(Ps===null)throw Error(C(308));Qn=e,Ps.dependencies={lanes:0,firstContext:e}}else Qn=Qn.next=e;return t}var Nn=null;function Fa(e){Nn===null?Nn=[e]:Nn.push(e)}function Ud(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Fa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ht(e,r)}function Ht(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xt=!1;function Ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $t(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ln(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ht(e,n)}return i=r.interleaved,i===null?(t.next=t,Fa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ht(e,n)}function es(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Na(e,n)}}function Pc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ns(e,t,n,r){var i=e.updateQueue;Xt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,g=l.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,k=l;switch(h=t,g=n,k.tag){case 1:if(w=k.payload,typeof w=="function"){f=w.call(g,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=k.payload,h=typeof w=="function"?w.call(g,f,h):w,h==null)break e;f=se({},f,h);break e;case 2:Xt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=f):c=c.next=g,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Dn|=o,e.lanes=o,e.memoizedState=f}}function Nc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var xi={},Nt=gn(xi),oi=gn(xi),li=gn(xi);function On(e){if(e===xi)throw Error(C(174));return e}function Ha(e,t){switch(J(li,t),J(oi,e),J(Nt,xi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hl(t,e)}Z(Nt),J(Nt,t)}function ar(){Z(Nt),Z(oi),Z(li)}function Vd(e){On(li.current);var t=On(Nt.current),n=hl(t,e.type);t!==n&&(J(oi,e),J(Nt,n))}function Va(e){oi.current===e&&(Z(Nt),Z(oi))}var re=gn(0);function Os(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zo=[];function Wa(){for(var e=0;e<zo.length;e++)zo[e]._workInProgressVersionPrimary=null;zo.length=0}var ts=Yt.ReactCurrentDispatcher,$o=Yt.ReactCurrentBatchConfig,Mn=0,ie=null,ye=null,we=null,Ts=!1,Hr=!1,ai=0,ig=0;function Ne(){throw Error(C(321))}function Ya(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kt(e[n],t[n]))return!1;return!0}function Ka(e,t,n,r,i,s){if(Mn=s,ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ts.current=e===null||e.memoizedState===null?ag:ug,e=n(r,i),Hr){s=0;do{if(Hr=!1,ai=0,25<=s)throw Error(C(301));s+=1,we=ye=null,t.updateQueue=null,ts.current=cg,e=n(r,i)}while(Hr)}if(ts.current=As,t=ye!==null&&ye.next!==null,Mn=0,we=ye=ie=null,Ts=!1,t)throw Error(C(300));return e}function qa(){var e=ai!==0;return ai=0,e}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?ie.memoizedState=we=e:we=we.next=e,we}function ft(){if(ye===null){var e=ie.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=we===null?ie.memoizedState:we.next;if(t!==null)we=t,ye=e;else{if(e===null)throw Error(C(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},we===null?ie.memoizedState=we=e:we=we.next=e}return we}function ui(e,t){return typeof t=="function"?t(e):t}function Bo(e){var t=ft(),n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=e;var r=ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Mn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,ie.lanes|=c,Dn|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,kt(r,t.memoizedState)||(He=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ie.lanes|=s,Dn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fo(e){var t=ft(),n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);kt(s,t.memoizedState)||(He=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Wd(){}function Yd(e,t){var n=ie,r=ft(),i=t(),s=!kt(r.memoizedState,i);if(s&&(r.memoizedState=i,He=!0),r=r.queue,Qa(Qd.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||we!==null&&we.memoizedState.tag&1){if(n.flags|=2048,ci(9,qd.bind(null,n,r,i,t),void 0,null),Se===null)throw Error(C(349));Mn&30||Kd(n,t,i)}return i}function Kd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qd(e,t,n,r){t.value=n,t.getSnapshot=r,Jd(t)&&Xd(e)}function Qd(e,t,n){return n(function(){Jd(t)&&Xd(e)})}function Jd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kt(e,n)}catch{return!0}}function Xd(e){var t=Ht(e,1);t!==null&&St(t,e,1,-1)}function Oc(e){var t=_t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:e},t.queue=e,e=e.dispatch=lg.bind(null,ie,e),[t.memoizedState,e]}function ci(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ie.updateQueue,t===null?(t={lastEffect:null,stores:null},ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Zd(){return ft().memoizedState}function ns(e,t,n,r){var i=_t();ie.flags|=e,i.memoizedState=ci(1|t,n,void 0,r===void 0?null:r)}function Gs(e,t,n,r){var i=ft();r=r===void 0?null:r;var s=void 0;if(ye!==null){var o=ye.memoizedState;if(s=o.destroy,r!==null&&Ya(r,o.deps)){i.memoizedState=ci(t,n,s,r);return}}ie.flags|=e,i.memoizedState=ci(1|t,n,s,r)}function Tc(e,t){return ns(8390656,8,e,t)}function Qa(e,t){return Gs(2048,8,e,t)}function Gd(e,t){return Gs(4,2,e,t)}function eh(e,t){return Gs(4,4,e,t)}function th(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nh(e,t,n){return n=n!=null?n.concat([e]):null,Gs(4,4,th.bind(null,t,e),n)}function Ja(){}function rh(e,t){var n=ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ya(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ih(e,t){var n=ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ya(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sh(e,t,n){return Mn&21?(kt(n,t)||(n=cd(),ie.lanes|=n,Dn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,He=!0),e.memoizedState=n)}function sg(e,t){var n=Y;Y=n!==0&&4>n?n:4,e(!0);var r=$o.transition;$o.transition={};try{e(!1),t()}finally{Y=n,$o.transition=r}}function oh(){return ft().memoizedState}function og(e,t,n){var r=un(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lh(e))ah(t,n);else if(n=Ud(e,t,n,r),n!==null){var i=Le();St(n,e,r,i),uh(n,t,r)}}function lg(e,t,n){var r=un(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lh(e))ah(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,kt(l,o)){var a=t.interleaved;a===null?(i.next=i,Fa(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Ud(e,t,i,r),n!==null&&(i=Le(),St(n,e,r,i),uh(n,t,r))}}function lh(e){var t=e.alternate;return e===ie||t!==null&&t===ie}function ah(e,t){Hr=Ts=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Na(e,n)}}var As={readContext:ct,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},ag={readContext:ct,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Tc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ns(4194308,4,th.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return ns(4,2,e,t)},useMemo:function(e,t){var n=_t();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_t();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=og.bind(null,ie,e),[r.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:Oc,useDebugValue:Ja,useDeferredValue:function(e){return _t().memoizedState=e},useTransition:function(){var e=Oc(!1),t=e[0];return e=sg.bind(null,e[1]),_t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ie,i=_t();if(G){if(n===void 0)throw Error(C(407));n=n()}else{if(n=t(),Se===null)throw Error(C(349));Mn&30||Kd(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Tc(Qd.bind(null,r,s,e),[e]),r.flags|=2048,ci(9,qd.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=_t(),t=Se.identifierPrefix;if(G){var n=zt,r=bt;n=(r&~(1<<32-wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ai++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ig++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ug={readContext:ct,useCallback:rh,useContext:ct,useEffect:Qa,useImperativeHandle:nh,useInsertionEffect:Gd,useLayoutEffect:eh,useMemo:ih,useReducer:Bo,useRef:Zd,useState:function(){return Bo(ui)},useDebugValue:Ja,useDeferredValue:function(e){var t=ft();return sh(t,ye.memoizedState,e)},useTransition:function(){var e=Bo(ui)[0],t=ft().memoizedState;return[e,t]},useMutableSource:Wd,useSyncExternalStore:Yd,useId:oh,unstable_isNewReconciler:!1},cg={readContext:ct,useCallback:rh,useContext:ct,useEffect:Qa,useImperativeHandle:nh,useInsertionEffect:Gd,useLayoutEffect:eh,useMemo:ih,useReducer:Fo,useRef:Zd,useState:function(){return Fo(ui)},useDebugValue:Ja,useDeferredValue:function(e){var t=ft();return ye===null?t.memoizedState=e:sh(t,ye.memoizedState,e)},useTransition:function(){var e=Fo(ui)[0],t=ft().memoizedState;return[e,t]},useMutableSource:Wd,useSyncExternalStore:Yd,useId:oh,unstable_isNewReconciler:!1};function pt(e,t){if(e&&e.defaultProps){t=se({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Dl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:se({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var eo={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Le(),i=un(e),s=$t(r,i);s.payload=t,n!=null&&(s.callback=n),t=ln(e,s,i),t!==null&&(St(t,e,i,r),es(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Le(),i=un(e),s=$t(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ln(e,s,i),t!==null&&(St(t,e,i,r),es(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Le(),r=un(e),i=$t(n,r);i.tag=2,t!=null&&(i.callback=t),t=ln(e,i,r),t!==null&&(St(t,e,r,n),es(t,e,r))}};function Ac(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ni(n,r)||!ni(i,s):!0}function ch(e,t,n){var r=!1,i=hn,s=t.contextType;return typeof s=="object"&&s!==null?s=ct(s):(i=We(t)?In:je.current,r=t.contextTypes,s=(r=r!=null)?sr(e,i):hn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ic(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eo.enqueueReplaceState(t,t.state,null)}function Rl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ua(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ct(s):(s=We(t)?In:je.current,i.context=sr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Dl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&eo.enqueueReplaceState(i,i.state,null),Ns(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ur(e,t){try{var n="",r=t;do n+=zm(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Uo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ll(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fg=typeof WeakMap=="function"?WeakMap:Map;function fh(e,t,n){n=$t(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){js||(js=!0,Yl=r),Ll(e,t)},n}function dh(e,t,n){n=$t(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ll(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ll(e,t),typeof r!="function"&&(an===null?an=new Set([this]):an.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function jc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new fg;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cg.bind(null,e,t,n),t.then(e,e))}function Mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$t(-1,1),t.tag=2,ln(n,t,1))),n.lanes|=1),e)}var dg=Yt.ReactCurrentOwner,He=!1;function De(e,t,n,r){t.child=e===null?Fd(t,null,n,r):lr(t,e.child,n,r)}function Rc(e,t,n,r,i){n=n.render;var s=t.ref;return nr(t,i),r=Ka(e,t,n,r,s,i),n=qa(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vt(e,t,i)):(G&&n&&Ra(t),t.flags|=1,De(e,t,r,i),t.child)}function Lc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!iu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,hh(e,t,s,r,i)):(e=os(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ni,n(o,r)&&e.ref===t.ref)return Vt(e,t,i)}return t.flags|=1,e=cn(s,r),e.ref=t.ref,e.return=t,t.child=e}function hh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ni(s,r)&&e.ref===t.ref)if(He=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(He=!0);else return t.lanes=e.lanes,Vt(e,t,i)}return bl(e,t,n,r,i)}function ph(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Xn,Qe),Qe|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(Xn,Qe),Qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,J(Xn,Qe),Qe|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,J(Xn,Qe),Qe|=r;return De(e,t,i,n),t.child}function mh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bl(e,t,n,r,i){var s=We(n)?In:je.current;return s=sr(t,s),nr(t,i),n=Ka(e,t,n,r,s,i),r=qa(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vt(e,t,i)):(G&&r&&Ra(t),t.flags|=1,De(e,t,n,i),t.child)}function bc(e,t,n,r,i){if(We(n)){var s=!0;xs(t)}else s=!1;if(nr(t,i),t.stateNode===null)rs(e,t),ch(t,n,r),Rl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=We(n)?In:je.current,u=sr(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Ic(t,o,r,u),Xt=!1;var h=t.memoizedState;o.state=h,Ns(t,r,o,i),a=t.memoizedState,l!==r||h!==a||Ve.current||Xt?(typeof c=="function"&&(Dl(t,n,c,r),a=t.memoizedState),(l=Xt||Ac(t,n,l,r,h,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Hd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:pt(t.type,l),o.props=u,f=t.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=ct(a):(a=We(n)?In:je.current,a=sr(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==a)&&Ic(t,o,r,a),Xt=!1,h=t.memoizedState,o.state=h,Ns(t,r,o,i);var w=t.memoizedState;l!==f||h!==w||Ve.current||Xt?(typeof g=="function"&&(Dl(t,n,g,r),w=t.memoizedState),(u=Xt||Ac(t,n,u,r,h,w,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return zl(e,t,n,r,s,i)}function zl(e,t,n,r,i,s){mh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&xc(t,n,!1),Vt(e,t,s);r=t.stateNode,dg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=lr(t,e.child,null,s),t.child=lr(t,null,l,s)):De(e,t,l,s),t.memoizedState=r.state,i&&xc(t,n,!0),t.child}function yh(e){var t=e.stateNode;t.pendingContext?kc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kc(e,t.context,!1),Ha(e,t.containerInfo)}function zc(e,t,n,r,i){return or(),ba(i),t.flags|=256,De(e,t,n,r),t.child}var $l={dehydrated:null,treeContext:null,retryLane:0};function Bl(e){return{baseLanes:e,cachePool:null,transitions:null}}function gh(e,t,n){var r=t.pendingProps,i=re.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),J(re,i&1),e===null)return jl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ro(o,r,0,null),e=An(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bl(n),t.memoizedState=$l,e):Xa(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return hg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=cn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=cn(l,s):(s=An(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Bl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=$l,r}return s=e.child,e=s.sibling,r=cn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Xa(e,t){return t=ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zi(e,t,n,r){return r!==null&&ba(r),lr(t,e.child,null,n),e=Xa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Uo(Error(C(422))),zi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ro({mode:"visible",children:r.children},i,0,null),s=An(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&lr(t,e.child,null,o),t.child.memoizedState=Bl(o),t.memoizedState=$l,s);if(!(t.mode&1))return zi(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(C(419)),r=Uo(s,r,void 0),zi(e,t,o,r)}if(l=(o&e.childLanes)!==0,He||l){if(r=Se,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ht(e,i),St(r,e,i,-1))}return ru(),r=Uo(Error(C(421))),zi(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Pg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Je=on(i.nextSibling),Ze=t,G=!0,gt=null,e!==null&&(st[ot++]=bt,st[ot++]=zt,st[ot++]=jn,bt=e.id,zt=e.overflow,jn=t),t=Xa(t,r.children),t.flags|=4096,t)}function $c(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ml(e.return,t,n)}function Ho(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(De(e,t,r.children,n),r=re.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$c(e,n,t);else if(e.tag===19)$c(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(J(re,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Os(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ho(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Os(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ho(t,!0,n,null,s);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(C(153));if(t.child!==null){for(e=t.child,n=cn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pg(e,t,n){switch(t.tag){case 3:yh(t),or();break;case 5:Vd(t);break;case 1:We(t.type)&&xs(t);break;case 4:Ha(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;J(Cs,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(J(re,re.current&1),t.flags|=128,null):n&t.child.childLanes?gh(e,t,n):(J(re,re.current&1),e=Vt(e,t,n),e!==null?e.sibling:null);J(re,re.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(re,re.current),r)break;return null;case 22:case 23:return t.lanes=0,ph(e,t,n)}return Vt(e,t,n)}var wh,Fl,Sh,kh;wh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fl=function(){};Sh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,On(Nt.current);var s=null;switch(n){case"input":i=ul(e,i),r=ul(e,r),s=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),s=[];break;case"textarea":i=dl(e,i),r=dl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ss)}pl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qr.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qr.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&X("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};kh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Pr(e,t){if(!G)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function mg(e,t,n){var r=t.pendingProps;switch(La(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return We(t.type)&&ks(),Oe(t),null;case 3:return r=t.stateNode,ar(),Z(Ve),Z(je),Wa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gt!==null&&(Ql(gt),gt=null))),Fl(e,t),Oe(t),null;case 5:Va(t);var i=On(li.current);if(n=t.type,e!==null&&t.stateNode!=null)Sh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(C(166));return Oe(t),null}if(e=On(Nt.current),Li(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ct]=t,r[si]=s,e=(t.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)X(Dr[i],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":qu(r,s),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},X("invalid",r);break;case"textarea":Ju(r,s),X("invalid",r)}pl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ri(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ri(r.textContent,l,e),i=["children",""+l]):Qr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&X("scroll",r)}switch(n){case"input":Ni(r),Qu(r,s,!0);break;case"textarea":Ni(r),Xu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ss)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ct]=t,e[si]=r,wh(e,t,!1,!1),t.stateNode=e;e:{switch(o=ml(n,r),n){case"dialog":X("cancel",e),X("close",e),i=r;break;case"iframe":case"object":case"embed":X("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)X(Dr[i],e);i=r;break;case"source":X("error",e),i=r;break;case"img":case"image":case"link":X("error",e),X("load",e),i=r;break;case"details":X("toggle",e),i=r;break;case"input":qu(e,r),i=ul(e,r),X("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),X("invalid",e);break;case"textarea":Ju(e,r),i=dl(e,r),X("invalid",e);break;default:i=r}pl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Zf(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Jf(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Jr(e,a):typeof a=="number"&&Jr(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qr.hasOwnProperty(s)?a!=null&&s==="onScroll"&&X("scroll",e):a!=null&&ka(e,s,a,o))}switch(n){case"input":Ni(e),Qu(e,r,!1);break;case"textarea":Ni(e),Xu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+dn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Zn(e,!!r.multiple,s,!1):r.defaultValue!=null&&Zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ss)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)kh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(C(166));if(n=On(li.current),On(Nt.current),Li(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ct]=t,(s=r.nodeValue!==n)&&(e=Ze,e!==null))switch(e.tag){case 3:Ri(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ri(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=t,t.stateNode=r}return Oe(t),null;case 13:if(Z(re),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(G&&Je!==null&&t.mode&1&&!(t.flags&128))$d(),or(),t.flags|=98560,s=!1;else if(s=Li(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(C(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[Ct]=t}else or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),s=!1}else gt!==null&&(Ql(gt),gt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||re.current&1?ge===0&&(ge=3):ru())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return ar(),Fl(e,t),e===null&&ri(t.stateNode.containerInfo),Oe(t),null;case 10:return Ba(t.type._context),Oe(t),null;case 17:return We(t.type)&&ks(),Oe(t),null;case 19:if(Z(re),s=t.memoizedState,s===null)return Oe(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Pr(s,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Os(e),o!==null){for(t.flags|=128,Pr(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return J(re,re.current&1|2),t.child}e=e.sibling}s.tail!==null&&ce()>cr&&(t.flags|=128,r=!0,Pr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Os(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!G)return Oe(t),null}else 2*ce()-s.renderingStartTime>cr&&n!==1073741824&&(t.flags|=128,r=!0,Pr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ce(),t.sibling=null,n=re.current,J(re,r?n&1|2:n&1),t):(Oe(t),null);case 22:case 23:return nu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Qe&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(C(156,t.tag))}function yg(e,t){switch(La(t),t.tag){case 1:return We(t.type)&&ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ar(),Z(Ve),Z(je),Wa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Va(t),null;case 13:if(Z(re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(C(340));or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(re),null;case 4:return ar(),null;case 10:return Ba(t.type._context),null;case 22:case 23:return nu(),null;case 24:return null;default:return null}}var $i=!1,Ie=!1,gg=typeof WeakSet=="function"?WeakSet:Set,j=null;function Jn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ue(e,t,r)}else n.current=null}function Ul(e,t,n){try{n()}catch(r){ue(e,t,r)}}var Bc=!1;function vg(e,t){if(Cl=gs,e=Pd(),Da(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===e)break t;if(h===n&&++u===i&&(l=o),h===s&&++c===r&&(a=o),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pl={focusedElem:e,selectionRange:n},gs=!1,j=t;j!==null;)if(t=j,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,j=e;else for(;j!==null;){t=j;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var k=w.memoizedProps,P=w.memoizedState,p=t.stateNode,d=p.getSnapshotBeforeUpdate(t.elementType===t.type?k:pt(t.type,k),P);p.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(S){ue(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,j=e;break}j=t.return}return w=Bc,Bc=!1,w}function Vr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ul(t,n,s)}i=i.next}while(i!==r)}}function to(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xh(e){var t=e.alternate;t!==null&&(e.alternate=null,xh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[si],delete t[Tl],delete t[eg],delete t[tg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _h(e){return e.tag===5||e.tag===3||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_h(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ss));else if(r!==4&&(e=e.child,e!==null))for(Vl(e,t,n),e=e.sibling;e!==null;)Vl(e,t,n),e=e.sibling}function Wl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Wl(e,t,n),e=e.sibling;e!==null;)Wl(e,t,n),e=e.sibling}var ke=null,mt=!1;function Qt(e,t,n){for(n=n.child;n!==null;)Eh(e,t,n),n=n.sibling}function Eh(e,t,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 5:Ie||Jn(n,t);case 6:var r=ke,i=mt;ke=null,Qt(e,t,n),ke=r,mt=i,ke!==null&&(mt?(e=ke,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(mt?(e=ke,n=n.stateNode,e.nodeType===8?Lo(e.parentNode,n):e.nodeType===1&&Lo(e,n),ei(e)):Lo(ke,n.stateNode));break;case 4:r=ke,i=mt,ke=n.stateNode.containerInfo,mt=!0,Qt(e,t,n),ke=r,mt=i;break;case 0:case 11:case 14:case 15:if(!Ie&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ul(n,t,o),i=i.next}while(i!==r)}Qt(e,t,n);break;case 1:if(!Ie&&(Jn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ue(n,t,l)}Qt(e,t,n);break;case 21:Qt(e,t,n);break;case 22:n.mode&1?(Ie=(r=Ie)||n.memoizedState!==null,Qt(e,t,n),Ie=r):Qt(e,t,n);break;default:Qt(e,t,n)}}function Uc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gg),t.forEach(function(r){var i=Ng.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ht(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,mt=!1;break e;case 3:ke=l.stateNode.containerInfo,mt=!0;break e;case 4:ke=l.stateNode.containerInfo,mt=!0;break e}l=l.return}if(ke===null)throw Error(C(160));Eh(s,o,i),ke=null,mt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ue(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ch(t,e),t=t.sibling}function Ch(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ht(t,e),xt(e),r&4){try{Vr(3,e,e.return),to(3,e)}catch(k){ue(e,e.return,k)}try{Vr(5,e,e.return)}catch(k){ue(e,e.return,k)}}break;case 1:ht(t,e),xt(e),r&512&&n!==null&&Jn(n,n.return);break;case 5:if(ht(t,e),xt(e),r&512&&n!==null&&Jn(n,n.return),e.flags&32){var i=e.stateNode;try{Jr(i,"")}catch(k){ue(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Kf(i,s),ml(l,o);var u=ml(l,s);for(o=0;o<a.length;o+=2){var c=a[o],f=a[o+1];c==="style"?Zf(i,f):c==="dangerouslySetInnerHTML"?Jf(i,f):c==="children"?Jr(i,f):ka(i,c,f,u)}switch(l){case"input":cl(i,s);break;case"textarea":qf(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Zn(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?Zn(i,!!s.multiple,s.defaultValue,!0):Zn(i,!!s.multiple,s.multiple?[]:"",!1))}i[si]=s}catch(k){ue(e,e.return,k)}}break;case 6:if(ht(t,e),xt(e),r&4){if(e.stateNode===null)throw Error(C(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){ue(e,e.return,k)}}break;case 3:if(ht(t,e),xt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ei(t.containerInfo)}catch(k){ue(e,e.return,k)}break;case 4:ht(t,e),xt(e);break;case 13:ht(t,e),xt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eu=ce())),r&4&&Uc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Ie=(u=Ie)||c,ht(t,e),Ie=u):ht(t,e),xt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(j=e,c=e.child;c!==null;){for(f=j=c;j!==null;){switch(h=j,g=h.child,h.tag){case 0:case 11:case 14:case 15:Vr(4,h,h.return);break;case 1:Jn(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(k){ue(r,n,k)}}break;case 5:Jn(h,h.return);break;case 22:if(h.memoizedState!==null){Vc(f);continue}}g!==null?(g.return=h,j=g):Vc(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Xf("display",o))}catch(k){ue(e,e.return,k)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){ue(e,e.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ht(t,e),xt(e),r&4&&Uc(e);break;case 21:break;default:ht(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_h(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jr(i,""),r.flags&=-33);var s=Fc(e);Wl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fc(e);Vl(e,l,o);break;default:throw Error(C(161))}}catch(a){ue(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wg(e,t,n){j=e,Ph(e)}function Ph(e,t,n){for(var r=(e.mode&1)!==0;j!==null;){var i=j,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$i;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ie;l=$i;var u=Ie;if($i=o,(Ie=a)&&!u)for(j=i;j!==null;)o=j,a=o.child,o.tag===22&&o.memoizedState!==null?Wc(i):a!==null?(a.return=o,j=a):Wc(i);for(;s!==null;)j=s,Ph(s),s=s.sibling;j=i,$i=l,Ie=u}Hc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,j=s):Hc(e)}}function Hc(e){for(;j!==null;){var t=j;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ie||to(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ie)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:pt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Nc(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Nc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ei(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Ie||t.flags&512&&Hl(t)}catch(h){ue(t,t.return,h)}}if(t===e){j=null;break}if(n=t.sibling,n!==null){n.return=t.return,j=n;break}j=t.return}}function Vc(e){for(;j!==null;){var t=j;if(t===e){j=null;break}var n=t.sibling;if(n!==null){n.return=t.return,j=n;break}j=t.return}}function Wc(e){for(;j!==null;){var t=j;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{to(4,t)}catch(a){ue(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){ue(t,i,a)}}var s=t.return;try{Hl(t)}catch(a){ue(t,s,a)}break;case 5:var o=t.return;try{Hl(t)}catch(a){ue(t,o,a)}}}catch(a){ue(t,t.return,a)}if(t===e){j=null;break}var l=t.sibling;if(l!==null){l.return=t.return,j=l;break}j=t.return}}var Sg=Math.ceil,Is=Yt.ReactCurrentDispatcher,Za=Yt.ReactCurrentOwner,ut=Yt.ReactCurrentBatchConfig,V=0,Se=null,he=null,_e=0,Qe=0,Xn=gn(0),ge=0,fi=null,Dn=0,no=0,Ga=0,Wr=null,Ue=null,eu=0,cr=1/0,Dt=null,js=!1,Yl=null,an=null,Bi=!1,tn=null,Ms=0,Yr=0,Kl=null,is=-1,ss=0;function Le(){return V&6?ce():is!==-1?is:is=ce()}function un(e){return e.mode&1?V&2&&_e!==0?_e&-_e:rg.transition!==null?(ss===0&&(ss=cd()),ss):(e=Y,e!==0||(e=window.event,e=e===void 0?16:gd(e.type)),e):1}function St(e,t,n,r){if(50<Yr)throw Yr=0,Kl=null,Error(C(185));wi(e,n,r),(!(V&2)||e!==Se)&&(e===Se&&(!(V&2)&&(no|=n),ge===4&&Gt(e,_e)),Ye(e,r),n===1&&V===0&&!(t.mode&1)&&(cr=ce()+500,Zs&&vn()))}function Ye(e,t){var n=e.callbackNode;ry(e,t);var r=ys(e,e===Se?_e:0);if(r===0)n!==null&&ec(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ec(n),t===1)e.tag===0?ng(Yc.bind(null,e)):Ld(Yc.bind(null,e)),Zy(function(){!(V&6)&&vn()}),n=null;else{switch(fd(r)){case 1:n=Pa;break;case 4:n=ad;break;case 16:n=ms;break;case 536870912:n=ud;break;default:n=ms}n=Dh(n,Nh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Nh(e,t){if(is=-1,ss=0,V&6)throw Error(C(327));var n=e.callbackNode;if(rr()&&e.callbackNode!==n)return null;var r=ys(e,e===Se?_e:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ds(e,r);else{t=r;var i=V;V|=2;var s=Th();(Se!==e||_e!==t)&&(Dt=null,cr=ce()+500,Tn(e,t));do try{_g();break}catch(l){Oh(e,l)}while(!0);$a(),Is.current=s,V=i,he!==null?t=0:(Se=null,_e=0,t=ge)}if(t!==0){if(t===2&&(i=Sl(e),i!==0&&(r=i,t=ql(e,i))),t===1)throw n=fi,Tn(e,0),Gt(e,r),Ye(e,ce()),n;if(t===6)Gt(e,r);else{if(i=e.current.alternate,!(r&30)&&!kg(i)&&(t=Ds(e,r),t===2&&(s=Sl(e),s!==0&&(r=s,t=ql(e,s))),t===1))throw n=fi,Tn(e,0),Gt(e,r),Ye(e,ce()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(C(345));case 2:En(e,Ue,Dt);break;case 3:if(Gt(e,r),(r&130023424)===r&&(t=eu+500-ce(),10<t)){if(ys(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Le(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ol(En.bind(null,e,Ue,Dt),t);break}En(e,Ue,Dt);break;case 4:if(Gt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-wt(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sg(r/1960))-r,10<r){e.timeoutHandle=Ol(En.bind(null,e,Ue,Dt),r);break}En(e,Ue,Dt);break;case 5:En(e,Ue,Dt);break;default:throw Error(C(329))}}}return Ye(e,ce()),e.callbackNode===n?Nh.bind(null,e):null}function ql(e,t){var n=Wr;return e.current.memoizedState.isDehydrated&&(Tn(e,t).flags|=256),e=Ds(e,t),e!==2&&(t=Ue,Ue=n,t!==null&&Ql(t)),e}function Ql(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function kg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!kt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gt(e,t){for(t&=~Ga,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-wt(t),r=1<<n;e[n]=-1,t&=~r}}function Yc(e){if(V&6)throw Error(C(327));rr();var t=ys(e,0);if(!(t&1))return Ye(e,ce()),null;var n=Ds(e,t);if(e.tag!==0&&n===2){var r=Sl(e);r!==0&&(t=r,n=ql(e,r))}if(n===1)throw n=fi,Tn(e,0),Gt(e,t),Ye(e,ce()),n;if(n===6)throw Error(C(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,En(e,Ue,Dt),Ye(e,ce()),null}function tu(e,t){var n=V;V|=1;try{return e(t)}finally{V=n,V===0&&(cr=ce()+500,Zs&&vn())}}function Rn(e){tn!==null&&tn.tag===0&&!(V&6)&&rr();var t=V;V|=1;var n=ut.transition,r=Y;try{if(ut.transition=null,Y=1,e)return e()}finally{Y=r,ut.transition=n,V=t,!(V&6)&&vn()}}function nu(){Qe=Xn.current,Z(Xn)}function Tn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Xy(n)),he!==null)for(n=he.return;n!==null;){var r=n;switch(La(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ks();break;case 3:ar(),Z(Ve),Z(je),Wa();break;case 5:Va(r);break;case 4:ar();break;case 13:Z(re);break;case 19:Z(re);break;case 10:Ba(r.type._context);break;case 22:case 23:nu()}n=n.return}if(Se=e,he=e=cn(e.current,null),_e=Qe=t,ge=0,fi=null,Ga=no=Dn=0,Ue=Wr=null,Nn!==null){for(t=0;t<Nn.length;t++)if(n=Nn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Nn=null}return e}function Oh(e,t){do{var n=he;try{if($a(),ts.current=As,Ts){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ts=!1}if(Mn=0,we=ye=ie=null,Hr=!1,ai=0,Za.current=null,n===null||n.return===null){ge=1,fi=t,he=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=_e,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Mc(o);if(g!==null){g.flags&=-257,Dc(g,o,l,s,t),g.mode&1&&jc(s,u,t),t=g,a=u;var w=t.updateQueue;if(w===null){var k=new Set;k.add(a),t.updateQueue=k}else w.add(a);break e}else{if(!(t&1)){jc(s,u,t),ru();break e}a=Error(C(426))}}else if(G&&l.mode&1){var P=Mc(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Dc(P,o,l,s,t),ba(ur(a,l));break e}}s=a=ur(a,l),ge!==4&&(ge=2),Wr===null?Wr=[s]:Wr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=fh(s,a,t);Pc(s,p);break e;case 1:l=a;var d=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof d.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(an===null||!an.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=dh(s,l,t);Pc(s,S);break e}}s=s.return}while(s!==null)}Ih(n)}catch(N){t=N,he===n&&n!==null&&(he=n=n.return);continue}break}while(!0)}function Th(){var e=Is.current;return Is.current=As,e===null?As:e}function ru(){(ge===0||ge===3||ge===2)&&(ge=4),Se===null||!(Dn&268435455)&&!(no&268435455)||Gt(Se,_e)}function Ds(e,t){var n=V;V|=2;var r=Th();(Se!==e||_e!==t)&&(Dt=null,Tn(e,t));do try{xg();break}catch(i){Oh(e,i)}while(!0);if($a(),V=n,Is.current=r,he!==null)throw Error(C(261));return Se=null,_e=0,ge}function xg(){for(;he!==null;)Ah(he)}function _g(){for(;he!==null&&!qm();)Ah(he)}function Ah(e){var t=Mh(e.alternate,e,Qe);e.memoizedProps=e.pendingProps,t===null?Ih(e):he=t,Za.current=null}function Ih(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yg(n,t),n!==null){n.flags&=32767,he=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,he=null;return}}else if(n=mg(n,t,Qe),n!==null){he=n;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);ge===0&&(ge=5)}function En(e,t,n){var r=Y,i=ut.transition;try{ut.transition=null,Y=1,Eg(e,t,n,r)}finally{ut.transition=i,Y=r}return null}function Eg(e,t,n,r){do rr();while(tn!==null);if(V&6)throw Error(C(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(C(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(iy(e,s),e===Se&&(he=Se=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bi||(Bi=!0,Dh(ms,function(){return rr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ut.transition,ut.transition=null;var o=Y;Y=1;var l=V;V|=4,Za.current=null,vg(e,n),Ch(n,e),Vy(Pl),gs=!!Cl,Pl=Cl=null,e.current=n,wg(n),Qm(),V=l,Y=o,ut.transition=s}else e.current=n;if(Bi&&(Bi=!1,tn=e,Ms=i),s=e.pendingLanes,s===0&&(an=null),Zm(n.stateNode),Ye(e,ce()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(js)throw js=!1,e=Yl,Yl=null,e;return Ms&1&&e.tag!==0&&rr(),s=e.pendingLanes,s&1?e===Kl?Yr++:(Yr=0,Kl=e):Yr=0,vn(),null}function rr(){if(tn!==null){var e=fd(Ms),t=ut.transition,n=Y;try{if(ut.transition=null,Y=16>e?16:e,tn===null)var r=!1;else{if(e=tn,tn=null,Ms=0,V&6)throw Error(C(331));var i=V;for(V|=4,j=e.current;j!==null;){var s=j,o=s.child;if(j.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(j=u;j!==null;){var c=j;switch(c.tag){case 0:case 11:case 15:Vr(8,c,s)}var f=c.child;if(f!==null)f.return=c,j=f;else for(;j!==null;){c=j;var h=c.sibling,g=c.return;if(xh(c),c===u){j=null;break}if(h!==null){h.return=g,j=h;break}j=g}}}var w=s.alternate;if(w!==null){var k=w.child;if(k!==null){w.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}j=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,j=o;else e:for(;j!==null;){if(s=j,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,j=p;break e}j=s.return}}var d=e.current;for(j=d;j!==null;){o=j;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,j=y;else e:for(o=d;j!==null;){if(l=j,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:to(9,l)}}catch(N){ue(l,l.return,N)}if(l===o){j=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,j=S;break e}j=l.return}}if(V=i,vn(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Ks,e)}catch{}r=!0}return r}finally{Y=n,ut.transition=t}}return!1}function Kc(e,t,n){t=ur(n,t),t=fh(e,t,1),e=ln(e,t,1),t=Le(),e!==null&&(wi(e,1,t),Ye(e,t))}function ue(e,t,n){if(e.tag===3)Kc(e,e,n);else for(;t!==null;){if(t.tag===3){Kc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(an===null||!an.has(r))){e=ur(n,e),e=dh(t,e,1),t=ln(t,e,1),e=Le(),t!==null&&(wi(t,1,e),Ye(t,e));break}}t=t.return}}function Cg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Le(),e.pingedLanes|=e.suspendedLanes&n,Se===e&&(_e&n)===n&&(ge===4||ge===3&&(_e&130023424)===_e&&500>ce()-eu?Tn(e,0):Ga|=n),Ye(e,t)}function jh(e,t){t===0&&(e.mode&1?(t=Ai,Ai<<=1,!(Ai&130023424)&&(Ai=4194304)):t=1);var n=Le();e=Ht(e,t),e!==null&&(wi(e,t,n),Ye(e,n))}function Pg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),jh(e,n)}function Ng(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(t),jh(e,n)}var Mh;Mh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ve.current)He=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return He=!1,pg(e,t,n);He=!!(e.flags&131072)}else He=!1,G&&t.flags&1048576&&bd(t,Es,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rs(e,t),e=t.pendingProps;var i=sr(t,je.current);nr(t,n),i=Ka(null,t,r,e,i,n);var s=qa();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,We(r)?(s=!0,xs(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ua(t),i.updater=eo,t.stateNode=i,i._reactInternals=t,Rl(t,r,e,n),t=zl(null,t,r,!0,s,n)):(t.tag=0,G&&s&&Ra(t),De(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Tg(r),e=pt(r,e),i){case 0:t=bl(null,t,r,e,n);break e;case 1:t=bc(null,t,r,e,n);break e;case 11:t=Rc(null,t,r,e,n);break e;case 14:t=Lc(null,t,r,pt(r.type,e),n);break e}throw Error(C(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pt(r,i),bl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pt(r,i),bc(e,t,r,i,n);case 3:e:{if(yh(t),e===null)throw Error(C(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Hd(e,t),Ns(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ur(Error(C(423)),t),t=zc(e,t,r,n,i);break e}else if(r!==i){i=ur(Error(C(424)),t),t=zc(e,t,r,n,i);break e}else for(Je=on(t.stateNode.containerInfo.firstChild),Ze=t,G=!0,gt=null,n=Fd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(or(),r===i){t=Vt(e,t,n);break e}De(e,t,r,n)}t=t.child}return t;case 5:return Vd(t),e===null&&jl(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Nl(r,i)?o=null:s!==null&&Nl(r,s)&&(t.flags|=32),mh(e,t),De(e,t,o,n),t.child;case 6:return e===null&&jl(t),null;case 13:return gh(e,t,n);case 4:return Ha(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lr(t,null,r,n):De(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pt(r,i),Rc(e,t,r,i,n);case 7:return De(e,t,t.pendingProps,n),t.child;case 8:return De(e,t,t.pendingProps.children,n),t.child;case 12:return De(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,J(Cs,r._currentValue),r._currentValue=o,s!==null)if(kt(s.value,o)){if(s.children===i.children&&!Ve.current){t=Vt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=$t(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ml(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ml(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}De(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,nr(t,n),i=ct(i),r=r(i),t.flags|=1,De(e,t,r,n),t.child;case 14:return r=t.type,i=pt(r,t.pendingProps),i=pt(r.type,i),Lc(e,t,r,i,n);case 15:return hh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pt(r,i),rs(e,t),t.tag=1,We(r)?(e=!0,xs(t)):e=!1,nr(t,n),ch(t,r,i),Rl(t,r,i,n),zl(null,t,r,!0,e,n);case 19:return vh(e,t,n);case 22:return ph(e,t,n)}throw Error(C(156,t.tag))};function Dh(e,t){return ld(e,t)}function Og(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(e,t,n,r){return new Og(e,t,n,r)}function iu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tg(e){if(typeof e=="function")return iu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_a)return 11;if(e===Ea)return 14}return 2}function cn(e,t){var n=e.alternate;return n===null?(n=at(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function os(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")iu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Fn:return An(n.children,i,s,t);case xa:o=8,i|=8;break;case sl:return e=at(12,n,t,i|2),e.elementType=sl,e.lanes=s,e;case ol:return e=at(13,n,t,i),e.elementType=ol,e.lanes=s,e;case ll:return e=at(19,n,t,i),e.elementType=ll,e.lanes=s,e;case Vf:return ro(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Uf:o=10;break e;case Hf:o=9;break e;case _a:o=11;break e;case Ea:o=14;break e;case Jt:o=16,r=null;break e}throw Error(C(130,e==null?e:typeof e,""))}return t=at(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function An(e,t,n,r){return e=at(7,e,r,t),e.lanes=n,e}function ro(e,t,n,r){return e=at(22,e,r,t),e.elementType=Vf,e.lanes=n,e.stateNode={isHidden:!1},e}function Vo(e,t,n){return e=at(6,e,null,t),e.lanes=n,e}function Wo(e,t,n){return t=at(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ag(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Co(0),this.expirationTimes=Co(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Co(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function su(e,t,n,r,i,s,o,l,a){return e=new Ag(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=at(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(s),e}function Ig(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Rh(e){if(!e)return hn;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(C(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(We(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(C(171))}if(e.tag===1){var n=e.type;if(We(n))return Rd(e,n,t)}return t}function Lh(e,t,n,r,i,s,o,l,a){return e=su(n,r,!0,e,i,s,o,l,a),e.context=Rh(null),n=e.current,r=Le(),i=un(n),s=$t(r,i),s.callback=t??null,ln(n,s,i),e.current.lanes=i,wi(e,i,r),Ye(e,r),e}function io(e,t,n,r){var i=t.current,s=Le(),o=un(i);return n=Rh(n),t.context===null?t.context=n:t.pendingContext=n,t=$t(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ln(i,t,o),e!==null&&(St(e,i,o,s),es(e,i,o)),o}function Rs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ou(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}function jg(){return null}var bh=typeof reportError=="function"?reportError:function(e){console.error(e)};function lu(e){this._internalRoot=e}so.prototype.render=lu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(C(409));io(e,t,null,null)};so.prototype.unmount=lu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rn(function(){io(null,e,null,null)}),t[Ut]=null}};function so(e){this._internalRoot=e}so.prototype.unstable_scheduleHydration=function(e){if(e){var t=pd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zt.length&&t!==0&&t<Zt[n].priority;n++);Zt.splice(n,0,e),n===0&&yd(e)}};function au(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qc(){}function Mg(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Rs(o);s.call(u)}}var o=Lh(t,r,e,0,null,!1,!1,"",Qc);return e._reactRootContainer=o,e[Ut]=o.current,ri(e.nodeType===8?e.parentNode:e),Rn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Rs(a);l.call(u)}}var a=su(e,0,!1,null,null,!1,!1,"",Qc);return e._reactRootContainer=a,e[Ut]=a.current,ri(e.nodeType===8?e.parentNode:e),Rn(function(){io(t,a,n,r)}),a}function lo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Rs(o);l.call(a)}}io(t,o,e,i)}else o=Mg(n,t,e,i,r);return Rs(o)}dd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mr(t.pendingLanes);n!==0&&(Na(t,n|1),Ye(t,ce()),!(V&6)&&(cr=ce()+500,vn()))}break;case 13:Rn(function(){var r=Ht(e,1);if(r!==null){var i=Le();St(r,e,1,i)}}),ou(e,1)}};Oa=function(e){if(e.tag===13){var t=Ht(e,134217728);if(t!==null){var n=Le();St(t,e,134217728,n)}ou(e,134217728)}};hd=function(e){if(e.tag===13){var t=un(e),n=Ht(e,t);if(n!==null){var r=Le();St(n,e,t,r)}ou(e,t)}};pd=function(){return Y};md=function(e,t){var n=Y;try{return Y=e,t()}finally{Y=n}};gl=function(e,t,n){switch(t){case"input":if(cl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Xs(r);if(!i)throw Error(C(90));Yf(r),cl(r,i)}}}break;case"textarea":qf(e,n);break;case"select":t=n.value,t!=null&&Zn(e,!!n.multiple,t,!1)}};td=tu;nd=Rn;var Dg={usingClientEntryPoint:!1,Events:[ki,Wn,Xs,Gf,ed,tu]},Nr={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rg={bundleType:Nr.bundleType,version:Nr.version,rendererPackageName:Nr.rendererPackageName,rendererConfig:Nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sd(e),e===null?null:e.stateNode},findFiberByHostInstance:Nr.findFiberByHostInstance||jg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Ks=Fi.inject(Rg),Pt=Fi}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dg;nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!au(t))throw Error(C(200));return Ig(e,t,null,n)};nt.createRoot=function(e,t){if(!au(e))throw Error(C(299));var n=!1,r="",i=bh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=su(e,1,!1,null,null,n,!1,r,i),e[Ut]=t.current,ri(e.nodeType===8?e.parentNode:e),new lu(t)};nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(C(188)):(e=Object.keys(e).join(","),Error(C(268,e)));return e=sd(t),e=e===null?null:e.stateNode,e};nt.flushSync=function(e){return Rn(e)};nt.hydrate=function(e,t,n){if(!oo(t))throw Error(C(200));return lo(null,e,t,!0,n)};nt.hydrateRoot=function(e,t,n){if(!au(e))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Lh(t,null,e,1,n??null,i,!1,s,o),e[Ut]=t.current,ri(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new so(t)};nt.render=function(e,t,n){if(!oo(t))throw Error(C(200));return lo(null,e,t,!1,n)};nt.unmountComponentAtNode=function(e){if(!oo(e))throw Error(C(40));return e._reactRootContainer?(Rn(function(){lo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1};nt.unstable_batchedUpdates=tu;nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oo(n))throw Error(C(200));if(e==null||e._reactInternals===void 0)throw Error(C(38));return lo(e,t,n,!1,r)};nt.version="18.3.1-next-f1338f8080-20240426";function zh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zh)}catch(e){console.error(e)}}zh(),zf.exports=nt;var Lg=zf.exports,$h,Jc=Lg;$h=Jc.createRoot,Jc.hydrateRoot;let bg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",zg=(e=21)=>{let t="",n=e|0;for(;n--;)t+=bg[Math.random()*64|0];return t};function vt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fr(e){return!!e&&!!e[et]}function Ln(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Yg}(e)||Array.isArray(e)||!!e[sf]||!!(!((t=e.constructor)===null||t===void 0)&&t[sf])||uu(e)||cu(e))}function di(e,t,n){n===void 0&&(n=!1),yr(e)===0?(n?Object.keys:mu)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function yr(e){var t=e[et];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:uu(e)?2:cu(e)?3:0}function Jl(e,t){return yr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $g(e,t){return yr(e)===2?e.get(t):e[t]}function Bh(e,t,n){var r=yr(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Bg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function uu(e){return Vg&&e instanceof Map}function cu(e){return Wg&&e instanceof Set}function Cn(e){return e.o||e.t}function fu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Kg(e);delete t[et];for(var n=mu(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function du(e,t){return t===void 0&&(t=!1),hu(e)||fr(e)||!Ln(e)||(yr(e)>1&&(e.set=e.add=e.clear=e.delete=Fg),Object.freeze(e),t&&di(e,function(n,r){return du(r,!0)},!0)),e}function Fg(){vt(2)}function hu(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ot(e){var t=qg[e];return t||vt(18,e),t}function Xc(){return hi}function Yo(e,t){t&&(Ot("Patches"),e.u=[],e.s=[],e.v=t)}function Ls(e){Xl(e),e.p.forEach(Ug),e.p=null}function Xl(e){e===hi&&(hi=e.l)}function Zc(e){return hi={p:[],l:hi,h:e,m:!0,_:0}}function Ug(e){var t=e[et];t.i===0||t.i===1?t.j():t.g=!0}function Ko(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Ot("ES5").S(t,e,r),r?(n[et].P&&(Ls(t),vt(4)),Ln(e)&&(e=bs(t,e),t.l||zs(t,e)),t.u&&Ot("Patches").M(n[et].t,e,t.u,t.s)):e=bs(t,n,[]),Ls(t),t.u&&t.v(t.u,t.s),e!==Fh?e:void 0}function bs(e,t,n){if(hu(t))return t;var r=t[et];if(!r)return di(t,function(l,a){return Gc(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return zs(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=fu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),di(s,function(l,a){return Gc(e,r,i,l,a,n,o)}),zs(e,i,!1),n&&e.u&&Ot("Patches").N(r,n,e.u,e.s)}return r.o}function Gc(e,t,n,r,i,s,o){if(fr(i)){var l=bs(e,i,s&&t&&t.i!==3&&!Jl(t.R,r)?s.concat(r):void 0);if(Bh(n,r,l),!fr(l))return;e.m=!1}else o&&n.add(i);if(Ln(i)&&!hu(i)){if(!e.h.D&&e._<1)return;bs(e,i),t&&t.A.l||zs(e,i)}}function zs(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&du(t,n)}function qo(e,t){var n=e[et];return(n?Cn(n):e)[t]}function ef(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Zl(e){e.P||(e.P=!0,e.l&&Zl(e.l))}function Qo(e){e.o||(e.o=fu(e.t))}function Gl(e,t,n){var r=uu(t)?Ot("MapSet").F(t,n):cu(t)?Ot("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:Xc(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=ea;o&&(a=[l],u=Rr);var c=Proxy.revocable(a,u),f=c.revoke,h=c.proxy;return l.k=h,l.j=f,h}(t,n):Ot("ES5").J(t,n);return(n?n.A:Xc()).p.push(r),r}function Hg(e){return fr(e)||vt(22,e),function t(n){if(!Ln(n))return n;var r,i=n[et],s=yr(n);if(i){if(!i.P&&(i.i<4||!Ot("ES5").K(i)))return i.t;i.I=!0,r=tf(n,s),i.I=!1}else r=tf(n,s);return di(r,function(o,l){i&&$g(i.t,o)===l||Bh(r,o,t(l))}),s===3?new Set(r):r}(e)}function tf(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return fu(e)}var nf,hi,pu=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Vg=typeof Map<"u",Wg=typeof Set<"u",rf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Fh=pu?Symbol.for("immer-nothing"):((nf={})["immer-nothing"]=!0,nf),sf=pu?Symbol.for("immer-draftable"):"__$immer_draftable",et=pu?Symbol.for("immer-state"):"__$immer_state",Yg=""+Object.prototype.constructor,mu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Kg=Object.getOwnPropertyDescriptors||function(e){var t={};return mu(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},qg={},ea={get:function(e,t){if(t===et)return e;var n=Cn(e);if(!Jl(n,t))return function(i,s,o){var l,a=ef(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ln(r)?r:r===qo(e.t,t)?(Qo(e),e.o[t]=Gl(e.A.h,r,e)):r},has:function(e,t){return t in Cn(e)},ownKeys:function(e){return Reflect.ownKeys(Cn(e))},set:function(e,t,n){var r=ef(Cn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=qo(Cn(e),t),s=i==null?void 0:i[et];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Bg(n,i)&&(n!==void 0||Jl(e.t,t)))return!0;Qo(e),Zl(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return qo(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Qo(e),Zl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Cn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){vt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){vt(12)}},Rr={};di(ea,function(e,t){Rr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Rr.deleteProperty=function(e,t){return Rr.set.call(this,e,t,void 0)},Rr.set=function(e,t,n){return ea.set.call(this,e[0],t,n,e[0])};var Qg=function(){function e(n){var r=this;this.O=rf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(k){var P=this;k===void 0&&(k=l);for(var p=arguments.length,d=Array(p>1?p-1:0),y=1;y<p;y++)d[y-1]=arguments[y];return a.produce(k,function(S){var N;return(N=s).call.apply(N,[P,S].concat(d))})}}var u;if(typeof s!="function"&&vt(6),o!==void 0&&typeof o!="function"&&vt(7),Ln(i)){var c=Zc(r),f=Gl(r,i,void 0),h=!0;try{u=s(f),h=!1}finally{h?Ls(c):Xl(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(k){return Yo(c,o),Ko(k,c)},function(k){throw Ls(c),k}):(Yo(c,o),Ko(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Fh&&(u=void 0),r.D&&du(u,!0),o){var g=[],w=[];Ot("Patches").M(i,u,g,w),o(g,w)}return u}vt(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(f))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ln(n)||vt(8),fr(n)&&(n=Hg(n));var r=Zc(this),i=Gl(this,n,void 0);return i[et].C=!0,Xl(r),i},t.finishDraft=function(n,r){var i=n&&n[et],s=i.A;return Yo(s,r),Ko(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!rf&&vt(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ot("Patches").$;return fr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),tt=new Qg,Jg=tt.produce;tt.produceWithPatches.bind(tt);tt.setAutoFreeze.bind(tt);tt.setUseProxies.bind(tt);tt.applyPatches.bind(tt);tt.createDraft.bind(tt);tt.finishDraft.bind(tt);class Xg{constructor(t){const n=Zg();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function Zg(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function of(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Uh(e,t){const n=new Xg(e),r=n.next.bind(n);return t&&of(t,n),r.state=()=>of(n,{}),r}class lf{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=Uh(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const Gg={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new lf(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=lf.seed()),{seed:t}},playerView:()=>{}};var ev=Function.prototype,tv=ev.toString;tv.call(Object);const pi="MAKE_MOVE",ao="GAME_EVENT",uo="REDO",yu="RESET",gu="SYNC",co="UNDO",vu="UPDATE",wu="PATCH",Hh="PLUGIN",fo="STRIP_TRANSIENTS",Vh=(e,t,n,r)=>({type:pi,payload:{type:e,args:t,playerID:n,credentials:r}}),Kr=(e,t,n,r)=>({type:ao,payload:{type:e,args:t,playerID:n,credentials:r}}),Wh=(e,t,n,r)=>({type:ao,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Yh=e=>({type:gu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),Kh=(e,t,n,r)=>({type:wu,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),qh=(e,t)=>({type:vu,state:e,deltalog:t,clientOnly:!0}),Qh=e=>({type:yu,state:e,clientOnly:!0}),Jh=(e,t)=>({type:co,payload:{type:null,args:null,playerID:e,credentials:t}}),Xh=(e,t)=>({type:uo,payload:{type:null,args:null,playerID:e,credentials:t}}),nv=(e,t,n,r)=>({type:Hh,payload:{type:e,args:t,playerID:n,credentials:r}}),Zh=()=>({type:fo});var rv=Object.freeze({__proto__:null,makeMove:Vh,gameEvent:Kr,automaticGameEvent:Wh,sync:Yh,patch:Kh,update:qh,reset:Qh,undo:Jh,redo:Xh,plugin:nv,stripTransients:Zh});const pn="INVALID_MOVE",iv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=Jg(t.G,s=>{const o=e({...t,G:s},...n);if(o===pn){r=!0;return}return o});return r?pn:i}};var Ae;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Ae||(Ae={}));var Rt;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Rt||(Rt={}));class sv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,Rt.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,Rt.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Ae.TURN_ON_END:case Ae.PHASE_ON_END:return r(s.error,Rt.StageEventInOnEnd);case Ae.PHASE_ON_BEGIN:return r(s.error,Rt.StageEventInPhaseBegin);case Ae.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,Rt.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Ae.TURN_ON_END||s.calledFrom===Ae.PHASE_ON_END)return r(s.error,Rt.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Ae.PHASE_ON_END)return r(s.error,Rt.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=Wh(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const Su={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new sv(e.flow,t,n).api()},ov={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},lv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},av=(...e)=>console.error(...e);function W(e){av("ERROR:",e)}const ku=[iv,Gg,ov,lv],_i=[...ku,Su],uv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),dr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),Gh=(e,t,n)=>[...ku,...n,Su].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),cv=(e,t)=>([..._i,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),ta=(e,t)=>([..._i,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),fv=(e,t)=>([...ku,...t.game.plugins,Su].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),dv=(e,t)=>[..._i,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),hv=(e,t)=>[..._i,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,ep=(e,t)=>{const n=fv(e,t),r=hv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return W(`${i} plugin declared action invalid:
${s}`),[e,r]},tp=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([..._i,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function $s(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Bs(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Fs.NULL),n=a}else{if($s(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Ui(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Ui(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Ui(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Ui(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function pv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=Bs(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Ui(e,t,n,r,i){(typeof i!="object"||i===Fs.NULL)&&(i={stage:i}),i.stage!==void 0&&($s(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function na(e,t){return e[t]+""}function mv(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...dr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((h,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&W(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const f=na(a,u);return r={...r,currentPlayer:f,playOrderPos:u,playOrder:a},r=Bs(r,t.activePlayers||{}),r}function yv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&W(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=na(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:W(`invalid argument to endTurn: ${u}`)}});else{const c={...dr(e),G:s,ctx:o},f=i.next(c),h=typeof f;f!==void 0&&h!=="number"&&W(`invalid value returned by turn.order.next  expected number or undefined got ${h} ${f}.`),f===void 0?a=!0:(l=f,t=na(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const gv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Fs={NULL:null};var xu={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.Pointer=Bt.escapeToken=Bt.unescapeToken=void 0;function np(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Bt.unescapeToken=np;function rp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Bt.escapeToken=rp;var vv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(np);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(rp).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Bt.Pointer=vv;var ae={},_u={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(_u);var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.diffAny=Re.diffObjects=Re.diffArrays=Re.intersection=Re.subtract=Re.isDestructive=void 0;var mi=_u;function wv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}Re.isDestructive=wv;function ra(e,t){var n={};for(var r in e)mi.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)mi.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}Re.subtract=ra;function ip(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)mi.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}Re.intersection=ip;function Sv(e){return e.op==="add"}function kv(e){return e.op==="remove"}function Jo(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function sp(e,t,n,r){r===void 0&&(r=ho);var i={"0,0":{operations:[],cost:0}};function s(c,f){var h="".concat(c,",").concat(f),g=i[h];if(g===void 0){if(c>0&&f>0&&!r(e[c-1],t[f-1],n.add(String(c-1))).length)g=s(c-1,f-1);else{var w=[];if(c>0){var k=s(c-1,f),P={op:"remove",index:c-1};w.push(Jo(k,P))}if(f>0){var p=s(c,f-1),d={op:"add",index:c-1,value:t[f-1]};w.push(Jo(p,d))}if(c>0&&f>0){var y=s(c-1,f-1),S={op:"replace",index:c-1,original:e[c-1],value:t[f-1]};w.push(Jo(y,S))}var N=w.sort(function(A,O){return A.cost-O.cost})[0];g=N}i[h]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,f){var h=c[0],g=c[1];if(Sv(f)){var w=f.index+1+g,k=w<o+g?String(w):"-",P={op:f.op,path:n.add(k).toString(),value:f.value};return[h.concat(P),g+1]}else if(kv(f)){var P={op:f.op,path:n.add(String(f.index+g)).toString()};return[h.concat(P),g-1]}else{var p=n.add(String(f.index+g)),d=r(f.original,f.value,p);return[h.concat.apply(h,d),g]}},[[],0])[0];return u}Re.diffArrays=sp;function op(e,t,n,r){r===void 0&&(r=ho);var i=[];return ra(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),ra(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),ip([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}Re.diffObjects=op;function ho(e,t,n,r){if(r===void 0&&(r=ho),e===t)return[];var i=(0,mi.objectType)(e),s=(0,mi.objectType)(t);return i=="array"&&s=="array"?sp(e,t,n,r):i=="object"&&s=="object"?op(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Re.diffAny=ho;var Eu=br&&br.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ae,"__esModule",{value:!0});ae.apply=ae.InvalidOperationError=ae.test=ae.copy=ae.move=ae.replace=ae.remove=ae.add=ae.TestError=ae.MissingError=void 0;var Wt=Bt,Cu=_u,xv=Re,Tt=function(e){Eu(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);ae.MissingError=Tt;var lp=function(e){Eu(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);ae.TestError=lp;function Pu(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function ap(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function up(e,t){var n=Wt.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Tt(t.path):(Pu(n.parent,n.key,(0,Cu.clone)(t.value)),null)}ae.add=up;function cp(e,t){var n=Wt.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new Tt(t.path):(ap(n.parent,n.key),null)}ae.remove=cp;function fp(e,t){var n=Wt.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new Tt(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new Tt(t.path)}else if(n.value===void 0)return new Tt(t.path);return n.parent[n.key]=(0,Cu.clone)(t.value),null}ae.replace=fp;function dp(e,t){var n=Wt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Tt(t.from);var r=Wt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Tt(t.path):(ap(n.parent,n.key),Pu(r.parent,r.key,n.value),null)}ae.move=dp;function hp(e,t){var n=Wt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Tt(t.from);var r=Wt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Tt(t.path):(Pu(r.parent,r.key,(0,Cu.clone)(n.value)),null)}ae.copy=hp;function pp(e,t){var n=Wt.Pointer.fromJSON(t.path).evaluate(e);return(0,xv.diffAny)(n.value,t.value,new Wt.Pointer).length?new lp(n.value,t.value):null}ae.test=pp;var mp=function(e){Eu(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);ae.InvalidOperationError=mp;function _v(e,t){switch(t.op){case"add":return up(e,t);case"remove":return cp(e,t);case"replace":return fp(e,t);case"move":return dp(e,t);case"copy":return hp(e,t);case"test":return pp(e,t)}return new mp(t)}ae.apply=_v;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Bt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=ae,r=Re;function i(u,c){return c.map(function(f){return(0,n.apply)(u,f)})}e.applyPatch=i;function s(u){function c(f,h,g){var w=u(f,h,g);return Array.isArray(w)?w:(0,r.diffAny)(f,h,g,c)}return c}function o(u,c,f){var h=new t.Pointer;return(f?s(f):r.diffAny)(u,c,h)}e.createPatch=o;function l(u,c){var f=t.Pointer.fromJSON(c).evaluate(u);if(f!==void 0)return{op:"test",path:c,value:f.value}}function a(u,c){var f=new Array;return c.filter(r.isDestructive).forEach(function(h){var g=l(u,h.path);if(g&&f.push(g),"from"in h){var w=l(u,h.from);w&&f.push(w)}}),f}e.createTests=a})(xu);function Ev({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:v})=>v),i||(i={});const l={...t};""in l&&W("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(v=>u.add(v));const f=(v,x)=>{const E=Gh(v,x,o);return z=>{const R=dr(z);return E({...R,G:z.G,ctx:z.ctx,playerID:z.playerID})}},h=v=>x=>{const E=dr(x);return v({...E,G:x.G,ctx:x.ctx})},g={onEnd:f(r,Ae.GAME_ON_END),endIf:h(n)};for(const v in l){const x=l[v];if(x.start===!0&&(c=v),x.moves!==void 0)for(const E of Object.keys(x.moves))a[v+"."+E]=x.moves[E],u.add(E);x.endIf===void 0&&(x.endIf=()=>{}),x.onBegin===void 0&&(x.onBegin=({G:E})=>E),x.onEnd===void 0&&(x.onEnd=({G:E})=>E),x.turn===void 0&&(x.turn=i),x.turn.order===void 0&&(x.turn.order=gv.DEFAULT),x.turn.onBegin===void 0&&(x.turn.onBegin=({G:E})=>E),x.turn.onEnd===void 0&&(x.turn.onEnd=({G:E})=>E),x.turn.endIf===void 0&&(x.turn.endIf=()=>!1),x.turn.onMove===void 0&&(x.turn.onMove=({G:E})=>E),x.turn.stages===void 0&&(x.turn.stages={}),$s(x.turn,!0);for(const E in x.turn.stages){const R=x.turn.stages[E].moves||{};for(const _ of Object.keys(R)){const M=v+"."+E+"."+_;a[M]=R[_],u.add(_)}}if(x.wrapped={onBegin:f(x.onBegin,Ae.PHASE_ON_BEGIN),onEnd:f(x.onEnd,Ae.PHASE_ON_END),endIf:h(x.endIf)},x.turn.wrapped={onMove:f(x.turn.onMove,Ae.TURN_ON_MOVE),onBegin:f(x.turn.onBegin,Ae.TURN_ON_BEGIN),onEnd:f(x.turn.onEnd,Ae.TURN_ON_END),endIf:h(x.turn.endIf)},typeof x.next!="function"){const{next:E}=x;x.next=()=>E||null}x.wrapped.next=h(x.next)}function w(v){return v.phase?l[v.phase]:l[""]}function k(v){return v}function P(v,x){const E=new Set,z=new Set;for(let R=0;R<x.length;R++){const{fn:_,arg:M,...B}=x[R];if(_===ee){z.clear();const ve=v.ctx.phase;if(E.has(ve)){const Pe={...v.ctx,phase:null};return{...v,ctx:Pe}}E.add(ve)}const de=[];if(v=_(v,{...B,arg:M,next:de}),_===K)break;const Q=I(v);if(Q){x.push({fn:K,arg:Q,turn:v.ctx.turn,phase:v.ctx.phase,automatic:!0});continue}const le=H(v);if(le){x.push({fn:ee,arg:le,turn:v.ctx.turn,phase:v.ctx.phase,automatic:!0});continue}if([k,A,O].includes(_)){const ve=L(v);if(ve){x.push({fn:me,arg:ve,turn:v.ctx.turn,phase:v.ctx.phase,automatic:!0});continue}}x.push(...de)}return v}function p(v,{next:x}){return x.push({fn:d}),v}function d(v,{next:x}){let{G:E,ctx:z}=v;return E=w(z).wrapped.onBegin(v),x.push({fn:y}),{...v,G:E,ctx:z}}function y(v,{currentPlayer:x}){let{ctx:E}=v;const z=w(E);x?(E={...E,currentPlayer:x},z.turn.activePlayers&&(E=Bs(E,z.turn.activePlayers))):E=mv(v,z.turn);const R=E.turn+1;E={...E,turn:R,numMoves:0,_prevActivePlayers:[]};const _=z.turn.wrapped.onBegin({...v,ctx:E});return{...v,G:_,ctx:E,_undo:[],_redo:[]}}function S(v,{arg:x,next:E,phase:z}){const R=w({phase:z});let{ctx:_}=v;if(x&&x.next)if(x.next in l)_={..._,phase:x.next};else return W("invalid phase: "+x.next),v;else _={..._,phase:R.wrapped.next(v)||null};return v={...v,ctx:_},E.push({fn:d}),v}function N(v,{arg:x,currentPlayer:E,next:z}){let{G:R,ctx:_}=v;const M=w(_),{endPhase:B,ctx:de}=yv(v,E,M.turn,x);return _=de,v={...v,G:R,ctx:_},B?z.push({fn:ee,turn:_.turn,phase:_.phase}):z.push({fn:y,currentPlayer:_.currentPlayer}),v}function A(v,{arg:x,playerID:E}){if((typeof x=="string"||x===Fs.NULL)&&(x={stage:x}),typeof x!="object")return v;$s(x);let{ctx:z}=v,{activePlayers:R,_activePlayersMinMoves:_,_activePlayersMaxMoves:M,_activePlayersNumMoves:B}=z;return x.stage!==void 0&&(R===null&&(R={}),R[E]=x.stage,B[E]=0,x.minMoves&&(_===null&&(_={}),_[E]=x.minMoves),x.maxMoves&&(M===null&&(M={}),M[E]=x.maxMoves)),z={...z,activePlayers:R,_activePlayersMinMoves:_,_activePlayersMaxMoves:M,_activePlayersNumMoves:B},{...v,ctx:z}}function O(v,{arg:x}){return{...v,ctx:Bs(v.ctx,x)}}function I(v){return g.endIf(v)}function H(v){return w(v.ctx).wrapped.endIf(v)}function L(v){const x=w(v.ctx),E=v.ctx.numMoves||0;return x.turn.maxMoves&&E>=x.turn.maxMoves?!0:x.turn.wrapped.endIf(v)}function K(v,{arg:x,phase:E}){v=ee(v,{}),x===void 0&&(x=!0),v={...v,ctx:{...v.ctx,gameover:x}};const z=g.onEnd(v);return{...v,G:z}}function ee(v,{arg:x,next:E,turn:z,automatic:R}){v=me(v,{turn:z,force:!0,automatic:!0});const{phase:_,turn:M}=v.ctx;if(E&&E.push({fn:S,arg:x,phase:_}),_===null)return v;const de=w(v.ctx).wrapped.onEnd(v),Q={...v.ctx,phase:null},le=Kr("endPhase",x),{_stateID:ve}=v,Pe={action:le,_stateID:ve,turn:M,phase:_};R&&(Pe.automatic=!0);const wn=[...v.deltalog||[],Pe];return{...v,G:de,ctx:Q,deltalog:wn}}function me(v,{arg:x,next:E,turn:z,force:R,automatic:_,playerID:M}){if(z!==v.ctx.turn)return v;const{currentPlayer:B,numMoves:de,phase:Q,turn:le}=v.ctx,ve=w(v.ctx),Pe=de||0;if(!R&&ve.turn.minMoves&&Pe<ve.turn.minMoves)return`${ve.turn.minMoves}`,v;const wn=ve.turn.wrapped.onEnd(v);E&&E.push({fn:N,arg:x,currentPlayer:B});let qt={...v.ctx,activePlayers:null};if(x&&x.remove){M=M||B;const Sn=qt.playOrder.filter(cm=>cm!=M),um=qt.playOrderPos>Sn.length-1?0:qt.playOrderPos;if(qt={...qt,playOrder:Sn,playOrderPos:um},Sn.length===0)return E.push({fn:ee,turn:le,phase:Q}),v}const vo=Kr("endTurn",x),{_stateID:Fu}=v,wr={action:vo,_stateID:Fu,turn:le,phase:Q};_&&(wr.automatic=!0);const wo=[...v.deltalog||[],wr];return{...v,G:wn,ctx:qt,deltalog:wo,_undo:[],_redo:[]}}function te(v,{arg:x,next:E,automatic:z,playerID:R}){R=R||v.ctx.currentPlayer;let{ctx:_,_stateID:M}=v,{activePlayers:B,_activePlayersNumMoves:de,_activePlayersMinMoves:Q,_activePlayersMaxMoves:le,phase:ve,turn:Pe}=_;const wn=B!==null&&R in B,qt=w(_);if(!x&&wn){const Sn=qt.turn.stages[B[R]];Sn&&Sn.next&&(x=Sn.next)}if(E&&E.push({fn:A,arg:x,playerID:R}),!wn)return v;const vo=de[R]||0;if(Q&&Q[R]&&vo<Q[R])return`${Q[R]}`,v;B={...B},delete B[R],Q&&(Q={...Q},delete Q[R]),le&&(le={...le},delete le[R]),_=pv({..._,activePlayers:B,_activePlayersMinMoves:Q,_activePlayersMaxMoves:le});const wr={action:Kr("endStage",x),_stateID:M,turn:Pe,phase:ve};z&&(wr.automatic=!0);const wo=[...v.deltalog||[],wr];return{...v,ctx:_,deltalog:wo}}function $e(v,x,E){const z=w(v),R=z.turn.stages,{activePlayers:_}=v;if(_&&_[E]!==void 0&&_[E]!==Fs.NULL&&R[_[E]]!==void 0&&R[_[E]].moves!==void 0){const B=R[_[E]].moves;if(x in B)return B[x]}else if(z.moves){if(x in z.moves)return z.moves[x]}else if(x in e)return e[x];return null}function Ce(v,x){const{playerID:E,type:z}=x,{currentPlayer:R,activePlayers:_,_activePlayersMaxMoves:M}=v.ctx,B=$e(v.ctx,z,E),de=!B||typeof B=="function"||B.noLimit!==!0;let{numMoves:Q,_activePlayersNumMoves:le}=v.ctx;de&&(E===R&&Q++,_&&le[E]++),v={...v,ctx:{...v.ctx,numMoves:Q,_activePlayersNumMoves:le}},M&&le[E]>=M[E]&&(v=te(v,{playerID:E,automatic:!0}));const Pe=w(v.ctx).turn.wrapped.onMove({...v,playerID:E});return v={...v,G:Pe},P(v,[{fn:k}])}function oe(v,x,E){return P(v,[{fn:te,arg:E,playerID:x}])}function T(v,x){return P(v,[{fn:te,playerID:x}])}function b(v,x,E){return P(v,[{fn:O,arg:E}])}function $(v,x,E){return P(v,[{fn:ee,phase:v.ctx.phase,turn:v.ctx.turn,arg:{next:E}}])}function q(v){return P(v,[{fn:ee,phase:v.ctx.phase,turn:v.ctx.turn}])}function ne(v,x,E){return P(v,[{fn:me,turn:v.ctx.turn,phase:v.ctx.phase,arg:E}])}function jt(v,x,E){return P(v,[{fn:me,turn:v.ctx.turn,phase:v.ctx.phase,force:!0,arg:E}])}function it(v,x,E){return P(v,[{fn:K,turn:v.ctx.turn,phase:v.ctx.phase,arg:E}])}const dt={endStage:T,setStage:oe,endTurn:ne,pass:jt,endPhase:q,setPhase:$,endGame:it,setActivePlayers:b},fe=[];s.endTurn!==!1&&fe.push("endTurn"),s.pass!==!1&&fe.push("pass"),s.endPhase!==!1&&fe.push("endPhase"),s.setPhase!==!1&&fe.push("setPhase"),s.endGame!==!1&&fe.push("endGame"),s.setActivePlayers!==!1&&fe.push("setActivePlayers"),s.endStage!==!1&&fe.push("endStage"),s.setStage!==!1&&fe.push("setStage");function Mt(v,x){const{type:E,playerID:z,args:R}=x.payload;return typeof dt[E]!="function"?v:dt[E](v,z,...Array.isArray(R)?R:[R])}function Ei(v,x,E){return x.activePlayers?E in x.activePlayers:x.currentPlayer===E}return{ctx:v=>({numPlayers:v,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:v})].map((x,E)=>E+""),playOrderPos:0,phase:c,activePlayers:null}),init:v=>P(v,[{fn:p}]),isPlayerActive:Ei,eventHandlers:dt,eventNames:Object.keys(dt),enabledEventNames:fe,moveMap:a,moveNames:[...u.values()],processMove:Ce,processEvent:Mt,getMove:$e}}function Cv(e){return e.processMove!==void 0}function po(e){if(Cv(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Ev(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(yp(i)&&(i=i.move),i instanceof Function){const s=Gh(i,Ae.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...dr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return W(`invalid move object: ${r.type}`),n.G}}}function yp(e){return e instanceof Object&&e.move!==void 0}var ia;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(ia||(ia={}));var Te;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(Te||(Te={}));const Hi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,Pv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function af(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function Xo(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function Zo(e,t,n){const[r,i]=ep(e,n);return i?[r,Me(t,Te.PluginActionInvalid,i)]:[r]}function gp(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function Me(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const vp=e=>t=>n=>{const r=t(n);switch(n.type){case fo:return r;default:{const[,i]=gp(e.getState());return typeof i<"u"?(e.dispatch(Zh()),{...r,transients:i}):r}}};function Nu({game:e,isClient:t}){return e=po(e),(n=null,r)=>{let[i]=gp(n);switch(r.type){case fo:return i;case ao:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return W("cannot call event after game end"),Me(i,Te.GameOver);if(Hi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return W(`disallowed event: ${r.payload.type}`),Me(i,Te.InactivePlayer);i=ta(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=Zo(s,i,{game:e}),o||(s=af(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case pi:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return W(`disallowed move: ${r.payload.type}`),Me(i,Te.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return W("cannot make move after game end"),Me(i,Te.GameOver);if(Hi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return W(`disallowed move: ${r.payload.type}`),Me(i,Te.InactivePlayer);i=ta(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===pn)return W(`invalid move: ${r.payload.type} args: ${r.payload.args}`),Me(i,Te.InvalidMove);const a={...i,G:l};if(t&&dv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=Zo(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=Xo(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=Zo(i,s,{game:e}),u||(i=af(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case yu:case vu:case gu:return r.state;case co:{if(i={...i,deltalog:[]},e.disableUndo)return W("Undo is not enabled"),Me(i,Te.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return W("No moves to undo"),Me(i,Te.ActionInvalid);const c=l[l.length-1],f=l[l.length-2];if(Hi(r)&&r.payload.playerID!==c.playerID)return W("Cannot undo other players' moves"),Me(i,Te.ActionInvalid);if(c.moveType){const h=e.flow.getMove(f.ctx,c.moveType,c.playerID);if(!Pv(s,o,h))return W("Move cannot be undone"),Me(i,Te.ActionInvalid)}return i=Xo(i,r),{...i,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case uo:{if(i={...i,deltalog:[]},e.disableUndo)return W("Redo is not enabled"),Me(i,Te.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return W("No moves to redo"),Me(i,Te.ActionInvalid);const a=o[0];return Hi(r)&&r.payload.playerID!==a.playerID?(W("Cannot redo other players' moves"),Me(i,Te.ActionInvalid)):(i=Xo(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case Hh:return uv(i,r,{game:e});case wu:{const s=i,o=JSON.parse(JSON.stringify(s)),l=xu.applyPatch(o,r.patch);return l.some(u=>u!==null)?(W(`Patch ${JSON.stringify(r.patch)} apply failed`),Me(s,ia.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(d){typeof d!="function"&&(d=new Function(""+d));for(var y=new Array(arguments.length-1),S=0;S<y.length;S++)y[S]=arguments[S+1];var N={callback:d,args:y};return r[n]=N,o(n),n++}function a(d){delete r[d]}function u(d){var y=d.callback,S=d.args;switch(S.length){case 0:y();break;case 1:y(S[0]);break;case 2:y(S[0],S[1]);break;case 3:y(S[0],S[1],S[2]);break;default:y.apply(t,S);break}}function c(d){if(i)setTimeout(c,0,d);else{var y=r[d];if(y){i=!0;try{u(y)}finally{a(d),i=!1}}}}function f(){o=function(d){process.nextTick(function(){c(d)})}}function h(){if(e.postMessage&&!e.importScripts){var d=!0,y=e.onmessage;return e.onmessage=function(){d=!1},e.postMessage("","*"),e.onmessage=y,d}}function g(){var d="setImmediate$"+Math.random()+"$",y=function(S){S.source===e&&typeof S.data=="string"&&S.data.indexOf(d)===0&&c(+S.data.slice(d.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(S){e.postMessage(d+S,"*")}}function w(){var d=new MessageChannel;d.port1.onmessage=function(y){var S=y.data;c(S)},o=function(y){d.port2.postMessage(y)}}function k(){var d=s.documentElement;o=function(y){var S=s.createElement("script");S.onreadystatechange=function(){c(y),S.onreadystatechange=null,d.removeChild(S),S=null},d.appendChild(S)}}function P(){o=function(d){setTimeout(c,0,d)}}var p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,{}.toString.call(e.process)==="[object process]"?f():h()?g():e.MessageChannel?w():s&&"onreadystatechange"in s.createElement("script")?k():P(),p.setImmediate=l,p.clearImmediate=a})(typeof self>"u"?br:self);class Nv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return Vh(s.move,s.args,r);if("event"in s)return Kr(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=Uh(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Ov=25;class ls extends Nv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Nu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((h,g)=>{const w=a[g];return w.checker(i,s)?h+w.weight:h},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Ov&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),f=this.playout(c);this.backpropagate(c,f),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function yi(e){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(e)}function Tv(e,t){if(yi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Av(e){var t=Tv(e,"string");return yi(t)=="symbol"?t:t+""}function Iv(e,t,n){return(t=Av(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uf(Object(n),!0).forEach(function(r){Iv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ff=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),df=function(){return Math.random().toString(36).substring(7).split("").join(".")},hf={INIT:"@@redux/INIT"+df(),REPLACE:"@@redux/REPLACE"+df()};function jv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ou(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(qe(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(qe(1));return n(Ou)(e,t)}if(typeof e!="function")throw new Error(qe(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(qe(3));return s}function f(k){if(typeof k!="function")throw new Error(qe(4));if(a)throw new Error(qe(5));var P=!0;return u(),l.push(k),function(){if(P){if(a)throw new Error(qe(6));P=!1,u();var d=l.indexOf(k);l.splice(d,1),o=null}}}function h(k){if(!jv(k))throw new Error(qe(7));if(typeof k.type>"u")throw new Error(qe(8));if(a)throw new Error(qe(9));try{a=!0,s=i(s,k)}finally{a=!1}for(var P=o=l,p=0;p<P.length;p++){var d=P[p];d()}return k}function g(k){if(typeof k!="function")throw new Error(qe(10));i=k,h({type:hf.REPLACE})}function w(){var k,P=f;return k={subscribe:function(d){if(typeof d!="object"||d===null)throw new Error(qe(11));function y(){d.next&&d.next(c())}y();var S=P(y);return{unsubscribe:S}}},k[ff]=function(){return this},k}return h({type:hf.INIT}),r={dispatch:h,subscribe:f,getState:c,replaceReducer:g},r[ff]=w,r}function wp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Sp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(qe(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=wp.apply(void 0,l)(i.dispatch),cf(cf({},i),{},{dispatch:s})}}}function kp({game:e,numPlayers:t,setupData:n}){e=po(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=cv(i,{game:e}),i=ta(i,{game:e,playerID:void 0});const s=dr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=ep(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Tu=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Mv extends Tu{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Dv=e=>new Mv(e);class Rv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Lv=new Rv;function sa(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Au(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=rv[e](l,a,sa(r,n,s),i);n.dispatch(u)};return o}const bv=Au.bind(null,"makeMove"),zv=Au.bind(null,"gameEvent"),$v=Au.bind(null,"plugin");class Bv{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=po(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=Lv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Nu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=kp({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(Qh(this.initialState))},this.undo=()=>{const g=Jh(sa(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=Xh(sa(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const h=Sp(vp,()=>g=>w=>{const k=g(w);return this.notifySubscribers(),k},g=>w=>k=>{const P=g.getState(),p=w(k);return!("clientOnly"in k)&&k.type!==fo&&this.transport.sendAction(P,k),p},g=>w=>k=>{const P=w(k),p=g.getState();switch(k.type){case pi:case ao:case co:case uo:{const d=p.deltalog;this.log=[...this.log,...d];break}case yu:{this.log=[];break}case wu:case vu:{let d=-1;this.log.length>0&&(d=this.log[this.log.length-1]._stateID);let y=k.deltalog||[];y=y.filter(S=>S._stateID>d),this.log=[...this.log,...y];break}case gu:{this.initialState=k.initialState,this.log=k.log||[];break}}return P});a=a!==void 0?wp(h,a):h,this.store=Ou(this.reducer,this.initialState,a),i||(i=Dv),this.transport=i({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:zg(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=Yh(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=qh(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=Kh(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:tp(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=bv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=zv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=$v(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function Fv(e){return new Bv(e)}const xp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},kn=e=>xp(e,"game name"),Or=e=>xp(e,"match ID"),Tr=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class Uv extends Error{constructor(t,n){super(t),this.details=n}}class Hv{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new Uv(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){kn(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return kn(t),Or(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return kn(t),Tr(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return kn(t),Or(n),Tr(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){kn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){kn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return kn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var _p={exports:{}},Vv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Wv=Vv,Yv=Wv;function Ep(){}function Cp(){}Cp.resetWarningCache=Ep;var Kv=function(){function e(r,i,s,o,l,a){if(a!==Yv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Cp,resetWarningCache:Ep};return n.PropTypes=n,n};_p.exports=Kv();var qv=_p.exports;const Et=Pf(qv);var Kt={},Iu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Iu.parse=Zv;Iu.serialize=Gv;var Qv=decodeURIComponent,Jv=encodeURIComponent,Xv=/; */,Vi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Zv(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(Xv),s=r.decode||Qv,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=e0(c,s))}}return n}function Gv(e,t,n){var r=n||{},i=r.encode||Jv;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Vi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Vi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Vi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Vi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function e0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var pf=Object.getOwnPropertySymbols,t0=Object.prototype.hasOwnProperty,n0=Object.prototype.propertyIsEnumerable;function r0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var s0=i0()?Object.assign:function(e,t){for(var n,r=r0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)t0.call(n,o)&&(r[o]=n[o]);if(pf){i=pf(n);for(var l=0;l<i.length;l++)n0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},o0={};Object.defineProperty(Kt,"__esModule",{value:!0});var l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Kt.load=Tp;Kt.loadAll=Ap;Kt.select=Ip;Kt.save=jp;Kt.remove=Mp;Kt.setRawCookie=ju;Kt.plugToRequest=Dp;var a0=Iu,gr=Np(a0),u0=s0,Pp=Np(u0);function Np(e){return e&&e.__esModule?e:{default:e}}var mo=typeof document>"u"||typeof process<"u"&&o0&&!1,Xe={},mn=void 0;function Op(){return mn&&!mn.headersSent}function Tp(e,t){var n=mo?Xe:gr.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Ap(e){var t=mo?Xe:gr.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Ip(e){var t=mo?Xe:gr.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,Pp.default)({},n,i)},{}):t:{}}function jp(e,t,n){Xe[e]=t,(typeof t>"u"?"undefined":l0(t))==="object"&&(Xe[e]=JSON.stringify(t)),mo||(document.cookie=gr.default.serialize(e,Xe[e],n)),Op()&&mn.cookie&&mn.cookie(e,t,n)}function Mp(e,t){delete Xe[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Pp.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=gr.default.serialize(e,"",t)),Op()&&mn.clearCookie&&mn.clearCookie(e,t)}function ju(e){e?Xe=gr.default.parse(e):Xe={}}function Dp(e,t){return e.cookie?Xe=e.cookie:e.cookies?Xe=e.cookies:e.headers&&e.headers.cookie?ju(e.headers.cookie):Xe={},mn=t,function(){mn=null,Xe={}}}var mf=Kt.default={setRawCookie:ju,load:Tp,loadAll:Ap,select:Ip,save:jp,remove:Mp,plugToRequest:Dp},Us;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Us||(Us={}));function xn(e){return e.type()===Us.SYNC}class c0{type(){return Us.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const f0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},d0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=f0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=kp({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},yf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),h0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class p0{constructor(t,n,r,i){this.game=po(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(xn(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=h0(t),l=r;let a;if(xn(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return W(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){W(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Nu({game:this.game}),c=Sp(vp),f=Ou(u,a,c);if(o.type==co||o.type==uo){const p=a.ctx.activePlayers!==null,d=a.ctx.currentPlayer===i;if(!p&&!d||p&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){W(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){W(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const h=o.type==pi?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==pi&&!h){W(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(h&&yp(h)&&h.ignoreStaleStateID)){W(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const g=f.getState();f.dispatch(o),a=f.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:w,...k}=a;let P;if(s&&(s.gameover===void 0||s.gameover===null)&&(P={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(P.gameover=a.ctx.gameover)),xn(this.storageAPI))this.storageAPI.setState(l,k,w),P&&this.storageAPI.setMetadata(l,P);else{const p=[this.storageAPI.setState(l,k,w)];P&&p.push(this.storageAPI.setMetadata(l,P)),await Promise.all(p)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=xn(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:f}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:f}))return{error:"unauthorized"};if(a===void 0){const w=d0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in w)return{error:"game requires setupData"};u=a=w.initialState,f=w.metadata,this.subscribeCallback({state:a,matchID:t}),xn(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:f}):await this.storageAPI.createMatch(s,{initialState:u,metadata:f})}const h=f?yf(f):void 0,g={state:a,log:c,filteredMetadata:h,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(xn(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return W(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return W(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=yf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),xn(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const Wi=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:tp(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),m0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=Go(o.deltalog,t),a=Wi(e,t,o),u=o._stateID,c=Wi(e,t,s),f=xu.createPatch(c,a);return{type:"patch",args:[r,i,u,f,l]}}case"update":{const[r,i]=n.args,s=Go(i.deltalog,t),o=Wi(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=Wi(e,t,i.state),o=Go(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function Go(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const It=Object.create(null);It.open="0";It.close="1";It.ping="2";It.pong="3";It.message="4";It.upgrade="5";It.noop="6";const as=Object.create(null);Object.keys(It).forEach(e=>{as[It[e]]=e});const oa={type:"error",data:"parser error"},Rp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Lp=typeof ArrayBuffer=="function",bp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Mu=({type:e,data:t},n,r)=>Rp&&t instanceof Blob?n?r(t):gf(t,r):Lp&&(t instanceof ArrayBuffer||bp(t))?n?r(t):gf(new Blob([t]),r):r(It[e]+(t||"")),gf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function vf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let el;function y0(e,t){if(Rp&&e.data instanceof Blob)return e.data.arrayBuffer().then(vf).then(t);if(Lp&&(e.data instanceof ArrayBuffer||bp(e.data)))return t(vf(e.data));Mu(e,!1,n=>{el||(el=new TextEncoder),t(el.encode(n))})}const wf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<wf.length;e++)Lr[wf.charCodeAt(e)]=e;const g0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Lr[e.charCodeAt(r)],o=Lr[e.charCodeAt(r+1)],l=Lr[e.charCodeAt(r+2)],a=Lr[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},v0=typeof ArrayBuffer=="function",Du=(e,t)=>{if(typeof e!="string")return{type:"message",data:zp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:w0(e.substring(1),t)}:as[n]?e.length>1?{type:as[n],data:e.substring(1)}:{type:as[n]}:oa},w0=(e,t)=>{if(v0){const n=g0(e);return zp(n,t)}else return{base64:!0,data:e}},zp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},$p="",S0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Mu(s,!1,l=>{r[o]=l,++i===n&&t(r.join($p))})})},k0=(e,t)=>{const n=e.split($p),r=[];for(let i=0;i<n.length;i++){const s=Du(n[i],t);if(r.push(s),s.type==="error")break}return r};function x0(){return new TransformStream({transform(e,t){y0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let tl;function Yi(e){return e.reduce((t,n)=>t+n.length,0)}function Ki(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function _0(e,t){tl||(tl=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Yi(n)<1)break;const a=Ki(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Yi(n)<2)break;const a=Ki(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Yi(n)<8)break;const a=Ki(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(oa);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Yi(n)<i)break;const a=Ki(n,i);l.enqueue(Du(s?a:tl.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(oa);break}}}})}const Bp=4;function pe(e){if(e)return E0(e)}function E0(e){for(var t in pe.prototype)e[t]=pe.prototype[t];return e}pe.prototype.on=pe.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};pe.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};pe.prototype.off=pe.prototype.removeListener=pe.prototype.removeAllListeners=pe.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};pe.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};pe.prototype.emitReserved=pe.prototype.emit;pe.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};pe.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yo=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),lt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),C0="arraybuffer";function Fp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const P0=lt.setTimeout,N0=lt.clearTimeout;function go(e,t){t.useNativeTimers?(e.setTimeoutFn=P0.bind(lt),e.clearTimeoutFn=N0.bind(lt)):(e.setTimeoutFn=lt.setTimeout.bind(lt),e.clearTimeoutFn=lt.clearTimeout.bind(lt))}const O0=1.33;function T0(e){return typeof e=="string"?A0(e):Math.ceil((e.byteLength||e.size)*O0)}function A0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Up(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function I0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function j0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class M0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Ru extends pe{constructor(t){super(),this.writable=!1,go(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new M0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Du(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=I0(t);return n.length?"?"+n:""}}class D0 extends Ru{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};k0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,S0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Up()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Hp=!1;try{Hp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const R0=Hp;function L0(){}class b0 extends D0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class At extends pe{constructor(t,n,r){super(),this.createRequest=t,go(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Fp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=At.requestsCount++,At.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=L0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete At.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}At.requestsCount=0;At.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Sf);else if(typeof addEventListener=="function"){const e="onpagehide"in lt?"pagehide":"unload";addEventListener(e,Sf,!1)}}function Sf(){for(let e in At.requests)At.requests.hasOwnProperty(e)&&At.requests[e].abort()}const z0=function(){const e=Vp({xdomain:!1});return e&&e.responseType!==null}();class $0 extends b0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=z0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new At(Vp,this.uri(),t)}}function Vp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||R0))return new XMLHttpRequest}catch{}if(!t)try{return new lt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Wp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class B0 extends Ru{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Wp?{}:Fp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Mu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Up()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const nl=lt.WebSocket||lt.MozWebSocket;class F0 extends B0{createSocket(t,n,r){return Wp?new nl(t,n,r):n?new nl(t,n):new nl(t)}doWrite(t,n){this.ws.send(n)}}class U0 extends Ru{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=_0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=x0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const H0={websocket:F0,webtransport:U0,polling:$0},V0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,W0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function la(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=V0.exec(e||""),s={},o=14;for(;o--;)s[W0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Y0(s,s.path),s.queryKey=K0(s,s.query),s}function Y0(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function K0(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const aa=typeof addEventListener=="function"&&typeof removeEventListener=="function",us=[];aa&&addEventListener("offline",()=>{us.forEach(e=>e())},!1);class fn extends pe{constructor(t,n){if(super(),this.binaryType=C0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=la(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=la(n.host).host);go(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=j0(this.opts.query)),aa&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},us.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Bp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&fn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",fn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=T0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,yo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(fn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),aa&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=us.indexOf(this._offlineEventListener);r!==-1&&us.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}fn.protocol=Bp;class q0 extends fn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;fn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;fn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let Q0=class extends q0{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>H0[i]).filter(i=>!!i)),super(t,r)}};function J0(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=la(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const X0=typeof ArrayBuffer=="function",Z0=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Yp=Object.prototype.toString,G0=typeof Blob=="function"||typeof Blob<"u"&&Yp.call(Blob)==="[object BlobConstructor]",ew=typeof File=="function"||typeof File<"u"&&Yp.call(File)==="[object FileConstructor]";function Lu(e){return X0&&(e instanceof ArrayBuffer||Z0(e))||G0&&e instanceof Blob||ew&&e instanceof File}function cs(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(cs(e[n]))return!0;return!1}if(Lu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return cs(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&cs(e[n]))return!0;return!1}function tw(e){const t=[],n=e.data,r=e;return r.data=ua(n,t),r.attachments=t.length,{packet:r,buffers:t}}function ua(e,t){if(!e)return e;if(Lu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=ua(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=ua(e[r],t));return n}return e}function nw(e,t){return e.data=ca(e.data,t),delete e.attachments,e}function ca(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ca(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ca(e[n],t));return e}const Kp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],rw=5;var F;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(F||(F={}));class iw{constructor(t){this.replacer=t}encode(t){return(t.type===F.EVENT||t.type===F.ACK)&&cs(t)?this.encodeAsBinary({type:t.type===F.EVENT?F.BINARY_EVENT:F.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===F.BINARY_EVENT||t.type===F.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=tw(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class bu extends pe{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===F.BINARY_EVENT;r||n.type===F.BINARY_ACK?(n.type=r?F.EVENT:F.ACK,this.reconstructor=new sw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Lu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(F[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===F.BINARY_EVENT||r.type===F.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(bu.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case F.CONNECT:return Hs(n);case F.DISCONNECT:return n===void 0;case F.CONNECT_ERROR:return typeof n=="string"||Hs(n);case F.EVENT:case F.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Kp.indexOf(n[0])===-1);case F.ACK:case F.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class sw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=nw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ow(e){return typeof e=="string"}const lw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function aw(e){return e===void 0||lw(e)}function Hs(e){return Object.prototype.toString.call(e)==="[object Object]"}function uw(e,t){switch(e){case F.CONNECT:return t===void 0||Hs(t);case F.DISCONNECT:return t===void 0;case F.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Kp.indexOf(t[0])===-1);case F.ACK:return Array.isArray(t);case F.CONNECT_ERROR:return typeof t=="string"||Hs(t);default:return!1}}function cw(e){return ow(e.nsp)&&aw(e.id)&&uw(e.type,e.data)}const fw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:bu,Encoder:iw,get PacketType(){return F},isPacketValid:cw,protocol:rw},Symbol.toStringTag,{value:"Module"}));function yt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const dw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qp extends pe{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[yt(t,"open",this.onopen.bind(this)),yt(t,"packet",this.onpacket.bind(this)),yt(t,"error",this.onerror.bind(this)),yt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(dw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:F.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:F.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case F.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case F.EVENT:case F.BINARY_EVENT:this.onevent(t);break;case F.ACK:case F.BINARY_ACK:this.onack(t);break;case F.DISCONNECT:this.ondisconnect();break;case F.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:F.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:F.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function vr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}vr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};vr.prototype.reset=function(){this.attempts=0};vr.prototype.setMin=function(e){this.ms=e};vr.prototype.setMax=function(e){this.max=e};vr.prototype.setJitter=function(e){this.jitter=e};class fa extends pe{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,go(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new vr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||fw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Q0(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=yt(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=yt(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(yt(t,"ping",this.onping.bind(this)),yt(t,"data",this.ondata.bind(this)),yt(t,"error",this.onerror.bind(this)),yt(t,"close",this.onclose.bind(this)),yt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){yo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new qp(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ar={};function fs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=J0(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Ar[i]&&s in Ar[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new fa(r,t):(Ar[i]||(Ar[i]=new fa(r,t)),a=Ar[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(fs,{Manager:fa,Socket:qp,io:fs,connect:fs});class Qp extends c0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class hw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class pw extends Qp{constructor(t="bgio"){super();const n=r=>new hw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function mw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class yw extends p0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const f in n){const h=n[f];o[f]=new h({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:f,...h})=>{const g=s[f];g!==void 0&&g(a(f,h))},a=m0(t),u={send:l,sendAll:f=>{for(const h in s)l({playerID:h,...f})}},c=i?new pw(r):new Qp;super(t,c,u),this.connect=(f,h)=>{s[f]=h},this.subscribe(({state:f,matchID:h})=>{if(!n)return;const g=mw(f,o);g!==null&&setTimeout(async()=>{const w=await o[g].play(f,g);await this.onUpdate(w.action,f._stateID,h,w.action.payload.playerID)},100)})}}class gw extends Tu{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const kf=new Map;function Jp({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=kf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new yw({game:s,bots:e,persist:t,storageKey:n}),kf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new gw({master:o,...r})}}const xf=fs;class vw extends Tu{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=xf(t+this.gameName,this.socketOpts)}else this.socket=xf("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function _f({server:e,socketOpts:t}={}){return n=>new vw({server:e,socketOpts:t,...n})}function Xp(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>D.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends D.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=Fv({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return D.createElement(l);let f=null;return i&&(f=D.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),D.createElement("div",{className:"bgio-client"},f)}},t.propTypes={matchID:Et.string,playerID:Et.string,credentials:Et.string,debug:Et.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class ww{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Hv({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function Sw(e){return new ww(e)}class Zp extends D.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return D.createElement("div",null,D.createElement("p",{className:"phase-title"},"Choose a player name:"),D.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),D.createElement("span",{className:"buttons"},D.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),D.createElement("br",null),D.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,D.createElement("br",null)))}}Zp.defaultProps={playerName:""};class kw extends D.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>D.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>D.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>D.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>D.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?D.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),D.createElement("tr",{key:"line-"+t.matchID},D.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),D.createElement("td",{key:"cell-status-"+t.matchID},n),D.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),D.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class xw extends D.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>D.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>D.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return D.createElement("div",null,D.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),D.createElement("span",null,"Players:"),D.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),D.createElement("span",{className:"buttons"},D.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Be;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(Be||(Be={}));class Gp extends D.Component{constructor(t){super(t),this.state={phase:Be.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=Sw({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:Be.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Be.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?_f({server:this.props.gameServer}):_f()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=ls;s=Jp({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Be.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Be.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return D.createElement(kw,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=mf.load("lobbyState")||{};t.phase&&t.phase===Be.PLAY&&(t.phase=Be.LIST),t.phase&&t.phase!==Be.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||Be.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};mf.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):D.createElement("div",{id:"lobby-view",style:{padding:50}},D.createElement("div",{className:this._getPhaseVisibility(Be.ENTER)},D.createElement(Zp,{key:i,playerName:i,onEnter:this._enterLobby})),D.createElement("div",{className:this._getPhaseVisibility(Be.LIST)},D.createElement("p",null,"Welcome, ",i),D.createElement("div",{className:"phase-title",id:"match-creation"},D.createElement("span",null,"Create a match:"),D.createElement(xw,{games:t,createMatch:this._createMatch})),D.createElement("p",{className:"phase-title"},"Join a match:"),D.createElement("div",{id:"instances"},D.createElement("table",null,D.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),D.createElement("span",{className:"error-msg"},r,D.createElement("br",null))),D.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),D.createElement("div",{className:this._getPhaseVisibility(Be.PLAY)},o&&D.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),D.createElement("div",{className:"buttons",id:"match-exit"},D.createElement("button",{onClick:this._exitMatch},"Exit match"))),D.createElement("div",{className:"buttons",id:"lobby-exit"},D.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}Gp.propTypes={gameComponents:Et.array.isRequired,lobbyServer:Et.string,gameServer:Et.string,debug:Et.bool,clientFactory:Et.func,refreshInterval:Et.number};Gp.defaultProps={debug:!1,clientFactory:Xp,refreshInterval:2e3};const Ke=["Hearts","Diamonds","Clubs","Spades"],qr=40,em=5,_w=["","","","","",""],Ew={Hearts:"",Diamonds:"",Clubs:"",Spades:""},Cw={Hearts:"Wheat",Diamonds:"Beets",Clubs:"Potatoes",Spades:"Sunflowers"},tm={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function Pw(e,t){const n={};if(e.deckType===36)for(const r of Ke)n[r]=[{suit:r,value:1}];else for(const r of Ke){const i=Array.from({length:em},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function nm(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of Ke){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),f=t[o]||[];r[o]=[...f,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function qi(e,t){return t.deckType!==36||e<2||e>5}function rm(e,t,n,r,i){const s=[];for(const a of Ke)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>qi(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function im(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function Nw(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function Ow(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function Tw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Aw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function da(e){return e.players.every(t=>t.hand.length===1)}function sm(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=qr&&!e.claimedJobs.includes(r)&&Iw(e,r,n)}function Iw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function jw(e){if(!Aw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function ha(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=qr||(t.miceVariant?Mw(e,n,r,t):t.deckType===36?Dw(e,n,r,t):Rw(e,n,r,t))}function zu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Vs(e,`${r.suit}-${r.value}`),!0;return!1}function $u(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function Bu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Vs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function gi(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Mw(e,t,n,r){if(zu(e,n,r))return;const i=$u(n,e.trump,r),s=Bu(n,e.trump,r),o=om(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),Ws(e,o[0]),s&&o.length>1&&(Ws(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${gi(o[1][1])}`)))}function Dw(e,t,n,r){if(zu(e,n,r))return;const i=$u(n,e.trump,r),s=Bu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=om(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(f=>f.suit===t);for(const f of c)l.some(([g,w])=>g===u&&w.suit===f.suit&&w.value===f.value)||l.push([u,f])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((f,h)=>h.value-f.value),Ws(e,[u,c[0]]),s&&c.length>1&&(Ws(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${gi(c[1])}`)))}function Rw(e,t,n,r){if(zu(e,n,r))return;const i=$u(n,e.trump,r),s=Bu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(h=>h.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(h=>h.suit!==t);const u=(o.plot.revealed||[]).filter(h=>h.suit===t).sort((h,g)=>g.value-h.value);if(u.length===0)continue;const c=u[0],f=o.plot.revealed.findIndex(h=>h.suit===c.suit&&h.value===c.value);if(o.plot.revealed.splice(f,1),Vs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${gi(c)}`),s&&u.length>1){const h=u[1],g=o.plot.revealed.findIndex(w=>w.suit===h.suit&&w.value===h.value);o.plot.revealed.splice(g,1),Vs(e,`${h.suit}-${h.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${gi(h)}`)}}}function om(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const f of c.revealed||[])f.suit===t&&a.push({card:f,stack:c,location:"revealed"});for(const f of c.hidden||[])f.suit===t&&a.push({card:f,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const f=o.plot.hidden.findIndex(h=>h.suit===c.suit&&h.value===c.value);o.plot.hidden.splice(f,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:f,location:h}of a){const g=h==="hidden"?f.hidden:f.revealed,w=g.findIndex(k=>k.suit===c.suit&&k.value===c.value);w!==-1&&(g.splice(w,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((h,g)=>g.value>h.value?g:h);if(l.some(h=>h.suit===c.suit&&h.value===c.value)){const h=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(h,1),o.plot.revealed.push(c),s.push([o,c])}else{const h=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(h){const{stack:g,location:w}=h,k=w==="hidden"?g.hidden:g.revealed,P=k.findIndex(p=>p.suit===c.suit&&p.value===c.value);P!==-1&&(k.splice(P,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function Ws(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Vs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${gi(n)}`)}function Lw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function bw(e,t){const n=Lw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function zw(e,t){const n=bw(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function pa(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of Ke)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>em)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of Ke)e.workHours[o]=0;const{jobs:r,isFamine:i}=nm(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of Ke)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.workersDeck=rm(e.players,e.jobBuckets,e.exiled,t,n),im(e.players,e.workersDeck,e.isFamine),!1}function lm(e,t){const n=Ke.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function $w(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function am(e,t,n){var f,h,g;const r=e.workHours[t]||0;if((f=e.claimedJobs)==null?void 0:f.includes(t))return-10;const s=Math.max(0,40-r),o=s<20?(20-s)*2:0,l=e.players[n],c=[...((h=l.plot)==null?void 0:h.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(w=>w.suit===t).length*15;return o+c}function Bw(e,t,n,r){var u,c,f,h,g,w;let i=0;const s=e.workHours[n]||0,o=$w(t,e.trump,(u=e.variants)==null?void 0:u.nomenclature),l=s+o;if((c=e.claimedJobs)==null?void 0:c.includes(n))return-5;if(s<40&&l>=40){i+=50;const k=e.players[r],p=[...((f=k.plot)==null?void 0:f.revealed)||[],...((h=k.plot)==null?void 0:h.hidden)||[]].filter(d=>d.suit===n).length;i+=p*20}if(s<40){const k=e.players[r],p=[...((g=k.plot)==null?void 0:g.revealed)||[],...((w=k.plot)==null?void 0:w.hidden)||[]].filter(d=>d.suit===n).length;i+=p*5,i+=Math.min(o,40-s)*.5}return s<20&&o>8&&(i-=5),t.suit===n&&(i+=2),i}function Fw(e,t,n){var f,h,g,w,k;const r=e.players[t],i=r.hand[n];let s=0;const o=e.currentTrick.length===0,l=(h=(f=e.currentTrick[0])==null?void 0:f[1])==null?void 0:h.suit,a=e.currentTrick.map(([,P])=>P),u=Uw(e,i,a),c=Hw(e,t);if(o){const P=am(e,i.suit,t);s+=P*.3,i.value>=8&&i.value<=11&&(s+=5),i.suit===e.trump&&e.trickCount<2&&(s-=10)}else if(c>0&&u>.5?s+=c*u*20:c<0&&u<.5&&(s+=Math.abs(c)*(1-u)*15),i.suit!==l){const p=[...((g=r.plot)==null?void 0:g.revealed)||[],...((w=r.plot)==null?void 0:w.hidden)||[]].filter(d=>d.suit===i.suit).length;(k=e.claimedJobs)!=null&&k.includes(i.suit)||(s+=p*3)}return s+=Math.random()*2,s}function Uw(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let i=n[0];for(const s of n)(s.suit===e.trump&&i.suit!==e.trump||s.suit===i.suit&&s.value>i.value)&&(i=s);return t.suit===e.trump&&i.suit!==e.trump?.8:t.suit===i.suit&&t.value>i.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function Hw(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,s])=>s.suit))];for(const s of r){const o=am(e,s,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function Vw(e,t,n){var f,h;let r=0;const i=e.players[n],s=i.hand||[],o=s.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=s.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((f=i.plot)==null?void 0:f.revealed)||[],...((h=i.plot)==null?void 0:h.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function Ww(e,t,n){var s,o;const r=[],i=e.players[n];if(t.phase==="planning"&&!e.trump)for(const l of Ke){const a=Vw(e,l,n);r.push({move:"setTrump",args:[l],score:a})}else if(t.phase==="trick")for(let l=0;l<i.hand.length;l++){const a=i.hand[l],u=(o=(s=e.currentTrick[0])==null?void 0:s[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&i.hand.some(h=>h.suit===u)&&a.suit!==u)continue;const c=Fw(e,n,l);r.push({move:"playCard",args:[l],score:c})}else if(t.phase==="assignment"&&n===e.lastWinner){const l=e.pendingAssignments||{};if(Object.keys(l).length===e.lastTrick.length)r.push({move:"submitAssignments",args:[],score:100});else{const u=[...new Set(e.lastTrick.map(([,c])=>c.suit))];for(const[,c]of e.lastTrick){const f=`${c.suit}-${c.value}`;if(!l[f]){for(const h of u){const g=Bw(e,c,h,n);r.push({move:"assignCard",args:[f,h],score:g})}break}}}}else t.phase==="swap"&&r.push({move:"confirmSwap",args:[],score:0});return r.sort((l,a)=>a.score-l.score),r}function Ef(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function Yw({ctx:e,random:t},n){const r={...tm,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[..._w],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Ef(0,!0,""));else{const f=Math.floor(t.Number()*s.length),h=s.splice(f,1)[0];o.push(Ef(c,!1,h))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:Pw(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1};for(const c of Ke)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=nm(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=rm(l.players,l.jobBuckets,l.exiled,r,t),im(l.players,l.workersDeck,l.isFamine),l}function Kw({G:e,random:t},n){n&&Ke.includes(n)?e.trump=n:lm(e,t)}function qw({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!Nw(e,i,r))return pn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function Qw({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function Jw({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return pn;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return pn;if(sm(e,e.pendingAssignments,e.variants),e.pendingAssignments={},da(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),ha(e,e.variants),pa(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function Xw({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return pn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return pn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function Zw({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const Gw={name:"kolkhoz",setup:Yw,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:Kw},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&lm(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:qw},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=Ow(e);if(n!==null){Tw(e,n);const r=jw(e.lastTrick);if(r?(sm(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&da(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),ha(e,e.variants),pa(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=da(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:Qw,submitAssignments:Jw},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),ha(e,e.variants),pa(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:Xw,confirmSwap:Zw},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return zw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),i=Ww(e,t,r);return i.slice(0,Math.min(3,i.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function e1(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function t1(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function Fe({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,f=s?"assets/cards/back.svg":e1(e);return t!==0||n!==0?m.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[m.jsx("image",{href:f,width:r,height:c,x:-r/2,y:-c/2}),l&&m.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#d4a857",strokeWidth:"3",rx:"8"})]}):m.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:m.jsx("img",{src:f,alt:s?"Card back":`${t1(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function n1({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s}){if(!e||e.length===0)return m.jsx("div",{className:"hand empty",children:"No cards in hand"});const o=Math.min(8,60/e.length),a=-(o*(e.length-1))/2;return m.jsx("div",{className:"hand",children:e.map((u,c)=>{const f=!s||s.includes(c),h=a+c*o,g=Math.abs(h)*.5;return m.jsx("div",{className:`hand-card ${f&&n?"playable":""} ${f?"":"invalid"}`,style:{transform:`rotate(${h}deg) translateY(${g}px)`,zIndex:c},onClick:()=>{n&&f&&t(c)},children:m.jsx(Fe,{card:u,width:100,highlight:f&&n,dimmed:!f&&n})},`${u.suit}-${u.value}-${c}`)})})}function r1({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450}){const l=a=>{const u=[{x:0,y:140},{x:-140,y:0},{x:0,y:-140},{x:140,y:0}];return u[a]||u[0]};return m.jsxs("g",{className:"trick-area",children:[m.jsx("circle",{cx:r,cy:i,r:240,fill:"#1a1a1a",stroke:"#d4a857",strokeWidth:"3"}),m.jsx("circle",{cx:r,cy:i,r:220,fill:"none",stroke:"#8b0000",strokeWidth:"2"}),e.length>0&&m.jsxs("g",{children:[m.jsx("text",{x:r,y:i-14,textAnchor:"middle",fill:"#FFD700",fontSize:"14",fontWeight:"bold",children:"Lead:"}),m.jsx("text",{x:r,y:i+16,textAnchor:"middle",fill:e[0][1].suit==="Hearts"||e[0][1].suit==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:"28",children:{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e[0][1].suit]})]}),e.map(([a,u],c)=>{const f=l(a);return m.jsx(Fe,{card:u,x:r+f.x,y:i+f.y,width:100,rotation:a*90},`${u.suit}-${u.value}`)}),Array.from({length:t}).map((a,u)=>{if(e.some(([g])=>g===u))return null;const f=l(u),h=100*1.4;return m.jsx("rect",{x:r+f.x-100/2,y:i+f.y-h/2,width:100,height:h,fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"2",strokeDasharray:"5,5",rx:"8"},`slot-${u}`)})]})}function i1({revealedJobs:e,workHours:t,jobBuckets:n,claimedJobs:r,trump:i,phase:s,pendingAssignments:o,onAssign:l,lastTrick:a}){const k=d=>d==="Hearts"||d==="Diamonds"?"#c41e3a":"#e8dcc4",P=d=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[d],p=d=>({11:{russian:"",english:"Jack (Drunkard)",power:"Worth 0 work hours. Gets exiled instead of player cards"},12:{russian:"",english:"Queen (Informant)",power:"All players become vulnerable to requisition"},13:{russian:"",english:"King (Party Official)",power:"Exiles two cards instead of one"}})[d]||null;return m.jsx("g",{className:"job-piles-area",children:Ke.map((d,y)=>{const S=20+y*130,N=(t==null?void 0:t[d])||0,A=r==null?void 0:r.includes(d),O=d===i,I=(n==null?void 0:n[d])||[],H=e==null?void 0:e[d],L=Array.isArray(H)?H:H?[H]:[],K=60,ee=170,me=ee+98+30;return m.jsxs("g",{className:`job-pile ${A?"claimed":""}`,children:[m.jsx("rect",{x:S-65,y:K,width:130,height:100,fill:O?"rgba(255,215,0,0.12)":"rgba(0,0,0,0.5)",stroke:O?"#FFD700":"#444",strokeWidth:O?2:1,rx:"6"}),O&&m.jsx("text",{x:S,y:K+20,textAnchor:"middle",fill:"#FFD700",fontSize:"16",fontWeight:"bold",children:"TRUMP"}),m.jsx("text",{x:S,y:K+(O?50:42),textAnchor:"middle",fill:k(d),fontSize:"32",children:P(d)}),m.jsxs("g",{style:{cursor:"help"},children:[m.jsx("title",{children:Cw[d]}),m.jsx("text",{x:S,y:K+(O?70:64),textAnchor:"middle",fill:"#ccc",fontSize:"16",fontWeight:"600",pointerEvents:"all",children:Ew[d]})]}),m.jsx("rect",{x:S-55,y:K+82,width:110,height:14,fill:"#222",rx:"7"}),m.jsx("rect",{x:S-55,y:K+82,width:Math.min(110,N/qr*110),height:14,fill:A||N>=qr?"#4CAF50":"#2196F3",rx:"7"}),m.jsx("text",{x:S,y:K+93,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"bold",children:A?" DONE":`${N}/${qr}`}),L.map((te,$e)=>{const Ce=p(te.value),oe=te.suit===i&&Ce,T=L.length>1?($e-(L.length-1)/2)*15:0;return m.jsxs("g",{children:[m.jsx(Fe,{card:te,x:S+T,y:ee+98/2,width:70}),oe&&m.jsxs("g",{style:{cursor:"help"},children:[m.jsxs("title",{children:[Ce.english,": ",Ce.power]}),m.jsx("text",{x:S+T,y:ee+98+22,textAnchor:"middle",fill:"#FFD700",fontSize:"14",fontWeight:"600",pointerEvents:"all",children:Ce.russian})]})]},`reward-${$e}`)}),I.length>0&&m.jsxs("text",{x:S,y:me-8,textAnchor:"middle",fill:"#999",fontSize:"13",fontWeight:"500",children:[I.length," assigned"]}),I.map((te,$e)=>{const Ce=me+49+$e*22;return m.jsx("g",{children:m.jsx(Fe,{card:te,x:S,y:Ce,width:70})},`assigned-${$e}`)}),(()=>{const te=I.map((oe,T)=>({card:oe,idx:T,info:p(oe.value)})).filter(({card:oe,info:T})=>oe.suit===i&&T);if(te.length===0)return null;const Ce=me+98/2+(I.length-1)*22+98/2+12;return te.map(({info:oe},T)=>m.jsxs("g",{style:{cursor:"help"},children:[m.jsxs("title",{children:[oe.english,": ",oe.power]}),m.jsx("text",{x:S,y:Ce+T*16,textAnchor:"middle",fill:"#FFD700",fontSize:"13",fontWeight:"600",pointerEvents:"all",children:oe.russian})]},`label-${T}`))})()]},d)})})}const Cf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function s1({player:e,position:t,isActive:n,isBrigadeLeader:r,playerIndex:i,scale:s=1}){var H,L,K,ee;const{x:o,y:l}=t,a=((H=e.hand)==null?void 0:H.length)||0,u=((L=e.plot)==null?void 0:L.revealed)||[],c=((ee=(K=e.plot)==null?void 0:K.hidden)==null?void 0:ee.length)||0,f=7*s,h=f*6,g=f*1.14,w=f*8,k=f*30,P=f*21.4,p=f*1.14,d=f*2.86,y=f*2.28,S=f*1.57,N=Cf[(i-1)%Cf.length],A=u.length>0?u.length*(h+g)-g:0,O=o-k/2,I=l-P/2;return m.jsxs("g",{className:`player-area ${n?"active":""}`,children:[m.jsx("rect",{x:O,y:I,width:k,height:P,fill:n?"rgba(196, 30, 58, 0.2)":"rgba(20,20,20,0.8)",stroke:n?"#d4a857":"#333",strokeWidth:n?2*s:1*s,rx:p}),m.jsx("image",{href:N,x:O+p,y:I+p,width:w,height:w,style:{imageRendering:"pixelated"}}),m.jsxs("text",{x:O+p+w+p*1.5,y:I+f*4,textAnchor:"start",fill:n?"#d4a857":"#e8dcc4",fontSize:d,fontWeight:n?"bold":"normal",children:[e.name,r&&" "]}),m.jsxs("text",{x:O+p+w+p*1.5,y:I+f*7.1,textAnchor:"start",fill:"#a09080",fontSize:y,children:["Hand: ",a]}),e.medals>0&&m.jsxs("text",{x:O+p+w+p*1.5,y:I+f*10,textAnchor:"start",fill:"#FFD700",fontSize:y*.875,children:[" ",e.medals]}),m.jsx("g",{transform:`translate(${O+p*1.5}, ${I+f*9.7})`,children:Array.from({length:Math.min(5,a)}).map((me,te)=>m.jsx(Fe,{card:{},faceDown:!0,x:te*f*2.14+h/2,y:h*.7,width:h},`hand-${te}`))}),u.length>0&&m.jsx("g",{transform:`translate(${o-A/2}, ${I+P-p*1.25})`,children:u.map((me,te)=>m.jsx(Fe,{card:me,x:te*(h+g)+h/2,y:0,width:h},`revealed-${te}`))}),c>0&&m.jsxs("text",{x:O+k-p*1.25,y:I+P-p,textAnchor:"end",fill:"#a09080",fontSize:S,children:["+",c," hidden"]})]})}function o1({exiled:e,currentYear:t}){const l=f=>{const[h,g]=f.split("-");return{suit:h,value:parseInt(g,10)}},a=f=>({11:"Jack",12:"Queen",13:"King",1:"Ace"})[f]||null,c=[1,2,3,4,5];return m.jsxs("g",{className:"gulag-area",children:[m.jsx("text",{x:140,y:0,textAnchor:"middle",fill:"#c41e3a",fontSize:"12",fontWeight:"bold",letterSpacing:"0.1em",children:"GULAG"}),c.map((f,h)=>{const g=0+h*70,w=20,k=e[f]||[],P=f<t,p=f===t;return m.jsxs("g",{className:"gulag-year",children:[m.jsx("rect",{x:g,y:w,width:60,height:25,fill:p?"rgba(196,30,58,0.3)":"rgba(20,20,20,0.6)",stroke:p?"#c41e3a":"#333",strokeWidth:1,rx:"4"}),m.jsxs("text",{x:g+30,y:w+17,textAnchor:"middle",fill:P?"#a09080":p?"#c41e3a":"#e8dcc4",fontSize:"11",children:["Year ",f]}),k.map((d,y)=>{const S=l(d),N=a(S.value),A=w+35+y*18;return m.jsxs("g",{children:[m.jsx(Fe,{card:S,x:g+10,y:A,width:40}),N&&m.jsx("text",{x:g+30,y:A+56+8,textAnchor:"middle",fill:"#aaa",fontSize:"7",children:N})]},y)}),k.length===0&&P&&m.jsx("text",{x:g+30,y:w+55,textAnchor:"middle",fill:"#333",fontSize:"9",children:"-"})]},f)})]})}function l1({year:e,trump:t,phase:n,currentPlayer:r,players:i,isMyTurn:s,exiled:o}){var h;const u=g=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[g]||g,c=g=>g==="Hearts"||g==="Diamonds"?"#c41e3a":"#e8dcc4",f=g=>({planning:"Select Trump",trick:"Trick Phase",assignment:"Assign Cards",plotSelection:"Select Plot Card",requisition:"Requisition",swap:"Swap Cards"})[g]||g;return m.jsxs("g",{className:"right-sidebar",children:[m.jsx("rect",{x:1540,y:120,width:360,height:180,fill:"rgba(20,20,20,0.9)",stroke:"#d4a857",strokeWidth:1,rx:"10"}),m.jsx("text",{x:1560,y:150,fill:"#a09080",fontSize:"11",children:"Year"}),m.jsxs("text",{x:1560,y:170,fill:"#d4a857",fontSize:"18",fontWeight:"bold",children:[e,"/5"]}),m.jsx("text",{x:1640,y:150,fill:"#a09080",fontSize:"11",children:"Trump"}),t?m.jsxs("text",{x:1640,y:170,fill:c(t),fontSize:"18",fontWeight:"bold",children:[u(t)," ",t]}):m.jsx("text",{x:1640,y:170,fill:"#a09080",fontSize:"14",children:"Not selected"}),m.jsx("text",{x:1560,y:205,fill:"#a09080",fontSize:"11",children:"Phase"}),m.jsx("text",{x:1560,y:225,fill:"#e8dcc4",fontSize:"14",children:f(n)}),m.jsx("text",{x:1560,y:255,fill:"#a09080",fontSize:"11",children:"Turn"}),s?m.jsx("text",{x:1560,y:275,fill:"#d4a857",fontSize:"14",fontWeight:"bold",children:"Your Turn!"}):m.jsxs("text",{x:1560,y:275,fill:"#a09080",fontSize:"12",children:["Waiting for ",(h=i[parseInt(r,10)])==null?void 0:h.name,"..."]}),m.jsx("g",{transform:"translate(1545, 320)",children:m.jsx(o1,{exiled:o,currentYear:e})})]})}function a1({G:e,ctx:t,moves:n,playerID:r}){var $,q,ne,jt,it,dt,fe,Mt,Ei,v,x,E,z,R;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=xe.useState(null),[u,c]=xe.useState(null),[f,h]=xe.useState(null),[g,w]=xe.useState(null),[k,P]=xe.useState(!1),[p,d]=xe.useState(!1),[y,S]=xe.useState(!1),[N,A]=xe.useState(!1),[O,I]=xe.useState(!1),H=xe.useRef(e.year);xe.useEffect(()=>{e.year!==H.current&&(I(!1),H.current=e.year)},[e.year]);const L=_=>{o==="trick"&&s&&n.playCard(_)},K=_=>{o==="planning"&&n.setTrump(_)},ee=(_,M)=>{n.assignCard(_,M)},me=()=>{n.submitAssignments()},te=()=>{l!==null&&u!==null&&f!==null&&(n.swapCard(u,l,f),a(null),c(null),h(null))},$e=(_,M)=>{u===_&&f===M?(c(null),h(null)):(c(_),h(M))},Ce=()=>{I(!0),n.confirmSwap()},oe=1e3,T=450,b=(_,M)=>{const B=[{x:oe,y:800},{x:oe-380,y:450},{x:oe,y:120},{x:oe+380,y:450}];return B[_]||B[0]};if(t.gameover){const{winner:_,scores:M}=t.gameover;return m.jsxs("div",{className:"game-over",children:[m.jsx("h1",{children:"Game Over!"}),m.jsxs("h2",{children:["Winner: ",e.players[_].name]}),m.jsx("div",{className:"final-scores",children:e.players.map((B,de)=>m.jsxs("div",{className:de===_?"winner":"",children:[B.name,": ",M[de]," points"]},de))}),m.jsx("p",{children:"(Lowest score wins)"})]})}return m.jsxs("div",{className:"game-board",children:[o==="planning"&&!e.trump&&m.jsxs("div",{className:"trump-selection",children:[m.jsx("h3",{children:"Select Trump Suit"}),m.jsx("div",{className:"suit-buttons",children:Ke.map(_=>m.jsxs("button",{onClick:()=>K(_),className:`suit-btn ${_.toLowerCase()}`,children:[rl(_)," ",_]},_))})]}),m.jsxs("svg",{viewBox:"0 0 1920 1080",className:"board-svg",children:[m.jsx(i1,{revealedJobs:e.revealedJobs,workHours:e.workHours,jobBuckets:e.jobBuckets,claimedJobs:e.claimedJobs,trump:e.trump,phase:o,pendingAssignments:e.pendingAssignments,onAssign:ee,lastTrick:e.lastTrick}),m.jsx(r1,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:oe,centerY:T}),e.players.map((_,M)=>{if(M===i)return null;const B=b(M,e.numPlayers);return m.jsx(s1,{player:_,position:B,isActive:parseInt(t.currentPlayer,10)===M,isBrigadeLeader:_.brigadeLeader,playerIndex:M},M)}),m.jsx(l1,{year:e.year,trump:e.trump,phase:o,currentPlayer:t.currentPlayer,players:e.players,isMyTurn:s,exiled:e.exiled})]}),m.jsxs("div",{className:"mobile-toggles",children:[m.jsx("button",{className:`mobile-toggle-btn ${k?"active":""}`,onClick:()=>{P(!k),d(!1),S(!1)},children:"Jobs"}),m.jsx("button",{className:`mobile-toggle-btn ${p?"active":""}`,onClick:()=>{d(!p),P(!1),S(!1)},children:"Info"}),m.jsx("button",{className:`mobile-toggle-btn menu-btn ${y?"active":""}`,onClick:()=>{S(!y),P(!1),d(!1)},children:""})]}),k&&m.jsx("div",{className:"mobile-panel",onClick:()=>P(!1),children:m.jsxs("div",{className:"mobile-panel-content",onClick:_=>_.stopPropagation(),children:[m.jsx("button",{className:"mobile-panel-close",onClick:()=>P(!1),children:""}),m.jsx("h3",{children:"Job Progress"}),m.jsx("div",{className:"mobile-jobs-grid",children:Ke.map(_=>{var Q,le;const M=((Q=e.workHours)==null?void 0:Q[_])||0,B=(le=e.claimedJobs)==null?void 0:le.includes(_),de=_===e.trump;return m.jsxs("div",{className:`mobile-job ${de?"trump":""} ${B?"claimed":""}`,children:[m.jsx("span",{className:`suit-icon ${_.toLowerCase()}`,children:rl(_)}),m.jsx("span",{className:"job-progress",children:B?"":`${M}/40`})]},_)})})]})}),p&&m.jsx("div",{className:"mobile-panel",onClick:()=>d(!1),children:m.jsxs("div",{className:"mobile-panel-content",onClick:_=>_.stopPropagation(),children:[m.jsx("button",{className:"mobile-panel-close",onClick:()=>d(!1),children:""}),m.jsx("h3",{children:"Game Info"}),m.jsxs("div",{className:"mobile-info-grid",children:[m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:"Year"}),m.jsxs("span",{className:"info-value",children:[e.year,"/5"]})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:"Trump"}),m.jsx("span",{className:`info-value suit-icon ${($=e.trump)==null?void 0:$.toLowerCase()}`,children:e.trump?rl(e.trump):"?"})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:"Phase"}),m.jsx("span",{className:"info-value",children:o})]}),m.jsxs("div",{className:"info-item",children:[m.jsx("span",{className:"info-label",children:"Turn"}),m.jsx("span",{className:"info-value",children:s?"Your turn!":(q=e.players[t.currentPlayer])==null?void 0:q.name})]})]}),Object.keys(e.exiled||{}).length>0&&m.jsxs("div",{className:"mobile-gulag",children:[m.jsx("h4",{children:"Gulag"}),m.jsxs("span",{children:[Object.values(e.exiled).flat().length," cards exiled"]})]})]})}),y&&m.jsx("div",{className:"mobile-panel",onClick:()=>S(!1),children:m.jsxs("div",{className:"mobile-panel-content menu-panel",onClick:_=>_.stopPropagation(),children:[m.jsx("button",{className:"mobile-panel-close",onClick:()=>S(!1),children:""}),m.jsx("h3",{children:"Menu"}),m.jsxs("div",{className:"menu-options",children:[m.jsx("button",{className:"menu-option",onClick:()=>{A(!0),S(!1)},children:" Rules"}),m.jsx("button",{className:"menu-option",onClick:()=>window.location.reload(),children:" New Game"})]})]})}),N&&m.jsx("div",{className:"mobile-panel rules-panel",onClick:()=>A(!1),children:m.jsxs("div",{className:"mobile-panel-content rules-content",onClick:_=>_.stopPropagation(),children:[m.jsx("button",{className:"mobile-panel-close",onClick:()=>A(!1),children:""}),m.jsx("h3",{children:"Kolkhoz Rules"}),m.jsxs("div",{className:"rules-text",children:[m.jsx("h4",{children:"Objective"}),m.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),m.jsx("h4",{children:"Gameplay"}),m.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),m.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),m.jsx("p",{children:" Jobs need 40 work hours to complete"}),m.jsx("p",{children:" Face cards (J/Q/K) of trump have special powers"}),m.jsx("h4",{children:"Trump Face Cards"}),m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),m.jsxs("p",{children:[" ",m.jsx("strong",{children:"Queen ()"}),": All players become vulnerable to requisition"]}),m.jsxs("p",{children:[" ",m.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),m.jsx("h4",{children:"Requisition"}),m.jsx("p",{children:"At year end, failed jobs trigger requisition - your highest matching card goes to the Gulag!"}),m.jsx("h4",{children:"Scoring"}),m.jsx("p",{children:"Cards in your plot = penalty points. Protect your plot to win!"})]})]})}),m.jsx(n1,{cards:((ne=e.players[i])==null?void 0:ne.hand)||[],onPlayCard:L,canPlay:o==="trick"&&s,leadSuit:(it=(jt=e.currentTrick[0])==null?void 0:jt[1])==null?void 0:it.suit,trump:e.trump,validIndices:u1(e,i,o)}),o==="assignment"&&e.lastWinner===i&&(()=>{const _=[...new Set(e.lastTrick.map(([,M])=>M.suit))];return m.jsxs("div",{className:"assignment-ui",children:[m.jsx("h3",{children:"Assign cards to jobs"}),m.jsx("p",{children:"Assign each card to a job from this trick"}),m.jsx("div",{className:"assignment-cards",children:e.lastTrick.map(([M,B],de)=>{var ve;const Q=`${B.suit}-${B.value}`,le=(ve=e.pendingAssignments)==null?void 0:ve[Q];return m.jsxs("div",{className:"assignment-card",children:[m.jsx(Fe,{card:B,width:80}),m.jsx("select",{value:le||B.suit,onChange:Pe=>ee(Q,Pe.target.value),children:_.map(Pe=>m.jsx("option",{value:Pe,children:Pe},Pe))})]},de)})}),m.jsx("button",{onClick:me,disabled:Object.keys(e.pendingAssignments||{}).length!==e.lastTrick.length,children:"Submit Assignments"})]})})(),o==="swap"&&!((dt=e.swapConfirmed)!=null&&dt[i])&&!O&&m.jsxs("div",{className:"swap-ui",children:[m.jsxs("h3",{children:["Swap Cards (Year ",e.year,")"]}),m.jsx("p",{children:"Select a card from your hand and one from your plot to swap, or skip"}),m.jsxs("div",{className:"swap-section",children:[m.jsx("h4",{children:"Your Hand"}),m.jsx("div",{className:"swap-cards",children:(fe=e.players[i])==null?void 0:fe.hand.map((_,M)=>m.jsx("div",{className:`swap-card ${l===M?"selected":""}`,onClick:()=>a(l===M?null:M),children:m.jsx(Fe,{card:_,width:80})},`hand-${M}`))})]}),((Mt=e.players[i])==null?void 0:Mt.plot.revealed.length)>0&&m.jsxs("div",{className:"swap-section",children:[m.jsx("h4",{children:"Your Revealed Cards (Rewards)"}),m.jsx("div",{className:"swap-cards",children:(Ei=e.players[i])==null?void 0:Ei.plot.revealed.map((_,M)=>m.jsx("div",{className:`swap-card ${u===M&&f==="revealed"?"selected":""}`,onClick:()=>$e(M,"revealed"),children:m.jsx(Fe,{card:_,width:80})},`revealed-${M}`))})]}),((v=e.players[i])==null?void 0:v.plot.hidden.length)>0&&m.jsxs("div",{className:"swap-section",children:[m.jsx("h4",{children:"Your Hidden Plot"}),m.jsx("div",{className:"swap-cards",children:(x=e.players[i])==null?void 0:x.plot.hidden.map((_,M)=>m.jsx("div",{className:`swap-card ${u===M&&f==="hidden"?"selected":""}`,onClick:()=>$e(M,"hidden"),children:m.jsx(Fe,{card:_,width:80})},`hidden-${M}`))})]}),m.jsxs("div",{className:"swap-buttons",children:[m.jsx("button",{onClick:te,disabled:l===null||u===null||f===null,children:"Swap Selected Cards"}),m.jsx("button",{onClick:Ce,children:"Done Swapping"})]})]}),o==="swap"&&(((E=e.swapConfirmed)==null?void 0:E[i])||O)&&m.jsx("div",{className:"swap-ui",children:m.jsx("h3",{children:"Waiting for other players..."})}),m.jsxs("div",{className:"player-plot",children:[m.jsx("h4",{children:"Your Plot"}),m.jsxs("div",{className:"plot-cards",children:[(z=e.players[i])==null?void 0:z.plot.revealed.map((_,M)=>m.jsx(Fe,{card:_,width:60},`r-${M}`)),(R=e.players[i])==null?void 0:R.plot.hidden.map((_,M)=>m.jsxs("div",{className:`hidden-plot-card ${g===M?"revealed":""}`,title:"Tap to reveal",onClick:()=>w(g===M?null:M),children:[m.jsx(Fe,{card:_,width:60,faceDown:!0,className:"card-back"}),m.jsx(Fe,{card:_,width:60,className:"card-front"})]},`h-${M}`))]})]})]})}function rl(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function u1(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function c1(){const[e,t]=xe.useState(!1),[n,r]=xe.useState({...tm}),i=xe.useMemo(()=>e?Xp({game:Gw,board:a1,numPlayers:4,multiplayer:Jp({bots:{1:ls,2:ls,3:ls}}),debug:!1}):null,[e]);return e?m.jsx(i,{playerID:"0",setupData:{variants:n}}):m.jsxs("div",{className:"lobby",children:[m.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),m.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""}),m.jsxs("div",{className:"variant-options",children:[m.jsx("h3",{children:"Deck Type"}),m.jsxs("label",{children:[m.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),m.jsxs("label",{children:[m.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),m.jsx("h3",{children:"Variant Rules"}),m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:s=>r({...n,nomenclature:s.target.checked})}),m.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects (Drunkard Jack, etc.)"]}),m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:s=>r({...n,allowSwap:s.target.checked})}),m.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:s=>r({...n,northernStyle:s.target.checked})}),m.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - Northern style (no job rewards, all vulnerable)"]}),m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:s=>r({...n,miceVariant:s.target.checked})}),m.jsx("strong",{title:"Myshi - Mice",children:""})," - Mice variant (all reveal during requisition)"]}),m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:s=>r({...n,ordenNachalniku:s.target.checked})}),m.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards when jobs complete (36-card only)"]}),m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:s=>r({...n,medalsCount:s.target.checked})}),m.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins contribute to final score"]}),n.deckType===52&&m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:s=>r({...n,accumulateJobs:s.target.checked})}),m.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Unclaimed job rewards carry over to next year"]})]}),m.jsx("button",{onClick:()=>t(!0),children:"Start Game"})]})}const f1=$h(document.getElementById("root"));f1.render(m.jsx(c1,{}));
