(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ff(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uf={exports:{}},uo={},Vf={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rs=Symbol.for("react.element"),xm=Symbol.for("react.portal"),Cm=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),Tm=Symbol.for("react.provider"),Om=Symbol.for("react.context"),Am=Symbol.for("react.forward_ref"),Im=Symbol.for("react.suspense"),jm=Symbol.for("react.memo"),Mm=Symbol.for("react.lazy"),tc=Symbol.iterator;function Rm(e){return e===null||typeof e!="object"?null:(e=tc&&e[tc]||e["@@iterator"],typeof e=="function"?e:null)}var Hf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wf=Object.assign,Kf={};function Nr(e,t,n){this.props=e,this.context=t,this.refs=Kf,this.updater=n||Hf}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qf(){}qf.prototype=Nr.prototype;function Ta(e,t,n){this.props=e,this.context=t,this.refs=Kf,this.updater=n||Hf}var Oa=Ta.prototype=new qf;Oa.constructor=Ta;Wf(Oa,Nr.prototype);Oa.isPureReactComponent=!0;var nc=Array.isArray,Jf=Object.prototype.hasOwnProperty,Aa={current:null},Qf={key:!0,ref:!0,__self:!0,__source:!0};function Yf(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Jf.call(t,r)&&!Qf.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Rs,type:e,key:i,ref:o,props:s,_owner:Aa.current}}function Dm(e,t){return{$$typeof:Rs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ia(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rs}function Lm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rc=/\/+/g;function Do(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lm(""+e.key):t.toString(36)}function di(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Rs:case xm:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Do(o,0):r,nc(s)?(n="",e!=null&&(n=e.replace(rc,"$&/")+"/"),di(s,t,n,"",function(u){return u})):s!=null&&(Ia(s)&&(s=Dm(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",nc(e))for(var l=0;l<e.length;l++){i=e[l];var a=r+Do(i,l);o+=di(i,t,n,a,s)}else if(a=Rm(e),typeof a=="function")for(e=a.call(e),l=0;!(i=e.next()).done;)i=i.value,a=r+Do(i,l++),o+=di(i,t,n,a,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Us(e,t,n){if(e==null)return e;var r=[],s=0;return di(e,r,"","",function(i){return t.call(n,i,s++)}),r}function bm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qe={current:null},hi={transition:null},$m={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:hi,ReactCurrentOwner:Aa};function Xf(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:Us,forEach:function(e,t,n){Us(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Us(e,function(){t++}),t},toArray:function(e){return Us(e,function(t){return t})||[]},only:function(e){if(!Ia(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=Nr;Y.Fragment=Cm;Y.Profiler=Nm;Y.PureComponent=Ta;Y.StrictMode=Pm;Y.Suspense=Im;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$m;Y.act=Xf;Y.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Wf({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Aa.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Jf.call(t,a)&&!Qf.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Rs,type:e.type,key:s,ref:i,props:r,_owner:o}};Y.createContext=function(e){return e={$$typeof:Om,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Tm,_context:e},e.Consumer=e};Y.createElement=Yf;Y.createFactory=function(e){var t=Yf.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:Am,render:e}};Y.isValidElement=Ia;Y.lazy=function(e){return{$$typeof:Mm,_payload:{_status:-1,_result:e},_init:bm}};Y.memo=function(e,t){return{$$typeof:jm,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=hi.transition;hi.transition={};try{e()}finally{hi.transition=t}};Y.unstable_act=Xf;Y.useCallback=function(e,t){return Qe.current.useCallback(e,t)};Y.useContext=function(e){return Qe.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return Qe.current.useDeferredValue(e)};Y.useEffect=function(e,t){return Qe.current.useEffect(e,t)};Y.useId=function(){return Qe.current.useId()};Y.useImperativeHandle=function(e,t,n){return Qe.current.useImperativeHandle(e,t,n)};Y.useInsertionEffect=function(e,t){return Qe.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return Qe.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return Qe.current.useMemo(e,t)};Y.useReducer=function(e,t,n){return Qe.current.useReducer(e,t,n)};Y.useRef=function(e){return Qe.current.useRef(e)};Y.useState=function(e){return Qe.current.useState(e)};Y.useSyncExternalStore=function(e,t,n){return Qe.current.useSyncExternalStore(e,t,n)};Y.useTransition=function(){return Qe.current.useTransition()};Y.version="18.3.1";Vf.exports=Y;var G=Vf.exports;const F=Ff(G);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm=G,zm=Symbol.for("react.element"),Fm=Symbol.for("react.fragment"),Um=Object.prototype.hasOwnProperty,Vm=Bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hm={key:!0,ref:!0,__self:!0,__source:!0};function Zf(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Um.call(t,r)&&!Hm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:zm,type:e,key:i,ref:o,props:s,_owner:Vm.current}}uo.Fragment=Fm;uo.jsx=Zf;uo.jsxs=Zf;Uf.exports=uo;var p=Uf.exports,Gf={exports:{}},dt={},ed={exports:{}},td={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(x,L){var B=x.length;x.push(L);e:for(;0<B;){var K=B-1>>>1,J=x[K];if(0<s(J,L))x[K]=L,x[B]=J,B=K;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var L=x[0],B=x.pop();if(B!==L){x[0]=B;e:for(var K=0,J=x.length,te=J>>>1;K<te;){var oe=2*(K+1)-1,ke=x[oe],ae=oe+1,be=x[ae];if(0>s(ke,B))ae<J&&0>s(be,ke)?(x[K]=be,x[ae]=B,K=ae):(x[K]=ke,x[oe]=B,K=oe);else if(ae<J&&0>s(be,B))x[K]=be,x[ae]=B,K=ae;else break e}}return L}function s(x,L){var B=x.sortIndex-L.sortIndex;return B!==0?B:x.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,f=null,d=3,g=!1,v=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(x){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=x)r(u),L.sortIndex=L.expirationTime,t(a,L);else break;L=n(u)}}function S(x){if(E=!1,y(x),!v)if(n(a)!==null)v=!0,pt(N);else{var L=n(u);L!==null&&R(S,L.startTime-x)}}function N(x,L){v=!1,E&&(E=!1,m(b),b=-1),g=!0;var B=d;try{for(y(L),f=n(a);f!==null&&(!(f.expirationTime>L)||x&&!W());){var K=f.callback;if(typeof K=="function"){f.callback=null,d=f.priorityLevel;var J=K(f.expirationTime<=L);L=e.unstable_now(),typeof J=="function"?f.callback=J:f===n(a)&&r(a),y(L)}else r(a);f=n(a)}if(f!==null)var te=!0;else{var oe=n(u);oe!==null&&R(S,oe.startTime-L),te=!1}return te}finally{f=null,d=B,g=!1}}var M=!1,O=null,b=-1,X=5,z=-1;function W(){return!(e.unstable_now()-z<X)}function ve(){if(O!==null){var x=e.unstable_now();z=x;var L=!0;try{L=O(!0,x)}finally{L?we():(M=!1,O=null)}}else M=!1}var we;if(typeof h=="function")we=function(){h(ve)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Me=Ce.port2;Ce.port1.onmessage=ve,we=function(){Me.postMessage(null)}}else we=function(){k(ve,0)};function pt(x){O=x,M||(M=!0,we())}function R(x,L){b=k(function(){x(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,pt(N))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(x){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var B=d;d=L;try{return x()}finally{d=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,L){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var B=d;d=x;try{return L()}finally{d=B}},e.unstable_scheduleCallback=function(x,L,B){var K=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,x){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=B+J,x={id:c++,callback:L,priorityLevel:x,startTime:B,expirationTime:J,sortIndex:-1},B>K?(x.sortIndex=B,t(u,x),n(a)===null&&x===n(u)&&(E?(m(b),b=-1):E=!0,R(S,B-K))):(x.sortIndex=J,t(a,x),v||g||(v=!0,pt(N))),x},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(x){var L=d;return function(){var B=d;d=L;try{return x.apply(this,arguments)}finally{d=B}}}})(td);ed.exports=td;var Wm=ed.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km=G,ut=Wm;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nd=new Set,fs={};function Qn(e,t){vr(e,t),vr(e+"Capture",t)}function vr(e,t){for(fs[e]=t,e=0;e<t.length;e++)nd.add(t[e])}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wl=Object.prototype.hasOwnProperty,qm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sc={},ic={};function Jm(e){return wl.call(ic,e)?!0:wl.call(sc,e)?!1:qm.test(e)?ic[e]=!0:(sc[e]=!0,!1)}function Qm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ym(e,t,n,r){if(t===null||typeof t>"u"||Qm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ye(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Le[e]=new Ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Le[t]=new Ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Le[e]=new Ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Le[e]=new Ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Le[e]=new Ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Le[e]=new Ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Le[e]=new Ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Le[e]=new Ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Le[e]=new Ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var ja=/[\-:]([a-z])/g;function Ma(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ja,Ma);Le[t]=new Ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ja,Ma);Le[t]=new Ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ja,Ma);Le[t]=new Ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Le[e]=new Ye(e,1,!1,e.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Le[e]=new Ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ra(e,t,n,r){var s=Le.hasOwnProperty(t)?Le[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ym(t,n,s,r)&&(n=null),r||s===null?Jm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var on=Km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vs=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Da=Symbol.for("react.strict_mode"),kl=Symbol.for("react.profiler"),rd=Symbol.for("react.provider"),sd=Symbol.for("react.context"),La=Symbol.for("react.forward_ref"),Sl=Symbol.for("react.suspense"),El=Symbol.for("react.suspense_list"),ba=Symbol.for("react.memo"),fn=Symbol.for("react.lazy"),id=Symbol.for("react.offscreen"),oc=Symbol.iterator;function Lr(e){return e===null||typeof e!="object"?null:(e=oc&&e[oc]||e["@@iterator"],typeof e=="function"?e:null)}var me=Object.assign,Lo;function Jr(e){if(Lo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lo=t&&t[1]||""}return`
`+Lo+e}var bo=!1;function $o(e,t){if(!e||bo)return"";bo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{bo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jr(e):""}function Xm(e){switch(e.tag){case 5:return Jr(e.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return e=$o(e.type,!1),e;case 11:return e=$o(e.type.render,!1),e;case 1:return e=$o(e.type,!0),e;default:return""}}function _l(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tr:return"Fragment";case er:return"Portal";case kl:return"Profiler";case Da:return"StrictMode";case Sl:return"Suspense";case El:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sd:return(e.displayName||"Context")+".Consumer";case rd:return(e._context.displayName||"Context")+".Provider";case La:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ba:return t=e.displayName||null,t!==null?t:_l(e.type)||"Memo";case fn:t=e._payload,e=e._init;try{return _l(e(t))}catch{}}return null}function Zm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _l(t);case 8:return t===Da?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function od(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gm(e){var t=od(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hs(e){e._valueTracker||(e._valueTracker=Gm(e))}function ld(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=od(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Oi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xl(e,t){var n=t.checked;return me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function lc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Pn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ad(e,t){t=t.checked,t!=null&&Ra(e,"checked",t,!1)}function Cl(e,t){ad(e,t);var n=Pn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pl(e,t.type,Pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ac(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Pl(e,t,n){(t!=="number"||Oi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Qr=Array.isArray;function dr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Pn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Nl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(T(92));if(Qr(n)){if(1<n.length)throw Error(T(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Pn(n)}}function ud(e,t){var n=Pn(t.value),r=Pn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function cc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ws,fd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ws=Ws||document.createElement("div"),Ws.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ws.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ds(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ey=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(e){ey.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ts[t]=ts[e]})});function dd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ts.hasOwnProperty(e)&&ts[e]?(""+t).trim():t+"px"}function hd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ty=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ol(e,t){if(t){if(ty[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function Al(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Il=null;function $a(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jl=null,hr=null,pr=null;function fc(e){if(e=bs(e)){if(typeof jl!="function")throw Error(T(280));var t=e.stateNode;t&&(t=mo(t),jl(e.stateNode,e.type,t))}}function pd(e){hr?pr?pr.push(e):pr=[e]:hr=e}function md(){if(hr){var e=hr,t=pr;if(pr=hr=null,fc(e),t)for(e=0;e<t.length;e++)fc(t[e])}}function yd(e,t){return e(t)}function gd(){}var Bo=!1;function vd(e,t,n){if(Bo)return e(t,n);Bo=!0;try{return yd(e,t,n)}finally{Bo=!1,(hr!==null||pr!==null)&&(gd(),md())}}function hs(e,t){var n=e.stateNode;if(n===null)return null;var r=mo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(T(231,t,typeof n));return n}var Ml=!1;if(en)try{var br={};Object.defineProperty(br,"passive",{get:function(){Ml=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{Ml=!1}function ny(e,t,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var ns=!1,Ai=null,Ii=!1,Rl=null,ry={onError:function(e){ns=!0,Ai=e}};function sy(e,t,n,r,s,i,o,l,a){ns=!1,Ai=null,ny.apply(ry,arguments)}function iy(e,t,n,r,s,i,o,l,a){if(sy.apply(this,arguments),ns){if(ns){var u=Ai;ns=!1,Ai=null}else throw Error(T(198));Ii||(Ii=!0,Rl=u)}}function Yn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function dc(e){if(Yn(e)!==e)throw Error(T(188))}function oy(e){var t=e.alternate;if(!t){if(t=Yn(e),t===null)throw Error(T(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dc(s),e;if(i===r)return dc(s),t;i=i.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?e:t}function kd(e){return e=oy(e),e!==null?Sd(e):null}function Sd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sd(e);if(t!==null)return t;e=e.sibling}return null}var Ed=ut.unstable_scheduleCallback,hc=ut.unstable_cancelCallback,ly=ut.unstable_shouldYield,ay=ut.unstable_requestPaint,Se=ut.unstable_now,uy=ut.unstable_getCurrentPriorityLevel,Ba=ut.unstable_ImmediatePriority,_d=ut.unstable_UserBlockingPriority,ji=ut.unstable_NormalPriority,cy=ut.unstable_LowPriority,xd=ut.unstable_IdlePriority,co=null,zt=null;function fy(e){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(co,e,void 0,(e.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:py,dy=Math.log,hy=Math.LN2;function py(e){return e>>>=0,e===0?32:31-(dy(e)/hy|0)|0}var Ks=64,qs=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Mi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Yr(l):(i&=o,i!==0&&(r=Yr(i)))}else o=n&~s,o!==0?r=Yr(o):i!==0&&(r=Yr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ot(t),s=1<<n,r|=e[n],t&=~s;return r}function my(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ot(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=my(l,t)):a<=t&&(e.expiredLanes|=l),i&=~l}}function Dl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cd(){var e=Ks;return Ks<<=1,!(Ks&4194240)&&(Ks=64),e}function zo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ds(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ot(t),e[t]=n}function gy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ot(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function za(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var se=0;function Pd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nd,Fa,Td,Od,Ad,Ll=!1,Js=[],gn=null,vn=null,wn=null,ps=new Map,ms=new Map,hn=[],vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pc(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ms.delete(t.pointerId)}}function $r(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=bs(t),t!==null&&Fa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wy(e,t,n,r,s){switch(t){case"focusin":return gn=$r(gn,e,t,n,r,s),!0;case"dragenter":return vn=$r(vn,e,t,n,r,s),!0;case"mouseover":return wn=$r(wn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ps.set(i,$r(ps.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ms.set(i,$r(ms.get(i)||null,e,t,n,r,s)),!0}return!1}function Id(e){var t=$n(e.target);if(t!==null){var n=Yn(t);if(n!==null){if(t=n.tag,t===13){if(t=wd(n),t!==null){e.blockedOn=t,Ad(e.priority,function(){Td(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Il=r,n.target.dispatchEvent(r),Il=null}else return t=bs(n),t!==null&&Fa(t),e.blockedOn=n,!1;t.shift()}return!0}function mc(e,t,n){pi(e)&&n.delete(t)}function ky(){Ll=!1,gn!==null&&pi(gn)&&(gn=null),vn!==null&&pi(vn)&&(vn=null),wn!==null&&pi(wn)&&(wn=null),ps.forEach(mc),ms.forEach(mc)}function Br(e,t){e.blockedOn===t&&(e.blockedOn=null,Ll||(Ll=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,ky)))}function ys(e){function t(s){return Br(s,e)}if(0<Js.length){Br(Js[0],e);for(var n=1;n<Js.length;n++){var r=Js[n];r.blockedOn===e&&(r.blockedOn=null)}}for(gn!==null&&Br(gn,e),vn!==null&&Br(vn,e),wn!==null&&Br(wn,e),ps.forEach(t),ms.forEach(t),n=0;n<hn.length;n++)r=hn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<hn.length&&(n=hn[0],n.blockedOn===null);)Id(n),n.blockedOn===null&&hn.shift()}var mr=on.ReactCurrentBatchConfig,Ri=!0;function Sy(e,t,n,r){var s=se,i=mr.transition;mr.transition=null;try{se=1,Ua(e,t,n,r)}finally{se=s,mr.transition=i}}function Ey(e,t,n,r){var s=se,i=mr.transition;mr.transition=null;try{se=4,Ua(e,t,n,r)}finally{se=s,mr.transition=i}}function Ua(e,t,n,r){if(Ri){var s=bl(e,t,n,r);if(s===null)Yo(e,t,r,Di,n),pc(e,r);else if(wy(s,e,t,n,r))r.stopPropagation();else if(pc(e,r),t&4&&-1<vy.indexOf(e)){for(;s!==null;){var i=bs(s);if(i!==null&&Nd(i),i=bl(e,t,n,r),i===null&&Yo(e,t,r,Di,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yo(e,t,r,null,n)}}var Di=null;function bl(e,t,n,r){if(Di=null,e=$a(r),e=$n(e),e!==null)if(t=Yn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Di=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uy()){case Ba:return 1;case _d:return 4;case ji:case cy:return 16;case xd:return 536870912;default:return 16}default:return 16}}var mn=null,Va=null,mi=null;function Md(){if(mi)return mi;var e,t=Va,n=t.length,r,s="value"in mn?mn.value:mn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return mi=s.slice(e,1<r?1-r:void 0)}function yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qs(){return!0}function yc(){return!1}function ht(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qs:yc,this.isPropagationStopped=yc,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),t}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=ht(Tr),Ls=me({},Tr,{view:0,detail:0}),_y=ht(Ls),Fo,Uo,zr,fo=me({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zr&&(zr&&e.type==="mousemove"?(Fo=e.screenX-zr.screenX,Uo=e.screenY-zr.screenY):Uo=Fo=0,zr=e),Fo)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),gc=ht(fo),xy=me({},fo,{dataTransfer:0}),Cy=ht(xy),Py=me({},Ls,{relatedTarget:0}),Vo=ht(Py),Ny=me({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ty=ht(Ny),Oy=me({},Tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ay=ht(Oy),Iy=me({},Tr,{data:0}),vc=ht(Iy),jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},My={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ry[e])?!!t[e]:!1}function Wa(){return Dy}var Ly=me({},Ls,{key:function(e){if(e.key){var t=jy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?My[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(e){return e.type==="keypress"?yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),by=ht(Ly),$y=me({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wc=ht($y),By=me({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),zy=ht(By),Fy=me({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uy=ht(Fy),Vy=me({},fo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hy=ht(Vy),Wy=[9,13,27,32],Ka=en&&"CompositionEvent"in window,rs=null;en&&"documentMode"in document&&(rs=document.documentMode);var Ky=en&&"TextEvent"in window&&!rs,Rd=en&&(!Ka||rs&&8<rs&&11>=rs),kc=" ",Sc=!1;function Dd(e,t){switch(e){case"keyup":return Wy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ld(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function qy(e,t){switch(e){case"compositionend":return Ld(t);case"keypress":return t.which!==32?null:(Sc=!0,kc);case"textInput":return e=t.data,e===kc&&Sc?null:e;default:return null}}function Jy(e,t){if(nr)return e==="compositionend"||!Ka&&Dd(e,t)?(e=Md(),mi=Va=mn=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rd&&t.locale!=="ko"?null:t.data;default:return null}}var Qy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qy[e.type]:t==="textarea"}function bd(e,t,n,r){pd(r),t=Li(t,"onChange"),0<t.length&&(n=new Ha("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ss=null,gs=null;function Yy(e){Jd(e,0)}function ho(e){var t=ir(e);if(ld(t))return e}function Xy(e,t){if(e==="change")return t}var $d=!1;if(en){var Ho;if(en){var Wo="oninput"in document;if(!Wo){var _c=document.createElement("div");_c.setAttribute("oninput","return;"),Wo=typeof _c.oninput=="function"}Ho=Wo}else Ho=!1;$d=Ho&&(!document.documentMode||9<document.documentMode)}function xc(){ss&&(ss.detachEvent("onpropertychange",Bd),gs=ss=null)}function Bd(e){if(e.propertyName==="value"&&ho(gs)){var t=[];bd(t,gs,e,$a(e)),vd(Yy,t)}}function Zy(e,t,n){e==="focusin"?(xc(),ss=t,gs=n,ss.attachEvent("onpropertychange",Bd)):e==="focusout"&&xc()}function Gy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ho(gs)}function eg(e,t){if(e==="click")return ho(t)}function tg(e,t){if(e==="input"||e==="change")return ho(t)}function ng(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:ng;function vs(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wl.call(t,s)||!jt(e[s],t[s]))return!1}return!0}function Cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pc(e,t){var n=Cc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cc(n)}}function zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fd(){for(var e=window,t=Oi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Oi(e.document)}return t}function qa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rg(e){var t=Fd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zd(n.ownerDocument.documentElement,n)){if(r!==null&&qa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Pc(n,i);var o=Pc(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sg=en&&"documentMode"in document&&11>=document.documentMode,rr=null,$l=null,is=null,Bl=!1;function Nc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bl||rr==null||rr!==Oi(r)||(r=rr,"selectionStart"in r&&qa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),is&&vs(is,r)||(is=r,r=Li($l,"onSelect"),0<r.length&&(t=new Ha("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function Ys(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var sr={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},Ko={},Ud={};en&&(Ud=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function po(e){if(Ko[e])return Ko[e];if(!sr[e])return e;var t=sr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ud)return Ko[e]=t[n];return e}var Vd=po("animationend"),Hd=po("animationiteration"),Wd=po("animationstart"),Kd=po("transitionend"),qd=new Map,Tc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){qd.set(e,t),Qn(t,[e])}for(var qo=0;qo<Tc.length;qo++){var Jo=Tc[qo],ig=Jo.toLowerCase(),og=Jo[0].toUpperCase()+Jo.slice(1);An(ig,"on"+og)}An(Vd,"onAnimationEnd");An(Hd,"onAnimationIteration");An(Wd,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(Kd,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Oc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,iy(r,t,void 0,e),e.currentTarget=null}function Jd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;Oc(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;Oc(s,l,u),i=a}}}if(Ii)throw e=Rl,Ii=!1,Rl=null,e}function ue(e,t){var n=t[Hl];n===void 0&&(n=t[Hl]=new Set);var r=e+"__bubble";n.has(r)||(Qd(t,e,2,!1),n.add(r))}function Qo(e,t,n){var r=0;t&&(r|=4),Qd(n,e,r,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function ws(e){if(!e[Xs]){e[Xs]=!0,nd.forEach(function(n){n!=="selectionchange"&&(lg.has(n)||Qo(n,!1,e),Qo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,Qo("selectionchange",!1,t))}}function Qd(e,t,n,r){switch(jd(t)){case 1:var s=Sy;break;case 4:s=Ey;break;default:s=Ua}n=s.bind(null,t,n,e),s=void 0,!Ml||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=$n(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}vd(function(){var u=i,c=$a(n),f=[];e:{var d=qd.get(e);if(d!==void 0){var g=Ha,v=e;switch(e){case"keypress":if(yi(n)===0)break e;case"keydown":case"keyup":g=by;break;case"focusin":v="focus",g=Vo;break;case"focusout":v="blur",g=Vo;break;case"beforeblur":case"afterblur":g=Vo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=zy;break;case Vd:case Hd:case Wd:g=Ty;break;case Kd:g=Uy;break;case"scroll":g=_y;break;case"wheel":g=Hy;break;case"copy":case"cut":case"paste":g=Ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wc}var E=(t&4)!==0,k=!E&&e==="scroll",m=E?d!==null?d+"Capture":null:d;E=[];for(var h=u,y;h!==null;){y=h;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,m!==null&&(S=hs(h,m),S!=null&&E.push(ks(h,S,y)))),k)break;h=h.return}0<E.length&&(d=new g(d,v,null,n,c),f.push({event:d,listeners:E}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==Il&&(v=n.relatedTarget||n.fromElement)&&($n(v)||v[tn]))break e;if((g||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?$n(v):null,v!==null&&(k=Yn(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(E=gc,S="onMouseLeave",m="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(E=wc,S="onPointerLeave",m="onPointerEnter",h="pointer"),k=g==null?d:ir(g),y=v==null?d:ir(v),d=new E(S,h+"leave",g,n,c),d.target=k,d.relatedTarget=y,S=null,$n(c)===u&&(E=new E(m,h+"enter",v,n,c),E.target=y,E.relatedTarget=k,S=E),k=S,g&&v)t:{for(E=g,m=v,h=0,y=E;y;y=Gn(y))h++;for(y=0,S=m;S;S=Gn(S))y++;for(;0<h-y;)E=Gn(E),h--;for(;0<y-h;)m=Gn(m),y--;for(;h--;){if(E===m||m!==null&&E===m.alternate)break t;E=Gn(E),m=Gn(m)}E=null}else E=null;g!==null&&Ac(f,d,g,E,!1),v!==null&&k!==null&&Ac(f,k,v,E,!0)}}e:{if(d=u?ir(u):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var N=Xy;else if(Ec(d))if($d)N=tg;else{N=Gy;var M=Zy}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(N=eg);if(N&&(N=N(e,u))){bd(f,N,n,c);break e}M&&M(e,d,u),e==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&Pl(d,"number",d.value)}switch(M=u?ir(u):window,e){case"focusin":(Ec(M)||M.contentEditable==="true")&&(rr=M,$l=u,is=null);break;case"focusout":is=$l=rr=null;break;case"mousedown":Bl=!0;break;case"contextmenu":case"mouseup":case"dragend":Bl=!1,Nc(f,n,c);break;case"selectionchange":if(sg)break;case"keydown":case"keyup":Nc(f,n,c)}var O;if(Ka)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else nr?Dd(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Rd&&n.locale!=="ko"&&(nr||b!=="onCompositionStart"?b==="onCompositionEnd"&&nr&&(O=Md()):(mn=c,Va="value"in mn?mn.value:mn.textContent,nr=!0)),M=Li(u,b),0<M.length&&(b=new vc(b,e,null,n,c),f.push({event:b,listeners:M}),O?b.data=O:(O=Ld(n),O!==null&&(b.data=O)))),(O=Ky?qy(e,n):Jy(e,n))&&(u=Li(u,"onBeforeInput"),0<u.length&&(c=new vc("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=O))}Jd(f,t)})}function ks(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Li(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=hs(e,n),i!=null&&r.unshift(ks(e,i,s)),i=hs(e,t),i!=null&&r.push(ks(e,i,s))),e=e.return}return r}function Gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ac(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=hs(n,i),a!=null&&o.unshift(ks(n,a,l))):s||(a=hs(n,i),a!=null&&o.push(ks(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ag=/\r\n?/g,ug=/\u0000|\uFFFD/g;function Ic(e){return(typeof e=="string"?e:""+e).replace(ag,`
`).replace(ug,"")}function Zs(e,t,n){if(t=Ic(t),Ic(e)!==t&&n)throw Error(T(425))}function bi(){}var zl=null,Fl=null;function Ul(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vl=typeof setTimeout=="function"?setTimeout:void 0,cg=typeof clearTimeout=="function"?clearTimeout:void 0,jc=typeof Promise=="function"?Promise:void 0,fg=typeof queueMicrotask=="function"?queueMicrotask:typeof jc<"u"?function(e){return jc.resolve(null).then(e).catch(dg)}:Vl;function dg(e){setTimeout(function(){throw e})}function Xo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ys(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ys(t)}function kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Or,Ss="__reactProps$"+Or,tn="__reactContainer$"+Or,Hl="__reactEvents$"+Or,hg="__reactListeners$"+Or,pg="__reactHandles$"+Or;function $n(e){var t=e[Bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tn]||n[Bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Mc(e);e!==null;){if(n=e[Bt])return n;e=Mc(e)}return t}e=n,n=e.parentNode}return null}function bs(e){return e=e[Bt]||e[tn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function mo(e){return e[Ss]||null}var Wl=[],or=-1;function In(e){return{current:e}}function ce(e){0>or||(e.current=Wl[or],Wl[or]=null,or--)}function le(e,t){or++,Wl[or]=e.current,e.current=t}var Nn={},He=In(Nn),et=In(!1),Vn=Nn;function wr(e,t){var n=e.type.contextTypes;if(!n)return Nn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function tt(e){return e=e.childContextTypes,e!=null}function $i(){ce(et),ce(He)}function Rc(e,t,n){if(He.current!==Nn)throw Error(T(168));le(He,t),le(et,n)}function Yd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(T(108,Zm(e)||"Unknown",s));return me({},n,r)}function Bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nn,Vn=He.current,le(He,e),le(et,et.current),!0}function Dc(e,t,n){var r=e.stateNode;if(!r)throw Error(T(169));n?(e=Yd(e,t,Vn),r.__reactInternalMemoizedMergedChildContext=e,ce(et),ce(He),le(He,e)):ce(et),le(et,n)}var Qt=null,yo=!1,Zo=!1;function Xd(e){Qt===null?Qt=[e]:Qt.push(e)}function mg(e){yo=!0,Xd(e)}function jn(){if(!Zo&&Qt!==null){Zo=!0;var e=0,t=se;try{var n=Qt;for(se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Qt=null,yo=!1}catch(s){throw Qt!==null&&(Qt=Qt.slice(e+1)),Ed(Ba,jn),s}finally{se=t,Zo=!1}}return null}var lr=[],ar=0,zi=null,Fi=0,mt=[],yt=0,Hn=null,Yt=1,Xt="";function Dn(e,t){lr[ar++]=Fi,lr[ar++]=zi,zi=e,Fi=t}function Zd(e,t,n){mt[yt++]=Yt,mt[yt++]=Xt,mt[yt++]=Hn,Hn=e;var r=Yt;e=Xt;var s=32-Ot(r)-1;r&=~(1<<s),n+=1;var i=32-Ot(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Yt=1<<32-Ot(t)+s|n<<s|r,Xt=i+e}else Yt=1<<i|n<<s|r,Xt=e}function Ja(e){e.return!==null&&(Dn(e,1),Zd(e,1,0))}function Qa(e){for(;e===zi;)zi=lr[--ar],lr[ar]=null,Fi=lr[--ar],lr[ar]=null;for(;e===Hn;)Hn=mt[--yt],mt[yt]=null,Xt=mt[--yt],mt[yt]=null,Yt=mt[--yt],mt[yt]=null}var at=null,ot=null,fe=!1,Nt=null;function Gd(e,t){var n=vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Lc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,ot=kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Hn!==null?{id:Yt,overflow:Xt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,at=e,ot=null,!0):!1;default:return!1}}function Kl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ql(e){if(fe){var t=ot;if(t){var n=t;if(!Lc(e,t)){if(Kl(e))throw Error(T(418));t=kn(n.nextSibling);var r=at;t&&Lc(e,t)?Gd(r,n):(e.flags=e.flags&-4097|2,fe=!1,at=e)}}else{if(Kl(e))throw Error(T(418));e.flags=e.flags&-4097|2,fe=!1,at=e}}}function bc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function Gs(e){if(e!==at)return!1;if(!fe)return bc(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ul(e.type,e.memoizedProps)),t&&(t=ot)){if(Kl(e))throw eh(),Error(T(418));for(;t;)Gd(e,t),t=kn(t.nextSibling)}if(bc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ot=kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ot=null}}else ot=at?kn(e.stateNode.nextSibling):null;return!0}function eh(){for(var e=ot;e;)e=kn(e.nextSibling)}function kr(){ot=at=null,fe=!1}function Ya(e){Nt===null?Nt=[e]:Nt.push(e)}var yg=on.ReactCurrentBatchConfig;function Fr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,e))}return e}function ei(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $c(e){var t=e._init;return t(e._payload)}function th(e){function t(m,h){if(e){var y=m.deletions;y===null?(m.deletions=[h],m.flags|=16):y.push(h)}}function n(m,h){if(!e)return null;for(;h!==null;)t(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function s(m,h){return m=xn(m,h),m.index=0,m.sibling=null,m}function i(m,h,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<h?(m.flags|=2,h):y):(m.flags|=2,h)):(m.flags|=1048576,h)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,h,y,S){return h===null||h.tag!==6?(h=il(y,m.mode,S),h.return=m,h):(h=s(h,y),h.return=m,h)}function a(m,h,y,S){var N=y.type;return N===tr?c(m,h,y.props.children,S,y.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===fn&&$c(N)===h.type)?(S=s(h,y.props),S.ref=Fr(m,h,y),S.return=m,S):(S=_i(y.type,y.key,y.props,null,m.mode,S),S.ref=Fr(m,h,y),S.return=m,S)}function u(m,h,y,S){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=ol(y,m.mode,S),h.return=m,h):(h=s(h,y.children||[]),h.return=m,h)}function c(m,h,y,S,N){return h===null||h.tag!==7?(h=Un(y,m.mode,S,N),h.return=m,h):(h=s(h,y),h.return=m,h)}function f(m,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=il(""+h,m.mode,y),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Vs:return y=_i(h.type,h.key,h.props,null,m.mode,y),y.ref=Fr(m,null,h),y.return=m,y;case er:return h=ol(h,m.mode,y),h.return=m,h;case fn:var S=h._init;return f(m,S(h._payload),y)}if(Qr(h)||Lr(h))return h=Un(h,m.mode,y,null),h.return=m,h;ei(m,h)}return null}function d(m,h,y,S){var N=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(m,h,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vs:return y.key===N?a(m,h,y,S):null;case er:return y.key===N?u(m,h,y,S):null;case fn:return N=y._init,d(m,h,N(y._payload),S)}if(Qr(y)||Lr(y))return N!==null?null:c(m,h,y,S,null);ei(m,y)}return null}function g(m,h,y,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(y)||null,l(h,m,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vs:return m=m.get(S.key===null?y:S.key)||null,a(h,m,S,N);case er:return m=m.get(S.key===null?y:S.key)||null,u(h,m,S,N);case fn:var M=S._init;return g(m,h,y,M(S._payload),N)}if(Qr(S)||Lr(S))return m=m.get(y)||null,c(h,m,S,N,null);ei(h,S)}return null}function v(m,h,y,S){for(var N=null,M=null,O=h,b=h=0,X=null;O!==null&&b<y.length;b++){O.index>b?(X=O,O=null):X=O.sibling;var z=d(m,O,y[b],S);if(z===null){O===null&&(O=X);break}e&&O&&z.alternate===null&&t(m,O),h=i(z,h,b),M===null?N=z:M.sibling=z,M=z,O=X}if(b===y.length)return n(m,O),fe&&Dn(m,b),N;if(O===null){for(;b<y.length;b++)O=f(m,y[b],S),O!==null&&(h=i(O,h,b),M===null?N=O:M.sibling=O,M=O);return fe&&Dn(m,b),N}for(O=r(m,O);b<y.length;b++)X=g(O,m,b,y[b],S),X!==null&&(e&&X.alternate!==null&&O.delete(X.key===null?b:X.key),h=i(X,h,b),M===null?N=X:M.sibling=X,M=X);return e&&O.forEach(function(W){return t(m,W)}),fe&&Dn(m,b),N}function E(m,h,y,S){var N=Lr(y);if(typeof N!="function")throw Error(T(150));if(y=N.call(y),y==null)throw Error(T(151));for(var M=N=null,O=h,b=h=0,X=null,z=y.next();O!==null&&!z.done;b++,z=y.next()){O.index>b?(X=O,O=null):X=O.sibling;var W=d(m,O,z.value,S);if(W===null){O===null&&(O=X);break}e&&O&&W.alternate===null&&t(m,O),h=i(W,h,b),M===null?N=W:M.sibling=W,M=W,O=X}if(z.done)return n(m,O),fe&&Dn(m,b),N;if(O===null){for(;!z.done;b++,z=y.next())z=f(m,z.value,S),z!==null&&(h=i(z,h,b),M===null?N=z:M.sibling=z,M=z);return fe&&Dn(m,b),N}for(O=r(m,O);!z.done;b++,z=y.next())z=g(O,m,b,z.value,S),z!==null&&(e&&z.alternate!==null&&O.delete(z.key===null?b:z.key),h=i(z,h,b),M===null?N=z:M.sibling=z,M=z);return e&&O.forEach(function(ve){return t(m,ve)}),fe&&Dn(m,b),N}function k(m,h,y,S){if(typeof y=="object"&&y!==null&&y.type===tr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Vs:e:{for(var N=y.key,M=h;M!==null;){if(M.key===N){if(N=y.type,N===tr){if(M.tag===7){n(m,M.sibling),h=s(M,y.props.children),h.return=m,m=h;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===fn&&$c(N)===M.type){n(m,M.sibling),h=s(M,y.props),h.ref=Fr(m,M,y),h.return=m,m=h;break e}n(m,M);break}else t(m,M);M=M.sibling}y.type===tr?(h=Un(y.props.children,m.mode,S,y.key),h.return=m,m=h):(S=_i(y.type,y.key,y.props,null,m.mode,S),S.ref=Fr(m,h,y),S.return=m,m=S)}return o(m);case er:e:{for(M=y.key;h!==null;){if(h.key===M)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(m,h.sibling),h=s(h,y.children||[]),h.return=m,m=h;break e}else{n(m,h);break}else t(m,h);h=h.sibling}h=ol(y,m.mode,S),h.return=m,m=h}return o(m);case fn:return M=y._init,k(m,h,M(y._payload),S)}if(Qr(y))return v(m,h,y,S);if(Lr(y))return E(m,h,y,S);ei(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(m,h.sibling),h=s(h,y),h.return=m,m=h):(n(m,h),h=il(y,m.mode,S),h.return=m,m=h),o(m)):n(m,h)}return k}var Sr=th(!0),nh=th(!1),Ui=In(null),Vi=null,ur=null,Xa=null;function Za(){Xa=ur=Vi=null}function Ga(e){var t=Ui.current;ce(Ui),e._currentValue=t}function Jl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yr(e,t){Vi=e,Xa=ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Xa!==e)if(e={context:e,memoizedValue:t,next:null},ur===null){if(Vi===null)throw Error(T(308));ur=e,Vi.dependencies={lanes:0,firstContext:e}}else ur=ur.next=e;return t}var Bn=null;function eu(e){Bn===null?Bn=[e]:Bn.push(e)}function rh(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,eu(t)):(n.next=s.next,s.next=n),t.interleaved=n,nn(e,r)}function nn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dn=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,nn(e,n)}return s=r.interleaved,s===null?(t.next=t,eu(r)):(t.next=s.next,s.next=t),r.interleaved=t,nn(e,n)}function gi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,za(e,n)}}function Bc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var s=e.updateQueue;dn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(i!==null){var f=s.baseState;o=0,c=u=a=null,l=i;do{var d=l.lane,g=l.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,E=l;switch(d=t,g=n,E.tag){case 1:if(v=E.payload,typeof v=="function"){f=v.call(g,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=E.payload,d=typeof v=="function"?v.call(g,f,d):v,d==null)break e;f=me({},f,d);break e;case 2:dn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=s.effects,d===null?s.effects=[l]:d.push(l))}else g={eventTime:g,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=f):c=c.next=g,o|=d;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;d=l,l=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(c===null&&(a=f),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Kn|=o,e.lanes=o,e.memoizedState=f}}function zc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var $s={},Ft=In($s),Es=In($s),_s=In($s);function zn(e){if(e===$s)throw Error(T(174));return e}function nu(e,t){switch(le(_s,t),le(Es,e),le(Ft,$s),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Tl(t,e)}ce(Ft),le(Ft,t)}function Er(){ce(Ft),ce(Es),ce(_s)}function ih(e){zn(_s.current);var t=zn(Ft.current),n=Tl(t,e.type);t!==n&&(le(Es,e),le(Ft,n))}function ru(e){Es.current===e&&(ce(Ft),ce(Es))}var he=In(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Go=[];function su(){for(var e=0;e<Go.length;e++)Go[e]._workInProgressVersionPrimary=null;Go.length=0}var vi=on.ReactCurrentDispatcher,el=on.ReactCurrentBatchConfig,Wn=0,pe=null,Ne=null,Ie=null,Ki=!1,os=!1,xs=0,gg=0;function $e(){throw Error(T(321))}function iu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function ou(e,t,n,r,s,i){if(Wn=i,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vi.current=e===null||e.memoizedState===null?Sg:Eg,e=n(r,s),os){i=0;do{if(os=!1,xs=0,25<=i)throw Error(T(301));i+=1,Ie=Ne=null,t.updateQueue=null,vi.current=_g,e=n(r,s)}while(os)}if(vi.current=qi,t=Ne!==null&&Ne.next!==null,Wn=0,Ie=Ne=pe=null,Ki=!1,t)throw Error(T(300));return e}function lu(){var e=xs!==0;return xs=0,e}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?pe.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function St(){if(Ne===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=Ie===null?pe.memoizedState:Ie.next;if(t!==null)Ie=t,Ne=e;else{if(e===null)throw Error(T(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Ie===null?pe.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Cs(e,t){return typeof t=="function"?t(e):t}function tl(e){var t=St(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=Ne,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var c=u.lane;if((Wn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,pe.lanes|=c,Kn|=c}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,jt(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,pe.lanes|=i,Kn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nl(e){var t=St(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);jt(i,t.memoizedState)||(Ge=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function oh(){}function lh(e,t){var n=pe,r=St(),s=t(),i=!jt(r.memoizedState,s);if(i&&(r.memoizedState=s,Ge=!0),r=r.queue,au(ch.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Ps(9,uh.bind(null,n,r,s,t),void 0,null),je===null)throw Error(T(349));Wn&30||ah(n,t,s)}return s}function ah(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uh(e,t,n,r){t.value=n,t.getSnapshot=r,fh(t)&&dh(e)}function ch(e,t,n){return n(function(){fh(t)&&dh(e)})}function fh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function dh(e){var t=nn(e,1);t!==null&&At(t,e,1,-1)}function Fc(e){var t=bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t.queue=e,e=e.dispatch=kg.bind(null,pe,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hh(){return St().memoizedState}function wi(e,t,n,r){var s=bt();pe.flags|=e,s.memoizedState=Ps(1|t,n,void 0,r===void 0?null:r)}function go(e,t,n,r){var s=St();r=r===void 0?null:r;var i=void 0;if(Ne!==null){var o=Ne.memoizedState;if(i=o.destroy,r!==null&&iu(r,o.deps)){s.memoizedState=Ps(t,n,i,r);return}}pe.flags|=e,s.memoizedState=Ps(1|t,n,i,r)}function Uc(e,t){return wi(8390656,8,e,t)}function au(e,t){return go(2048,8,e,t)}function ph(e,t){return go(4,2,e,t)}function mh(e,t){return go(4,4,e,t)}function yh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gh(e,t,n){return n=n!=null?n.concat([e]):null,go(4,4,yh.bind(null,t,e),n)}function uu(){}function vh(e,t){var n=St();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wh(e,t){var n=St();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function kh(e,t,n){return Wn&21?(jt(n,t)||(n=Cd(),pe.lanes|=n,Kn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=n)}function vg(e,t){var n=se;se=n!==0&&4>n?n:4,e(!0);var r=el.transition;el.transition={};try{e(!1),t()}finally{se=n,el.transition=r}}function Sh(){return St().memoizedState}function wg(e,t,n){var r=_n(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Eh(e))_h(t,n);else if(n=rh(e,t,n,r),n!==null){var s=Je();At(n,e,r,s),xh(n,t,r)}}function kg(e,t,n){var r=_n(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Eh(e))_h(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,jt(l,o)){var a=t.interleaved;a===null?(s.next=s,eu(t)):(s.next=a.next,a.next=s),t.interleaved=s;return}}catch{}finally{}n=rh(e,t,s,r),n!==null&&(s=Je(),At(n,e,r,s),xh(n,t,r))}}function Eh(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function _h(e,t){os=Ki=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,za(e,n)}}var qi={readContext:kt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},Sg={readContext:kt,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:Uc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wi(4194308,4,yh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wi(4194308,4,e,t)},useInsertionEffect:function(e,t){return wi(4,2,e,t)},useMemo:function(e,t){var n=bt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=wg.bind(null,pe,e),[r.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:Fc,useDebugValue:uu,useDeferredValue:function(e){return bt().memoizedState=e},useTransition:function(){var e=Fc(!1),t=e[0];return e=vg.bind(null,e[1]),bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=pe,s=bt();if(fe){if(n===void 0)throw Error(T(407));n=n()}else{if(n=t(),je===null)throw Error(T(349));Wn&30||ah(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Uc(ch.bind(null,r,i,e),[e]),r.flags|=2048,Ps(9,uh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bt(),t=je.identifierPrefix;if(fe){var n=Xt,r=Yt;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eg={readContext:kt,useCallback:vh,useContext:kt,useEffect:au,useImperativeHandle:gh,useInsertionEffect:ph,useLayoutEffect:mh,useMemo:wh,useReducer:tl,useRef:hh,useState:function(){return tl(Cs)},useDebugValue:uu,useDeferredValue:function(e){var t=St();return kh(t,Ne.memoizedState,e)},useTransition:function(){var e=tl(Cs)[0],t=St().memoizedState;return[e,t]},useMutableSource:oh,useSyncExternalStore:lh,useId:Sh,unstable_isNewReconciler:!1},_g={readContext:kt,useCallback:vh,useContext:kt,useEffect:au,useImperativeHandle:gh,useInsertionEffect:ph,useLayoutEffect:mh,useMemo:wh,useReducer:nl,useRef:hh,useState:function(){return nl(Cs)},useDebugValue:uu,useDeferredValue:function(e){var t=St();return Ne===null?t.memoizedState=e:kh(t,Ne.memoizedState,e)},useTransition:function(){var e=nl(Cs)[0],t=St().memoizedState;return[e,t]},useMutableSource:oh,useSyncExternalStore:lh,useId:Sh,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ql(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return(e=e._reactInternals)?Yn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Je(),s=_n(e),i=Zt(r,s);i.payload=t,n!=null&&(i.callback=n),t=Sn(e,i,s),t!==null&&(At(t,e,s,r),gi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Je(),s=_n(e),i=Zt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Sn(e,i,s),t!==null&&(At(t,e,s,r),gi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Je(),r=_n(e),s=Zt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Sn(e,s,r),t!==null&&(At(t,e,r,n),gi(t,e,r))}};function Vc(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!vs(n,r)||!vs(s,i):!0}function Ch(e,t,n){var r=!1,s=Nn,i=t.contextType;return typeof i=="object"&&i!==null?i=kt(i):(s=tt(t)?Vn:He.current,r=t.contextTypes,i=(r=r!=null)?wr(e,s):Nn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function Yl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},tu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=kt(i):(i=tt(t)?Vn:He.current,s.context=wr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ql(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&vo.enqueueReplaceState(s,s.state,null),Hi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function _r(e,t){try{var n="",r=t;do n+=Xm(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function rl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xg=typeof WeakMap=="function"?WeakMap:Map;function Ph(e,t,n){n=Zt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qi||(Qi=!0,la=r),Xl(e,t)},n}function Nh(e,t,n){n=Zt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Xl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xl(e,t),typeof r!="function"&&(En===null?En=new Set([this]):En.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Wc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new xg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=$g.bind(null,e,t,n),t.then(e,e))}function Kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zt(-1,1),t.tag=2,Sn(n,t,1))),n.lanes|=1),e)}var Cg=on.ReactCurrentOwner,Ge=!1;function Ke(e,t,n,r){t.child=e===null?nh(t,null,n,r):Sr(t,e.child,n,r)}function Jc(e,t,n,r,s){n=n.render;var i=t.ref;return yr(t,s),r=ou(e,t,n,r,i,s),n=lu(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rn(e,t,s)):(fe&&n&&Ja(t),t.flags|=1,Ke(e,t,r,s),t.child)}function Qc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!gu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Th(e,t,i,r,s)):(e=_i(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vs,n(o,r)&&e.ref===t.ref)return rn(e,t,s)}return t.flags|=1,e=xn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Th(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(vs(i,r)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,rn(e,t,s)}return Zl(e,t,n,r,s)}function Oh(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(fr,it),it|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,le(fr,it),it|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,le(fr,it),it|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,le(fr,it),it|=r;return Ke(e,t,s,n),t.child}function Ah(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zl(e,t,n,r,s){var i=tt(n)?Vn:He.current;return i=wr(t,i),yr(t,s),n=ou(e,t,n,r,i,s),r=lu(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rn(e,t,s)):(fe&&r&&Ja(t),t.flags|=1,Ke(e,t,n,s),t.child)}function Yc(e,t,n,r,s){if(tt(n)){var i=!0;Bi(t)}else i=!1;if(yr(t,s),t.stateNode===null)ki(e,t),Ch(t,n,r),Yl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=kt(u):(u=tt(n)?Vn:He.current,u=wr(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Hc(t,o,r,u),dn=!1;var d=t.memoizedState;o.state=d,Hi(t,r,o,s),a=t.memoizedState,l!==r||d!==a||et.current||dn?(typeof c=="function"&&(Ql(t,n,c,r),a=t.memoizedState),(l=dn||Vc(t,n,l,r,d,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,sh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:xt(t.type,l),o.props=u,f=t.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=kt(a):(a=tt(n)?Vn:He.current,a=wr(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||d!==a)&&Hc(t,o,r,a),dn=!1,d=t.memoizedState,o.state=d,Hi(t,r,o,s);var v=t.memoizedState;l!==f||d!==v||et.current||dn?(typeof g=="function"&&(Ql(t,n,g,r),v=t.memoizedState),(u=dn||Vc(t,n,u,r,d,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Gl(e,t,n,r,i,s)}function Gl(e,t,n,r,s,i){Ah(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Dc(t,n,!1),rn(e,t,i);r=t.stateNode,Cg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Sr(t,e.child,null,i),t.child=Sr(t,null,l,i)):Ke(e,t,l,i),t.memoizedState=r.state,s&&Dc(t,n,!0),t.child}function Ih(e){var t=e.stateNode;t.pendingContext?Rc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rc(e,t.context,!1),nu(e,t.containerInfo)}function Xc(e,t,n,r,s){return kr(),Ya(s),t.flags|=256,Ke(e,t,n,r),t.child}var ea={dehydrated:null,treeContext:null,retryLane:0};function ta(e){return{baseLanes:e,cachePool:null,transitions:null}}function jh(e,t,n){var r=t.pendingProps,s=he.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),le(he,s&1),e===null)return ql(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=So(o,r,0,null),e=Un(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ta(n),t.memoizedState=ea,e):cu(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Pg(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=xn(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=xn(l,i):(i=Un(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?ta(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ea,r}return i=e.child,e=i.sibling,r=xn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cu(e,t){return t=So({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ti(e,t,n,r){return r!==null&&Ya(r),Sr(t,e.child,null,n),e=cu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Pg(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=rl(Error(T(422))),ti(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=So({mode:"visible",children:r.children},s,0,null),i=Un(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Sr(t,e.child,null,o),t.child.memoizedState=ta(o),t.memoizedState=ea,i);if(!(t.mode&1))return ti(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(T(419)),r=rl(i,r,void 0),ti(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ge||l){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nn(e,s),At(r,e,s,-1))}return yu(),r=rl(Error(T(421))),ti(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Bg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ot=kn(s.nextSibling),at=t,fe=!0,Nt=null,e!==null&&(mt[yt++]=Yt,mt[yt++]=Xt,mt[yt++]=Hn,Yt=e.id,Xt=e.overflow,Hn=t),t=cu(t,r.children),t.flags|=4096,t)}function Zc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jl(e.return,t,n)}function sl(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Mh(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ke(e,t,r.children,n),r=he.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zc(e,n,t);else if(e.tag===19)Zc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(le(he,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Wi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),sl(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Wi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}sl(t,!0,n,null,i);break;case"together":sl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ki(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,n=xn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ng(e,t,n){switch(t.tag){case 3:Ih(t),kr();break;case 5:ih(t);break;case 1:tt(t.type)&&Bi(t);break;case 4:nu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;le(Ui,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(le(he,he.current&1),t.flags|=128,null):n&t.child.childLanes?jh(e,t,n):(le(he,he.current&1),e=rn(e,t,n),e!==null?e.sibling:null);le(he,he.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Mh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),le(he,he.current),r)break;return null;case 22:case 23:return t.lanes=0,Oh(e,t,n)}return rn(e,t,n)}var Rh,na,Dh,Lh;Rh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};na=function(){};Dh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,zn(Ft.current);var i=null;switch(n){case"input":s=xl(e,s),r=xl(e,r),i=[];break;case"select":s=me({},s,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":s=Nl(e,s),r=Nl(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bi)}Ol(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fs.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ue("scroll",e),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Lh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ur(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Be(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Tg(e,t,n){var r=t.pendingProps;switch(Qa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(t),null;case 1:return tt(t.type)&&$i(),Be(t),null;case 3:return r=t.stateNode,Er(),ce(et),ce(He),su(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Gs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nt!==null&&(ca(Nt),Nt=null))),na(e,t),Be(t),null;case 5:ru(t);var s=zn(_s.current);if(n=t.type,e!==null&&t.stateNode!=null)Dh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(T(166));return Be(t),null}if(e=zn(Ft.current),Gs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Bt]=t,r[Ss]=i,e=(t.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(s=0;s<Xr.length;s++)ue(Xr[s],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":lc(r,i),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ue("invalid",r);break;case"textarea":uc(r,i),ue("invalid",r)}Ol(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Zs(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Zs(r.textContent,l,e),s=["children",""+l]):fs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ue("scroll",r)}switch(n){case"input":Hs(r),ac(r,i,!0);break;case"textarea":Hs(r),cc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Bt]=t,e[Ss]=r,Rh(e,t,!1,!1),t.stateNode=e;e:{switch(o=Al(n,r),n){case"dialog":ue("cancel",e),ue("close",e),s=r;break;case"iframe":case"object":case"embed":ue("load",e),s=r;break;case"video":case"audio":for(s=0;s<Xr.length;s++)ue(Xr[s],e);s=r;break;case"source":ue("error",e),s=r;break;case"img":case"image":case"link":ue("error",e),ue("load",e),s=r;break;case"details":ue("toggle",e),s=r;break;case"input":lc(e,r),s=xl(e,r),ue("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=me({},r,{value:void 0}),ue("invalid",e);break;case"textarea":uc(e,r),s=Nl(e,r),ue("invalid",e);break;default:s=r}Ol(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?hd(e,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&fd(e,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ds(e,a):typeof a=="number"&&ds(e,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fs.hasOwnProperty(i)?a!=null&&i==="onScroll"&&ue("scroll",e):a!=null&&Ra(e,i,a,o))}switch(n){case"input":Hs(e),ac(e,r,!1);break;case"textarea":Hs(e),cc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Pn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?dr(e,!!r.multiple,i,!1):r.defaultValue!=null&&dr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=bi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Be(t),null;case 6:if(e&&t.stateNode!=null)Lh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(T(166));if(n=zn(_s.current),zn(Ft.current),Gs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bt]=t,(i=r.nodeValue!==n)&&(e=at,e!==null))switch(e.tag){case 3:Zs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zs(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bt]=t,t.stateNode=r}return Be(t),null;case 13:if(ce(he),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&ot!==null&&t.mode&1&&!(t.flags&128))eh(),kr(),t.flags|=98560,i=!1;else if(i=Gs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(T(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[Bt]=t}else kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Be(t),i=!1}else Nt!==null&&(ca(Nt),Nt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||he.current&1?Te===0&&(Te=3):yu())),t.updateQueue!==null&&(t.flags|=4),Be(t),null);case 4:return Er(),na(e,t),e===null&&ws(t.stateNode.containerInfo),Be(t),null;case 10:return Ga(t.type._context),Be(t),null;case 17:return tt(t.type)&&$i(),Be(t),null;case 19:if(ce(he),i=t.memoizedState,i===null)return Be(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ur(i,!1);else{if(Te!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wi(e),o!==null){for(t.flags|=128,Ur(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return le(he,he.current&1|2),t.child}e=e.sibling}i.tail!==null&&Se()>xr&&(t.flags|=128,r=!0,Ur(i,!1),t.lanes=4194304)}else{if(!r)if(e=Wi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ur(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return Be(t),null}else 2*Se()-i.renderingStartTime>xr&&n!==1073741824&&(t.flags|=128,r=!0,Ur(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Se(),t.sibling=null,n=he.current,le(he,r?n&1|2:n&1),t):(Be(t),null);case 22:case 23:return mu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?it&1073741824&&(Be(t),t.subtreeFlags&6&&(t.flags|=8192)):Be(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function Og(e,t){switch(Qa(t),t.tag){case 1:return tt(t.type)&&$i(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Er(),ce(et),ce(He),su(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ru(t),null;case 13:if(ce(he),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(he),null;case 4:return Er(),null;case 10:return Ga(t.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var ni=!1,Ve=!1,Ag=typeof WeakSet=="function"?WeakSet:Set,$=null;function cr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ge(e,t,r)}else n.current=null}function ra(e,t,n){try{n()}catch(r){ge(e,t,r)}}var Gc=!1;function Ig(e,t){if(zl=Ri,e=Fd(),qa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)d=f,f=g;for(;;){if(f===e)break t;if(d===n&&++u===s&&(l=o),d===i&&++c===r&&(a=o),(g=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fl={focusedElem:e,selectionRange:n},Ri=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var E=v.memoizedProps,k=v.memoizedState,m=t.stateNode,h=m.getSnapshotBeforeUpdate(t.elementType===t.type?E:xt(t.type,E),k);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(S){ge(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return v=Gc,Gc=!1,v}function ls(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ra(t,n,i)}s=s.next}while(s!==r)}}function wo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bh(e){var t=e.alternate;t!==null&&(e.alternate=null,bh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[Ss],delete t[Hl],delete t[hg],delete t[pg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $h(e){return e.tag===5||e.tag===3||e.tag===4}function ef(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$h(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ia(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bi));else if(r!==4&&(e=e.child,e!==null))for(ia(e,t,n),e=e.sibling;e!==null;)ia(e,t,n),e=e.sibling}function oa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(oa(e,t,n),e=e.sibling;e!==null;)oa(e,t,n),e=e.sibling}var Re=null,Ct=!1;function cn(e,t,n){for(n=n.child;n!==null;)Bh(e,t,n),n=n.sibling}function Bh(e,t,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(co,n)}catch{}switch(n.tag){case 5:Ve||cr(n,t);case 6:var r=Re,s=Ct;Re=null,cn(e,t,n),Re=r,Ct=s,Re!==null&&(Ct?(e=Re,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Re.removeChild(n.stateNode));break;case 18:Re!==null&&(Ct?(e=Re,n=n.stateNode,e.nodeType===8?Xo(e.parentNode,n):e.nodeType===1&&Xo(e,n),ys(e)):Xo(Re,n.stateNode));break;case 4:r=Re,s=Ct,Re=n.stateNode.containerInfo,Ct=!0,cn(e,t,n),Re=r,Ct=s;break;case 0:case 11:case 14:case 15:if(!Ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ra(n,t,o),s=s.next}while(s!==r)}cn(e,t,n);break;case 1:if(!Ve&&(cr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ge(n,t,l)}cn(e,t,n);break;case 21:cn(e,t,n);break;case 22:n.mode&1?(Ve=(r=Ve)||n.memoizedState!==null,cn(e,t,n),Ve=r):cn(e,t,n);break;default:cn(e,t,n)}}function tf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ag),t.forEach(function(r){var s=zg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Re=l.stateNode,Ct=!1;break e;case 3:Re=l.stateNode.containerInfo,Ct=!0;break e;case 4:Re=l.stateNode.containerInfo,Ct=!0;break e}l=l.return}if(Re===null)throw Error(T(160));Bh(i,o,s),Re=null,Ct=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){ge(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zh(t,e),t=t.sibling}function zh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_t(t,e),Lt(e),r&4){try{ls(3,e,e.return),wo(3,e)}catch(E){ge(e,e.return,E)}try{ls(5,e,e.return)}catch(E){ge(e,e.return,E)}}break;case 1:_t(t,e),Lt(e),r&512&&n!==null&&cr(n,n.return);break;case 5:if(_t(t,e),Lt(e),r&512&&n!==null&&cr(n,n.return),e.flags&32){var s=e.stateNode;try{ds(s,"")}catch(E){ge(e,e.return,E)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ad(s,i),Al(l,o);var u=Al(l,i);for(o=0;o<a.length;o+=2){var c=a[o],f=a[o+1];c==="style"?hd(s,f):c==="dangerouslySetInnerHTML"?fd(s,f):c==="children"?ds(s,f):Ra(s,c,f,u)}switch(l){case"input":Cl(s,i);break;case"textarea":ud(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?dr(s,!!i.multiple,g,!1):d!==!!i.multiple&&(i.defaultValue!=null?dr(s,!!i.multiple,i.defaultValue,!0):dr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ss]=i}catch(E){ge(e,e.return,E)}}break;case 6:if(_t(t,e),Lt(e),r&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(E){ge(e,e.return,E)}}break;case 3:if(_t(t,e),Lt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ys(t.containerInfo)}catch(E){ge(e,e.return,E)}break;case 4:_t(t,e),Lt(e);break;case 13:_t(t,e),Lt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hu=Se())),r&4&&tf(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Ve=(u=Ve)||c,_t(t,e),Ve=u):_t(t,e),Lt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for($=e,c=e.child;c!==null;){for(f=$=c;$!==null;){switch(d=$,g=d.child,d.tag){case 0:case 11:case 14:case 15:ls(4,d,d.return);break;case 1:cr(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(E){ge(r,n,E)}}break;case 5:cr(d,d.return);break;case 22:if(d.memoizedState!==null){rf(f);continue}}g!==null?(g.return=d,$=g):rf(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=dd("display",o))}catch(E){ge(e,e.return,E)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(E){ge(e,e.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_t(t,e),Lt(e),r&4&&tf(e);break;case 21:break;default:_t(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($h(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ds(s,""),r.flags&=-33);var i=ef(e);oa(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ef(e);ia(e,l,o);break;default:throw Error(T(161))}}catch(a){ge(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jg(e,t,n){$=e,Fh(e)}function Fh(e,t,n){for(var r=(e.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ni;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||Ve;l=ni;var u=Ve;if(ni=o,(Ve=a)&&!u)for($=s;$!==null;)o=$,a=o.child,o.tag===22&&o.memoizedState!==null?sf(s):a!==null?(a.return=o,$=a):sf(s);for(;i!==null;)$=i,Fh(i),i=i.sibling;$=s,ni=l,Ve=u}nf(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):nf(e)}}function nf(e){for(;$!==null;){var t=$;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||wo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ve)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:xt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&zc(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ys(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Ve||t.flags&512&&sa(t)}catch(d){ge(t,t.return,d)}}if(t===e){$=null;break}if(n=t.sibling,n!==null){n.return=t.return,$=n;break}$=t.return}}function rf(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$=n;break}$=t.return}}function sf(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{wo(4,t)}catch(a){ge(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(a){ge(t,s,a)}}var i=t.return;try{sa(t)}catch(a){ge(t,i,a)}break;case 5:var o=t.return;try{sa(t)}catch(a){ge(t,o,a)}}}catch(a){ge(t,t.return,a)}if(t===e){$=null;break}var l=t.sibling;if(l!==null){l.return=t.return,$=l;break}$=t.return}}var Mg=Math.ceil,Ji=on.ReactCurrentDispatcher,fu=on.ReactCurrentOwner,wt=on.ReactCurrentBatchConfig,ee=0,je=null,_e=null,De=0,it=0,fr=In(0),Te=0,Ns=null,Kn=0,ko=0,du=0,as=null,Ze=null,hu=0,xr=1/0,qt=null,Qi=!1,la=null,En=null,ri=!1,yn=null,Yi=0,us=0,aa=null,Si=-1,Ei=0;function Je(){return ee&6?Se():Si!==-1?Si:Si=Se()}function _n(e){return e.mode&1?ee&2&&De!==0?De&-De:yg.transition!==null?(Ei===0&&(Ei=Cd()),Ei):(e=se,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function At(e,t,n,r){if(50<us)throw us=0,aa=null,Error(T(185));Ds(e,n,r),(!(ee&2)||e!==je)&&(e===je&&(!(ee&2)&&(ko|=n),Te===4&&pn(e,De)),nt(e,r),n===1&&ee===0&&!(t.mode&1)&&(xr=Se()+500,yo&&jn()))}function nt(e,t){var n=e.callbackNode;yy(e,t);var r=Mi(e,e===je?De:0);if(r===0)n!==null&&hc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&hc(n),t===1)e.tag===0?mg(of.bind(null,e)):Xd(of.bind(null,e)),fg(function(){!(ee&6)&&jn()}),n=null;else{switch(Pd(r)){case 1:n=Ba;break;case 4:n=_d;break;case 16:n=ji;break;case 536870912:n=xd;break;default:n=ji}n=Qh(n,Uh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Uh(e,t){if(Si=-1,Ei=0,ee&6)throw Error(T(327));var n=e.callbackNode;if(gr()&&e.callbackNode!==n)return null;var r=Mi(e,e===je?De:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xi(e,r);else{t=r;var s=ee;ee|=2;var i=Hh();(je!==e||De!==t)&&(qt=null,xr=Se()+500,Fn(e,t));do try{Lg();break}catch(l){Vh(e,l)}while(!0);Za(),Ji.current=i,ee=s,_e!==null?t=0:(je=null,De=0,t=Te)}if(t!==0){if(t===2&&(s=Dl(e),s!==0&&(r=s,t=ua(e,s))),t===1)throw n=Ns,Fn(e,0),pn(e,r),nt(e,Se()),n;if(t===6)pn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Rg(s)&&(t=Xi(e,r),t===2&&(i=Dl(e),i!==0&&(r=i,t=ua(e,i))),t===1))throw n=Ns,Fn(e,0),pn(e,r),nt(e,Se()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(T(345));case 2:Ln(e,Ze,qt);break;case 3:if(pn(e,r),(r&130023424)===r&&(t=hu+500-Se(),10<t)){if(Mi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Je(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Vl(Ln.bind(null,e,Ze,qt),t);break}Ln(e,Ze,qt);break;case 4:if(pn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Ot(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mg(r/1960))-r,10<r){e.timeoutHandle=Vl(Ln.bind(null,e,Ze,qt),r);break}Ln(e,Ze,qt);break;case 5:Ln(e,Ze,qt);break;default:throw Error(T(329))}}}return nt(e,Se()),e.callbackNode===n?Uh.bind(null,e):null}function ua(e,t){var n=as;return e.current.memoizedState.isDehydrated&&(Fn(e,t).flags|=256),e=Xi(e,t),e!==2&&(t=Ze,Ze=n,t!==null&&ca(t)),e}function ca(e){Ze===null?Ze=e:Ze.push.apply(Ze,e)}function Rg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!jt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pn(e,t){for(t&=~du,t&=~ko,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ot(t),r=1<<n;e[n]=-1,t&=~r}}function of(e){if(ee&6)throw Error(T(327));gr();var t=Mi(e,0);if(!(t&1))return nt(e,Se()),null;var n=Xi(e,t);if(e.tag!==0&&n===2){var r=Dl(e);r!==0&&(t=r,n=ua(e,r))}if(n===1)throw n=Ns,Fn(e,0),pn(e,t),nt(e,Se()),n;if(n===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ln(e,Ze,qt),nt(e,Se()),null}function pu(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(xr=Se()+500,yo&&jn())}}function qn(e){yn!==null&&yn.tag===0&&!(ee&6)&&gr();var t=ee;ee|=1;var n=wt.transition,r=se;try{if(wt.transition=null,se=1,e)return e()}finally{se=r,wt.transition=n,ee=t,!(ee&6)&&jn()}}function mu(){it=fr.current,ce(fr)}function Fn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cg(n)),_e!==null)for(n=_e.return;n!==null;){var r=n;switch(Qa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$i();break;case 3:Er(),ce(et),ce(He),su();break;case 5:ru(r);break;case 4:Er();break;case 13:ce(he);break;case 19:ce(he);break;case 10:Ga(r.type._context);break;case 22:case 23:mu()}n=n.return}if(je=e,_e=e=xn(e.current,null),De=it=t,Te=0,Ns=null,du=ko=Kn=0,Ze=as=null,Bn!==null){for(t=0;t<Bn.length;t++)if(n=Bn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Bn=null}return e}function Vh(e,t){do{var n=_e;try{if(Za(),vi.current=qi,Ki){for(var r=pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ki=!1}if(Wn=0,Ie=Ne=pe=null,os=!1,xs=0,fu.current=null,n===null||n.return===null){Te=1,Ns=t,_e=null;break}e:{var i=e,o=n.return,l=n,a=t;if(t=De,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Kc(o);if(g!==null){g.flags&=-257,qc(g,o,l,i,t),g.mode&1&&Wc(i,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var E=new Set;E.add(a),t.updateQueue=E}else v.add(a);break e}else{if(!(t&1)){Wc(i,u,t),yu();break e}a=Error(T(426))}}else if(fe&&l.mode&1){var k=Kc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),qc(k,o,l,i,t),Ya(_r(a,l));break e}}i=a=_r(a,l),Te!==4&&(Te=2),as===null?as=[i]:as.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Ph(i,a,t);Bc(i,m);break e;case 1:l=a;var h=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(En===null||!En.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Nh(i,l,t);Bc(i,S);break e}}i=i.return}while(i!==null)}Kh(n)}catch(N){t=N,_e===n&&n!==null&&(_e=n=n.return);continue}break}while(!0)}function Hh(){var e=Ji.current;return Ji.current=qi,e===null?qi:e}function yu(){(Te===0||Te===3||Te===2)&&(Te=4),je===null||!(Kn&268435455)&&!(ko&268435455)||pn(je,De)}function Xi(e,t){var n=ee;ee|=2;var r=Hh();(je!==e||De!==t)&&(qt=null,Fn(e,t));do try{Dg();break}catch(s){Vh(e,s)}while(!0);if(Za(),ee=n,Ji.current=r,_e!==null)throw Error(T(261));return je=null,De=0,Te}function Dg(){for(;_e!==null;)Wh(_e)}function Lg(){for(;_e!==null&&!ly();)Wh(_e)}function Wh(e){var t=Jh(e.alternate,e,it);e.memoizedProps=e.pendingProps,t===null?Kh(e):_e=t,fu.current=null}function Kh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Og(n,t),n!==null){n.flags&=32767,_e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Te=6,_e=null;return}}else if(n=Tg(n,t,it),n!==null){_e=n;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Te===0&&(Te=5)}function Ln(e,t,n){var r=se,s=wt.transition;try{wt.transition=null,se=1,bg(e,t,n,r)}finally{wt.transition=s,se=r}return null}function bg(e,t,n,r){do gr();while(yn!==null);if(ee&6)throw Error(T(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(gy(e,i),e===je&&(_e=je=null,De=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ri||(ri=!0,Qh(ji,function(){return gr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wt.transition,wt.transition=null;var o=se;se=1;var l=ee;ee|=4,fu.current=null,Ig(e,n),zh(n,e),rg(Fl),Ri=!!zl,Fl=zl=null,e.current=n,jg(n),ay(),ee=l,se=o,wt.transition=i}else e.current=n;if(ri&&(ri=!1,yn=e,Yi=s),i=e.pendingLanes,i===0&&(En=null),fy(n.stateNode),nt(e,Se()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qi)throw Qi=!1,e=la,la=null,e;return Yi&1&&e.tag!==0&&gr(),i=e.pendingLanes,i&1?e===aa?us++:(us=0,aa=e):us=0,jn(),null}function gr(){if(yn!==null){var e=Pd(Yi),t=wt.transition,n=se;try{if(wt.transition=null,se=16>e?16:e,yn===null)var r=!1;else{if(e=yn,yn=null,Yi=0,ee&6)throw Error(T(331));var s=ee;for(ee|=4,$=e.current;$!==null;){var i=$,o=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for($=u;$!==null;){var c=$;switch(c.tag){case 0:case 11:case 15:ls(8,c,i)}var f=c.child;if(f!==null)f.return=c,$=f;else for(;$!==null;){c=$;var d=c.sibling,g=c.return;if(bh(c),c===u){$=null;break}if(d!==null){d.return=g,$=d;break}$=g}}}var v=i.alternate;if(v!==null){var E=v.child;if(E!==null){v.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ls(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,$=m;break e}$=i.return}}var h=e.current;for($=h;$!==null;){o=$;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,$=y;else e:for(o=h;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wo(9,l)}}catch(N){ge(l,l.return,N)}if(l===o){$=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,$=S;break e}$=l.return}}if(ee=s,jn(),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(co,e)}catch{}r=!0}return r}finally{se=n,wt.transition=t}}return!1}function lf(e,t,n){t=_r(n,t),t=Ph(e,t,1),e=Sn(e,t,1),t=Je(),e!==null&&(Ds(e,1,t),nt(e,t))}function ge(e,t,n){if(e.tag===3)lf(e,e,n);else for(;t!==null;){if(t.tag===3){lf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(En===null||!En.has(r))){e=_r(n,e),e=Nh(t,e,1),t=Sn(t,e,1),e=Je(),t!==null&&(Ds(t,1,e),nt(t,e));break}}t=t.return}}function $g(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Je(),e.pingedLanes|=e.suspendedLanes&n,je===e&&(De&n)===n&&(Te===4||Te===3&&(De&130023424)===De&&500>Se()-hu?Fn(e,0):du|=n),nt(e,t)}function qh(e,t){t===0&&(e.mode&1?(t=qs,qs<<=1,!(qs&130023424)&&(qs=4194304)):t=1);var n=Je();e=nn(e,t),e!==null&&(Ds(e,t,n),nt(e,n))}function Bg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qh(e,n)}function zg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(t),qh(e,n)}var Jh;Jh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||et.current)Ge=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ge=!1,Ng(e,t,n);Ge=!!(e.flags&131072)}else Ge=!1,fe&&t.flags&1048576&&Zd(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ki(e,t),e=t.pendingProps;var s=wr(t,He.current);yr(t,n),s=ou(null,t,r,e,s,n);var i=lu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,tt(r)?(i=!0,Bi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tu(t),s.updater=vo,t.stateNode=s,s._reactInternals=t,Yl(t,r,e,n),t=Gl(null,t,r,!0,i,n)):(t.tag=0,fe&&i&&Ja(t),Ke(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ki(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Ug(r),e=xt(r,e),s){case 0:t=Zl(null,t,r,e,n);break e;case 1:t=Yc(null,t,r,e,n);break e;case 11:t=Jc(null,t,r,e,n);break e;case 14:t=Qc(null,t,r,xt(r.type,e),n);break e}throw Error(T(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),Zl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),Yc(e,t,r,s,n);case 3:e:{if(Ih(t),e===null)throw Error(T(387));r=t.pendingProps,i=t.memoizedState,s=i.element,sh(e,t),Hi(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=_r(Error(T(423)),t),t=Xc(e,t,r,n,s);break e}else if(r!==s){s=_r(Error(T(424)),t),t=Xc(e,t,r,n,s);break e}else for(ot=kn(t.stateNode.containerInfo.firstChild),at=t,fe=!0,Nt=null,n=nh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kr(),r===s){t=rn(e,t,n);break e}Ke(e,t,r,n)}t=t.child}return t;case 5:return ih(t),e===null&&ql(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ul(r,s)?o=null:i!==null&&Ul(r,i)&&(t.flags|=32),Ah(e,t),Ke(e,t,o,n),t.child;case 6:return e===null&&ql(t),null;case 13:return jh(e,t,n);case 4:return nu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Sr(t,null,r,n):Ke(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),Jc(e,t,r,s,n);case 7:return Ke(e,t,t.pendingProps,n),t.child;case 8:return Ke(e,t,t.pendingProps.children,n),t.child;case 12:return Ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,le(Ui,r._currentValue),r._currentValue=o,i!==null)if(jt(i.value,o)){if(i.children===s.children&&!et.current){t=rn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Zt(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Jl(i.return,n,t),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Jl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ke(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,yr(t,n),s=kt(s),r=r(s),t.flags|=1,Ke(e,t,r,n),t.child;case 14:return r=t.type,s=xt(r,t.pendingProps),s=xt(r.type,s),Qc(e,t,r,s,n);case 15:return Th(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:xt(r,s),ki(e,t),t.tag=1,tt(r)?(e=!0,Bi(t)):e=!1,yr(t,n),Ch(t,r,s),Yl(t,r,s,n),Gl(null,t,r,!0,e,n);case 19:return Mh(e,t,n);case 22:return Oh(e,t,n)}throw Error(T(156,t.tag))};function Qh(e,t){return Ed(e,t)}function Fg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(e,t,n,r){return new Fg(e,t,n,r)}function gu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ug(e){if(typeof e=="function")return gu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===La)return 11;if(e===ba)return 14}return 2}function xn(e,t){var n=e.alternate;return n===null?(n=vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _i(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")gu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case tr:return Un(n.children,s,i,t);case Da:o=8,s|=8;break;case kl:return e=vt(12,n,t,s|2),e.elementType=kl,e.lanes=i,e;case Sl:return e=vt(13,n,t,s),e.elementType=Sl,e.lanes=i,e;case El:return e=vt(19,n,t,s),e.elementType=El,e.lanes=i,e;case id:return So(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rd:o=10;break e;case sd:o=9;break e;case La:o=11;break e;case ba:o=14;break e;case fn:o=16,r=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=vt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Un(e,t,n,r){return e=vt(7,e,r,t),e.lanes=n,e}function So(e,t,n,r){return e=vt(22,e,r,t),e.elementType=id,e.lanes=n,e.stateNode={isHidden:!1},e}function il(e,t,n){return e=vt(6,e,null,t),e.lanes=n,e}function ol(e,t,n){return t=vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zo(0),this.expirationTimes=zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vu(e,t,n,r,s,i,o,l,a){return e=new Vg(e,t,n,l,a),t===1?(t=1,i===!0&&(t|=8)):t=0,i=vt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(i),e}function Hg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yh(e){if(!e)return Nn;e=e._reactInternals;e:{if(Yn(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(tt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var n=e.type;if(tt(n))return Yd(e,n,t)}return t}function Xh(e,t,n,r,s,i,o,l,a){return e=vu(n,r,!0,e,s,i,o,l,a),e.context=Yh(null),n=e.current,r=Je(),s=_n(n),i=Zt(r,s),i.callback=t??null,Sn(n,i,s),e.current.lanes=s,Ds(e,s,r),nt(e,r),e}function Eo(e,t,n,r){var s=t.current,i=Je(),o=_n(s);return n=Yh(n),t.context===null?t.context=n:t.pendingContext=n,t=Zt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Sn(s,t,o),e!==null&&(At(e,s,o,i),gi(e,s,o)),o}function Zi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function af(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wu(e,t){af(e,t),(e=e.alternate)&&af(e,t)}function Wg(){return null}var Zh=typeof reportError=="function"?reportError:function(e){console.error(e)};function ku(e){this._internalRoot=e}_o.prototype.render=ku.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));Eo(e,t,null,null)};_o.prototype.unmount=ku.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qn(function(){Eo(null,e,null,null)}),t[tn]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var t=Od();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hn.length&&t!==0&&t<hn[n].priority;n++);hn.splice(n,0,e),n===0&&Id(e)}};function Su(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uf(){}function Kg(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Zi(o);i.call(u)}}var o=Xh(t,r,e,0,null,!1,!1,"",uf);return e._reactRootContainer=o,e[tn]=o.current,ws(e.nodeType===8?e.parentNode:e),qn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Zi(a);l.call(u)}}var a=vu(e,0,!1,null,null,!1,!1,"",uf);return e._reactRootContainer=a,e[tn]=a.current,ws(e.nodeType===8?e.parentNode:e),qn(function(){Eo(t,a,n,r)}),a}function Co(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=Zi(o);l.call(a)}}Eo(t,o,e,s)}else o=Kg(n,t,e,s,r);return Zi(o)}Nd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yr(t.pendingLanes);n!==0&&(za(t,n|1),nt(t,Se()),!(ee&6)&&(xr=Se()+500,jn()))}break;case 13:qn(function(){var r=nn(e,1);if(r!==null){var s=Je();At(r,e,1,s)}}),wu(e,1)}};Fa=function(e){if(e.tag===13){var t=nn(e,134217728);if(t!==null){var n=Je();At(t,e,134217728,n)}wu(e,134217728)}};Td=function(e){if(e.tag===13){var t=_n(e),n=nn(e,t);if(n!==null){var r=Je();At(n,e,t,r)}wu(e,t)}};Od=function(){return se};Ad=function(e,t){var n=se;try{return se=e,t()}finally{se=n}};jl=function(e,t,n){switch(t){case"input":if(Cl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=mo(r);if(!s)throw Error(T(90));ld(r),Cl(r,s)}}}break;case"textarea":ud(e,n);break;case"select":t=n.value,t!=null&&dr(e,!!n.multiple,t,!1)}};yd=pu;gd=qn;var qg={usingClientEntryPoint:!1,Events:[bs,ir,mo,pd,md,pu]},Vr={findFiberByHostInstance:$n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jg={bundleType:Vr.bundleType,version:Vr.version,rendererPackageName:Vr.rendererPackageName,rendererConfig:Vr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:on.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kd(e),e===null?null:e.stateNode},findFiberByHostInstance:Vr.findFiberByHostInstance||Wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!si.isDisabled&&si.supportsFiber)try{co=si.inject(Jg),zt=si}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qg;dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Su(t))throw Error(T(200));return Hg(e,t,null,n)};dt.createRoot=function(e,t){if(!Su(e))throw Error(T(299));var n=!1,r="",s=Zh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vu(e,1,!1,null,null,n,!1,r,s),e[tn]=t.current,ws(e.nodeType===8?e.parentNode:e),new ku(t)};dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=kd(t),e=e===null?null:e.stateNode,e};dt.flushSync=function(e){return qn(e)};dt.hydrate=function(e,t,n){if(!xo(t))throw Error(T(200));return Co(null,e,t,!0,n)};dt.hydrateRoot=function(e,t,n){if(!Su(e))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Zh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Xh(t,null,e,1,n??null,s,!1,i,o),e[tn]=t.current,ws(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new _o(t)};dt.render=function(e,t,n){if(!xo(t))throw Error(T(200));return Co(null,e,t,!1,n)};dt.unmountComponentAtNode=function(e){if(!xo(e))throw Error(T(40));return e._reactRootContainer?(qn(function(){Co(null,null,e,!1,function(){e._reactRootContainer=null,e[tn]=null})}),!0):!1};dt.unstable_batchedUpdates=pu;dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xo(n))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return Co(e,t,n,!1,r)};dt.version="18.3.1-next-f1338f8080-20240426";function Gh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gh)}catch(e){console.error(e)}}Gh(),Gf.exports=dt;var Qg=Gf.exports,ep,cf=Qg;ep=cf.createRoot,cf.hydrateRoot;let Yg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Xg=(e=21)=>{let t="",n=e|0;for(;n--;)t+=Yg[Math.random()*64|0];return t};function Tt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Cr(e){return!!e&&!!e[ct]}function Jn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===iv}(e)||Array.isArray(e)||!!e[vf]||!!(!((t=e.constructor)===null||t===void 0)&&t[vf])||Eu(e)||_u(e))}function Ts(e,t,n){n===void 0&&(n=!1),Ar(e)===0?(n?Object.keys:Tu)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,s){return t(s,r,e)})}function Ar(e){var t=e[ct];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Eu(e)?2:_u(e)?3:0}function fa(e,t){return Ar(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Zg(e,t){return Ar(e)===2?e.get(t):e[t]}function tp(e,t,n){var r=Ar(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Gg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Eu(e){return rv&&e instanceof Map}function _u(e){return sv&&e instanceof Set}function bn(e){return e.o||e.t}function xu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ov(e);delete t[ct];for(var n=Tu(t),r=0;r<n.length;r++){var s=n[r],i=t[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[s]})}return Object.create(Object.getPrototypeOf(e),t)}function Cu(e,t){return t===void 0&&(t=!1),Pu(e)||Cr(e)||!Jn(e)||(Ar(e)>1&&(e.set=e.add=e.clear=e.delete=ev),Object.freeze(e),t&&Ts(e,function(n,r){return Cu(r,!0)},!0)),e}function ev(){Tt(2)}function Pu(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ut(e){var t=lv[e];return t||Tt(18,e),t}function ff(){return Os}function ll(e,t){t&&(Ut("Patches"),e.u=[],e.s=[],e.v=t)}function Gi(e){da(e),e.p.forEach(tv),e.p=null}function da(e){e===Os&&(Os=e.l)}function df(e){return Os={p:[],l:Os,h:e,m:!0,_:0}}function tv(e){var t=e[ct];t.i===0||t.i===1?t.j():t.g=!0}function al(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Ut("ES5").S(t,e,r),r?(n[ct].P&&(Gi(t),Tt(4)),Jn(e)&&(e=eo(t,e),t.l||to(t,e)),t.u&&Ut("Patches").M(n[ct].t,e,t.u,t.s)):e=eo(t,n,[]),Gi(t),t.u&&t.v(t.u,t.s),e!==np?e:void 0}function eo(e,t,n){if(Pu(t))return t;var r=t[ct];if(!r)return Ts(t,function(l,a){return hf(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return to(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=xu(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),Ts(i,function(l,a){return hf(e,r,s,l,a,n,o)}),to(e,s,!1),n&&e.u&&Ut("Patches").N(r,n,e.u,e.s)}return r.o}function hf(e,t,n,r,s,i,o){if(Cr(s)){var l=eo(e,s,i&&t&&t.i!==3&&!fa(t.R,r)?i.concat(r):void 0);if(tp(n,r,l),!Cr(l))return;e.m=!1}else o&&n.add(s);if(Jn(s)&&!Pu(s)){if(!e.h.D&&e._<1)return;eo(e,s),t&&t.A.l||to(e,s)}}function to(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Cu(t,n)}function ul(e,t){var n=e[ct];return(n?bn(n):e)[t]}function pf(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ha(e){e.P||(e.P=!0,e.l&&ha(e.l))}function cl(e){e.o||(e.o=xu(e.t))}function pa(e,t,n){var r=Eu(t)?Ut("MapSet").F(t,n):_u(t)?Ut("MapSet").T(t,n):e.O?function(s,i){var o=Array.isArray(s),l={i:o?1:0,A:i?i.A:ff(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},a=l,u=ma;o&&(a=[l],u=Zr);var c=Proxy.revocable(a,u),f=c.revoke,d=c.proxy;return l.k=d,l.j=f,d}(t,n):Ut("ES5").J(t,n);return(n?n.A:ff()).p.push(r),r}function nv(e){return Cr(e)||Tt(22,e),function t(n){if(!Jn(n))return n;var r,s=n[ct],i=Ar(n);if(s){if(!s.P&&(s.i<4||!Ut("ES5").K(s)))return s.t;s.I=!0,r=mf(n,i),s.I=!1}else r=mf(n,i);return Ts(r,function(o,l){s&&Zg(s.t,o)===l||tp(r,o,t(l))}),i===3?new Set(r):r}(e)}function mf(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return xu(e)}var yf,Os,Nu=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",rv=typeof Map<"u",sv=typeof Set<"u",gf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",np=Nu?Symbol.for("immer-nothing"):((yf={})["immer-nothing"]=!0,yf),vf=Nu?Symbol.for("immer-draftable"):"__$immer_draftable",ct=Nu?Symbol.for("immer-state"):"__$immer_state",iv=""+Object.prototype.constructor,Tu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ov=Object.getOwnPropertyDescriptors||function(e){var t={};return Tu(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},lv={},ma={get:function(e,t){if(t===ct)return e;var n=bn(e);if(!fa(n,t))return function(s,i,o){var l,a=pf(i,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(s.k):void 0}(e,n,t);var r=n[t];return e.I||!Jn(r)?r:r===ul(e.t,t)?(cl(e),e.o[t]=pa(e.A.h,r,e)):r},has:function(e,t){return t in bn(e)},ownKeys:function(e){return Reflect.ownKeys(bn(e))},set:function(e,t,n){var r=pf(bn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var s=ul(bn(e),t),i=s==null?void 0:s[ct];if(i&&i.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Gg(n,s)&&(n!==void 0||fa(e.t,t)))return!0;cl(e),ha(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return ul(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,cl(e),ha(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=bn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Tt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Tt(12)}},Zr={};Ts(ma,function(e,t){Zr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Zr.deleteProperty=function(e,t){return Zr.set.call(this,e,t,void 0)},Zr.set=function(e,t,n){return ma.set.call(this,e[0],t,n,e[0])};var av=function(){function e(n){var r=this;this.O=gf,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var l=i;i=s;var a=r;return function(E){var k=this;E===void 0&&(E=l);for(var m=arguments.length,h=Array(m>1?m-1:0),y=1;y<m;y++)h[y-1]=arguments[y];return a.produce(E,function(S){var N;return(N=i).call.apply(N,[k,S].concat(h))})}}var u;if(typeof i!="function"&&Tt(6),o!==void 0&&typeof o!="function"&&Tt(7),Jn(s)){var c=df(r),f=pa(r,s,void 0),d=!0;try{u=i(f),d=!1}finally{d?Gi(c):da(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(E){return ll(c,o),al(E,c)},function(E){throw Gi(c),E}):(ll(c,o),al(u,c))}if(!s||typeof s!="object"){if((u=i(s))===void 0&&(u=s),u===np&&(u=void 0),r.D&&Cu(u,!0),o){var g=[],v=[];Ut("Patches").M(s,u,g,v),o(g,v)}return u}Tt(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(u,function(g){return s.apply(void 0,[g].concat(f))})};var o,l,a=r.produce(s,i,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Jn(n)||Tt(8),Cr(n)&&(n=nv(n));var r=df(this),s=pa(this,n,void 0);return s[ct].C=!0,da(r),s},t.finishDraft=function(n,r){var s=n&&n[ct],i=s.A;return ll(i,r),al(void 0,i)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!gf&&Tt(20),this.O=n},t.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=Ut("Patches").$;return Cr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),ft=new av,uv=ft.produce;ft.produceWithPatches.bind(ft);ft.setAutoFreeze.bind(ft);ft.setUseProxies.bind(ft);ft.applyPatches.bind(ft);ft.createDraft.bind(ft);ft.finishDraft.bind(ft);class cv{constructor(t){const n=fv();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function fv(){let e=4022871197;return function(n){const r=n.toString();for(let s=0;s<r.length;s++){e+=r.charCodeAt(s);let i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}}function wf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function rp(e,t){const n=new cv(e),r=n.next.bind(n);return t&&wf(t,n),r.state=()=>wf(n,{}),r}class kf{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=rp(n,t.prngstate),s=r();return this.state={...t,prngstate:r.state()},s}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const i in n){const o=n[i];r[i]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function s(i=6,o){return o===void 0?Math.floor(t()*i)+1:Array.from({length:o}).map(()=>Math.floor(t()*i)+1)}return{...r,Die:s,Number:()=>t(),Shuffle:i=>{const o=[...i];let l=i.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const dv={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new kf(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=kf.seed()),{seed:t}},playerView:()=>{}};var hv=Function.prototype,pv=hv.toString;pv.call(Object);const As="MAKE_MOVE",Po="GAME_EVENT",No="REDO",Ou="RESET",Au="SYNC",To="UNDO",Iu="UPDATE",ju="PATCH",sp="PLUGIN",Oo="STRIP_TRANSIENTS",ip=(e,t,n,r)=>({type:As,payload:{type:e,args:t,playerID:n,credentials:r}}),cs=(e,t,n,r)=>({type:Po,payload:{type:e,args:t,playerID:n,credentials:r}}),op=(e,t,n,r)=>({type:Po,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),lp=e=>({type:Au,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),ap=(e,t,n,r)=>({type:ju,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),up=(e,t)=>({type:Iu,state:e,deltalog:t,clientOnly:!0}),cp=e=>({type:Ou,state:e,clientOnly:!0}),fp=(e,t)=>({type:To,payload:{type:null,args:null,playerID:e,credentials:t}}),dp=(e,t)=>({type:No,payload:{type:null,args:null,playerID:e,credentials:t}}),mv=(e,t,n,r)=>({type:sp,payload:{type:e,args:t,playerID:n,credentials:r}}),hp=()=>({type:Oo});var yv=Object.freeze({__proto__:null,makeMove:ip,gameEvent:cs,automaticGameEvent:op,sync:lp,patch:ap,update:up,reset:cp,undo:fp,redo:dp,plugin:mv,stripTransients:hp});const Tn="INVALID_MOVE",gv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const s=uv(t.G,i=>{const o=e({...t,G:i},...n);if(o===Tn){r=!0;return}return o});return r?Tn:s}};var Fe;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Fe||(Fe={}));var Jt;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Jt||(Jt={}));class vv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:s},i)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:i+`
`+s}}}});e:for(let s=0;s<this.dispatch.length;s++){const i=this.dispatch[s],o=i.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(i.error,Jt.MaxTurnEndings);if(i.calledFrom===void 0)return r(i.error,Jt.CalledOutsideHook);if(t.ctx.gameover)break e;switch(i.type){case"endStage":case"setStage":case"setActivePlayers":{switch(i.calledFrom){case Fe.TURN_ON_END:case Fe.PHASE_ON_END:return r(i.error,Jt.StageEventInOnEnd);case Fe.PHASE_ON_BEGIN:return r(i.error,Jt.StageEventInPhaseBegin);case Fe.TURN_ON_BEGIN:if(i.type==="setActivePlayers")break;return r(i.error,Jt.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(i.calledFrom===Fe.TURN_ON_END||i.calledFrom===Fe.PHASE_ON_END)return r(i.error,Jt.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(i.calledFrom===Fe.PHASE_ON_END)return r(i.error,Jt.PhaseEventInOnEnd);if(i.phase!==t.ctx.phase)continue e;break}}const a=op(i.type,i.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const Mu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const s=n.events;s&&s._private.updateTurnContext(n.ctx,t);const i=e(n,...r);return s&&s._private.unsetCurrentMethod(),i},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new vv(e.flow,t,n).api()},wv={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},kv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},Sv=(...e)=>console.error(...e);function re(e){Sv("ERROR:",e)}const Ru=[gv,dv,wv,kv],Bs=[...Ru,Mu],Ev=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const s=r.name,i=e.plugins[s]||{data:{}},o=r.action(i.data,t.payload);e={...e,plugins:{...e.plugins,[s]:{...i,data:o}}}}),e),Pr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),pp=(e,t,n)=>[...Ru,...n,Mu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:s})=>s(r,t),e),_v=(e,t)=>([...Bs,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,s=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:s}}}}),e),ya=(e,t)=>([...Bs,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}},i=n.api({G:e.G,ctx:e.ctx,data:s.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...s,api:i}}}}),e),xv=(e,t)=>([...Ru,...t.game.plugins,Mu].reverse().forEach(n=>{const r=n.name,s=e.plugins[r]||{data:{}};if(n.flush){const i=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:s.api,data:s.data});e={...e,plugins:{...e.plugins,[n.name]:{data:i}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:s.api,data:s.data});const i=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:i}}}}}),e),Cv=(e,t)=>[...Bs,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,s=e.plugins[r];return s?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:s.api,data:s.data}):!1}).includes(!0),Pv=(e,t)=>[...Bs,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:s}=r,i=e.plugins[s],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:i&&i.data});return o?{plugin:s,message:o}:!1}).find(r=>r)||!1,mp=(e,t)=>{const n=xv(e,t),r=Pv(n,t);if(!r)return[n];const{plugin:s,message:i}=r;return re(`${s} plugin declared action invalid:
${i}`),[e,r]},yp=({G:e,ctx:t,plugins:n={}},{game:r,playerID:s})=>([...Bs,...r.plugins].forEach(({name:i,playerView:o})=>{if(!o)return;const{data:l}=n[i]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:s});n={...n,[i]:{data:a}}}),n);function no(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function ro(e,t){let n={},r=[],s=null,i={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=so.NULL),n=a}else{if(no(t),t.next&&(s=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&ii(n,i,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&ii(n,i,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];ii(n,i,o,u,t.all)}if(t.value)for(const a in t.value)ii(n,i,o,a,t.value[a]);if(t.minMoves)for(const a in n)i[a]===void 0&&(i[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(i).length===0&&(i=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:i,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:s}}function Nv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:i,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=ro(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:i}=e;else if(i.length>0){const l=i.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s}=i[l]),i=i.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:s,_prevActivePlayers:i}}function ii(e,t,n,r,s){(typeof s!="object"||s===so.NULL)&&(s={stage:s}),s.stage!==void 0&&(no(s),e[r]=s.stage,s.minMoves&&(t[r]=s.minMoves),s.maxMoves&&(n[r]=s.maxMoves))}function ga(e,t){return e[t]+""}function Tv(e,t){let{G:n,ctx:r}=e;const{numPlayers:s}=r,o={...Pr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:s})].map((d,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&re(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const f=ga(a,u);return r={...r,currentPlayer:f,playOrderPos:u,playOrder:a},r=ro(r,t.activePlayers||{}),r}function Ov(e,t,n,r){const s=n.order;let{G:i,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&re(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=ga(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:re(`invalid argument to endTurn: ${u}`)}});else{const c={...Pr(e),G:i,ctx:o},f=s.next(c),d=typeof f;f!==void 0&&d!=="number"&&re(`invalid value returned by turn.order.next  expected number or undefined got ${d} ${f}.`),f===void 0?a=!0:(l=f,t=ga(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const Av={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},so={NULL:null};var Du={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.Pointer=Gt.escapeToken=Gt.unescapeToken=void 0;function gp(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Gt.unescapeToken=gp;function vp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Gt.escapeToken=vp;var Iv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(gp);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(vp).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",s=t,i=1,o=this.tokens.length;i<o;i++)n=s,r=this.tokens[i],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(s=(n||{})[r]);return{parent:n,key:r,value:s}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Gt.Pointer=Iv;var ye={},Lu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(s){return s===void 0?"undefined":s===null?"null":Array.isArray(s)?"array":typeof s}e.objectType=t;function n(s){return s!=null&&typeof s=="object"}function r(s){if(!n(s))return s;if(s.constructor==Array){for(var i=s.length,o=new Array(i),l=0;l<i;l++)o[l]=r(s[l]);return o}if(s.constructor==Date){var a=new Date(+s);return a}var u={};for(var c in s)e.hasOwnProperty.call(s,c)&&(u[c]=r(s[c]));return u}e.clone=r})(Lu);var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.diffAny=qe.diffObjects=qe.diffArrays=qe.intersection=qe.subtract=qe.isDestructive=void 0;var Is=Lu;function jv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}qe.isDestructive=jv;function va(e,t){var n={};for(var r in e)Is.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var s in t)Is.hasOwnProperty.call(t,s)&&t[s]!==void 0&&delete n[s];return Object.keys(n)}qe.subtract=va;function wp(e){for(var t=e.length,n={},r=0;r<t;r++){var s=e[r];for(var i in s)Is.hasOwnProperty.call(s,i)&&s[i]!==void 0&&(n[i]=(n[i]||0)+1)}for(var i in n)n[i]<t&&delete n[i];return Object.keys(n)}qe.intersection=wp;function Mv(e){return e.op==="add"}function Rv(e){return e.op==="remove"}function fl(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function kp(e,t,n,r){r===void 0&&(r=Ao);var s={"0,0":{operations:[],cost:0}};function i(c,f){var d="".concat(c,",").concat(f),g=s[d];if(g===void 0){if(c>0&&f>0&&!r(e[c-1],t[f-1],n.add(String(c-1))).length)g=i(c-1,f-1);else{var v=[];if(c>0){var E=i(c-1,f),k={op:"remove",index:c-1};v.push(fl(E,k))}if(f>0){var m=i(c,f-1),h={op:"add",index:c-1,value:t[f-1]};v.push(fl(m,h))}if(c>0&&f>0){var y=i(c-1,f-1),S={op:"replace",index:c-1,original:e[c-1],value:t[f-1]};v.push(fl(y,S))}var N=v.sort(function(M,O){return M.cost-O.cost})[0];g=N}s[d]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=i(o,l).operations,u=a.reduce(function(c,f){var d=c[0],g=c[1];if(Mv(f)){var v=f.index+1+g,E=v<o+g?String(v):"-",k={op:f.op,path:n.add(E).toString(),value:f.value};return[d.concat(k),g+1]}else if(Rv(f)){var k={op:f.op,path:n.add(String(f.index+g)).toString()};return[d.concat(k),g-1]}else{var m=n.add(String(f.index+g)),h=r(f.original,f.value,m);return[d.concat.apply(d,h),g]}},[[],0])[0];return u}qe.diffArrays=kp;function Sp(e,t,n,r){r===void 0&&(r=Ao);var s=[];return va(e,t).forEach(function(i){s.push({op:"remove",path:n.add(i).toString()})}),va(t,e).forEach(function(i){s.push({op:"add",path:n.add(i).toString(),value:t[i]})}),wp([e,t]).forEach(function(i){s.push.apply(s,r(e[i],t[i],n.add(i)))}),s}qe.diffObjects=Sp;function Ao(e,t,n,r){if(r===void 0&&(r=Ao),e===t)return[];var s=(0,Is.objectType)(e),i=(0,Is.objectType)(t);return s=="array"&&i=="array"?kp(e,t,n,r):s=="object"&&i=="object"?Sp(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}qe.diffAny=Ao;var bu=es&&es.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ye,"__esModule",{value:!0});ye.apply=ye.InvalidOperationError=ye.test=ye.copy=ye.move=ye.replace=ye.remove=ye.add=ye.TestError=ye.MissingError=void 0;var sn=Gt,$u=Lu,Dv=qe,Vt=function(e){bu(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);ye.MissingError=Vt;var Ep=function(e){bu(t,e);function t(n,r){var s=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return s.actual=n,s.expected=r,s.name="TestError",s}return t}(Error);ye.TestError=Ep;function Bu(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function _p(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function xp(e,t){var n=sn.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Vt(t.path):(Bu(n.parent,n.key,(0,$u.clone)(t.value)),null)}ye.add=xp;function Cp(e,t){var n=sn.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new Vt(t.path):(_p(n.parent,n.key),null)}ye.remove=Cp;function Pp(e,t){var n=sn.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new Vt(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new Vt(t.path)}else if(n.value===void 0)return new Vt(t.path);return n.parent[n.key]=(0,$u.clone)(t.value),null}ye.replace=Pp;function Np(e,t){var n=sn.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Vt(t.from);var r=sn.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Vt(t.path):(_p(n.parent,n.key),Bu(r.parent,r.key,n.value),null)}ye.move=Np;function Tp(e,t){var n=sn.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Vt(t.from);var r=sn.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Vt(t.path):(Bu(r.parent,r.key,(0,$u.clone)(n.value)),null)}ye.copy=Tp;function Op(e,t){var n=sn.Pointer.fromJSON(t.path).evaluate(e);return(0,Dv.diffAny)(n.value,t.value,new sn.Pointer).length?new Ep(n.value,t.value):null}ye.test=Op;var Ap=function(e){bu(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);ye.InvalidOperationError=Ap;function Lv(e,t){switch(t.op){case"add":return xp(e,t);case"remove":return Cp(e,t);case"replace":return Pp(e,t);case"move":return Np(e,t);case"copy":return Tp(e,t);case"test":return Op(e,t)}return new Ap(t)}ye.apply=Lv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Gt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=ye,r=qe;function s(u,c){return c.map(function(f){return(0,n.apply)(u,f)})}e.applyPatch=s;function i(u){function c(f,d,g){var v=u(f,d,g);return Array.isArray(v)?v:(0,r.diffAny)(f,d,g,c)}return c}function o(u,c,f){var d=new t.Pointer;return(f?i(f):r.diffAny)(u,c,d)}e.createPatch=o;function l(u,c){var f=t.Pointer.fromJSON(c).evaluate(u);if(f!==void 0)return{op:"test",path:c,value:f.value}}function a(u,c){var f=new Array;return c.filter(r.isDestructive).forEach(function(d){var g=l(u,d.path);if(g&&f.push(g),"from"in d){var v=l(u,d.from);v&&f.push(v)}}),f}e.createTests=a})(Du);function bv({moves:e,phases:t,endIf:n,onEnd:r,turn:s,events:i,plugins:o}){e===void 0&&(e={}),i===void 0&&(i={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:w})=>w),s||(s={});const l={...t};""in l&&re("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(w=>u.add(w));const f=(w,_)=>{const C=pp(w,_,o);return V=>{const U=Pr(V);return C({...U,G:V.G,ctx:V.ctx,playerID:V.playerID})}},d=w=>_=>{const C=Pr(_);return w({...C,G:_.G,ctx:_.ctx})},g={onEnd:f(r,Fe.GAME_ON_END),endIf:d(n)};for(const w in l){const _=l[w];if(_.start===!0&&(c=w),_.moves!==void 0)for(const C of Object.keys(_.moves))a[w+"."+C]=_.moves[C],u.add(C);_.endIf===void 0&&(_.endIf=()=>{}),_.onBegin===void 0&&(_.onBegin=({G:C})=>C),_.onEnd===void 0&&(_.onEnd=({G:C})=>C),_.turn===void 0&&(_.turn=s),_.turn.order===void 0&&(_.turn.order=Av.DEFAULT),_.turn.onBegin===void 0&&(_.turn.onBegin=({G:C})=>C),_.turn.onEnd===void 0&&(_.turn.onEnd=({G:C})=>C),_.turn.endIf===void 0&&(_.turn.endIf=()=>!1),_.turn.onMove===void 0&&(_.turn.onMove=({G:C})=>C),_.turn.stages===void 0&&(_.turn.stages={}),no(_.turn,!0);for(const C in _.turn.stages){const U=_.turn.stages[C].moves||{};for(const A of Object.keys(U)){const Z=w+"."+C+"."+A;a[Z]=U[A],u.add(A)}}if(_.wrapped={onBegin:f(_.onBegin,Fe.PHASE_ON_BEGIN),onEnd:f(_.onEnd,Fe.PHASE_ON_END),endIf:d(_.endIf)},_.turn.wrapped={onMove:f(_.turn.onMove,Fe.TURN_ON_MOVE),onBegin:f(_.turn.onBegin,Fe.TURN_ON_BEGIN),onEnd:f(_.turn.onEnd,Fe.TURN_ON_END),endIf:d(_.turn.endIf)},typeof _.next!="function"){const{next:C}=_;_.next=()=>C||null}_.wrapped.next=d(_.next)}function v(w){return w.phase?l[w.phase]:l[""]}function E(w){return w}function k(w,_){const C=new Set,V=new Set;for(let U=0;U<_.length;U++){const{fn:A,arg:Z,...ne}=_[U];if(A===ve){V.clear();const Oe=w.ctx.phase;if(C.has(Oe)){const rt={...w.ctx,phase:null};return{...w,ctx:rt}}C.add(Oe)}const Pe=[];if(w=A(w,{...ne,arg:Z,next:Pe}),A===W)break;const de=b(w);if(de){_.push({fn:W,arg:de,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}const Ee=X(w);if(Ee){_.push({fn:ve,arg:Ee,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}if([E,M,O].includes(A)){const Oe=z(w);if(Oe){_.push({fn:we,arg:Oe,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}}_.push(...Pe)}return w}function m(w,{next:_}){return _.push({fn:h}),w}function h(w,{next:_}){let{G:C,ctx:V}=w;return C=v(V).wrapped.onBegin(w),_.push({fn:y}),{...w,G:C,ctx:V}}function y(w,{currentPlayer:_}){let{ctx:C}=w;const V=v(C);_?(C={...C,currentPlayer:_},V.turn.activePlayers&&(C=ro(C,V.turn.activePlayers))):C=Tv(w,V.turn);const U=C.turn+1;C={...C,turn:U,numMoves:0,_prevActivePlayers:[]};const A=V.turn.wrapped.onBegin({...w,ctx:C});return{...w,G:A,ctx:C,_undo:[],_redo:[]}}function S(w,{arg:_,next:C,phase:V}){const U=v({phase:V});let{ctx:A}=w;if(_&&_.next)if(_.next in l)A={...A,phase:_.next};else return re("invalid phase: "+_.next),w;else A={...A,phase:U.wrapped.next(w)||null};return w={...w,ctx:A},C.push({fn:h}),w}function N(w,{arg:_,currentPlayer:C,next:V}){let{G:U,ctx:A}=w;const Z=v(A),{endPhase:ne,ctx:Pe}=Ov(w,C,Z.turn,_);return A=Pe,w={...w,G:U,ctx:A},ne?V.push({fn:ve,turn:A.turn,phase:A.phase}):V.push({fn:y,currentPlayer:A.currentPlayer}),w}function M(w,{arg:_,playerID:C}){if((typeof _=="string"||_===so.NULL)&&(_={stage:_}),typeof _!="object")return w;no(_);let{ctx:V}=w,{activePlayers:U,_activePlayersMinMoves:A,_activePlayersMaxMoves:Z,_activePlayersNumMoves:ne}=V;return _.stage!==void 0&&(U===null&&(U={}),U[C]=_.stage,ne[C]=0,_.minMoves&&(A===null&&(A={}),A[C]=_.minMoves),_.maxMoves&&(Z===null&&(Z={}),Z[C]=_.maxMoves)),V={...V,activePlayers:U,_activePlayersMinMoves:A,_activePlayersMaxMoves:Z,_activePlayersNumMoves:ne},{...w,ctx:V}}function O(w,{arg:_}){return{...w,ctx:ro(w.ctx,_)}}function b(w){return g.endIf(w)}function X(w){return v(w.ctx).wrapped.endIf(w)}function z(w){const _=v(w.ctx),C=w.ctx.numMoves||0;return _.turn.maxMoves&&C>=_.turn.maxMoves?!0:_.turn.wrapped.endIf(w)}function W(w,{arg:_,phase:C}){w=ve(w,{}),_===void 0&&(_=!0),w={...w,ctx:{...w.ctx,gameover:_}};const V=g.onEnd(w);return{...w,G:V}}function ve(w,{arg:_,next:C,turn:V,automatic:U}){w=we(w,{turn:V,force:!0,automatic:!0});const{phase:A,turn:Z}=w.ctx;if(C&&C.push({fn:S,arg:_,phase:A}),A===null)return w;const Pe=v(w.ctx).wrapped.onEnd(w),de={...w.ctx,phase:null},Ee=cs("endPhase",_),{_stateID:Oe}=w,rt={action:Ee,_stateID:Oe,turn:Z,phase:A};U&&(rt.automatic=!0);const Mt=[...w.deltalog||[],rt];return{...w,G:Pe,ctx:de,deltalog:Mt}}function we(w,{arg:_,next:C,turn:V,force:U,automatic:A,playerID:Z}){if(V!==w.ctx.turn)return w;const{currentPlayer:ne,numMoves:Pe,phase:de,turn:Ee}=w.ctx,Oe=v(w.ctx),rt=Pe||0;if(!U&&Oe.turn.minMoves&&rt<Oe.turn.minMoves)return`${Oe.turn.minMoves}`,w;const Mt=Oe.turn.wrapped.onEnd(w);C&&C.push({fn:N,arg:_,currentPlayer:ne});let Et={...w.ctx,activePlayers:null};if(_&&_.remove){Z=Z||ne;const Rt=Et.playOrder.filter(P=>P!=Z),zs=Et.playOrderPos>Rt.length-1?0:Et.playOrderPos;if(Et={...Et,playOrder:Rt,playOrderPos:zs},Rt.length===0)return C.push({fn:ve,turn:Ee,phase:de}),w}const Xn=cs("endTurn",_),{_stateID:Mr}=w,an={action:Xn,_stateID:Mr,turn:Ee,phase:de};A&&(an.automatic=!0);const Zn=[...w.deltalog||[],an];return{...w,G:Mt,ctx:Et,deltalog:Zn,_undo:[],_redo:[]}}function Ce(w,{arg:_,next:C,automatic:V,playerID:U}){U=U||w.ctx.currentPlayer;let{ctx:A,_stateID:Z}=w,{activePlayers:ne,_activePlayersNumMoves:Pe,_activePlayersMinMoves:de,_activePlayersMaxMoves:Ee,phase:Oe,turn:rt}=A;const Mt=ne!==null&&U in ne,Et=v(A);if(!_&&Mt){const Rt=Et.turn.stages[ne[U]];Rt&&Rt.next&&(_=Rt.next)}if(C&&C.push({fn:M,arg:_,playerID:U}),!Mt)return w;const Xn=Pe[U]||0;if(de&&de[U]&&Xn<de[U])return`${de[U]}`,w;ne={...ne},delete ne[U],de&&(de={...de},delete de[U]),Ee&&(Ee={...Ee},delete Ee[U]),A=Nv({...A,activePlayers:ne,_activePlayersMinMoves:de,_activePlayersMaxMoves:Ee});const an={action:cs("endStage",_),_stateID:Z,turn:rt,phase:Oe};V&&(an.automatic=!0);const Zn=[...w.deltalog||[],an];return{...w,ctx:A,deltalog:Zn}}function Me(w,_,C){const V=v(w),U=V.turn.stages,{activePlayers:A}=w;if(A&&A[C]!==void 0&&A[C]!==so.NULL&&U[A[C]]!==void 0&&U[A[C]].moves!==void 0){const ne=U[A[C]].moves;if(_ in ne)return ne[_]}else if(V.moves){if(_ in V.moves)return V.moves[_]}else if(_ in e)return e[_];return null}function pt(w,_){const{playerID:C,type:V}=_,{currentPlayer:U,activePlayers:A,_activePlayersMaxMoves:Z}=w.ctx,ne=Me(w.ctx,V,C),Pe=!ne||typeof ne=="function"||ne.noLimit!==!0;let{numMoves:de,_activePlayersNumMoves:Ee}=w.ctx;Pe&&(C===U&&de++,A&&Ee[C]++),w={...w,ctx:{...w.ctx,numMoves:de,_activePlayersNumMoves:Ee}},Z&&Ee[C]>=Z[C]&&(w=Ce(w,{playerID:C,automatic:!0}));const rt=v(w.ctx).turn.wrapped.onMove({...w,playerID:C});return w={...w,G:rt},k(w,[{fn:E}])}function R(w,_,C){return k(w,[{fn:Ce,arg:C,playerID:_}])}function x(w,_){return k(w,[{fn:Ce,playerID:_}])}function L(w,_,C){return k(w,[{fn:O,arg:C}])}function B(w,_,C){return k(w,[{fn:ve,phase:w.ctx.phase,turn:w.ctx.turn,arg:{next:C}}])}function K(w){return k(w,[{fn:ve,phase:w.ctx.phase,turn:w.ctx.turn}])}function J(w,_,C){return k(w,[{fn:we,turn:w.ctx.turn,phase:w.ctx.phase,arg:C}])}function te(w,_,C){return k(w,[{fn:we,turn:w.ctx.turn,phase:w.ctx.phase,force:!0,arg:C}])}function oe(w,_,C){return k(w,[{fn:W,turn:w.ctx.turn,phase:w.ctx.phase,arg:C}])}const ke={endStage:x,setStage:R,endTurn:J,pass:te,endPhase:K,setPhase:B,endGame:oe,setActivePlayers:L},ae=[];i.endTurn!==!1&&ae.push("endTurn"),i.pass!==!1&&ae.push("pass"),i.endPhase!==!1&&ae.push("endPhase"),i.setPhase!==!1&&ae.push("setPhase"),i.endGame!==!1&&ae.push("endGame"),i.setActivePlayers!==!1&&ae.push("setActivePlayers"),i.endStage!==!1&&ae.push("endStage"),i.setStage!==!1&&ae.push("setStage");function be(w,_){const{type:C,playerID:V,args:U}=_.payload;return typeof ke[C]!="function"?w:ke[C](w,V,...Array.isArray(U)?U:[U])}function Kt(w,_,C){return _.activePlayers?C in _.activePlayers:_.currentPlayer===C}return{ctx:w=>({numPlayers:w,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:w})].map((_,C)=>C+""),playOrderPos:0,phase:c,activePlayers:null}),init:w=>k(w,[{fn:m}]),isPlayerActive:Kt,eventHandlers:ke,eventNames:Object.keys(ke),enabledEventNames:ae,moveMap:a,moveNames:[...u.values()],processMove:pt,processEvent:be,getMove:Me}}function $v(e){return e.processMove!==void 0}function Io(e){if($v(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=bv(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let s=t.getMove(n.ctx,r.type,r.playerID);if(Ip(s)&&(s=s.move),s instanceof Function){const i=pp(s,Fe.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...Pr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return i(l,...o)}return re(`invalid move object: ${r.type}`),n.G}}}function Ip(e){return e instanceof Object&&e.move!==void 0}var wa;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(wa||(wa={}));var ze;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(ze||(ze={}));const oi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,Bv=(e,t,n)=>{function r(i){return i.undoable!==void 0}function s(i){return i instanceof Function}return r(n)?s(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function Sf(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function dl(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},s=e.plugins.log.data.metadata;return s!==void 0&&(r.metadata=s),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function hl(e,t,n){const[r,s]=mp(e,n);return s?[r,We(t,ze.PluginActionInvalid,s)]:[r]}function jp(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function We(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const Mp=e=>t=>n=>{const r=t(n);switch(n.type){case Oo:return r;default:{const[,s]=jp(e.getState());return typeof s<"u"?(e.dispatch(hp()),{...r,transients:s}):r}}};function zu({game:e,isClient:t}){return e=Io(e),(n=null,r)=>{let[s]=jp(n);switch(r.type){case Oo:return s;case Po:{if(s={...s,deltalog:[]},t)return s;if(s.ctx.gameover!==void 0)return re("cannot call event after game end"),We(s,ze.GameOver);if(oi(r)&&!e.flow.isPlayerActive(s.G,s.ctx,r.payload.playerID))return re(`disallowed event: ${r.payload.type}`),We(s,ze.InactivePlayer);s=ya(s,{game:e,playerID:r.payload.playerID});let i=e.flow.processEvent(s,r),o;return[i,o]=hl(i,s,{game:e}),o||(i=Sf(i,{game:e,action:r}),{...i,_stateID:s._stateID+1})}case As:{const i=s={...s,deltalog:[]},o=e.flow.getMove(s.ctx,r.payload.type,r.payload.playerID||s.ctx.currentPlayer);if(o===null)return re(`disallowed move: ${r.payload.type}`),We(s,ze.UnavailableMove);if(t&&o.client===!1)return s;if(s.ctx.gameover!==void 0)return re("cannot make move after game end"),We(s,ze.GameOver);if(oi(r)&&!e.flow.isPlayerActive(s.G,s.ctx,r.payload.playerID))return re(`disallowed move: ${r.payload.type}`),We(s,ze.InactivePlayer);s=ya(s,{game:e,playerID:r.payload.playerID});const l=e.processMove(s,r.payload);if(l===Tn)return re(`invalid move: ${r.payload.type} args: ${r.payload.args}`),We(s,ze.InvalidMove);const a={...s,G:l};if(t&&Cv(a,{game:e}))return s;if(s=a,t){let c;return[s,c]=hl(s,i,{game:e}),c||{...s,_stateID:s._stateID+1}}s=dl(s,r,o),s=e.flow.processMove(s,r.payload);let u;return[s,u]=hl(s,i,{game:e}),u||(s=Sf(s,{game:e,action:r}),{...s,_stateID:s._stateID+1})}case Ou:case Iu:case Au:return r.state;case To:{if(s={...s,deltalog:[]},e.disableUndo)return re("Undo is not enabled"),We(s,ze.ActionDisabled);const{G:i,ctx:o,_undo:l,_redo:a,_stateID:u}=s;if(l.length<2)return re("No moves to undo"),We(s,ze.ActionInvalid);const c=l[l.length-1],f=l[l.length-2];if(oi(r)&&r.payload.playerID!==c.playerID)return re("Cannot undo other players' moves"),We(s,ze.ActionInvalid);if(c.moveType){const d=e.flow.getMove(f.ctx,c.moveType,c.playerID);if(!Bv(i,o,d))return re("Move cannot be undone"),We(s,ze.ActionInvalid)}return s=dl(s,r),{...s,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case No:{if(s={...s,deltalog:[]},e.disableUndo)return re("Redo is not enabled"),We(s,ze.ActionDisabled);const{_undo:i,_redo:o,_stateID:l}=s;if(o.length===0)return re("No moves to redo"),We(s,ze.ActionInvalid);const a=o[0];return oi(r)&&r.payload.playerID!==a.playerID?(re("Cannot redo other players' moves"),We(s,ze.ActionInvalid)):(s=dl(s,r),{...s,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...i,a],_redo:o.slice(1)})}case sp:return Ev(s,r,{game:e});case ju:{const i=s,o=JSON.parse(JSON.stringify(i)),l=Du.applyPatch(o,r.patch);return l.some(u=>u!==null)?(re(`Patch ${JSON.stringify(r.patch)} apply failed`),We(i,wa.PatchFailed,l)):o}default:return s}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},s=!1,i=e.document,o;function l(h){typeof h!="function"&&(h=new Function(""+h));for(var y=new Array(arguments.length-1),S=0;S<y.length;S++)y[S]=arguments[S+1];var N={callback:h,args:y};return r[n]=N,o(n),n++}function a(h){delete r[h]}function u(h){var y=h.callback,S=h.args;switch(S.length){case 0:y();break;case 1:y(S[0]);break;case 2:y(S[0],S[1]);break;case 3:y(S[0],S[1],S[2]);break;default:y.apply(t,S);break}}function c(h){if(s)setTimeout(c,0,h);else{var y=r[h];if(y){s=!0;try{u(y)}finally{a(h),s=!1}}}}function f(){o=function(h){process.nextTick(function(){c(h)})}}function d(){if(e.postMessage&&!e.importScripts){var h=!0,y=e.onmessage;return e.onmessage=function(){h=!1},e.postMessage("","*"),e.onmessage=y,h}}function g(){var h="setImmediate$"+Math.random()+"$",y=function(S){S.source===e&&typeof S.data=="string"&&S.data.indexOf(h)===0&&c(+S.data.slice(h.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(S){e.postMessage(h+S,"*")}}function v(){var h=new MessageChannel;h.port1.onmessage=function(y){var S=y.data;c(S)},o=function(y){h.port2.postMessage(y)}}function E(){var h=i.documentElement;o=function(y){var S=i.createElement("script");S.onreadystatechange=function(){c(y),S.onreadystatechange=null,h.removeChild(S),S=null},h.appendChild(S)}}function k(){o=function(h){setTimeout(c,0,h)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?f():d()?g():e.MessageChannel?v():i&&"onreadystatechange"in i.createElement("script")?E():k(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?es:self);class zv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(i=>{if("payload"in i)return i;if("move"in i)return ip(i.move,i.args,r);if("event"in i)return cs(i.event,i.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,s=rp(r,this.prngstate);n=s(),this.prngstate=s.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Fv=25;class xi extends zv{constructor({enumerate:t,seed:n,objectives:r,game:s,iterations:i,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=zu({game:s}),this.iterations=i,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof i=="number"?i:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:s}){const{G:i,ctx:o}=t;let l=[],a=[];if(s!==void 0)l=this.enumerate(i,o,s),a=this.objectives(i,o,s);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(i,o,u)),a.push(this.objectives(i,o,u));else l=this.enumerate(i,o,o.currentPlayer),a=this.objectives(i,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const s of t.children){const i=s.visits+Number.EPSILON,o=s.value/i+Math.sqrt(2*Math.log(t.visits)/i);(n==null||o>r)&&(r=o,n=s)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),s=n[r];t.actions.splice(r,1);const i=this.reducer(t.state,s),o=this.createNode({state:i,parentAction:s,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:s,ctx:i}=t;let o=i.currentPlayer;i.activePlayers&&(o=Object.keys(i.activePlayers)[0]);const l=this.enumerate(s,i,o),a=this.objectives(s,i,o),u=Object.keys(a).reduce((d,g)=>{const v=a[g];return v.checker(s,i)?d+v.weight:d},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let s=this.getOpt("iterations");typeof this.iterations=="function"&&(s=this.iterations(t.G,t.ctx));const i=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Fv&&this.iterationCounter<s;a++){const u=this.select(r),c=this.expand(u),f=this.playout(c);this.backpropagate(c,f),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:s,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<s?(l(),setImmediate(a)):o(i())};a()}else{for(;this.iterationCounter<s;)l();o(i())}})}}function js(e){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(e)}function Uv(e,t){if(js(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(js(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vv(e){var t=Uv(e,"string");return js(t)=="symbol"?t:t+""}function Hv(e,t,n){return(t=Vv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function _f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ef(Object(n),!0).forEach(function(r){Hv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ef(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function st(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var xf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Cf=function(){return Math.random().toString(36).substring(7).split("").join(".")},Pf={INIT:"@@redux/INIT"+Cf(),REPLACE:"@@redux/REPLACE"+Cf()};function Wv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Fu(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(st(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(st(1));return n(Fu)(e,t)}if(typeof e!="function")throw new Error(st(2));var s=e,i=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(st(3));return i}function f(E){if(typeof E!="function")throw new Error(st(4));if(a)throw new Error(st(5));var k=!0;return u(),l.push(E),function(){if(k){if(a)throw new Error(st(6));k=!1,u();var h=l.indexOf(E);l.splice(h,1),o=null}}}function d(E){if(!Wv(E))throw new Error(st(7));if(typeof E.type>"u")throw new Error(st(8));if(a)throw new Error(st(9));try{a=!0,i=s(i,E)}finally{a=!1}for(var k=o=l,m=0;m<k.length;m++){var h=k[m];h()}return E}function g(E){if(typeof E!="function")throw new Error(st(10));s=E,d({type:Pf.REPLACE})}function v(){var E,k=f;return E={subscribe:function(h){if(typeof h!="object"||h===null)throw new Error(st(11));function y(){h.next&&h.next(c())}y();var S=k(y);return{unsubscribe:S}}},E[xf]=function(){return this},E}return d({type:Pf.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:g},r[xf]=v,r}function Rp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function Dp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(st(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return i=Rp.apply(void 0,l)(s.dispatch),_f(_f({},s),{},{dispatch:i})}}}function Lp({game:e,numPlayers:t,setupData:n}){e=Io(e),t||(t=2);const r=e.flow.ctx(t);let s={G:{},ctx:r,plugins:{}};s=_v(s,{game:e}),s=ya(s,{game:e,playerID:void 0});const i=Pr(s);s.G=e.setup({...i,ctx:s.ctx},n);let o={...s,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=mp(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Uu=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:s,credentials:i,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=s||"default",this.credentials=i,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Kv extends Uu{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const qv=e=>new Kv(e);class Jv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Qv=new Jv;function ka(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Vu(e,t,n,r,s,i){const o={};for(const l of t)o[l]=(...a)=>{const u=yv[e](l,a,ka(r,n,i),s);n.dispatch(u)};return o}const Yv=Vu.bind(null,"makeMove"),Xv=Vu.bind(null,"gameEvent"),Zv=Vu.bind(null,"plugin");class Gv{constructor({game:t,debug:n,numPlayers:r,multiplayer:s,matchID:i,playerID:o,credentials:l,enhancer:a}){this.game=Io(t),this.playerID=o,this.matchID=i||"default",this.credentials=l,this.multiplayer=s,this.debugOpt=n,this.manager=Qv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=zu({game:this.game,isClient:s!==void 0}),this.initialState=null,s||(this.initialState=Lp({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(cp(this.initialState))},this.undo=()=>{const g=fp(ka(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=dp(ka(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const d=Dp(Mp,()=>g=>v=>{const E=g(v);return this.notifySubscribers(),E},g=>v=>E=>{const k=g.getState(),m=v(E);return!("clientOnly"in E)&&E.type!==Oo&&this.transport.sendAction(k,E),m},g=>v=>E=>{const k=v(E),m=g.getState();switch(E.type){case As:case Po:case To:case No:{const h=m.deltalog;this.log=[...this.log,...h];break}case Ou:{this.log=[];break}case ju:case Iu:{let h=-1;this.log.length>0&&(h=this.log[this.log.length-1]._stateID);let y=E.deltalog||[];y=y.filter(S=>S._stateID>h),this.log=[...this.log,...y];break}case Au:{this.initialState=E.initialState,this.log=E.log||[];break}}return k});a=a!==void 0?Rp(d,a):d,this.store=Fu(this.reducer,this.initialState,a),s||(s=qv),this.transport=s({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:i,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:Xg(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,s=lp(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(s);break}case"update":{const[,r,s]=t.args,i=this.store.getState();if(r._stateID>=i._stateID){const o=up(r,s);this.store.dispatch(o)}break}case"patch":{const[,r,s,i,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=ap(r,s,i,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:yp(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Yv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Xv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Zv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function e0(e){return new Gv(e)}const bp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},Mn=e=>bp(e,"game name"),Hr=e=>bp(e,"match ID"),Wr=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],s=Array.isArray(r)?r:[r],i=e[n];if(!s.includes(typeof i)){const o=s.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${i}.`)}}};class t0 extends Error{constructor(t,n){super(t),this.details=n}}class n0{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let s;try{s=await r.clone().json()}catch{try{s=await r.text()}catch(i){s=i.message}}throw new t0(`HTTP status ${r.status}`,s)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){Mn(t);let s="";if(n){const i=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&i.push(`isGameover=${o}`),l&&i.push(`updatedBefore=${l}`),a&&i.push(`updatedAfter=${a}`),i.length>0&&(s="?"+i.join("&"))}return this.request(`/games/${t}${s}`,r)}async getMatch(t,n,r){return Mn(t),Hr(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return Mn(t),Wr(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,s){return Mn(t),Hr(n),Wr(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:s})}async leaveMatch(t,n,r,s){Mn(t),Hr(n),Wr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:s})}async updatePlayer(t,n,r,s){Mn(t),Hr(n),Wr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:s})}async playAgain(t,n,r,s){return Mn(t),Hr(n),Wr(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:s})}}var $p={exports:{}},r0="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",s0=r0,i0=s0;function Bp(){}function zp(){}zp.resetWarningCache=Bp;var o0=function(){function e(r,s,i,o,l,a){if(a!==i0){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:zp,resetWarningCache:Bp};return n.PropTypes=n,n};$p.exports=o0();var l0=$p.exports;const $t=Ff(l0);var ln={},Hu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Hu.parse=f0;Hu.serialize=d0;var a0=decodeURIComponent,u0=encodeURIComponent,c0=/; */,li=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function f0(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},s=e.split(c0),i=r.decode||a0,o=0;o<s.length;o++){var l=s[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=h0(c,i))}}return n}function d0(e,t,n){var r=n||{},s=r.encode||u0;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!li.test(e))throw new TypeError("argument name is invalid");var i=s(t);if(i&&!li.test(i))throw new TypeError("argument val is invalid");var o=e+"="+i;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!li.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!li.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function h0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Nf=Object.getOwnPropertySymbols,p0=Object.prototype.hasOwnProperty,m0=Object.prototype.propertyIsEnumerable;function y0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function g0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(r.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var v0=g0()?Object.assign:function(e,t){for(var n,r=y0(e),s,i=1;i<arguments.length;i++){n=Object(arguments[i]);for(var o in n)p0.call(n,o)&&(r[o]=n[o]);if(Nf){s=Nf(n);for(var l=0;l<s.length;l++)m0.call(n,s[l])&&(r[s[l]]=n[s[l]])}}return r},w0={};Object.defineProperty(ln,"__esModule",{value:!0});var k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};ln.load=Hp;ln.loadAll=Wp;ln.select=Kp;ln.save=qp;ln.remove=Jp;ln.setRawCookie=Wu;ln.plugToRequest=Qp;var S0=Hu,Ir=Up(S0),E0=v0,Fp=Up(E0);function Up(e){return e&&e.__esModule?e:{default:e}}var jo=typeof document>"u"||typeof process<"u"&&w0&&!1,lt={},On=void 0;function Vp(){return On&&!On.headersSent}function Hp(e,t){var n=jo?lt:Ir.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Wp(e){var t=jo?lt:Ir.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Kp(e){var t=jo?lt:Ir.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var s={};return s[r]=t[r],(0,Fp.default)({},n,s)},{}):t:{}}function qp(e,t,n){lt[e]=t,(typeof t>"u"?"undefined":k0(t))==="object"&&(lt[e]=JSON.stringify(t)),jo||(document.cookie=Ir.default.serialize(e,lt[e],n)),Vp()&&On.cookie&&On.cookie(e,t,n)}function Jp(e,t){delete lt[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Fp.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=Ir.default.serialize(e,"",t)),Vp()&&On.clearCookie&&On.clearCookie(e,t)}function Wu(e){e?lt=Ir.default.parse(e):lt={}}function Qp(e,t){return e.cookie?lt=e.cookie:e.cookies?lt=e.cookies:e.headers&&e.headers.cookie?Wu(e.headers.cookie):lt={},On=t,function(){On=null,lt={}}}var Tf=ln.default={setRawCookie:Wu,load:Hp,loadAll:Wp,select:Kp,save:qp,remove:Jp,plugToRequest:Qp},io;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(io||(io={}));function Rn(e){return e.type()===io.SYNC}class _0{type(){return io.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const x0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const s={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let i=0;i<r;i++)s.players[i]={id:i};return s},C0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const s=e.validateSetupData&&e.validateSetupData(n,t);if(s!==void 0)return{setupDataError:s};const i=x0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=Lp({game:e,numPlayers:t,setupData:n});return{metadata:i,initialState:o}},Of=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),P0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class N0{constructor(t,n,r,s){this.game=Io(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=s}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,s){if(!t||!t.payload)return{error:"missing action or action payload"};let i;if(Rn(this.storageAPI)?{metadata:i}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:i}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:s,credentials:t.payload.credentials,metadata:i}))return{error:"unauthorized action"};const o=P0(t),l=r;let a;if(Rn(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return re(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){re(`game over - matchID=[${l}] - playerID=[${s}] - action[${o.payload.type}]`);return}const u=zu({game:this.game}),c=Dp(Mp),f=Fu(u,a,c);if(o.type==To||o.type==No){const m=a.ctx.activePlayers!==null,h=a.ctx.currentPlayer===s;if(!m&&!h||m&&(a.ctx.activePlayers[s]===void 0||Object.keys(a.ctx.activePlayers).length>1)){re(`playerID=[${s}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,s)){re(`player not active - playerID=[${s}] - action[${o.payload.type}]`);return}const d=o.type==As?this.game.flow.getMove(a.ctx,o.payload.type,s):null;if(o.type==As&&!d){re(`move not processed - canPlayerMakeMove=false - playerID=[${s}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(d&&Ip(d)&&d.ignoreStaleStateID)){re(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${s}] - action[${o.payload.type}]`);return}const g=f.getState();f.dispatch(o),a=f.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...E}=a;let k;if(i&&(i.gameover===void 0||i.gameover===null)&&(k={...i,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(k.gameover=a.ctx.gameover)),Rn(this.storageAPI))this.storageAPI.setState(l,E,v),k&&this.storageAPI.setMetadata(l,k);else{const m=[this.storageAPI.setState(l,E,v)];k&&m.push(this.storageAPI.setMetadata(l,k)),await Promise.all(m)}}async onSync(t,n,r,s=2){const i=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=Rn(this.storageAPI)?this.storageAPI.fetch(i,o):await this.storageAPI.fetch(i,o);let{state:a,initialState:u,log:c,metadata:f}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:f}))return{error:"unauthorized"};if(a===void 0){const v=C0({game:this.game,unlisted:!0,numPlayers:s,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,f=v.metadata,this.subscribeCallback({state:a,matchID:t}),Rn(this.storageAPI)?this.storageAPI.createMatch(i,{initialState:u,metadata:f}):await this.storageAPI.createMatch(i,{initialState:u,metadata:f})}const d=f?Of(f):void 0,g={state:a,log:c,filteredMetadata:d,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,s){const i=t;if(n==null)return;let o;if(Rn(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(i,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(i,{metadata:!0}),o===void 0)return re(`metadata not found for matchID=[${i}]`),{error:"metadata not found"};if(o.players[n]===void 0)return re(`Player not in the match, matchID=[${i}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=s;const l=Of(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),Rn(this.storageAPI)?this.storageAPI.setMetadata(i,o):await this.storageAPI.setMetadata(i,o)}async onChatMessage(t,n,r){const s=t;if(this.auth){const{metadata:i}=await this.storageAPI.fetch(s,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:i}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const ai=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:yp(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),T0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,s,i,o]=n.args,l=pl(o.deltalog,t),a=ai(e,t,o),u=o._stateID,c=ai(e,t,i),f=Du.createPatch(c,a);return{type:"patch",args:[r,s,u,f,l]}}case"update":{const[r,s]=n.args,i=pl(s.deltalog,t),o=ai(e,t,s);return{type:"update",args:[r,o,i]}}case"sync":{const[r,s]=n.args,i=ai(e,t,s.state),o=pl(s.log,t),l={...s,state:i,log:o};return{type:"sync",args:[r,l]}}default:return n}};function pl(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},s={...n,action:{...n.action,payload:r}},{redact:i,...o}=s;return o})}const Wt=Object.create(null);Wt.open="0";Wt.close="1";Wt.ping="2";Wt.pong="3";Wt.message="4";Wt.upgrade="5";Wt.noop="6";const Ci=Object.create(null);Object.keys(Wt).forEach(e=>{Ci[Wt[e]]=e});const Sa={type:"error",data:"parser error"},Yp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Xp=typeof ArrayBuffer=="function",Zp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ku=({type:e,data:t},n,r)=>Yp&&t instanceof Blob?n?r(t):Af(t,r):Xp&&(t instanceof ArrayBuffer||Zp(t))?n?r(t):Af(new Blob([t]),r):r(Wt[e]+(t||"")),Af=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function If(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ml;function O0(e,t){if(Yp&&e.data instanceof Blob)return e.data.arrayBuffer().then(If).then(t);if(Xp&&(e.data instanceof ArrayBuffer||Zp(e.data)))return t(If(e.data));Ku(e,!1,n=>{ml||(ml=new TextEncoder),t(ml.encode(n))})}const jf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<jf.length;e++)Gr[jf.charCodeAt(e)]=e;const A0=e=>{let t=e.length*.75,n=e.length,r,s=0,i,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)i=Gr[e.charCodeAt(r)],o=Gr[e.charCodeAt(r+1)],l=Gr[e.charCodeAt(r+2)],a=Gr[e.charCodeAt(r+3)],c[s++]=i<<2|o>>4,c[s++]=(o&15)<<4|l>>2,c[s++]=(l&3)<<6|a&63;return u},I0=typeof ArrayBuffer=="function",qu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Gp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:j0(e.substring(1),t)}:Ci[n]?e.length>1?{type:Ci[n],data:e.substring(1)}:{type:Ci[n]}:Sa},j0=(e,t)=>{if(I0){const n=A0(e);return Gp(n,t)}else return{base64:!0,data:e}},Gp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},em="",M0=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((i,o)=>{Ku(i,!1,l=>{r[o]=l,++s===n&&t(r.join(em))})})},R0=(e,t)=>{const n=e.split(em),r=[];for(let s=0;s<n.length;s++){const i=qu(n[s],t);if(r.push(i),i.type==="error")break}return r};function D0(){return new TransformStream({transform(e,t){O0(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let yl;function ui(e){return e.reduce((t,n)=>t+n.length,0)}function ci(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function L0(e,t){yl||(yl=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(ui(n)<1)break;const a=ci(n,1);i=(a[0]&128)===128,s=a[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(ui(n)<2)break;const a=ci(n,2);s=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(ui(n)<8)break;const a=ci(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(Sa);break}s=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(ui(n)<s)break;const a=ci(n,s);l.enqueue(qu(i?a:yl.decode(a),t)),r=0}if(s===0||s>e){l.enqueue(Sa);break}}}})}const tm=4;function xe(e){if(e)return b0(e)}function b0(e){for(var t in xe.prototype)e[t]=xe.prototype[t];return e}xe.prototype.on=xe.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};xe.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};xe.prototype.off=xe.prototype.removeListener=xe.prototype.removeAllListeners=xe.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};xe.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};xe.prototype.emitReserved=xe.prototype.emit;xe.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};xe.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Mo=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),gt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),$0="arraybuffer";function nm(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const B0=gt.setTimeout,z0=gt.clearTimeout;function Ro(e,t){t.useNativeTimers?(e.setTimeoutFn=B0.bind(gt),e.clearTimeoutFn=z0.bind(gt)):(e.setTimeoutFn=gt.setTimeout.bind(gt),e.clearTimeoutFn=gt.clearTimeout.bind(gt))}const F0=1.33;function U0(e){return typeof e=="string"?V0(e):Math.ceil((e.byteLength||e.size)*F0)}function V0(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function rm(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function H0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function W0(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class K0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Ju extends xe{constructor(t){super(),this.writable=!1,Ro(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new K0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=qu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=H0(t);return n.length?"?"+n:""}}class q0 extends Ju{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};R0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,M0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=rm()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let sm=!1;try{sm=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const J0=sm;function Q0(){}class Y0 extends q0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Ht extends xe{constructor(t,n,r){super(),this.createRequest=t,Ro(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=nm(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Ht.requestsCount++,Ht.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Q0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ht.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ht.requestsCount=0;Ht.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Mf);else if(typeof addEventListener=="function"){const e="onpagehide"in gt?"pagehide":"unload";addEventListener(e,Mf,!1)}}function Mf(){for(let e in Ht.requests)Ht.requests.hasOwnProperty(e)&&Ht.requests[e].abort()}const X0=function(){const e=im({xdomain:!1});return e&&e.responseType!==null}();class Z0 extends Y0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=X0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ht(im,this.uri(),t)}}function im(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||J0))return new XMLHttpRequest}catch{}if(!t)try{return new gt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const om=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class G0 extends Ju{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=om?{}:nm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;Ku(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Mo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=rm()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const gl=gt.WebSocket||gt.MozWebSocket;class ew extends G0{createSocket(t,n,r){return om?new gl(t,n,r):n?new gl(t,n):new gl(t)}doWrite(t,n){this.ws.send(n)}}class tw extends Ju{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=L0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=D0();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&Mo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const nw={websocket:ew,webtransport:tw,polling:Z0},rw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,sw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ea(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=rw.exec(e||""),i={},o=14;for(;o--;)i[sw[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=iw(i,i.path),i.queryKey=ow(i,i.query),i}function iw(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function ow(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const _a=typeof addEventListener=="function"&&typeof removeEventListener=="function",Pi=[];_a&&addEventListener("offline",()=>{Pi.forEach(e=>e())},!1);class Cn extends xe{constructor(t,n){if(super(),this.binaryType=$0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Ea(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Ea(n.host).host);Ro(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=W0(this.opts.query)),_a&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Pi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=tm,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Cn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Cn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=U0(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Mo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Cn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),_a&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Pi.indexOf(this._offlineEventListener);r!==-1&&Pi.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Cn.protocol=tm;class lw extends Cn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Cn.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Cn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function i(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=n.name,i(),this.emitReserved("upgradeError",d)};function l(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&i()}const c=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",s),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let aw=class extends lw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>nw[s]).filter(s=>!!s)),super(t,r)}};function uw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Ea(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const cw=typeof ArrayBuffer=="function",fw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,lm=Object.prototype.toString,dw=typeof Blob=="function"||typeof Blob<"u"&&lm.call(Blob)==="[object BlobConstructor]",hw=typeof File=="function"||typeof File<"u"&&lm.call(File)==="[object FileConstructor]";function Qu(e){return cw&&(e instanceof ArrayBuffer||fw(e))||dw&&e instanceof Blob||hw&&e instanceof File}function Ni(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Ni(e[n]))return!0;return!1}if(Qu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ni(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ni(e[n]))return!0;return!1}function pw(e){const t=[],n=e.data,r=e;return r.data=xa(n,t),r.attachments=t.length,{packet:r,buffers:t}}function xa(e,t){if(!e)return e;if(Qu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=xa(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=xa(e[r],t));return n}return e}function mw(e,t){return e.data=Ca(e.data,t),delete e.attachments,e}function Ca(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Ca(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Ca(e[n],t));return e}const am=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],yw=5;var Q;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Q||(Q={}));class gw{constructor(t){this.replacer=t}encode(t){return(t.type===Q.EVENT||t.type===Q.ACK)&&Ni(t)?this.encodeAsBinary({type:t.type===Q.EVENT?Q.BINARY_EVENT:Q.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Q.BINARY_EVENT||t.type===Q.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=pw(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}class Yu extends xe{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Q.BINARY_EVENT;r||n.type===Q.BINARY_ACK?(n.type=r?Q.EVENT:Q.ACK,this.reconstructor=new vw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Qu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Q[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Q.BINARY_EVENT||r.type===Q.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(i,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(Yu.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Q.CONNECT:return oo(n);case Q.DISCONNECT:return n===void 0;case Q.CONNECT_ERROR:return typeof n=="string"||oo(n);case Q.EVENT:case Q.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&am.indexOf(n[0])===-1);case Q.ACK:case Q.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=mw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ww(e){return typeof e=="string"}const kw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Sw(e){return e===void 0||kw(e)}function oo(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ew(e,t){switch(e){case Q.CONNECT:return t===void 0||oo(t);case Q.DISCONNECT:return t===void 0;case Q.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&am.indexOf(t[0])===-1);case Q.ACK:return Array.isArray(t);case Q.CONNECT_ERROR:return typeof t=="string"||oo(t);default:return!1}}function _w(e){return ww(e.nsp)&&Sw(e.id)&&Ew(e.type,e.data)}const xw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Yu,Encoder:gw,get PacketType(){return Q},isPacketValid:_w,protocol:yw},Symbol.toStringTag,{value:"Module"}));function Pt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Cw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class um extends xe{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Pt(t,"open",this.onopen.bind(this)),Pt(t,"packet",this.onpacket.bind(this)),Pt(t,"error",this.onerror.bind(this)),Pt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,i;if(Cw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Q.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),o.id=c}const l=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,a=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},s),o=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,s)=>{const i=(o,l)=>o?s(o):r(l);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>(this._queue[0],s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Q.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Q.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Q.EVENT:case Q.BINARY_EVENT:this.onevent(t);break;case Q.ACK:case Q.BINARY_ACK:this.onack(t);break;case Q.DISCONNECT:this.ondisconnect();break;case Q.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Q.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Q.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function jr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}jr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};jr.prototype.reset=function(){this.attempts=0};jr.prototype.setMin=function(e){this.ms=e};jr.prototype.setMax=function(e){this.max=e};jr.prototype.setJitter=function(e){this.jitter=e};class Pa extends xe{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ro(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new jr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||xw;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new aw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Pt(n,"open",function(){r.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Pt(n,"error",i);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(s),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Pt(t,"ping",this.onping.bind(this)),Pt(t,"data",this.ondata.bind(this)),Pt(t,"error",this.onerror.bind(this)),Pt(t,"close",this.onclose.bind(this)),Pt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Mo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new um(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Kr={};function Ti(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=uw(e,t.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=Kr[s]&&i in Kr[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new Pa(r,t):(Kr[s]||(Kr[s]=new Pa(r,t)),a=Kr[s]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Ti,{Manager:Pa,Socket:um,io:Ti,connect:Ti});class cm extends _0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const s=this.log.get(t)||[];this.log.set(t,[...s,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class Pw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class Nw extends cm{constructor(t="bgio"){super();const n=r=>new Pw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function Tw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class Ow extends N0{constructor({game:t,bots:n,storageKey:r,persist:s}){const i={},o={};if(t&&t.ai&&n)for(const f in n){const d=n[f];o[f]=new d({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:f,...d})=>{const g=i[f];g!==void 0&&g(a(f,d))},a=T0(t),u={send:l,sendAll:f=>{for(const d in i)l({playerID:d,...f})}},c=s?new Nw(r):new cm;super(t,c,u),this.connect=(f,d)=>{i[f]=d},this.subscribe(({state:f,matchID:d})=>{if(!n)return;const g=Tw(f,o);g!==null&&setTimeout(async()=>{const v=await o[g].play(f,g);await this.onUpdate(v.action,f._stateID,d,v.action.payload.playerID)},100)})}}class Aw extends Uu{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const Rf=new Map;function fm({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:s,game:i}=r;let o;const l=Rf.get(s);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new Ow({game:i,bots:e,persist:t,storageKey:n}),Rf.set(s,{master:o,bots:e,persist:t,storageKey:n})),new Aw({master:o,...r})}}const Df=Ti;class Iw extends Uu{constructor({socket:t,socketOpts:n,server:r,...s}){super(s),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=Df(t+this.gameName,this.socketOpts)}else this.socket=Df("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,s,i)=>{this.notifyClient({type:"patch",args:[t,n,r,s,i]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function Lf({server:e,socketOpts:t}={}){return n=>new Iw({server:e,socketOpts:t,...n})}function dm(e){var t;const{game:n,numPlayers:r,board:s,multiplayer:i,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>F.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends F.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=e0({game:n,debug:a,numPlayers:r,multiplayer:i,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return F.createElement(l);let f=null;return s&&(f=F.createElement(s,{...c,...this.props,isMultiplayer:!!i,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),F.createElement("div",{className:"bgio-client"},f)}},t.propTypes={matchID:$t.string,playerID:$t.string,credentials:$t.string,debug:$t.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class jw{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:s}){this.client=new n0({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=s,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let s=this._findPlayer(this.playerName);if(s)throw new Error("player has already joined "+s.matchID);if(s=this._getMatchInstance(n),!s)throw new Error("game instance "+n+" not found");const i=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});s.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=i.playerCredentials}catch(s){throw new Error("failed to join match "+n+" ("+s+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const s of r.players)if(s.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:s.id.toString(),credentials:this.playerCredentials}),delete s.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function Mw(e){return new jw(e)}class hm extends F.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return F.createElement("div",null,F.createElement("p",{className:"phase-title"},"Choose a player name:"),F.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),F.createElement("span",{className:"buttons"},F.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),F.createElement("br",null),F.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,F.createElement("br",null)))}}hm.defaultProps={playerName:""};class Rw extends F.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>F.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>F.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>F.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>F.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(s=>s.name===this.props.playerName),r=t.players.find(s=>!s.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?F.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),F.createElement("tr",{key:"line-"+t.matchID},F.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),F.createElement("td",{key:"cell-status-"+t.matchID},n),F.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),F.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Dw extends F.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>F.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>F.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,s)=>s).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return F.createElement("div",null,F.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),F.createElement("span",null,"Players:"),F.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),F.createElement("span",{className:"buttons"},F.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Xe;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(Xe||(Xe={}));class pm extends F.Component{constructor(t){super(t),this.state={phase:Xe.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=Mw({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(s=>{const i=Object.assign({},s.credentialStore);return i[n]=r,{credentialStore:i}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:Xe.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Xe.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(s){this.setState({errorMsg:s.message})}},this._joinMatch=async(n,r,s)=>{try{await this.connection.join(n,r,s),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._startMatch=(n,r)=>{const s=this.connection._getGameComponents(n);if(!s){this.setState({errorMsg:"game "+n+" not supported"});return}let i;if(r.numPlayers>1&&(i=this.props.gameServer?Lf({server:this.props.gameServer}):Lf()),r.numPlayers==1){const a=s.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=xi;i=fm({bots:u})}const l={app:this.props.clientFactory({game:s.game,board:s.board,debug:this.props.debug,multiplayer:i}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Xe.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Xe.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(s=>{const{matchID:i,gameName:o,players:l}=s;return F.createElement(Rw,{key:"instance-"+i,match:{matchID:i,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=Tf.load("lobbyState")||{};t.phase&&t.phase===Xe.PLAY&&(t.phase=Xe.LIST),t.phase&&t.phase!==Xe.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||Xe.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,s=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==s||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const i={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};Tf.save("lobbyState",i,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:s,phase:i,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:i,playerName:s,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):F.createElement("div",{id:"lobby-view",style:{padding:50}},F.createElement("div",{className:this._getPhaseVisibility(Xe.ENTER)},F.createElement(hm,{key:s,playerName:s,onEnter:this._enterLobby})),F.createElement("div",{className:this._getPhaseVisibility(Xe.LIST)},F.createElement("p",null,"Welcome, ",s),F.createElement("div",{className:"phase-title",id:"match-creation"},F.createElement("span",null,"Create a match:"),F.createElement(Dw,{games:t,createMatch:this._createMatch})),F.createElement("p",{className:"phase-title"},"Join a match:"),F.createElement("div",{id:"instances"},F.createElement("table",null,F.createElement("tbody",null,this.renderMatches(this.connection.matches,s))),F.createElement("span",{className:"error-msg"},r,F.createElement("br",null))),F.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),F.createElement("div",{className:this._getPhaseVisibility(Xe.PLAY)},o&&F.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),F.createElement("div",{className:"buttons",id:"match-exit"},F.createElement("button",{onClick:this._exitMatch},"Exit match"))),F.createElement("div",{className:"buttons",id:"lobby-exit"},F.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}pm.propTypes={gameComponents:$t.array.isRequired,lobbyServer:$t.string,gameServer:$t.string,debug:$t.bool,clientFactory:$t.func,refreshInterval:$t.number};pm.defaultProps={debug:!1,clientFactory:dm,refreshInterval:2e3};const It=["Hearts","Diamonds","Clubs","Spades"],mm=40,ym=5,Lw=["","","","","",""],gm={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function bw(e,t){const n={};if(e.deckType===36)for(const r of It)n[r]=[{suit:r,value:1}];else for(const r of It){const s=Array.from({length:ym},(i,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(s)}return n}function vm(e,t,n){var i;const r={};let s=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:s};for(const o of It){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((i=t==null?void 0:t[o])==null?void 0:i.length)>0){const c=l.pop(),f=t[o]||[];r[o]=[...f,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(s=!0)}return{jobs:r,isFamine:s}}function fi(e,t){return t.deckType!==36||e<2||e>5}function wm(e,t,n,r,s){const i=[];for(const a of It)for(let u=6;u<=13;u++)i.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])fi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])fi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])fi(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=i.filter(a=>fi(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return s.Shuffle(l)}function km(e,t,n=!1){e.length;const r=n?4:5;for(const s of e)s.hand=[];for(let s=0;s<r;s++)for(const i of e)t.length>0&&i.hand.push(t.pop())}function $w(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const s=r.hand[n];if(e.currentTrick.length===0)return!0;const i=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===i)?s.suit===i:!0}function Bw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let s=null,i=-1;for(const[o,l]of r)l.value>i&&(i=l.value,s=o);return s}function zw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Fw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function Na(e){return e.players.every(t=>t.hand.length===1)}function Uw(e,t,n){for(const[r,s]of Object.entries(t)){const[i,o]=r.split("-"),l=parseInt(o,10),a={suit:i,value:l};e.jobBuckets[s].push(a);let u=l;n.nomenclature&&i===e.trump&&l===11&&(u=0),e.workHours[s]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=mm&&!e.claimedJobs.includes(r)&&Vw(e,r,n)}function Vw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const s=r.reduce((l,a)=>a.value<l.value?a:l),i=r.filter(l=>!(l.suit===s.suit&&l.value===s.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[s],hidden:i}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],s=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const i of s)r.plot.revealed.push(i);e.revealedJobs[t]=null,n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Hw(e){if(!Fw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const s=`${r.suit}-${r.value}`;n[s]=t}return n}function Ww(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=mm||(t.miceVariant?Kw(e,n,r,t):t.deckType===36?qw(e,n,r,t):Jw(e,n,r,t))}function Xu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),lo(e,`${r.suit}-${r.value}`),!0;return!1}function Zu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function Gu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function lo(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function Ms(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Kw(e,t,n,r){if(Xu(e,n,r))return;const s=Zu(n,e.trump,r),i=Gu(n,e.trump,r),o=Sm(e,t,s,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),ao(e,o[0]),i&&o.length>1&&(ao(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${Ms(o[1][1])}`)))}function qw(e,t,n,r){if(Xu(e,n,r))return;const s=Zu(n,e.trump,r),i=Gu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return s||c},l=Sm(e,t,s,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(f=>f.suit===t);for(const f of c)l.some(([g,v])=>g===u&&v.suit===f.suit&&v.value===f.value)||l.push([u,f])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((f,d)=>d.value-f.value),ao(e,[u,c[0]]),i&&c.length>1&&(ao(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${Ms(c[1])}`)))}function Jw(e,t,n,r){if(Xu(e,n,r))return;const s=Zu(n,e.trump,r),i=Gu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||s))continue;const a=(o.plot.hidden||[]).filter(d=>d.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(d=>d.suit!==t);const u=(o.plot.revealed||[]).filter(d=>d.suit===t).sort((d,g)=>g.value-d.value);if(u.length===0)continue;const c=u[0],f=o.plot.revealed.findIndex(d=>d.suit===c.suit&&d.value===c.value);if(o.plot.revealed.splice(f,1),lo(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${Ms(c)}`),i&&u.length>1){const d=u[1],g=o.plot.revealed.findIndex(v=>v.suit===d.suit&&v.value===d.value);o.plot.revealed.splice(g,1),lo(e,`${d.suit}-${d.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${Ms(d)}`)}}}function Sm(e,t,n,r,s){const i=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(s.ordenNachalniku&&s.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const f of c.revealed||[])f.suit===t&&a.push({card:f,stack:c,location:"revealed"});for(const f of c.hidden||[])f.suit===t&&a.push({card:f,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const f=o.plot.hidden.findIndex(d=>d.suit===c.suit&&d.value===c.value);o.plot.hidden.splice(f,1),o.plot.revealed.push(c),i.push([o,c])}for(const{card:c,stack:f,location:d}of a){const g=d==="hidden"?f.hidden:f.revealed,v=g.findIndex(E=>E.suit===c.suit&&E.value===c.value);v!==-1&&(g.splice(v,1),o.plot.revealed.push(c),i.push([o,c]))}}else{const c=u.reduce((d,g)=>g.value>d.value?g:d);if(l.some(d=>d.suit===c.suit&&d.value===c.value)){const d=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(d,1),o.plot.revealed.push(c),i.push([o,c])}else{const d=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(d){const{stack:g,location:v}=d,E=v==="hidden"?g.hidden:g.revealed,k=E.findIndex(m=>m.suit===c.suit&&m.value===c.value);k!==-1&&(E.splice(k,1),o.plot.revealed.push(c),i.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return i}function ao(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const s of t.plot.stacks){if(r=(s.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value),r!==-1){s.revealed.splice(r,1);break}if(r=(s.hidden||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value),r!==-1){s.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(s=>s.revealed&&s.revealed.length>0||s.hidden&&s.hidden.length>0)}lo(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${Ms(n)}`)}function Qw(e,t){const n={};for(let r=0;r<e.players.length;r++){const s=e.players[r];let i=0;for(const o of s.plot.revealed||[])i+=o.value;if(t.medalsCount&&(i+=(s.plot.medals||0)+(s.medals||0)),s.plot.stacks)for(const o of s.plot.stacks)for(const l of o.revealed||[])i+=l.value;n[r]=i}return n}function Yw(e,t){const n=Qw(e,t);for(let r=0;r<e.players.length;r++){const s=e.players[r];for(const i of s.plot.hidden||[])n[r]+=i.value}return n}function Xw(e,t){const n=Yw(e,t);let r=1/0,s=0;for(const[i,o]of Object.entries(n))o<r&&(r=o,s=parseInt(i,10));return{winner:s,scores:n}}function Zw(e,t,n){var i;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of It)if(!((i=e.claimedJobs)!=null&&i.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>ym)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of It)e.workHours[o]=0;const{jobs:r,isFamine:s}=vm(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=s,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of It)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.trumpSelector=(e.trumpSelector+1)%e.numPlayers,e.workersDeck=wm(e.players,e.jobBuckets,e.exiled,t,n),km(e.players,e.workersDeck,e.isFamine),!1}function Em(e,t){const n=It.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function bf(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function _m(e,t,n){var f,d,g;const r=e.workHours[t]||0;if((f=e.claimedJobs)==null?void 0:f.includes(t))return-10;const i=Math.max(0,40-r),o=i<20?(20-i)*2:0,l=e.players[n],c=[...((d=l.plot)==null?void 0:d.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(v=>v.suit===t).length*15;return o+c}function Gw(e,t,n){var f,d,g,v,E;const r=e.players[t],s=r.hand[n];let i=0;const o=e.currentTrick.length===0,l=(d=(f=e.currentTrick[0])==null?void 0:f[1])==null?void 0:d.suit,a=e.currentTrick.map(([,k])=>k),u=e1(e,s,a),c=t1(e,t);if(o){const k=_m(e,s.suit,t);i+=k*.3,s.value>=8&&s.value<=11&&(i+=5),s.suit===e.trump&&e.trickCount<2&&(i-=10)}else if(c>0&&u>.5?i+=c*u*20:c<0&&u<.5&&(i+=Math.abs(c)*(1-u)*15),s.suit!==l){const m=[...((g=r.plot)==null?void 0:g.revealed)||[],...((v=r.plot)==null?void 0:v.hidden)||[]].filter(h=>h.suit===s.suit).length;(E=e.claimedJobs)!=null&&E.includes(s.suit)||(i+=m*3)}return i+=Math.random()*2,i}function e1(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let s=n[0];for(const i of n)(i.suit===e.trump&&s.suit!==e.trump||i.suit===s.suit&&i.value>s.value)&&(s=i);return t.suit===e.trump&&s.suit!==e.trump?.8:t.suit===s.suit&&t.value>s.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function t1(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,i])=>i.suit))];for(const i of r){const o=_m(e,i,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function n1(e,t,n){var f,d;let r=0;const s=e.players[n],i=s.hand||[],o=i.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=i.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((f=s.plot)==null?void 0:f.revealed)||[],...((d=s.plot)==null?void 0:d.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function r1(e,t,n){var i,o,l,a,u,c,f;const r=[],s=e.players[n];if(t.phase==="planning"&&!e.trump)for(const d of It){const g=n1(e,d,n);r.push({move:"setTrump",args:[d],score:g})}else if(t.phase==="trick")for(let d=0;d<s.hand.length;d++){const g=s.hand[d],v=(o=(i=e.currentTrick[0])==null?void 0:i[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&s.hand.some(m=>m.suit===v)&&g.suit!==v)continue;const E=Gw(e,n,d);r.push({move:"playCard",args:[d],score:E})}else if(t.phase==="assignment"&&n===e.lastWinner){const d=[...new Set(e.lastTrick.map(([,O])=>O.suit))],g=e.players[n],v=[...((l=g.plot)==null?void 0:l.revealed)||[],...((a=g.plot)==null?void 0:a.hidden)||[]],E=e.lastTrick.reduce((O,[,b])=>{var X;return O+bf(b,e.trump,(X=e.variants)==null?void 0:X.nomenclature)},0);let k=d[0],m=-1/0;for(const O of d){const b=e.workHours[O]||0;if((u=e.claimedJobs)==null?void 0:u.includes(O)){m<0&&(m=0,k=O);continue}const z=b+E;let W=0;z>=40?(W+=200,W-=(z-40)*2):(W+=z,z>=30?W+=30:z>=20&&(W+=15));const ve=v.filter(we=>we.suit===O).length;W+=ve*20,W>m&&(m=W,k=O)}let h=0;const y={};for(const[,O]of e.lastTrick){const b=bf(O,e.trump,(c=e.variants)==null?void 0:c.nomenclature);let X=O.suit,z=-1/0;for(const W of d){const ve=e.workHours[W]||0,we=(f=e.claimedJobs)==null?void 0:f.includes(W);let Ce=0;if(we)Ce=0;else{const Me=ve+b;Me>=40?Ce+=150:(Ce+=Me*.5,Me>=30&&(Ce+=15));const pt=v.filter(R=>R.suit===W).length;Ce+=pt*10}Ce>z&&(z=Ce,X=W)}y[`${O.suit}-${O.value}`]=X,h+=z}const S=e.pendingAssignments||{};let N;if(m>=h){N={};for(const[,O]of e.lastTrick)N[`${O.suit}-${O.value}`]=k}else N=y;let M=!1;for(const[O,b]of Object.entries(N))S[O]!==b&&(M=!0,r.push({move:"assignCard",args:[O,b],score:100}));M||r.push({move:"submitAssignments",args:[],score:100})}else t.phase;return r.sort((d,g)=>g.score-d.score),r}function $f(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function s1({ctx:e,random:t},n){const r={...gm,...(n==null?void 0:n.variants)||{}},s=e.numPlayers,i=[...Lw],o=[];for(let c=0;c<s;c++)if(c===0)o.push($f(0,!0,""));else{const f=Math.floor(t.Number()*i.length),d=i.splice(f,1)[0];o.push($f(c,!1,d))}const l={numPlayers:s,players:o,lead:Math.floor(t.Number()*s),year:1,trump:null,jobPiles:bw(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1,pendingAIAssignments:null,trumpSelector:Math.floor(t.Number()*s)};for(const c of It)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=vm(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=wm(l.players,l.jobBuckets,l.exiled,r,t),km(l.players,l.workersDeck,l.isFamine),l}function i1({G:e,random:t},n){n&&It.includes(n)?e.trump=n:Em(e,t)}function o1({G:e,ctx:t,playerID:n},r){const s=parseInt(n,10);if(!$w(e,s,r))return Tn;const o=e.players[s].hand.splice(r,1)[0];e.currentTrick.push([s,o])}function l1({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function a1({G:e,events:t}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return Tn;const n=new Set(e.lastTrick.map(([,r])=>r.suit));for(const[,r]of Object.entries(e.pendingAssignments))if(!n.has(r))return Tn;if(e.lastWinner!==0){e.pendingAIAssignments={trick:JSON.parse(JSON.stringify(e.lastTrick)),assignments:{...e.pendingAssignments},winner:e.lastWinner,trump:e.trump},e.pendingAssignments={},t.setPhase("aiAssignment");return}Uw(e,e.pendingAssignments,e.variants),e.pendingAssignments={},Na(e)?t.setPhase("plotSelection"):t.setPhase("trick")}function u1({G:e,playerID:t},n,r,s="hidden"){const i=parseInt(t,10),o=e.players[i];if(n<0||r<0)return;if(r>=o.hand.length)return Tn;const l=s==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return Tn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function c1({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}function f1({G:e},t,n){if(!e.pendingAIAssignments)return;const[r,s]=t.split("-"),i=parseInt(s,10),o={suit:r,value:i};e.jobBuckets[n].push(o);let l=i;if(e.variants.nomenclature&&r===e.trump&&i===11&&(l=0),e.workHours[n]+=l,e.workHours[n]>=40&&!e.claimedJobs.includes(n)){if(e.claimedJobs.push(n),e.variants.deckType===36&&e.variants.ordenNachalniku){const u=[...e.jobBuckets[n]];if(u.length>0){const c=u.reduce((g,v)=>v.value<g.value?v:g),f=u.filter(g=>!(g.suit===c.suit&&g.value===c.value)).sort((g,v)=>g.value-v.value),d=e.players[e.pendingAIAssignments.winner];d.plot.stacks||(d.plot.stacks=[]),d.plot.stacks.push({revealed:[c],hidden:f}),e.jobBuckets[n]=[]}}else if(e.variants.deckType!==36){const u=e.players[e.pendingAIAssignments.winner],c=Array.isArray(e.revealedJobs[n])?e.revealedJobs[n]:[e.revealedJobs[n]];for(const f of c)f&&u.plot.revealed.push(f);e.revealedJobs[n]=null,e.variants.accumulateJobs&&(e.accumulatedJobCards[n]=[])}}delete e.pendingAIAssignments.assignments[t],Object.keys(e.pendingAIAssignments.assignments).length===0&&(e.pendingAIAssignments=null)}const d1={name:"kolkhoz",setup:s1,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:i1},turn:{order:{first:({G:e})=>e.trumpSelector,next:()=>{}}},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"trumpSelector:",e.trumpSelector,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&Em(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:o1},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e})=>{const t=Bw(e);if(t!==null){zw(e,t);const n=Hw(e.lastTrick);n&&t!==0?(e.pendingAIAssignments={trick:JSON.parse(JSON.stringify(e.lastTrick)),assignments:{...n},winner:t,trump:e.trump},e.needsManualAssignment=!1):e.needsManualAssignment=!0}},next:({G:e})=>e.needsManualAssignment?"assignment":e.pendingAIAssignments?"aiAssignment":Na(e)?"plotSelection":"trick"},assignment:{moves:{assignCard:l1,submitAssignments:a1},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={}},next:"trick"},aiAssignment:{moves:{applySingleAssignment:f1},turn:{order:{first:()=>0,next:()=>{}}},endIf:({G:e})=>!e.pendingAIAssignments,next:({G:e})=>Na(e)?"plotSelection":"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),Ww(e,e.variants),Zw(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:u1,confirmSwap:c1},turn:{order:{first:()=>0,next:()=>{}}},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return Xw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),s=JSON.parse(JSON.stringify(e));return s.players=e.players.map((i,o)=>{const l=o===r;return{...i,hand:l?i.hand:i.hand.map(()=>({hidden:!0})),plot:{...i.plot,hidden:l?i.plot.hidden:i.plot.hidden.map(()=>({hidden:!0}))}}}),s.workersDeck=e.workersDeck.map(()=>({hidden:!0})),s},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),s=r1(e,t,r);return s.slice(0,Math.min(3,s.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function Ue(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}const vl=["Hearts","Diamonds","Clubs","Spades"],qr={Hearts:"",Diamonds:"",Clubs:"",Spades:""},Bf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function h1({trick:e,numPlayers:t,year:n,trump:r,phase:s,isMyTurn:i,currentPlayerName:o,players:l,currentPlayer:a,brigadeLeader:u,displayMode:c="game",workHours:f,claimedJobs:d,jobBuckets:g,revealedJobs:v,exiled:E,playerPlot:k,onSetTrump:m,highlightedSuits:h=[],lastTrick:y=[],pendingAssignments:S={},assignDragState:N,onAssignDragStart:M,jobDropRefs:O={current:{}},onSubmitAssignments:b}){const[X,z]=G.useState({}),W=G.useRef({});G.useEffect(()=>{const R=W.current,x=S||{};Object.entries(x).forEach(([L,B])=>{if(R[L]!==B&&B){const K=y.find(([,J])=>`${J.suit}-${J.value}`===L);if(K){const J=K[1].value;z(te=>({...te,[B]:{value:J,type:"add",key:Date.now()}})),setTimeout(()=>{z(te=>{const oe={...te};return delete oe[B],oe})},1200)}}}),Object.entries(R).forEach(([L,B])=>{const K=x[L];if(B&&B!==K){const J=y.find(([,te])=>`${te.suit}-${te.value}`===L);if(J){const te=J[1].value;z(oe=>({...oe,[B]:{value:te,type:"remove",key:Date.now()}})),setTimeout(()=>{z(oe=>{const ke={...oe};return delete ke[B],ke})},1200)}}}),W.current={...x}},[S,y]);const ve=[3,0,1,2],we=["left","center-left","center-right","right"],Ce=R=>we[ve[R]],Me=R=>e.some(([x])=>x===R),pt=R=>{const x=e.find(([L])=>L===R);return x?x[1]:null};return p.jsxs("div",{className:"trick-area-html",children:[p.jsxs("div",{className:"info-bar",children:[p.jsxs("div",{className:"info-year",children:[p.jsx("span",{className:"label",children:""}),p.jsxs("span",{className:"value",children:[n,"/5"]})]}),p.jsxs("div",{className:"info-trump",children:[p.jsx("span",{className:"label",children:":"}),r?p.jsx("span",{className:`suit-symbol ${r.toLowerCase()}`,children:qr[r]}):p.jsx("span",{className:"famine",children:" "})]}),e.length>0&&p.jsxs("div",{className:"info-lead",children:[p.jsx("span",{className:"label",children:":"}),p.jsx("span",{className:`suit-symbol ${e[0][1].suit.toLowerCase()}`,children:qr[e[0][1].suit]})]}),p.jsx("div",{className:"info-jobs",children:vl.map(R=>{const x=(f==null?void 0:f[R])||0,L=d==null?void 0:d.includes(R),B=h.includes(R);return p.jsxs("div",{className:`job-indicator ${B?"highlighted":""} ${L?"claimed":""}`,children:[p.jsx("span",{className:`suit-symbol ${R.toLowerCase()}`,children:qr[R]}),p.jsx("span",{className:"progress",children:L?"":`${x}/40`})]},R)})})]}),p.jsxs("div",{className:"play-area",children:[c==="game"&&p.jsx("div",{className:"player-columns",children:[1,2,3,0].map(R=>{var w,_,C,V;const x=l==null?void 0:l[R],L=((w=x==null?void 0:x.hand)==null?void 0:w.length)||0,B=((_=x==null?void 0:x.plot)==null?void 0:_.revealed)||[],K=((V=(C=x==null?void 0:x.plot)==null?void 0:C.hidden)==null?void 0:V.length)||0,J=B.reduce((U,A)=>U+A.value,0)+K,te=a===R,oe=u===R,ke=pt(R),ae=Me(R),be=a===R&&!ae,Kt=i&&R===0&&!ae;return p.jsxs("div",{className:`player-column ${Ce(R)}`,children:[p.jsxs("div",{className:`player-panel ${te?"active":""} ${R===0?"human":""}`,children:[R!==0&&p.jsx("img",{src:Bf[(R-1)%Bf.length],alt:x==null?void 0:x.name,className:"portrait"}),p.jsxs("div",{className:"player-info",children:[p.jsxs("span",{className:"player-name",children:[R===0?"":(x==null?void 0:x.name)||`Player ${R}`,oe&&p.jsx("span",{className:"leader-star",children:""})]}),p.jsx("span",{className:"player-score",children:J>0?`${J} pts`:R===0?"":`${L} cards`})]}),R!==0&&p.jsxs("div",{className:"player-hand-cards",children:[Array.from({length:Math.min(4,L)}).map((U,A)=>p.jsx("img",{src:"assets/cards/back.svg",alt:"card",className:"mini-card"},A)),L>4&&p.jsxs("span",{className:"extra-cards",children:["+",L-4]})]})]}),p.jsx("div",{className:`card-slot ${Ce(R)} ${be?"current-turn":""} ${Kt?"human-turn":""}`,"data-player":R,children:ke?p.jsx("img",{src:Ue(ke),alt:`${ke.value} of ${ke.suit}`,className:"played-card"}):p.jsxs("div",{className:"empty-slot",children:[Kt&&p.jsx("span",{className:"turn-text",children:" "}),be&&R!==0&&p.jsx("span",{className:"turn-text bot",children:o})]})})]},R)})}),c==="jobs"&&p.jsx("div",{className:"assignment-view",children:p.jsx("div",{className:"assignment-grid",children:(()=>{const R=new Set(y.map(([,x])=>x.suit));return vl.map(x=>{const L=(f==null?void 0:f[x])||0,B=d==null?void 0:d.includes(x),K=x===r,J=(g==null?void 0:g[x])||[],te=s==="assignment",oe=te&&R.has(x)&&!B,ke=N&&oe,ae=(N==null?void 0:N.dropTarget)===x,be=te?y.filter(([,A])=>{const Z=`${A.suit}-${A.value}`;return S[Z]===x}):[],Kt=be.reduce((A,[,Z])=>A+Z.value,0),w=L+Kt,_=X[x],C=v==null?void 0:v[x],V=Array.isArray(C)?C:C?[C]:[],U=["assign-job-tile",K?"trump":"",B?"claimed":"",te&&oe?"valid-target":"",te&&!oe&&R.size>0?"invalid-target":"",ke?"drop-target":"",ae?"drop-hover":""].filter(Boolean).join(" ");return p.jsxs("div",{ref:A=>{oe&&(O.current[x]=A)},className:U,children:[p.jsxs("div",{className:"tile-header-row",children:[p.jsxs("div",{className:"tile-header-left",children:[p.jsxs("div",{className:"tile-header-top",children:[p.jsx("span",{className:`suit-symbol ${x.toLowerCase()}`,children:qr[x]}),K&&p.jsx("span",{className:"trump-badge",children:""}),p.jsx("div",{className:"progress-track",children:p.jsx("div",{className:"progress-fill",style:{width:`${Math.min(100,w/40*100)}%`}})})]}),p.jsxs("div",{className:"progress-text-wrapper",children:[p.jsx("span",{className:"progress-text",children:B?"":`${w}/40`}),_&&p.jsxs("span",{className:`point-popup ${_.type}`,children:[_.type==="add"?"+":"-",_.value]},_.key)]})]}),p.jsx("div",{className:"tile-header-right",children:p.jsx("div",{className:"tile-reward",children:V.length>0&&!B&&w<40?p.jsx("img",{src:Ue(V[0]),alt:"reward",className:"reward-card"}):p.jsx("img",{src:"assets/cards/back.svg",alt:"reward",className:`reward-card ${B||w>=40?"claimed":"dimmed"}`})})})]}),p.jsxs("div",{className:`tile-card-stack ${J.length>0||be.length>0?"has-cards":""}`,children:[J.map((A,Z)=>p.jsx("img",{src:Ue(A),alt:`${A.value} of ${A.suit}`,className:"stacked-card bucket"},`bucket-${Z}`)),be.map(([,A])=>{const Z=`${A.suit}-${A.value}`,ne=(N==null?void 0:N.cardKey)===Z;return p.jsx("div",{className:`assigned-card-wrapper ${ne?"dragging":""}`,onMouseDown:Pe=>M(Z,A,Pe),onTouchStart:Pe=>M(Z,A,Pe),children:p.jsx("img",{src:Ue(A),alt:`${A.value} of ${A.suit}`,className:"stacked-card assigned",draggable:!1})},Z)}),te&&oe&&p.jsx("span",{className:"drop-hint",children:"Drop here"})]})]},x)})})()})}),c==="gulag"&&p.jsxs("div",{className:"gulag-view",children:[p.jsx("h2",{className:"view-title",children:""}),[1,2,3,4,5].map(R=>{const x=(E==null?void 0:E[R])||[],L=R===n,B=K=>{const[J,te]=K.split("-");return{suit:J,value:parseInt(te,10)}};return p.jsxs("div",{className:`year-row ${L?"current":""}`,children:[p.jsxs("div",{className:"year-info",children:[p.jsx("span",{className:"year-number",children:R}),x.length>0&&p.jsx("span",{className:"card-count",children:x.length})]}),p.jsxs("div",{className:"year-cards",children:[x.slice(0,12).map((K,J)=>{const te=B(K);return p.jsx("img",{src:Ue(te),alt:`${te.value} of ${te.suit}`,className:"exiled-card"},J)}),x.length>12&&p.jsxs("span",{className:"more-cards",children:["+",x.length-12]}),x.length===0&&p.jsx("div",{className:"empty-year"})]})]},R)})]}),c==="plot"&&p.jsxs("div",{className:"plot-view",children:[p.jsx("h2",{className:"view-title",children:""}),p.jsxs("div",{className:"plot-row revealed",children:[p.jsxs("div",{className:"row-label",children:[p.jsx("span",{className:"title",children:""}),p.jsx("span",{className:"subtitle",children:"(Revealed)"})]}),p.jsxs("div",{className:"plot-cards",children:[((k==null?void 0:k.revealed)||[]).map((R,x)=>p.jsx("img",{src:Ue(R),alt:`${R.value} of ${R.suit}`,className:"plot-card"},x)),(!(k!=null&&k.revealed)||k.revealed.length===0)&&p.jsx("div",{className:"empty-plot"})]})]}),p.jsxs("div",{className:"plot-row hidden",children:[p.jsxs("div",{className:"row-label",children:[p.jsx("span",{className:"title",children:""}),p.jsx("span",{className:"subtitle",children:"(Hidden)"})]}),p.jsxs("div",{className:"plot-cards",children:[((k==null?void 0:k.hidden)||[]).map((R,x)=>p.jsx("img",{src:Ue(R),alt:`${R.value} of ${R.suit}`,className:"plot-card"},x)),(!(k!=null&&k.hidden)||k.hidden.length===0)&&p.jsx("div",{className:"empty-plot"})]})]}),p.jsxs("div",{className:"plot-total",children:["Total: ",((k==null?void 0:k.revealed)||[]).reduce((R,x)=>R+x.value,0)+((k==null?void 0:k.hidden)||[]).reduce((R,x)=>R+x.value,0)," points"]})]}),s==="planning"&&!r&&m&&p.jsxs("div",{className:"trump-selection",children:[p.jsx("h2",{className:"selection-title",children:"  "}),p.jsx("div",{className:"trump-buttons",children:vl.map(R=>p.jsxs("button",{className:`trump-btn ${R.toLowerCase()}`,onClick:()=>m(R),children:[p.jsx("span",{className:"suit-symbol",children:qr[R]}),p.jsx("span",{className:"suit-name",children:{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[R]})]},R))})]})]})]})}function p1({G:e,ctx:t,moves:n,playerID:r}){var ae,be,Kt,w,_,C,V,U,A,Z,ne,Pe,de,Ee,Oe,rt,Mt,Et,Xn,Mr,an,Zn,Rt,zs;const s=parseInt(r,10),i=t.currentPlayer===r,o=t.phase,[l,a]=G.useState(null),u=P=>a(l===P?null:P),[c,f]=G.useState(!1),d=G.useRef(e.year),g=G.useRef(null),[v,E]=G.useState(null),[k,m]=G.useState(null),h=G.useRef({}),y=G.useRef({}),[S,N]=G.useState(null);G.useRef({});const M=G.useRef({}),[O,b]=G.useState(null),X=G.useRef(0);G.useEffect(()=>{if(o!=="trick"){X.current=0;return}const P=e.currentTrick.length,j=X.current;if(P>j&&P>0){const[I,D]=e.currentTrick[P-1];I!==0&&b({playerIdx:I,card:D,key:`${D.suit}-${D.value}`})}X.current=P},[e.currentTrick,o]),G.useEffect(()=>{e.year!==d.current&&(f(!1),d.current=e.year)},[e.year]);const z=e.pendingAIAssignments;let W=null;if(o==="aiAssignment"&&z){const P=Object.entries(z.assignments);if(P.length>0){const[j,I]=P[0],[D,H]=j.split("-"),q={suit:D,value:parseInt(H,10)},ie=z.trick.find(([,Dt])=>Dt.suit===q.suit&&Dt.value===q.value),Ae=ie?ie[0]:0;W={cardKey:j,targetSuit:I,card:q,playerIdx:Ae}}}const ve=o==="trick"&&e.currentTrick.length>0?[...new Set(e.currentTrick.map(([,P])=>P.suit))]:z?[...new Set(Object.values(z.assignments))]:[];let we;if(o==="assignment")we=e.lastTrick;else if(o==="aiAssignment"&&z){const P=new Set(Object.keys(z.assignments));we=z.trick.filter(([,j])=>{const I=`${j.suit}-${j.value}`;return W&&I===W.cardKey?!1:P.has(I)})}else we=O?e.currentTrick.filter(([,P])=>`${P.suit}-${P.value}`!==O.key):e.currentTrick;const Ce=P=>{o==="trick"&&i&&n.playCard(P)},Me=P=>P.touches&&P.touches.length>0?{x:P.touches[0].clientX,y:P.touches[0].clientY}:{x:P.clientX,y:P.clientY},pt=(P,j)=>{const I=document.querySelector(".player-column.right .card-slot");if(!I)return!1;const D=I.getBoundingClientRect();return P>=D.left&&P<=D.right&&j>=D.top&&j<=D.bottom},R=(P,j,I)=>{if(o!=="trick"||!i)return;const D=zf(e,s,o);if(!(D!=null&&D.includes(P)))return;I.preventDefault();const H=Me(I),ie=I.currentTarget.getBoundingClientRect();E({index:P,card:j,position:H,offset:{x:H.x-(ie.left+ie.width/2),y:H.y-(ie.top+ie.height/2)},isOverTarget:!1})};G.useEffect(()=>{if(!v)return;const P=I=>{const D=Me(I),H=pt(D.x,D.y);E(q=>({...q,position:D,isOverTarget:H}))},j=I=>{const D=I.changedTouches?{x:I.changedTouches[0].clientX,y:I.changedTouches[0].clientY}:{x:I.clientX,y:I.clientY};pt(D.x,D.y)&&Ce(v.index),E(null)};return document.addEventListener("mousemove",P),document.addEventListener("mouseup",j),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",j),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",j),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",j)}},[v]);const x=(P,j,I)=>{for(const[D,H]of Object.entries(h.current)){if(!H)continue;const q=H.getBoundingClientRect();if(P>=q.left&&P<=q.right&&j>=q.top&&j<=q.bottom){const[ie,Ae]=D.split("-"),Dt=parseInt(Ae,10);if(I==="hand")return{type:`plot-${ie}`,index:Dt}}}for(const[D,H]of Object.entries(y.current)){if(!H)continue;const q=H.getBoundingClientRect();if(P>=q.left&&P<=q.right&&j>=q.top&&j<=q.bottom){const ie=parseInt(D,10);if(I.startsWith("plot-"))return{type:"hand",index:ie}}}return null},L=(P,j,I,D)=>{if(o!=="swap")return;D.preventDefault();const H=Me(D),ie=D.currentTarget.getBoundingClientRect();m({sourceType:P,sourceIndex:j,card:I,position:H,offset:{x:H.x-(ie.left+ie.width/2),y:H.y-(ie.top+ie.height/2)},dropTarget:null})};G.useEffect(()=>{if(!k)return;const P=I=>{I.preventDefault();const D=Me(I),H=x(D.x,D.y,k.sourceType);m(q=>({...q,position:D,dropTarget:H}))},j=I=>{const D=I.changedTouches?{x:I.changedTouches[0].clientX,y:I.changedTouches[0].clientY}:{x:I.clientX,y:I.clientY},H=x(D.x,D.y,k.sourceType);if(H){let q,ie,Ae;k.sourceType==="hand"?(ie=k.sourceIndex,q=H.index,Ae=H.type==="plot-revealed"?"revealed":"hidden"):(q=k.sourceIndex,ie=H.index,Ae=k.sourceType==="plot-revealed"?"revealed":"hidden"),n.swapCard(q,ie,Ae)}m(null)};return document.addEventListener("mousemove",P),document.addEventListener("mouseup",j),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",j),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",j),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",j)}},[k,n]);const B=(P,j)=>{for(const[I,D]of Object.entries(M.current)){if(!D)continue;const H=D.getBoundingClientRect();if(P>=H.left&&P<=H.right&&j>=H.top&&j<=H.bottom)return I}return null},K=(P,j,I)=>{if(o!=="assignment")return;I.preventDefault();const D=Me(I),q=I.currentTarget.getBoundingClientRect();N({cardKey:P,card:j,position:D,offset:{x:D.x-(q.left+q.width/2),y:D.y-(q.top+q.height/2)},dropTarget:null})};G.useEffect(()=>{if(!S)return;const P=I=>{I.preventDefault();const D=Me(I),H=B(D.x,D.y);N(q=>({...q,position:D,dropTarget:H}))},j=I=>{const D=I.changedTouches?{x:I.changedTouches[0].clientX,y:I.changedTouches[0].clientY}:{x:I.clientX,y:I.clientY},H=B(D.x,D.y);H&&n.assignCard(S.cardKey,H),N(null)};return document.addEventListener("mousemove",P),document.addEventListener("mouseup",j),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",j),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",j),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",j)}},[S,n]);const J=P=>{o==="planning"&&n.setTrump(P)},te=()=>{n.submitAssignments()},oe=()=>{f(!0),n.confirmSwap()};if(t.gameover){const{winner:P,scores:j}=t.gameover;return p.jsxs("div",{className:"game-over",children:[p.jsx("h1",{children:"Game Over!"}),p.jsxs("h2",{children:["Winner: ",e.players[P].name]}),p.jsx("div",{className:"final-scores",children:e.players.map((I,D)=>p.jsxs("div",{className:D===P?"winner":"",children:[I.name,": ",j[D]," points"]},D))}),p.jsx("p",{children:"(Lowest score wins)"})]})}const ke=o==="assignment"&&e.lastWinner===s?"jobs":o==="swap"?"plot":l==="jobs"?"jobs":l==="gulag"?"gulag":l==="plot"?"plot":"game";return p.jsxs("div",{className:"game-board",children:[p.jsxs("div",{className:"mobile-nav-bar",children:[p.jsxs("button",{className:`nav-btn ${l==="options"?"active":""}`,onClick:()=>u("options"),title:"Menu",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",children:"Menu"})]}),p.jsxs("button",{className:`nav-btn ${l===null?"active":""}`,onClick:()=>a(null),title:"Brigade (Playing Area)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Brigade",children:""})]}),p.jsxs("button",{className:`nav-btn ${l==="jobs"||ke==="jobs"?"active":""}`,onClick:()=>u("jobs"),title:"Jobs",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Jobs",children:""})]}),p.jsxs("button",{className:`nav-btn ${l==="gulag"?"active":""}`,onClick:()=>u("gulag"),title:"The North (Gulag)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"The North",children:""})]}),p.jsxs("button",{className:`nav-btn ${l==="plot"?"active":""}`,onClick:()=>u("plot"),title:"Your Plot (Cellar)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Plot",children:""})]})]}),l==="options"&&p.jsx("div",{className:"mobile-panel-content",children:p.jsxs("div",{className:"options-panel",children:[p.jsx("h3",{title:"Menu",children:""}),p.jsxs("div",{className:"menu-options",children:[p.jsxs("div",{className:"rules-section",children:[p.jsx("h4",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h5",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h5",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h5",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]})]})]}),p.jsx("button",{className:"menu-btn-action",onClick:()=>window.location.reload(),children:" New Game"})]})]})}),p.jsxs("div",{className:"game-content",children:[p.jsx(h1,{ref:g,trick:we,numPlayers:e.numPlayers,year:e.year,trump:e.trump,phase:o,isMyTurn:i,currentPlayerName:(ae=e.players[t.currentPlayer])==null?void 0:ae.name,players:e.players,currentPlayer:parseInt(t.currentPlayer,10),brigadeLeader:e.players.findIndex(P=>P.brigadeLeader),displayMode:ke,workHours:e.workHours,claimedJobs:e.claimedJobs,jobBuckets:e.jobBuckets,revealedJobs:e.revealedJobs,exiled:e.exiled,playerPlot:(be=e.players[s])==null?void 0:be.plot,onSetTrump:J,highlightedSuits:ve,lastTrick:e.lastTrick,pendingAssignments:e.pendingAssignments,assignDragState:S,onAssignDragStart:K,jobDropRefs:M,onSubmitAssignments:te}),W&&p.jsx(m1,{card:W.card,playerIdx:W.playerIdx,targetSuit:W.targetSuit,cardValue:W.card.value,onComplete:()=>{const P=W.cardKey,j=W.targetSuit;n.applySingleAssignment(P,j)}},W.cardKey),O&&p.jsx(y1,{card:O.card,playerIdx:O.playerIdx,onComplete:()=>b(null)},O.key),p.jsxs("div",{className:`player-hand-area ${o==="assignment"?"assignment-mode":""}`,children:[(((_=(w=(Kt=e.players[s])==null?void 0:Kt.plot)==null?void 0:w.revealed)==null?void 0:_.length)>0||((U=(V=(C=e.players[s])==null?void 0:C.plot)==null?void 0:V.hidden)==null?void 0:U.length)>0)&&p.jsxs("div",{className:"plot-cards-section",children:[(ne=(Z=(A=e.players[s])==null?void 0:A.plot)==null?void 0:Z.revealed)==null?void 0:ne.map((P,j)=>{var q,ie;const I=(k==null?void 0:k.sourceType)==="plot-revealed"&&(k==null?void 0:k.sourceIndex)===j,D=o==="swap"&&(k==null?void 0:k.sourceType)==="hand",H=((q=k==null?void 0:k.dropTarget)==null?void 0:q.type)==="plot-revealed"&&((ie=k==null?void 0:k.dropTarget)==null?void 0:ie.index)===j;return p.jsx("div",{ref:Ae=>{h.current[`revealed-${j}`]=Ae},className:`plot-card revealed ${o==="swap"?"swappable":""} ${I?"swap-dragging":""} ${D?"swap-target":""} ${H?"swap-hover":""}`,style:{"--index":j},onMouseDown:Ae=>L("plot-revealed",j,P,Ae),onTouchStart:Ae=>L("plot-revealed",j,P,Ae),children:p.jsx("img",{src:Ue(P),alt:`${P.value} of ${P.suit}`,draggable:!1})},`revealed-${P.suit}-${P.value}`)}),(Ee=(de=(Pe=e.players[s])==null?void 0:Pe.plot)==null?void 0:de.hidden)==null?void 0:Ee.map((P,j)=>{var ie,Ae,Dt,Rr,Dr;const I=(k==null?void 0:k.sourceType)==="plot-hidden"&&(k==null?void 0:k.sourceIndex)===j,D=o==="swap"&&(k==null?void 0:k.sourceType)==="hand",H=((ie=k==null?void 0:k.dropTarget)==null?void 0:ie.type)==="plot-hidden"&&((Ae=k==null?void 0:k.dropTarget)==null?void 0:Ae.index)===j,q=(((Dr=(Rr=(Dt=e.players[s])==null?void 0:Dt.plot)==null?void 0:Rr.revealed)==null?void 0:Dr.length)||0)+j;return p.jsx("div",{ref:un=>{h.current[`hidden-${j}`]=un},className:`plot-card hidden ${o==="swap"?"swappable":""} ${I?"swap-dragging":""} ${D?"swap-target":""} ${H?"swap-hover":""}`,style:{"--index":q},onMouseDown:un=>L("plot-hidden",j,P,un),onTouchStart:un=>L("plot-hidden",j,P,un),children:p.jsx("img",{src:Ue(P),alt:`${P.value} of ${P.suit}`,draggable:!1})},`hidden-${P.suit}-${P.value}`)})]}),o==="swap"&&!((Oe=e.swapConfirmed)!=null&&Oe[s])&&!c?p.jsx("div",{className:"swap-controls",children:p.jsx("button",{className:"swap-confirm-btn",onClick:oe,children:"Confirm"})}):(((Et=(Mt=(rt=e.players[s])==null?void 0:rt.plot)==null?void 0:Mt.revealed)==null?void 0:Et.length)>0||((an=(Mr=(Xn=e.players[s])==null?void 0:Xn.plot)==null?void 0:Mr.hidden)==null?void 0:an.length)>0)&&p.jsx("div",{className:"hand-divider"}),p.jsx("div",{className:"hand-cards-section",children:(Zn=e.players[s])==null?void 0:Zn.hand.map((P,j)=>{var Rr,Dr,un,ec;const I=(Rr=zf(e,s,o))==null?void 0:Rr.includes(j),D=o==="trick"&&i,H=(v==null?void 0:v.index)===j,q=(k==null?void 0:k.sourceType)==="hand"&&(k==null?void 0:k.sourceIndex)===j,ie=o==="swap"&&((Dr=k==null?void 0:k.sourceType)==null?void 0:Dr.startsWith("plot-")),Ae=((un=k==null?void 0:k.dropTarget)==null?void 0:un.type)==="hand"&&((ec=k==null?void 0:k.dropTarget)==null?void 0:ec.index)===j,Dt=Fs=>{o==="swap"?L("hand",j,P,Fs):R(j,P,Fs)};return p.jsx("div",{ref:Fs=>{y.current[j]=Fs},className:`hand-card ${D&&I?"playable":""} ${D&&!I?"invalid":""} ${H?"dragging":""} ${o==="swap"?"swappable":""} ${q?"swap-dragging":""} ${ie?"swap-target":""} ${Ae?"swap-hover":""}`,onMouseDown:Dt,onTouchStart:Dt,children:p.jsx("img",{src:Ue(P),alt:`${P.value} of ${P.suit}`,draggable:!1})},`${P.suit}-${P.value}`)})}),o==="assignment"&&((Rt=e.lastTrick)==null?void 0:Rt.length)>0&&(()=>{const P=e.lastTrick.every(([,I])=>{var H;const D=`${I.suit}-${I.value}`;return(H=e.pendingAssignments)==null?void 0:H[D]}),j=e.lastTrick.filter(([,I])=>{var H;const D=`${I.suit}-${I.value}`;return!((H=e.pendingAssignments)!=null&&H[D])});return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"hand-divider"}),j.length>0&&p.jsx("div",{className:"assign-cards-section",children:j.map(([,I])=>{const D=`${I.suit}-${I.value}`,H=(S==null?void 0:S.cardKey)===D;return p.jsx("div",{className:`hand-card assign-draggable ${H?"dragging":""}`,onMouseDown:q=>K(D,I,q),onTouchStart:q=>K(D,I,q),children:p.jsx("img",{src:Ue(I),alt:`${I.value} of ${I.suit}`,draggable:!1})},D)})}),P&&p.jsx("button",{className:"confirm-assign-btn",onClick:te,children:"Confirm"})]})})()]}),v&&p.jsx("div",{className:"drag-ghost",style:{position:"fixed",left:v.position.x-v.offset.x,top:v.position.y-v.offset.y,transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:1e3},children:p.jsx("img",{src:Ue(v.card),alt:"dragging",style:{width:"80px",height:"auto"}})}),v&&p.jsx("div",{className:`drop-zone-highlight ${v.isOverTarget?"active":""}`,style:{position:"fixed",...(()=>{const P=document.querySelector(".player-column.right .card-slot");if(!P)return{display:"none"};const j=P.getBoundingClientRect();return{left:j.left,top:j.top,width:j.width,height:j.height}})(),pointerEvents:"none",zIndex:999,border:v.isOverTarget?"3px solid #4CAF50":"3px dashed #d4a857",borderRadius:"8px",backgroundColor:v.isOverTarget?"rgba(76, 175, 80, 0.2)":"rgba(212, 168, 87, 0.1)"}}),k&&p.jsx("div",{className:"swap-drag-ghost",style:{position:"fixed",left:k.position.x-k.offset.x,top:k.position.y-k.offset.y,transform:"translate(-50%, -50%) rotate(3deg)",pointerEvents:"none",zIndex:1e3},children:p.jsx("img",{src:Ue(k.card),alt:"swapping",style:{width:"90px",height:"auto",filter:"drop-shadow(0 8px 20px rgba(0,0,0,0.5))"}})}),S&&p.jsx("div",{className:"assign-drag-ghost",style:{position:"fixed",left:S.position.x-S.offset.x,top:S.position.y-S.offset.y,transform:"translate(-50%, -50%) rotate(3deg)",pointerEvents:"none",zIndex:1e3},children:p.jsx("img",{src:Ue(S.card),alt:"assigning",style:{width:"90px",height:"auto",filter:"drop-shadow(0 8px 20px rgba(0,0,0,0.5))"}})}),o==="swap"&&(((zs=e.swapConfirmed)==null?void 0:zs[s])||c)&&p.jsx("div",{className:"swap-waiting",children:p.jsx("span",{children:"Waiting for others..."})})]})]})}function m1({card:e,playerIdx:t,targetSuit:n,cardValue:r,onComplete:s}){const i=G.useRef(null),o=G.useRef(null),[l,a]=G.useState(!1);return G.useEffect(()=>{const f=["left","center-left","center-right","right"][[3,0,1,2][t]],d=document.querySelector(`.player-column.${f} .card-slot`),g=document.querySelector(`.job-indicator .suit-symbol.${n.toLowerCase()}`);if(!d||!g||!i.current){s();return}const v=d.getBoundingClientRect(),E=g.getBoundingClientRect(),k=i.current.getBoundingClientRect(),m=v.width/k.width,h=E.width/k.width;i.current.style.left=`${v.left+v.width/2}px`,i.current.style.top=`${v.top+v.height/2}px`,i.current.style.transform=`translate(-50%, -50%) scale(${m})`;const y=i.current.animate([{left:`${v.left+v.width/2}px`,top:`${v.top+v.height/2}px`,transform:`translate(-50%, -50%) scale(${m})`},{left:`${E.left+E.width/2}px`,top:`${E.top+E.height/2}px`,transform:`translate(-50%, -50%) scale(${h})`}],{duration:650,fill:"forwards",easing:"ease-in-out"});o.current=y;const S=setTimeout(()=>a(!0),570);let N;return y.onfinish=()=>{N=setTimeout(s,800)},()=>{clearTimeout(S),clearTimeout(N),o.current&&o.current.cancel()}},[t,n,s]),p.jsxs("div",{ref:i,className:"flying-card-html",children:[p.jsx("img",{src:Ue(e),alt:`${e.value} of ${e.suit}`}),l&&p.jsxs("span",{className:"flying-value",children:["+",r]})]})}function y1({card:e,playerIdx:t,onComplete:n}){const r=G.useRef(null),s=G.useRef(null);return G.useEffect(()=>{const l=["left","center-left","center-right","right"][[3,0,1,2][t]],a=document.querySelector(`.player-column.${l} .player-panel .mini-card`),u=document.querySelector(`.player-column.${l} .player-panel`),c=document.querySelector(`.player-column.${l} .card-slot`);if(!u||!c||!r.current){n();return}const f=a?a.getBoundingClientRect():u.getBoundingClientRect(),d=c.getBoundingClientRect(),g=r.current.getBoundingClientRect(),v=(a?f.width:f.width*.3)/g.width,E=d.width/g.width;r.current.style.left=`${f.left+f.width/2}px`,r.current.style.top=`${f.top+f.height/2}px`,r.current.style.transform=`translate(-50%, -50%) scale(${v})`;const k=r.current.animate([{left:`${f.left+f.width/2}px`,top:`${f.top+f.height/2}px`,transform:`translate(-50%, -50%) scale(${v})`,opacity:1},{left:`${d.left+d.width/2}px`,top:`${d.top+d.height/2}px`,transform:`translate(-50%, -50%) scale(${E})`,opacity:1}],{duration:800,fill:"forwards",easing:"ease-out"});return s.current=k,k.onfinish=n,()=>{s.current&&s.current.cancel()}},[t,n]),p.jsx("div",{ref:r,className:"ai-play-card",children:p.jsx("img",{src:Ue(e),alt:`${e.value} of ${e.suit}`})})}function zf(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const s=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===s)?r.hand.map((o,l)=>o.suit===s?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function g1(){const[e,t]=G.useState(!1),[n,r]=G.useState({...gm}),s=G.useMemo(()=>e?dm({game:d1,board:p1,numPlayers:4,multiplayer:fm({bots:{1:xi,2:xi,3:xi}}),debug:!1}):null,[e]),[i,o]=G.useState(!1);return e?p.jsx(s,{playerID:"0",setupData:{variants:n}}):p.jsxs("div",{className:"lobby",children:[p.jsxs("div",{className:"lobby-left",children:[p.jsxs("div",{className:"lobby-title",children:[p.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),p.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""})]}),p.jsxs("div",{className:"lobby-buttons",children:[p.jsx("button",{className:"start-btn",onClick:()=>t(!0),children:"Start Game"}),p.jsx("button",{className:`rules-btn ${i?"active":""}`,onClick:()=>o(!i),children:i?"Options":"Rules"})]})]}),p.jsx("div",{className:"lobby-right-panel",children:i?p.jsxs("div",{className:"rules-panel",children:[p.jsx("h3",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h4",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h4",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h4",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),p.jsx("h4",{children:"Scoring"}),p.jsx("p",{children:"Cards in your plot = penalty points. Lowest score wins!"})]})]}):p.jsxs("div",{className:"variant-options",children:[p.jsx("h3",{children:"Deck Type"}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),p.jsx("h3",{children:"Variant Rules"}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:l=>r({...n,nomenclature:l.target.checked})}),p.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:l=>r({...n,allowSwap:l.target.checked})}),p.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:l=>r({...n,northernStyle:l.target.checked})}),p.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - No job rewards, all vulnerable"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:l=>r({...n,miceVariant:l.target.checked})}),p.jsx("strong",{title:"Myshi - Mice",children:""})," - All reveal during requisition"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:l=>r({...n,ordenNachalniku:l.target.checked})}),p.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards on job complete"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:l=>r({...n,medalsCount:l.target.checked})}),p.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins add to score"]}),n.deckType===52&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:l=>r({...n,accumulateJobs:l.target.checked})}),p.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Job rewards carry over"]})]})})]})}const v1=ep(document.getElementById("root"));v1.render(p.jsx(g1,{}));
