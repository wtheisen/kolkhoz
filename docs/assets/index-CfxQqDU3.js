(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jf={exports:{}},Xs={},Af={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=Symbol.for("react.element"),hm=Symbol.for("react.portal"),pm=Symbol.for("react.fragment"),mm=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),gm=Symbol.for("react.provider"),vm=Symbol.for("react.context"),wm=Symbol.for("react.forward_ref"),Sm=Symbol.for("react.suspense"),km=Symbol.for("react.memo"),xm=Symbol.for("react.lazy"),Hu=Symbol.iterator;function _m(e){return e===null||typeof e!="object"?null:(e=Hu&&e[Hu]||e["@@iterator"],typeof e=="function"?e:null)}var If={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mf=Object.assign,Df={};function wr(e,t,n){this.props=e,this.context=t,this.refs=Df,this.updater=n||If}wr.prototype.isReactComponent={};wr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rf(){}Rf.prototype=wr.prototype;function ga(e,t,n){this.props=e,this.context=t,this.refs=Df,this.updater=n||If}var va=ga.prototype=new Rf;va.constructor=ga;Mf(va,wr.prototype);va.isPureReactComponent=!0;var Wu=Array.isArray,bf=Object.prototype.hasOwnProperty,wa={current:null},Lf={key:!0,ref:!0,__self:!0,__source:!0};function zf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)bf.call(t,r)&&!Lf.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ei,type:e,key:s,ref:o,props:i,_owner:wa.current}}function Em(e,t){return{$$typeof:Ei,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sa(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ei}function Cm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vu=/\/+/g;function _o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cm(""+e.key):t.toString(36)}function es(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ei:case hm:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+_o(o,0):r,Wu(i)?(n="",e!=null&&(n=e.replace(Vu,"$&/")+"/"),es(i,t,n,"",function(u){return u})):i!=null&&(Sa(i)&&(i=Em(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Wu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+_o(s,l);o+=es(s,t,n,a,i)}else if(a=_m(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+_o(s,l++),o+=es(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ji(e,t,n){if(e==null)return e;var r=[],i=0;return es(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Pm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},ts={transition:null},Nm={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:ts,ReactCurrentOwner:wa};function $f(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:ji,forEach:function(e,t,n){ji(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ji(e,function(){t++}),t},toArray:function(e){return ji(e,function(t){return t})||[]},only:function(e){if(!Sa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=wr;W.Fragment=pm;W.Profiler=ym;W.PureComponent=ga;W.StrictMode=mm;W.Suspense=Sm;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nm;W.act=$f;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Mf({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=wa.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)bf.call(t,a)&&!Lf.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ei,type:e.type,key:i,ref:s,props:r,_owner:o}};W.createContext=function(e){return e={$$typeof:vm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gm,_context:e},e.Consumer=e};W.createElement=zf;W.createFactory=function(e){var t=zf.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:wm,render:e}};W.isValidElement=Sa;W.lazy=function(e){return{$$typeof:xm,_payload:{_status:-1,_result:e},_init:Pm}};W.memo=function(e,t){return{$$typeof:km,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=ts.transition;ts.transition={};try{e()}finally{ts.transition=t}};W.unstable_act=$f;W.useCallback=function(e,t){return He.current.useCallback(e,t)};W.useContext=function(e){return He.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return He.current.useDeferredValue(e)};W.useEffect=function(e,t){return He.current.useEffect(e,t)};W.useId=function(){return He.current.useId()};W.useImperativeHandle=function(e,t,n){return He.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return He.current.useMemo(e,t)};W.useReducer=function(e,t,n){return He.current.useReducer(e,t,n)};W.useRef=function(e){return He.current.useRef(e)};W.useState=function(e){return He.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return He.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return He.current.useTransition()};W.version="18.3.1";Af.exports=W;var Oe=Af.exports;const D=Tf(Oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om=Oe,Tm=Symbol.for("react.element"),jm=Symbol.for("react.fragment"),Am=Object.prototype.hasOwnProperty,Im=Om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mm={key:!0,ref:!0,__self:!0,__source:!0};function Ff(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Am.call(t,r)&&!Mm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Tm,type:e,key:s,ref:o,props:i,_owner:Im.current}}Xs.Fragment=jm;Xs.jsx=Ff;Xs.jsxs=Ff;jf.exports=Xs;var h=jf.exports,Bf={exports:{}},lt={},Uf={exports:{}},Hf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,L){var B=O.length;O.push(L);e:for(;0<B;){var te=B-1>>>1,X=O[te];if(0<i(X,L))O[te]=L,O[B]=X,B=te;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var L=O[0],B=O.pop();if(B!==L){O[0]=B;e:for(var te=0,X=O.length,ve=X>>>1;te<ve;){var Le=2*(te+1)-1,Ve=O[Le],ce=Le+1,gt=O[ce];if(0>i(Ve,B))ce<X&&0>i(gt,Ve)?(O[te]=gt,O[ce]=B,te=ce):(O[te]=Ve,O[Le]=B,te=Le);else if(ce<X&&0>i(gt,B))O[te]=gt,O[ce]=B,te=ce;else break e}}return L}function i(O,L){var B=O.sortIndex-L.sortIndex;return B!==0?B:O.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,p=3,g=!1,v=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(O){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=O)r(u),L.sortIndex=L.expirationTime,t(a,L);else break;L=n(u)}}function k(O){if(S=!1,y(O),!v)if(n(a)!==null)v=!0,q(N);else{var L=n(u);L!==null&&G(k,L.startTime-O)}}function N(O,L){v=!1,S&&(S=!1,m(j),j=-1),g=!0;var B=p;try{for(y(L),d=n(a);d!==null&&(!(d.expirationTime>L)||O&&!$());){var te=d.callback;if(typeof te=="function"){d.callback=null,p=d.priorityLevel;var X=te(d.expirationTime<=L);L=e.unstable_now(),typeof X=="function"?d.callback=X:d===n(a)&&r(a),y(L)}else r(a);d=n(a)}if(d!==null)var ve=!0;else{var Le=n(u);Le!==null&&G(k,Le.startTime-L),ve=!1}return ve}finally{d=null,p=B,g=!1}}var T=!1,_=null,j=-1,F=5,M=-1;function $(){return!(e.unstable_now()-M<F)}function J(){if(_!==null){var O=e.unstable_now();M=O;var L=!0;try{L=_(!0,O)}finally{L?re():(T=!1,_=null)}}else T=!1}var re;if(typeof f=="function")re=function(){f(J)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,V=Q.port2;Q.port1.onmessage=J,re=function(){V.postMessage(null)}}else re=function(){E(J,0)};function q(O){_=O,T||(T=!0,re())}function G(O,L){j=E(function(){O(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,q(N))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(O){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var B=p;p=L;try{return O()}finally{p=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,L){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var B=p;p=O;try{return L()}finally{p=B}},e.unstable_scheduleCallback=function(O,L,B){var te=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?te+B:te):B=te,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=B+X,O={id:c++,callback:L,priorityLevel:O,startTime:B,expirationTime:X,sortIndex:-1},B>te?(O.sortIndex=B,t(u,O),n(a)===null&&O===n(u)&&(S?(m(j),j=-1):S=!0,G(k,B-te))):(O.sortIndex=X,t(a,O),v||g||(v=!0,q(N))),O},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(O){var L=p;return function(){var B=p;p=L;try{return O.apply(this,arguments)}finally{p=B}}}})(Hf);Uf.exports=Hf;var Dm=Uf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=Oe,it=Dm;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wf=new Set,ti={};function Bn(e,t){cr(e,t),cr(e+"Capture",t)}function cr(e,t){for(ti[e]=t,e=0;e<t.length;e++)Wf.add(t[e])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ol=Object.prototype.hasOwnProperty,bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yu={},Ku={};function Lm(e){return ol.call(Ku,e)?!0:ol.call(Yu,e)?!1:bm.test(e)?Ku[e]=!0:(Yu[e]=!0,!1)}function zm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $m(e,t,n,r){if(t===null||typeof t>"u"||zm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){je[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];je[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){je[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){je[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){je[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){je[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){je[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){je[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){je[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var ka=/[\-:]([a-z])/g;function xa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ka,xa);je[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ka,xa);je[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ka,xa);je[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){je[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});je.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){je[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function _a(e,t,n,r){var i=je.hasOwnProperty(t)?je[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($m(t,n,i,r)&&(n=null),r||i===null?Lm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var qt=Rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ai=Symbol.for("react.element"),Vn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Ea=Symbol.for("react.strict_mode"),ll=Symbol.for("react.profiler"),Vf=Symbol.for("react.provider"),Yf=Symbol.for("react.context"),Ca=Symbol.for("react.forward_ref"),al=Symbol.for("react.suspense"),ul=Symbol.for("react.suspense_list"),Pa=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),Kf=Symbol.for("react.offscreen"),Ju=Symbol.iterator;function Nr(e){return e===null||typeof e!="object"?null:(e=Ju&&e[Ju]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Eo;function zr(e){if(Eo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Eo=t&&t[1]||""}return`
`+Eo+e}var Co=!1;function Po(e,t){if(!e||Co)return"";Co=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{Co=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zr(e):""}function Fm(e){switch(e.tag){case 5:return zr(e.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 2:case 15:return e=Po(e.type,!1),e;case 11:return e=Po(e.type.render,!1),e;case 1:return e=Po(e.type,!0),e;default:return""}}function cl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yn:return"Fragment";case Vn:return"Portal";case ll:return"Profiler";case Ea:return"StrictMode";case al:return"Suspense";case ul:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yf:return(e.displayName||"Context")+".Consumer";case Vf:return(e._context.displayName||"Context")+".Provider";case Ca:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pa:return t=e.displayName||null,t!==null?t:cl(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return cl(e(t))}catch{}}return null}function Bm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cl(t);case 8:return t===Ea?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Um(e){var t=Jf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ii(e){e._valueTracker||(e._valueTracker=Um(e))}function Qf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fl(e,t){var n=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qf(e,t){t=t.checked,t!=null&&_a(e,"checked",t,!1)}function dl(e,t){qf(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hl(e,t.type,n):t.hasOwnProperty("defaultValue")&&hl(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hl(e,t,n){(t!=="number"||gs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $r=Array.isArray;function ir(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function pl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(P(92));if($r(n)){if(1<n.length)throw Error(P(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function Xf(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Zu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ml(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mi,Gf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mi=Mi||document.createElement("div"),Mi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ni(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hm=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(e){Hm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vr[t]=Vr[e]})});function ed(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vr.hasOwnProperty(e)&&Vr[e]?(""+t).trim():t+"px"}function td(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ed(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Wm=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(e,t){if(t){if(Wm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function gl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vl=null;function Na(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wl=null,sr=null,or=null;function Gu(e){if(e=Ni(e)){if(typeof wl!="function")throw Error(P(280));var t=e.stateNode;t&&(t=no(t),wl(e.stateNode,e.type,t))}}function nd(e){sr?or?or.push(e):or=[e]:sr=e}function rd(){if(sr){var e=sr,t=or;if(or=sr=null,Gu(e),t)for(e=0;e<t.length;e++)Gu(t[e])}}function id(e,t){return e(t)}function sd(){}var No=!1;function od(e,t,n){if(No)return e(t,n);No=!0;try{return id(e,t,n)}finally{No=!1,(sr!==null||or!==null)&&(sd(),rd())}}function ri(e,t){var n=e.stateNode;if(n===null)return null;var r=no(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var Sl=!1;if(Vt)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Sl=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Sl=!1}function Vm(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Yr=!1,vs=null,ws=!1,kl=null,Ym={onError:function(e){Yr=!0,vs=e}};function Km(e,t,n,r,i,s,o,l,a){Yr=!1,vs=null,Vm.apply(Ym,arguments)}function Jm(e,t,n,r,i,s,o,l,a){if(Km.apply(this,arguments),Yr){if(Yr){var u=vs;Yr=!1,vs=null}else throw Error(P(198));ws||(ws=!0,kl=u)}}function Un(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ld(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ec(e){if(Un(e)!==e)throw Error(P(188))}function Qm(e){var t=e.alternate;if(!t){if(t=Un(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ec(i),e;if(s===r)return ec(i),t;s=s.sibling}throw Error(P(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function ad(e){return e=Qm(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var cd=it.unstable_scheduleCallback,tc=it.unstable_cancelCallback,qm=it.unstable_shouldYield,Xm=it.unstable_requestPaint,ge=it.unstable_now,Zm=it.unstable_getCurrentPriorityLevel,Oa=it.unstable_ImmediatePriority,fd=it.unstable_UserBlockingPriority,Ss=it.unstable_NormalPriority,Gm=it.unstable_LowPriority,dd=it.unstable_IdlePriority,Zs=null,It=null;function ey(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Zs,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:ry,ty=Math.log,ny=Math.LN2;function ry(e){return e>>>=0,e===0?32:31-(ty(e)/ny|0)|0}var Di=64,Ri=4194304;function Fr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ks(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Fr(l):(s&=o,s!==0&&(r=Fr(s)))}else o=n&~i,o!==0?r=Fr(o):s!==0&&(r=Fr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Et(t),i=1<<n,r|=e[n],t&=~i;return r}function iy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Et(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=iy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function xl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hd(){var e=Di;return Di<<=1,!(Di&4194240)&&(Di=64),e}function Oo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ci(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=n}function oy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Et(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ta(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Et(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ee=0;function pd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var md,ja,yd,gd,vd,_l=!1,bi=[],ln=null,an=null,un=null,ii=new Map,si=new Map,nn=[],ly="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nc(e,t){switch(e){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":un=null;break;case"pointerover":case"pointerout":ii.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":si.delete(t.pointerId)}}function Tr(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Ni(t),t!==null&&ja(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ay(e,t,n,r,i){switch(t){case"focusin":return ln=Tr(ln,e,t,n,r,i),!0;case"dragenter":return an=Tr(an,e,t,n,r,i),!0;case"mouseover":return un=Tr(un,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ii.set(s,Tr(ii.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,si.set(s,Tr(si.get(s)||null,e,t,n,r,i)),!0}return!1}function wd(e){var t=Tn(e.target);if(t!==null){var n=Un(t);if(n!==null){if(t=n.tag,t===13){if(t=ld(n),t!==null){e.blockedOn=t,vd(e.priority,function(){yd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ns(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=El(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);vl=r,n.target.dispatchEvent(r),vl=null}else return t=Ni(n),t!==null&&ja(t),e.blockedOn=n,!1;t.shift()}return!0}function rc(e,t,n){ns(e)&&n.delete(t)}function uy(){_l=!1,ln!==null&&ns(ln)&&(ln=null),an!==null&&ns(an)&&(an=null),un!==null&&ns(un)&&(un=null),ii.forEach(rc),si.forEach(rc)}function jr(e,t){e.blockedOn===t&&(e.blockedOn=null,_l||(_l=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,uy)))}function oi(e){function t(i){return jr(i,e)}if(0<bi.length){jr(bi[0],e);for(var n=1;n<bi.length;n++){var r=bi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ln!==null&&jr(ln,e),an!==null&&jr(an,e),un!==null&&jr(un,e),ii.forEach(t),si.forEach(t),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)wd(n),n.blockedOn===null&&nn.shift()}var lr=qt.ReactCurrentBatchConfig,xs=!0;function cy(e,t,n,r){var i=ee,s=lr.transition;lr.transition=null;try{ee=1,Aa(e,t,n,r)}finally{ee=i,lr.transition=s}}function fy(e,t,n,r){var i=ee,s=lr.transition;lr.transition=null;try{ee=4,Aa(e,t,n,r)}finally{ee=i,lr.transition=s}}function Aa(e,t,n,r){if(xs){var i=El(e,t,n,r);if(i===null)zo(e,t,r,_s,n),nc(e,r);else if(ay(i,e,t,n,r))r.stopPropagation();else if(nc(e,r),t&4&&-1<ly.indexOf(e)){for(;i!==null;){var s=Ni(i);if(s!==null&&md(s),s=El(e,t,n,r),s===null&&zo(e,t,r,_s,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zo(e,t,r,null,n)}}var _s=null;function El(e,t,n,r){if(_s=null,e=Na(r),e=Tn(e),e!==null)if(t=Un(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ld(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _s=e,null}function Sd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zm()){case Oa:return 1;case fd:return 4;case Ss:case Gm:return 16;case dd:return 536870912;default:return 16}default:return 16}}var sn=null,Ia=null,rs=null;function kd(){if(rs)return rs;var e,t=Ia,n=t.length,r,i="value"in sn?sn.value:sn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return rs=i.slice(e,1<r?1-r:void 0)}function is(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Li(){return!0}function ic(){return!1}function at(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Li:ic,this.isPropagationStopped=ic,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),t}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ma=at(Sr),Pi=he({},Sr,{view:0,detail:0}),dy=at(Pi),To,jo,Ar,Gs=he({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ar&&(Ar&&e.type==="mousemove"?(To=e.screenX-Ar.screenX,jo=e.screenY-Ar.screenY):jo=To=0,Ar=e),To)},movementY:function(e){return"movementY"in e?e.movementY:jo}}),sc=at(Gs),hy=he({},Gs,{dataTransfer:0}),py=at(hy),my=he({},Pi,{relatedTarget:0}),Ao=at(my),yy=he({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),gy=at(yy),vy=he({},Sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wy=at(vy),Sy=he({},Sr,{data:0}),oc=at(Sy),ky={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ey(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_y[e])?!!t[e]:!1}function Da(){return Ey}var Cy=he({},Pi,{key:function(e){if(e.key){var t=ky[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=is(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(e){return e.type==="keypress"?is(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?is(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Py=at(Cy),Ny=he({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lc=at(Ny),Oy=he({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),Ty=at(Oy),jy=he({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ay=at(jy),Iy=he({},Gs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),My=at(Iy),Dy=[9,13,27,32],Ra=Vt&&"CompositionEvent"in window,Kr=null;Vt&&"documentMode"in document&&(Kr=document.documentMode);var Ry=Vt&&"TextEvent"in window&&!Kr,xd=Vt&&(!Ra||Kr&&8<Kr&&11>=Kr),ac=" ",uc=!1;function _d(e,t){switch(e){case"keyup":return Dy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ed(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function by(e,t){switch(e){case"compositionend":return Ed(t);case"keypress":return t.which!==32?null:(uc=!0,ac);case"textInput":return e=t.data,e===ac&&uc?null:e;default:return null}}function Ly(e,t){if(Kn)return e==="compositionend"||!Ra&&_d(e,t)?(e=kd(),rs=Ia=sn=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xd&&t.locale!=="ko"?null:t.data;default:return null}}var zy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zy[e.type]:t==="textarea"}function Cd(e,t,n,r){nd(r),t=Es(t,"onChange"),0<t.length&&(n=new Ma("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jr=null,li=null;function $y(e){bd(e,0)}function eo(e){var t=qn(e);if(Qf(t))return e}function Fy(e,t){if(e==="change")return t}var Pd=!1;if(Vt){var Io;if(Vt){var Mo="oninput"in document;if(!Mo){var fc=document.createElement("div");fc.setAttribute("oninput","return;"),Mo=typeof fc.oninput=="function"}Io=Mo}else Io=!1;Pd=Io&&(!document.documentMode||9<document.documentMode)}function dc(){Jr&&(Jr.detachEvent("onpropertychange",Nd),li=Jr=null)}function Nd(e){if(e.propertyName==="value"&&eo(li)){var t=[];Cd(t,li,e,Na(e)),od($y,t)}}function By(e,t,n){e==="focusin"?(dc(),Jr=t,li=n,Jr.attachEvent("onpropertychange",Nd)):e==="focusout"&&dc()}function Uy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eo(li)}function Hy(e,t){if(e==="click")return eo(t)}function Wy(e,t){if(e==="input"||e==="change")return eo(t)}function Vy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:Vy;function ai(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ol.call(t,i)||!Pt(e[i],t[i]))return!1}return!0}function hc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pc(e,t){var n=hc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hc(n)}}function Od(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Od(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Td(){for(var e=window,t=gs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gs(e.document)}return t}function ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Yy(e){var t=Td(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Od(n.ownerDocument.documentElement,n)){if(r!==null&&ba(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=pc(n,s);var o=pc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ky=Vt&&"documentMode"in document&&11>=document.documentMode,Jn=null,Cl=null,Qr=null,Pl=!1;function mc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pl||Jn==null||Jn!==gs(r)||(r=Jn,"selectionStart"in r&&ba(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&ai(Qr,r)||(Qr=r,r=Es(Cl,"onSelect"),0<r.length&&(t=new Ma("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jn)))}function zi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qn={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionend:zi("Transition","TransitionEnd")},Do={},jd={};Vt&&(jd=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function to(e){if(Do[e])return Do[e];if(!Qn[e])return e;var t=Qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jd)return Do[e]=t[n];return e}var Ad=to("animationend"),Id=to("animationiteration"),Md=to("animationstart"),Dd=to("transitionend"),Rd=new Map,yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(e,t){Rd.set(e,t),Bn(t,[e])}for(var Ro=0;Ro<yc.length;Ro++){var bo=yc[Ro],Jy=bo.toLowerCase(),Qy=bo[0].toUpperCase()+bo.slice(1);Sn(Jy,"on"+Qy)}Sn(Ad,"onAnimationEnd");Sn(Id,"onAnimationIteration");Sn(Md,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(Dd,"onTransitionEnd");cr("onMouseEnter",["mouseout","mouseover"]);cr("onMouseLeave",["mouseout","mouseover"]);cr("onPointerEnter",["pointerout","pointerover"]);cr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function gc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jm(r,t,void 0,e),e.currentTarget=null}function bd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;gc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;gc(i,l,u),s=a}}}if(ws)throw e=kl,ws=!1,kl=null,e}function oe(e,t){var n=t[Al];n===void 0&&(n=t[Al]=new Set);var r=e+"__bubble";n.has(r)||(Ld(t,e,2,!1),n.add(r))}function Lo(e,t,n){var r=0;t&&(r|=4),Ld(n,e,r,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function ui(e){if(!e[$i]){e[$i]=!0,Wf.forEach(function(n){n!=="selectionchange"&&(qy.has(n)||Lo(n,!1,e),Lo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$i]||(t[$i]=!0,Lo("selectionchange",!1,t))}}function Ld(e,t,n,r){switch(Sd(t)){case 1:var i=cy;break;case 4:i=fy;break;default:i=Aa}n=i.bind(null,t,n,e),i=void 0,!Sl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zo(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Tn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}od(function(){var u=s,c=Na(n),d=[];e:{var p=Rd.get(e);if(p!==void 0){var g=Ma,v=e;switch(e){case"keypress":if(is(n)===0)break e;case"keydown":case"keyup":g=Py;break;case"focusin":v="focus",g=Ao;break;case"focusout":v="blur",g=Ao;break;case"beforeblur":case"afterblur":g=Ao;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ty;break;case Ad:case Id:case Md:g=gy;break;case Dd:g=Ay;break;case"scroll":g=dy;break;case"wheel":g=My;break;case"copy":case"cut":case"paste":g=wy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=lc}var S=(t&4)!==0,E=!S&&e==="scroll",m=S?p!==null?p+"Capture":null:p;S=[];for(var f=u,y;f!==null;){y=f;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,m!==null&&(k=ri(f,m),k!=null&&S.push(ci(f,k,y)))),E)break;f=f.return}0<S.length&&(p=new g(p,v,null,n,c),d.push({event:p,listeners:S}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&n!==vl&&(v=n.relatedTarget||n.fromElement)&&(Tn(v)||v[Yt]))break e;if((g||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Tn(v):null,v!==null&&(E=Un(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(S=sc,k="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(S=lc,k="onPointerLeave",m="onPointerEnter",f="pointer"),E=g==null?p:qn(g),y=v==null?p:qn(v),p=new S(k,f+"leave",g,n,c),p.target=E,p.relatedTarget=y,k=null,Tn(c)===u&&(S=new S(m,f+"enter",v,n,c),S.target=y,S.relatedTarget=E,k=S),E=k,g&&v)t:{for(S=g,m=v,f=0,y=S;y;y=Wn(y))f++;for(y=0,k=m;k;k=Wn(k))y++;for(;0<f-y;)S=Wn(S),f--;for(;0<y-f;)m=Wn(m),y--;for(;f--;){if(S===m||m!==null&&S===m.alternate)break t;S=Wn(S),m=Wn(m)}S=null}else S=null;g!==null&&vc(d,p,g,S,!1),v!==null&&E!==null&&vc(d,E,v,S,!0)}}e:{if(p=u?qn(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var N=Fy;else if(cc(p))if(Pd)N=Wy;else{N=Uy;var T=By}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=Hy);if(N&&(N=N(e,u))){Cd(d,N,n,c);break e}T&&T(e,p,u),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&hl(p,"number",p.value)}switch(T=u?qn(u):window,e){case"focusin":(cc(T)||T.contentEditable==="true")&&(Jn=T,Cl=u,Qr=null);break;case"focusout":Qr=Cl=Jn=null;break;case"mousedown":Pl=!0;break;case"contextmenu":case"mouseup":case"dragend":Pl=!1,mc(d,n,c);break;case"selectionchange":if(Ky)break;case"keydown":case"keyup":mc(d,n,c)}var _;if(Ra)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Kn?_d(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(xd&&n.locale!=="ko"&&(Kn||j!=="onCompositionStart"?j==="onCompositionEnd"&&Kn&&(_=kd()):(sn=c,Ia="value"in sn?sn.value:sn.textContent,Kn=!0)),T=Es(u,j),0<T.length&&(j=new oc(j,e,null,n,c),d.push({event:j,listeners:T}),_?j.data=_:(_=Ed(n),_!==null&&(j.data=_)))),(_=Ry?by(e,n):Ly(e,n))&&(u=Es(u,"onBeforeInput"),0<u.length&&(c=new oc("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=_))}bd(d,t)})}function ci(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Es(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ri(e,n),s!=null&&r.unshift(ci(e,s,i)),s=ri(e,t),s!=null&&r.push(ci(e,s,i))),e=e.return}return r}function Wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ri(n,s),a!=null&&o.unshift(ci(n,a,l))):i||(a=ri(n,s),a!=null&&o.push(ci(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Xy=/\r\n?/g,Zy=/\u0000|\uFFFD/g;function wc(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Zy,"")}function Fi(e,t,n){if(t=wc(t),wc(e)!==t&&n)throw Error(P(425))}function Cs(){}var Nl=null,Ol=null;function Tl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jl=typeof setTimeout=="function"?setTimeout:void 0,Gy=typeof clearTimeout=="function"?clearTimeout:void 0,Sc=typeof Promise=="function"?Promise:void 0,eg=typeof queueMicrotask=="function"?queueMicrotask:typeof Sc<"u"?function(e){return Sc.resolve(null).then(e).catch(tg)}:jl;function tg(e){setTimeout(function(){throw e})}function $o(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),oi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oi(t)}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var kr=Math.random().toString(36).slice(2),At="__reactFiber$"+kr,fi="__reactProps$"+kr,Yt="__reactContainer$"+kr,Al="__reactEvents$"+kr,ng="__reactListeners$"+kr,rg="__reactHandles$"+kr;function Tn(e){var t=e[At];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yt]||n[At]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kc(e);e!==null;){if(n=e[At])return n;e=kc(e)}return t}e=n,n=e.parentNode}return null}function Ni(e){return e=e[At]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function no(e){return e[fi]||null}var Il=[],Xn=-1;function kn(e){return{current:e}}function le(e){0>Xn||(e.current=Il[Xn],Il[Xn]=null,Xn--)}function ie(e,t){Xn++,Il[Xn]=e.current,e.current=t}var gn={},be=kn(gn),Qe=kn(!1),Rn=gn;function fr(e,t){var n=e.type.contextTypes;if(!n)return gn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function qe(e){return e=e.childContextTypes,e!=null}function Ps(){le(Qe),le(be)}function xc(e,t,n){if(be.current!==gn)throw Error(P(168));ie(be,t),ie(Qe,n)}function zd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(P(108,Bm(e)||"Unknown",i));return he({},n,r)}function Ns(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,Rn=be.current,ie(be,e),ie(Qe,Qe.current),!0}function _c(e,t,n){var r=e.stateNode;if(!r)throw Error(P(169));n?(e=zd(e,t,Rn),r.__reactInternalMemoizedMergedChildContext=e,le(Qe),le(be),ie(be,e)):le(Qe),ie(Qe,n)}var Ft=null,ro=!1,Fo=!1;function $d(e){Ft===null?Ft=[e]:Ft.push(e)}function ig(e){ro=!0,$d(e)}function xn(){if(!Fo&&Ft!==null){Fo=!0;var e=0,t=ee;try{var n=Ft;for(ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ft=null,ro=!1}catch(i){throw Ft!==null&&(Ft=Ft.slice(e+1)),cd(Oa,xn),i}finally{ee=t,Fo=!1}}return null}var Zn=[],Gn=0,Os=null,Ts=0,ct=[],ft=0,bn=null,Bt=1,Ut="";function Pn(e,t){Zn[Gn++]=Ts,Zn[Gn++]=Os,Os=e,Ts=t}function Fd(e,t,n){ct[ft++]=Bt,ct[ft++]=Ut,ct[ft++]=bn,bn=e;var r=Bt;e=Ut;var i=32-Et(r)-1;r&=~(1<<i),n+=1;var s=32-Et(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bt=1<<32-Et(t)+i|n<<i|r,Ut=s+e}else Bt=1<<s|n<<i|r,Ut=e}function La(e){e.return!==null&&(Pn(e,1),Fd(e,1,0))}function za(e){for(;e===Os;)Os=Zn[--Gn],Zn[Gn]=null,Ts=Zn[--Gn],Zn[Gn]=null;for(;e===bn;)bn=ct[--ft],ct[ft]=null,Ut=ct[--ft],ct[ft]=null,Bt=ct[--ft],ct[ft]=null}var rt=null,tt=null,ue=!1,xt=null;function Bd(e,t){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ec(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rt=e,tt=cn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rt=e,tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bn!==null?{id:Bt,overflow:Ut}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rt=e,tt=null,!0):!1;default:return!1}}function Ml(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dl(e){if(ue){var t=tt;if(t){var n=t;if(!Ec(e,t)){if(Ml(e))throw Error(P(418));t=cn(n.nextSibling);var r=rt;t&&Ec(e,t)?Bd(r,n):(e.flags=e.flags&-4097|2,ue=!1,rt=e)}}else{if(Ml(e))throw Error(P(418));e.flags=e.flags&-4097|2,ue=!1,rt=e}}}function Cc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rt=e}function Bi(e){if(e!==rt)return!1;if(!ue)return Cc(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tl(e.type,e.memoizedProps)),t&&(t=tt)){if(Ml(e))throw Ud(),Error(P(418));for(;t;)Bd(e,t),t=cn(t.nextSibling)}if(Cc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tt=cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tt=null}}else tt=rt?cn(e.stateNode.nextSibling):null;return!0}function Ud(){for(var e=tt;e;)e=cn(e.nextSibling)}function dr(){tt=rt=null,ue=!1}function $a(e){xt===null?xt=[e]:xt.push(e)}var sg=qt.ReactCurrentBatchConfig;function Ir(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,e))}return e}function Ui(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pc(e){var t=e._init;return t(e._payload)}function Hd(e){function t(m,f){if(e){var y=m.deletions;y===null?(m.deletions=[f],m.flags|=16):y.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function i(m,f){return m=pn(m,f),m.index=0,m.sibling=null,m}function s(m,f,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<f?(m.flags|=2,f):y):(m.flags|=2,f)):(m.flags|=1048576,f)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,f,y,k){return f===null||f.tag!==6?(f=Ko(y,m.mode,k),f.return=m,f):(f=i(f,y),f.return=m,f)}function a(m,f,y,k){var N=y.type;return N===Yn?c(m,f,y.props.children,k,y.key):f!==null&&(f.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===en&&Pc(N)===f.type)?(k=i(f,y.props),k.ref=Ir(m,f,y),k.return=m,k):(k=fs(y.type,y.key,y.props,null,m.mode,k),k.ref=Ir(m,f,y),k.return=m,k)}function u(m,f,y,k){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=Jo(y,m.mode,k),f.return=m,f):(f=i(f,y.children||[]),f.return=m,f)}function c(m,f,y,k,N){return f===null||f.tag!==7?(f=Mn(y,m.mode,k,N),f.return=m,f):(f=i(f,y),f.return=m,f)}function d(m,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Ko(""+f,m.mode,y),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ai:return y=fs(f.type,f.key,f.props,null,m.mode,y),y.ref=Ir(m,null,f),y.return=m,y;case Vn:return f=Jo(f,m.mode,y),f.return=m,f;case en:var k=f._init;return d(m,k(f._payload),y)}if($r(f)||Nr(f))return f=Mn(f,m.mode,y,null),f.return=m,f;Ui(m,f)}return null}function p(m,f,y,k){var N=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(m,f,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ai:return y.key===N?a(m,f,y,k):null;case Vn:return y.key===N?u(m,f,y,k):null;case en:return N=y._init,p(m,f,N(y._payload),k)}if($r(y)||Nr(y))return N!==null?null:c(m,f,y,k,null);Ui(m,y)}return null}function g(m,f,y,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(y)||null,l(f,m,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ai:return m=m.get(k.key===null?y:k.key)||null,a(f,m,k,N);case Vn:return m=m.get(k.key===null?y:k.key)||null,u(f,m,k,N);case en:var T=k._init;return g(m,f,y,T(k._payload),N)}if($r(k)||Nr(k))return m=m.get(y)||null,c(f,m,k,N,null);Ui(f,k)}return null}function v(m,f,y,k){for(var N=null,T=null,_=f,j=f=0,F=null;_!==null&&j<y.length;j++){_.index>j?(F=_,_=null):F=_.sibling;var M=p(m,_,y[j],k);if(M===null){_===null&&(_=F);break}e&&_&&M.alternate===null&&t(m,_),f=s(M,f,j),T===null?N=M:T.sibling=M,T=M,_=F}if(j===y.length)return n(m,_),ue&&Pn(m,j),N;if(_===null){for(;j<y.length;j++)_=d(m,y[j],k),_!==null&&(f=s(_,f,j),T===null?N=_:T.sibling=_,T=_);return ue&&Pn(m,j),N}for(_=r(m,_);j<y.length;j++)F=g(_,m,j,y[j],k),F!==null&&(e&&F.alternate!==null&&_.delete(F.key===null?j:F.key),f=s(F,f,j),T===null?N=F:T.sibling=F,T=F);return e&&_.forEach(function($){return t(m,$)}),ue&&Pn(m,j),N}function S(m,f,y,k){var N=Nr(y);if(typeof N!="function")throw Error(P(150));if(y=N.call(y),y==null)throw Error(P(151));for(var T=N=null,_=f,j=f=0,F=null,M=y.next();_!==null&&!M.done;j++,M=y.next()){_.index>j?(F=_,_=null):F=_.sibling;var $=p(m,_,M.value,k);if($===null){_===null&&(_=F);break}e&&_&&$.alternate===null&&t(m,_),f=s($,f,j),T===null?N=$:T.sibling=$,T=$,_=F}if(M.done)return n(m,_),ue&&Pn(m,j),N;if(_===null){for(;!M.done;j++,M=y.next())M=d(m,M.value,k),M!==null&&(f=s(M,f,j),T===null?N=M:T.sibling=M,T=M);return ue&&Pn(m,j),N}for(_=r(m,_);!M.done;j++,M=y.next())M=g(_,m,j,M.value,k),M!==null&&(e&&M.alternate!==null&&_.delete(M.key===null?j:M.key),f=s(M,f,j),T===null?N=M:T.sibling=M,T=M);return e&&_.forEach(function(J){return t(m,J)}),ue&&Pn(m,j),N}function E(m,f,y,k){if(typeof y=="object"&&y!==null&&y.type===Yn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ai:e:{for(var N=y.key,T=f;T!==null;){if(T.key===N){if(N=y.type,N===Yn){if(T.tag===7){n(m,T.sibling),f=i(T,y.props.children),f.return=m,m=f;break e}}else if(T.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===en&&Pc(N)===T.type){n(m,T.sibling),f=i(T,y.props),f.ref=Ir(m,T,y),f.return=m,m=f;break e}n(m,T);break}else t(m,T);T=T.sibling}y.type===Yn?(f=Mn(y.props.children,m.mode,k,y.key),f.return=m,m=f):(k=fs(y.type,y.key,y.props,null,m.mode,k),k.ref=Ir(m,f,y),k.return=m,m=k)}return o(m);case Vn:e:{for(T=y.key;f!==null;){if(f.key===T)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(m,f.sibling),f=i(f,y.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=Jo(y,m.mode,k),f.return=m,m=f}return o(m);case en:return T=y._init,E(m,f,T(y._payload),k)}if($r(y))return v(m,f,y,k);if(Nr(y))return S(m,f,y,k);Ui(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(m,f.sibling),f=i(f,y),f.return=m,m=f):(n(m,f),f=Ko(y,m.mode,k),f.return=m,m=f),o(m)):n(m,f)}return E}var hr=Hd(!0),Wd=Hd(!1),js=kn(null),As=null,er=null,Fa=null;function Ba(){Fa=er=As=null}function Ua(e){var t=js.current;le(js),e._currentValue=t}function Rl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ar(e,t){As=e,Fa=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Je=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(Fa!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(As===null)throw Error(P(308));er=e,As.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var jn=null;function Ha(e){jn===null?jn=[e]:jn.push(e)}function Vd(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ha(t)):(n.next=i.next,i.next=n),t.interleaved=n,Kt(e,r)}function Kt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tn=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ht(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Kt(e,n)}return i=r.interleaved,i===null?(t.next=t,Ha(r)):(t.next=i.next,i.next=t),r.interleaved=t,Kt(e,n)}function ss(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ta(e,n)}}function Nc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Is(e,t,n,r){var i=e.updateQueue;tn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,c=u=a=null,l=s;do{var p=l.lane,g=l.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,S=l;switch(p=t,g=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=he({},d,p);break e;case 2:tn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=d):c=c.next=g,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);zn|=o,e.lanes=o,e.memoizedState=d}}function Oc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(P(191,i));i.call(r)}}}var Oi={},Mt=kn(Oi),di=kn(Oi),hi=kn(Oi);function An(e){if(e===Oi)throw Error(P(174));return e}function Va(e,t){switch(ie(hi,t),ie(di,e),ie(Mt,Oi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ml(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ml(t,e)}le(Mt),ie(Mt,t)}function pr(){le(Mt),le(di),le(hi)}function Kd(e){An(hi.current);var t=An(Mt.current),n=ml(t,e.type);t!==n&&(ie(di,e),ie(Mt,n))}function Ya(e){di.current===e&&(le(Mt),le(di))}var fe=kn(0);function Ms(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bo=[];function Ka(){for(var e=0;e<Bo.length;e++)Bo[e]._workInProgressVersionPrimary=null;Bo.length=0}var os=qt.ReactCurrentDispatcher,Uo=qt.ReactCurrentBatchConfig,Ln=0,de=null,xe=null,Ee=null,Ds=!1,qr=!1,pi=0,og=0;function Ae(){throw Error(P(321))}function Ja(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}function Qa(e,t,n,r,i,s){if(Ln=s,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=e===null||e.memoizedState===null?cg:fg,e=n(r,i),qr){s=0;do{if(qr=!1,pi=0,25<=s)throw Error(P(301));s+=1,Ee=xe=null,t.updateQueue=null,os.current=dg,e=n(r,i)}while(qr)}if(os.current=Rs,t=xe!==null&&xe.next!==null,Ln=0,Ee=xe=de=null,Ds=!1,t)throw Error(P(300));return e}function qa(){var e=pi!==0;return pi=0,e}function Tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?de.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function yt(){if(xe===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=Ee===null?de.memoizedState:Ee.next;if(t!==null)Ee=t,xe=e;else{if(e===null)throw Error(P(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Ee===null?de.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function mi(e,t){return typeof t=="function"?t(e):t}function Ho(e){var t=yt(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Ln&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,de.lanes|=c,zn|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Pt(r,t.memoizedState)||(Je=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,de.lanes|=s,zn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wo(e){var t=yt(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Pt(s,t.memoizedState)||(Je=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Jd(){}function Qd(e,t){var n=de,r=yt(),i=t(),s=!Pt(r.memoizedState,i);if(s&&(r.memoizedState=i,Je=!0),r=r.queue,Xa(Zd.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,yi(9,Xd.bind(null,n,r,i,t),void 0,null),Ce===null)throw Error(P(349));Ln&30||qd(n,t,i)}return i}function qd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xd(e,t,n,r){t.value=n,t.getSnapshot=r,Gd(t)&&eh(e)}function Zd(e,t,n){return n(function(){Gd(t)&&eh(e)})}function Gd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pt(e,n)}catch{return!0}}function eh(e){var t=Kt(e,1);t!==null&&Ct(t,e,1,-1)}function Tc(e){var t=Tt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:e},t.queue=e,e=e.dispatch=ug.bind(null,de,e),[t.memoizedState,e]}function yi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function th(){return yt().memoizedState}function ls(e,t,n,r){var i=Tt();de.flags|=e,i.memoizedState=yi(1|t,n,void 0,r===void 0?null:r)}function io(e,t,n,r){var i=yt();r=r===void 0?null:r;var s=void 0;if(xe!==null){var o=xe.memoizedState;if(s=o.destroy,r!==null&&Ja(r,o.deps)){i.memoizedState=yi(t,n,s,r);return}}de.flags|=e,i.memoizedState=yi(1|t,n,s,r)}function jc(e,t){return ls(8390656,8,e,t)}function Xa(e,t){return io(2048,8,e,t)}function nh(e,t){return io(4,2,e,t)}function rh(e,t){return io(4,4,e,t)}function ih(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sh(e,t,n){return n=n!=null?n.concat([e]):null,io(4,4,ih.bind(null,t,e),n)}function Za(){}function oh(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ja(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function lh(e,t){var n=yt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ja(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ah(e,t,n){return Ln&21?(Pt(n,t)||(n=hd(),de.lanes|=n,zn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Je=!0),e.memoizedState=n)}function lg(e,t){var n=ee;ee=n!==0&&4>n?n:4,e(!0);var r=Uo.transition;Uo.transition={};try{e(!1),t()}finally{ee=n,Uo.transition=r}}function uh(){return yt().memoizedState}function ag(e,t,n){var r=hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ch(e))fh(t,n);else if(n=Vd(e,t,n,r),n!==null){var i=Ue();Ct(n,e,r,i),dh(n,t,r)}}function ug(e,t,n){var r=hn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ch(e))fh(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Pt(l,o)){var a=t.interleaved;a===null?(i.next=i,Ha(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Vd(e,t,i,r),n!==null&&(i=Ue(),Ct(n,e,r,i),dh(n,t,r))}}function ch(e){var t=e.alternate;return e===de||t!==null&&t===de}function fh(e,t){qr=Ds=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ta(e,n)}}var Rs={readContext:mt,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},cg={readContext:mt,useCallback:function(e,t){return Tt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:jc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ls(4194308,4,ih.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return ls(4,2,e,t)},useMemo:function(e,t){var n=Tt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Tt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ag.bind(null,de,e),[r.memoizedState,e]},useRef:function(e){var t=Tt();return e={current:e},t.memoizedState=e},useState:Tc,useDebugValue:Za,useDeferredValue:function(e){return Tt().memoizedState=e},useTransition:function(){var e=Tc(!1),t=e[0];return e=lg.bind(null,e[1]),Tt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=de,i=Tt();if(ue){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Ce===null)throw Error(P(349));Ln&30||qd(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,jc(Zd.bind(null,r,s,e),[e]),r.flags|=2048,yi(9,Xd.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Tt(),t=Ce.identifierPrefix;if(ue){var n=Ut,r=Bt;n=(r&~(1<<32-Et(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=og++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fg={readContext:mt,useCallback:oh,useContext:mt,useEffect:Xa,useImperativeHandle:sh,useInsertionEffect:nh,useLayoutEffect:rh,useMemo:lh,useReducer:Ho,useRef:th,useState:function(){return Ho(mi)},useDebugValue:Za,useDeferredValue:function(e){var t=yt();return ah(t,xe.memoizedState,e)},useTransition:function(){var e=Ho(mi)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Jd,useSyncExternalStore:Qd,useId:uh,unstable_isNewReconciler:!1},dg={readContext:mt,useCallback:oh,useContext:mt,useEffect:Xa,useImperativeHandle:sh,useInsertionEffect:nh,useLayoutEffect:rh,useMemo:lh,useReducer:Wo,useRef:th,useState:function(){return Wo(mi)},useDebugValue:Za,useDeferredValue:function(e){var t=yt();return xe===null?t.memoizedState=e:ah(t,xe.memoizedState,e)},useTransition:function(){var e=Wo(mi)[0],t=yt().memoizedState;return[e,t]},useMutableSource:Jd,useSyncExternalStore:Qd,useId:uh,unstable_isNewReconciler:!1};function wt(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:he({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return(e=e._reactInternals)?Un(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ue(),i=hn(e),s=Ht(r,i);s.payload=t,n!=null&&(s.callback=n),t=fn(e,s,i),t!==null&&(Ct(t,e,i,r),ss(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ue(),i=hn(e),s=Ht(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=fn(e,s,i),t!==null&&(Ct(t,e,i,r),ss(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ue(),r=hn(e),i=Ht(n,r);i.tag=2,t!=null&&(i.callback=t),t=fn(e,i,r),t!==null&&(Ct(t,e,r,n),ss(t,e,r))}};function Ac(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ai(n,r)||!ai(i,s):!0}function hh(e,t,n){var r=!1,i=gn,s=t.contextType;return typeof s=="object"&&s!==null?s=mt(s):(i=qe(t)?Rn:be.current,r=t.contextTypes,s=(r=r!=null)?fr(e,i):gn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ic(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function Ll(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Wa(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=mt(s):(s=qe(t)?Rn:be.current,i.context=fr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(bl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&so.enqueueReplaceState(i,i.state,null),Is(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function mr(e,t){try{var n="",r=t;do n+=Fm(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Vo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function zl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hg=typeof WeakMap=="function"?WeakMap:Map;function ph(e,t,n){n=Ht(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ls||(Ls=!0,Jl=r),zl(e,t)},n}function mh(e,t,n){n=Ht(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){zl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zl(e,t),typeof r!="function"&&(dn===null?dn=new Set([this]):dn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Mc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hg;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ng.bind(null,e,t,n),t.then(e,e))}function Dc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ht(-1,1),t.tag=2,fn(n,t,1))),n.lanes|=1),e)}var pg=qt.ReactCurrentOwner,Je=!1;function Fe(e,t,n,r){t.child=e===null?Wd(t,null,n,r):hr(t,e.child,n,r)}function bc(e,t,n,r,i){n=n.render;var s=t.ref;return ar(t,i),r=Qa(e,t,n,r,s,i),n=qa(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(ue&&n&&La(t),t.flags|=1,Fe(e,t,r,i),t.child)}function Lc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!ou(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,yh(e,t,s,r,i)):(e=fs(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ai,n(o,r)&&e.ref===t.ref)return Jt(e,t,i)}return t.flags|=1,e=pn(s,r),e.ref=t.ref,e.return=t,t.child=e}function yh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ai(s,r)&&e.ref===t.ref)if(Je=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Je=!0);else return t.lanes=e.lanes,Jt(e,t,i)}return $l(e,t,n,r,i)}function gh(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(nr,et),et|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(nr,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ie(nr,et),et|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ie(nr,et),et|=r;return Fe(e,t,i,n),t.child}function vh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $l(e,t,n,r,i){var s=qe(n)?Rn:be.current;return s=fr(t,s),ar(t,i),n=Qa(e,t,n,r,s,i),r=qa(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(ue&&r&&La(t),t.flags|=1,Fe(e,t,n,i),t.child)}function zc(e,t,n,r,i){if(qe(n)){var s=!0;Ns(t)}else s=!1;if(ar(t,i),t.stateNode===null)as(e,t),hh(t,n,r),Ll(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=qe(n)?Rn:be.current,u=fr(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Ic(t,o,r,u),tn=!1;var p=t.memoizedState;o.state=p,Is(t,r,o,i),a=t.memoizedState,l!==r||p!==a||Qe.current||tn?(typeof c=="function"&&(bl(t,n,c,r),a=t.memoizedState),(l=tn||Ac(t,n,l,r,p,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Yd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:wt(t.type,l),o.props=u,d=t.pendingProps,p=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=mt(a):(a=qe(n)?Rn:be.current,a=fr(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||p!==a)&&Ic(t,o,r,a),tn=!1,p=t.memoizedState,o.state=p,Is(t,r,o,i);var v=t.memoizedState;l!==d||p!==v||Qe.current||tn?(typeof g=="function"&&(bl(t,n,g,r),v=t.memoizedState),(u=tn||Ac(t,n,u,r,p,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Fl(e,t,n,r,s,i)}function Fl(e,t,n,r,i,s){vh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&_c(t,n,!1),Jt(e,t,s);r=t.stateNode,pg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=hr(t,e.child,null,s),t.child=hr(t,null,l,s)):Fe(e,t,l,s),t.memoizedState=r.state,i&&_c(t,n,!0),t.child}function wh(e){var t=e.stateNode;t.pendingContext?xc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xc(e,t.context,!1),Va(e,t.containerInfo)}function $c(e,t,n,r,i){return dr(),$a(i),t.flags|=256,Fe(e,t,n,r),t.child}var Bl={dehydrated:null,treeContext:null,retryLane:0};function Ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sh(e,t,n){var r=t.pendingProps,i=fe.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ie(fe,i&1),e===null)return Dl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ao(o,r,0,null),e=Mn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ul(n),t.memoizedState=Bl,e):Ga(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return mg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=pn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=pn(l,s):(s=Mn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Ul(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Bl,r}return s=e.child,e=s.sibling,r=pn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ga(e,t){return t=ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hi(e,t,n,r){return r!==null&&$a(r),hr(t,e.child,null,n),e=Ga(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Vo(Error(P(422))),Hi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ao({mode:"visible",children:r.children},i,0,null),s=Mn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&hr(t,e.child,null,o),t.child.memoizedState=Ul(o),t.memoizedState=Bl,s);if(!(t.mode&1))return Hi(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(P(419)),r=Vo(s,r,void 0),Hi(e,t,o,r)}if(l=(o&e.childLanes)!==0,Je||l){if(r=Ce,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Kt(e,i),Ct(r,e,i,-1))}return su(),r=Vo(Error(P(421))),Hi(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Og.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,tt=cn(i.nextSibling),rt=t,ue=!0,xt=null,e!==null&&(ct[ft++]=Bt,ct[ft++]=Ut,ct[ft++]=bn,Bt=e.id,Ut=e.overflow,bn=t),t=Ga(t,r.children),t.flags|=4096,t)}function Fc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Rl(e.return,t,n)}function Yo(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function kh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fe(e,t,r.children,n),r=fe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fc(e,n,t);else if(e.tag===19)Fc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ie(fe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ms(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Yo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ms(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Yo(t,!0,n,null,s);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function as(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=pn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yg(e,t,n){switch(t.tag){case 3:wh(t),dr();break;case 5:Kd(t);break;case 1:qe(t.type)&&Ns(t);break;case 4:Va(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ie(js,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ie(fe,fe.current&1),t.flags|=128,null):n&t.child.childLanes?Sh(e,t,n):(ie(fe,fe.current&1),e=Jt(e,t,n),e!==null?e.sibling:null);ie(fe,fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ie(fe,fe.current),r)break;return null;case 22:case 23:return t.lanes=0,gh(e,t,n)}return Jt(e,t,n)}var xh,Hl,_h,Eh;xh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hl=function(){};_h=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,An(Mt.current);var s=null;switch(n){case"input":i=fl(e,i),r=fl(e,r),s=[];break;case"select":i=he({},i,{value:void 0}),r=he({},r,{value:void 0}),s=[];break;case"textarea":i=pl(e,i),r=pl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cs)}yl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ti.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ti.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&oe("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Eh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Mr(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function gg(e,t,n){var r=t.pendingProps;switch(za(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return qe(t.type)&&Ps(),Ie(t),null;case 3:return r=t.stateNode,pr(),le(Qe),le(be),Ka(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(Xl(xt),xt=null))),Hl(e,t),Ie(t),null;case 5:Ya(t);var i=An(hi.current);if(n=t.type,e!==null&&t.stateNode!=null)_h(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(P(166));return Ie(t),null}if(e=An(Mt.current),Bi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[At]=t,r[fi]=s,e=(t.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(i=0;i<Br.length;i++)oe(Br[i],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":Qu(r,s),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oe("invalid",r);break;case"textarea":Xu(r,s),oe("invalid",r)}yl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Fi(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Fi(r.textContent,l,e),i=["children",""+l]):ti.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":Ii(r),qu(r,s,!0);break;case"textarea":Ii(r),Zu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cs)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[At]=t,e[fi]=r,xh(e,t,!1,!1),t.stateNode=e;e:{switch(o=gl(n,r),n){case"dialog":oe("cancel",e),oe("close",e),i=r;break;case"iframe":case"object":case"embed":oe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Br.length;i++)oe(Br[i],e);i=r;break;case"source":oe("error",e),i=r;break;case"img":case"image":case"link":oe("error",e),oe("load",e),i=r;break;case"details":oe("toggle",e),i=r;break;case"input":Qu(e,r),i=fl(e,r),oe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=he({},r,{value:void 0}),oe("invalid",e);break;case"textarea":Xu(e,r),i=pl(e,r),oe("invalid",e);break;default:i=r}yl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?td(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Gf(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ni(e,a):typeof a=="number"&&ni(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ti.hasOwnProperty(s)?a!=null&&s==="onScroll"&&oe("scroll",e):a!=null&&_a(e,s,a,o))}switch(n){case"input":Ii(e),qu(e,r,!1);break;case"textarea":Ii(e),Zu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ir(e,!!r.multiple,s,!1):r.defaultValue!=null&&ir(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Cs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)Eh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(P(166));if(n=An(hi.current),An(Mt.current),Bi(t)){if(r=t.stateNode,n=t.memoizedProps,r[At]=t,(s=r.nodeValue!==n)&&(e=rt,e!==null))switch(e.tag){case 3:Fi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fi(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[At]=t,t.stateNode=r}return Ie(t),null;case 13:if(le(fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&tt!==null&&t.mode&1&&!(t.flags&128))Ud(),dr(),t.flags|=98560,s=!1;else if(s=Bi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(P(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[At]=t}else dr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),s=!1}else xt!==null&&(Xl(xt),xt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?_e===0&&(_e=3):su())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return pr(),Hl(e,t),e===null&&ui(t.stateNode.containerInfo),Ie(t),null;case 10:return Ua(t.type._context),Ie(t),null;case 17:return qe(t.type)&&Ps(),Ie(t),null;case 19:if(le(fe),s=t.memoizedState,s===null)return Ie(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Mr(s,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ms(e),o!==null){for(t.flags|=128,Mr(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ie(fe,fe.current&1|2),t.child}e=e.sibling}s.tail!==null&&ge()>yr&&(t.flags|=128,r=!0,Mr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ms(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ue)return Ie(t),null}else 2*ge()-s.renderingStartTime>yr&&n!==1073741824&&(t.flags|=128,r=!0,Mr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ge(),t.sibling=null,n=fe.current,ie(fe,r?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return iu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?et&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function vg(e,t){switch(za(t),t.tag){case 1:return qe(t.type)&&Ps(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pr(),le(Qe),le(be),Ka(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ya(t),null;case 13:if(le(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));dr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(fe),null;case 4:return pr(),null;case 10:return Ua(t.type._context),null;case 22:case 23:return iu(),null;case 24:return null;default:return null}}var Wi=!1,Re=!1,wg=typeof WeakSet=="function"?WeakSet:Set,I=null;function tr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){me(e,t,r)}else n.current=null}function Wl(e,t,n){try{n()}catch(r){me(e,t,r)}}var Bc=!1;function Sg(e,t){if(Nl=xs,e=Td(),ba(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=e,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=o),p===s&&++c===r&&(a=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ol={focusedElem:e,selectionRange:n},xs=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?S:wt(t.type,S),E);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(k){me(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return v=Bc,Bc=!1,v}function Xr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Wl(t,n,s)}i=i.next}while(i!==r)}}function oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ch(e){var t=e.alternate;t!==null&&(e.alternate=null,Ch(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[At],delete t[fi],delete t[Al],delete t[ng],delete t[rg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ph(e){return e.tag===5||e.tag===3||e.tag===4}function Uc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ph(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cs));else if(r!==4&&(e=e.child,e!==null))for(Yl(e,t,n),e=e.sibling;e!==null;)Yl(e,t,n),e=e.sibling}function Kl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Kl(e,t,n),e=e.sibling;e!==null;)Kl(e,t,n),e=e.sibling}var Ne=null,St=!1;function Gt(e,t,n){for(n=n.child;n!==null;)Nh(e,t,n),n=n.sibling}function Nh(e,t,n){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Zs,n)}catch{}switch(n.tag){case 5:Re||tr(n,t);case 6:var r=Ne,i=St;Ne=null,Gt(e,t,n),Ne=r,St=i,Ne!==null&&(St?(e=Ne,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ne.removeChild(n.stateNode));break;case 18:Ne!==null&&(St?(e=Ne,n=n.stateNode,e.nodeType===8?$o(e.parentNode,n):e.nodeType===1&&$o(e,n),oi(e)):$o(Ne,n.stateNode));break;case 4:r=Ne,i=St,Ne=n.stateNode.containerInfo,St=!0,Gt(e,t,n),Ne=r,St=i;break;case 0:case 11:case 14:case 15:if(!Re&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Wl(n,t,o),i=i.next}while(i!==r)}Gt(e,t,n);break;case 1:if(!Re&&(tr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){me(n,t,l)}Gt(e,t,n);break;case 21:Gt(e,t,n);break;case 22:n.mode&1?(Re=(r=Re)||n.memoizedState!==null,Gt(e,t,n),Re=r):Gt(e,t,n);break;default:Gt(e,t,n)}}function Hc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wg),t.forEach(function(r){var i=Tg.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ne=l.stateNode,St=!1;break e;case 3:Ne=l.stateNode.containerInfo,St=!0;break e;case 4:Ne=l.stateNode.containerInfo,St=!0;break e}l=l.return}if(Ne===null)throw Error(P(160));Nh(s,o,i),Ne=null,St=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){me(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Oh(t,e),t=t.sibling}function Oh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vt(t,e),Ot(e),r&4){try{Xr(3,e,e.return),oo(3,e)}catch(S){me(e,e.return,S)}try{Xr(5,e,e.return)}catch(S){me(e,e.return,S)}}break;case 1:vt(t,e),Ot(e),r&512&&n!==null&&tr(n,n.return);break;case 5:if(vt(t,e),Ot(e),r&512&&n!==null&&tr(n,n.return),e.flags&32){var i=e.stateNode;try{ni(i,"")}catch(S){me(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&qf(i,s),gl(l,o);var u=gl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?td(i,d):c==="dangerouslySetInnerHTML"?Gf(i,d):c==="children"?ni(i,d):_a(i,c,d,u)}switch(l){case"input":dl(i,s);break;case"textarea":Xf(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ir(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?ir(i,!!s.multiple,s.defaultValue,!0):ir(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(S){me(e,e.return,S)}}break;case 6:if(vt(t,e),Ot(e),r&4){if(e.stateNode===null)throw Error(P(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(S){me(e,e.return,S)}}break;case 3:if(vt(t,e),Ot(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oi(t.containerInfo)}catch(S){me(e,e.return,S)}break;case 4:vt(t,e),Ot(e);break;case 13:vt(t,e),Ot(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nu=ge())),r&4&&Hc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Re=(u=Re)||c,vt(t,e),Re=u):vt(t,e),Ot(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(I=e,c=e.child;c!==null;){for(d=I=c;I!==null;){switch(p=I,g=p.child,p.tag){case 0:case 11:case 14:case 15:Xr(4,p,p.return);break;case 1:tr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){me(r,n,S)}}break;case 5:tr(p,p.return);break;case 22:if(p.memoizedState!==null){Vc(d);continue}}g!==null?(g.return=p,I=g):Vc(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=ed("display",o))}catch(S){me(e,e.return,S)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){me(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vt(t,e),Ot(e),r&4&&Hc(e);break;case 21:break;default:vt(t,e),Ot(e)}}function Ot(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ph(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ni(i,""),r.flags&=-33);var s=Uc(e);Kl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Uc(e);Yl(e,l,o);break;default:throw Error(P(161))}}catch(a){me(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function kg(e,t,n){I=e,Th(e)}function Th(e,t,n){for(var r=(e.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wi;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Re;l=Wi;var u=Re;if(Wi=o,(Re=a)&&!u)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?Yc(i):a!==null?(a.return=o,I=a):Yc(i);for(;s!==null;)I=s,Th(s),s=s.sibling;I=i,Wi=l,Re=u}Wc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):Wc(e)}}function Wc(e){for(;I!==null;){var t=I;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Re||oo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Re)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:wt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Oc(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Oc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&oi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Re||t.flags&512&&Vl(t)}catch(p){me(t,t.return,p)}}if(t===e){I=null;break}if(n=t.sibling,n!==null){n.return=t.return,I=n;break}I=t.return}}function Vc(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var n=t.sibling;if(n!==null){n.return=t.return,I=n;break}I=t.return}}function Yc(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oo(4,t)}catch(a){me(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){me(t,i,a)}}var s=t.return;try{Vl(t)}catch(a){me(t,s,a)}break;case 5:var o=t.return;try{Vl(t)}catch(a){me(t,o,a)}}}catch(a){me(t,t.return,a)}if(t===e){I=null;break}var l=t.sibling;if(l!==null){l.return=t.return,I=l;break}I=t.return}}var xg=Math.ceil,bs=qt.ReactCurrentDispatcher,eu=qt.ReactCurrentOwner,pt=qt.ReactCurrentBatchConfig,K=0,Ce=null,Se=null,Te=0,et=0,nr=kn(0),_e=0,gi=null,zn=0,lo=0,tu=0,Zr=null,Ke=null,nu=0,yr=1/0,zt=null,Ls=!1,Jl=null,dn=null,Vi=!1,on=null,zs=0,Gr=0,Ql=null,us=-1,cs=0;function Ue(){return K&6?ge():us!==-1?us:us=ge()}function hn(e){return e.mode&1?K&2&&Te!==0?Te&-Te:sg.transition!==null?(cs===0&&(cs=hd()),cs):(e=ee,e!==0||(e=window.event,e=e===void 0?16:Sd(e.type)),e):1}function Ct(e,t,n,r){if(50<Gr)throw Gr=0,Ql=null,Error(P(185));Ci(e,n,r),(!(K&2)||e!==Ce)&&(e===Ce&&(!(K&2)&&(lo|=n),_e===4&&rn(e,Te)),Xe(e,r),n===1&&K===0&&!(t.mode&1)&&(yr=ge()+500,ro&&xn()))}function Xe(e,t){var n=e.callbackNode;sy(e,t);var r=ks(e,e===Ce?Te:0);if(r===0)n!==null&&tc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tc(n),t===1)e.tag===0?ig(Kc.bind(null,e)):$d(Kc.bind(null,e)),eg(function(){!(K&6)&&xn()}),n=null;else{switch(pd(r)){case 1:n=Oa;break;case 4:n=fd;break;case 16:n=Ss;break;case 536870912:n=dd;break;default:n=Ss}n=Lh(n,jh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function jh(e,t){if(us=-1,cs=0,K&6)throw Error(P(327));var n=e.callbackNode;if(ur()&&e.callbackNode!==n)return null;var r=ks(e,e===Ce?Te:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$s(e,r);else{t=r;var i=K;K|=2;var s=Ih();(Ce!==e||Te!==t)&&(zt=null,yr=ge()+500,In(e,t));do try{Cg();break}catch(l){Ah(e,l)}while(!0);Ba(),bs.current=s,K=i,Se!==null?t=0:(Ce=null,Te=0,t=_e)}if(t!==0){if(t===2&&(i=xl(e),i!==0&&(r=i,t=ql(e,i))),t===1)throw n=gi,In(e,0),rn(e,r),Xe(e,ge()),n;if(t===6)rn(e,r);else{if(i=e.current.alternate,!(r&30)&&!_g(i)&&(t=$s(e,r),t===2&&(s=xl(e),s!==0&&(r=s,t=ql(e,s))),t===1))throw n=gi,In(e,0),rn(e,r),Xe(e,ge()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(P(345));case 2:Nn(e,Ke,zt);break;case 3:if(rn(e,r),(r&130023424)===r&&(t=nu+500-ge(),10<t)){if(ks(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ue(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jl(Nn.bind(null,e,Ke,zt),t);break}Nn(e,Ke,zt);break;case 4:if(rn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Et(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xg(r/1960))-r,10<r){e.timeoutHandle=jl(Nn.bind(null,e,Ke,zt),r);break}Nn(e,Ke,zt);break;case 5:Nn(e,Ke,zt);break;default:throw Error(P(329))}}}return Xe(e,ge()),e.callbackNode===n?jh.bind(null,e):null}function ql(e,t){var n=Zr;return e.current.memoizedState.isDehydrated&&(In(e,t).flags|=256),e=$s(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&Xl(t)),e}function Xl(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function _g(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rn(e,t){for(t&=~tu,t&=~lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Et(t),r=1<<n;e[n]=-1,t&=~r}}function Kc(e){if(K&6)throw Error(P(327));ur();var t=ks(e,0);if(!(t&1))return Xe(e,ge()),null;var n=$s(e,t);if(e.tag!==0&&n===2){var r=xl(e);r!==0&&(t=r,n=ql(e,r))}if(n===1)throw n=gi,In(e,0),rn(e,t),Xe(e,ge()),n;if(n===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nn(e,Ke,zt),Xe(e,ge()),null}function ru(e,t){var n=K;K|=1;try{return e(t)}finally{K=n,K===0&&(yr=ge()+500,ro&&xn())}}function $n(e){on!==null&&on.tag===0&&!(K&6)&&ur();var t=K;K|=1;var n=pt.transition,r=ee;try{if(pt.transition=null,ee=1,e)return e()}finally{ee=r,pt.transition=n,K=t,!(K&6)&&xn()}}function iu(){et=nr.current,le(nr)}function In(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Gy(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(za(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ps();break;case 3:pr(),le(Qe),le(be),Ka();break;case 5:Ya(r);break;case 4:pr();break;case 13:le(fe);break;case 19:le(fe);break;case 10:Ua(r.type._context);break;case 22:case 23:iu()}n=n.return}if(Ce=e,Se=e=pn(e.current,null),Te=et=t,_e=0,gi=null,tu=lo=zn=0,Ke=Zr=null,jn!==null){for(t=0;t<jn.length;t++)if(n=jn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}jn=null}return e}function Ah(e,t){do{var n=Se;try{if(Ba(),os.current=Rs,Ds){for(var r=de.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ds=!1}if(Ln=0,Ee=xe=de=null,qr=!1,pi=0,eu.current=null,n===null||n.return===null){_e=1,gi=t,Se=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=Te,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Dc(o);if(g!==null){g.flags&=-257,Rc(g,o,l,s,t),g.mode&1&&Mc(s,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var S=new Set;S.add(a),t.updateQueue=S}else v.add(a);break e}else{if(!(t&1)){Mc(s,u,t),su();break e}a=Error(P(426))}}else if(ue&&l.mode&1){var E=Dc(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Rc(E,o,l,s,t),$a(mr(a,l));break e}}s=a=mr(a,l),_e!==4&&(_e=2),Zr===null?Zr=[s]:Zr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=ph(s,a,t);Nc(s,m);break e;case 1:l=a;var f=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(dn===null||!dn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=mh(s,l,t);Nc(s,k);break e}}s=s.return}while(s!==null)}Dh(n)}catch(N){t=N,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function Ih(){var e=bs.current;return bs.current=Rs,e===null?Rs:e}function su(){(_e===0||_e===3||_e===2)&&(_e=4),Ce===null||!(zn&268435455)&&!(lo&268435455)||rn(Ce,Te)}function $s(e,t){var n=K;K|=2;var r=Ih();(Ce!==e||Te!==t)&&(zt=null,In(e,t));do try{Eg();break}catch(i){Ah(e,i)}while(!0);if(Ba(),K=n,bs.current=r,Se!==null)throw Error(P(261));return Ce=null,Te=0,_e}function Eg(){for(;Se!==null;)Mh(Se)}function Cg(){for(;Se!==null&&!qm();)Mh(Se)}function Mh(e){var t=bh(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?Dh(e):Se=t,eu.current=null}function Dh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vg(n,t),n!==null){n.flags&=32767,Se=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,Se=null;return}}else if(n=gg(n,t,et),n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);_e===0&&(_e=5)}function Nn(e,t,n){var r=ee,i=pt.transition;try{pt.transition=null,ee=1,Pg(e,t,n,r)}finally{pt.transition=i,ee=r}return null}function Pg(e,t,n,r){do ur();while(on!==null);if(K&6)throw Error(P(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(oy(e,s),e===Ce&&(Se=Ce=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vi||(Vi=!0,Lh(Ss,function(){return ur(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pt.transition,pt.transition=null;var o=ee;ee=1;var l=K;K|=4,eu.current=null,Sg(e,n),Oh(n,e),Yy(Ol),xs=!!Nl,Ol=Nl=null,e.current=n,kg(n),Xm(),K=l,ee=o,pt.transition=s}else e.current=n;if(Vi&&(Vi=!1,on=e,zs=i),s=e.pendingLanes,s===0&&(dn=null),ey(n.stateNode),Xe(e,ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ls)throw Ls=!1,e=Jl,Jl=null,e;return zs&1&&e.tag!==0&&ur(),s=e.pendingLanes,s&1?e===Ql?Gr++:(Gr=0,Ql=e):Gr=0,xn(),null}function ur(){if(on!==null){var e=pd(zs),t=pt.transition,n=ee;try{if(pt.transition=null,ee=16>e?16:e,on===null)var r=!1;else{if(e=on,on=null,zs=0,K&6)throw Error(P(331));var i=K;for(K|=4,I=e.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(I=u;I!==null;){var c=I;switch(c.tag){case 0:case 11:case 15:Xr(8,c,s)}var d=c.child;if(d!==null)d.return=c,I=d;else for(;I!==null;){c=I;var p=c.sibling,g=c.return;if(Ch(c),c===u){I=null;break}if(p!==null){p.return=g,I=p;break}I=g}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var E=S.sibling;S.sibling=null,S=E}while(S!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,I=m;break e}I=s.return}}var f=e.current;for(I=f;I!==null;){o=I;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,I=y;else e:for(o=f;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:oo(9,l)}}catch(N){me(l,l.return,N)}if(l===o){I=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,I=k;break e}I=l.return}}if(K=i,xn(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Zs,e)}catch{}r=!0}return r}finally{ee=n,pt.transition=t}}return!1}function Jc(e,t,n){t=mr(n,t),t=ph(e,t,1),e=fn(e,t,1),t=Ue(),e!==null&&(Ci(e,1,t),Xe(e,t))}function me(e,t,n){if(e.tag===3)Jc(e,e,n);else for(;t!==null;){if(t.tag===3){Jc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dn===null||!dn.has(r))){e=mr(n,e),e=mh(t,e,1),t=fn(t,e,1),e=Ue(),t!==null&&(Ci(t,1,e),Xe(t,e));break}}t=t.return}}function Ng(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ue(),e.pingedLanes|=e.suspendedLanes&n,Ce===e&&(Te&n)===n&&(_e===4||_e===3&&(Te&130023424)===Te&&500>ge()-nu?In(e,0):tu|=n),Xe(e,t)}function Rh(e,t){t===0&&(e.mode&1?(t=Ri,Ri<<=1,!(Ri&130023424)&&(Ri=4194304)):t=1);var n=Ue();e=Kt(e,t),e!==null&&(Ci(e,t,n),Xe(e,n))}function Og(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Rh(e,n)}function Tg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(t),Rh(e,n)}var bh;bh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)Je=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Je=!1,yg(e,t,n);Je=!!(e.flags&131072)}else Je=!1,ue&&t.flags&1048576&&Fd(t,Ts,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;as(e,t),e=t.pendingProps;var i=fr(t,be.current);ar(t,n),i=Qa(null,t,r,e,i,n);var s=qa();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qe(r)?(s=!0,Ns(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wa(t),i.updater=so,t.stateNode=i,i._reactInternals=t,Ll(t,r,e,n),t=Fl(null,t,r,!0,s,n)):(t.tag=0,ue&&s&&La(t),Fe(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(as(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Ag(r),e=wt(r,e),i){case 0:t=$l(null,t,r,e,n);break e;case 1:t=zc(null,t,r,e,n);break e;case 11:t=bc(null,t,r,e,n);break e;case 14:t=Lc(null,t,r,wt(r.type,e),n);break e}throw Error(P(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),$l(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),zc(e,t,r,i,n);case 3:e:{if(wh(t),e===null)throw Error(P(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Yd(e,t),Is(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=mr(Error(P(423)),t),t=$c(e,t,r,n,i);break e}else if(r!==i){i=mr(Error(P(424)),t),t=$c(e,t,r,n,i);break e}else for(tt=cn(t.stateNode.containerInfo.firstChild),rt=t,ue=!0,xt=null,n=Wd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dr(),r===i){t=Jt(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return Kd(t),e===null&&Dl(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Tl(r,i)?o=null:s!==null&&Tl(r,s)&&(t.flags|=32),vh(e,t),Fe(e,t,o,n),t.child;case 6:return e===null&&Dl(t),null;case 13:return Sh(e,t,n);case 4:return Va(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),bc(e,t,r,i,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ie(js,r._currentValue),r._currentValue=o,s!==null)if(Pt(s.value,o)){if(s.children===i.children&&!Qe.current){t=Jt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Ht(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Rl(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(P(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Rl(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Fe(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ar(t,n),i=mt(i),r=r(i),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,i=wt(r,t.pendingProps),i=wt(r.type,i),Lc(e,t,r,i,n);case 15:return yh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),as(e,t),t.tag=1,qe(r)?(e=!0,Ns(t)):e=!1,ar(t,n),hh(t,r,i),Ll(t,r,i,n),Fl(null,t,r,!0,e,n);case 19:return kh(e,t,n);case 22:return gh(e,t,n)}throw Error(P(156,t.tag))};function Lh(e,t){return cd(e,t)}function jg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,t,n,r){return new jg(e,t,n,r)}function ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ag(e){if(typeof e=="function")return ou(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ca)return 11;if(e===Pa)return 14}return 2}function pn(e,t){var n=e.alternate;return n===null?(n=ht(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fs(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")ou(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yn:return Mn(n.children,i,s,t);case Ea:o=8,i|=8;break;case ll:return e=ht(12,n,t,i|2),e.elementType=ll,e.lanes=s,e;case al:return e=ht(13,n,t,i),e.elementType=al,e.lanes=s,e;case ul:return e=ht(19,n,t,i),e.elementType=ul,e.lanes=s,e;case Kf:return ao(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vf:o=10;break e;case Yf:o=9;break e;case Ca:o=11;break e;case Pa:o=14;break e;case en:o=16,r=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=ht(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Mn(e,t,n,r){return e=ht(7,e,r,t),e.lanes=n,e}function ao(e,t,n,r){return e=ht(22,e,r,t),e.elementType=Kf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ko(e,t,n){return e=ht(6,e,null,t),e.lanes=n,e}function Jo(e,t,n){return t=ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ig(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oo(0),this.expirationTimes=Oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lu(e,t,n,r,i,s,o,l,a){return e=new Ig(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ht(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wa(s),e}function Mg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zh(e){if(!e)return gn;e=e._reactInternals;e:{if(Un(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var n=e.type;if(qe(n))return zd(e,n,t)}return t}function $h(e,t,n,r,i,s,o,l,a){return e=lu(n,r,!0,e,i,s,o,l,a),e.context=zh(null),n=e.current,r=Ue(),i=hn(n),s=Ht(r,i),s.callback=t??null,fn(n,s,i),e.current.lanes=i,Ci(e,i,r),Xe(e,r),e}function uo(e,t,n,r){var i=t.current,s=Ue(),o=hn(i);return n=zh(n),t.context===null?t.context=n:t.pendingContext=n,t=Ht(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fn(i,t,o),e!==null&&(Ct(e,i,o,s),ss(e,i,o)),o}function Fs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function au(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}function Dg(){return null}var Fh=typeof reportError=="function"?reportError:function(e){console.error(e)};function uu(e){this._internalRoot=e}co.prototype.render=uu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));uo(e,t,null,null)};co.prototype.unmount=uu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$n(function(){uo(null,e,null,null)}),t[Yt]=null}};function co(e){this._internalRoot=e}co.prototype.unstable_scheduleHydration=function(e){if(e){var t=gd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nn.length&&t!==0&&t<nn[n].priority;n++);nn.splice(n,0,e),n===0&&wd(e)}};function cu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qc(){}function Rg(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Fs(o);s.call(u)}}var o=$h(t,r,e,0,null,!1,!1,"",qc);return e._reactRootContainer=o,e[Yt]=o.current,ui(e.nodeType===8?e.parentNode:e),$n(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Fs(a);l.call(u)}}var a=lu(e,0,!1,null,null,!1,!1,"",qc);return e._reactRootContainer=a,e[Yt]=a.current,ui(e.nodeType===8?e.parentNode:e),$n(function(){uo(t,a,n,r)}),a}function ho(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Fs(o);l.call(a)}}uo(t,o,e,i)}else o=Rg(n,t,e,i,r);return Fs(o)}md=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fr(t.pendingLanes);n!==0&&(Ta(t,n|1),Xe(t,ge()),!(K&6)&&(yr=ge()+500,xn()))}break;case 13:$n(function(){var r=Kt(e,1);if(r!==null){var i=Ue();Ct(r,e,1,i)}}),au(e,1)}};ja=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var n=Ue();Ct(t,e,134217728,n)}au(e,134217728)}};yd=function(e){if(e.tag===13){var t=hn(e),n=Kt(e,t);if(n!==null){var r=Ue();Ct(n,e,t,r)}au(e,t)}};gd=function(){return ee};vd=function(e,t){var n=ee;try{return ee=e,t()}finally{ee=n}};wl=function(e,t,n){switch(t){case"input":if(dl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=no(r);if(!i)throw Error(P(90));Qf(r),dl(r,i)}}}break;case"textarea":Xf(e,n);break;case"select":t=n.value,t!=null&&ir(e,!!n.multiple,t,!1)}};id=ru;sd=$n;var bg={usingClientEntryPoint:!1,Events:[Ni,qn,no,nd,rd,ru]},Dr={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lg={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ad(e),e===null?null:e.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||Dg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yi.isDisabled&&Yi.supportsFiber)try{Zs=Yi.inject(Lg),It=Yi}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bg;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(t))throw Error(P(200));return Mg(e,t,null,n)};lt.createRoot=function(e,t){if(!cu(e))throw Error(P(299));var n=!1,r="",i=Fh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=lu(e,1,!1,null,null,n,!1,r,i),e[Yt]=t.current,ui(e.nodeType===8?e.parentNode:e),new uu(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=ad(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return $n(e)};lt.hydrate=function(e,t,n){if(!fo(t))throw Error(P(200));return ho(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!cu(e))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Fh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=$h(t,null,e,1,n??null,i,!1,s,o),e[Yt]=t.current,ui(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new co(t)};lt.render=function(e,t,n){if(!fo(t))throw Error(P(200));return ho(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!fo(e))throw Error(P(40));return e._reactRootContainer?($n(function(){ho(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1};lt.unstable_batchedUpdates=ru;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!fo(n))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return ho(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function Bh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bh)}catch(e){console.error(e)}}Bh(),Bf.exports=lt;var zg=Bf.exports,Uh,Xc=zg;Uh=Xc.createRoot,Xc.hydrateRoot;let $g="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Fg=(e=21)=>{let t="",n=e|0;for(;n--;)t+=$g[Math.random()*64|0];return t};function _t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function gr(e){return!!e&&!!e[st]}function Fn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Jg}(e)||Array.isArray(e)||!!e[of]||!!(!((t=e.constructor)===null||t===void 0)&&t[of])||fu(e)||du(e))}function vi(e,t,n){n===void 0&&(n=!1),xr(e)===0?(n?Object.keys:gu)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function xr(e){var t=e[st];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:fu(e)?2:du(e)?3:0}function Zl(e,t){return xr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Bg(e,t){return xr(e)===2?e.get(t):e[t]}function Hh(e,t,n){var r=xr(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Ug(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function fu(e){return Yg&&e instanceof Map}function du(e){return Kg&&e instanceof Set}function On(e){return e.o||e.t}function hu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Qg(e);delete t[st];for(var n=gu(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function pu(e,t){return t===void 0&&(t=!1),mu(e)||gr(e)||!Fn(e)||(xr(e)>1&&(e.set=e.add=e.clear=e.delete=Hg),Object.freeze(e),t&&vi(e,function(n,r){return pu(r,!0)},!0)),e}function Hg(){_t(2)}function mu(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Dt(e){var t=qg[e];return t||_t(18,e),t}function Zc(){return wi}function Qo(e,t){t&&(Dt("Patches"),e.u=[],e.s=[],e.v=t)}function Bs(e){Gl(e),e.p.forEach(Wg),e.p=null}function Gl(e){e===wi&&(wi=e.l)}function Gc(e){return wi={p:[],l:wi,h:e,m:!0,_:0}}function Wg(e){var t=e[st];t.i===0||t.i===1?t.j():t.g=!0}function qo(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Dt("ES5").S(t,e,r),r?(n[st].P&&(Bs(t),_t(4)),Fn(e)&&(e=Us(t,e),t.l||Hs(t,e)),t.u&&Dt("Patches").M(n[st].t,e,t.u,t.s)):e=Us(t,n,[]),Bs(t),t.u&&t.v(t.u,t.s),e!==Wh?e:void 0}function Us(e,t,n){if(mu(t))return t;var r=t[st];if(!r)return vi(t,function(l,a){return ef(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Hs(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=hu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),vi(s,function(l,a){return ef(e,r,i,l,a,n,o)}),Hs(e,i,!1),n&&e.u&&Dt("Patches").N(r,n,e.u,e.s)}return r.o}function ef(e,t,n,r,i,s,o){if(gr(i)){var l=Us(e,i,s&&t&&t.i!==3&&!Zl(t.R,r)?s.concat(r):void 0);if(Hh(n,r,l),!gr(l))return;e.m=!1}else o&&n.add(i);if(Fn(i)&&!mu(i)){if(!e.h.D&&e._<1)return;Us(e,i),t&&t.A.l||Hs(e,i)}}function Hs(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&pu(t,n)}function Xo(e,t){var n=e[st];return(n?On(n):e)[t]}function tf(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ea(e){e.P||(e.P=!0,e.l&&ea(e.l))}function Zo(e){e.o||(e.o=hu(e.t))}function ta(e,t,n){var r=fu(t)?Dt("MapSet").F(t,n):du(t)?Dt("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:Zc(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=na;o&&(a=[l],u=Ur);var c=Proxy.revocable(a,u),d=c.revoke,p=c.proxy;return l.k=p,l.j=d,p}(t,n):Dt("ES5").J(t,n);return(n?n.A:Zc()).p.push(r),r}function Vg(e){return gr(e)||_t(22,e),function t(n){if(!Fn(n))return n;var r,i=n[st],s=xr(n);if(i){if(!i.P&&(i.i<4||!Dt("ES5").K(i)))return i.t;i.I=!0,r=nf(n,s),i.I=!1}else r=nf(n,s);return vi(r,function(o,l){i&&Bg(i.t,o)===l||Hh(r,o,t(l))}),s===3?new Set(r):r}(e)}function nf(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hu(e)}var rf,wi,yu=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Yg=typeof Map<"u",Kg=typeof Set<"u",sf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Wh=yu?Symbol.for("immer-nothing"):((rf={})["immer-nothing"]=!0,rf),of=yu?Symbol.for("immer-draftable"):"__$immer_draftable",st=yu?Symbol.for("immer-state"):"__$immer_state",Jg=""+Object.prototype.constructor,gu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Qg=Object.getOwnPropertyDescriptors||function(e){var t={};return gu(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},qg={},na={get:function(e,t){if(t===st)return e;var n=On(e);if(!Zl(n,t))return function(i,s,o){var l,a=tf(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Fn(r)?r:r===Xo(e.t,t)?(Zo(e),e.o[t]=ta(e.A.h,r,e)):r},has:function(e,t){return t in On(e)},ownKeys:function(e){return Reflect.ownKeys(On(e))},set:function(e,t,n){var r=tf(On(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Xo(On(e),t),s=i==null?void 0:i[st];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Ug(n,i)&&(n!==void 0||Zl(e.t,t)))return!0;Zo(e),ea(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return Xo(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Zo(e),ea(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=On(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){_t(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){_t(12)}},Ur={};vi(na,function(e,t){Ur[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ur.deleteProperty=function(e,t){return Ur.set.call(this,e,t,void 0)},Ur.set=function(e,t,n){return na.set.call(this,e[0],t,n,e[0])};var Xg=function(){function e(n){var r=this;this.O=sf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(S){var E=this;S===void 0&&(S=l);for(var m=arguments.length,f=Array(m>1?m-1:0),y=1;y<m;y++)f[y-1]=arguments[y];return a.produce(S,function(k){var N;return(N=s).call.apply(N,[E,k].concat(f))})}}var u;if(typeof s!="function"&&_t(6),o!==void 0&&typeof o!="function"&&_t(7),Fn(i)){var c=Gc(r),d=ta(r,i,void 0),p=!0;try{u=s(d),p=!1}finally{p?Bs(c):Gl(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(S){return Qo(c,o),qo(S,c)},function(S){throw Bs(c),S}):(Qo(c,o),qo(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Wh&&(u=void 0),r.D&&pu(u,!0),o){var g=[],v=[];Dt("Patches").M(i,u,g,v),o(g,v)}return u}_t(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),p=1;p<c;p++)d[p-1]=arguments[p];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(d))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Fn(n)||_t(8),gr(n)&&(n=Vg(n));var r=Gc(this),i=ta(this,n,void 0);return i[st].C=!0,Gl(r),i},t.finishDraft=function(n,r){var i=n&&n[st],s=i.A;return Qo(s,r),qo(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!sf&&_t(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Dt("Patches").$;return gr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),ot=new Xg,Zg=ot.produce;ot.produceWithPatches.bind(ot);ot.setAutoFreeze.bind(ot);ot.setUseProxies.bind(ot);ot.applyPatches.bind(ot);ot.createDraft.bind(ot);ot.finishDraft.bind(ot);class Gg{constructor(t){const n=ev();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function ev(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function lf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Vh(e,t){const n=new Gg(e),r=n.next.bind(n);return t&&lf(t,n),r.state=()=>lf(n,{}),r}class af{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=Vh(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const tv={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new af(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=af.seed()),{seed:t}},playerView:()=>{}};var nv=Function.prototype,rv=nv.toString;rv.call(Object);const Si="MAKE_MOVE",po="GAME_EVENT",mo="REDO",vu="RESET",wu="SYNC",yo="UNDO",Su="UPDATE",ku="PATCH",Yh="PLUGIN",go="STRIP_TRANSIENTS",Kh=(e,t,n,r)=>({type:Si,payload:{type:e,args:t,playerID:n,credentials:r}}),ei=(e,t,n,r)=>({type:po,payload:{type:e,args:t,playerID:n,credentials:r}}),Jh=(e,t,n,r)=>({type:po,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Qh=e=>({type:wu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),qh=(e,t,n,r)=>({type:ku,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),Xh=(e,t)=>({type:Su,state:e,deltalog:t,clientOnly:!0}),Zh=e=>({type:vu,state:e,clientOnly:!0}),Gh=(e,t)=>({type:yo,payload:{type:null,args:null,playerID:e,credentials:t}}),ep=(e,t)=>({type:mo,payload:{type:null,args:null,playerID:e,credentials:t}}),iv=(e,t,n,r)=>({type:Yh,payload:{type:e,args:t,playerID:n,credentials:r}}),tp=()=>({type:go});var sv=Object.freeze({__proto__:null,makeMove:Kh,gameEvent:ei,automaticGameEvent:Jh,sync:Qh,patch:qh,update:Xh,reset:Zh,undo:Gh,redo:ep,plugin:iv,stripTransients:tp});const vn="INVALID_MOVE",ov={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=Zg(t.G,s=>{const o=e({...t,G:s},...n);if(o===vn){r=!0;return}return o});return r?vn:i}};var De;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(De||(De={}));var $t;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})($t||($t={}));class lv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,$t.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,$t.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case De.TURN_ON_END:case De.PHASE_ON_END:return r(s.error,$t.StageEventInOnEnd);case De.PHASE_ON_BEGIN:return r(s.error,$t.StageEventInPhaseBegin);case De.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,$t.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===De.TURN_ON_END||s.calledFrom===De.PHASE_ON_END)return r(s.error,$t.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===De.PHASE_ON_END)return r(s.error,$t.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=Jh(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const xu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new lv(e.flow,t,n).api()},av={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},uv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},cv=(...e)=>console.error(...e);function Z(e){cv("ERROR:",e)}const _u=[ov,tv,av,uv],Ti=[..._u,xu],fv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),vr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),np=(e,t,n)=>[..._u,...n,xu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),dv=(e,t)=>([...Ti,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),ra=(e,t)=>([...Ti,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),hv=(e,t)=>([..._u,...t.game.plugins,xu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),pv=(e,t)=>[...Ti,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),mv=(e,t)=>[...Ti,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,rp=(e,t)=>{const n=hv(e,t),r=mv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return Z(`${i} plugin declared action invalid:
${s}`),[e,r]},ip=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Ti,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function Ws(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Vs(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Ys.NULL),n=a}else{if(Ws(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Ki(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Ki(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Ki(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Ki(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function yv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=Vs(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Ki(e,t,n,r,i){(typeof i!="object"||i===Ys.NULL)&&(i={stage:i}),i.stage!==void 0&&(Ws(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function ia(e,t){return e[t]+""}function gv(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...vr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((p,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&Z(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const d=ia(a,u);return r={...r,currentPlayer:d,playOrderPos:u,playOrder:a},r=Vs(r,t.activePlayers||{}),r}function vv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&Z(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=ia(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:Z(`invalid argument to endTurn: ${u}`)}});else{const c={...vr(e),G:s,ctx:o},d=i.next(c),p=typeof d;d!==void 0&&p!=="number"&&Z(`invalid value returned by turn.order.next  expected number or undefined got ${p} ${d}.`),d===void 0?a=!0:(l=d,t=ia(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const wv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Ys={NULL:null};var Eu={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.Pointer=Wt.escapeToken=Wt.unescapeToken=void 0;function sp(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Wt.unescapeToken=sp;function op(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Wt.escapeToken=op;var Sv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(sp);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(op).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Wt.Pointer=Sv;var pe={},Cu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(Cu);var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.diffAny=Be.diffObjects=Be.diffArrays=Be.intersection=Be.subtract=Be.isDestructive=void 0;var ki=Cu;function kv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}Be.isDestructive=kv;function sa(e,t){var n={};for(var r in e)ki.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)ki.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}Be.subtract=sa;function lp(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)ki.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}Be.intersection=lp;function xv(e){return e.op==="add"}function _v(e){return e.op==="remove"}function Go(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function ap(e,t,n,r){r===void 0&&(r=vo);var i={"0,0":{operations:[],cost:0}};function s(c,d){var p="".concat(c,",").concat(d),g=i[p];if(g===void 0){if(c>0&&d>0&&!r(e[c-1],t[d-1],n.add(String(c-1))).length)g=s(c-1,d-1);else{var v=[];if(c>0){var S=s(c-1,d),E={op:"remove",index:c-1};v.push(Go(S,E))}if(d>0){var m=s(c,d-1),f={op:"add",index:c-1,value:t[d-1]};v.push(Go(m,f))}if(c>0&&d>0){var y=s(c-1,d-1),k={op:"replace",index:c-1,original:e[c-1],value:t[d-1]};v.push(Go(y,k))}var N=v.sort(function(T,_){return T.cost-_.cost})[0];g=N}i[p]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,d){var p=c[0],g=c[1];if(xv(d)){var v=d.index+1+g,S=v<o+g?String(v):"-",E={op:d.op,path:n.add(S).toString(),value:d.value};return[p.concat(E),g+1]}else if(_v(d)){var E={op:d.op,path:n.add(String(d.index+g)).toString()};return[p.concat(E),g-1]}else{var m=n.add(String(d.index+g)),f=r(d.original,d.value,m);return[p.concat.apply(p,f),g]}},[[],0])[0];return u}Be.diffArrays=ap;function up(e,t,n,r){r===void 0&&(r=vo);var i=[];return sa(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),sa(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),lp([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}Be.diffObjects=up;function vo(e,t,n,r){if(r===void 0&&(r=vo),e===t)return[];var i=(0,ki.objectType)(e),s=(0,ki.objectType)(t);return i=="array"&&s=="array"?ap(e,t,n,r):i=="object"&&s=="object"?up(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Be.diffAny=vo;var Pu=Wr&&Wr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(pe,"__esModule",{value:!0});pe.apply=pe.InvalidOperationError=pe.test=pe.copy=pe.move=pe.replace=pe.remove=pe.add=pe.TestError=pe.MissingError=void 0;var Qt=Wt,Nu=Cu,Ev=Be,Rt=function(e){Pu(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);pe.MissingError=Rt;var cp=function(e){Pu(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);pe.TestError=cp;function Ou(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function fp(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function dp(e,t){var n=Qt.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Rt(t.path):(Ou(n.parent,n.key,(0,Nu.clone)(t.value)),null)}pe.add=dp;function hp(e,t){var n=Qt.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new Rt(t.path):(fp(n.parent,n.key),null)}pe.remove=hp;function pp(e,t){var n=Qt.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new Rt(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new Rt(t.path)}else if(n.value===void 0)return new Rt(t.path);return n.parent[n.key]=(0,Nu.clone)(t.value),null}pe.replace=pp;function mp(e,t){var n=Qt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Rt(t.from);var r=Qt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Rt(t.path):(fp(n.parent,n.key),Ou(r.parent,r.key,n.value),null)}pe.move=mp;function yp(e,t){var n=Qt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Rt(t.from);var r=Qt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Rt(t.path):(Ou(r.parent,r.key,(0,Nu.clone)(n.value)),null)}pe.copy=yp;function gp(e,t){var n=Qt.Pointer.fromJSON(t.path).evaluate(e);return(0,Ev.diffAny)(n.value,t.value,new Qt.Pointer).length?new cp(n.value,t.value):null}pe.test=gp;var vp=function(e){Pu(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);pe.InvalidOperationError=vp;function Cv(e,t){switch(t.op){case"add":return dp(e,t);case"remove":return hp(e,t);case"replace":return pp(e,t);case"move":return mp(e,t);case"copy":return yp(e,t);case"test":return gp(e,t)}return new vp(t)}pe.apply=Cv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Wt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=pe,r=Be;function i(u,c){return c.map(function(d){return(0,n.apply)(u,d)})}e.applyPatch=i;function s(u){function c(d,p,g){var v=u(d,p,g);return Array.isArray(v)?v:(0,r.diffAny)(d,p,g,c)}return c}function o(u,c,d){var p=new t.Pointer;return(d?s(d):r.diffAny)(u,c,p)}e.createPatch=o;function l(u,c){var d=t.Pointer.fromJSON(c).evaluate(u);if(d!==void 0)return{op:"test",path:c,value:d.value}}function a(u,c){var d=new Array;return c.filter(r.isDestructive).forEach(function(p){var g=l(u,p.path);if(g&&d.push(g),"from"in p){var v=l(u,p.from);v&&d.push(v)}}),d}e.createTests=a})(Eu);function Pv({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:w})=>w),i||(i={});const l={...t};""in l&&Z("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(w=>u.add(w));const d=(w,x)=>{const C=np(w,x,o);return U=>{const z=vr(U);return C({...z,G:U.G,ctx:U.ctx,playerID:U.playerID})}},p=w=>x=>{const C=vr(x);return w({...C,G:x.G,ctx:x.ctx})},g={onEnd:d(r,De.GAME_ON_END),endIf:p(n)};for(const w in l){const x=l[w];if(x.start===!0&&(c=w),x.moves!==void 0)for(const C of Object.keys(x.moves))a[w+"."+C]=x.moves[C],u.add(C);x.endIf===void 0&&(x.endIf=()=>{}),x.onBegin===void 0&&(x.onBegin=({G:C})=>C),x.onEnd===void 0&&(x.onEnd=({G:C})=>C),x.turn===void 0&&(x.turn=i),x.turn.order===void 0&&(x.turn.order=wv.DEFAULT),x.turn.onBegin===void 0&&(x.turn.onBegin=({G:C})=>C),x.turn.onEnd===void 0&&(x.turn.onEnd=({G:C})=>C),x.turn.endIf===void 0&&(x.turn.endIf=()=>!1),x.turn.onMove===void 0&&(x.turn.onMove=({G:C})=>C),x.turn.stages===void 0&&(x.turn.stages={}),Ws(x.turn,!0);for(const C in x.turn.stages){const z=x.turn.stages[C].moves||{};for(const b of Object.keys(z)){const se=w+"."+C+"."+b;a[se]=z[b],u.add(b)}}if(x.wrapped={onBegin:d(x.onBegin,De.PHASE_ON_BEGIN),onEnd:d(x.onEnd,De.PHASE_ON_END),endIf:p(x.endIf)},x.turn.wrapped={onMove:d(x.turn.onMove,De.TURN_ON_MOVE),onBegin:d(x.turn.onBegin,De.TURN_ON_BEGIN),onEnd:d(x.turn.onEnd,De.TURN_ON_END),endIf:p(x.turn.endIf)},typeof x.next!="function"){const{next:C}=x;x.next=()=>C||null}x.wrapped.next=p(x.next)}function v(w){return w.phase?l[w.phase]:l[""]}function S(w){return w}function E(w,x){const C=new Set,U=new Set;for(let z=0;z<x.length;z++){const{fn:b,arg:se,...A}=x[z];if(b===J){U.clear();const ae=w.ctx.phase;if(C.has(ae)){const we={...w.ctx,phase:null};return{...w,ctx:we}}C.add(ae)}const R=[];if(w=b(w,{...A,arg:se,next:R}),b===$)break;const Y=j(w);if(Y){x.push({fn:$,arg:Y,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}const ne=F(w);if(ne){x.push({fn:J,arg:ne,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}if([S,T,_].includes(b)){const ae=M(w);if(ae){x.push({fn:re,arg:ae,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}}x.push(...R)}return w}function m(w,{next:x}){return x.push({fn:f}),w}function f(w,{next:x}){let{G:C,ctx:U}=w;return C=v(U).wrapped.onBegin(w),x.push({fn:y}),{...w,G:C,ctx:U}}function y(w,{currentPlayer:x}){let{ctx:C}=w;const U=v(C);x?(C={...C,currentPlayer:x},U.turn.activePlayers&&(C=Vs(C,U.turn.activePlayers))):C=gv(w,U.turn);const z=C.turn+1;C={...C,turn:z,numMoves:0,_prevActivePlayers:[]};const b=U.turn.wrapped.onBegin({...w,ctx:C});return{...w,G:b,ctx:C,_undo:[],_redo:[]}}function k(w,{arg:x,next:C,phase:U}){const z=v({phase:U});let{ctx:b}=w;if(x&&x.next)if(x.next in l)b={...b,phase:x.next};else return Z("invalid phase: "+x.next),w;else b={...b,phase:z.wrapped.next(w)||null};return w={...w,ctx:b},C.push({fn:f}),w}function N(w,{arg:x,currentPlayer:C,next:U}){let{G:z,ctx:b}=w;const se=v(b),{endPhase:A,ctx:R}=vv(w,C,se.turn,x);return b=R,w={...w,G:z,ctx:b},A?U.push({fn:J,turn:b.turn,phase:b.phase}):U.push({fn:y,currentPlayer:b.currentPlayer}),w}function T(w,{arg:x,playerID:C}){if((typeof x=="string"||x===Ys.NULL)&&(x={stage:x}),typeof x!="object")return w;Ws(x);let{ctx:U}=w,{activePlayers:z,_activePlayersMinMoves:b,_activePlayersMaxMoves:se,_activePlayersNumMoves:A}=U;return x.stage!==void 0&&(z===null&&(z={}),z[C]=x.stage,A[C]=0,x.minMoves&&(b===null&&(b={}),b[C]=x.minMoves),x.maxMoves&&(se===null&&(se={}),se[C]=x.maxMoves)),U={...U,activePlayers:z,_activePlayersMinMoves:b,_activePlayersMaxMoves:se,_activePlayersNumMoves:A},{...w,ctx:U}}function _(w,{arg:x}){return{...w,ctx:Vs(w.ctx,x)}}function j(w){return g.endIf(w)}function F(w){return v(w.ctx).wrapped.endIf(w)}function M(w){const x=v(w.ctx),C=w.ctx.numMoves||0;return x.turn.maxMoves&&C>=x.turn.maxMoves?!0:x.turn.wrapped.endIf(w)}function $(w,{arg:x,phase:C}){w=J(w,{}),x===void 0&&(x=!0),w={...w,ctx:{...w.ctx,gameover:x}};const U=g.onEnd(w);return{...w,G:U}}function J(w,{arg:x,next:C,turn:U,automatic:z}){w=re(w,{turn:U,force:!0,automatic:!0});const{phase:b,turn:se}=w.ctx;if(C&&C.push({fn:k,arg:x,phase:b}),b===null)return w;const R=v(w.ctx).wrapped.onEnd(w),Y={...w.ctx,phase:null},ne=ei("endPhase",x),{_stateID:ae}=w,we={action:ne,_stateID:ae,turn:se,phase:b};z&&(we.automatic=!0);const Pe=[...w.deltalog||[],we];return{...w,G:R,ctx:Y,deltalog:Pe}}function re(w,{arg:x,next:C,turn:U,force:z,automatic:b,playerID:se}){if(U!==w.ctx.turn)return w;const{currentPlayer:A,numMoves:R,phase:Y,turn:ne}=w.ctx,ae=v(w.ctx),we=R||0;if(!z&&ae.turn.minMoves&&we<ae.turn.minMoves)return`${ae.turn.minMoves}`,w;const Pe=ae.turn.wrapped.onEnd(w);C&&C.push({fn:N,arg:x,currentPlayer:A});let ye={...w.ctx,activePlayers:null};if(x&&x.remove){se=se||A;const ze=ye.playOrder.filter(dm=>dm!=se),Pr=ye.playOrderPos>ze.length-1?0:ye.playOrderPos;if(ye={...ye,playOrder:ze,playOrderPos:Pr},ze.length===0)return C.push({fn:J,turn:ne,phase:Y}),w}const Nt=ei("endTurn",x),{_stateID:Cr}=w,Zt={action:Nt,_stateID:Cr,turn:ne,phase:Y};b&&(Zt.automatic=!0);const Hn=[...w.deltalog||[],Zt];return{...w,G:Pe,ctx:ye,deltalog:Hn,_undo:[],_redo:[]}}function Q(w,{arg:x,next:C,automatic:U,playerID:z}){z=z||w.ctx.currentPlayer;let{ctx:b,_stateID:se}=w,{activePlayers:A,_activePlayersNumMoves:R,_activePlayersMinMoves:Y,_activePlayersMaxMoves:ne,phase:ae,turn:we}=b;const Pe=A!==null&&z in A,ye=v(b);if(!x&&Pe){const ze=ye.turn.stages[A[z]];ze&&ze.next&&(x=ze.next)}if(C&&C.push({fn:T,arg:x,playerID:z}),!Pe)return w;const Nt=R[z]||0;if(Y&&Y[z]&&Nt<Y[z])return`${Y[z]}`,w;A={...A},delete A[z],Y&&(Y={...Y},delete Y[z]),ne&&(ne={...ne},delete ne[z]),b=yv({...b,activePlayers:A,_activePlayersMinMoves:Y,_activePlayersMaxMoves:ne});const Zt={action:ei("endStage",x),_stateID:se,turn:we,phase:ae};U&&(Zt.automatic=!0);const Hn=[...w.deltalog||[],Zt];return{...w,ctx:b,deltalog:Hn}}function V(w,x,C){const U=v(w),z=U.turn.stages,{activePlayers:b}=w;if(b&&b[C]!==void 0&&b[C]!==Ys.NULL&&z[b[C]]!==void 0&&z[b[C]].moves!==void 0){const A=z[b[C]].moves;if(x in A)return A[x]}else if(U.moves){if(x in U.moves)return U.moves[x]}else if(x in e)return e[x];return null}function q(w,x){const{playerID:C,type:U}=x,{currentPlayer:z,activePlayers:b,_activePlayersMaxMoves:se}=w.ctx,A=V(w.ctx,U,C),R=!A||typeof A=="function"||A.noLimit!==!0;let{numMoves:Y,_activePlayersNumMoves:ne}=w.ctx;R&&(C===z&&Y++,b&&ne[C]++),w={...w,ctx:{...w.ctx,numMoves:Y,_activePlayersNumMoves:ne}},se&&ne[C]>=se[C]&&(w=Q(w,{playerID:C,automatic:!0}));const we=v(w.ctx).turn.wrapped.onMove({...w,playerID:C});return w={...w,G:we},E(w,[{fn:S}])}function G(w,x,C){return E(w,[{fn:Q,arg:C,playerID:x}])}function O(w,x){return E(w,[{fn:Q,playerID:x}])}function L(w,x,C){return E(w,[{fn:_,arg:C}])}function B(w,x,C){return E(w,[{fn:J,phase:w.ctx.phase,turn:w.ctx.turn,arg:{next:C}}])}function te(w){return E(w,[{fn:J,phase:w.ctx.phase,turn:w.ctx.turn}])}function X(w,x,C){return E(w,[{fn:re,turn:w.ctx.turn,phase:w.ctx.phase,arg:C}])}function ve(w,x,C){return E(w,[{fn:re,turn:w.ctx.turn,phase:w.ctx.phase,force:!0,arg:C}])}function Le(w,x,C){return E(w,[{fn:$,turn:w.ctx.turn,phase:w.ctx.phase,arg:C}])}const Ve={endStage:O,setStage:G,endTurn:X,pass:ve,endPhase:te,setPhase:B,endGame:Le,setActivePlayers:L},ce=[];s.endTurn!==!1&&ce.push("endTurn"),s.pass!==!1&&ce.push("pass"),s.endPhase!==!1&&ce.push("endPhase"),s.setPhase!==!1&&ce.push("setPhase"),s.endGame!==!1&&ce.push("endGame"),s.setActivePlayers!==!1&&ce.push("setActivePlayers"),s.endStage!==!1&&ce.push("endStage"),s.setStage!==!1&&ce.push("setStage");function gt(w,x){const{type:C,playerID:U,args:z}=x.payload;return typeof Ve[C]!="function"?w:Ve[C](w,U,...Array.isArray(z)?z:[z])}function _n(w,x,C){return x.activePlayers?C in x.activePlayers:x.currentPlayer===C}return{ctx:w=>({numPlayers:w,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:w})].map((x,C)=>C+""),playOrderPos:0,phase:c,activePlayers:null}),init:w=>E(w,[{fn:m}]),isPlayerActive:_n,eventHandlers:Ve,eventNames:Object.keys(Ve),enabledEventNames:ce,moveMap:a,moveNames:[...u.values()],processMove:q,processEvent:gt,getMove:V}}function Nv(e){return e.processMove!==void 0}function wo(e){if(Nv(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Pv(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(wp(i)&&(i=i.move),i instanceof Function){const s=np(i,De.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...vr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return Z(`invalid move object: ${r.type}`),n.G}}}function wp(e){return e instanceof Object&&e.move!==void 0}var oa;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(oa||(oa={}));var Me;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(Me||(Me={}));const Ji=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,Ov=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function uf(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function el(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function tl(e,t,n){const[r,i]=rp(e,n);return i?[r,$e(t,Me.PluginActionInvalid,i)]:[r]}function Sp(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function $e(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const kp=e=>t=>n=>{const r=t(n);switch(n.type){case go:return r;default:{const[,i]=Sp(e.getState());return typeof i<"u"?(e.dispatch(tp()),{...r,transients:i}):r}}};function Tu({game:e,isClient:t}){return e=wo(e),(n=null,r)=>{let[i]=Sp(n);switch(r.type){case go:return i;case po:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return Z("cannot call event after game end"),$e(i,Me.GameOver);if(Ji(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return Z(`disallowed event: ${r.payload.type}`),$e(i,Me.InactivePlayer);i=ra(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=tl(s,i,{game:e}),o||(s=uf(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case Si:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return Z(`disallowed move: ${r.payload.type}`),$e(i,Me.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return Z("cannot make move after game end"),$e(i,Me.GameOver);if(Ji(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return Z(`disallowed move: ${r.payload.type}`),$e(i,Me.InactivePlayer);i=ra(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===vn)return Z(`invalid move: ${r.payload.type} args: ${r.payload.args}`),$e(i,Me.InvalidMove);const a={...i,G:l};if(t&&pv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=tl(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=el(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=tl(i,s,{game:e}),u||(i=uf(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case vu:case Su:case wu:return r.state;case yo:{if(i={...i,deltalog:[]},e.disableUndo)return Z("Undo is not enabled"),$e(i,Me.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return Z("No moves to undo"),$e(i,Me.ActionInvalid);const c=l[l.length-1],d=l[l.length-2];if(Ji(r)&&r.payload.playerID!==c.playerID)return Z("Cannot undo other players' moves"),$e(i,Me.ActionInvalid);if(c.moveType){const p=e.flow.getMove(d.ctx,c.moveType,c.playerID);if(!Ov(s,o,p))return Z("Move cannot be undone"),$e(i,Me.ActionInvalid)}return i=el(i,r),{...i,G:d.G,ctx:d.ctx,plugins:d.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case mo:{if(i={...i,deltalog:[]},e.disableUndo)return Z("Redo is not enabled"),$e(i,Me.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return Z("No moves to redo"),$e(i,Me.ActionInvalid);const a=o[0];return Ji(r)&&r.payload.playerID!==a.playerID?(Z("Cannot redo other players' moves"),$e(i,Me.ActionInvalid)):(i=el(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case Yh:return fv(i,r,{game:e});case ku:{const s=i,o=JSON.parse(JSON.stringify(s)),l=Eu.applyPatch(o,r.patch);return l.some(u=>u!==null)?(Z(`Patch ${JSON.stringify(r.patch)} apply failed`),$e(s,oa.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(f){typeof f!="function"&&(f=new Function(""+f));for(var y=new Array(arguments.length-1),k=0;k<y.length;k++)y[k]=arguments[k+1];var N={callback:f,args:y};return r[n]=N,o(n),n++}function a(f){delete r[f]}function u(f){var y=f.callback,k=f.args;switch(k.length){case 0:y();break;case 1:y(k[0]);break;case 2:y(k[0],k[1]);break;case 3:y(k[0],k[1],k[2]);break;default:y.apply(t,k);break}}function c(f){if(i)setTimeout(c,0,f);else{var y=r[f];if(y){i=!0;try{u(y)}finally{a(f),i=!1}}}}function d(){o=function(f){process.nextTick(function(){c(f)})}}function p(){if(e.postMessage&&!e.importScripts){var f=!0,y=e.onmessage;return e.onmessage=function(){f=!1},e.postMessage("","*"),e.onmessage=y,f}}function g(){var f="setImmediate$"+Math.random()+"$",y=function(k){k.source===e&&typeof k.data=="string"&&k.data.indexOf(f)===0&&c(+k.data.slice(f.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(k){e.postMessage(f+k,"*")}}function v(){var f=new MessageChannel;f.port1.onmessage=function(y){var k=y.data;c(k)},o=function(y){f.port2.postMessage(y)}}function S(){var f=s.documentElement;o=function(y){var k=s.createElement("script");k.onreadystatechange=function(){c(y),k.onreadystatechange=null,f.removeChild(k),k=null},f.appendChild(k)}}function E(){o=function(f){setTimeout(c,0,f)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?d():p()?g():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?S():E(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?Wr:self);class Tv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return Kh(s.move,s.args,r);if("event"in s)return ei(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=Vh(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const jv=25;class ds extends Tv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Tu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((p,g)=>{const v=a[g];return v.checker(i,s)?p+v.weight:p},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<jv&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),d=this.playout(c);this.backpropagate(c,d),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function xi(e){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(e)}function Av(e,t){if(xi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iv(e){var t=Av(e,"string");return xi(t)=="symbol"?t:t+""}function Mv(e,t,n){return(t=Iv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cf(Object(n),!0).forEach(function(r){Mv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ge(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var df=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),hf=function(){return Math.random().toString(36).substring(7).split("").join(".")},pf={INIT:"@@redux/INIT"+hf(),REPLACE:"@@redux/REPLACE"+hf()};function Dv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ju(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ge(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ge(1));return n(ju)(e,t)}if(typeof e!="function")throw new Error(Ge(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(Ge(3));return s}function d(S){if(typeof S!="function")throw new Error(Ge(4));if(a)throw new Error(Ge(5));var E=!0;return u(),l.push(S),function(){if(E){if(a)throw new Error(Ge(6));E=!1,u();var f=l.indexOf(S);l.splice(f,1),o=null}}}function p(S){if(!Dv(S))throw new Error(Ge(7));if(typeof S.type>"u")throw new Error(Ge(8));if(a)throw new Error(Ge(9));try{a=!0,s=i(s,S)}finally{a=!1}for(var E=o=l,m=0;m<E.length;m++){var f=E[m];f()}return S}function g(S){if(typeof S!="function")throw new Error(Ge(10));i=S,p({type:pf.REPLACE})}function v(){var S,E=d;return S={subscribe:function(f){if(typeof f!="object"||f===null)throw new Error(Ge(11));function y(){f.next&&f.next(c())}y();var k=E(y);return{unsubscribe:k}}},S[df]=function(){return this},S}return p({type:pf.INIT}),r={dispatch:p,subscribe:d,getState:c,replaceReducer:g},r[df]=v,r}function xp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function _p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ge(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=xp.apply(void 0,l)(i.dispatch),ff(ff({},i),{},{dispatch:s})}}}function Ep({game:e,numPlayers:t,setupData:n}){e=wo(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=dv(i,{game:e}),i=ra(i,{game:e,playerID:void 0});const s=vr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=rp(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Au=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Rv extends Au{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const bv=e=>new Rv(e);class Lv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const zv=new Lv;function la(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Iu(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=sv[e](l,a,la(r,n,s),i);n.dispatch(u)};return o}const $v=Iu.bind(null,"makeMove"),Fv=Iu.bind(null,"gameEvent"),Bv=Iu.bind(null,"plugin");class Uv{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=wo(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=zv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Tu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=Ep({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(Zh(this.initialState))},this.undo=()=>{const g=Gh(la(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=ep(la(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const p=_p(kp,()=>g=>v=>{const S=g(v);return this.notifySubscribers(),S},g=>v=>S=>{const E=g.getState(),m=v(S);return!("clientOnly"in S)&&S.type!==go&&this.transport.sendAction(E,S),m},g=>v=>S=>{const E=v(S),m=g.getState();switch(S.type){case Si:case po:case yo:case mo:{const f=m.deltalog;this.log=[...this.log,...f];break}case vu:{this.log=[];break}case ku:case Su:{let f=-1;this.log.length>0&&(f=this.log[this.log.length-1]._stateID);let y=S.deltalog||[];y=y.filter(k=>k._stateID>f),this.log=[...this.log,...y];break}case wu:{this.initialState=S.initialState,this.log=S.log||[];break}}return E});a=a!==void 0?xp(p,a):p,this.store=ju(this.reducer,this.initialState,a),i||(i=bv),this.transport=i({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:Fg(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=Qh(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=Xh(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=qh(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:ip(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=$v(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Fv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Bv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function Hv(e){return new Uv(e)}const Cp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},En=e=>Cp(e,"game name"),Rr=e=>Cp(e,"match ID"),br=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class Wv extends Error{constructor(t,n){super(t),this.details=n}}class Vv{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new Wv(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){En(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return En(t),Rr(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return En(t),br(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return En(t),Rr(n),br(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){En(t),Rr(n),br(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){En(t),Rr(n),br(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return En(t),Rr(n),br(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var Pp={exports:{}},Yv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Kv=Yv,Jv=Kv;function Np(){}function Op(){}Op.resetWarningCache=Np;var Qv=function(){function e(r,i,s,o,l,a){if(a!==Jv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Op,resetWarningCache:Np};return n.PropTypes=n,n};Pp.exports=Qv();var qv=Pp.exports;const jt=Tf(qv);var Xt={},Mu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Mu.parse=e0;Mu.serialize=t0;var Xv=decodeURIComponent,Zv=encodeURIComponent,Gv=/; */,Qi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function e0(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(Gv),s=r.decode||Xv,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=n0(c,s))}}return n}function t0(e,t,n){var r=n||{},i=r.encode||Zv;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Qi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Qi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Qi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Qi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function n0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var mf=Object.getOwnPropertySymbols,r0=Object.prototype.hasOwnProperty,i0=Object.prototype.propertyIsEnumerable;function s0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var l0=o0()?Object.assign:function(e,t){for(var n,r=s0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)r0.call(n,o)&&(r[o]=n[o]);if(mf){i=mf(n);for(var l=0;l<i.length;l++)i0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},a0={};Object.defineProperty(Xt,"__esModule",{value:!0});var u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Xt.load=Ip;Xt.loadAll=Mp;Xt.select=Dp;Xt.save=Rp;Xt.remove=bp;Xt.setRawCookie=Du;Xt.plugToRequest=Lp;var c0=Mu,_r=jp(c0),f0=l0,Tp=jp(f0);function jp(e){return e&&e.__esModule?e:{default:e}}var So=typeof document>"u"||typeof process<"u"&&a0&&!1,nt={},wn=void 0;function Ap(){return wn&&!wn.headersSent}function Ip(e,t){var n=So?nt:_r.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Mp(e){var t=So?nt:_r.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Dp(e){var t=So?nt:_r.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,Tp.default)({},n,i)},{}):t:{}}function Rp(e,t,n){nt[e]=t,(typeof t>"u"?"undefined":u0(t))==="object"&&(nt[e]=JSON.stringify(t)),So||(document.cookie=_r.default.serialize(e,nt[e],n)),Ap()&&wn.cookie&&wn.cookie(e,t,n)}function bp(e,t){delete nt[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Tp.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=_r.default.serialize(e,"",t)),Ap()&&wn.clearCookie&&wn.clearCookie(e,t)}function Du(e){e?nt=_r.default.parse(e):nt={}}function Lp(e,t){return e.cookie?nt=e.cookie:e.cookies?nt=e.cookies:e.headers&&e.headers.cookie?Du(e.headers.cookie):nt={},wn=t,function(){wn=null,nt={}}}var yf=Xt.default={setRawCookie:Du,load:Ip,loadAll:Mp,select:Dp,save:Rp,remove:bp,plugToRequest:Lp},Ks;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Ks||(Ks={}));function Cn(e){return e.type()===Ks.SYNC}class d0{type(){return Ks.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const h0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},p0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=h0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=Ep({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},gf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),m0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class y0{constructor(t,n,r,i){this.game=wo(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(Cn(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=m0(t),l=r;let a;if(Cn(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return Z(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){Z(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Tu({game:this.game}),c=_p(kp),d=ju(u,a,c);if(o.type==yo||o.type==mo){const m=a.ctx.activePlayers!==null,f=a.ctx.currentPlayer===i;if(!m&&!f||m&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){Z(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){Z(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const p=o.type==Si?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==Si&&!p){Z(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(p&&wp(p)&&p.ignoreStaleStateID)){Z(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const g=d.getState();d.dispatch(o),a=d.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...S}=a;let E;if(s&&(s.gameover===void 0||s.gameover===null)&&(E={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(E.gameover=a.ctx.gameover)),Cn(this.storageAPI))this.storageAPI.setState(l,S,v),E&&this.storageAPI.setMetadata(l,E);else{const m=[this.storageAPI.setState(l,S,v)];E&&m.push(this.storageAPI.setMetadata(l,E)),await Promise.all(m)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=Cn(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:d}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:d}))return{error:"unauthorized"};if(a===void 0){const v=p0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,d=v.metadata,this.subscribeCallback({state:a,matchID:t}),Cn(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:d}):await this.storageAPI.createMatch(s,{initialState:u,metadata:d})}const p=d?gf(d):void 0,g={state:a,log:c,filteredMetadata:p,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(Cn(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return Z(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return Z(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=gf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),Cn(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const qi=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:ip(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),g0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=nl(o.deltalog,t),a=qi(e,t,o),u=o._stateID,c=qi(e,t,s),d=Eu.createPatch(c,a);return{type:"patch",args:[r,i,u,d,l]}}case"update":{const[r,i]=n.args,s=nl(i.deltalog,t),o=qi(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=qi(e,t,i.state),o=nl(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function nl(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const Lt=Object.create(null);Lt.open="0";Lt.close="1";Lt.ping="2";Lt.pong="3";Lt.message="4";Lt.upgrade="5";Lt.noop="6";const hs=Object.create(null);Object.keys(Lt).forEach(e=>{hs[Lt[e]]=e});const aa={type:"error",data:"parser error"},zp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",$p=typeof ArrayBuffer=="function",Fp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ru=({type:e,data:t},n,r)=>zp&&t instanceof Blob?n?r(t):vf(t,r):$p&&(t instanceof ArrayBuffer||Fp(t))?n?r(t):vf(new Blob([t]),r):r(Lt[e]+(t||"")),vf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function wf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let rl;function v0(e,t){if(zp&&e.data instanceof Blob)return e.data.arrayBuffer().then(wf).then(t);if($p&&(e.data instanceof ArrayBuffer||Fp(e.data)))return t(wf(e.data));Ru(e,!1,n=>{rl||(rl=new TextEncoder),t(rl.encode(n))})}const Sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Sf.length;e++)Hr[Sf.charCodeAt(e)]=e;const w0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Hr[e.charCodeAt(r)],o=Hr[e.charCodeAt(r+1)],l=Hr[e.charCodeAt(r+2)],a=Hr[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},S0=typeof ArrayBuffer=="function",bu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Bp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:k0(e.substring(1),t)}:hs[n]?e.length>1?{type:hs[n],data:e.substring(1)}:{type:hs[n]}:aa},k0=(e,t)=>{if(S0){const n=w0(e);return Bp(n,t)}else return{base64:!0,data:e}},Bp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Up="",x0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Ru(s,!1,l=>{r[o]=l,++i===n&&t(r.join(Up))})})},_0=(e,t)=>{const n=e.split(Up),r=[];for(let i=0;i<n.length;i++){const s=bu(n[i],t);if(r.push(s),s.type==="error")break}return r};function E0(){return new TransformStream({transform(e,t){v0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let il;function Xi(e){return e.reduce((t,n)=>t+n.length,0)}function Zi(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function C0(e,t){il||(il=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Xi(n)<1)break;const a=Zi(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Xi(n)<2)break;const a=Zi(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Xi(n)<8)break;const a=Zi(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(aa);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Xi(n)<i)break;const a=Zi(n,i);l.enqueue(bu(s?a:il.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(aa);break}}}})}const Hp=4;function ke(e){if(e)return P0(e)}function P0(e){for(var t in ke.prototype)e[t]=ke.prototype[t];return e}ke.prototype.on=ke.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ke.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ke.prototype.off=ke.prototype.removeListener=ke.prototype.removeAllListeners=ke.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ke.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ke.prototype.emitReserved=ke.prototype.emit;ke.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ke.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ko=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),dt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),N0="arraybuffer";function Wp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const O0=dt.setTimeout,T0=dt.clearTimeout;function xo(e,t){t.useNativeTimers?(e.setTimeoutFn=O0.bind(dt),e.clearTimeoutFn=T0.bind(dt)):(e.setTimeoutFn=dt.setTimeout.bind(dt),e.clearTimeoutFn=dt.clearTimeout.bind(dt))}const j0=1.33;function A0(e){return typeof e=="string"?I0(e):Math.ceil((e.byteLength||e.size)*j0)}function I0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Vp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function M0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function D0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class R0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Lu extends ke{constructor(t){super(),this.writable=!1,xo(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new R0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=bu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=M0(t);return n.length?"?"+n:""}}class b0 extends Lu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};_0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,x0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Vp()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Yp=!1;try{Yp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const L0=Yp;function z0(){}class $0 extends b0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class bt extends ke{constructor(t,n,r){super(),this.createRequest=t,xo(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Wp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=bt.requestsCount++,bt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=z0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete bt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}bt.requestsCount=0;bt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",kf);else if(typeof addEventListener=="function"){const e="onpagehide"in dt?"pagehide":"unload";addEventListener(e,kf,!1)}}function kf(){for(let e in bt.requests)bt.requests.hasOwnProperty(e)&&bt.requests[e].abort()}const F0=function(){const e=Kp({xdomain:!1});return e&&e.responseType!==null}();class B0 extends $0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=F0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new bt(Kp,this.uri(),t)}}function Kp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||L0))return new XMLHttpRequest}catch{}if(!t)try{return new dt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Jp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class U0 extends Lu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Jp?{}:Wp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Ru(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&ko(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Vp()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const sl=dt.WebSocket||dt.MozWebSocket;class H0 extends U0{createSocket(t,n,r){return Jp?new sl(t,n,r):n?new sl(t,n):new sl(t)}doWrite(t,n){this.ws.send(n)}}class W0 extends Lu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=C0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=E0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&ko(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const V0={websocket:H0,webtransport:W0,polling:B0},Y0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,K0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ua(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=Y0.exec(e||""),s={},o=14;for(;o--;)s[K0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=J0(s,s.path),s.queryKey=Q0(s,s.query),s}function J0(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Q0(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const ca=typeof addEventListener=="function"&&typeof removeEventListener=="function",ps=[];ca&&addEventListener("offline",()=>{ps.forEach(e=>e())},!1);class mn extends ke{constructor(t,n){if(super(),this.binaryType=N0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=ua(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=ua(n.host).host);xo(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=D0(this.opts.query)),ca&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ps.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Hp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&mn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",mn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=A0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ko(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(mn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ca&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ps.indexOf(this._offlineEventListener);r!==-1&&ps.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}mn.protocol=Hp;class q0 extends mn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;mn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;mn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=d=>{const p=new Error("probe error: "+d);p.transport=n.name,s(),this.emitReserved("upgradeError",p)};function l(){o("transport closed")}function a(){o("socket closed")}function u(d){n&&d.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let X0=class extends q0{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>V0[i]).filter(i=>!!i)),super(t,r)}};function Z0(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=ua(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const G0=typeof ArrayBuffer=="function",ew=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Qp=Object.prototype.toString,tw=typeof Blob=="function"||typeof Blob<"u"&&Qp.call(Blob)==="[object BlobConstructor]",nw=typeof File=="function"||typeof File<"u"&&Qp.call(File)==="[object FileConstructor]";function zu(e){return G0&&(e instanceof ArrayBuffer||ew(e))||tw&&e instanceof Blob||nw&&e instanceof File}function ms(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(ms(e[n]))return!0;return!1}if(zu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ms(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ms(e[n]))return!0;return!1}function rw(e){const t=[],n=e.data,r=e;return r.data=fa(n,t),r.attachments=t.length,{packet:r,buffers:t}}function fa(e,t){if(!e)return e;if(zu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=fa(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=fa(e[r],t));return n}return e}function iw(e,t){return e.data=da(e.data,t),delete e.attachments,e}function da(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=da(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=da(e[n],t));return e}const qp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],sw=5;var H;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(H||(H={}));class ow{constructor(t){this.replacer=t}encode(t){return(t.type===H.EVENT||t.type===H.ACK)&&ms(t)?this.encodeAsBinary({type:t.type===H.EVENT?H.BINARY_EVENT:H.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===H.BINARY_EVENT||t.type===H.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=rw(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class $u extends ke{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===H.BINARY_EVENT;r||n.type===H.BINARY_ACK?(n.type=r?H.EVENT:H.ACK,this.reconstructor=new lw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(zu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(H[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===H.BINARY_EVENT||r.type===H.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if($u.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case H.CONNECT:return Js(n);case H.DISCONNECT:return n===void 0;case H.CONNECT_ERROR:return typeof n=="string"||Js(n);case H.EVENT:case H.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&qp.indexOf(n[0])===-1);case H.ACK:case H.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class lw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=iw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function aw(e){return typeof e=="string"}const uw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function cw(e){return e===void 0||uw(e)}function Js(e){return Object.prototype.toString.call(e)==="[object Object]"}function fw(e,t){switch(e){case H.CONNECT:return t===void 0||Js(t);case H.DISCONNECT:return t===void 0;case H.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&qp.indexOf(t[0])===-1);case H.ACK:return Array.isArray(t);case H.CONNECT_ERROR:return typeof t=="string"||Js(t);default:return!1}}function dw(e){return aw(e.nsp)&&cw(e.id)&&fw(e.type,e.data)}const hw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:$u,Encoder:ow,get PacketType(){return H},isPacketValid:dw,protocol:sw},Symbol.toStringTag,{value:"Module"}));function kt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const pw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Xp extends ke{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[kt(t,"open",this.onopen.bind(this)),kt(t,"packet",this.onpacket.bind(this)),kt(t,"error",this.onerror.bind(this)),kt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(pw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:H.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,d=n.pop();this._registerAckCallback(c,d),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:H.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case H.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case H.EVENT:case H.BINARY_EVENT:this.onevent(t);break;case H.ACK:case H.BINARY_ACK:this.onack(t);break;case H.DISCONNECT:this.ondisconnect();break;case H.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:H.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:H.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Er(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Er.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Er.prototype.reset=function(){this.attempts=0};Er.prototype.setMin=function(e){this.ms=e};Er.prototype.setMax=function(e){this.max=e};Er.prototype.setJitter=function(e){this.jitter=e};class ha extends ke{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,xo(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Er({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||hw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new X0(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=kt(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=kt(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(kt(t,"ping",this.onping.bind(this)),kt(t,"data",this.ondata.bind(this)),kt(t,"error",this.onerror.bind(this)),kt(t,"close",this.onclose.bind(this)),kt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){ko(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Xp(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Lr={};function ys(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Z0(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Lr[i]&&s in Lr[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new ha(r,t):(Lr[i]||(Lr[i]=new ha(r,t)),a=Lr[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(ys,{Manager:ha,Socket:Xp,io:ys,connect:ys});class Zp extends d0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class mw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class yw extends Zp{constructor(t="bgio"){super();const n=r=>new mw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function gw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class vw extends y0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const d in n){const p=n[d];o[d]=new p({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:d,...p})=>{const g=s[d];g!==void 0&&g(a(d,p))},a=g0(t),u={send:l,sendAll:d=>{for(const p in s)l({playerID:p,...d})}},c=i?new yw(r):new Zp;super(t,c,u),this.connect=(d,p)=>{s[d]=p},this.subscribe(({state:d,matchID:p})=>{if(!n)return;const g=gw(d,o);g!==null&&setTimeout(async()=>{const v=await o[g].play(d,g);await this.onUpdate(v.action,d._stateID,p,v.action.payload.playerID)},100)})}}class ww extends Au{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const xf=new Map;function Gp({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=xf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new vw({game:s,bots:e,persist:t,storageKey:n}),xf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new ww({master:o,...r})}}const _f=ys;class Sw extends Au{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=_f(t+this.gameName,this.socketOpts)}else this.socket=_f("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function Ef({server:e,socketOpts:t}={}){return n=>new Sw({server:e,socketOpts:t,...n})}function em(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>D.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends D.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=Hv({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return D.createElement(l);let d=null;return i&&(d=D.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),D.createElement("div",{className:"bgio-client"},d)}},t.propTypes={matchID:jt.string,playerID:jt.string,credentials:jt.string,debug:jt.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class kw{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Vv({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function xw(e){return new kw(e)}class tm extends D.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return D.createElement("div",null,D.createElement("p",{className:"phase-title"},"Choose a player name:"),D.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),D.createElement("span",{className:"buttons"},D.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),D.createElement("br",null),D.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,D.createElement("br",null)))}}tm.defaultProps={playerName:""};class _w extends D.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>D.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>D.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>D.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>D.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?D.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),D.createElement("tr",{key:"line-"+t.matchID},D.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),D.createElement("td",{key:"cell-status-"+t.matchID},n),D.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),D.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Ew extends D.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>D.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>D.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return D.createElement("div",null,D.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),D.createElement("span",null,"Players:"),D.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),D.createElement("span",{className:"buttons"},D.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Ye;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(Ye||(Ye={}));class nm extends D.Component{constructor(t){super(t),this.state={phase:Ye.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=xw({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:Ye.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Ye.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?Ef({server:this.props.gameServer}):Ef()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=ds;s=Gp({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Ye.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Ye.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return D.createElement(_w,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=yf.load("lobbyState")||{};t.phase&&t.phase===Ye.PLAY&&(t.phase=Ye.LIST),t.phase&&t.phase!==Ye.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||Ye.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};yf.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):D.createElement("div",{id:"lobby-view",style:{padding:50}},D.createElement("div",{className:this._getPhaseVisibility(Ye.ENTER)},D.createElement(tm,{key:i,playerName:i,onEnter:this._enterLobby})),D.createElement("div",{className:this._getPhaseVisibility(Ye.LIST)},D.createElement("p",null,"Welcome, ",i),D.createElement("div",{className:"phase-title",id:"match-creation"},D.createElement("span",null,"Create a match:"),D.createElement(Ew,{games:t,createMatch:this._createMatch})),D.createElement("p",{className:"phase-title"},"Join a match:"),D.createElement("div",{id:"instances"},D.createElement("table",null,D.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),D.createElement("span",{className:"error-msg"},r,D.createElement("br",null))),D.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),D.createElement("div",{className:this._getPhaseVisibility(Ye.PLAY)},o&&D.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),D.createElement("div",{className:"buttons",id:"match-exit"},D.createElement("button",{onClick:this._exitMatch},"Exit match"))),D.createElement("div",{className:"buttons",id:"lobby-exit"},D.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}nm.propTypes={gameComponents:jt.array.isRequired,lobbyServer:jt.string,gameServer:jt.string,debug:jt.bool,clientFactory:jt.func,refreshInterval:jt.number};nm.defaultProps={debug:!1,clientFactory:em,refreshInterval:2e3};const Ze=["Hearts","Diamonds","Clubs","Spades"],rr=40,rm=5,Cw=["","","","","",""],Pw={Hearts:"",Diamonds:"",Clubs:"",Spades:""},Nw={Hearts:"Wheat",Diamonds:"Beets",Clubs:"Potatoes",Spades:"Sunflowers"},im={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function Ow(e,t){const n={};if(e.deckType===36)for(const r of Ze)n[r]=[{suit:r,value:1}];else for(const r of Ze){const i=Array.from({length:rm},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function sm(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of Ze){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),d=t[o]||[];r[o]=[...d,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function Gi(e,t){return t.deckType!==36||e<2||e>5}function om(e,t,n,r,i){const s=[];for(const a of Ze)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])Gi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])Gi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])Gi(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>Gi(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function lm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function Tw(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function jw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function Aw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Iw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function pa(e){return e.players.every(t=>t.hand.length===1)}function am(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=rr&&!e.claimedJobs.includes(r)&&Mw(e,r,n)}function Mw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);e.revealedJobs[t]=null,n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Dw(e){if(!Iw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function ma(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=rr||(t.miceVariant?Rw(e,n,r,t):t.deckType===36?bw(e,n,r,t):Lw(e,n,r,t))}function Fu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Qs(e,`${r.suit}-${r.value}`),!0;return!1}function Bu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function Uu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Qs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function _i(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Rw(e,t,n,r){if(Fu(e,n,r))return;const i=Bu(n,e.trump,r),s=Uu(n,e.trump,r),o=um(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),qs(e,o[0]),s&&o.length>1&&(qs(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${_i(o[1][1])}`)))}function bw(e,t,n,r){if(Fu(e,n,r))return;const i=Bu(n,e.trump,r),s=Uu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=um(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(d=>d.suit===t);for(const d of c)l.some(([g,v])=>g===u&&v.suit===d.suit&&v.value===d.value)||l.push([u,d])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((d,p)=>p.value-d.value),qs(e,[u,c[0]]),s&&c.length>1&&(qs(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${_i(c[1])}`)))}function Lw(e,t,n,r){if(Fu(e,n,r))return;const i=Bu(n,e.trump,r),s=Uu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(p=>p.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(p=>p.suit!==t);const u=(o.plot.revealed||[]).filter(p=>p.suit===t).sort((p,g)=>g.value-p.value);if(u.length===0)continue;const c=u[0],d=o.plot.revealed.findIndex(p=>p.suit===c.suit&&p.value===c.value);if(o.plot.revealed.splice(d,1),Qs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${_i(c)}`),s&&u.length>1){const p=u[1],g=o.plot.revealed.findIndex(v=>v.suit===p.suit&&v.value===p.value);o.plot.revealed.splice(g,1),Qs(e,`${p.suit}-${p.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${_i(p)}`)}}}function um(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const d of c.revealed||[])d.suit===t&&a.push({card:d,stack:c,location:"revealed"});for(const d of c.hidden||[])d.suit===t&&a.push({card:d,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const d=o.plot.hidden.findIndex(p=>p.suit===c.suit&&p.value===c.value);o.plot.hidden.splice(d,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:d,location:p}of a){const g=p==="hidden"?d.hidden:d.revealed,v=g.findIndex(S=>S.suit===c.suit&&S.value===c.value);v!==-1&&(g.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((p,g)=>g.value>p.value?g:p);if(l.some(p=>p.suit===c.suit&&p.value===c.value)){const p=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(p,1),o.plot.revealed.push(c),s.push([o,c])}else{const p=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(p){const{stack:g,location:v}=p,S=v==="hidden"?g.hidden:g.revealed,E=S.findIndex(m=>m.suit===c.suit&&m.value===c.value);E!==-1&&(S.splice(E,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function qs(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Qs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${_i(n)}`)}function zw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function $w(e,t){const n=zw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function Fw(e,t){const n=$w(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function ya(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of Ze)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>rm)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of Ze)e.workHours[o]=0;const{jobs:r,isFamine:i}=sm(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of Ze)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.trumpSelector=(e.trumpSelector+1)%e.numPlayers,e.workersDeck=om(e.players,e.jobBuckets,e.exiled,t,n),lm(e.players,e.workersDeck,e.isFamine),!1}function cm(e,t){const n=Ze.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function Cf(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function fm(e,t,n){var d,p,g;const r=e.workHours[t]||0;if((d=e.claimedJobs)==null?void 0:d.includes(t))return-10;const s=Math.max(0,40-r),o=s<20?(20-s)*2:0,l=e.players[n],c=[...((p=l.plot)==null?void 0:p.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(v=>v.suit===t).length*15;return o+c}function Bw(e,t,n){var d,p,g,v,S;const r=e.players[t],i=r.hand[n];let s=0;const o=e.currentTrick.length===0,l=(p=(d=e.currentTrick[0])==null?void 0:d[1])==null?void 0:p.suit,a=e.currentTrick.map(([,E])=>E),u=Uw(e,i,a),c=Hw(e,t);if(o){const E=fm(e,i.suit,t);s+=E*.3,i.value>=8&&i.value<=11&&(s+=5),i.suit===e.trump&&e.trickCount<2&&(s-=10)}else if(c>0&&u>.5?s+=c*u*20:c<0&&u<.5&&(s+=Math.abs(c)*(1-u)*15),i.suit!==l){const m=[...((g=r.plot)==null?void 0:g.revealed)||[],...((v=r.plot)==null?void 0:v.hidden)||[]].filter(f=>f.suit===i.suit).length;(S=e.claimedJobs)!=null&&S.includes(i.suit)||(s+=m*3)}return s+=Math.random()*2,s}function Uw(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let i=n[0];for(const s of n)(s.suit===e.trump&&i.suit!==e.trump||s.suit===i.suit&&s.value>i.value)&&(i=s);return t.suit===e.trump&&i.suit!==e.trump?.8:t.suit===i.suit&&t.value>i.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function Hw(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,s])=>s.suit))];for(const s of r){const o=fm(e,s,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function Ww(e,t,n){var d,p;let r=0;const i=e.players[n],s=i.hand||[],o=s.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=s.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((d=i.plot)==null?void 0:d.revealed)||[],...((p=i.plot)==null?void 0:p.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function Vw(e,t,n){var s,o,l,a,u,c,d;const r=[],i=e.players[n];if(t.phase==="planning"&&!e.trump)for(const p of Ze){const g=Ww(e,p,n);r.push({move:"setTrump",args:[p],score:g})}else if(t.phase==="trick")for(let p=0;p<i.hand.length;p++){const g=i.hand[p],v=(o=(s=e.currentTrick[0])==null?void 0:s[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&i.hand.some(m=>m.suit===v)&&g.suit!==v)continue;const S=Bw(e,n,p);r.push({move:"playCard",args:[p],score:S})}else if(t.phase==="assignment"&&n===e.lastWinner){const p=[...new Set(e.lastTrick.map(([,_])=>_.suit))],g=e.players[n],v=[...((l=g.plot)==null?void 0:l.revealed)||[],...((a=g.plot)==null?void 0:a.hidden)||[]],S=e.lastTrick.reduce((_,[,j])=>{var F;return _+Cf(j,e.trump,(F=e.variants)==null?void 0:F.nomenclature)},0);let E=p[0],m=-1/0;for(const _ of p){const j=e.workHours[_]||0;if((u=e.claimedJobs)==null?void 0:u.includes(_)){m<0&&(m=0,E=_);continue}const M=j+S;let $=0;M>=40?($+=200,$-=(M-40)*2):($+=M,M>=30?$+=30:M>=20&&($+=15));const J=v.filter(re=>re.suit===_).length;$+=J*20,$>m&&(m=$,E=_)}let f=0;const y={};for(const[,_]of e.lastTrick){const j=Cf(_,e.trump,(c=e.variants)==null?void 0:c.nomenclature);let F=_.suit,M=-1/0;for(const $ of p){const J=e.workHours[$]||0,re=(d=e.claimedJobs)==null?void 0:d.includes($);let Q=0;if(re)Q=0;else{const V=J+j;V>=40?Q+=150:(Q+=V*.5,V>=30&&(Q+=15));const q=v.filter(G=>G.suit===$).length;Q+=q*10}Q>M&&(M=Q,F=$)}y[`${_.suit}-${_.value}`]=F,f+=M}const k=e.pendingAssignments||{};let N;if(m>=f){N={};for(const[,_]of e.lastTrick)N[`${_.suit}-${_.value}`]=E}else N=y;let T=!1;for(const[_,j]of Object.entries(N))k[_]!==j&&(T=!0,r.push({move:"assignCard",args:[_,j],score:100}));T||r.push({move:"submitAssignments",args:[],score:100})}else t.phase;return r.sort((p,g)=>g.score-p.score),r}function Pf(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function Yw({ctx:e,random:t},n){const r={...im,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...Cw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Pf(0,!0,""));else{const d=Math.floor(t.Number()*s.length),p=s.splice(d,1)[0];o.push(Pf(c,!1,p))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:Ow(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1,trumpSelector:Math.floor(t.Number()*i)};for(const c of Ze)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=sm(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=om(l.players,l.jobBuckets,l.exiled,r,t),lm(l.players,l.workersDeck,l.isFamine),l}function Kw({G:e,random:t},n){n&&Ze.includes(n)?e.trump=n:cm(e,t)}function Jw({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!Tw(e,i,r))return vn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function Qw({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function qw({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return vn;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return vn;if(am(e,e.pendingAssignments,e.variants),e.pendingAssignments={},pa(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),ma(e,e.variants),ya(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function Xw({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return vn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return vn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function Zw({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const Gw={name:"kolkhoz",setup:Yw,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:Kw},turn:{order:{first:({G:e})=>e.trumpSelector,next:()=>{}}},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"trumpSelector:",e.trumpSelector,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&cm(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:Jw},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=jw(e);if(n!==null){Aw(e,n);const r=Dw(e.lastTrick);if(r?(am(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&pa(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),ma(e,e.variants),ya(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=pa(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:Qw,submitAssignments:qw},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),ma(e,e.variants),ya(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:Xw,confirmSwap:Zw},turn:{order:{first:()=>0,next:()=>{}}},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return Fw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),i=Vw(e,t,r);return i.slice(0,Math.min(3,i.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function Dn(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function e1(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function ut({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,d=s?"assets/cards/back.svg":Dn(e);return t!==0||n!==0?h.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[h.jsx("image",{href:d,width:r,height:c,x:-r/2,y:-c/2}),l&&h.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#d4a857",strokeWidth:"3",rx:"8"})]}):h.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:h.jsx("img",{src:d,alt:s?"Card back":`${e1(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function t1({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s}){return!e||e.length===0?h.jsx("div",{className:"hand empty",children:"No cards in hand"}):h.jsx("div",{className:"hand",children:e.map((o,l)=>{const a=!s||s.includes(l);return h.jsx("div",{className:`hand-card ${a&&n?"playable":""} ${a?"":"invalid"}`,style:{zIndex:l},onClick:()=>{n&&a&&t(l)},children:h.jsx(ut,{card:o,width:130,highlight:a&&n,dimmed:!a&&n})},`${o.suit}-${o.value}-${l}`)})})}const Nf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function n1({player:e,position:t,isActive:n,isBrigadeLeader:r,playerIndex:i,scale:s=1,isHuman:o=!1}){var O,L,B,te;const{x:l,y:a}=t,u=((O=e.hand)==null?void 0:O.length)||0,c=((L=e.plot)==null?void 0:L.revealed)||[],d=((te=(B=e.plot)==null?void 0:B.hidden)==null?void 0:te.length)||0,p=c.reduce((X,ve)=>X+ve.value,0)+d,g=46*s,v=g*1.4,S=26*s,E=52*s,m=8*s,f=6*s;if(o){const X=235*s,ve=130*s,Le=l-X/2,Ve=a-ve/2,ce=c.length+d,gt=ce>0?(Math.min(4,ce)-1)*S+g:0,_n=l-gt/2,w=a-v/2+10*s;return h.jsxs("g",{className:"player-area human-plot",children:[h.jsx("rect",{x:Le,y:Ve,width:X,height:ve,fill:"none",stroke:"#d4a857",strokeWidth:2*s,strokeDasharray:`${6*s},${4*s}`,rx:4*s}),h.jsx("text",{x:Le+8*s,y:Ve+16*s,textAnchor:"start",fill:"#d4a857",fontSize:11*s,fontFamily:"'Oswald', sans-serif",children:""}),c.map((x,C)=>h.jsx("image",{href:Dn(x),x:_n+C*S,y:w,width:g,height:v},`plot-${C}`)),Array.from({length:d}).map((x,C)=>h.jsx("image",{href:"assets/cards/back.svg",x:_n+(c.length+C)*S,y:w,width:g,height:v,opacity:.7},`hidden-${C}`))]})}const y=235*s,k=130*s,N=l-y/2,T=a-k/2,_=T+m,j=_+E/2,F=_+E+f,$=N+m,J=$+E+6*s,re=65*s,Q=J+re,V=Q+6*s,q=Math.min(4,u)*S+g-S,G=l-q/2;return h.jsxs("g",{className:`player-area ${n?"active":""}`,children:[h.jsx("rect",{x:N,y:T,width:y,height:k,fill:n?"rgba(196, 30, 58, 0.25)":"rgba(20,20,20,0.9)",stroke:n?"#d4a857":"#444",strokeWidth:n?2:1,rx:4*s}),h.jsx("image",{href:Nf[(i-1)%Nf.length],x:$,y:_,width:E,height:E,style:{imageRendering:"pixelated"}}),h.jsxs("text",{x:J,y:j-6*s,textAnchor:"start",fill:n?"#d4a857":"#e8dcc4",fontSize:12*s,fontWeight:n?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[e.name,r&&" "]}),h.jsx("text",{x:J,y:j+10*s,textAnchor:"start",fill:p>0?"#c41e3a":"#888",fontSize:11*s,fontFamily:"'Oswald', sans-serif",children:p>0?`${p} pts`:`${u} cards`}),h.jsx("line",{x1:Q,y1:_+4*s,x2:Q,y2:_+E-4*s,stroke:"#555",strokeWidth:1}),c.slice(0,2).map((X,ve)=>h.jsx("image",{href:Dn(X),x:V+ve*S,y:_+(E-v)/2,width:g,height:v},`plot-${ve}`)),c.length===0&&d>0&&h.jsx("image",{href:"assets/cards/back.svg",x:V,y:_+(E-v)/2,width:g,height:v,opacity:.5}),Array.from({length:Math.min(4,u)}).map((X,ve)=>h.jsx("image",{href:"assets/cards/back.svg",x:G+ve*S,y:F,width:g,height:v},`hand-${ve}`)),u>4&&h.jsxs("text",{x:G+4*S+g/2,y:F+v/2,textAnchor:"middle",fill:"#888",fontSize:9*s,children:["+",u-4]})]})}function r1({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450,scale:s=1,year:o,trump:l,phase:a,isMyTurn:u,currentPlayerName:c,showInfo:d=!1,players:p,currentPlayer:g,brigadeLeader:v}){const S={Hearts:"",Diamonds:"",Clubs:"",Spades:""},E=1100*s,m=540*s,f=220*s,y=f*1.4,k=265*s,N=85*s,T=V=>{const G=[3,0,1,2][V];return{x:-1.5*k+G*k,y:N}},_=6*s,j=10*s,F=6*s,M=i-m/2+38*s,$=24*s,J=20*s,re=r-E/2+20*s,Q=r+E/2-20*s;return h.jsxs("g",{className:"trick-area",children:[h.jsx("rect",{x:r-E/2,y:i-m/2,width:E,height:m,fill:"#1a1a1a",stroke:"#d4a857",strokeWidth:3*s,rx:j}),h.jsx("rect",{x:r-E/2+_,y:i-m/2+_,width:E-_*2,height:m-_*2,fill:"none",stroke:"#8b0000",strokeWidth:2*s,rx:F}),h.jsxs("g",{className:"trick-info-bar",children:[d?h.jsxs(h.Fragment,{children:[h.jsxs("text",{x:re,y:M,textAnchor:"start",fill:"#d4a857",fontSize:$,fontFamily:"'Oswald', sans-serif",children:[h.jsxs("title",{children:["Year ",o," of 5"]})," ",o,"/5"]}),h.jsxs("text",{x:re+100*s,y:M,textAnchor:"start",fill:"#888",fontSize:$,fontFamily:"'Oswald', sans-serif",children:[h.jsx("title",{children:"Trump suit"}),":"]}),h.jsx("text",{x:re+175*s,y:M,textAnchor:"start",fill:l==="Hearts"||l==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:J,fontFamily:"'Oswald', sans-serif",children:l?S[l]:"?"})]}):null,e.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("text",{x:r-30*s,y:M,textAnchor:"end",fill:"#888",fontSize:$,fontFamily:"'Oswald', sans-serif",children:[h.jsx("title",{children:"Lead suit"}),":"]}),h.jsx("text",{x:r-22*s,y:M,textAnchor:"start",fill:e[0][1].suit==="Hearts"||e[0][1].suit==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:J,children:S[e[0][1].suit]})]}),d&&h.jsxs("text",{x:Q,y:M,textAnchor:"end",fill:u?"#4CAF50":"#e8dcc4",fontSize:$,fontWeight:u?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[h.jsx("title",{children:u?"Your turn":`${c}'s turn`}),u?" ":c]})]}),Array.from({length:t}).map((V,q)=>{if(e.some(([L])=>L===q))return null;const O=T(q);return h.jsx("rect",{x:r+O.x-f/2,y:i+O.y-y/2,width:f,height:y,fill:"none",stroke:"rgba(255,255,255,0.15)",strokeWidth:1*s,strokeDasharray:`${4*s},${4*s}`,rx:4*s},`slot-${q}`)}),e.map(([V,q],G)=>{const O=T(V);return h.jsx(ut,{card:q,x:r+O.x,y:i+O.y,width:f},`${q.suit}-${q.value}`)}),p&&[0,1,2,3].map(V=>{const q=T(V),G=i-m/2+115*s;return h.jsx(n1,{player:p[V],position:{x:r+q.x,y:G},isActive:g===V,isBrigadeLeader:v===V,playerIndex:V,scale:s,isHuman:V===0},`player-${V}`)})]})}function i1({revealedJobs:e,workHours:t,jobBuckets:n,claimedJobs:r,trump:i,phase:s,pendingAssignments:o,onAssign:l,lastTrick:a}){const S=f=>f==="Hearts"||f==="Diamonds"?"#c41e3a":"#e8dcc4",E=f=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[f],m=f=>({11:{russian:"",english:"Jack (Drunkard)",power:"Worth 0 work hours. Gets exiled instead of player cards"},12:{russian:"",english:"Queen (Informant)",power:"All players become vulnerable to requisition"},13:{russian:"",english:"King (Party Official)",power:"Exiles two cards instead of one"}})[f]||null;return h.jsx("g",{className:"job-piles-area",children:Ze.map((f,y)=>{const k=20+y*130,N=(t==null?void 0:t[f])||0,T=r==null?void 0:r.includes(f),_=f===i,j=(n==null?void 0:n[f])||[],F=e==null?void 0:e[f],M=Array.isArray(F)?F:F?[F]:[],$=60,J=170,re=J+98+30;return h.jsxs("g",{className:`job-pile ${T?"claimed":""}`,children:[h.jsx("rect",{x:k-65,y:$,width:130,height:100,fill:_?"rgba(255,215,0,0.12)":"rgba(0,0,0,0.5)",stroke:_?"#FFD700":"#444",strokeWidth:_?2:1,rx:"6"}),_&&h.jsxs("text",{x:k,y:$+20,textAnchor:"middle",fill:"#FFD700",fontSize:"16",fontWeight:"bold",children:[h.jsx("title",{children:"Trump suit"}),""]}),h.jsx("text",{x:k,y:$+(_?50:42),textAnchor:"middle",fill:S(f),fontSize:"32",children:E(f)}),h.jsxs("g",{style:{cursor:"help"},children:[h.jsx("title",{children:Nw[f]}),h.jsx("text",{x:k,y:$+(_?70:64),textAnchor:"middle",fill:"#ccc",fontSize:"16",fontWeight:"600",pointerEvents:"all",children:Pw[f]})]}),h.jsx("rect",{x:k-55,y:$+82,width:110,height:14,fill:"#222",rx:"7"}),h.jsx("rect",{x:k-55,y:$+82,width:Math.min(110,N/rr*110),height:14,fill:T||N>=rr?"#4CAF50":"#2196F3",rx:"7"}),h.jsxs("text",{x:k,y:$+93,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"bold",children:[h.jsx("title",{children:T?"Done":`${N} of ${rr} work hours`}),T?" ":`${N}/${rr}`]}),T?h.jsx(ut,{card:{},faceDown:!0,x:k,y:J+98/2,width:70}):M.map((Q,V)=>{const q=m(Q.value),G=Q.suit===i&&q,O=M.length>1?(V-(M.length-1)/2)*15:0;return h.jsxs("g",{children:[h.jsx(ut,{card:Q,x:k+O,y:J+98/2,width:70}),G&&h.jsxs("g",{style:{cursor:"help"},children:[h.jsxs("title",{children:[q.english,": ",q.power]}),h.jsx("text",{x:k+O,y:J+98+22,textAnchor:"middle",fill:"#FFD700",fontSize:"14",fontWeight:"600",pointerEvents:"all",children:q.russian})]})]},`reward-${V}`)}),j.length>0&&h.jsxs("text",{x:k,y:re-8,textAnchor:"middle",fill:"#999",fontSize:"13",fontWeight:"500",children:[j.length," assigned"]}),j.map((Q,V)=>{const q=re+49+V*22;return h.jsx("g",{children:h.jsx(ut,{card:Q,x:k,y:q,width:70})},`assigned-${V}`)}),(()=>{const Q=j.map((G,O)=>({card:G,idx:O,info:m(G.value)})).filter(({card:G,info:O})=>G.suit===i&&O);if(Q.length===0)return null;const q=re+98/2+(j.length-1)*22+98/2+12;return Q.map(({info:G},O)=>h.jsxs("g",{style:{cursor:"help"},children:[h.jsxs("title",{children:[G.english,": ",G.power]}),h.jsx("text",{x:k,y:q+O*16,textAnchor:"middle",fill:"#FFD700",fontSize:"13",fontWeight:"600",pointerEvents:"all",children:G.russian})]},`label-${O}`))})()]},f)})})}function s1({exiled:e,currentYear:t}){const o=S=>{const[E,m]=S.split("-");return{suit:E,value:parseInt(m,10)}},l=Object.values(e||{}).flat().length,a=32,u=[58,175,292],c=a+145,d=[116,233],p=50,g=22,v=(S,E,m)=>{const f=(e==null?void 0:e[S])||[],y=S<t,k=S===t;return h.jsxs("g",{className:"gulag-year",children:[h.jsx("rect",{x:E-p/2,y:m,width:p,height:g,fill:k?"rgba(196,30,58,0.35)":"rgba(30,30,30,0.9)",stroke:k?"#c41e3a":"#3a3a3a",strokeWidth:k?2:1}),h.jsx("text",{x:E,y:m+15,textAnchor:"middle",fill:y?"#5a5a5a":k?"#ff4757":"#888",fontSize:"12",fontWeight:k?"bold":"normal",fontFamily:"monospace",children:S}),f.map((N,T)=>{const _=o(N),j=m+g+8+T*16,F=Dn(_);return h.jsx("image",{href:F,x:E-55/2,y:j,width:55,height:77},T)}),f.length===0&&y&&h.jsx("rect",{x:E-55/2,y:m+g+8,width:55,height:77,fill:"none",stroke:"#2a2a2a",strokeWidth:1,strokeDasharray:"4,4",rx:"3"}),f.length>0&&h.jsxs("g",{children:[h.jsx("circle",{cx:E+55/2,cy:m+g+14,r:9,fill:"#c41e3a"}),h.jsx("text",{x:E+55/2,y:m+g+18,textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:f.length})]})]},S)};return h.jsxs("g",{className:"gulag-area",children:[h.jsxs("text",{x:175,y:4,textAnchor:"middle",fill:"#c41e3a",fontSize:"14",fontWeight:"bold",letterSpacing:"0.2em",fontFamily:"monospace",children:[h.jsx("title",{children:"The North (Gulag)"}),""]}),l>0&&h.jsxs("text",{x:175,y:20,textAnchor:"middle",fill:"#555",fontSize:"10",fontFamily:"monospace",children:[h.jsxs("title",{children:[l," exiled"]}),"[",l," ]"]}),v(1,u[0],a),v(2,u[1],a),v(3,u[2],a),v(4,d[0],c),v(5,d[1],c)]})}function o1({year:e,trump:t,phase:n,currentPlayer:r,players:i,isMyTurn:s,exiled:o}){var p,g;const u=v=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[v]||v,c=v=>v==="Hearts"||v==="Diamonds"?"#c41e3a":"#e8dcc4",d=v=>({planning:{ru:"",en:"Select Trump"},trick:{ru:"",en:"Trick Phase"},assignment:{ru:"",en:"Assign Cards"},plotSelection:{ru:" ",en:"Select Plot Card"},requisition:{ru:"",en:"Requisition"},swap:{ru:"",en:"Swap Cards"}})[v]||{ru:v,en:v};return h.jsxs("g",{className:"right-sidebar",children:[h.jsx("rect",{x:1540,y:120,width:360,height:180,fill:"rgba(20,20,20,0.9)",stroke:"#d4a857",strokeWidth:1,rx:"10"}),h.jsxs("text",{x:1560,y:150,fill:"#a09080",fontSize:"11",children:[h.jsx("title",{children:"Year"}),""]}),h.jsxs("text",{x:1560,y:170,fill:"#d4a857",fontSize:"18",fontWeight:"bold",children:[e,"/5"]}),h.jsxs("text",{x:1640,y:150,fill:"#a09080",fontSize:"11",children:[h.jsx("title",{children:"Trump suit (Main task)"}),""]}),t?h.jsxs("text",{x:1640,y:170,fill:c(t),fontSize:"18",fontWeight:"bold",children:[u(t)," ",t]}):h.jsxs("text",{x:1640,y:170,fill:"#a09080",fontSize:"14",children:[h.jsx("title",{children:"Not selected"})," "]}),h.jsxs("text",{x:1560,y:205,fill:"#a09080",fontSize:"11",children:[h.jsx("title",{children:"Phase"}),""]}),h.jsxs("text",{x:1560,y:225,fill:"#e8dcc4",fontSize:"14",children:[h.jsx("title",{children:d(n).en}),d(n).ru]}),h.jsxs("text",{x:1560,y:255,fill:"#a09080",fontSize:"11",children:[h.jsx("title",{children:"Turn"}),""]}),s?h.jsxs("text",{x:1560,y:275,fill:"#d4a857",fontSize:"14",fontWeight:"bold",children:[h.jsx("title",{children:"Your Turn!"})," !"]}):h.jsxs("text",{x:1560,y:275,fill:"#a09080",fontSize:"12",children:[h.jsxs("title",{children:["Waiting for ",(p=i[parseInt(r,10)])==null?void 0:p.name,"..."]})," ",(g=i[parseInt(r,10)])==null?void 0:g.name,"..."]}),h.jsx("g",{transform:"translate(1545, 315)",children:h.jsx(s1,{exiled:o,currentYear:e})})]})}function l1({G:e,ctx:t,moves:n,playerID:r}){var X,ve,Le,Ve,ce,gt,_n,w,x,C,U,z,b,se;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=Oe.useState(null),[u,c]=Oe.useState(null),[d,p]=Oe.useState(null),[g,v]=Oe.useState(null),[S,E]=Oe.useState(null),m=A=>E(S===A?null:A),[f,y]=Oe.useState(!1),k=Oe.useRef(e.year),[N,T]=Oe.useState(window.innerWidth);Oe.useEffect(()=>{const A=()=>T(window.innerWidth);return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const _=N>1024,j=_?350:0,F=_?1570:1920,J=(F-j)/1220;Oe.useEffect(()=>{e.year!==k.current&&(y(!1),k.current=e.year)},[e.year]);const re=A=>{o==="trick"&&s&&n.playCard(A)},Q=A=>{o==="planning"&&n.setTrump(A)},V=(A,R)=>{n.assignCard(A,R)},q=()=>{n.submitAssignments()},G=()=>{l!==null&&u!==null&&d!==null&&(n.swapCard(u,l,d),a(null),c(null),p(null))},O=(A,R)=>{u===A&&d===R?(c(null),p(null)):(c(A),p(R))},L=()=>{y(!0),n.confirmSwap()},B=(j+F)/2,te=470;if(t.gameover){const{winner:A,scores:R}=t.gameover;return h.jsxs("div",{className:"game-over",children:[h.jsx("h1",{children:"Game Over!"}),h.jsxs("h2",{children:["Winner: ",e.players[A].name]}),h.jsx("div",{className:"final-scores",children:e.players.map((Y,ne)=>h.jsxs("div",{className:ne===A?"winner":"",children:[Y.name,": ",R[ne]," points"]},ne))}),h.jsx("p",{children:"(Lowest score wins)"})]})}return h.jsxs("div",{className:"game-board",children:[o==="planning"&&!e.trump&&h.jsxs("div",{className:"trump-selection",children:[h.jsx("h3",{title:"Select Trump Suit",children:"  "}),h.jsx("div",{className:"suit-buttons",children:Ze.map(A=>{const R={Hearts:{ru:"",en:"Hearts (Wheat)"},Diamonds:{ru:"",en:"Diamonds (Beets)"},Clubs:{ru:"",en:"Clubs (Potatoes)"},Spades:{ru:"",en:"Spades (Sunflowers)"}};return h.jsxs("button",{onClick:()=>Q(A),className:`suit-btn ${A.toLowerCase()}`,title:R[A].en,children:[Of(A)," ",R[A].ru]},A)})})]}),h.jsxs("svg",{viewBox:"0 0 1920 1080",className:"board-svg",children:[h.jsx(i1,{revealedJobs:e.revealedJobs,workHours:e.workHours,jobBuckets:e.jobBuckets,claimedJobs:e.claimedJobs,trump:e.trump,phase:o,pendingAssignments:e.pendingAssignments,onAssign:V,lastTrick:e.lastTrick}),h.jsx(r1,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:B,centerY:te,scale:J,year:e.year,trump:e.trump,phase:o,isMyTurn:s,currentPlayerName:(X=e.players[t.currentPlayer])==null?void 0:X.name,showInfo:!_,players:e.players,currentPlayer:parseInt(t.currentPlayer,10),brigadeLeader:e.players.findIndex(A=>A.brigadeLeader)}),h.jsx(o1,{year:e.year,trump:e.trump,phase:o,currentPlayer:t.currentPlayer,players:e.players,isMyTurn:s,exiled:e.exiled})]}),!_&&h.jsxs("div",{className:"mobile-nav-bar",children:[h.jsxs("button",{className:`nav-btn ${S==="options"?"active":""}`,onClick:()=>m("options"),title:"Menu",children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",children:"Menu"})]}),h.jsxs("button",{className:`nav-btn ${S===null?"active":""}`,onClick:()=>E(null),title:"Brigade (Playing Area)",children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",title:"Brigade",children:""})]}),h.jsxs("button",{className:`nav-btn ${S==="jobs"?"active":""}`,onClick:()=>m("jobs"),title:"Jobs",children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",title:"Jobs",children:""})]}),h.jsxs("button",{className:`nav-btn ${S==="gulag"?"active":""}`,onClick:()=>m("gulag"),title:"The North (Gulag)",children:[h.jsx("span",{className:"nav-icon",children:""}),h.jsx("span",{className:"nav-label",title:"The North",children:""})]})]}),!_&&S!==null&&h.jsxs("div",{className:"mobile-panel-content",children:[S==="options"&&h.jsxs("div",{className:"options-panel",children:[h.jsx("h3",{title:"Menu",children:""}),h.jsxs("div",{className:"menu-options",children:[h.jsxs("div",{className:"rules-section",children:[h.jsx("h4",{children:"Kolkhoz Rules"}),h.jsxs("div",{className:"rules-text",children:[h.jsx("h5",{children:"Objective"}),h.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),h.jsx("h5",{children:"Gameplay"}),h.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),h.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),h.jsx("p",{children:" Jobs need 40 work hours to complete"}),h.jsx("h5",{children:"Trump Face Cards"}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]})]})]}),h.jsx("button",{className:"menu-btn-action",onClick:()=>window.location.reload(),children:" New Game"})]})]}),S==="jobs"&&h.jsxs("div",{className:"jobs-panel",children:[h.jsxs("div",{className:"jobs-header",children:[h.jsx("h3",{title:"Jobs",children:""}),h.jsxs("span",{className:"jobs-count",children:[((ve=e.claimedJobs)==null?void 0:ve.length)||0,"/4"]})]}),h.jsx("div",{className:"jobs-grid",children:Ze.map(A=>{var Nt,Cr,Zt,Hn;const R=((Nt=e.workHours)==null?void 0:Nt[A])||0,Y=(Cr=e.claimedJobs)==null?void 0:Cr.includes(A),ne=A===e.trump,ae=((Zt=e.jobBuckets)==null?void 0:Zt[A])||[],we=(Hn=e.revealedJobs)==null?void 0:Hn[A],Pe=Array.isArray(we)?we:we?[we]:[],ye=Math.min(100,R/40*100);return h.jsxs("div",{className:`job-column ${ne?"trump":""} ${Y?"claimed":""}`,children:[h.jsxs("div",{className:"job-header-row",children:[h.jsx("span",{className:`suit-symbol ${A.toLowerCase()}`,children:Of(A)}),h.jsxs("div",{className:"progress-bar-container",children:[h.jsx("div",{className:`progress-bar-fill ${Y?"complete":""}`,style:{width:`${ye}%`}}),h.jsx("span",{className:"progress-text",children:Y?"":`${R}/40`})]})]}),h.jsxs("div",{className:"job-cards-stack",children:[Y?h.jsx("img",{src:"assets/cards/back.svg",alt:"claimed",className:"job-card"}):Pe.map((ze,Pr)=>h.jsx("img",{src:Dn(ze),alt:`${ze.value} of ${ze.suit}`,className:"job-card reward"},`reward-${Pr}`)),ae.slice(0,8).map((ze,Pr)=>h.jsx("img",{src:Dn(ze),alt:`${ze.value} of ${ze.suit}`,className:"job-card",style:{marginTop:"-40px"}},`assigned-${Pr}`)),ae.length>8&&h.jsxs("div",{className:"more-cards",children:["+",ae.length-8]})]})]},A)})})]}),S==="gulag"&&h.jsxs("div",{className:"gulag-panel",children:[h.jsxs("div",{className:"gulag-header",children:[h.jsx("h3",{title:"The North (Gulag)",children:""}),h.jsxs("span",{className:"gulag-count",children:[Object.values(e.exiled||{}).flat().length," "]})]}),h.jsx("div",{className:"gulag-grid",children:[1,2,3,4,5].map(A=>{var we;const R=((we=e.exiled)==null?void 0:we[A])||[],Y=A===e.year,ne=A<e.year,ae=Pe=>{const[ye,Nt]=Pe.split("-");return{suit:ye,value:parseInt(Nt,10)}};return h.jsxs("div",{className:`year-column ${Y?"current":""} ${ne?"past":""}`,children:[h.jsxs("div",{className:"year-header",children:[h.jsx("span",{className:"year-number",children:A}),R.length>0&&h.jsx("span",{className:"year-badge",children:R.length})]}),h.jsxs("div",{className:"year-cards",children:[R.length>0?R.slice(0,8).map((Pe,ye)=>{const Nt=ae(Pe);return h.jsx("img",{src:Dn(Nt),alt:Pe,className:"gulag-card",style:{marginTop:ye>0?"-35px":"0"}},ye)}):h.jsx("div",{className:"empty-slot"}),R.length>8&&h.jsxs("div",{className:"more-cards",children:["+",R.length-8]})]})]},A)})})]})]}),h.jsx(t1,{cards:((Le=e.players[i])==null?void 0:Le.hand)||[],onPlayCard:re,canPlay:o==="trick"&&s,leadSuit:(ce=(Ve=e.currentTrick[0])==null?void 0:Ve[1])==null?void 0:ce.suit,trump:e.trump,validIndices:a1(e,i,o)}),o==="assignment"&&e.lastWinner===i&&(()=>{const A=[...new Set(e.lastTrick.map(([,R])=>R.suit))];return h.jsxs("div",{className:"assignment-ui",children:[h.jsx("h3",{children:"Assign cards to jobs"}),h.jsx("p",{children:"Assign each card to a job from this trick"}),h.jsx("div",{className:"assignment-cards",children:e.lastTrick.map(([R,Y],ne)=>{var Pe;const ae=`${Y.suit}-${Y.value}`,we=(Pe=e.pendingAssignments)==null?void 0:Pe[ae];return h.jsxs("div",{className:"assignment-card",children:[h.jsx(ut,{card:Y,width:80}),h.jsx("select",{value:we||Y.suit,onChange:ye=>V(ae,ye.target.value),children:A.map(ye=>h.jsx("option",{value:ye,children:ye},ye))})]},ne)})}),h.jsx("button",{onClick:q,disabled:Object.keys(e.pendingAssignments||{}).length!==e.lastTrick.length,children:"Submit Assignments"})]})})(),o==="swap"&&!((gt=e.swapConfirmed)!=null&&gt[i])&&!f&&h.jsxs("div",{className:"swap-ui",children:[h.jsxs("h3",{children:["Swap Cards (Year ",e.year,")"]}),h.jsx("p",{children:"Select a card from your hand and one from your plot to swap, or skip"}),h.jsxs("div",{className:"swap-section",children:[h.jsx("h4",{children:"Your Hand"}),h.jsx("div",{className:"swap-cards",children:(_n=e.players[i])==null?void 0:_n.hand.map((A,R)=>h.jsx("div",{className:`swap-card ${l===R?"selected":""}`,onClick:()=>a(l===R?null:R),children:h.jsx(ut,{card:A,width:80})},`hand-${R}`))})]}),((w=e.players[i])==null?void 0:w.plot.revealed.length)>0&&h.jsxs("div",{className:"swap-section",children:[h.jsx("h4",{children:"Your Revealed Cards (Rewards)"}),h.jsx("div",{className:"swap-cards",children:(x=e.players[i])==null?void 0:x.plot.revealed.map((A,R)=>h.jsx("div",{className:`swap-card ${u===R&&d==="revealed"?"selected":""}`,onClick:()=>O(R,"revealed"),children:h.jsx(ut,{card:A,width:80})},`revealed-${R}`))})]}),((C=e.players[i])==null?void 0:C.plot.hidden.length)>0&&h.jsxs("div",{className:"swap-section",children:[h.jsx("h4",{children:"Your Hidden Plot"}),h.jsx("div",{className:"swap-cards",children:(U=e.players[i])==null?void 0:U.plot.hidden.map((A,R)=>h.jsx("div",{className:`swap-card ${u===R&&d==="hidden"?"selected":""}`,onClick:()=>O(R,"hidden"),children:h.jsx(ut,{card:A,width:80})},`hidden-${R}`))})]}),h.jsxs("div",{className:"swap-buttons",children:[h.jsx("button",{onClick:G,disabled:l===null||u===null||d===null,children:"Swap Selected Cards"}),h.jsx("button",{onClick:L,children:"Done Swapping"})]})]}),o==="swap"&&(((z=e.swapConfirmed)==null?void 0:z[i])||f)&&h.jsx("div",{className:"swap-ui",children:h.jsx("h3",{children:"Waiting for other players..."})}),h.jsxs("div",{className:"player-plot",children:[h.jsx("h4",{title:"Your Plot (Cellar)",children:""}),h.jsxs("div",{className:"plot-cards",children:[(b=e.players[i])==null?void 0:b.plot.revealed.map((A,R)=>h.jsx(ut,{card:A,width:60},`r-${R}`)),(se=e.players[i])==null?void 0:se.plot.hidden.map((A,R)=>h.jsxs("div",{className:`hidden-plot-card ${g===R?"revealed":""}`,title:"Tap to reveal",onClick:()=>v(g===R?null:R),children:[h.jsx(ut,{card:A,width:60,faceDown:!0,className:"card-back"}),h.jsx(ut,{card:A,width:60,className:"card-front"})]},`h-${R}`))]})]})]})}function Of(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function a1(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function u1(){const[e,t]=Oe.useState(!1),[n,r]=Oe.useState({...im}),i=Oe.useMemo(()=>e?em({game:Gw,board:l1,numPlayers:4,multiplayer:Gp({bots:{1:ds,2:ds,3:ds}}),debug:!1}):null,[e]),[s,o]=Oe.useState(!1);return e?h.jsx(i,{playerID:"0",setupData:{variants:n}}):h.jsxs("div",{className:"lobby",children:[h.jsxs("div",{className:"lobby-left",children:[h.jsxs("div",{className:"lobby-title",children:[h.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),h.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""})]}),h.jsxs("div",{className:"lobby-buttons",children:[h.jsx("button",{className:"start-btn",onClick:()=>t(!0),children:"Start Game"}),h.jsx("button",{className:`rules-btn ${s?"active":""}`,onClick:()=>o(!s),children:s?"Options":"Rules"})]})]}),h.jsx("div",{className:"lobby-right-panel",children:s?h.jsxs("div",{className:"rules-panel",children:[h.jsx("h3",{children:"Kolkhoz Rules"}),h.jsxs("div",{className:"rules-text",children:[h.jsx("h4",{children:"Objective"}),h.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),h.jsx("h4",{children:"Gameplay"}),h.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),h.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),h.jsx("p",{children:" Jobs need 40 work hours to complete"}),h.jsx("h4",{children:"Trump Face Cards"}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Jack ()"}),": Worth 0, gets exiled instead of your cards"]}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),h.jsxs("p",{children:[" ",h.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),h.jsx("h4",{children:"Scoring"}),h.jsx("p",{children:"Cards in your plot = penalty points. Lowest score wins!"})]})]}):h.jsxs("div",{className:"variant-options",children:[h.jsx("h3",{children:"Deck Type"}),h.jsxs("label",{children:[h.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),h.jsxs("label",{children:[h.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),h.jsx("h3",{children:"Variant Rules"}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:l=>r({...n,nomenclature:l.target.checked})}),h.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects"]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:l=>r({...n,allowSwap:l.target.checked})}),h.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:l=>r({...n,northernStyle:l.target.checked})}),h.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - No job rewards, all vulnerable"]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:l=>r({...n,miceVariant:l.target.checked})}),h.jsx("strong",{title:"Myshi - Mice",children:""})," - All reveal during requisition"]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:l=>r({...n,ordenNachalniku:l.target.checked})}),h.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards on job complete"]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:l=>r({...n,medalsCount:l.target.checked})}),h.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins add to score"]}),n.deckType===52&&h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:l=>r({...n,accumulateJobs:l.target.checked})}),h.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Job rewards carry over"]})]})})]})}const c1=Uh(document.getElementById("root"));c1.render(h.jsx(u1,{}));
