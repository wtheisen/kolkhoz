(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tf={exports:{}},Ks={},jf={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=Symbol.for("react.element"),pm=Symbol.for("react.portal"),mm=Symbol.for("react.fragment"),ym=Symbol.for("react.strict_mode"),gm=Symbol.for("react.profiler"),vm=Symbol.for("react.provider"),wm=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),km=Symbol.for("react.suspense"),xm=Symbol.for("react.memo"),_m=Symbol.for("react.lazy"),Bu=Symbol.iterator;function Em(e){return e===null||typeof e!="object"?null:(e=Bu&&e[Bu]||e["@@iterator"],typeof e=="function"?e:null)}var Af={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},If=Object.assign,Mf={};function mr(e,t,n){this.props=e,this.context=t,this.refs=Mf,this.updater=n||Af}mr.prototype.isReactComponent={};mr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Df(){}Df.prototype=mr.prototype;function pa(e,t,n){this.props=e,this.context=t,this.refs=Mf,this.updater=n||Af}var ma=pa.prototype=new Df;ma.constructor=pa;If(ma,mr.prototype);ma.isPureReactComponent=!0;var Uu=Array.isArray,Rf=Object.prototype.hasOwnProperty,ya={current:null},Lf={key:!0,ref:!0,__self:!0,__source:!0};function bf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Rf.call(t,r)&&!Lf.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:wi,type:e,key:s,ref:o,props:i,_owner:ya.current}}function Cm(e,t){return{$$typeof:wi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ga(e){return typeof e=="object"&&e!==null&&e.$$typeof===wi}function Pm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hu=/\/+/g;function So(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pm(""+e.key):t.toString(36)}function qi(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wi:case pm:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+So(o,0):r,Uu(i)?(n="",e!=null&&(n=e.replace(Hu,"$&/")+"/"),qi(i,t,n,"",function(u){return u})):i!=null&&(ga(i)&&(i=Cm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Uu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+So(s,l);o+=qi(s,t,n,a,i)}else if(a=Em(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+So(s,l++),o+=qi(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ci(e,t,n){if(e==null)return e;var r=[],i=0;return qi(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Nm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ue={current:null},Ji={transition:null},Om={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:Ji,ReactCurrentOwner:ya};function $f(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Ci,forEach:function(e,t,n){Ci(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ci(e,function(){t++}),t},toArray:function(e){return Ci(e,function(t){return t})||[]},only:function(e){if(!ga(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=mr;X.Fragment=mm;X.Profiler=gm;X.PureComponent=pa;X.StrictMode=ym;X.Suspense=km;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Om;X.act=$f;X.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=If({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ya.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Rf.call(t,a)&&!Lf.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:wi,type:e.type,key:i,ref:s,props:r,_owner:o}};X.createContext=function(e){return e={$$typeof:wm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vm,_context:e},e.Consumer=e};X.createElement=bf;X.createFactory=function(e){var t=bf.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:Sm,render:e}};X.isValidElement=ga;X.lazy=function(e){return{$$typeof:_m,_payload:{_status:-1,_result:e},_init:Nm}};X.memo=function(e,t){return{$$typeof:xm,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=Ji.transition;Ji.transition={};try{e()}finally{Ji.transition=t}};X.unstable_act=$f;X.useCallback=function(e,t){return Ue.current.useCallback(e,t)};X.useContext=function(e){return Ue.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Ue.current.useDeferredValue(e)};X.useEffect=function(e,t){return Ue.current.useEffect(e,t)};X.useId=function(){return Ue.current.useId()};X.useImperativeHandle=function(e,t,n){return Ue.current.useImperativeHandle(e,t,n)};X.useInsertionEffect=function(e,t){return Ue.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Ue.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Ue.current.useMemo(e,t)};X.useReducer=function(e,t,n){return Ue.current.useReducer(e,t,n)};X.useRef=function(e){return Ue.current.useRef(e)};X.useState=function(e){return Ue.current.useState(e)};X.useSyncExternalStore=function(e,t,n){return Ue.current.useSyncExternalStore(e,t,n)};X.useTransition=function(){return Ue.current.useTransition()};X.version="18.3.1";jf.exports=X;var ee=jf.exports;const U=Of(ee);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=ee,jm=Symbol.for("react.element"),Am=Symbol.for("react.fragment"),Im=Object.prototype.hasOwnProperty,Mm=Tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dm={key:!0,ref:!0,__self:!0,__source:!0};function zf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Im.call(t,r)&&!Dm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:jm,type:e,key:s,ref:o,props:i,_owner:Mm.current}}Ks.Fragment=Am;Ks.jsx=zf;Ks.jsxs=zf;Tf.exports=Ks;var p=Tf.exports,Ff={exports:{}},st={},Bf={exports:{}},Uf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,z){var F=I.length;I.push(z);e:for(;0<F;){var G=F-1>>>1,D=I[G];if(0<i(D,z))I[G]=z,I[F]=D,F=G;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var z=I[0],F=I.pop();if(F!==z){I[0]=F;e:for(var G=0,D=I.length,Q=D>>>1;G<Q;){var Y=2*(G+1)-1,M=I[Y],H=Y+1,J=I[H];if(0>i(M,F))H<D&&0>i(J,M)?(I[G]=J,I[H]=F,G=H):(I[G]=M,I[Y]=F,G=Y);else if(H<D&&0>i(J,F))I[G]=J,I[H]=F,G=H;else break e}}return z}function i(I,z){var F=I.sortIndex-z.sortIndex;return F!==0?F:I.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,f=null,d=3,g=!1,v=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=I)r(u),z.sortIndex=z.expirationTime,t(a,z);else break;z=n(u)}}function x(I){if(S=!1,y(I),!v)if(n(a)!==null)v=!0,Ce(E);else{var z=n(u);z!==null&&ie(x,z.startTime-I)}}function E(I,z){v=!1,S&&(S=!1,m(N),N=-1),g=!0;var F=d;try{for(y(z),f=n(a);f!==null&&(!(f.expirationTime>z)||I&&!R());){var G=f.callback;if(typeof G=="function"){f.callback=null,d=f.priorityLevel;var D=G(f.expirationTime<=z);z=e.unstable_now(),typeof D=="function"?f.callback=D:f===n(a)&&r(a),y(z)}else r(a);f=n(a)}if(f!==null)var Q=!0;else{var Y=n(u);Y!==null&&ie(x,Y.startTime-z),Q=!1}return Q}finally{f=null,d=F,g=!1}}var O=!1,_=null,N=-1,A=5,C=-1;function R(){return!(e.unstable_now()-C<A)}function $(){if(_!==null){var I=e.unstable_now();C=I;var z=!0;try{z=_(!0,I)}finally{z?K():(O=!1,_=null)}}else O=!1}var K;if(typeof h=="function")K=function(){h($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,le=W.port2;W.port1.onmessage=$,K=function(){le.postMessage(null)}}else K=function(){T($,0)};function Ce(I){_=I,O||(O=!0,K())}function ie(I,z){N=T(function(){I(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,Ce(E))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(I){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var F=d;d=z;try{return I()}finally{d=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=d;d=I;try{return z()}finally{d=F}},e.unstable_scheduleCallback=function(I,z,F){var G=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?G+F:G):F=G,I){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=F+D,I={id:c++,callback:z,priorityLevel:I,startTime:F,expirationTime:D,sortIndex:-1},F>G?(I.sortIndex=F,t(u,I),n(a)===null&&I===n(u)&&(S?(m(N),N=-1):S=!0,ie(x,F-G))):(I.sortIndex=D,t(a,I),v||g||(v=!0,Ce(E))),I},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(I){var z=d;return function(){var F=d;d=z;try{return I.apply(this,arguments)}finally{d=F}}}})(Uf);Bf.exports=Uf;var Rm=Bf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=ee,nt=Rm;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hf=new Set,Jr={};function zn(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(Jr[e]=t,e=0;e<t.length;e++)Hf.add(t[e])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=Object.prototype.hasOwnProperty,bm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vu={},Wu={};function $m(e){return rl.call(Wu,e)?!0:rl.call(Vu,e)?!1:bm.test(e)?Wu[e]=!0:(Vu[e]=!0,!1)}function zm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fm(e,t,n,r){if(t===null||typeof t>"u"||zm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function He(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new He(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new He(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new He(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new He(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new He(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new He(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new He(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new He(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new He(e,5,!1,e.toLowerCase(),null,!1,!1)});var va=/[\-:]([a-z])/g;function wa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(va,wa);Ae[t]=new He(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(va,wa);Ae[t]=new He(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(va,wa);Ae[t]=new He(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new He(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new He(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sa(e,t,n,r){var i=Ae.hasOwnProperty(t)?Ae[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fm(t,n,i,r)&&(n=null),r||i===null?$m(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yt=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pi=Symbol.for("react.element"),Un=Symbol.for("react.portal"),Hn=Symbol.for("react.fragment"),ka=Symbol.for("react.strict_mode"),il=Symbol.for("react.profiler"),Vf=Symbol.for("react.provider"),Wf=Symbol.for("react.context"),xa=Symbol.for("react.forward_ref"),sl=Symbol.for("react.suspense"),ol=Symbol.for("react.suspense_list"),_a=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),Kf=Symbol.for("react.offscreen"),Ku=Symbol.iterator;function xr(e){return e===null||typeof e!="object"?null:(e=Ku&&e[Ku]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,ko;function Mr(e){if(ko===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ko=t&&t[1]||""}return`
`+ko+e}var xo=!1;function _o(e,t){if(!e||xo)return"";xo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{xo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mr(e):""}function Bm(e){switch(e.tag){case 5:return Mr(e.type);case 16:return Mr("Lazy");case 13:return Mr("Suspense");case 19:return Mr("SuspenseList");case 0:case 2:case 15:return e=_o(e.type,!1),e;case 11:return e=_o(e.type.render,!1),e;case 1:return e=_o(e.type,!0),e;default:return""}}function ll(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hn:return"Fragment";case Un:return"Portal";case il:return"Profiler";case ka:return"StrictMode";case sl:return"Suspense";case ol:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wf:return(e.displayName||"Context")+".Consumer";case Vf:return(e._context.displayName||"Context")+".Provider";case xa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _a:return t=e.displayName||null,t!==null?t:ll(e.type)||"Memo";case Xt:t=e._payload,e=e._init;try{return ll(e(t))}catch{}}return null}function Um(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ll(t);case 8:return t===ka?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hm(e){var t=Yf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){e._valueTracker||(e._valueTracker=Hm(e))}function Qf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Yf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function al(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=pn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qf(e,t){t=t.checked,t!=null&&Sa(e,"checked",t,!1)}function ul(e,t){qf(e,t);var n=pn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cl(e,t.type,n):t.hasOwnProperty("defaultValue")&&cl(e,t.type,pn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function cl(e,t,n){(t!=="number"||ds(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Dr=Array.isArray;function er(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+pn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function fl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(j(92));if(Dr(n)){if(1<n.length)throw Error(j(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:pn(n)}}function Jf(e,t){var n=pn(t.value),r=pn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ju(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oi,Zf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oi=Oi||document.createElement("div"),Oi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vm=["Webkit","ms","Moz","O"];Object.keys(Fr).forEach(function(e){Vm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fr[t]=Fr[e]})});function Gf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fr.hasOwnProperty(e)&&Fr[e]?(""+t).trim():t+"px"}function ed(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Gf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Wm=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hl(e,t){if(t){if(Wm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function pl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=null;function Ea(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yl=null,tr=null,nr=null;function Xu(e){if(e=xi(e)){if(typeof yl!="function")throw Error(j(280));var t=e.stateNode;t&&(t=Xs(t),yl(e.stateNode,e.type,t))}}function td(e){tr?nr?nr.push(e):nr=[e]:tr=e}function nd(){if(tr){var e=tr,t=nr;if(nr=tr=null,Xu(e),t)for(e=0;e<t.length;e++)Xu(t[e])}}function rd(e,t){return e(t)}function id(){}var Eo=!1;function sd(e,t,n){if(Eo)return e(t,n);Eo=!0;try{return rd(e,t,n)}finally{Eo=!1,(tr!==null||nr!==null)&&(id(),nd())}}function Zr(e,t){var n=e.stateNode;if(n===null)return null;var r=Xs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(j(231,t,typeof n));return n}var gl=!1;if(Ut)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){gl=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{gl=!1}function Km(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Br=!1,hs=null,ps=!1,vl=null,Ym={onError:function(e){Br=!0,hs=e}};function Qm(e,t,n,r,i,s,o,l,a){Br=!1,hs=null,Km.apply(Ym,arguments)}function qm(e,t,n,r,i,s,o,l,a){if(Qm.apply(this,arguments),Br){if(Br){var u=hs;Br=!1,hs=null}else throw Error(j(198));ps||(ps=!0,vl=u)}}function Fn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function od(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zu(e){if(Fn(e)!==e)throw Error(j(188))}function Jm(e){var t=e.alternate;if(!t){if(t=Fn(e),t===null)throw Error(j(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zu(i),e;if(s===r)return Zu(i),t;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?e:t}function ld(e){return e=Jm(e),e!==null?ad(e):null}function ad(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ad(e);if(t!==null)return t;e=e.sibling}return null}var ud=nt.unstable_scheduleCallback,Gu=nt.unstable_cancelCallback,Xm=nt.unstable_shouldYield,Zm=nt.unstable_requestPaint,we=nt.unstable_now,Gm=nt.unstable_getCurrentPriorityLevel,Ca=nt.unstable_ImmediatePriority,cd=nt.unstable_UserBlockingPriority,ms=nt.unstable_NormalPriority,ey=nt.unstable_LowPriority,fd=nt.unstable_IdlePriority,Ys=null,Tt=null;function ty(e){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Ys,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:iy,ny=Math.log,ry=Math.LN2;function iy(e){return e>>>=0,e===0?32:31-(ny(e)/ry|0)|0}var Ti=64,ji=4194304;function Rr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ys(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Rr(l):(s&=o,s!==0&&(r=Rr(s)))}else o=n&~i,o!==0?r=Rr(o):s!==0&&(r=Rr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-kt(t),i=1<<n,r|=e[n],t&=~i;return r}function sy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-kt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=sy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function wl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dd(){var e=Ti;return Ti<<=1,!(Ti&4194240)&&(Ti=64),e}function Co(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Si(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=n}function ly(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-kt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Pa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-kt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var oe=0;function hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pd,Na,md,yd,gd,Sl=!1,Ai=[],sn=null,on=null,ln=null,Gr=new Map,ei=new Map,Gt=[],ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ec(e,t){switch(e){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Gr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ei.delete(t.pointerId)}}function Er(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=xi(t),t!==null&&Na(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function uy(e,t,n,r,i){switch(t){case"focusin":return sn=Er(sn,e,t,n,r,i),!0;case"dragenter":return on=Er(on,e,t,n,r,i),!0;case"mouseover":return ln=Er(ln,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Gr.set(s,Er(Gr.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ei.set(s,Er(ei.get(s)||null,e,t,n,r,i)),!0}return!1}function vd(e){var t=On(e.target);if(t!==null){var n=Fn(t);if(n!==null){if(t=n.tag,t===13){if(t=od(n),t!==null){e.blockedOn=t,gd(e.priority,function(){md(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=kl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ml=r,n.target.dispatchEvent(r),ml=null}else return t=xi(n),t!==null&&Na(t),e.blockedOn=n,!1;t.shift()}return!0}function tc(e,t,n){Xi(e)&&n.delete(t)}function cy(){Sl=!1,sn!==null&&Xi(sn)&&(sn=null),on!==null&&Xi(on)&&(on=null),ln!==null&&Xi(ln)&&(ln=null),Gr.forEach(tc),ei.forEach(tc)}function Cr(e,t){e.blockedOn===t&&(e.blockedOn=null,Sl||(Sl=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,cy)))}function ti(e){function t(i){return Cr(i,e)}if(0<Ai.length){Cr(Ai[0],e);for(var n=1;n<Ai.length;n++){var r=Ai[n];r.blockedOn===e&&(r.blockedOn=null)}}for(sn!==null&&Cr(sn,e),on!==null&&Cr(on,e),ln!==null&&Cr(ln,e),Gr.forEach(t),ei.forEach(t),n=0;n<Gt.length;n++)r=Gt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Gt.length&&(n=Gt[0],n.blockedOn===null);)vd(n),n.blockedOn===null&&Gt.shift()}var rr=Yt.ReactCurrentBatchConfig,gs=!0;function fy(e,t,n,r){var i=oe,s=rr.transition;rr.transition=null;try{oe=1,Oa(e,t,n,r)}finally{oe=i,rr.transition=s}}function dy(e,t,n,r){var i=oe,s=rr.transition;rr.transition=null;try{oe=4,Oa(e,t,n,r)}finally{oe=i,rr.transition=s}}function Oa(e,t,n,r){if(gs){var i=kl(e,t,n,r);if(i===null)Ro(e,t,r,vs,n),ec(e,r);else if(uy(i,e,t,n,r))r.stopPropagation();else if(ec(e,r),t&4&&-1<ay.indexOf(e)){for(;i!==null;){var s=xi(i);if(s!==null&&pd(s),s=kl(e,t,n,r),s===null&&Ro(e,t,r,vs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ro(e,t,r,null,n)}}var vs=null;function kl(e,t,n,r){if(vs=null,e=Ea(r),e=On(e),e!==null)if(t=Fn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=od(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vs=e,null}function wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gm()){case Ca:return 1;case cd:return 4;case ms:case ey:return 16;case fd:return 536870912;default:return 16}default:return 16}}var nn=null,Ta=null,Zi=null;function Sd(){if(Zi)return Zi;var e,t=Ta,n=t.length,r,i="value"in nn?nn.value:nn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Zi=i.slice(e,1<r?1-r:void 0)}function Gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ii(){return!0}function nc(){return!1}function ot(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ii:nc,this.isPropagationStopped=nc,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),t}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=ot(yr),ki=ye({},yr,{view:0,detail:0}),hy=ot(ki),Po,No,Pr,Qs=ye({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Aa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pr&&(Pr&&e.type==="mousemove"?(Po=e.screenX-Pr.screenX,No=e.screenY-Pr.screenY):No=Po=0,Pr=e),Po)},movementY:function(e){return"movementY"in e?e.movementY:No}}),rc=ot(Qs),py=ye({},Qs,{dataTransfer:0}),my=ot(py),yy=ye({},ki,{relatedTarget:0}),Oo=ot(yy),gy=ye({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),vy=ot(gy),wy=ye({},yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sy=ot(wy),ky=ye({},yr,{data:0}),ic=ot(ky),xy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ey[e])?!!t[e]:!1}function Aa(){return Cy}var Py=ye({},ki,{key:function(e){if(e.key){var t=xy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_y[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Aa,charCode:function(e){return e.type==="keypress"?Gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ny=ot(Py),Oy=ye({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=ot(Oy),Ty=ye({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Aa}),jy=ot(Ty),Ay=ye({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iy=ot(Ay),My=ye({},Qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dy=ot(My),Ry=[9,13,27,32],Ia=Ut&&"CompositionEvent"in window,Ur=null;Ut&&"documentMode"in document&&(Ur=document.documentMode);var Ly=Ut&&"TextEvent"in window&&!Ur,kd=Ut&&(!Ia||Ur&&8<Ur&&11>=Ur),oc=" ",lc=!1;function xd(e,t){switch(e){case"keyup":return Ry.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _d(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vn=!1;function by(e,t){switch(e){case"compositionend":return _d(t);case"keypress":return t.which!==32?null:(lc=!0,oc);case"textInput":return e=t.data,e===oc&&lc?null:e;default:return null}}function $y(e,t){if(Vn)return e==="compositionend"||!Ia&&xd(e,t)?(e=Sd(),Zi=Ta=nn=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kd&&t.locale!=="ko"?null:t.data;default:return null}}var zy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zy[e.type]:t==="textarea"}function Ed(e,t,n,r){td(r),t=ws(t,"onChange"),0<t.length&&(n=new ja("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hr=null,ni=null;function Fy(e){Rd(e,0)}function qs(e){var t=Yn(e);if(Qf(t))return e}function By(e,t){if(e==="change")return t}var Cd=!1;if(Ut){var To;if(Ut){var jo="oninput"in document;if(!jo){var uc=document.createElement("div");uc.setAttribute("oninput","return;"),jo=typeof uc.oninput=="function"}To=jo}else To=!1;Cd=To&&(!document.documentMode||9<document.documentMode)}function cc(){Hr&&(Hr.detachEvent("onpropertychange",Pd),ni=Hr=null)}function Pd(e){if(e.propertyName==="value"&&qs(ni)){var t=[];Ed(t,ni,e,Ea(e)),sd(Fy,t)}}function Uy(e,t,n){e==="focusin"?(cc(),Hr=t,ni=n,Hr.attachEvent("onpropertychange",Pd)):e==="focusout"&&cc()}function Hy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qs(ni)}function Vy(e,t){if(e==="click")return qs(t)}function Wy(e,t){if(e==="input"||e==="change")return qs(t)}function Ky(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:Ky;function ri(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rl.call(t,i)||!_t(e[i],t[i]))return!1}return!0}function fc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dc(e,t){var n=fc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fc(n)}}function Nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Od(){for(var e=window,t=ds();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ds(e.document)}return t}function Ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Yy(e){var t=Od(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Nd(n.ownerDocument.documentElement,n)){if(r!==null&&Ma(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dc(n,s);var o=dc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qy=Ut&&"documentMode"in document&&11>=document.documentMode,Wn=null,xl=null,Vr=null,_l=!1;function hc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_l||Wn==null||Wn!==ds(r)||(r=Wn,"selectionStart"in r&&Ma(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vr&&ri(Vr,r)||(Vr=r,r=ws(xl,"onSelect"),0<r.length&&(t=new ja("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Wn)))}function Mi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kn={animationend:Mi("Animation","AnimationEnd"),animationiteration:Mi("Animation","AnimationIteration"),animationstart:Mi("Animation","AnimationStart"),transitionend:Mi("Transition","TransitionEnd")},Ao={},Td={};Ut&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Js(e){if(Ao[e])return Ao[e];if(!Kn[e])return e;var t=Kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Td)return Ao[e]=t[n];return e}var jd=Js("animationend"),Ad=Js("animationiteration"),Id=Js("animationstart"),Md=Js("transitionend"),Dd=new Map,pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(e,t){Dd.set(e,t),zn(t,[e])}for(var Io=0;Io<pc.length;Io++){var Mo=pc[Io],qy=Mo.toLowerCase(),Jy=Mo[0].toUpperCase()+Mo.slice(1);vn(qy,"on"+Jy)}vn(jd,"onAnimationEnd");vn(Ad,"onAnimationIteration");vn(Id,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(Md,"onTransitionEnd");or("onMouseEnter",["mouseout","mouseover"]);or("onMouseLeave",["mouseout","mouseover"]);or("onPointerEnter",["pointerout","pointerover"]);or("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function mc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qm(r,t,void 0,e),e.currentTarget=null}function Rd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;mc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;mc(i,l,u),s=a}}}if(ps)throw e=vl,ps=!1,vl=null,e}function ce(e,t){var n=t[Ol];n===void 0&&(n=t[Ol]=new Set);var r=e+"__bubble";n.has(r)||(Ld(t,e,2,!1),n.add(r))}function Do(e,t,n){var r=0;t&&(r|=4),Ld(n,e,r,t)}var Di="_reactListening"+Math.random().toString(36).slice(2);function ii(e){if(!e[Di]){e[Di]=!0,Hf.forEach(function(n){n!=="selectionchange"&&(Xy.has(n)||Do(n,!1,e),Do(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Di]||(t[Di]=!0,Do("selectionchange",!1,t))}}function Ld(e,t,n,r){switch(wd(t)){case 1:var i=fy;break;case 4:i=dy;break;default:i=Oa}n=i.bind(null,t,n,e),i=void 0,!gl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ro(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=On(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}sd(function(){var u=s,c=Ea(n),f=[];e:{var d=Dd.get(e);if(d!==void 0){var g=ja,v=e;switch(e){case"keypress":if(Gi(n)===0)break e;case"keydown":case"keyup":g=Ny;break;case"focusin":v="focus",g=Oo;break;case"focusout":v="blur",g=Oo;break;case"beforeblur":case"afterblur":g=Oo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=my;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=jy;break;case jd:case Ad:case Id:g=vy;break;case Md:g=Iy;break;case"scroll":g=hy;break;case"wheel":g=Dy;break;case"copy":case"cut":case"paste":g=Sy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=sc}var S=(t&4)!==0,T=!S&&e==="scroll",m=S?d!==null?d+"Capture":null:d;S=[];for(var h=u,y;h!==null;){y=h;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,m!==null&&(x=Zr(h,m),x!=null&&S.push(si(h,x,y)))),T)break;h=h.return}0<S.length&&(d=new g(d,v,null,n,c),f.push({event:d,listeners:S}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==ml&&(v=n.relatedTarget||n.fromElement)&&(On(v)||v[Ht]))break e;if((g||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?On(v):null,v!==null&&(T=Fn(v),v!==T||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(S=rc,x="onMouseLeave",m="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(S=sc,x="onPointerLeave",m="onPointerEnter",h="pointer"),T=g==null?d:Yn(g),y=v==null?d:Yn(v),d=new S(x,h+"leave",g,n,c),d.target=T,d.relatedTarget=y,x=null,On(c)===u&&(S=new S(m,h+"enter",v,n,c),S.target=y,S.relatedTarget=T,x=S),T=x,g&&v)t:{for(S=g,m=v,h=0,y=S;y;y=Bn(y))h++;for(y=0,x=m;x;x=Bn(x))y++;for(;0<h-y;)S=Bn(S),h--;for(;0<y-h;)m=Bn(m),y--;for(;h--;){if(S===m||m!==null&&S===m.alternate)break t;S=Bn(S),m=Bn(m)}S=null}else S=null;g!==null&&yc(f,d,g,S,!1),v!==null&&T!==null&&yc(f,T,v,S,!0)}}e:{if(d=u?Yn(u):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var E=By;else if(ac(d))if(Cd)E=Wy;else{E=Hy;var O=Uy}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=Vy);if(E&&(E=E(e,u))){Ed(f,E,n,c);break e}O&&O(e,d,u),e==="focusout"&&(O=d._wrapperState)&&O.controlled&&d.type==="number"&&cl(d,"number",d.value)}switch(O=u?Yn(u):window,e){case"focusin":(ac(O)||O.contentEditable==="true")&&(Wn=O,xl=u,Vr=null);break;case"focusout":Vr=xl=Wn=null;break;case"mousedown":_l=!0;break;case"contextmenu":case"mouseup":case"dragend":_l=!1,hc(f,n,c);break;case"selectionchange":if(Qy)break;case"keydown":case"keyup":hc(f,n,c)}var _;if(Ia)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Vn?xd(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(kd&&n.locale!=="ko"&&(Vn||N!=="onCompositionStart"?N==="onCompositionEnd"&&Vn&&(_=Sd()):(nn=c,Ta="value"in nn?nn.value:nn.textContent,Vn=!0)),O=ws(u,N),0<O.length&&(N=new ic(N,e,null,n,c),f.push({event:N,listeners:O}),_?N.data=_:(_=_d(n),_!==null&&(N.data=_)))),(_=Ly?by(e,n):$y(e,n))&&(u=ws(u,"onBeforeInput"),0<u.length&&(c=new ic("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=_))}Rd(f,t)})}function si(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ws(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zr(e,n),s!=null&&r.unshift(si(e,s,i)),s=Zr(e,t),s!=null&&r.push(si(e,s,i))),e=e.return}return r}function Bn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Zr(n,s),a!=null&&o.unshift(si(n,a,l))):i||(a=Zr(n,s),a!=null&&o.push(si(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Zy=/\r\n?/g,Gy=/\u0000|\uFFFD/g;function gc(e){return(typeof e=="string"?e:""+e).replace(Zy,`
`).replace(Gy,"")}function Ri(e,t,n){if(t=gc(t),gc(e)!==t&&n)throw Error(j(425))}function Ss(){}var El=null,Cl=null;function Pl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nl=typeof setTimeout=="function"?setTimeout:void 0,eg=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,tg=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(e){return vc.resolve(null).then(e).catch(ng)}:Nl;function ng(e){setTimeout(function(){throw e})}function Lo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ti(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ti(t)}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gr=Math.random().toString(36).slice(2),Ot="__reactFiber$"+gr,oi="__reactProps$"+gr,Ht="__reactContainer$"+gr,Ol="__reactEvents$"+gr,rg="__reactListeners$"+gr,ig="__reactHandles$"+gr;function On(e){var t=e[Ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[Ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wc(e);e!==null;){if(n=e[Ot])return n;e=wc(e)}return t}e=n,n=e.parentNode}return null}function xi(e){return e=e[Ot]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Xs(e){return e[oi]||null}var Tl=[],Qn=-1;function wn(e){return{current:e}}function fe(e){0>Qn||(e.current=Tl[Qn],Tl[Qn]=null,Qn--)}function ue(e,t){Qn++,Tl[Qn]=e.current,e.current=t}var mn={},be=wn(mn),Ye=wn(!1),Mn=mn;function lr(e,t){var n=e.type.contextTypes;if(!n)return mn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Qe(e){return e=e.childContextTypes,e!=null}function ks(){fe(Ye),fe(be)}function Sc(e,t,n){if(be.current!==mn)throw Error(j(168));ue(be,t),ue(Ye,n)}function bd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(j(108,Um(e)||"Unknown",i));return ye({},n,r)}function xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,Mn=be.current,ue(be,e),ue(Ye,Ye.current),!0}function kc(e,t,n){var r=e.stateNode;if(!r)throw Error(j(169));n?(e=bd(e,t,Mn),r.__reactInternalMemoizedMergedChildContext=e,fe(Ye),fe(be),ue(be,e)):fe(Ye),ue(Ye,n)}var bt=null,Zs=!1,bo=!1;function $d(e){bt===null?bt=[e]:bt.push(e)}function sg(e){Zs=!0,$d(e)}function Sn(){if(!bo&&bt!==null){bo=!0;var e=0,t=oe;try{var n=bt;for(oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bt=null,Zs=!1}catch(i){throw bt!==null&&(bt=bt.slice(e+1)),ud(Ca,Sn),i}finally{oe=t,bo=!1}}return null}var qn=[],Jn=0,_s=null,Es=0,lt=[],at=0,Dn=null,$t=1,zt="";function Cn(e,t){qn[Jn++]=Es,qn[Jn++]=_s,_s=e,Es=t}function zd(e,t,n){lt[at++]=$t,lt[at++]=zt,lt[at++]=Dn,Dn=e;var r=$t;e=zt;var i=32-kt(r)-1;r&=~(1<<i),n+=1;var s=32-kt(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$t=1<<32-kt(t)+i|n<<i|r,zt=s+e}else $t=1<<s|n<<i|r,zt=e}function Da(e){e.return!==null&&(Cn(e,1),zd(e,1,0))}function Ra(e){for(;e===_s;)_s=qn[--Jn],qn[Jn]=null,Es=qn[--Jn],qn[Jn]=null;for(;e===Dn;)Dn=lt[--at],lt[at]=null,zt=lt[--at],lt[at]=null,$t=lt[--at],lt[at]=null}var tt=null,Ze=null,de=!1,wt=null;function Fd(e,t){var n=ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,Ze=an(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,Ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Dn!==null?{id:$t,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tt=e,Ze=null,!0):!1;default:return!1}}function jl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Al(e){if(de){var t=Ze;if(t){var n=t;if(!xc(e,t)){if(jl(e))throw Error(j(418));t=an(n.nextSibling);var r=tt;t&&xc(e,t)?Fd(r,n):(e.flags=e.flags&-4097|2,de=!1,tt=e)}}else{if(jl(e))throw Error(j(418));e.flags=e.flags&-4097|2,de=!1,tt=e}}}function _c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function Li(e){if(e!==tt)return!1;if(!de)return _c(e),de=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pl(e.type,e.memoizedProps)),t&&(t=Ze)){if(jl(e))throw Bd(),Error(j(418));for(;t;)Fd(e,t),t=an(t.nextSibling)}if(_c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ze=an(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ze=null}}else Ze=tt?an(e.stateNode.nextSibling):null;return!0}function Bd(){for(var e=Ze;e;)e=an(e.nextSibling)}function ar(){Ze=tt=null,de=!1}function La(e){wt===null?wt=[e]:wt.push(e)}var og=Yt.ReactCurrentBatchConfig;function Nr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ec(e){var t=e._init;return t(e._payload)}function Ud(e){function t(m,h){if(e){var y=m.deletions;y===null?(m.deletions=[h],m.flags|=16):y.push(h)}}function n(m,h){if(!e)return null;for(;h!==null;)t(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function i(m,h){return m=dn(m,h),m.index=0,m.sibling=null,m}function s(m,h,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<h?(m.flags|=2,h):y):(m.flags|=2,h)):(m.flags|=1048576,h)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,h,y,x){return h===null||h.tag!==6?(h=Vo(y,m.mode,x),h.return=m,h):(h=i(h,y),h.return=m,h)}function a(m,h,y,x){var E=y.type;return E===Hn?c(m,h,y.props.children,x,y.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xt&&Ec(E)===h.type)?(x=i(h,y.props),x.ref=Nr(m,h,y),x.return=m,x):(x=os(y.type,y.key,y.props,null,m.mode,x),x.ref=Nr(m,h,y),x.return=m,x)}function u(m,h,y,x){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=Wo(y,m.mode,x),h.return=m,h):(h=i(h,y.children||[]),h.return=m,h)}function c(m,h,y,x,E){return h===null||h.tag!==7?(h=In(y,m.mode,x,E),h.return=m,h):(h=i(h,y),h.return=m,h)}function f(m,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Vo(""+h,m.mode,y),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Pi:return y=os(h.type,h.key,h.props,null,m.mode,y),y.ref=Nr(m,null,h),y.return=m,y;case Un:return h=Wo(h,m.mode,y),h.return=m,h;case Xt:var x=h._init;return f(m,x(h._payload),y)}if(Dr(h)||xr(h))return h=In(h,m.mode,y,null),h.return=m,h;bi(m,h)}return null}function d(m,h,y,x){var E=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:l(m,h,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pi:return y.key===E?a(m,h,y,x):null;case Un:return y.key===E?u(m,h,y,x):null;case Xt:return E=y._init,d(m,h,E(y._payload),x)}if(Dr(y)||xr(y))return E!==null?null:c(m,h,y,x,null);bi(m,y)}return null}function g(m,h,y,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(y)||null,l(h,m,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Pi:return m=m.get(x.key===null?y:x.key)||null,a(h,m,x,E);case Un:return m=m.get(x.key===null?y:x.key)||null,u(h,m,x,E);case Xt:var O=x._init;return g(m,h,y,O(x._payload),E)}if(Dr(x)||xr(x))return m=m.get(y)||null,c(h,m,x,E,null);bi(h,x)}return null}function v(m,h,y,x){for(var E=null,O=null,_=h,N=h=0,A=null;_!==null&&N<y.length;N++){_.index>N?(A=_,_=null):A=_.sibling;var C=d(m,_,y[N],x);if(C===null){_===null&&(_=A);break}e&&_&&C.alternate===null&&t(m,_),h=s(C,h,N),O===null?E=C:O.sibling=C,O=C,_=A}if(N===y.length)return n(m,_),de&&Cn(m,N),E;if(_===null){for(;N<y.length;N++)_=f(m,y[N],x),_!==null&&(h=s(_,h,N),O===null?E=_:O.sibling=_,O=_);return de&&Cn(m,N),E}for(_=r(m,_);N<y.length;N++)A=g(_,m,N,y[N],x),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?N:A.key),h=s(A,h,N),O===null?E=A:O.sibling=A,O=A);return e&&_.forEach(function(R){return t(m,R)}),de&&Cn(m,N),E}function S(m,h,y,x){var E=xr(y);if(typeof E!="function")throw Error(j(150));if(y=E.call(y),y==null)throw Error(j(151));for(var O=E=null,_=h,N=h=0,A=null,C=y.next();_!==null&&!C.done;N++,C=y.next()){_.index>N?(A=_,_=null):A=_.sibling;var R=d(m,_,C.value,x);if(R===null){_===null&&(_=A);break}e&&_&&R.alternate===null&&t(m,_),h=s(R,h,N),O===null?E=R:O.sibling=R,O=R,_=A}if(C.done)return n(m,_),de&&Cn(m,N),E;if(_===null){for(;!C.done;N++,C=y.next())C=f(m,C.value,x),C!==null&&(h=s(C,h,N),O===null?E=C:O.sibling=C,O=C);return de&&Cn(m,N),E}for(_=r(m,_);!C.done;N++,C=y.next())C=g(_,m,N,C.value,x),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?N:C.key),h=s(C,h,N),O===null?E=C:O.sibling=C,O=C);return e&&_.forEach(function($){return t(m,$)}),de&&Cn(m,N),E}function T(m,h,y,x){if(typeof y=="object"&&y!==null&&y.type===Hn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Pi:e:{for(var E=y.key,O=h;O!==null;){if(O.key===E){if(E=y.type,E===Hn){if(O.tag===7){n(m,O.sibling),h=i(O,y.props.children),h.return=m,m=h;break e}}else if(O.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Xt&&Ec(E)===O.type){n(m,O.sibling),h=i(O,y.props),h.ref=Nr(m,O,y),h.return=m,m=h;break e}n(m,O);break}else t(m,O);O=O.sibling}y.type===Hn?(h=In(y.props.children,m.mode,x,y.key),h.return=m,m=h):(x=os(y.type,y.key,y.props,null,m.mode,x),x.ref=Nr(m,h,y),x.return=m,m=x)}return o(m);case Un:e:{for(O=y.key;h!==null;){if(h.key===O)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(m,h.sibling),h=i(h,y.children||[]),h.return=m,m=h;break e}else{n(m,h);break}else t(m,h);h=h.sibling}h=Wo(y,m.mode,x),h.return=m,m=h}return o(m);case Xt:return O=y._init,T(m,h,O(y._payload),x)}if(Dr(y))return v(m,h,y,x);if(xr(y))return S(m,h,y,x);bi(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(m,h.sibling),h=i(h,y),h.return=m,m=h):(n(m,h),h=Vo(y,m.mode,x),h.return=m,m=h),o(m)):n(m,h)}return T}var ur=Ud(!0),Hd=Ud(!1),Cs=wn(null),Ps=null,Xn=null,ba=null;function $a(){ba=Xn=Ps=null}function za(e){var t=Cs.current;fe(Cs),e._currentValue=t}function Il(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ir(e,t){Ps=e,ba=Xn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ke=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},Xn===null){if(Ps===null)throw Error(j(308));Xn=e,Ps.dependencies={lanes:0,firstContext:e}}else Xn=Xn.next=e;return t}var Tn=null;function Fa(e){Tn===null?Tn=[e]:Tn.push(e)}function Vd(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Fa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Vt(e,r)}function Vt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zt=!1;function Ba(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ft(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function un(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Vt(e,n)}return i=r.interleaved,i===null?(t.next=t,Fa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Vt(e,n)}function es(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pa(e,n)}}function Cc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ns(e,t,n,r){var i=e.updateQueue;Zt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;o=0,c=u=a=null,l=s;do{var d=l.lane,g=l.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,S=l;switch(d=t,g=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){f=v.call(g,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,d=typeof v=="function"?v.call(g,f,d):v,d==null)break e;f=ye({},f,d);break e;case 2:Zt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else g={eventTime:g,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=f):c=c.next=g,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Ln|=o,e.lanes=o,e.memoizedState=f}}function Pc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var _i={},jt=wn(_i),li=wn(_i),ai=wn(_i);function jn(e){if(e===_i)throw Error(j(174));return e}function Ua(e,t){switch(ue(ai,t),ue(li,e),ue(jt,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dl(t,e)}fe(jt),ue(jt,t)}function cr(){fe(jt),fe(li),fe(ai)}function Kd(e){jn(ai.current);var t=jn(jt.current),n=dl(t,e.type);t!==n&&(ue(li,e),ue(jt,n))}function Ha(e){li.current===e&&(fe(jt),fe(li))}var pe=wn(0);function Os(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $o=[];function Va(){for(var e=0;e<$o.length;e++)$o[e]._workInProgressVersionPrimary=null;$o.length=0}var ts=Yt.ReactCurrentDispatcher,zo=Yt.ReactCurrentBatchConfig,Rn=0,me=null,_e=null,Ne=null,Ts=!1,Wr=!1,ui=0,lg=0;function Ie(){throw Error(j(321))}function Wa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_t(e[n],t[n]))return!1;return!0}function Ka(e,t,n,r,i,s){if(Rn=s,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ts.current=e===null||e.memoizedState===null?fg:dg,e=n(r,i),Wr){s=0;do{if(Wr=!1,ui=0,25<=s)throw Error(j(301));s+=1,Ne=_e=null,t.updateQueue=null,ts.current=hg,e=n(r,i)}while(Wr)}if(ts.current=js,t=_e!==null&&_e.next!==null,Rn=0,Ne=_e=me=null,Ts=!1,t)throw Error(j(300));return e}function Ya(){var e=ui!==0;return ui=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?me.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function pt(){if(_e===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=Ne===null?me.memoizedState:Ne.next;if(t!==null)Ne=t,_e=e;else{if(e===null)throw Error(j(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Ne===null?me.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function ci(e,t){return typeof t=="function"?t(e):t}function Fo(e){var t=pt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=_e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Rn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,me.lanes|=c,Ln|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,_t(r,t.memoizedState)||(Ke=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,me.lanes|=s,Ln|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bo(e){var t=pt(),n=t.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);_t(s,t.memoizedState)||(Ke=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Yd(){}function Qd(e,t){var n=me,r=pt(),i=t(),s=!_t(r.memoizedState,i);if(s&&(r.memoizedState=i,Ke=!0),r=r.queue,Qa(Xd.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,fi(9,Jd.bind(null,n,r,i,t),void 0,null),Oe===null)throw Error(j(349));Rn&30||qd(n,t,i)}return i}function qd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jd(e,t,n,r){t.value=n,t.getSnapshot=r,Zd(t)&&Gd(e)}function Xd(e,t,n){return n(function(){Zd(t)&&Gd(e)})}function Zd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_t(e,n)}catch{return!0}}function Gd(e){var t=Vt(e,1);t!==null&&xt(t,e,1,-1)}function Nc(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:e},t.queue=e,e=e.dispatch=cg.bind(null,me,e),[t.memoizedState,e]}function fi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function eh(){return pt().memoizedState}function ns(e,t,n,r){var i=Pt();me.flags|=e,i.memoizedState=fi(1|t,n,void 0,r===void 0?null:r)}function Gs(e,t,n,r){var i=pt();r=r===void 0?null:r;var s=void 0;if(_e!==null){var o=_e.memoizedState;if(s=o.destroy,r!==null&&Wa(r,o.deps)){i.memoizedState=fi(t,n,s,r);return}}me.flags|=e,i.memoizedState=fi(1|t,n,s,r)}function Oc(e,t){return ns(8390656,8,e,t)}function Qa(e,t){return Gs(2048,8,e,t)}function th(e,t){return Gs(4,2,e,t)}function nh(e,t){return Gs(4,4,e,t)}function rh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ih(e,t,n){return n=n!=null?n.concat([e]):null,Gs(4,4,rh.bind(null,t,e),n)}function qa(){}function sh(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function oh(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function lh(e,t,n){return Rn&21?(_t(n,t)||(n=dd(),me.lanes|=n,Ln|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ke=!0),e.memoizedState=n)}function ag(e,t){var n=oe;oe=n!==0&&4>n?n:4,e(!0);var r=zo.transition;zo.transition={};try{e(!1),t()}finally{oe=n,zo.transition=r}}function ah(){return pt().memoizedState}function ug(e,t,n){var r=fn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uh(e))ch(t,n);else if(n=Vd(e,t,n,r),n!==null){var i=Be();xt(n,e,r,i),fh(n,t,r)}}function cg(e,t,n){var r=fn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uh(e))ch(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,_t(l,o)){var a=t.interleaved;a===null?(i.next=i,Fa(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Vd(e,t,i,r),n!==null&&(i=Be(),xt(n,e,r,i),fh(n,t,r))}}function uh(e){var t=e.alternate;return e===me||t!==null&&t===me}function ch(e,t){Wr=Ts=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pa(e,n)}}var js={readContext:ht,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},fg={readContext:ht,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:Oc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ns(4194308,4,rh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return ns(4,2,e,t)},useMemo:function(e,t){var n=Pt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ug.bind(null,me,e),[r.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:Nc,useDebugValue:qa,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=Nc(!1),t=e[0];return e=ag.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=me,i=Pt();if(de){if(n===void 0)throw Error(j(407));n=n()}else{if(n=t(),Oe===null)throw Error(j(349));Rn&30||qd(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Oc(Xd.bind(null,r,s,e),[e]),r.flags|=2048,fi(9,Jd.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Pt(),t=Oe.identifierPrefix;if(de){var n=zt,r=$t;n=(r&~(1<<32-kt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ui++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dg={readContext:ht,useCallback:sh,useContext:ht,useEffect:Qa,useImperativeHandle:ih,useInsertionEffect:th,useLayoutEffect:nh,useMemo:oh,useReducer:Fo,useRef:eh,useState:function(){return Fo(ci)},useDebugValue:qa,useDeferredValue:function(e){var t=pt();return lh(t,_e.memoizedState,e)},useTransition:function(){var e=Fo(ci)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Qd,useId:ah,unstable_isNewReconciler:!1},hg={readContext:ht,useCallback:sh,useContext:ht,useEffect:Qa,useImperativeHandle:ih,useInsertionEffect:th,useLayoutEffect:nh,useMemo:oh,useReducer:Bo,useRef:eh,useState:function(){return Bo(ci)},useDebugValue:qa,useDeferredValue:function(e){var t=pt();return _e===null?t.memoizedState=e:lh(t,_e.memoizedState,e)},useTransition:function(){var e=Bo(ci)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:Qd,useId:ah,unstable_isNewReconciler:!1};function yt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ml(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var eo={isMounted:function(e){return(e=e._reactInternals)?Fn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Be(),i=fn(e),s=Ft(r,i);s.payload=t,n!=null&&(s.callback=n),t=un(e,s,i),t!==null&&(xt(t,e,i,r),es(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Be(),i=fn(e),s=Ft(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=un(e,s,i),t!==null&&(xt(t,e,i,r),es(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Be(),r=fn(e),i=Ft(n,r);i.tag=2,t!=null&&(i.callback=t),t=un(e,i,r),t!==null&&(xt(t,e,r,n),es(t,e,r))}};function Tc(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ri(n,r)||!ri(i,s):!0}function dh(e,t,n){var r=!1,i=mn,s=t.contextType;return typeof s=="object"&&s!==null?s=ht(s):(i=Qe(t)?Mn:be.current,r=t.contextTypes,s=(r=r!=null)?lr(e,i):mn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function jc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eo.enqueueReplaceState(t,t.state,null)}function Dl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ba(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ht(s):(s=Qe(t)?Mn:be.current,i.context=lr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ml(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&eo.enqueueReplaceState(i,i.state,null),Ns(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function fr(e,t){try{var n="",r=t;do n+=Bm(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Uo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pg=typeof WeakMap=="function"?WeakMap:Map;function hh(e,t,n){n=Ft(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Is||(Is=!0,Wl=r),Rl(e,t)},n}function ph(e,t,n){n=Ft(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Rl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rl(e,t),typeof r!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ac(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pg;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Og.bind(null,e,t,n),t.then(e,e))}function Ic(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ft(-1,1),t.tag=2,un(n,t,1))),n.lanes|=1),e)}var mg=Yt.ReactCurrentOwner,Ke=!1;function ze(e,t,n,r){t.child=e===null?Hd(t,null,n,r):ur(t,e.child,n,r)}function Dc(e,t,n,r,i){n=n.render;var s=t.ref;return ir(t,i),r=Ka(e,t,n,r,s,i),n=Ya(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wt(e,t,i)):(de&&n&&Da(t),t.flags|=1,ze(e,t,r,i),t.child)}function Rc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!ru(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,mh(e,t,s,r,i)):(e=os(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ri,n(o,r)&&e.ref===t.ref)return Wt(e,t,i)}return t.flags|=1,e=dn(s,r),e.ref=t.ref,e.return=t,t.child=e}function mh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ri(s,r)&&e.ref===t.ref)if(Ke=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ke=!0);else return t.lanes=e.lanes,Wt(e,t,i)}return Ll(e,t,n,r,i)}function yh(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Gn,Xe),Xe|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(Gn,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(Gn,Xe),Xe|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ue(Gn,Xe),Xe|=r;return ze(e,t,i,n),t.child}function gh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ll(e,t,n,r,i){var s=Qe(n)?Mn:be.current;return s=lr(t,s),ir(t,i),n=Ka(e,t,n,r,s,i),r=Ya(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wt(e,t,i)):(de&&r&&Da(t),t.flags|=1,ze(e,t,n,i),t.child)}function Lc(e,t,n,r,i){if(Qe(n)){var s=!0;xs(t)}else s=!1;if(ir(t,i),t.stateNode===null)rs(e,t),dh(t,n,r),Dl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ht(u):(u=Qe(n)?Mn:be.current,u=lr(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&jc(t,o,r,u),Zt=!1;var d=t.memoizedState;o.state=d,Ns(t,r,o,i),a=t.memoizedState,l!==r||d!==a||Ye.current||Zt?(typeof c=="function"&&(Ml(t,n,c,r),a=t.memoizedState),(l=Zt||Tc(t,n,l,r,d,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Wd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:yt(t.type,l),o.props=u,f=t.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=ht(a):(a=Qe(n)?Mn:be.current,a=lr(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||d!==a)&&jc(t,o,r,a),Zt=!1,d=t.memoizedState,o.state=d,Ns(t,r,o,i);var v=t.memoizedState;l!==f||d!==v||Ye.current||Zt?(typeof g=="function"&&(Ml(t,n,g,r),v=t.memoizedState),(u=Zt||Tc(t,n,u,r,d,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return bl(e,t,n,r,s,i)}function bl(e,t,n,r,i,s){gh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&kc(t,n,!1),Wt(e,t,s);r=t.stateNode,mg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ur(t,e.child,null,s),t.child=ur(t,null,l,s)):ze(e,t,l,s),t.memoizedState=r.state,i&&kc(t,n,!0),t.child}function vh(e){var t=e.stateNode;t.pendingContext?Sc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sc(e,t.context,!1),Ua(e,t.containerInfo)}function bc(e,t,n,r,i){return ar(),La(i),t.flags|=256,ze(e,t,n,r),t.child}var $l={dehydrated:null,treeContext:null,retryLane:0};function zl(e){return{baseLanes:e,cachePool:null,transitions:null}}function wh(e,t,n){var r=t.pendingProps,i=pe.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ue(pe,i&1),e===null)return Al(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ro(o,r,0,null),e=In(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zl(n),t.memoizedState=$l,e):Ja(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return yg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=dn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=dn(l,s):(s=In(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?zl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=$l,r}return s=e.child,e=s.sibling,r=dn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ja(e,t){return t=ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $i(e,t,n,r){return r!==null&&La(r),ur(t,e.child,null,n),e=Ja(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Uo(Error(j(422))),$i(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ro({mode:"visible",children:r.children},i,0,null),s=In(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&ur(t,e.child,null,o),t.child.memoizedState=zl(o),t.memoizedState=$l,s);if(!(t.mode&1))return $i(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=Uo(s,r,void 0),$i(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ke||l){if(r=Oe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vt(e,i),xt(r,e,i,-1))}return nu(),r=Uo(Error(j(421))),$i(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Tg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ze=an(i.nextSibling),tt=t,de=!0,wt=null,e!==null&&(lt[at++]=$t,lt[at++]=zt,lt[at++]=Dn,$t=e.id,zt=e.overflow,Dn=t),t=Ja(t,r.children),t.flags|=4096,t)}function $c(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Il(e.return,t,n)}function Ho(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ze(e,t,r.children,n),r=pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$c(e,n,t);else if(e.tag===19)$c(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(pe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Os(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ho(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Os(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ho(t,!0,n,null,s);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ln|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,n=dn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gg(e,t,n){switch(t.tag){case 3:vh(t),ar();break;case 5:Kd(t);break;case 1:Qe(t.type)&&xs(t);break;case 4:Ua(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ue(Cs,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?wh(e,t,n):(ue(pe,pe.current&1),e=Wt(e,t,n),e!==null?e.sibling:null);ue(pe,pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Sh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(pe,pe.current),r)break;return null;case 22:case 23:return t.lanes=0,yh(e,t,n)}return Wt(e,t,n)}var kh,Fl,xh,_h;kh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fl=function(){};xh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,jn(jt.current);var s=null;switch(n){case"input":i=al(e,i),r=al(e,r),s=[];break;case"select":i=ye({},i,{value:void 0}),r=ye({},r,{value:void 0}),s=[];break;case"textarea":i=fl(e,i),r=fl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ss)}hl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jr.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jr.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ce("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};_h=function(e,t,n,r){n!==r&&(t.flags|=4)};function Or(e,t){if(!de)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vg(e,t,n){var r=t.pendingProps;switch(Ra(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Qe(t.type)&&ks(),Me(t),null;case 3:return r=t.stateNode,cr(),fe(Ye),fe(be),Va(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(Ql(wt),wt=null))),Fl(e,t),Me(t),null;case 5:Ha(t);var i=jn(ai.current);if(n=t.type,e!==null&&t.stateNode!=null)xh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(j(166));return Me(t),null}if(e=jn(jt.current),Li(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ot]=t,r[oi]=s,e=(t.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)ce(Lr[i],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":Yu(r,s),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ce("invalid",r);break;case"textarea":qu(r,s),ce("invalid",r)}hl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ri(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ri(r.textContent,l,e),i=["children",""+l]):Jr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ce("scroll",r)}switch(n){case"input":Ni(r),Qu(r,s,!0);break;case"textarea":Ni(r),Ju(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ss)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ot]=t,e[oi]=r,kh(e,t,!1,!1),t.stateNode=e;e:{switch(o=pl(n,r),n){case"dialog":ce("cancel",e),ce("close",e),i=r;break;case"iframe":case"object":case"embed":ce("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)ce(Lr[i],e);i=r;break;case"source":ce("error",e),i=r;break;case"img":case"image":case"link":ce("error",e),ce("load",e),i=r;break;case"details":ce("toggle",e),i=r;break;case"input":Yu(e,r),i=al(e,r),ce("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ye({},r,{value:void 0}),ce("invalid",e);break;case"textarea":qu(e,r),i=fl(e,r),ce("invalid",e);break;default:i=r}hl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?ed(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Zf(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Xr(e,a):typeof a=="number"&&Xr(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jr.hasOwnProperty(s)?a!=null&&s==="onScroll"&&ce("scroll",e):a!=null&&Sa(e,s,a,o))}switch(n){case"input":Ni(e),Qu(e,r,!1);break;case"textarea":Ni(e),Ju(e);break;case"option":r.value!=null&&e.setAttribute("value",""+pn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?er(e,!!r.multiple,s,!1):r.defaultValue!=null&&er(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ss)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)_h(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(j(166));if(n=jn(ai.current),jn(jt.current),Li(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ot]=t,(s=r.nodeValue!==n)&&(e=tt,e!==null))switch(e.tag){case 3:Ri(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ri(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ot]=t,t.stateNode=r}return Me(t),null;case 13:if(fe(pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(de&&Ze!==null&&t.mode&1&&!(t.flags&128))Bd(),ar(),t.flags|=98560,s=!1;else if(s=Li(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(j(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Ot]=t}else ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),s=!1}else wt!==null&&(Ql(wt),wt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Ee===0&&(Ee=3):nu())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return cr(),Fl(e,t),e===null&&ii(t.stateNode.containerInfo),Me(t),null;case 10:return za(t.type._context),Me(t),null;case 17:return Qe(t.type)&&ks(),Me(t),null;case 19:if(fe(pe),s=t.memoizedState,s===null)return Me(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Or(s,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Os(e),o!==null){for(t.flags|=128,Or(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(pe,pe.current&1|2),t.child}e=e.sibling}s.tail!==null&&we()>dr&&(t.flags|=128,r=!0,Or(s,!1),t.lanes=4194304)}else{if(!r)if(e=Os(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Or(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!de)return Me(t),null}else 2*we()-s.renderingStartTime>dr&&n!==1073741824&&(t.flags|=128,r=!0,Or(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=we(),t.sibling=null,n=pe.current,ue(pe,r?n&1|2:n&1),t):(Me(t),null);case 22:case 23:return tu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xe&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function wg(e,t){switch(Ra(t),t.tag){case 1:return Qe(t.type)&&ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cr(),fe(Ye),fe(be),Va(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ha(t),null;case 13:if(fe(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(pe),null;case 4:return cr(),null;case 10:return za(t.type._context),null;case 22:case 23:return tu(),null;case 24:return null;default:return null}}var zi=!1,Le=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,b=null;function Zn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(e,t,r)}else n.current=null}function Bl(e,t,n){try{n()}catch(r){ve(e,t,r)}}var zc=!1;function kg(e,t){if(El=gs,e=Od(),Ma(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)d=f,f=g;for(;;){if(f===e)break t;if(d===n&&++u===i&&(l=o),d===s&&++c===r&&(a=o),(g=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cl={focusedElem:e,selectionRange:n},gs=!1,b=t;b!==null;)if(t=b,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,b=e;else for(;b!==null;){t=b;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,T=v.memoizedState,m=t.stateNode,h=m.getSnapshotBeforeUpdate(t.elementType===t.type?S:yt(t.type,S),T);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(x){ve(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,b=e;break}b=t.return}return v=zc,zc=!1,v}function Kr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Bl(t,n,s)}i=i.next}while(i!==r)}}function to(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ul(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Eh(e){var t=e.alternate;t!==null&&(e.alternate=null,Eh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[oi],delete t[Ol],delete t[rg],delete t[ig])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ch(e){return e.tag===5||e.tag===3||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ch(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ss));else if(r!==4&&(e=e.child,e!==null))for(Hl(e,t,n),e=e.sibling;e!==null;)Hl(e,t,n),e=e.sibling}function Vl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Vl(e,t,n),e=e.sibling;e!==null;)Vl(e,t,n),e=e.sibling}var Te=null,gt=!1;function Jt(e,t,n){for(n=n.child;n!==null;)Ph(e,t,n),n=n.sibling}function Ph(e,t,n){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Ys,n)}catch{}switch(n.tag){case 5:Le||Zn(n,t);case 6:var r=Te,i=gt;Te=null,Jt(e,t,n),Te=r,gt=i,Te!==null&&(gt?(e=Te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(gt?(e=Te,n=n.stateNode,e.nodeType===8?Lo(e.parentNode,n):e.nodeType===1&&Lo(e,n),ti(e)):Lo(Te,n.stateNode));break;case 4:r=Te,i=gt,Te=n.stateNode.containerInfo,gt=!0,Jt(e,t,n),Te=r,gt=i;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Bl(n,t,o),i=i.next}while(i!==r)}Jt(e,t,n);break;case 1:if(!Le&&(Zn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ve(n,t,l)}Jt(e,t,n);break;case 21:Jt(e,t,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,Jt(e,t,n),Le=r):Jt(e,t,n);break;default:Jt(e,t,n)}}function Bc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sg),t.forEach(function(r){var i=jg.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Te=l.stateNode,gt=!1;break e;case 3:Te=l.stateNode.containerInfo,gt=!0;break e;case 4:Te=l.stateNode.containerInfo,gt=!0;break e}l=l.return}if(Te===null)throw Error(j(160));Ph(s,o,i),Te=null,gt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ve(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nh(t,e),t=t.sibling}function Nh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(t,e),Ct(e),r&4){try{Kr(3,e,e.return),to(3,e)}catch(S){ve(e,e.return,S)}try{Kr(5,e,e.return)}catch(S){ve(e,e.return,S)}}break;case 1:mt(t,e),Ct(e),r&512&&n!==null&&Zn(n,n.return);break;case 5:if(mt(t,e),Ct(e),r&512&&n!==null&&Zn(n,n.return),e.flags&32){var i=e.stateNode;try{Xr(i,"")}catch(S){ve(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&qf(i,s),pl(l,o);var u=pl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],f=a[o+1];c==="style"?ed(i,f):c==="dangerouslySetInnerHTML"?Zf(i,f):c==="children"?Xr(i,f):Sa(i,c,f,u)}switch(l){case"input":ul(i,s);break;case"textarea":Jf(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?er(i,!!s.multiple,g,!1):d!==!!s.multiple&&(s.defaultValue!=null?er(i,!!s.multiple,s.defaultValue,!0):er(i,!!s.multiple,s.multiple?[]:"",!1))}i[oi]=s}catch(S){ve(e,e.return,S)}}break;case 6:if(mt(t,e),Ct(e),r&4){if(e.stateNode===null)throw Error(j(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(S){ve(e,e.return,S)}}break;case 3:if(mt(t,e),Ct(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ti(t.containerInfo)}catch(S){ve(e,e.return,S)}break;case 4:mt(t,e),Ct(e);break;case 13:mt(t,e),Ct(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ga=we())),r&4&&Bc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Le=(u=Le)||c,mt(t,e),Le=u):mt(t,e),Ct(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(b=e,c=e.child;c!==null;){for(f=b=c;b!==null;){switch(d=b,g=d.child,d.tag){case 0:case 11:case 14:case 15:Kr(4,d,d.return);break;case 1:Zn(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){ve(r,n,S)}}break;case 5:Zn(d,d.return);break;case 22:if(d.memoizedState!==null){Hc(f);continue}}g!==null?(g.return=d,b=g):Hc(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Gf("display",o))}catch(S){ve(e,e.return,S)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(S){ve(e,e.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mt(t,e),Ct(e),r&4&&Bc(e);break;case 21:break;default:mt(t,e),Ct(e)}}function Ct(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ch(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xr(i,""),r.flags&=-33);var s=Fc(e);Vl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fc(e);Hl(e,l,o);break;default:throw Error(j(161))}}catch(a){ve(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xg(e,t,n){b=e,Oh(e)}function Oh(e,t,n){for(var r=(e.mode&1)!==0;b!==null;){var i=b,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||zi;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Le;l=zi;var u=Le;if(zi=o,(Le=a)&&!u)for(b=i;b!==null;)o=b,a=o.child,o.tag===22&&o.memoizedState!==null?Vc(i):a!==null?(a.return=o,b=a):Vc(i);for(;s!==null;)b=s,Oh(s),s=s.sibling;b=i,zi=l,Le=u}Uc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,b=s):Uc(e)}}function Uc(e){for(;b!==null;){var t=b;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||to(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Le)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Pc(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Pc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ti(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Le||t.flags&512&&Ul(t)}catch(d){ve(t,t.return,d)}}if(t===e){b=null;break}if(n=t.sibling,n!==null){n.return=t.return,b=n;break}b=t.return}}function Hc(e){for(;b!==null;){var t=b;if(t===e){b=null;break}var n=t.sibling;if(n!==null){n.return=t.return,b=n;break}b=t.return}}function Vc(e){for(;b!==null;){var t=b;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{to(4,t)}catch(a){ve(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){ve(t,i,a)}}var s=t.return;try{Ul(t)}catch(a){ve(t,s,a)}break;case 5:var o=t.return;try{Ul(t)}catch(a){ve(t,o,a)}}}catch(a){ve(t,t.return,a)}if(t===e){b=null;break}var l=t.sibling;if(l!==null){l.return=t.return,b=l;break}b=t.return}}var _g=Math.ceil,As=Yt.ReactCurrentDispatcher,Xa=Yt.ReactCurrentOwner,ft=Yt.ReactCurrentBatchConfig,ne=0,Oe=null,Se=null,je=0,Xe=0,Gn=wn(0),Ee=0,di=null,Ln=0,no=0,Za=0,Yr=null,We=null,Ga=0,dr=1/0,Rt=null,Is=!1,Wl=null,cn=null,Fi=!1,rn=null,Ms=0,Qr=0,Kl=null,is=-1,ss=0;function Be(){return ne&6?we():is!==-1?is:is=we()}function fn(e){return e.mode&1?ne&2&&je!==0?je&-je:og.transition!==null?(ss===0&&(ss=dd()),ss):(e=oe,e!==0||(e=window.event,e=e===void 0?16:wd(e.type)),e):1}function xt(e,t,n,r){if(50<Qr)throw Qr=0,Kl=null,Error(j(185));Si(e,n,r),(!(ne&2)||e!==Oe)&&(e===Oe&&(!(ne&2)&&(no|=n),Ee===4&&en(e,je)),qe(e,r),n===1&&ne===0&&!(t.mode&1)&&(dr=we()+500,Zs&&Sn()))}function qe(e,t){var n=e.callbackNode;oy(e,t);var r=ys(e,e===Oe?je:0);if(r===0)n!==null&&Gu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gu(n),t===1)e.tag===0?sg(Wc.bind(null,e)):$d(Wc.bind(null,e)),tg(function(){!(ne&6)&&Sn()}),n=null;else{switch(hd(r)){case 1:n=Ca;break;case 4:n=cd;break;case 16:n=ms;break;case 536870912:n=fd;break;default:n=ms}n=Lh(n,Th.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Th(e,t){if(is=-1,ss=0,ne&6)throw Error(j(327));var n=e.callbackNode;if(sr()&&e.callbackNode!==n)return null;var r=ys(e,e===Oe?je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ds(e,r);else{t=r;var i=ne;ne|=2;var s=Ah();(Oe!==e||je!==t)&&(Rt=null,dr=we()+500,An(e,t));do try{Pg();break}catch(l){jh(e,l)}while(!0);$a(),As.current=s,ne=i,Se!==null?t=0:(Oe=null,je=0,t=Ee)}if(t!==0){if(t===2&&(i=wl(e),i!==0&&(r=i,t=Yl(e,i))),t===1)throw n=di,An(e,0),en(e,r),qe(e,we()),n;if(t===6)en(e,r);else{if(i=e.current.alternate,!(r&30)&&!Eg(i)&&(t=Ds(e,r),t===2&&(s=wl(e),s!==0&&(r=s,t=Yl(e,s))),t===1))throw n=di,An(e,0),en(e,r),qe(e,we()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(j(345));case 2:Pn(e,We,Rt);break;case 3:if(en(e,r),(r&130023424)===r&&(t=Ga+500-we(),10<t)){if(ys(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Be(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Nl(Pn.bind(null,e,We,Rt),t);break}Pn(e,We,Rt);break;case 4:if(en(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-kt(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=we()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_g(r/1960))-r,10<r){e.timeoutHandle=Nl(Pn.bind(null,e,We,Rt),r);break}Pn(e,We,Rt);break;case 5:Pn(e,We,Rt);break;default:throw Error(j(329))}}}return qe(e,we()),e.callbackNode===n?Th.bind(null,e):null}function Yl(e,t){var n=Yr;return e.current.memoizedState.isDehydrated&&(An(e,t).flags|=256),e=Ds(e,t),e!==2&&(t=We,We=n,t!==null&&Ql(t)),e}function Ql(e){We===null?We=e:We.push.apply(We,e)}function Eg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_t(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function en(e,t){for(t&=~Za,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-kt(t),r=1<<n;e[n]=-1,t&=~r}}function Wc(e){if(ne&6)throw Error(j(327));sr();var t=ys(e,0);if(!(t&1))return qe(e,we()),null;var n=Ds(e,t);if(e.tag!==0&&n===2){var r=wl(e);r!==0&&(t=r,n=Yl(e,r))}if(n===1)throw n=di,An(e,0),en(e,t),qe(e,we()),n;if(n===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pn(e,We,Rt),qe(e,we()),null}function eu(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(dr=we()+500,Zs&&Sn())}}function bn(e){rn!==null&&rn.tag===0&&!(ne&6)&&sr();var t=ne;ne|=1;var n=ft.transition,r=oe;try{if(ft.transition=null,oe=1,e)return e()}finally{oe=r,ft.transition=n,ne=t,!(ne&6)&&Sn()}}function tu(){Xe=Gn.current,fe(Gn)}function An(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,eg(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(Ra(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ks();break;case 3:cr(),fe(Ye),fe(be),Va();break;case 5:Ha(r);break;case 4:cr();break;case 13:fe(pe);break;case 19:fe(pe);break;case 10:za(r.type._context);break;case 22:case 23:tu()}n=n.return}if(Oe=e,Se=e=dn(e.current,null),je=Xe=t,Ee=0,di=null,Za=no=Ln=0,We=Yr=null,Tn!==null){for(t=0;t<Tn.length;t++)if(n=Tn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Tn=null}return e}function jh(e,t){do{var n=Se;try{if($a(),ts.current=js,Ts){for(var r=me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ts=!1}if(Rn=0,Ne=_e=me=null,Wr=!1,ui=0,Xa.current=null,n===null||n.return===null){Ee=1,di=t,Se=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=je,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Ic(o);if(g!==null){g.flags&=-257,Mc(g,o,l,s,t),g.mode&1&&Ac(s,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var S=new Set;S.add(a),t.updateQueue=S}else v.add(a);break e}else{if(!(t&1)){Ac(s,u,t),nu();break e}a=Error(j(426))}}else if(de&&l.mode&1){var T=Ic(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Mc(T,o,l,s,t),La(fr(a,l));break e}}s=a=fr(a,l),Ee!==4&&(Ee=2),Yr===null?Yr=[s]:Yr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=hh(s,a,t);Cc(s,m);break e;case 1:l=a;var h=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cn===null||!cn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=ph(s,l,t);Cc(s,x);break e}}s=s.return}while(s!==null)}Mh(n)}catch(E){t=E,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function Ah(){var e=As.current;return As.current=js,e===null?js:e}function nu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Oe===null||!(Ln&268435455)&&!(no&268435455)||en(Oe,je)}function Ds(e,t){var n=ne;ne|=2;var r=Ah();(Oe!==e||je!==t)&&(Rt=null,An(e,t));do try{Cg();break}catch(i){jh(e,i)}while(!0);if($a(),ne=n,As.current=r,Se!==null)throw Error(j(261));return Oe=null,je=0,Ee}function Cg(){for(;Se!==null;)Ih(Se)}function Pg(){for(;Se!==null&&!Xm();)Ih(Se)}function Ih(e){var t=Rh(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?Mh(e):Se=t,Xa.current=null}function Mh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wg(n,t),n!==null){n.flags&=32767,Se=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,Se=null;return}}else if(n=vg(n,t,Xe),n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ee===0&&(Ee=5)}function Pn(e,t,n){var r=oe,i=ft.transition;try{ft.transition=null,oe=1,Ng(e,t,n,r)}finally{ft.transition=i,oe=r}return null}function Ng(e,t,n,r){do sr();while(rn!==null);if(ne&6)throw Error(j(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ly(e,s),e===Oe&&(Se=Oe=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fi||(Fi=!0,Lh(ms,function(){return sr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ft.transition,ft.transition=null;var o=oe;oe=1;var l=ne;ne|=4,Xa.current=null,kg(e,n),Nh(n,e),Yy(Cl),gs=!!El,Cl=El=null,e.current=n,xg(n),Zm(),ne=l,oe=o,ft.transition=s}else e.current=n;if(Fi&&(Fi=!1,rn=e,Ms=i),s=e.pendingLanes,s===0&&(cn=null),ty(n.stateNode),qe(e,we()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Is)throw Is=!1,e=Wl,Wl=null,e;return Ms&1&&e.tag!==0&&sr(),s=e.pendingLanes,s&1?e===Kl?Qr++:(Qr=0,Kl=e):Qr=0,Sn(),null}function sr(){if(rn!==null){var e=hd(Ms),t=ft.transition,n=oe;try{if(ft.transition=null,oe=16>e?16:e,rn===null)var r=!1;else{if(e=rn,rn=null,Ms=0,ne&6)throw Error(j(331));var i=ne;for(ne|=4,b=e.current;b!==null;){var s=b,o=s.child;if(b.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(b=u;b!==null;){var c=b;switch(c.tag){case 0:case 11:case 15:Kr(8,c,s)}var f=c.child;if(f!==null)f.return=c,b=f;else for(;b!==null;){c=b;var d=c.sibling,g=c.return;if(Eh(c),c===u){b=null;break}if(d!==null){d.return=g,b=d;break}b=g}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}b=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,b=o;else e:for(;b!==null;){if(s=b,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Kr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,b=m;break e}b=s.return}}var h=e.current;for(b=h;b!==null;){o=b;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,b=y;else e:for(o=h;b!==null;){if(l=b,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:to(9,l)}}catch(E){ve(l,l.return,E)}if(l===o){b=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,b=x;break e}b=l.return}}if(ne=i,Sn(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Ys,e)}catch{}r=!0}return r}finally{oe=n,ft.transition=t}}return!1}function Kc(e,t,n){t=fr(n,t),t=hh(e,t,1),e=un(e,t,1),t=Be(),e!==null&&(Si(e,1,t),qe(e,t))}function ve(e,t,n){if(e.tag===3)Kc(e,e,n);else for(;t!==null;){if(t.tag===3){Kc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cn===null||!cn.has(r))){e=fr(n,e),e=ph(t,e,1),t=un(t,e,1),e=Be(),t!==null&&(Si(t,1,e),qe(t,e));break}}t=t.return}}function Og(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&n,Oe===e&&(je&n)===n&&(Ee===4||Ee===3&&(je&130023424)===je&&500>we()-Ga?An(e,0):Za|=n),qe(e,t)}function Dh(e,t){t===0&&(e.mode&1?(t=ji,ji<<=1,!(ji&130023424)&&(ji=4194304)):t=1);var n=Be();e=Vt(e,t),e!==null&&(Si(e,t,n),qe(e,n))}function Tg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Dh(e,n)}function jg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(t),Dh(e,n)}var Rh;Rh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)Ke=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ke=!1,gg(e,t,n);Ke=!!(e.flags&131072)}else Ke=!1,de&&t.flags&1048576&&zd(t,Es,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rs(e,t),e=t.pendingProps;var i=lr(t,be.current);ir(t,n),i=Ka(null,t,r,e,i,n);var s=Ya();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qe(r)?(s=!0,xs(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ba(t),i.updater=eo,t.stateNode=i,i._reactInternals=t,Dl(t,r,e,n),t=bl(null,t,r,!0,s,n)):(t.tag=0,de&&s&&Da(t),ze(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Ig(r),e=yt(r,e),i){case 0:t=Ll(null,t,r,e,n);break e;case 1:t=Lc(null,t,r,e,n);break e;case 11:t=Dc(null,t,r,e,n);break e;case 14:t=Rc(null,t,r,yt(r.type,e),n);break e}throw Error(j(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),Ll(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),Lc(e,t,r,i,n);case 3:e:{if(vh(t),e===null)throw Error(j(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Wd(e,t),Ns(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=fr(Error(j(423)),t),t=bc(e,t,r,n,i);break e}else if(r!==i){i=fr(Error(j(424)),t),t=bc(e,t,r,n,i);break e}else for(Ze=an(t.stateNode.containerInfo.firstChild),tt=t,de=!0,wt=null,n=Hd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ar(),r===i){t=Wt(e,t,n);break e}ze(e,t,r,n)}t=t.child}return t;case 5:return Kd(t),e===null&&Al(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Pl(r,i)?o=null:s!==null&&Pl(r,s)&&(t.flags|=32),gh(e,t),ze(e,t,o,n),t.child;case 6:return e===null&&Al(t),null;case 13:return wh(e,t,n);case 4:return Ua(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ur(t,null,r,n):ze(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),Dc(e,t,r,i,n);case 7:return ze(e,t,t.pendingProps,n),t.child;case 8:return ze(e,t,t.pendingProps.children,n),t.child;case 12:return ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ue(Cs,r._currentValue),r._currentValue=o,s!==null)if(_t(s.value,o)){if(s.children===i.children&&!Ye.current){t=Wt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Ft(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Il(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Il(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ze(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ir(t,n),i=ht(i),r=r(i),t.flags|=1,ze(e,t,r,n),t.child;case 14:return r=t.type,i=yt(r,t.pendingProps),i=yt(r.type,i),Rc(e,t,r,i,n);case 15:return mh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yt(r,i),rs(e,t),t.tag=1,Qe(r)?(e=!0,xs(t)):e=!1,ir(t,n),dh(t,r,i),Dl(t,r,i,n),bl(null,t,r,!0,e,n);case 19:return Sh(e,t,n);case 22:return yh(e,t,n)}throw Error(j(156,t.tag))};function Lh(e,t){return ud(e,t)}function Ag(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ct(e,t,n,r){return new Ag(e,t,n,r)}function ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ig(e){if(typeof e=="function")return ru(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xa)return 11;if(e===_a)return 14}return 2}function dn(e,t){var n=e.alternate;return n===null?(n=ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function os(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")ru(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Hn:return In(n.children,i,s,t);case ka:o=8,i|=8;break;case il:return e=ct(12,n,t,i|2),e.elementType=il,e.lanes=s,e;case sl:return e=ct(13,n,t,i),e.elementType=sl,e.lanes=s,e;case ol:return e=ct(19,n,t,i),e.elementType=ol,e.lanes=s,e;case Kf:return ro(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vf:o=10;break e;case Wf:o=9;break e;case xa:o=11;break e;case _a:o=14;break e;case Xt:o=16,r=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=ct(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function In(e,t,n,r){return e=ct(7,e,r,t),e.lanes=n,e}function ro(e,t,n,r){return e=ct(22,e,r,t),e.elementType=Kf,e.lanes=n,e.stateNode={isHidden:!1},e}function Vo(e,t,n){return e=ct(6,e,null,t),e.lanes=n,e}function Wo(e,t,n){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mg(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Co(0),this.expirationTimes=Co(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Co(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iu(e,t,n,r,i,s,o,l,a){return e=new Mg(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ct(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ba(s),e}function Dg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Un,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bh(e){if(!e)return mn;e=e._reactInternals;e:{if(Fn(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var n=e.type;if(Qe(n))return bd(e,n,t)}return t}function $h(e,t,n,r,i,s,o,l,a){return e=iu(n,r,!0,e,i,s,o,l,a),e.context=bh(null),n=e.current,r=Be(),i=fn(n),s=Ft(r,i),s.callback=t??null,un(n,s,i),e.current.lanes=i,Si(e,i,r),qe(e,r),e}function io(e,t,n,r){var i=t.current,s=Be(),o=fn(i);return n=bh(n),t.context===null?t.context=n:t.pendingContext=n,t=Ft(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=un(i,t,o),e!==null&&(xt(e,i,o,s),es(e,i,o)),o}function Rs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function su(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}function Rg(){return null}var zh=typeof reportError=="function"?reportError:function(e){console.error(e)};function ou(e){this._internalRoot=e}so.prototype.render=ou.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));io(e,t,null,null)};so.prototype.unmount=ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bn(function(){io(null,e,null,null)}),t[Ht]=null}};function so(e){this._internalRoot=e}so.prototype.unstable_scheduleHydration=function(e){if(e){var t=yd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gt.length&&t!==0&&t<Gt[n].priority;n++);Gt.splice(n,0,e),n===0&&vd(e)}};function lu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qc(){}function Lg(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Rs(o);s.call(u)}}var o=$h(t,r,e,0,null,!1,!1,"",Qc);return e._reactRootContainer=o,e[Ht]=o.current,ii(e.nodeType===8?e.parentNode:e),bn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Rs(a);l.call(u)}}var a=iu(e,0,!1,null,null,!1,!1,"",Qc);return e._reactRootContainer=a,e[Ht]=a.current,ii(e.nodeType===8?e.parentNode:e),bn(function(){io(t,a,n,r)}),a}function lo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Rs(o);l.call(a)}}io(t,o,e,i)}else o=Lg(n,t,e,i,r);return Rs(o)}pd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rr(t.pendingLanes);n!==0&&(Pa(t,n|1),qe(t,we()),!(ne&6)&&(dr=we()+500,Sn()))}break;case 13:bn(function(){var r=Vt(e,1);if(r!==null){var i=Be();xt(r,e,1,i)}}),su(e,1)}};Na=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var n=Be();xt(t,e,134217728,n)}su(e,134217728)}};md=function(e){if(e.tag===13){var t=fn(e),n=Vt(e,t);if(n!==null){var r=Be();xt(n,e,t,r)}su(e,t)}};yd=function(){return oe};gd=function(e,t){var n=oe;try{return oe=e,t()}finally{oe=n}};yl=function(e,t,n){switch(t){case"input":if(ul(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Xs(r);if(!i)throw Error(j(90));Qf(r),ul(r,i)}}}break;case"textarea":Jf(e,n);break;case"select":t=n.value,t!=null&&er(e,!!n.multiple,t,!1)}};rd=eu;id=bn;var bg={usingClientEntryPoint:!1,Events:[xi,Yn,Xs,td,nd,eu]},Tr={findFiberByHostInstance:On,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$g={bundleType:Tr.bundleType,version:Tr.version,rendererPackageName:Tr.rendererPackageName,rendererConfig:Tr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ld(e),e===null?null:e.stateNode},findFiberByHostInstance:Tr.findFiberByHostInstance||Rg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bi.isDisabled&&Bi.supportsFiber)try{Ys=Bi.inject($g),Tt=Bi}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bg;st.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lu(t))throw Error(j(200));return Dg(e,t,null,n)};st.createRoot=function(e,t){if(!lu(e))throw Error(j(299));var n=!1,r="",i=zh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=iu(e,1,!1,null,null,n,!1,r,i),e[Ht]=t.current,ii(e.nodeType===8?e.parentNode:e),new ou(t)};st.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=ld(t),e=e===null?null:e.stateNode,e};st.flushSync=function(e){return bn(e)};st.hydrate=function(e,t,n){if(!oo(t))throw Error(j(200));return lo(null,e,t,!0,n)};st.hydrateRoot=function(e,t,n){if(!lu(e))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=zh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=$h(t,null,e,1,n??null,i,!1,s,o),e[Ht]=t.current,ii(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new so(t)};st.render=function(e,t,n){if(!oo(t))throw Error(j(200));return lo(null,e,t,!1,n)};st.unmountComponentAtNode=function(e){if(!oo(e))throw Error(j(40));return e._reactRootContainer?(bn(function(){lo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};st.unstable_batchedUpdates=eu;st.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oo(n))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return lo(e,t,n,!1,r)};st.version="18.3.1-next-f1338f8080-20240426";function Fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fh)}catch(e){console.error(e)}}Fh(),Ff.exports=st;var zg=Ff.exports,Bh,qc=zg;Bh=qc.createRoot,qc.hydrateRoot;let Fg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Bg=(e=21)=>{let t="",n=e|0;for(;n--;)t+=Fg[Math.random()*64|0];return t};function St(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function hr(e){return!!e&&!!e[rt]}function $n(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===qg}(e)||Array.isArray(e)||!!e[rf]||!!(!((t=e.constructor)===null||t===void 0)&&t[rf])||au(e)||uu(e))}function hi(e,t,n){n===void 0&&(n=!1),vr(e)===0?(n?Object.keys:pu)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function vr(e){var t=e[rt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:au(e)?2:uu(e)?3:0}function ql(e,t){return vr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ug(e,t){return vr(e)===2?e.get(t):e[t]}function Uh(e,t,n){var r=vr(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Hg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function au(e){return Yg&&e instanceof Map}function uu(e){return Qg&&e instanceof Set}function Nn(e){return e.o||e.t}function cu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Jg(e);delete t[rt];for(var n=pu(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function fu(e,t){return t===void 0&&(t=!1),du(e)||hr(e)||!$n(e)||(vr(e)>1&&(e.set=e.add=e.clear=e.delete=Vg),Object.freeze(e),t&&hi(e,function(n,r){return fu(r,!0)},!0)),e}function Vg(){St(2)}function du(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function At(e){var t=Xg[e];return t||St(18,e),t}function Jc(){return pi}function Ko(e,t){t&&(At("Patches"),e.u=[],e.s=[],e.v=t)}function Ls(e){Jl(e),e.p.forEach(Wg),e.p=null}function Jl(e){e===pi&&(pi=e.l)}function Xc(e){return pi={p:[],l:pi,h:e,m:!0,_:0}}function Wg(e){var t=e[rt];t.i===0||t.i===1?t.j():t.g=!0}function Yo(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||At("ES5").S(t,e,r),r?(n[rt].P&&(Ls(t),St(4)),$n(e)&&(e=bs(t,e),t.l||$s(t,e)),t.u&&At("Patches").M(n[rt].t,e,t.u,t.s)):e=bs(t,n,[]),Ls(t),t.u&&t.v(t.u,t.s),e!==Hh?e:void 0}function bs(e,t,n){if(du(t))return t;var r=t[rt];if(!r)return hi(t,function(l,a){return Zc(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return $s(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=cu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),hi(s,function(l,a){return Zc(e,r,i,l,a,n,o)}),$s(e,i,!1),n&&e.u&&At("Patches").N(r,n,e.u,e.s)}return r.o}function Zc(e,t,n,r,i,s,o){if(hr(i)){var l=bs(e,i,s&&t&&t.i!==3&&!ql(t.R,r)?s.concat(r):void 0);if(Uh(n,r,l),!hr(l))return;e.m=!1}else o&&n.add(i);if($n(i)&&!du(i)){if(!e.h.D&&e._<1)return;bs(e,i),t&&t.A.l||$s(e,i)}}function $s(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&fu(t,n)}function Qo(e,t){var n=e[rt];return(n?Nn(n):e)[t]}function Gc(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Xl(e){e.P||(e.P=!0,e.l&&Xl(e.l))}function qo(e){e.o||(e.o=cu(e.t))}function Zl(e,t,n){var r=au(t)?At("MapSet").F(t,n):uu(t)?At("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:Jc(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=Gl;o&&(a=[l],u=br);var c=Proxy.revocable(a,u),f=c.revoke,d=c.proxy;return l.k=d,l.j=f,d}(t,n):At("ES5").J(t,n);return(n?n.A:Jc()).p.push(r),r}function Kg(e){return hr(e)||St(22,e),function t(n){if(!$n(n))return n;var r,i=n[rt],s=vr(n);if(i){if(!i.P&&(i.i<4||!At("ES5").K(i)))return i.t;i.I=!0,r=ef(n,s),i.I=!1}else r=ef(n,s);return hi(r,function(o,l){i&&Ug(i.t,o)===l||Uh(r,o,t(l))}),s===3?new Set(r):r}(e)}function ef(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return cu(e)}var tf,pi,hu=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Yg=typeof Map<"u",Qg=typeof Set<"u",nf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Hh=hu?Symbol.for("immer-nothing"):((tf={})["immer-nothing"]=!0,tf),rf=hu?Symbol.for("immer-draftable"):"__$immer_draftable",rt=hu?Symbol.for("immer-state"):"__$immer_state",qg=""+Object.prototype.constructor,pu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Jg=Object.getOwnPropertyDescriptors||function(e){var t={};return pu(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Xg={},Gl={get:function(e,t){if(t===rt)return e;var n=Nn(e);if(!ql(n,t))return function(i,s,o){var l,a=Gc(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!$n(r)?r:r===Qo(e.t,t)?(qo(e),e.o[t]=Zl(e.A.h,r,e)):r},has:function(e,t){return t in Nn(e)},ownKeys:function(e){return Reflect.ownKeys(Nn(e))},set:function(e,t,n){var r=Gc(Nn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Qo(Nn(e),t),s=i==null?void 0:i[rt];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Hg(n,i)&&(n!==void 0||ql(e.t,t)))return!0;qo(e),Xl(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return Qo(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,qo(e),Xl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Nn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){St(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){St(12)}},br={};hi(Gl,function(e,t){br[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),br.deleteProperty=function(e,t){return br.set.call(this,e,t,void 0)},br.set=function(e,t,n){return Gl.set.call(this,e[0],t,n,e[0])};var Zg=function(){function e(n){var r=this;this.O=nf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(S){var T=this;S===void 0&&(S=l);for(var m=arguments.length,h=Array(m>1?m-1:0),y=1;y<m;y++)h[y-1]=arguments[y];return a.produce(S,function(x){var E;return(E=s).call.apply(E,[T,x].concat(h))})}}var u;if(typeof s!="function"&&St(6),o!==void 0&&typeof o!="function"&&St(7),$n(i)){var c=Xc(r),f=Zl(r,i,void 0),d=!0;try{u=s(f),d=!1}finally{d?Ls(c):Jl(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(S){return Ko(c,o),Yo(S,c)},function(S){throw Ls(c),S}):(Ko(c,o),Yo(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Hh&&(u=void 0),r.D&&fu(u,!0),o){var g=[],v=[];At("Patches").M(i,u,g,v),o(g,v)}return u}St(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(f))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){$n(n)||St(8),hr(n)&&(n=Kg(n));var r=Xc(this),i=Zl(this,n,void 0);return i[rt].C=!0,Jl(r),i},t.finishDraft=function(n,r){var i=n&&n[rt],s=i.A;return Ko(s,r),Yo(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!nf&&St(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=At("Patches").$;return hr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),it=new Zg,Gg=it.produce;it.produceWithPatches.bind(it);it.setAutoFreeze.bind(it);it.setUseProxies.bind(it);it.applyPatches.bind(it);it.createDraft.bind(it);it.finishDraft.bind(it);class ev{constructor(t){const n=tv();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function tv(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function sf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Vh(e,t){const n=new ev(e),r=n.next.bind(n);return t&&sf(t,n),r.state=()=>sf(n,{}),r}class of{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=Vh(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const nv={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new of(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=of.seed()),{seed:t}},playerView:()=>{}};var rv=Function.prototype,iv=rv.toString;iv.call(Object);const mi="MAKE_MOVE",ao="GAME_EVENT",uo="REDO",mu="RESET",yu="SYNC",co="UNDO",gu="UPDATE",vu="PATCH",Wh="PLUGIN",fo="STRIP_TRANSIENTS",Kh=(e,t,n,r)=>({type:mi,payload:{type:e,args:t,playerID:n,credentials:r}}),qr=(e,t,n,r)=>({type:ao,payload:{type:e,args:t,playerID:n,credentials:r}}),Yh=(e,t,n,r)=>({type:ao,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Qh=e=>({type:yu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),qh=(e,t,n,r)=>({type:vu,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),Jh=(e,t)=>({type:gu,state:e,deltalog:t,clientOnly:!0}),Xh=e=>({type:mu,state:e,clientOnly:!0}),Zh=(e,t)=>({type:co,payload:{type:null,args:null,playerID:e,credentials:t}}),Gh=(e,t)=>({type:uo,payload:{type:null,args:null,playerID:e,credentials:t}}),sv=(e,t,n,r)=>({type:Wh,payload:{type:e,args:t,playerID:n,credentials:r}}),ep=()=>({type:fo});var ov=Object.freeze({__proto__:null,makeMove:Kh,gameEvent:qr,automaticGameEvent:Yh,sync:Qh,patch:qh,update:Jh,reset:Xh,undo:Zh,redo:Gh,plugin:sv,stripTransients:ep});const yn="INVALID_MOVE",lv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=Gg(t.G,s=>{const o=e({...t,G:s},...n);if(o===yn){r=!0;return}return o});return r?yn:i}};var Re;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Re||(Re={}));var Lt;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Lt||(Lt={}));class av{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,Lt.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,Lt.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Re.TURN_ON_END:case Re.PHASE_ON_END:return r(s.error,Lt.StageEventInOnEnd);case Re.PHASE_ON_BEGIN:return r(s.error,Lt.StageEventInPhaseBegin);case Re.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,Lt.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Re.TURN_ON_END||s.calledFrom===Re.PHASE_ON_END)return r(s.error,Lt.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Re.PHASE_ON_END)return r(s.error,Lt.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=Yh(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const wu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new av(e.flow,t,n).api()},uv={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},cv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},fv=(...e)=>console.error(...e);function re(e){fv("ERROR:",e)}const Su=[lv,nv,uv,cv],Ei=[...Su,wu],dv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),pr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),tp=(e,t,n)=>[...Su,...n,wu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),hv=(e,t)=>([...Ei,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),ea=(e,t)=>([...Ei,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),pv=(e,t)=>([...Su,...t.game.plugins,wu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),mv=(e,t)=>[...Ei,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),yv=(e,t)=>[...Ei,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,np=(e,t)=>{const n=pv(e,t),r=yv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return re(`${i} plugin declared action invalid:
${s}`),[e,r]},rp=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Ei,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function zs(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Fs(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Bs.NULL),n=a}else{if(zs(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Ui(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Ui(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Ui(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Ui(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function gv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=Fs(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Ui(e,t,n,r,i){(typeof i!="object"||i===Bs.NULL)&&(i={stage:i}),i.stage!==void 0&&(zs(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function ta(e,t){return e[t]+""}function vv(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...pr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((d,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&re(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const f=ta(a,u);return r={...r,currentPlayer:f,playOrderPos:u,playOrder:a},r=Fs(r,t.activePlayers||{}),r}function wv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&re(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=ta(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:re(`invalid argument to endTurn: ${u}`)}});else{const c={...pr(e),G:s,ctx:o},f=i.next(c),d=typeof f;f!==void 0&&d!=="number"&&re(`invalid value returned by turn.order.next  expected number or undefined got ${d} ${f}.`),f===void 0?a=!0:(l=f,t=ta(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const Sv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Bs={NULL:null};var ku={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.Pointer=Bt.escapeToken=Bt.unescapeToken=void 0;function ip(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Bt.unescapeToken=ip;function sp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Bt.escapeToken=sp;var kv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(ip);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(sp).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Bt.Pointer=kv;var ge={},xu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(xu);var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.diffAny=Fe.diffObjects=Fe.diffArrays=Fe.intersection=Fe.subtract=Fe.isDestructive=void 0;var yi=xu;function xv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}Fe.isDestructive=xv;function na(e,t){var n={};for(var r in e)yi.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)yi.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}Fe.subtract=na;function op(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)yi.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}Fe.intersection=op;function _v(e){return e.op==="add"}function Ev(e){return e.op==="remove"}function Jo(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function lp(e,t,n,r){r===void 0&&(r=ho);var i={"0,0":{operations:[],cost:0}};function s(c,f){var d="".concat(c,",").concat(f),g=i[d];if(g===void 0){if(c>0&&f>0&&!r(e[c-1],t[f-1],n.add(String(c-1))).length)g=s(c-1,f-1);else{var v=[];if(c>0){var S=s(c-1,f),T={op:"remove",index:c-1};v.push(Jo(S,T))}if(f>0){var m=s(c,f-1),h={op:"add",index:c-1,value:t[f-1]};v.push(Jo(m,h))}if(c>0&&f>0){var y=s(c-1,f-1),x={op:"replace",index:c-1,original:e[c-1],value:t[f-1]};v.push(Jo(y,x))}var E=v.sort(function(O,_){return O.cost-_.cost})[0];g=E}i[d]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,f){var d=c[0],g=c[1];if(_v(f)){var v=f.index+1+g,S=v<o+g?String(v):"-",T={op:f.op,path:n.add(S).toString(),value:f.value};return[d.concat(T),g+1]}else if(Ev(f)){var T={op:f.op,path:n.add(String(f.index+g)).toString()};return[d.concat(T),g-1]}else{var m=n.add(String(f.index+g)),h=r(f.original,f.value,m);return[d.concat.apply(d,h),g]}},[[],0])[0];return u}Fe.diffArrays=lp;function ap(e,t,n,r){r===void 0&&(r=ho);var i=[];return na(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),na(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),op([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}Fe.diffObjects=ap;function ho(e,t,n,r){if(r===void 0&&(r=ho),e===t)return[];var i=(0,yi.objectType)(e),s=(0,yi.objectType)(t);return i=="array"&&s=="array"?lp(e,t,n,r):i=="object"&&s=="object"?ap(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Fe.diffAny=ho;var _u=zr&&zr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ge,"__esModule",{value:!0});ge.apply=ge.InvalidOperationError=ge.test=ge.copy=ge.move=ge.replace=ge.remove=ge.add=ge.TestError=ge.MissingError=void 0;var Kt=Bt,Eu=xu,Cv=Fe,It=function(e){_u(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);ge.MissingError=It;var up=function(e){_u(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);ge.TestError=up;function Cu(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function cp(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function fp(e,t){var n=Kt.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new It(t.path):(Cu(n.parent,n.key,(0,Eu.clone)(t.value)),null)}ge.add=fp;function dp(e,t){var n=Kt.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new It(t.path):(cp(n.parent,n.key),null)}ge.remove=dp;function hp(e,t){var n=Kt.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new It(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new It(t.path)}else if(n.value===void 0)return new It(t.path);return n.parent[n.key]=(0,Eu.clone)(t.value),null}ge.replace=hp;function pp(e,t){var n=Kt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new It(t.from);var r=Kt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new It(t.path):(cp(n.parent,n.key),Cu(r.parent,r.key,n.value),null)}ge.move=pp;function mp(e,t){var n=Kt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new It(t.from);var r=Kt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new It(t.path):(Cu(r.parent,r.key,(0,Eu.clone)(n.value)),null)}ge.copy=mp;function yp(e,t){var n=Kt.Pointer.fromJSON(t.path).evaluate(e);return(0,Cv.diffAny)(n.value,t.value,new Kt.Pointer).length?new up(n.value,t.value):null}ge.test=yp;var gp=function(e){_u(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);ge.InvalidOperationError=gp;function Pv(e,t){switch(t.op){case"add":return fp(e,t);case"remove":return dp(e,t);case"replace":return hp(e,t);case"move":return pp(e,t);case"copy":return mp(e,t);case"test":return yp(e,t)}return new gp(t)}ge.apply=Pv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Bt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=ge,r=Fe;function i(u,c){return c.map(function(f){return(0,n.apply)(u,f)})}e.applyPatch=i;function s(u){function c(f,d,g){var v=u(f,d,g);return Array.isArray(v)?v:(0,r.diffAny)(f,d,g,c)}return c}function o(u,c,f){var d=new t.Pointer;return(f?s(f):r.diffAny)(u,c,d)}e.createPatch=o;function l(u,c){var f=t.Pointer.fromJSON(c).evaluate(u);if(f!==void 0)return{op:"test",path:c,value:f.value}}function a(u,c){var f=new Array;return c.filter(r.isDestructive).forEach(function(d){var g=l(u,d.path);if(g&&f.push(g),"from"in d){var v=l(u,d.from);v&&f.push(v)}}),f}e.createTests=a})(ku);function Nv({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:w})=>w),i||(i={});const l={...t};""in l&&re("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(w=>u.add(w));const f=(w,k)=>{const P=tp(w,k,o);return L=>{const B=pr(L);return P({...B,G:L.G,ctx:L.ctx,playerID:L.playerID})}},d=w=>k=>{const P=pr(k);return w({...P,G:k.G,ctx:k.ctx})},g={onEnd:f(r,Re.GAME_ON_END),endIf:d(n)};for(const w in l){const k=l[w];if(k.start===!0&&(c=w),k.moves!==void 0)for(const P of Object.keys(k.moves))a[w+"."+P]=k.moves[P],u.add(P);k.endIf===void 0&&(k.endIf=()=>{}),k.onBegin===void 0&&(k.onBegin=({G:P})=>P),k.onEnd===void 0&&(k.onEnd=({G:P})=>P),k.turn===void 0&&(k.turn=i),k.turn.order===void 0&&(k.turn.order=Sv.DEFAULT),k.turn.onBegin===void 0&&(k.turn.onBegin=({G:P})=>P),k.turn.onEnd===void 0&&(k.turn.onEnd=({G:P})=>P),k.turn.endIf===void 0&&(k.turn.endIf=()=>!1),k.turn.onMove===void 0&&(k.turn.onMove=({G:P})=>P),k.turn.stages===void 0&&(k.turn.stages={}),zs(k.turn,!0);for(const P in k.turn.stages){const B=k.turn.stages[P].moves||{};for(const V of Object.keys(B)){const te=w+"."+P+"."+V;a[te]=B[V],u.add(V)}}if(k.wrapped={onBegin:f(k.onBegin,Re.PHASE_ON_BEGIN),onEnd:f(k.onEnd,Re.PHASE_ON_END),endIf:d(k.endIf)},k.turn.wrapped={onMove:f(k.turn.onMove,Re.TURN_ON_MOVE),onBegin:f(k.turn.onBegin,Re.TURN_ON_BEGIN),onEnd:f(k.turn.onEnd,Re.TURN_ON_END),endIf:d(k.turn.endIf)},typeof k.next!="function"){const{next:P}=k;k.next=()=>P||null}k.wrapped.next=d(k.next)}function v(w){return w.phase?l[w.phase]:l[""]}function S(w){return w}function T(w,k){const P=new Set,L=new Set;for(let B=0;B<k.length;B++){const{fn:V,arg:te,...Z}=k[B];if(V===$){L.clear();const Pe=w.ctx.phase;if(P.has(Pe)){const Et={...w.ctx,phase:null};return{...w,ctx:Et}}P.add(Pe)}const xe=[];if(w=V(w,{...Z,arg:te,next:xe}),V===R)break;const se=N(w);if(se){k.push({fn:R,arg:se,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}const he=A(w);if(he){k.push({fn:$,arg:he,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}if([S,O,_].includes(V)){const Pe=C(w);if(Pe){k.push({fn:K,arg:Pe,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}}k.push(...xe)}return w}function m(w,{next:k}){return k.push({fn:h}),w}function h(w,{next:k}){let{G:P,ctx:L}=w;return P=v(L).wrapped.onBegin(w),k.push({fn:y}),{...w,G:P,ctx:L}}function y(w,{currentPlayer:k}){let{ctx:P}=w;const L=v(P);k?(P={...P,currentPlayer:k},L.turn.activePlayers&&(P=Fs(P,L.turn.activePlayers))):P=vv(w,L.turn);const B=P.turn+1;P={...P,turn:B,numMoves:0,_prevActivePlayers:[]};const V=L.turn.wrapped.onBegin({...w,ctx:P});return{...w,G:V,ctx:P,_undo:[],_redo:[]}}function x(w,{arg:k,next:P,phase:L}){const B=v({phase:L});let{ctx:V}=w;if(k&&k.next)if(k.next in l)V={...V,phase:k.next};else return re("invalid phase: "+k.next),w;else V={...V,phase:B.wrapped.next(w)||null};return w={...w,ctx:V},P.push({fn:h}),w}function E(w,{arg:k,currentPlayer:P,next:L}){let{G:B,ctx:V}=w;const te=v(V),{endPhase:Z,ctx:xe}=wv(w,P,te.turn,k);return V=xe,w={...w,G:B,ctx:V},Z?L.push({fn:$,turn:V.turn,phase:V.phase}):L.push({fn:y,currentPlayer:V.currentPlayer}),w}function O(w,{arg:k,playerID:P}){if((typeof k=="string"||k===Bs.NULL)&&(k={stage:k}),typeof k!="object")return w;zs(k);let{ctx:L}=w,{activePlayers:B,_activePlayersMinMoves:V,_activePlayersMaxMoves:te,_activePlayersNumMoves:Z}=L;return k.stage!==void 0&&(B===null&&(B={}),B[P]=k.stage,Z[P]=0,k.minMoves&&(V===null&&(V={}),V[P]=k.minMoves),k.maxMoves&&(te===null&&(te={}),te[P]=k.maxMoves)),L={...L,activePlayers:B,_activePlayersMinMoves:V,_activePlayersMaxMoves:te,_activePlayersNumMoves:Z},{...w,ctx:L}}function _(w,{arg:k}){return{...w,ctx:Fs(w.ctx,k)}}function N(w){return g.endIf(w)}function A(w){return v(w.ctx).wrapped.endIf(w)}function C(w){const k=v(w.ctx),P=w.ctx.numMoves||0;return k.turn.maxMoves&&P>=k.turn.maxMoves?!0:k.turn.wrapped.endIf(w)}function R(w,{arg:k,phase:P}){w=$(w,{}),k===void 0&&(k=!0),w={...w,ctx:{...w.ctx,gameover:k}};const L=g.onEnd(w);return{...w,G:L}}function $(w,{arg:k,next:P,turn:L,automatic:B}){w=K(w,{turn:L,force:!0,automatic:!0});const{phase:V,turn:te}=w.ctx;if(P&&P.push({fn:x,arg:k,phase:V}),V===null)return w;const xe=v(w.ctx).wrapped.onEnd(w),se={...w.ctx,phase:null},he=qr("endPhase",k),{_stateID:Pe}=w,Et={action:he,_stateID:Pe,turn:te,phase:V};B&&(Et.automatic=!0);const kn=[...w.deltalog||[],Et];return{...w,G:xe,ctx:se,deltalog:kn}}function K(w,{arg:k,next:P,turn:L,force:B,automatic:V,playerID:te}){if(L!==w.ctx.turn)return w;const{currentPlayer:Z,numMoves:xe,phase:se,turn:he}=w.ctx,Pe=v(w.ctx),Et=xe||0;if(!B&&Pe.turn.minMoves&&Et<Pe.turn.minMoves)return`${Pe.turn.minMoves}`,w;const kn=Pe.turn.wrapped.onEnd(w);P&&P.push({fn:E,arg:k,currentPlayer:Z});let qt={...w.ctx,activePlayers:null};if(k&&k.remove){te=te||Z;const xn=qt.playOrder.filter(hm=>hm!=te),dm=qt.playOrderPos>xn.length-1?0:qt.playOrderPos;if(qt={...qt,playOrder:xn,playOrderPos:dm},xn.length===0)return P.push({fn:$,turn:he,phase:se}),w}const vo=qr("endTurn",k),{_stateID:Fu}=w,kr={action:vo,_stateID:Fu,turn:he,phase:se};V&&(kr.automatic=!0);const wo=[...w.deltalog||[],kr];return{...w,G:kn,ctx:qt,deltalog:wo,_undo:[],_redo:[]}}function W(w,{arg:k,next:P,automatic:L,playerID:B}){B=B||w.ctx.currentPlayer;let{ctx:V,_stateID:te}=w,{activePlayers:Z,_activePlayersNumMoves:xe,_activePlayersMinMoves:se,_activePlayersMaxMoves:he,phase:Pe,turn:Et}=V;const kn=Z!==null&&B in Z,qt=v(V);if(!k&&kn){const xn=qt.turn.stages[Z[B]];xn&&xn.next&&(k=xn.next)}if(P&&P.push({fn:O,arg:k,playerID:B}),!kn)return w;const vo=xe[B]||0;if(se&&se[B]&&vo<se[B])return`${se[B]}`,w;Z={...Z},delete Z[B],se&&(se={...se},delete se[B]),he&&(he={...he},delete he[B]),V=gv({...V,activePlayers:Z,_activePlayersMinMoves:se,_activePlayersMaxMoves:he});const kr={action:qr("endStage",k),_stateID:te,turn:Et,phase:Pe};L&&(kr.automatic=!0);const wo=[...w.deltalog||[],kr];return{...w,ctx:V,deltalog:wo}}function le(w,k,P){const L=v(w),B=L.turn.stages,{activePlayers:V}=w;if(V&&V[P]!==void 0&&V[P]!==Bs.NULL&&B[V[P]]!==void 0&&B[V[P]].moves!==void 0){const Z=B[V[P]].moves;if(k in Z)return Z[k]}else if(L.moves){if(k in L.moves)return L.moves[k]}else if(k in e)return e[k];return null}function Ce(w,k){const{playerID:P,type:L}=k,{currentPlayer:B,activePlayers:V,_activePlayersMaxMoves:te}=w.ctx,Z=le(w.ctx,L,P),xe=!Z||typeof Z=="function"||Z.noLimit!==!0;let{numMoves:se,_activePlayersNumMoves:he}=w.ctx;xe&&(P===B&&se++,V&&he[P]++),w={...w,ctx:{...w.ctx,numMoves:se,_activePlayersNumMoves:he}},te&&he[P]>=te[P]&&(w=W(w,{playerID:P,automatic:!0}));const Et=v(w.ctx).turn.wrapped.onMove({...w,playerID:P});return w={...w,G:Et},T(w,[{fn:S}])}function ie(w,k,P){return T(w,[{fn:W,arg:P,playerID:k}])}function I(w,k){return T(w,[{fn:W,playerID:k}])}function z(w,k,P){return T(w,[{fn:_,arg:P}])}function F(w,k,P){return T(w,[{fn:$,phase:w.ctx.phase,turn:w.ctx.turn,arg:{next:P}}])}function G(w){return T(w,[{fn:$,phase:w.ctx.phase,turn:w.ctx.turn}])}function D(w,k,P){return T(w,[{fn:K,turn:w.ctx.turn,phase:w.ctx.phase,arg:P}])}function Q(w,k,P){return T(w,[{fn:K,turn:w.ctx.turn,phase:w.ctx.phase,force:!0,arg:P}])}function Y(w,k,P){return T(w,[{fn:R,turn:w.ctx.turn,phase:w.ctx.phase,arg:P}])}const M={endStage:I,setStage:ie,endTurn:D,pass:Q,endPhase:G,setPhase:F,endGame:Y,setActivePlayers:z},H=[];s.endTurn!==!1&&H.push("endTurn"),s.pass!==!1&&H.push("pass"),s.endPhase!==!1&&H.push("endPhase"),s.setPhase!==!1&&H.push("setPhase"),s.endGame!==!1&&H.push("endGame"),s.setActivePlayers!==!1&&H.push("setActivePlayers"),s.endStage!==!1&&H.push("endStage"),s.setStage!==!1&&H.push("setStage");function J(w,k){const{type:P,playerID:L,args:B}=k.payload;return typeof M[P]!="function"?w:M[P](w,L,...Array.isArray(B)?B:[B])}function ae(w,k,P){return k.activePlayers?P in k.activePlayers:k.currentPlayer===P}return{ctx:w=>({numPlayers:w,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:w})].map((k,P)=>P+""),playOrderPos:0,phase:c,activePlayers:null}),init:w=>T(w,[{fn:m}]),isPlayerActive:ae,eventHandlers:M,eventNames:Object.keys(M),enabledEventNames:H,moveMap:a,moveNames:[...u.values()],processMove:Ce,processEvent:J,getMove:le}}function Ov(e){return e.processMove!==void 0}function po(e){if(Ov(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Nv(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(vp(i)&&(i=i.move),i instanceof Function){const s=tp(i,Re.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...pr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return re(`invalid move object: ${r.type}`),n.G}}}function vp(e){return e instanceof Object&&e.move!==void 0}var ra;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(ra||(ra={}));var De;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(De||(De={}));const Hi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,Tv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function lf(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function Xo(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function Zo(e,t,n){const[r,i]=np(e,n);return i?[r,$e(t,De.PluginActionInvalid,i)]:[r]}function wp(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function $e(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const Sp=e=>t=>n=>{const r=t(n);switch(n.type){case fo:return r;default:{const[,i]=wp(e.getState());return typeof i<"u"?(e.dispatch(ep()),{...r,transients:i}):r}}};function Pu({game:e,isClient:t}){return e=po(e),(n=null,r)=>{let[i]=wp(n);switch(r.type){case fo:return i;case ao:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return re("cannot call event after game end"),$e(i,De.GameOver);if(Hi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return re(`disallowed event: ${r.payload.type}`),$e(i,De.InactivePlayer);i=ea(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=Zo(s,i,{game:e}),o||(s=lf(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case mi:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return re(`disallowed move: ${r.payload.type}`),$e(i,De.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return re("cannot make move after game end"),$e(i,De.GameOver);if(Hi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return re(`disallowed move: ${r.payload.type}`),$e(i,De.InactivePlayer);i=ea(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===yn)return re(`invalid move: ${r.payload.type} args: ${r.payload.args}`),$e(i,De.InvalidMove);const a={...i,G:l};if(t&&mv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=Zo(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=Xo(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=Zo(i,s,{game:e}),u||(i=lf(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case mu:case gu:case yu:return r.state;case co:{if(i={...i,deltalog:[]},e.disableUndo)return re("Undo is not enabled"),$e(i,De.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return re("No moves to undo"),$e(i,De.ActionInvalid);const c=l[l.length-1],f=l[l.length-2];if(Hi(r)&&r.payload.playerID!==c.playerID)return re("Cannot undo other players' moves"),$e(i,De.ActionInvalid);if(c.moveType){const d=e.flow.getMove(f.ctx,c.moveType,c.playerID);if(!Tv(s,o,d))return re("Move cannot be undone"),$e(i,De.ActionInvalid)}return i=Xo(i,r),{...i,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case uo:{if(i={...i,deltalog:[]},e.disableUndo)return re("Redo is not enabled"),$e(i,De.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return re("No moves to redo"),$e(i,De.ActionInvalid);const a=o[0];return Hi(r)&&r.payload.playerID!==a.playerID?(re("Cannot redo other players' moves"),$e(i,De.ActionInvalid)):(i=Xo(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case Wh:return dv(i,r,{game:e});case vu:{const s=i,o=JSON.parse(JSON.stringify(s)),l=ku.applyPatch(o,r.patch);return l.some(u=>u!==null)?(re(`Patch ${JSON.stringify(r.patch)} apply failed`),$e(s,ra.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(h){typeof h!="function"&&(h=new Function(""+h));for(var y=new Array(arguments.length-1),x=0;x<y.length;x++)y[x]=arguments[x+1];var E={callback:h,args:y};return r[n]=E,o(n),n++}function a(h){delete r[h]}function u(h){var y=h.callback,x=h.args;switch(x.length){case 0:y();break;case 1:y(x[0]);break;case 2:y(x[0],x[1]);break;case 3:y(x[0],x[1],x[2]);break;default:y.apply(t,x);break}}function c(h){if(i)setTimeout(c,0,h);else{var y=r[h];if(y){i=!0;try{u(y)}finally{a(h),i=!1}}}}function f(){o=function(h){process.nextTick(function(){c(h)})}}function d(){if(e.postMessage&&!e.importScripts){var h=!0,y=e.onmessage;return e.onmessage=function(){h=!1},e.postMessage("","*"),e.onmessage=y,h}}function g(){var h="setImmediate$"+Math.random()+"$",y=function(x){x.source===e&&typeof x.data=="string"&&x.data.indexOf(h)===0&&c(+x.data.slice(h.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(x){e.postMessage(h+x,"*")}}function v(){var h=new MessageChannel;h.port1.onmessage=function(y){var x=y.data;c(x)},o=function(y){h.port2.postMessage(y)}}function S(){var h=s.documentElement;o=function(y){var x=s.createElement("script");x.onreadystatechange=function(){c(y),x.onreadystatechange=null,h.removeChild(x),x=null},h.appendChild(x)}}function T(){o=function(h){setTimeout(c,0,h)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?f():d()?g():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?S():T(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?zr:self);class jv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return Kh(s.move,s.args,r);if("event"in s)return qr(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=Vh(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Av=25;class ls extends jv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Pu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((d,g)=>{const v=a[g];return v.checker(i,s)?d+v.weight:d},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Av&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),f=this.playout(c);this.backpropagate(c,f),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function gi(e){"@babel/helpers - typeof";return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(e)}function Iv(e,t){if(gi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mv(e){var t=Iv(e,"string");return gi(t)=="symbol"?t:t+""}function Dv(e,t,n){return(t=Mv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?af(Object(n),!0).forEach(function(r){Dv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Je(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var cf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ff=function(){return Math.random().toString(36).substring(7).split("").join(".")},df={INIT:"@@redux/INIT"+ff(),REPLACE:"@@redux/REPLACE"+ff()};function Rv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Nu(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Je(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Je(1));return n(Nu)(e,t)}if(typeof e!="function")throw new Error(Je(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(Je(3));return s}function f(S){if(typeof S!="function")throw new Error(Je(4));if(a)throw new Error(Je(5));var T=!0;return u(),l.push(S),function(){if(T){if(a)throw new Error(Je(6));T=!1,u();var h=l.indexOf(S);l.splice(h,1),o=null}}}function d(S){if(!Rv(S))throw new Error(Je(7));if(typeof S.type>"u")throw new Error(Je(8));if(a)throw new Error(Je(9));try{a=!0,s=i(s,S)}finally{a=!1}for(var T=o=l,m=0;m<T.length;m++){var h=T[m];h()}return S}function g(S){if(typeof S!="function")throw new Error(Je(10));i=S,d({type:df.REPLACE})}function v(){var S,T=f;return S={subscribe:function(h){if(typeof h!="object"||h===null)throw new Error(Je(11));function y(){h.next&&h.next(c())}y();var x=T(y);return{unsubscribe:x}}},S[cf]=function(){return this},S}return d({type:df.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:g},r[cf]=v,r}function kp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function xp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Je(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=kp.apply(void 0,l)(i.dispatch),uf(uf({},i),{},{dispatch:s})}}}function _p({game:e,numPlayers:t,setupData:n}){e=po(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=hv(i,{game:e}),i=ea(i,{game:e,playerID:void 0});const s=pr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=np(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Ou=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Lv extends Ou{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const bv=e=>new Lv(e);class $v{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const zv=new $v;function ia(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Tu(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=ov[e](l,a,ia(r,n,s),i);n.dispatch(u)};return o}const Fv=Tu.bind(null,"makeMove"),Bv=Tu.bind(null,"gameEvent"),Uv=Tu.bind(null,"plugin");class Hv{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=po(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=zv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Pu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=_p({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(Xh(this.initialState))},this.undo=()=>{const g=Zh(ia(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=Gh(ia(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const d=xp(Sp,()=>g=>v=>{const S=g(v);return this.notifySubscribers(),S},g=>v=>S=>{const T=g.getState(),m=v(S);return!("clientOnly"in S)&&S.type!==fo&&this.transport.sendAction(T,S),m},g=>v=>S=>{const T=v(S),m=g.getState();switch(S.type){case mi:case ao:case co:case uo:{const h=m.deltalog;this.log=[...this.log,...h];break}case mu:{this.log=[];break}case vu:case gu:{let h=-1;this.log.length>0&&(h=this.log[this.log.length-1]._stateID);let y=S.deltalog||[];y=y.filter(x=>x._stateID>h),this.log=[...this.log,...y];break}case yu:{this.initialState=S.initialState,this.log=S.log||[];break}}return T});a=a!==void 0?kp(d,a):d,this.store=Nu(this.reducer,this.initialState,a),i||(i=bv),this.transport=i({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:Bg(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=Qh(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=Jh(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=qh(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:rp(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Fv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Bv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Uv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function Vv(e){return new Hv(e)}const Ep=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},_n=e=>Ep(e,"game name"),jr=e=>Ep(e,"match ID"),Ar=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class Wv extends Error{constructor(t,n){super(t),this.details=n}}class Kv{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new Wv(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){_n(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return _n(t),jr(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return _n(t),Ar(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return _n(t),jr(n),Ar(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){_n(t),jr(n),Ar(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){_n(t),jr(n),Ar(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return _n(t),jr(n),Ar(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var Cp={exports:{}},Yv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qv=Yv,qv=Qv;function Pp(){}function Np(){}Np.resetWarningCache=Pp;var Jv=function(){function e(r,i,s,o,l,a){if(a!==qv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Np,resetWarningCache:Pp};return n.PropTypes=n,n};Cp.exports=Jv();var Xv=Cp.exports;const Nt=Of(Xv);var Qt={},ju={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */ju.parse=t0;ju.serialize=n0;var Zv=decodeURIComponent,Gv=encodeURIComponent,e0=/; */,Vi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function t0(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(e0),s=r.decode||Zv,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=r0(c,s))}}return n}function n0(e,t,n){var r=n||{},i=r.encode||Gv;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Vi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Vi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Vi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Vi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function r0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var hf=Object.getOwnPropertySymbols,i0=Object.prototype.hasOwnProperty,s0=Object.prototype.propertyIsEnumerable;function o0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function l0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var a0=l0()?Object.assign:function(e,t){for(var n,r=o0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)i0.call(n,o)&&(r[o]=n[o]);if(hf){i=hf(n);for(var l=0;l<i.length;l++)s0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},u0={};Object.defineProperty(Qt,"__esModule",{value:!0});var c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Qt.load=Ap;Qt.loadAll=Ip;Qt.select=Mp;Qt.save=Dp;Qt.remove=Rp;Qt.setRawCookie=Au;Qt.plugToRequest=Lp;var f0=ju,wr=Tp(f0),d0=a0,Op=Tp(d0);function Tp(e){return e&&e.__esModule?e:{default:e}}var mo=typeof document>"u"||typeof process<"u"&&u0&&!1,Ge={},gn=void 0;function jp(){return gn&&!gn.headersSent}function Ap(e,t){var n=mo?Ge:wr.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Ip(e){var t=mo?Ge:wr.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Mp(e){var t=mo?Ge:wr.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,Op.default)({},n,i)},{}):t:{}}function Dp(e,t,n){Ge[e]=t,(typeof t>"u"?"undefined":c0(t))==="object"&&(Ge[e]=JSON.stringify(t)),mo||(document.cookie=wr.default.serialize(e,Ge[e],n)),jp()&&gn.cookie&&gn.cookie(e,t,n)}function Rp(e,t){delete Ge[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Op.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=wr.default.serialize(e,"",t)),jp()&&gn.clearCookie&&gn.clearCookie(e,t)}function Au(e){e?Ge=wr.default.parse(e):Ge={}}function Lp(e,t){return e.cookie?Ge=e.cookie:e.cookies?Ge=e.cookies:e.headers&&e.headers.cookie?Au(e.headers.cookie):Ge={},gn=t,function(){gn=null,Ge={}}}var pf=Qt.default={setRawCookie:Au,load:Ap,loadAll:Ip,select:Mp,save:Dp,remove:Rp,plugToRequest:Lp},Us;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Us||(Us={}));function En(e){return e.type()===Us.SYNC}class h0{type(){return Us.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const p0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},m0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=p0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=_p({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},mf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),y0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class g0{constructor(t,n,r,i){this.game=po(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(En(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=y0(t),l=r;let a;if(En(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return re(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){re(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Pu({game:this.game}),c=xp(Sp),f=Nu(u,a,c);if(o.type==co||o.type==uo){const m=a.ctx.activePlayers!==null,h=a.ctx.currentPlayer===i;if(!m&&!h||m&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){re(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){re(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const d=o.type==mi?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==mi&&!d){re(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(d&&vp(d)&&d.ignoreStaleStateID)){re(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const g=f.getState();f.dispatch(o),a=f.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...S}=a;let T;if(s&&(s.gameover===void 0||s.gameover===null)&&(T={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(T.gameover=a.ctx.gameover)),En(this.storageAPI))this.storageAPI.setState(l,S,v),T&&this.storageAPI.setMetadata(l,T);else{const m=[this.storageAPI.setState(l,S,v)];T&&m.push(this.storageAPI.setMetadata(l,T)),await Promise.all(m)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=En(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:f}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:f}))return{error:"unauthorized"};if(a===void 0){const v=m0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,f=v.metadata,this.subscribeCallback({state:a,matchID:t}),En(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:f}):await this.storageAPI.createMatch(s,{initialState:u,metadata:f})}const d=f?mf(f):void 0,g={state:a,log:c,filteredMetadata:d,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(En(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return re(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return re(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=mf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),En(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const Wi=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:rp(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),v0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=Go(o.deltalog,t),a=Wi(e,t,o),u=o._stateID,c=Wi(e,t,s),f=ku.createPatch(c,a);return{type:"patch",args:[r,i,u,f,l]}}case"update":{const[r,i]=n.args,s=Go(i.deltalog,t),o=Wi(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=Wi(e,t,i.state),o=Go(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function Go(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const Dt=Object.create(null);Dt.open="0";Dt.close="1";Dt.ping="2";Dt.pong="3";Dt.message="4";Dt.upgrade="5";Dt.noop="6";const as=Object.create(null);Object.keys(Dt).forEach(e=>{as[Dt[e]]=e});const sa={type:"error",data:"parser error"},bp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",$p=typeof ArrayBuffer=="function",zp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Iu=({type:e,data:t},n,r)=>bp&&t instanceof Blob?n?r(t):yf(t,r):$p&&(t instanceof ArrayBuffer||zp(t))?n?r(t):yf(new Blob([t]),r):r(Dt[e]+(t||"")),yf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function gf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let el;function w0(e,t){if(bp&&e.data instanceof Blob)return e.data.arrayBuffer().then(gf).then(t);if($p&&(e.data instanceof ArrayBuffer||zp(e.data)))return t(gf(e.data));Iu(e,!1,n=>{el||(el=new TextEncoder),t(el.encode(n))})}const vf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$r=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<vf.length;e++)$r[vf.charCodeAt(e)]=e;const S0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=$r[e.charCodeAt(r)],o=$r[e.charCodeAt(r+1)],l=$r[e.charCodeAt(r+2)],a=$r[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},k0=typeof ArrayBuffer=="function",Mu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Fp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:x0(e.substring(1),t)}:as[n]?e.length>1?{type:as[n],data:e.substring(1)}:{type:as[n]}:sa},x0=(e,t)=>{if(k0){const n=S0(e);return Fp(n,t)}else return{base64:!0,data:e}},Fp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Bp="",_0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Iu(s,!1,l=>{r[o]=l,++i===n&&t(r.join(Bp))})})},E0=(e,t)=>{const n=e.split(Bp),r=[];for(let i=0;i<n.length;i++){const s=Mu(n[i],t);if(r.push(s),s.type==="error")break}return r};function C0(){return new TransformStream({transform(e,t){w0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let tl;function Ki(e){return e.reduce((t,n)=>t+n.length,0)}function Yi(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function P0(e,t){tl||(tl=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Ki(n)<1)break;const a=Yi(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ki(n)<2)break;const a=Yi(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Ki(n)<8)break;const a=Yi(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(sa);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ki(n)<i)break;const a=Yi(n,i);l.enqueue(Mu(s?a:tl.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(sa);break}}}})}const Up=4;function ke(e){if(e)return N0(e)}function N0(e){for(var t in ke.prototype)e[t]=ke.prototype[t];return e}ke.prototype.on=ke.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ke.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ke.prototype.off=ke.prototype.removeListener=ke.prototype.removeAllListeners=ke.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ke.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ke.prototype.emitReserved=ke.prototype.emit;ke.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ke.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yo=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ut=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),O0="arraybuffer";function Hp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const T0=ut.setTimeout,j0=ut.clearTimeout;function go(e,t){t.useNativeTimers?(e.setTimeoutFn=T0.bind(ut),e.clearTimeoutFn=j0.bind(ut)):(e.setTimeoutFn=ut.setTimeout.bind(ut),e.clearTimeoutFn=ut.clearTimeout.bind(ut))}const A0=1.33;function I0(e){return typeof e=="string"?M0(e):Math.ceil((e.byteLength||e.size)*A0)}function M0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Vp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function D0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function R0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class L0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Du extends ke{constructor(t){super(),this.writable=!1,go(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new L0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Mu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=D0(t);return n.length?"?"+n:""}}class b0 extends Du{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};E0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,_0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Vp()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Wp=!1;try{Wp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const $0=Wp;function z0(){}class F0 extends b0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Mt extends ke{constructor(t,n,r){super(),this.createRequest=t,go(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Hp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Mt.requestsCount++,Mt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=z0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Mt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Mt.requestsCount=0;Mt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wf);else if(typeof addEventListener=="function"){const e="onpagehide"in ut?"pagehide":"unload";addEventListener(e,wf,!1)}}function wf(){for(let e in Mt.requests)Mt.requests.hasOwnProperty(e)&&Mt.requests[e].abort()}const B0=function(){const e=Kp({xdomain:!1});return e&&e.responseType!==null}();class U0 extends F0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=B0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Mt(Kp,this.uri(),t)}}function Kp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||$0))return new XMLHttpRequest}catch{}if(!t)try{return new ut[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Yp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class H0 extends Du{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Yp?{}:Hp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Iu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Vp()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const nl=ut.WebSocket||ut.MozWebSocket;class V0 extends H0{createSocket(t,n,r){return Yp?new nl(t,n,r):n?new nl(t,n):new nl(t)}doWrite(t,n){this.ws.send(n)}}class W0 extends Du{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=P0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=C0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const K0={websocket:V0,webtransport:W0,polling:U0},Y0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Q0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function oa(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=Y0.exec(e||""),s={},o=14;for(;o--;)s[Q0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=q0(s,s.path),s.queryKey=J0(s,s.query),s}function q0(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function J0(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const la=typeof addEventListener=="function"&&typeof removeEventListener=="function",us=[];la&&addEventListener("offline",()=>{us.forEach(e=>e())},!1);class hn extends ke{constructor(t,n){if(super(),this.binaryType=O0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=oa(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=oa(n.host).host);go(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=R0(this.opts.query)),la&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},us.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Up,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&hn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",hn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=I0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,yo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(hn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),la&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=us.indexOf(this._offlineEventListener);r!==-1&&us.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}hn.protocol=Up;class X0 extends hn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;hn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;hn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=n.name,s(),this.emitReserved("upgradeError",d)};function l(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let Z0=class extends X0{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>K0[i]).filter(i=>!!i)),super(t,r)}};function G0(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=oa(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const ew=typeof ArrayBuffer=="function",tw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Qp=Object.prototype.toString,nw=typeof Blob=="function"||typeof Blob<"u"&&Qp.call(Blob)==="[object BlobConstructor]",rw=typeof File=="function"||typeof File<"u"&&Qp.call(File)==="[object FileConstructor]";function Ru(e){return ew&&(e instanceof ArrayBuffer||tw(e))||nw&&e instanceof Blob||rw&&e instanceof File}function cs(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(cs(e[n]))return!0;return!1}if(Ru(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return cs(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&cs(e[n]))return!0;return!1}function iw(e){const t=[],n=e.data,r=e;return r.data=aa(n,t),r.attachments=t.length,{packet:r,buffers:t}}function aa(e,t){if(!e)return e;if(Ru(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=aa(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=aa(e[r],t));return n}return e}function sw(e,t){return e.data=ua(e.data,t),delete e.attachments,e}function ua(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ua(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ua(e[n],t));return e}const qp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ow=5;var q;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(q||(q={}));class lw{constructor(t){this.replacer=t}encode(t){return(t.type===q.EVENT||t.type===q.ACK)&&cs(t)?this.encodeAsBinary({type:t.type===q.EVENT?q.BINARY_EVENT:q.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===q.BINARY_EVENT||t.type===q.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=iw(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Lu extends ke{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===q.BINARY_EVENT;r||n.type===q.BINARY_ACK?(n.type=r?q.EVENT:q.ACK,this.reconstructor=new aw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ru(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(q[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===q.BINARY_EVENT||r.type===q.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Lu.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case q.CONNECT:return Hs(n);case q.DISCONNECT:return n===void 0;case q.CONNECT_ERROR:return typeof n=="string"||Hs(n);case q.EVENT:case q.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&qp.indexOf(n[0])===-1);case q.ACK:case q.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class aw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=sw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function uw(e){return typeof e=="string"}const cw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function fw(e){return e===void 0||cw(e)}function Hs(e){return Object.prototype.toString.call(e)==="[object Object]"}function dw(e,t){switch(e){case q.CONNECT:return t===void 0||Hs(t);case q.DISCONNECT:return t===void 0;case q.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&qp.indexOf(t[0])===-1);case q.ACK:return Array.isArray(t);case q.CONNECT_ERROR:return typeof t=="string"||Hs(t);default:return!1}}function hw(e){return uw(e.nsp)&&fw(e.id)&&dw(e.type,e.data)}const pw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Lu,Encoder:lw,get PacketType(){return q},isPacketValid:hw,protocol:ow},Symbol.toStringTag,{value:"Module"}));function vt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const mw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Jp extends ke{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[vt(t,"open",this.onopen.bind(this)),vt(t,"packet",this.onpacket.bind(this)),vt(t,"error",this.onerror.bind(this)),vt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(mw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:q.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:q.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case q.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case q.EVENT:case q.BINARY_EVENT:this.onevent(t);break;case q.ACK:case q.BINARY_ACK:this.onack(t);break;case q.DISCONNECT:this.ondisconnect();break;case q.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:q.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:q.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Sr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Sr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Sr.prototype.reset=function(){this.attempts=0};Sr.prototype.setMin=function(e){this.ms=e};Sr.prototype.setMax=function(e){this.max=e};Sr.prototype.setJitter=function(e){this.jitter=e};class ca extends ke{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,go(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Sr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||pw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Z0(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=vt(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=vt(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(vt(t,"ping",this.onping.bind(this)),vt(t,"data",this.ondata.bind(this)),vt(t,"error",this.onerror.bind(this)),vt(t,"close",this.onclose.bind(this)),vt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){yo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Jp(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ir={};function fs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=G0(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Ir[i]&&s in Ir[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new ca(r,t):(Ir[i]||(Ir[i]=new ca(r,t)),a=Ir[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(fs,{Manager:ca,Socket:Jp,io:fs,connect:fs});class Xp extends h0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class yw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class gw extends Xp{constructor(t="bgio"){super();const n=r=>new yw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function vw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class ww extends g0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const f in n){const d=n[f];o[f]=new d({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:f,...d})=>{const g=s[f];g!==void 0&&g(a(f,d))},a=v0(t),u={send:l,sendAll:f=>{for(const d in s)l({playerID:d,...f})}},c=i?new gw(r):new Xp;super(t,c,u),this.connect=(f,d)=>{s[f]=d},this.subscribe(({state:f,matchID:d})=>{if(!n)return;const g=vw(f,o);g!==null&&setTimeout(async()=>{const v=await o[g].play(f,g);await this.onUpdate(v.action,f._stateID,d,v.action.payload.playerID)},100)})}}class Sw extends Ou{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const Sf=new Map;function Zp({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=Sf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new ww({game:s,bots:e,persist:t,storageKey:n}),Sf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new Sw({master:o,...r})}}const kf=fs;class kw extends Ou{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=kf(t+this.gameName,this.socketOpts)}else this.socket=kf("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function xf({server:e,socketOpts:t}={}){return n=>new kw({server:e,socketOpts:t,...n})}function Gp(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>U.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends U.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=Vv({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return U.createElement(l);let f=null;return i&&(f=U.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),U.createElement("div",{className:"bgio-client"},f)}},t.propTypes={matchID:Nt.string,playerID:Nt.string,credentials:Nt.string,debug:Nt.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class xw{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Kv({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function _w(e){return new xw(e)}class em extends U.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return U.createElement("div",null,U.createElement("p",{className:"phase-title"},"Choose a player name:"),U.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),U.createElement("span",{className:"buttons"},U.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),U.createElement("br",null),U.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,U.createElement("br",null)))}}em.defaultProps={playerName:""};class Ew extends U.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>U.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>U.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>U.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>U.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?U.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),U.createElement("tr",{key:"line-"+t.matchID},U.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),U.createElement("td",{key:"cell-status-"+t.matchID},n),U.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),U.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Cw extends U.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>U.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>U.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return U.createElement("div",null,U.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),U.createElement("span",null,"Players:"),U.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),U.createElement("span",{className:"buttons"},U.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Ve;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(Ve||(Ve={}));class tm extends U.Component{constructor(t){super(t),this.state={phase:Ve.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=_w({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:Ve.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Ve.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?xf({server:this.props.gameServer}):xf()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=ls;s=Zp({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Ve.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Ve.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return U.createElement(Ew,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=pf.load("lobbyState")||{};t.phase&&t.phase===Ve.PLAY&&(t.phase=Ve.LIST),t.phase&&t.phase!==Ve.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||Ve.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};pf.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):U.createElement("div",{id:"lobby-view",style:{padding:50}},U.createElement("div",{className:this._getPhaseVisibility(Ve.ENTER)},U.createElement(em,{key:i,playerName:i,onEnter:this._enterLobby})),U.createElement("div",{className:this._getPhaseVisibility(Ve.LIST)},U.createElement("p",null,"Welcome, ",i),U.createElement("div",{className:"phase-title",id:"match-creation"},U.createElement("span",null,"Create a match:"),U.createElement(Cw,{games:t,createMatch:this._createMatch})),U.createElement("p",{className:"phase-title"},"Join a match:"),U.createElement("div",{id:"instances"},U.createElement("table",null,U.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),U.createElement("span",{className:"error-msg"},r,U.createElement("br",null))),U.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),U.createElement("div",{className:this._getPhaseVisibility(Ve.PLAY)},o&&U.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),U.createElement("div",{className:"buttons",id:"match-exit"},U.createElement("button",{onClick:this._exitMatch},"Exit match"))),U.createElement("div",{className:"buttons",id:"lobby-exit"},U.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}tm.propTypes={gameComponents:Nt.array.isRequired,lobbyServer:Nt.string,gameServer:Nt.string,debug:Nt.bool,clientFactory:Nt.func,refreshInterval:Nt.number};tm.defaultProps={debug:!1,clientFactory:Gp,refreshInterval:2e3};const dt=["Hearts","Diamonds","Clubs","Spades"],nm=40,rm=5,Pw=["","","","","",""],im={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function Nw(e,t){const n={};if(e.deckType===36)for(const r of dt)n[r]=[{suit:r,value:1}];else for(const r of dt){const i=Array.from({length:rm},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function sm(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of dt){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),f=t[o]||[];r[o]=[...f,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function Qi(e,t){return t.deckType!==36||e<2||e>5}function om(e,t,n,r,i){const s=[];for(const a of dt)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])Qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])Qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])Qi(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>Qi(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function lm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function Ow(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function Tw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function jw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Aw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function fa(e){return e.players.every(t=>t.hand.length===1)}function am(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=nm&&!e.claimedJobs.includes(r)&&Iw(e,r,n)}function Iw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);e.revealedJobs[t]=null,n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Mw(e){if(!Aw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function da(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=nm||(t.miceVariant?Dw(e,n,r,t):t.deckType===36?Rw(e,n,r,t):Lw(e,n,r,t))}function bu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Vs(e,`${r.suit}-${r.value}`),!0;return!1}function $u(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function zu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Vs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function vi(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Dw(e,t,n,r){if(bu(e,n,r))return;const i=$u(n,e.trump,r),s=zu(n,e.trump,r),o=um(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),Ws(e,o[0]),s&&o.length>1&&(Ws(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${vi(o[1][1])}`)))}function Rw(e,t,n,r){if(bu(e,n,r))return;const i=$u(n,e.trump,r),s=zu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=um(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(f=>f.suit===t);for(const f of c)l.some(([g,v])=>g===u&&v.suit===f.suit&&v.value===f.value)||l.push([u,f])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((f,d)=>d.value-f.value),Ws(e,[u,c[0]]),s&&c.length>1&&(Ws(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${vi(c[1])}`)))}function Lw(e,t,n,r){if(bu(e,n,r))return;const i=$u(n,e.trump,r),s=zu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(d=>d.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(d=>d.suit!==t);const u=(o.plot.revealed||[]).filter(d=>d.suit===t).sort((d,g)=>g.value-d.value);if(u.length===0)continue;const c=u[0],f=o.plot.revealed.findIndex(d=>d.suit===c.suit&&d.value===c.value);if(o.plot.revealed.splice(f,1),Vs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${vi(c)}`),s&&u.length>1){const d=u[1],g=o.plot.revealed.findIndex(v=>v.suit===d.suit&&v.value===d.value);o.plot.revealed.splice(g,1),Vs(e,`${d.suit}-${d.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${vi(d)}`)}}}function um(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const f of c.revealed||[])f.suit===t&&a.push({card:f,stack:c,location:"revealed"});for(const f of c.hidden||[])f.suit===t&&a.push({card:f,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const f=o.plot.hidden.findIndex(d=>d.suit===c.suit&&d.value===c.value);o.plot.hidden.splice(f,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:f,location:d}of a){const g=d==="hidden"?f.hidden:f.revealed,v=g.findIndex(S=>S.suit===c.suit&&S.value===c.value);v!==-1&&(g.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((d,g)=>g.value>d.value?g:d);if(l.some(d=>d.suit===c.suit&&d.value===c.value)){const d=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(d,1),o.plot.revealed.push(c),s.push([o,c])}else{const d=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(d){const{stack:g,location:v}=d,S=v==="hidden"?g.hidden:g.revealed,T=S.findIndex(m=>m.suit===c.suit&&m.value===c.value);T!==-1&&(S.splice(T,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function Ws(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Vs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${vi(n)}`)}function bw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function $w(e,t){const n=bw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function zw(e,t){const n=$w(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function ha(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of dt)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>rm)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of dt)e.workHours[o]=0;const{jobs:r,isFamine:i}=sm(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of dt)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.trumpSelector=(e.trumpSelector+1)%e.numPlayers,e.workersDeck=om(e.players,e.jobBuckets,e.exiled,t,n),lm(e.players,e.workersDeck,e.isFamine),!1}function cm(e,t){const n=dt.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function _f(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function fm(e,t,n){var f,d,g;const r=e.workHours[t]||0;if((f=e.claimedJobs)==null?void 0:f.includes(t))return-10;const s=Math.max(0,40-r),o=s<20?(20-s)*2:0,l=e.players[n],c=[...((d=l.plot)==null?void 0:d.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(v=>v.suit===t).length*15;return o+c}function Fw(e,t,n){var f,d,g,v,S;const r=e.players[t],i=r.hand[n];let s=0;const o=e.currentTrick.length===0,l=(d=(f=e.currentTrick[0])==null?void 0:f[1])==null?void 0:d.suit,a=e.currentTrick.map(([,T])=>T),u=Bw(e,i,a),c=Uw(e,t);if(o){const T=fm(e,i.suit,t);s+=T*.3,i.value>=8&&i.value<=11&&(s+=5),i.suit===e.trump&&e.trickCount<2&&(s-=10)}else if(c>0&&u>.5?s+=c*u*20:c<0&&u<.5&&(s+=Math.abs(c)*(1-u)*15),i.suit!==l){const m=[...((g=r.plot)==null?void 0:g.revealed)||[],...((v=r.plot)==null?void 0:v.hidden)||[]].filter(h=>h.suit===i.suit).length;(S=e.claimedJobs)!=null&&S.includes(i.suit)||(s+=m*3)}return s+=Math.random()*2,s}function Bw(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let i=n[0];for(const s of n)(s.suit===e.trump&&i.suit!==e.trump||s.suit===i.suit&&s.value>i.value)&&(i=s);return t.suit===e.trump&&i.suit!==e.trump?.8:t.suit===i.suit&&t.value>i.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function Uw(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,s])=>s.suit))];for(const s of r){const o=fm(e,s,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function Hw(e,t,n){var f,d;let r=0;const i=e.players[n],s=i.hand||[],o=s.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=s.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((f=i.plot)==null?void 0:f.revealed)||[],...((d=i.plot)==null?void 0:d.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function Vw(e,t,n){var s,o,l,a,u,c,f;const r=[],i=e.players[n];if(t.phase==="planning"&&!e.trump)for(const d of dt){const g=Hw(e,d,n);r.push({move:"setTrump",args:[d],score:g})}else if(t.phase==="trick")for(let d=0;d<i.hand.length;d++){const g=i.hand[d],v=(o=(s=e.currentTrick[0])==null?void 0:s[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&i.hand.some(m=>m.suit===v)&&g.suit!==v)continue;const S=Fw(e,n,d);r.push({move:"playCard",args:[d],score:S})}else if(t.phase==="assignment"&&n===e.lastWinner){const d=[...new Set(e.lastTrick.map(([,_])=>_.suit))],g=e.players[n],v=[...((l=g.plot)==null?void 0:l.revealed)||[],...((a=g.plot)==null?void 0:a.hidden)||[]],S=e.lastTrick.reduce((_,[,N])=>{var A;return _+_f(N,e.trump,(A=e.variants)==null?void 0:A.nomenclature)},0);let T=d[0],m=-1/0;for(const _ of d){const N=e.workHours[_]||0;if((u=e.claimedJobs)==null?void 0:u.includes(_)){m<0&&(m=0,T=_);continue}const C=N+S;let R=0;C>=40?(R+=200,R-=(C-40)*2):(R+=C,C>=30?R+=30:C>=20&&(R+=15));const $=v.filter(K=>K.suit===_).length;R+=$*20,R>m&&(m=R,T=_)}let h=0;const y={};for(const[,_]of e.lastTrick){const N=_f(_,e.trump,(c=e.variants)==null?void 0:c.nomenclature);let A=_.suit,C=-1/0;for(const R of d){const $=e.workHours[R]||0,K=(f=e.claimedJobs)==null?void 0:f.includes(R);let W=0;if(K)W=0;else{const le=$+N;le>=40?W+=150:(W+=le*.5,le>=30&&(W+=15));const Ce=v.filter(ie=>ie.suit===R).length;W+=Ce*10}W>C&&(C=W,A=R)}y[`${_.suit}-${_.value}`]=A,h+=C}const x=e.pendingAssignments||{};let E;if(m>=h){E={};for(const[,_]of e.lastTrick)E[`${_.suit}-${_.value}`]=T}else E=y;let O=!1;for(const[_,N]of Object.entries(E))x[_]!==N&&(O=!0,r.push({move:"assignCard",args:[_,N],score:100}));O||r.push({move:"submitAssignments",args:[],score:100})}else t.phase;return r.sort((d,g)=>g.score-d.score),r}function Ef(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function Ww({ctx:e,random:t},n){const r={...im,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...Pw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Ef(0,!0,""));else{const f=Math.floor(t.Number()*s.length),d=s.splice(f,1)[0];o.push(Ef(c,!1,d))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:Nw(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1,trumpSelector:Math.floor(t.Number()*i)};for(const c of dt)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=sm(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=om(l.players,l.jobBuckets,l.exiled,r,t),lm(l.players,l.workersDeck,l.isFamine),l}function Kw({G:e,random:t},n){n&&dt.includes(n)?e.trump=n:cm(e,t)}function Yw({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!Ow(e,i,r))return yn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function Qw({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function qw({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return yn;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return yn;if(am(e,e.pendingAssignments,e.variants),e.pendingAssignments={},fa(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),da(e,e.variants),ha(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function Jw({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return yn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return yn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function Xw({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const Zw={name:"kolkhoz",setup:Ww,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:Kw},turn:{order:{first:({G:e})=>e.trumpSelector,next:()=>{}}},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"trumpSelector:",e.trumpSelector,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&cm(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:Yw},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=Tw(e);if(n!==null){jw(e,n);const r=Mw(e.lastTrick);if(r?(am(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&fa(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),da(e,e.variants),ha(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=fa(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:Qw,submitAssignments:qw},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),da(e,e.variants),ha(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:Jw,confirmSwap:Xw},turn:{order:{first:()=>0,next:()=>{}}},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return zw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),i=Vw(e,t,r);return i.slice(0,Math.min(3,i.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function tn(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function Gw(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function et({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,f=s?"assets/cards/back.svg":tn(e);return t!==0||n!==0?p.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[p.jsx("image",{href:f,width:r,height:c,x:-r/2,y:-c/2}),l&&p.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#d4a857",strokeWidth:"3",rx:"8"})]}):p.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:p.jsx("img",{src:f,alt:s?"Card back":`${Gw(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function e1({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s,className:o=""}){return!e||e.length===0?p.jsx("div",{className:`hand empty ${o}`,children:"No cards in hand"}):p.jsx("div",{className:`hand ${o}`,children:e.map((l,a)=>{const u=!s||s.includes(a);return p.jsx("div",{className:`hand-card ${u&&n?"playable":""} ${u?"":"invalid"}`,style:{zIndex:a},onClick:()=>{n&&u&&t(a)},children:p.jsx(et,{card:l,width:130,highlight:u&&n,dimmed:!u&&n})},`${l.suit}-${l.value}-${a}`)})})}const Cf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function t1({player:e,position:t,isActive:n,isBrigadeLeader:r,playerIndex:i,scale:s=1,isHuman:o=!1}){var I,z,F,G;const{x:l,y:a}=t,u=((I=e.hand)==null?void 0:I.length)||0,c=((z=e.plot)==null?void 0:z.revealed)||[],f=((G=(F=e.plot)==null?void 0:F.hidden)==null?void 0:G.length)||0,d=c.reduce((D,Q)=>D+Q.value,0)+f,g=46*s,v=g*1.4,S=26*s,T=52*s,m=8*s,h=6*s;if(o){const D=235*s,Q=130*s,Y=l-D/2,M=a-Q/2,H=c.length+f,J=H>0?(Math.min(4,H)-1)*S+g:0,ae=l-J/2,w=a-v/2+10*s;return p.jsxs("g",{className:"player-area human-plot",children:[p.jsx("rect",{x:Y,y:M,width:D,height:Q,fill:"none",stroke:"#d4a857",strokeWidth:2*s,strokeDasharray:`${6*s},${4*s}`,rx:4*s}),p.jsx("text",{x:Y+8*s,y:M+16*s,textAnchor:"start",fill:"#d4a857",fontSize:11*s,fontFamily:"'Oswald', sans-serif",children:""}),c.map((k,P)=>p.jsx("image",{href:tn(k),x:ae+P*S,y:w,width:g,height:v},`plot-${P}`)),Array.from({length:f}).map((k,P)=>p.jsx("image",{href:"assets/cards/back.svg",x:ae+(c.length+P)*S,y:w,width:g,height:v,opacity:.7},`hidden-${P}`))]})}const y=235*s,x=130*s,E=l-y/2,O=a-x/2,_=O+m,N=_+T/2,A=_+T+h,R=E+m,$=R+T+6*s,K=65*s,W=$+K,le=W+6*s,Ce=Math.min(4,u)*S+g-S,ie=l-Ce/2;return p.jsxs("g",{className:`player-area ${n?"active":""}`,children:[p.jsx("rect",{x:E,y:O,width:y,height:x,fill:n?"rgba(196, 30, 58, 0.25)":"rgba(20,20,20,0.9)",stroke:n?"#d4a857":"#444",strokeWidth:n?2:1,rx:4*s}),p.jsx("image",{href:Cf[(i-1)%Cf.length],x:R,y:_,width:T,height:T,style:{imageRendering:"pixelated"}}),p.jsxs("text",{x:$,y:N-6*s,textAnchor:"start",fill:n?"#d4a857":"#e8dcc4",fontSize:12*s,fontWeight:n?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[e.name,r&&" "]}),p.jsx("text",{x:$,y:N+10*s,textAnchor:"start",fill:d>0?"#c41e3a":"#888",fontSize:11*s,fontFamily:"'Oswald', sans-serif",children:d>0?`${d} pts`:`${u} cards`}),p.jsx("line",{x1:W,y1:_+4*s,x2:W,y2:_+T-4*s,stroke:"#555",strokeWidth:1}),c.slice(0,2).map((D,Q)=>p.jsx("image",{href:tn(D),x:le+Q*S,y:_+(T-v)/2,width:g,height:v},`plot-${Q}`)),c.length===0&&f>0&&p.jsx("image",{href:"assets/cards/back.svg",x:le,y:_+(T-v)/2,width:g,height:v,opacity:.5}),Array.from({length:Math.min(4,u)}).map((D,Q)=>p.jsx("image",{href:"assets/cards/back.svg",x:ie+Q*S,y:A,width:g,height:v},`hand-${Q}`)),u>4&&p.jsxs("text",{x:ie+4*S+g/2,y:A+v/2,textAnchor:"middle",fill:"#888",fontSize:9*s,children:["+",u-4]})]})}const Pf=["Hearts","Diamonds","Clubs","Spades"];function n1({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450,scale:s=1,year:o,trump:l,phase:a,isMyTurn:u,currentPlayerName:c,showInfo:f=!1,players:d,currentPlayer:g,brigadeLeader:v,displayMode:S="game",workHours:T,claimedJobs:m,jobBuckets:h,revealedJobs:y,exiled:x,playerPlot:E}){const O={Hearts:"",Diamonds:"",Clubs:"",Spades:""},_=1100*s,N=540*s,A=220*s,C=A*1.4,R=265*s,$=85*s,K=D=>{const Y=[3,0,1,2][D];return{x:-1.5*R+Y*R,y:$}},W=6*s,le=10*s,Ce=6*s,ie=i-N/2+38*s,I=24*s,z=20*s,F=r-_/2+20*s,G=r+_/2-20*s;return p.jsxs("g",{className:"trick-area",children:[p.jsx("rect",{x:r-_/2,y:i-N/2,width:_,height:N,fill:"#1a1a1a",stroke:"#d4a857",strokeWidth:3*s,rx:le}),p.jsx("rect",{x:r-_/2+W,y:i-N/2+W,width:_-W*2,height:N-W*2,fill:"none",stroke:"#8b0000",strokeWidth:2*s,rx:Ce}),p.jsxs("g",{className:"trick-info-bar",children:[f?p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:F,y:ie,textAnchor:"start",fill:"#d4a857",fontSize:I,fontFamily:"'Oswald', sans-serif",children:[p.jsxs("title",{children:["Year ",o," of 5"]})," ",o,"/5"]}),p.jsxs("text",{x:F+100*s,y:ie,textAnchor:"start",fill:"#888",fontSize:I,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Trump suit"}),":"]}),p.jsx("text",{x:F+175*s,y:ie,textAnchor:"start",fill:l==="Hearts"||l==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:z,fontFamily:"'Oswald', sans-serif",children:l?O[l]:"?"})]}):null,e.length>0&&p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:F+200*s,y:ie,textAnchor:"start",fill:"#888",fontSize:I,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Lead suit"}),":"]}),p.jsx("text",{x:F+268*s,y:ie,textAnchor:"start",fill:e[0][1].suit==="Hearts"||e[0][1].suit==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:z,children:O[e[0][1].suit]})]}),f&&T&&p.jsx("g",{className:"job-progress-bar",children:Pf.map((D,Q)=>{const Y=T[D]||0,M=m==null?void 0:m.includes(D),H=D===l,J=70*s,w=F+320*s+Q*J;return p.jsxs("g",{children:[p.jsx("text",{x:w,y:ie,textAnchor:"middle",fill:D==="Hearts"||D==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:z,opacity:H?1:.7,children:O[D]}),p.jsx("text",{x:w+16*s,y:ie,textAnchor:"start",fill:M?"#4CAF50":"#888",fontSize:z,fontFamily:"'Oswald', sans-serif",children:M?"":`${Y}/40`})]},D)})}),f&&p.jsxs("text",{x:G,y:ie,textAnchor:"end",fill:u?"#4CAF50":"#e8dcc4",fontSize:I,fontWeight:u?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:u?"Your turn":`${c}'s turn`}),u?" ":c]})]}),S==="game"&&p.jsxs(p.Fragment,{children:[Array.from({length:t}).map((D,Q)=>{if(e.some(([H])=>H===Q))return null;const M=K(Q);return p.jsx("rect",{x:r+M.x-A/2,y:i+M.y-C/2,width:A,height:C,fill:"none",stroke:"rgba(255,255,255,0.15)",strokeWidth:1*s,strokeDasharray:`${4*s},${4*s}`,rx:4*s},`slot-${Q}`)}),e.map(([D,Q],Y)=>{const M=K(D);return p.jsx(et,{card:Q,x:r+M.x,y:i+M.y,width:A},`${Q.suit}-${Q.value}`)}),d&&[0,1,2,3].map(D=>{const Q=K(D),Y=i-N/2+115*s;return p.jsx(t1,{player:d[D],position:{x:r+Q.x,y:Y},isActive:g===D,isBrigadeLeader:v===D,playerIndex:D,scale:s,isHuman:D===0},`player-${D}`)})]}),S==="jobs"&&p.jsxs("g",{className:"jobs-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),Pf.map((D,Q)=>{const Y=(T==null?void 0:T[D])||0,M=m==null?void 0:m.includes(D),H=D===l,J=(h==null?void 0:h[D])||[],ae=y==null?void 0:y[D],w=Array.isArray(ae)?ae:ae?[ae]:[],k=95*s,P=100*s,L=i-N/2+95*s+Q*P,B=r-_/2+20*s,V=_-40*s,te=55*s,Z=te*1.4,xe=42*s,se=B+140*s;return p.jsxs("g",{className:`job-row ${H?"trump":""}`,children:[p.jsx("rect",{x:B,y:L,width:V,height:k,fill:H?"rgba(196, 30, 58, 0.15)":"rgba(30,30,30,0.5)",stroke:M?"#4CAF50":H?"#c41e3a":"#444",strokeWidth:M?2:1,rx:4*s}),p.jsx("text",{x:B+25*s,y:L+35*s,textAnchor:"middle",fill:D==="Hearts"||D==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:28*s,children:O[D]}),p.jsx("text",{x:B+25*s,y:L+65*s,textAnchor:"middle",fill:M?"#4CAF50":"#e8dcc4",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:M?"":`${Y}/40`}),w.length>0&&!M?p.jsx("image",{href:tn(w[0]),x:B+55*s,y:L+(k-Z)/2,width:te,height:Z}):p.jsx("image",{href:"assets/cards/back.svg",x:B+55*s,y:L+(k-Z)/2,width:te,height:Z,opacity:M?.3:.5}),p.jsx("line",{x1:B+120*s,y1:L+10*s,x2:B+120*s,y2:L+k-10*s,stroke:"#555",strokeWidth:1}),J.slice(0,16).map((he,Pe)=>p.jsx("image",{href:tn(he),x:se+Pe*xe,y:L+(k-Z)/2,width:te,height:Z},`assigned-${Pe}`)),J.length>16&&p.jsxs("text",{x:se+16*xe+te/2,y:L+k/2+5*s,textAnchor:"middle",fill:"#888",fontSize:11*s,children:["+",J.length-16]}),J.length===0&&p.jsx("rect",{x:se,y:L+(k-Z)/2,width:te,height:Z,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]},D)})]}),S==="gulag"&&p.jsxs("g",{className:"gulag-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),[1,2,3,4,5].map((D,Q)=>{const Y=(x==null?void 0:x[D])||[],M=D===o,H=D<o,J=80*s,ae=85*s,w=i-N/2+90*s+Q*ae,k=r-_/2+20*s,P=_-40*s,L=50*s,B=L*1.4,V=38*s,te=k+80*s,Z=xe=>{const[se,he]=xe.split("-");return{suit:se,value:parseInt(he,10)}};return p.jsxs("g",{className:`year-row ${M?"current":""}`,children:[p.jsx("rect",{x:k,y:w,width:P,height:J,fill:M?"rgba(196, 30, 58, 0.2)":H?"rgba(50,50,50,0.3)":"rgba(30,30,30,0.5)",stroke:M?"#c41e3a":"#444",strokeWidth:M?2:1,rx:4*s}),p.jsx("text",{x:k+35*s,y:w+J/2+10*s,textAnchor:"middle",fill:M?"#c41e3a":H?"#666":"#e8dcc4",fontSize:28*s,fontFamily:"'Russo One', 'Oswald', sans-serif",fontWeight:M?"bold":"normal",children:D}),Y.length>0&&p.jsxs("g",{children:[p.jsx("circle",{cx:k+60*s,cy:w+20*s,r:12*s,fill:"#c41e3a"}),p.jsx("text",{x:k+60*s,y:w+24*s,textAnchor:"middle",fill:"#fff",fontSize:11*s,fontWeight:"bold",children:Y.length})]}),Y.length>0?Y.slice(0,15).map((xe,se)=>{const he=Z(xe);return p.jsx("image",{href:tn(he),x:te+se*V,y:w+(J-B)/2,width:L,height:B},se)}):p.jsx("rect",{x:te,y:w+(J-B)/2,width:L,height:B,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s}),Y.length>15&&p.jsxs("text",{x:te+15*V+L/2,y:w+J/2+5*s,textAnchor:"middle",fill:"#888",fontSize:11*s,children:["+",Y.length-15]})]},D)})]}),S==="plot"&&p.jsxs("g",{className:"plot-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),(()=>{const D=(E==null?void 0:E.revealed)||[],Q=120*s,Y=i-N/2+95*s,M=r-_/2+20*s,H=_-40*s,J=70*s,ae=J*1.4,w=55*s,k=M+120*s;return p.jsxs("g",{className:"revealed-row",children:[p.jsx("rect",{x:M,y:Y,width:H,height:Q,fill:"rgba(76, 175, 80, 0.1)",stroke:"#4CAF50",strokeWidth:1,rx:4*s}),p.jsx("text",{x:M+15*s,y:Y+35*s,textAnchor:"start",fill:"#4CAF50",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:""}),p.jsx("text",{x:M+15*s,y:Y+55*s,textAnchor:"start",fill:"#888",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:"(Revealed)"}),p.jsx("line",{x1:M+100*s,y1:Y+10*s,x2:M+100*s,y2:Y+Q-10*s,stroke:"#555",strokeWidth:1}),D.map((P,L)=>p.jsx("image",{href:tn(P),x:k+L*w,y:Y+(Q-ae)/2,width:J,height:ae,className:"plot-card","data-type":"revealed","data-index":L},`revealed-${L}`)),D.length===0&&p.jsx("rect",{x:k,y:Y+(Q-ae)/2,width:J,height:ae,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]})})(),(()=>{const D=(E==null?void 0:E.hidden)||[],Q=120*s,Y=i-N/2+230*s,M=r-_/2+20*s,H=_-40*s,J=70*s,ae=J*1.4,w=55*s,k=M+120*s;return p.jsxs("g",{className:"hidden-row",children:[p.jsx("rect",{x:M,y:Y,width:H,height:Q,fill:"rgba(196, 30, 58, 0.1)",stroke:"#c41e3a",strokeWidth:1,rx:4*s}),p.jsx("text",{x:M+15*s,y:Y+35*s,textAnchor:"start",fill:"#c41e3a",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:""}),p.jsx("text",{x:M+15*s,y:Y+55*s,textAnchor:"start",fill:"#888",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:"(Hidden)"}),p.jsx("line",{x1:M+100*s,y1:Y+10*s,x2:M+100*s,y2:Y+Q-10*s,stroke:"#555",strokeWidth:1}),D.map((P,L)=>p.jsx("image",{href:tn(P),x:k+L*w,y:Y+(Q-ae)/2,width:J,height:ae,className:"plot-card","data-type":"hidden","data-index":L},`hidden-${L}`)),D.length===0&&p.jsx("rect",{x:k,y:Y+(Q-ae)/2,width:J,height:ae,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]})})(),(()=>{const D=(E==null?void 0:E.revealed)||[],Q=(E==null?void 0:E.hidden)||[],Y=D.reduce((H,J)=>H+J.value,0)+Q.reduce((H,J)=>H+J.value,0),M=i-N/2+365*s;return p.jsxs("text",{x:r,y:M,textAnchor:"middle",fill:Y>0?"#c41e3a":"#888",fontSize:18*s,fontFamily:"'Oswald', sans-serif",children:["Total: ",Y," points (",D.length+Q.length," cards)"]})})()]})]})}const r1=["Hearts","Diamonds","Clubs","Spades"],Nf={Hearts:"",Diamonds:"",Clubs:"",Spades:""};function i1({lastTrick:e,pendingAssignments:t,onAssign:n,onSubmit:r,svgRef:i,centerY:s=470,scale:o=1}){const[l,a]=ee.useState(null),[u,c]=ee.useState(null),[f,d]=ee.useState([]),g=ee.useRef(null),v=ee.useMemo(()=>[...new Set(e.map(([,E])=>E.suit))],[e]),S=ee.useCallback(()=>{if(!(i!=null&&i.current))return;const O=i.current.getBoundingClientRect(),_={width:1920,height:1080},N=O.width/_.width,A=O.height/_.height,C=540*o,R=1100*o,$=960,K=100*o,W=95*o,le=r1.map((Ce,ie)=>{const I=s-C/2+95*o+ie*K,z=$-R/2+20*o,F=R-40*o;return{suit:Ce,left:O.left+z*N,top:O.top+I*A,width:F*N,height:W*A,centerX:O.left+(z+F/2)*N,centerY:O.top+(I+W/2)*A}});d(le)},[i,s,o]);ee.useEffect(()=>(S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)),[S]);const T=E=>E.touches&&E.touches.length>0?{x:E.touches[0].clientX,y:E.touches[0].clientY}:{x:E.clientX,y:E.clientY},m=(E,O)=>{for(const _ of f)if(E>=_.left&&E<=_.left+_.width&&O>=_.top&&O<=_.top+_.height&&v.includes(_.suit))return _.suit;return null},h=(E,O,_)=>{_.preventDefault();const N=T(_),C=_.currentTarget.getBoundingClientRect();a({cardKey:E,card:O,position:N,offset:{x:N.x-(C.left+C.width/2),y:N.y-(C.top+C.height/2)},origin:{x:C.left+C.width/2,y:C.top+C.height/2},hoverZone:null})};ee.useEffect(()=>{if(!l)return;const E=_=>{const N=T(_),A=m(N.x,N.y);a(C=>({...C,position:N,hoverZone:A}))},O=_=>{const N=T(_),A=m(N.x,N.y);if(A&&v.includes(A)){const C=f.find(R=>R.suit===A);c({card:l.card,cardKey:l.cardKey,targetSuit:A,from:{x:N.x-l.offset.x,y:N.y-l.offset.y},to:{x:C.centerX,y:C.centerY}})}a(null)};return document.addEventListener("mousemove",E),document.addEventListener("mouseup",O),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",O),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",O),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",O)}},[l,f,v]),ee.useEffect(()=>{if(!u)return;const E=setTimeout(()=>{n(u.cardKey,u.targetSuit),c(null)},300);return()=>clearTimeout(E)},[u,n]);const y=Object.keys(t||{}).length===e.length,x=E=>(u==null?void 0:u.cardKey)===E?"flying":(l==null?void 0:l.cardKey)===E?"dragging":t!=null&&t[E]?"assigned":"available";return p.jsxs("div",{className:"assignment-drag-drop",ref:g,children:[p.jsxs("div",{className:"assignment-header",children:[p.jsx("h3",{children:"Assign Cards to Jobs"}),p.jsx("p",{children:"Drag each card to a job pile"})]}),p.jsx("div",{className:"drop-zones",children:f.map(E=>{const O=v.includes(E.suit),_=(l==null?void 0:l.hoverZone)===E.suit;return p.jsx("div",{className:`drop-zone ${O?"valid":"invalid"} ${_?"hover":""}`,style:{left:E.left,top:E.top,width:E.width,height:E.height},children:_&&p.jsxs("span",{className:"drop-hint",children:[Nf[E.suit]," Drop here"]})},E.suit)})}),p.jsx("div",{className:"drag-cards",children:e.map(([E,O])=>{const _=`${O.suit}-${O.value}`,N=x(_);return N==="flying"||N==="dragging"?p.jsx("div",{className:"drag-card placeholder",children:p.jsx(et,{card:O,width:90,dimmed:!0})},_):p.jsxs("div",{className:`drag-card ${N}`,onMouseDown:A=>h(_,O,A),onTouchStart:A=>h(_,O,A),children:[p.jsx(et,{card:O,width:90}),N==="assigned"&&p.jsx("div",{className:"assigned-badge",children:Nf[t[_]]})]},_)})}),l&&p.jsx("div",{className:"drag-ghost",style:{left:l.position.x-l.offset.x,top:l.position.y-l.offset.y},children:p.jsx(et,{card:l.card,width:90})}),u&&p.jsx("div",{className:"flying-card",style:{"--from-x":`${u.from.x}px`,"--from-y":`${u.from.y}px`,"--to-x":`${u.to.x}px`,"--to-y":`${u.to.y}px`},children:p.jsx(et,{card:u.card,width:60})}),p.jsx("button",{className:"assignment-submit",onClick:r,disabled:!y,children:y?"Submit Assignments":`Assign ${e.length-Object.keys(t||{}).length} more`})]})}function s1({hand:e,plot:t,onSwap:n,onConfirm:r,svgRef:i,centerY:s=470,scale:o=1,year:l}){var _,N;const[a,u]=ee.useState(null),[c,f]=ee.useState(null),[d,g]=ee.useState(null),[v,S]=ee.useState({revealed:null,hidden:null}),T=ee.useRef(null),m=ee.useCallback(()=>{if(!(i!=null&&i.current))return;const C=i.current.getBoundingClientRect(),R={width:1920,height:1080},$=C.width/R.width,K=C.height/R.height,W=540*o,le=1100*o,Ce=960,ie=120*o,I=s-W/2+95*o,z=Ce-le/2+20*o,F=le-40*o,G=s-W/2+230*o;S({revealed:{left:C.left+z*$,top:C.top+I*K,width:F*$,height:ie*K,centerX:C.left+(z+F/2)*$,centerY:C.top+(I+ie/2)*K},hidden:{left:C.left+z*$,top:C.top+G*K,width:F*$,height:ie*K,centerX:C.left+(z+F/2)*$,centerY:C.top+(G+ie/2)*K}})},[i,s,o]);ee.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[m]);const h=A=>A.touches&&A.touches.length>0?{x:A.touches[0].clientX,y:A.touches[0].clientY}:{x:A.clientX,y:A.clientY},y=(A,C)=>{for(const[R,$]of Object.entries(v))if($&&A>=$.left&&A<=$.left+$.width&&C>=$.top&&C<=$.top+$.height)return R;return null},x=(A,C,R)=>{(a==null?void 0:a.type)===A&&(a==null?void 0:a.index)===C?u(null):u({type:A,index:C,card:R})},E=(A,C,R)=>{R.preventDefault();const $=h(R),W=R.currentTarget.getBoundingClientRect();f({source:{type:"hand",index:A},card:C,position:$,offset:{x:$.x-(W.left+W.width/2),y:$.y-(W.top+W.height/2)},origin:{x:W.left+W.width/2,y:W.top+W.height/2},hoverZone:null})};ee.useEffect(()=>{if(!c)return;const A=R=>{const $=h(R),K=y($.x,$.y);f(W=>({...W,position:$,hoverZone:K}))},C=R=>{const $=h(R),K=y($.x,$.y);if(K&&a&&a.type===K){const W=v[K];g({card:c.card,from:{x:$.x-c.offset.x,y:$.y-c.offset.y},to:{x:W.centerX,y:W.centerY},swapData:{plotIdx:a.index,handIdx:c.source.index,plotType:K}}),u(null)}else if(K){const W=K==="revealed"?t==null?void 0:t.revealed:t==null?void 0:t.hidden;if(W&&W.length>0){const le=v[K];g({card:c.card,from:{x:$.x-c.offset.x,y:$.y-c.offset.y},to:{x:le.centerX,y:le.centerY},swapData:{plotIdx:0,handIdx:c.source.index,plotType:K}})}}f(null)};return document.addEventListener("mousemove",A),document.addEventListener("mouseup",C),document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",C),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",C),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",C)}},[c,v,a,t]),ee.useEffect(()=>{if(!d)return;const A=setTimeout(()=>{const{plotIdx:C,handIdx:R,plotType:$}=d.swapData;n(C,R,$),g(null)},300);return()=>clearTimeout(A)},[d,n]);const O=(A,C)=>(a==null?void 0:a.type)===A&&(a==null?void 0:a.index)===C;return p.jsxs("div",{className:"swap-drag-drop",ref:T,children:[p.jsxs("div",{className:"swap-header",children:[p.jsxs("h3",{children:["Swap Phase - Year ",l]}),p.jsx("p",{children:a?`Selected: ${a.type} card - drag a hand card to swap`:"Click a plot card to select, then drag a hand card to swap"})]}),p.jsxs("div",{className:"drop-zones",children:[v.revealed&&p.jsx("div",{className:`drop-zone revealed ${(c==null?void 0:c.hoverZone)==="revealed"?"hover":""} ${(a==null?void 0:a.type)==="revealed"?"target-selected":""}`,style:{left:v.revealed.left,top:v.revealed.top,width:v.revealed.width,height:v.revealed.height}}),v.hidden&&p.jsx("div",{className:`drop-zone hidden ${(c==null?void 0:c.hoverZone)==="hidden"?"hover":""} ${(a==null?void 0:a.type)==="hidden"?"target-selected":""}`,style:{left:v.hidden.left,top:v.hidden.top,width:v.hidden.width,height:v.hidden.height}})]}),p.jsxs("div",{className:"plot-card-overlays",children:[(_=t==null?void 0:t.revealed)==null?void 0:_.map((A,C)=>{if(!v.revealed)return null;const R=70*o,$=55*o,W=v.revealed.left+120*o*(v.revealed.width/(1060*o))+C*$*(v.revealed.width/(1060*o)),le=v.revealed.top+(v.revealed.height-R*1.4)/2;return p.jsx("div",{className:`plot-card-overlay ${O("revealed",C)?"selected":""}`,style:{left:W,top:le,width:R*(v.revealed.width/(1060*o)),height:R*1.4*(v.revealed.height/(120*o))},onClick:()=>x("revealed",C,A)},`revealed-overlay-${C}`)}),(N=t==null?void 0:t.hidden)==null?void 0:N.map((A,C)=>{if(!v.hidden)return null;const R=70*o,$=55*o,W=v.hidden.left+120*o*(v.hidden.width/(1060*o))+C*$*(v.hidden.width/(1060*o)),le=v.hidden.top+(v.hidden.height-R*1.4)/2;return p.jsx("div",{className:`plot-card-overlay ${O("hidden",C)?"selected":""}`,style:{left:W,top:le,width:R*(v.hidden.width/(1060*o)),height:R*1.4*(v.hidden.height/(120*o))},onClick:()=>x("hidden",C,A)},`hidden-overlay-${C}`)})]}),p.jsx("div",{className:"swap-hand-cards",children:e.map((A,C)=>{const R=(c==null?void 0:c.source.index)===C,$=(d==null?void 0:d.swapData.handIdx)===C;return R||$?p.jsx("div",{className:"swap-card placeholder",children:p.jsx(et,{card:A,width:90,dimmed:!0})},`hand-${C}`):p.jsx("div",{className:"swap-card",onMouseDown:K=>E(C,A,K),onTouchStart:K=>E(C,A,K),children:p.jsx(et,{card:A,width:90})},`hand-${C}`)})}),c&&p.jsx("div",{className:"drag-ghost",style:{left:c.position.x-c.offset.x,top:c.position.y-c.offset.y},children:p.jsx(et,{card:c.card,width:90})}),d&&p.jsx("div",{className:"flying-card",style:{"--from-x":`${d.from.x}px`,"--from-y":`${d.from.y}px`,"--to-x":`${d.to.x}px`,"--to-y":`${d.to.y}px`},children:p.jsx(et,{card:d.card,width:60})}),p.jsx("button",{className:"swap-confirm",onClick:r,children:"Done Swapping"})]})}function o1({G:e,ctx:t,moves:n,playerID:r}){var W,le,Ce,ie,I,z,F,G,D,Q,Y;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=ee.useState(null),[u,c]=ee.useState(null),[f,d]=ee.useState(null),[g,v]=ee.useState(null),[S,T]=ee.useState(null),m=M=>T(S===M?null:M),[h,y]=ee.useState(!1),x=ee.useRef(e.year),E=ee.useRef(null),O=1;ee.useEffect(()=>{e.year!==x.current&&(y(!1),x.current=e.year)},[e.year]);const _=M=>{o==="trick"&&s&&n.playCard(M)},N=M=>{o==="planning"&&n.setTrump(M)},A=(M,H)=>{n.assignCard(M,H)},C=()=>{n.submitAssignments()},R=()=>{y(!0),n.confirmSwap()},$=960,K=470;if(t.gameover){const{winner:M,scores:H}=t.gameover;return p.jsxs("div",{className:"game-over",children:[p.jsx("h1",{children:"Game Over!"}),p.jsxs("h2",{children:["Winner: ",e.players[M].name]}),p.jsx("div",{className:"final-scores",children:e.players.map((J,ae)=>p.jsxs("div",{className:ae===M?"winner":"",children:[J.name,": ",H[ae]," points"]},ae))}),p.jsx("p",{children:"(Lowest score wins)"})]})}return p.jsxs("div",{className:"game-board",children:[p.jsxs("div",{className:"mobile-nav-bar",children:[p.jsxs("button",{className:`nav-btn ${S==="options"?"active":""}`,onClick:()=>m("options"),title:"Menu",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",children:"Menu"})]}),p.jsxs("button",{className:`nav-btn ${S===null?"active":""}`,onClick:()=>T(null),title:"Brigade (Playing Area)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Brigade",children:""})]}),p.jsxs("button",{className:`nav-btn ${S==="jobs"?"active":""}`,onClick:()=>m("jobs"),title:"Jobs",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Jobs",children:""})]}),p.jsxs("button",{className:`nav-btn ${S==="gulag"?"active":""}`,onClick:()=>m("gulag"),title:"The North (Gulag)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"The North",children:""})]}),p.jsxs("button",{className:`nav-btn ${S==="plot"?"active":""}`,onClick:()=>m("plot"),title:"Your Plot (Cellar)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Plot",children:""})]})]}),S==="options"&&p.jsx("div",{className:"mobile-panel-content",children:p.jsxs("div",{className:"options-panel",children:[p.jsx("h3",{title:"Menu",children:""}),p.jsxs("div",{className:"menu-options",children:[p.jsxs("div",{className:"rules-section",children:[p.jsx("h4",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h5",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h5",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h5",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]})]})]}),p.jsx("button",{className:"menu-btn-action",onClick:()=>window.location.reload(),children:" New Game"})]})]})}),p.jsxs("div",{className:"game-content",children:[o==="planning"&&!e.trump&&p.jsxs("div",{className:"trump-selection",children:[p.jsx("h3",{title:"Select Trump Suit",children:"  "}),p.jsx("div",{className:"suit-buttons",children:dt.map(M=>{const H={Hearts:{ru:"",en:"Hearts (Wheat)"},Diamonds:{ru:"",en:"Diamonds (Beets)"},Clubs:{ru:"",en:"Clubs (Potatoes)"},Spades:{ru:"",en:"Spades (Sunflowers)"}};return p.jsxs("button",{onClick:()=>N(M),className:`suit-btn ${M.toLowerCase()}`,title:H[M].en,children:[l1(M)," ",H[M].ru]},M)})})]}),p.jsxs("div",{className:"svg-container",children:[p.jsx("svg",{ref:E,viewBox:"0 0 1920 1080",className:"board-svg",children:p.jsx(n1,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:$,centerY:K,scale:O,year:e.year,trump:e.trump,phase:o,isMyTurn:s,currentPlayerName:(W=e.players[t.currentPlayer])==null?void 0:W.name,showInfo:!0,players:e.players,currentPlayer:parseInt(t.currentPlayer,10),brigadeLeader:e.players.findIndex(M=>M.brigadeLeader),displayMode:o==="assignment"?"jobs":o==="swap"?"plot":S==="jobs"?"jobs":S==="gulag"?"gulag":S==="plot"?"plot":"game",workHours:e.workHours,claimedJobs:e.claimedJobs,jobBuckets:e.jobBuckets,revealedJobs:e.revealedJobs,exiled:e.exiled,playerPlot:(le=e.players[i])==null?void 0:le.plot})}),o==="assignment"&&e.lastWinner===i&&p.jsx(i1,{lastTrick:e.lastTrick,pendingAssignments:e.pendingAssignments,onAssign:A,onSubmit:C,svgRef:E,centerY:K,scale:O}),o==="swap"&&!((Ce=e.swapConfirmed)!=null&&Ce[i])&&!h&&p.jsx(s1,{hand:((ie=e.players[i])==null?void 0:ie.hand)||[],plot:(I=e.players[i])==null?void 0:I.plot,onSwap:(M,H,J)=>n.swapCard(M,H,J),onConfirm:R,svgRef:E,centerY:K,scale:O,year:e.year}),o==="swap"&&(((z=e.swapConfirmed)==null?void 0:z[i])||h)&&p.jsx("div",{className:"swap-ui",children:p.jsx("h3",{children:"Waiting for other players..."})}),p.jsxs("div",{className:"player-plot",children:[p.jsx("h4",{title:"Your Plot (Cellar)",children:""}),p.jsxs("div",{className:"plot-cards",children:[(F=e.players[i])==null?void 0:F.plot.revealed.map((M,H)=>p.jsx(et,{card:M,width:60},`r-${H}`)),(G=e.players[i])==null?void 0:G.plot.hidden.map((M,H)=>p.jsxs("div",{className:`hidden-plot-card ${g===H?"revealed":""}`,title:"Tap to reveal",onClick:()=>v(g===H?null:H),children:[p.jsx(et,{card:M,width:60,faceDown:!0,className:"card-back"}),p.jsx(et,{card:M,width:60,className:"card-front"})]},`h-${H}`))]})]})]}),p.jsx("div",{className:"hand-area",children:p.jsx(e1,{cards:((D=e.players[i])==null?void 0:D.hand)||[],onPlayCard:_,canPlay:o==="trick"&&s,leadSuit:(Y=(Q=e.currentTrick[0])==null?void 0:Q[1])==null?void 0:Y.suit,trump:e.trump,validIndices:a1(e,i,o),className:o==="assignment"?"shifted":""})})]})]})}function l1(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function a1(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function u1(){const[e,t]=ee.useState(!1),[n,r]=ee.useState({...im}),i=ee.useMemo(()=>e?Gp({game:Zw,board:o1,numPlayers:4,multiplayer:Zp({bots:{1:ls,2:ls,3:ls}}),debug:!1}):null,[e]),[s,o]=ee.useState(!1);return e?p.jsx(i,{playerID:"0",setupData:{variants:n}}):p.jsxs("div",{className:"lobby",children:[p.jsxs("div",{className:"lobby-left",children:[p.jsxs("div",{className:"lobby-title",children:[p.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),p.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""})]}),p.jsxs("div",{className:"lobby-buttons",children:[p.jsx("button",{className:"start-btn",onClick:()=>t(!0),children:"Start Game"}),p.jsx("button",{className:`rules-btn ${s?"active":""}`,onClick:()=>o(!s),children:s?"Options":"Rules"})]})]}),p.jsx("div",{className:"lobby-right-panel",children:s?p.jsxs("div",{className:"rules-panel",children:[p.jsx("h3",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h4",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h4",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h4",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),p.jsx("h4",{children:"Scoring"}),p.jsx("p",{children:"Cards in your plot = penalty points. Lowest score wins!"})]})]}):p.jsxs("div",{className:"variant-options",children:[p.jsx("h3",{children:"Deck Type"}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),p.jsx("h3",{children:"Variant Rules"}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:l=>r({...n,nomenclature:l.target.checked})}),p.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:l=>r({...n,allowSwap:l.target.checked})}),p.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:l=>r({...n,northernStyle:l.target.checked})}),p.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - No job rewards, all vulnerable"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:l=>r({...n,miceVariant:l.target.checked})}),p.jsx("strong",{title:"Myshi - Mice",children:""})," - All reveal during requisition"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:l=>r({...n,ordenNachalniku:l.target.checked})}),p.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards on job complete"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:l=>r({...n,medalsCount:l.target.checked})}),p.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins add to score"]}),n.deckType===52&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:l=>r({...n,accumulateJobs:l.target.checked})}),p.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Job rewards carry over"]})]})})]})}const c1=Bh(document.getElementById("root"));c1.render(p.jsx(u1,{}));
