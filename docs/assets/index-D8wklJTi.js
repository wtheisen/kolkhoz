(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function If(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mf={exports:{}},Gs={},Df={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=Symbol.for("react.element"),mm=Symbol.for("react.portal"),ym=Symbol.for("react.fragment"),gm=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),wm=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),km=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),_m=Symbol.for("react.memo"),Em=Symbol.for("react.lazy"),Yu=Symbol.iterator;function Cm(e){return e===null||typeof e!="object"?null:(e=Yu&&e[Yu]||e["@@iterator"],typeof e=="function"?e:null)}var Rf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bf=Object.assign,Lf={};function Sr(e,t,n){this.props=e,this.context=t,this.refs=Lf,this.updater=n||Rf}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zf(){}zf.prototype=Sr.prototype;function Sa(e,t,n){this.props=e,this.context=t,this.refs=Lf,this.updater=n||Rf}var ka=Sa.prototype=new zf;ka.constructor=Sa;bf(ka,Sr.prototype);ka.isPureReactComponent=!0;var Ku=Array.isArray,$f=Object.prototype.hasOwnProperty,xa={current:null},Ff={key:!0,ref:!0,__self:!0,__source:!0};function Bf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)$f.call(t,r)&&!Ff.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:_i,type:e,key:s,ref:o,props:i,_owner:xa.current}}function Pm(e,t){return{$$typeof:_i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _a(e){return typeof e=="object"&&e!==null&&e.$$typeof===_i}function Nm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ju=/\/+/g;function Po(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nm(""+e.key):t.toString(36)}function ns(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _i:case mm:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Po(o,0):r,Ku(i)?(n="",e!=null&&(n=e.replace(Ju,"$&/")+"/"),ns(i,t,n,"",function(u){return u})):i!=null&&(_a(i)&&(i=Pm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ju,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Ku(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+Po(s,l);o+=ns(s,t,n,a,i)}else if(a=Cm(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+Po(s,l++),o+=ns(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ii(e,t,n){if(e==null)return e;var r=[],i=0;return ns(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Om(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},rs={transition:null},Tm={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:rs,ReactCurrentOwner:xa};function Uf(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Ii,forEach:function(e,t,n){Ii(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ii(e,function(){t++}),t},toArray:function(e){return Ii(e,function(t){return t})||[]},only:function(e){if(!_a(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=Sr;W.Fragment=ym;W.Profiler=vm;W.PureComponent=Sa;W.StrictMode=gm;W.Suspense=xm;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tm;W.act=Uf;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=bf({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=xa.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)$f.call(t,a)&&!Ff.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:_i,type:e.type,key:i,ref:s,props:r,_owner:o}};W.createContext=function(e){return e={$$typeof:Sm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wm,_context:e},e.Consumer=e};W.createElement=Bf;W.createFactory=function(e){var t=Bf.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:km,render:e}};W.isValidElement=_a;W.lazy=function(e){return{$$typeof:Em,_payload:{_status:-1,_result:e},_init:Om}};W.memo=function(e,t){return{$$typeof:_m,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=rs.transition;rs.transition={};try{e()}finally{rs.transition=t}};W.unstable_act=Uf;W.useCallback=function(e,t){return Be.current.useCallback(e,t)};W.useContext=function(e){return Be.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};W.useEffect=function(e,t){return Be.current.useEffect(e,t)};W.useId=function(){return Be.current.useId()};W.useImperativeHandle=function(e,t,n){return Be.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Be.current.useMemo(e,t)};W.useReducer=function(e,t,n){return Be.current.useReducer(e,t,n)};W.useRef=function(e){return Be.current.useRef(e)};W.useState=function(e){return Be.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return Be.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return Be.current.useTransition()};W.version="18.3.1";Df.exports=W;var Ne=Df.exports;const R=If(Ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jm=Ne,Am=Symbol.for("react.element"),Im=Symbol.for("react.fragment"),Mm=Object.prototype.hasOwnProperty,Dm=jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rm={key:!0,ref:!0,__self:!0,__source:!0};function Hf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Mm.call(t,r)&&!Rm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Am,type:e,key:s,ref:o,props:i,_owner:Dm.current}}Gs.Fragment=Im;Gs.jsx=Hf;Gs.jsxs=Hf;Mf.exports=Gs;var p=Mf.exports,Wf={exports:{}},st={},Vf={exports:{}},Yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,F){var $=j.length;j.push(F);e:for(;0<$;){var Q=$-1>>>1,K=j[Q];if(0<i(K,F))j[Q]=F,j[$]=K,$=Q;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var F=j[0],$=j.pop();if($!==F){j[0]=$;e:for(var Q=0,K=j.length,$t=K>>>1;Q<$t;){var yt=2*(Q+1)-1,gt=j[yt],ye=yt+1,Ft=j[ye];if(0>i(gt,$))ye<K&&0>i(Ft,gt)?(j[Q]=Ft,j[ye]=$,Q=ye):(j[Q]=gt,j[yt]=$,Q=yt);else if(ye<K&&0>i(Ft,$))j[Q]=Ft,j[ye]=$,Q=ye;else break e}}return F}function i(j,F){var $=j.sortIndex-F.sortIndex;return $!==0?$:j.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,h=3,g=!1,v=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=j)r(u),F.sortIndex=F.expirationTime,t(a,F);else break;F=n(u)}}function k(j){if(S=!1,y(j),!v)if(n(a)!==null)v=!0,pe(P);else{var F=n(u);F!==null&&oe(k,F.startTime-j)}}function P(j,F){v=!1,S&&(S=!1,m(T),T=-1),g=!0;var $=h;try{for(y(F),d=n(a);d!==null&&(!(d.expirationTime>F)||j&&!b());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,h=d.priorityLevel;var K=Q(d.expirationTime<=F);F=e.unstable_now(),typeof K=="function"?d.callback=K:d===n(a)&&r(a),y(F)}else r(a);d=n(a)}if(d!==null)var $t=!0;else{var yt=n(u);yt!==null&&oe(k,yt.startTime-F),$t=!1}return $t}finally{d=null,h=$,g=!1}}var O=!1,_=null,T=-1,U=5,I=-1;function b(){return!(e.unstable_now()-I<U)}function Y(){if(_!==null){var j=e.unstable_now();I=j;var F=!0;try{F=_(!0,j)}finally{F?J():(O=!1,_=null)}}else O=!1}var J;if(typeof f=="function")J=function(){f(Y)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,he=X.port2;X.port1.onmessage=Y,J=function(){he.postMessage(null)}}else J=function(){C(Y,0)};function pe(j){_=j,O||(O=!0,J())}function oe(j,F){T=C(function(){j(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,pe(P))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var $=h;h=F;try{return j()}finally{h=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,F){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=h;h=j;try{return F()}finally{h=$}},e.unstable_scheduleCallback=function(j,F,$){var Q=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,j){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=$+K,j={id:c++,callback:F,priorityLevel:j,startTime:$,expirationTime:K,sortIndex:-1},$>Q?(j.sortIndex=$,t(u,j),n(a)===null&&j===n(u)&&(S?(m(T),T=-1):S=!0,oe(k,$-Q))):(j.sortIndex=K,t(a,j),v||g||(v=!0,pe(P))),j},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(j){var F=h;return function(){var $=h;h=F;try{return j.apply(this,arguments)}finally{h=$}}}})(Yf);Vf.exports=Yf;var bm=Vf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=Ne,nt=bm;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kf=new Set,ei={};function Un(e,t){fr(e,t),fr(e+"Capture",t)}function fr(e,t){for(ei[e]=t,e=0;e<t.length;e++)Kf.add(t[e])}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ul=Object.prototype.hasOwnProperty,zm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qu={},qu={};function $m(e){return ul.call(qu,e)?!0:ul.call(Qu,e)?!1:zm.test(e)?qu[e]=!0:(Qu[e]=!0,!1)}function Fm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bm(e,t,n,r){if(t===null||typeof t>"u"||Fm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ue(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new Ue(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new Ue(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new Ue(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new Ue(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new Ue(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new Ue(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new Ue(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new Ue(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new Ue(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ea=/[\-:]([a-z])/g;function Ca(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ea,Ca);Te[t]=new Ue(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ea,Ca);Te[t]=new Ue(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ea,Ca);Te[t]=new Ue(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new Ue(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new Ue(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pa(e,t,n,r){var i=Te.hasOwnProperty(t)?Te[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bm(t,n,i,r)&&(n=null),r||i===null?$m(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gt=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mi=Symbol.for("react.element"),Vn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Na=Symbol.for("react.strict_mode"),cl=Symbol.for("react.profiler"),Jf=Symbol.for("react.provider"),Qf=Symbol.for("react.context"),Oa=Symbol.for("react.forward_ref"),fl=Symbol.for("react.suspense"),dl=Symbol.for("react.suspense_list"),Ta=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),qf=Symbol.for("react.offscreen"),Xu=Symbol.iterator;function Pr(e){return e===null||typeof e!="object"?null:(e=Xu&&e[Xu]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Object.assign,No;function Lr(e){if(No===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);No=t&&t[1]||""}return`
`+No+e}var Oo=!1;function To(e,t){if(!e||Oo)return"";Oo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{Oo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Lr(e):""}function Um(e){switch(e.tag){case 5:return Lr(e.type);case 16:return Lr("Lazy");case 13:return Lr("Suspense");case 19:return Lr("SuspenseList");case 0:case 2:case 15:return e=To(e.type,!1),e;case 11:return e=To(e.type.render,!1),e;case 1:return e=To(e.type,!0),e;default:return""}}function hl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yn:return"Fragment";case Vn:return"Portal";case cl:return"Profiler";case Na:return"StrictMode";case fl:return"Suspense";case dl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qf:return(e.displayName||"Context")+".Consumer";case Jf:return(e._context.displayName||"Context")+".Provider";case Oa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ta:return t=e.displayName||null,t!==null?t:hl(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return hl(e(t))}catch{}}return null}function Hm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hl(t);case 8:return t===Na?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wm(e){var t=Xf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Di(e){e._valueTracker||(e._valueTracker=Wm(e))}function Zf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function pl(e,t){var n=t.checked;return ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gf(e,t){t=t.checked,t!=null&&Pa(e,"checked",t,!1)}function ml(e,t){Gf(e,t);var n=vn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yl(e,t.type,n):t.hasOwnProperty("defaultValue")&&yl(e,t.type,vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yl(e,t,n){(t!=="number"||ws(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zr=Array.isArray;function ir(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function gl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ec(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(N(92));if(zr(n)){if(1<n.length)throw Error(N(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vn(n)}}function ed(e,t){var n=vn(t.value),r=vn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function td(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?td(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ri,nd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ri=Ri||document.createElement("div"),Ri.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ri.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ti(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vm=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(e){Vm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wr[t]=Wr[e]})});function rd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wr.hasOwnProperty(e)&&Wr[e]?(""+t).trim():t+"px"}function id(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Ym=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wl(e,t){if(t){if(Ym[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function Sl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kl=null;function ja(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xl=null,sr=null,or=null;function nc(e){if(e=Pi(e)){if(typeof xl!="function")throw Error(N(280));var t=e.stateNode;t&&(t=io(t),xl(e.stateNode,e.type,t))}}function sd(e){sr?or?or.push(e):or=[e]:sr=e}function od(){if(sr){var e=sr,t=or;if(or=sr=null,nc(e),t)for(e=0;e<t.length;e++)nc(t[e])}}function ld(e,t){return e(t)}function ad(){}var jo=!1;function ud(e,t,n){if(jo)return e(t,n);jo=!0;try{return ld(e,t,n)}finally{jo=!1,(sr!==null||or!==null)&&(ad(),od())}}function ni(e,t){var n=e.stateNode;if(n===null)return null;var r=io(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var _l=!1;if(Jt)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){_l=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{_l=!1}function Km(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Vr=!1,Ss=null,ks=!1,El=null,Jm={onError:function(e){Vr=!0,Ss=e}};function Qm(e,t,n,r,i,s,o,l,a){Vr=!1,Ss=null,Km.apply(Jm,arguments)}function qm(e,t,n,r,i,s,o,l,a){if(Qm.apply(this,arguments),Vr){if(Vr){var u=Ss;Vr=!1,Ss=null}else throw Error(N(198));ks||(ks=!0,El=u)}}function Hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rc(e){if(Hn(e)!==e)throw Error(N(188))}function Xm(e){var t=e.alternate;if(!t){if(t=Hn(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rc(i),e;if(s===r)return rc(i),t;s=s.sibling}throw Error(N(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function fd(e){return e=Xm(e),e!==null?dd(e):null}function dd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dd(e);if(t!==null)return t;e=e.sibling}return null}var hd=nt.unstable_scheduleCallback,ic=nt.unstable_cancelCallback,Zm=nt.unstable_shouldYield,Gm=nt.unstable_requestPaint,me=nt.unstable_now,ey=nt.unstable_getCurrentPriorityLevel,Aa=nt.unstable_ImmediatePriority,pd=nt.unstable_UserBlockingPriority,xs=nt.unstable_NormalPriority,ty=nt.unstable_LowPriority,md=nt.unstable_IdlePriority,eo=null,Mt=null;function ny(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(eo,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:sy,ry=Math.log,iy=Math.LN2;function sy(e){return e>>>=0,e===0?32:31-(ry(e)/iy|0)|0}var bi=64,Li=4194304;function $r(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _s(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=$r(l):(s&=o,s!==0&&(r=$r(s)))}else o=n&~i,o!==0?r=$r(o):s!==0&&(r=$r(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Et(t),i=1<<n,r|=e[n],t&=~i;return r}function oy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ly(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Et(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=oy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Cl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yd(){var e=bi;return bi<<=1,!(bi&4194240)&&(bi=64),e}function Ao(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ei(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=n}function ay(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Et(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ia(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Et(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var G=0;function gd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vd,Ma,wd,Sd,kd,Pl=!1,zi=[],un=null,cn=null,fn=null,ri=new Map,ii=new Map,sn=[],uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ii.delete(t.pointerId)}}function Or(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Pi(t),t!==null&&Ma(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function cy(e,t,n,r,i){switch(t){case"focusin":return un=Or(un,e,t,n,r,i),!0;case"dragenter":return cn=Or(cn,e,t,n,r,i),!0;case"mouseover":return fn=Or(fn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ri.set(s,Or(ri.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ii.set(s,Or(ii.get(s)||null,e,t,n,r,i)),!0}return!1}function xd(e){var t=An(e.target);if(t!==null){var n=Hn(t);if(n!==null){if(t=n.tag,t===13){if(t=cd(n),t!==null){e.blockedOn=t,kd(e.priority,function(){wd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);kl=r,n.target.dispatchEvent(r),kl=null}else return t=Pi(n),t!==null&&Ma(t),e.blockedOn=n,!1;t.shift()}return!0}function oc(e,t,n){is(e)&&n.delete(t)}function fy(){Pl=!1,un!==null&&is(un)&&(un=null),cn!==null&&is(cn)&&(cn=null),fn!==null&&is(fn)&&(fn=null),ri.forEach(oc),ii.forEach(oc)}function Tr(e,t){e.blockedOn===t&&(e.blockedOn=null,Pl||(Pl=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,fy)))}function si(e){function t(i){return Tr(i,e)}if(0<zi.length){Tr(zi[0],e);for(var n=1;n<zi.length;n++){var r=zi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&Tr(un,e),cn!==null&&Tr(cn,e),fn!==null&&Tr(fn,e),ri.forEach(t),ii.forEach(t),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)xd(n),n.blockedOn===null&&sn.shift()}var lr=Gt.ReactCurrentBatchConfig,Es=!0;function dy(e,t,n,r){var i=G,s=lr.transition;lr.transition=null;try{G=1,Da(e,t,n,r)}finally{G=i,lr.transition=s}}function hy(e,t,n,r){var i=G,s=lr.transition;lr.transition=null;try{G=4,Da(e,t,n,r)}finally{G=i,lr.transition=s}}function Da(e,t,n,r){if(Es){var i=Nl(e,t,n,r);if(i===null)Bo(e,t,r,Cs,n),sc(e,r);else if(cy(i,e,t,n,r))r.stopPropagation();else if(sc(e,r),t&4&&-1<uy.indexOf(e)){for(;i!==null;){var s=Pi(i);if(s!==null&&vd(s),s=Nl(e,t,n,r),s===null&&Bo(e,t,r,Cs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Bo(e,t,r,null,n)}}var Cs=null;function Nl(e,t,n,r){if(Cs=null,e=ja(r),e=An(e),e!==null)if(t=Hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cs=e,null}function _d(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ey()){case Aa:return 1;case pd:return 4;case xs:case ty:return 16;case md:return 536870912;default:return 16}default:return 16}}var ln=null,Ra=null,ss=null;function Ed(){if(ss)return ss;var e,t=Ra,n=t.length,r,i="value"in ln?ln.value:ln.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ss=i.slice(e,1<r?1-r:void 0)}function os(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $i(){return!0}function lc(){return!1}function ot(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$i:lc,this.isPropagationStopped=lc,this}return ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),t}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ba=ot(kr),Ci=ce({},kr,{view:0,detail:0}),py=ot(Ci),Io,Mo,jr,to=ce({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Io=e.screenX-jr.screenX,Mo=e.screenY-jr.screenY):Mo=Io=0,jr=e),Io)},movementY:function(e){return"movementY"in e?e.movementY:Mo}}),ac=ot(to),my=ce({},to,{dataTransfer:0}),yy=ot(my),gy=ce({},Ci,{relatedTarget:0}),Do=ot(gy),vy=ce({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),wy=ot(vy),Sy=ce({},kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ky=ot(Sy),xy=ce({},kr,{data:0}),uc=ot(xy),_y={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Py(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Cy[e])?!!t[e]:!1}function La(){return Py}var Ny=ce({},Ci,{key:function(e){if(e.key){var t=_y[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=os(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ey[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(e){return e.type==="keypress"?os(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?os(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Oy=ot(Ny),Ty=ce({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=ot(Ty),jy=ce({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),Ay=ot(jy),Iy=ce({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),My=ot(Iy),Dy=ce({},to,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ry=ot(Dy),by=[9,13,27,32],za=Jt&&"CompositionEvent"in window,Yr=null;Jt&&"documentMode"in document&&(Yr=document.documentMode);var Ly=Jt&&"TextEvent"in window&&!Yr,Cd=Jt&&(!za||Yr&&8<Yr&&11>=Yr),fc=" ",dc=!1;function Pd(e,t){switch(e){case"keyup":return by.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function zy(e,t){switch(e){case"compositionend":return Nd(t);case"keypress":return t.which!==32?null:(dc=!0,fc);case"textInput":return e=t.data,e===fc&&dc?null:e;default:return null}}function $y(e,t){if(Kn)return e==="compositionend"||!za&&Pd(e,t)?(e=Ed(),ss=Ra=ln=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cd&&t.locale!=="ko"?null:t.data;default:return null}}var Fy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fy[e.type]:t==="textarea"}function Od(e,t,n,r){sd(r),t=Ps(t,"onChange"),0<t.length&&(n=new ba("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,oi=null;function By(e){$d(e,0)}function no(e){var t=qn(e);if(Zf(t))return e}function Uy(e,t){if(e==="change")return t}var Td=!1;if(Jt){var Ro;if(Jt){var bo="oninput"in document;if(!bo){var pc=document.createElement("div");pc.setAttribute("oninput","return;"),bo=typeof pc.oninput=="function"}Ro=bo}else Ro=!1;Td=Ro&&(!document.documentMode||9<document.documentMode)}function mc(){Kr&&(Kr.detachEvent("onpropertychange",jd),oi=Kr=null)}function jd(e){if(e.propertyName==="value"&&no(oi)){var t=[];Od(t,oi,e,ja(e)),ud(By,t)}}function Hy(e,t,n){e==="focusin"?(mc(),Kr=t,oi=n,Kr.attachEvent("onpropertychange",jd)):e==="focusout"&&mc()}function Wy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return no(oi)}function Vy(e,t){if(e==="click")return no(t)}function Yy(e,t){if(e==="input"||e==="change")return no(t)}function Ky(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:Ky;function li(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ul.call(t,i)||!Pt(e[i],t[i]))return!1}return!0}function yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var n=yc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yc(n)}}function Ad(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ad(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Id(){for(var e=window,t=ws();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ws(e.document)}return t}function $a(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jy(e){var t=Id(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ad(n.ownerDocument.documentElement,n)){if(r!==null&&$a(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=gc(n,s);var o=gc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qy=Jt&&"documentMode"in document&&11>=document.documentMode,Jn=null,Ol=null,Jr=null,Tl=!1;function vc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tl||Jn==null||Jn!==ws(r)||(r=Jn,"selectionStart"in r&&$a(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jr&&li(Jr,r)||(Jr=r,r=Ps(Ol,"onSelect"),0<r.length&&(t=new ba("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jn)))}function Fi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qn={animationend:Fi("Animation","AnimationEnd"),animationiteration:Fi("Animation","AnimationIteration"),animationstart:Fi("Animation","AnimationStart"),transitionend:Fi("Transition","TransitionEnd")},Lo={},Md={};Jt&&(Md=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function ro(e){if(Lo[e])return Lo[e];if(!Qn[e])return e;var t=Qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Md)return Lo[e]=t[n];return e}var Dd=ro("animationend"),Rd=ro("animationiteration"),bd=ro("animationstart"),Ld=ro("transitionend"),zd=new Map,wc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){zd.set(e,t),Un(t,[e])}for(var zo=0;zo<wc.length;zo++){var $o=wc[zo],qy=$o.toLowerCase(),Xy=$o[0].toUpperCase()+$o.slice(1);xn(qy,"on"+Xy)}xn(Dd,"onAnimationEnd");xn(Rd,"onAnimationIteration");xn(bd,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(Ld,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Un("onBeforeInput",["compositionend","keypress","textInput","paste"]);Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Sc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qm(r,t,void 0,e),e.currentTarget=null}function $d(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Sc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Sc(i,l,u),s=a}}}if(ks)throw e=El,ks=!1,El=null,e}function re(e,t){var n=t[Dl];n===void 0&&(n=t[Dl]=new Set);var r=e+"__bubble";n.has(r)||(Fd(t,e,2,!1),n.add(r))}function Fo(e,t,n){var r=0;t&&(r|=4),Fd(n,e,r,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function ai(e){if(!e[Bi]){e[Bi]=!0,Kf.forEach(function(n){n!=="selectionchange"&&(Zy.has(n)||Fo(n,!1,e),Fo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bi]||(t[Bi]=!0,Fo("selectionchange",!1,t))}}function Fd(e,t,n,r){switch(_d(t)){case 1:var i=dy;break;case 4:i=hy;break;default:i=Da}n=i.bind(null,t,n,e),i=void 0,!_l||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bo(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=An(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ud(function(){var u=s,c=ja(n),d=[];e:{var h=zd.get(e);if(h!==void 0){var g=ba,v=e;switch(e){case"keypress":if(os(n)===0)break e;case"keydown":case"keyup":g=Oy;break;case"focusin":v="focus",g=Do;break;case"focusout":v="blur",g=Do;break;case"beforeblur":case"afterblur":g=Do;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ay;break;case Dd:case Rd:case bd:g=wy;break;case Ld:g=My;break;case"scroll":g=py;break;case"wheel":g=Ry;break;case"copy":case"cut":case"paste":g=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=cc}var S=(t&4)!==0,C=!S&&e==="scroll",m=S?h!==null?h+"Capture":null:h;S=[];for(var f=u,y;f!==null;){y=f;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,m!==null&&(k=ni(f,m),k!=null&&S.push(ui(f,k,y)))),C)break;f=f.return}0<S.length&&(h=new g(h,v,null,n,c),d.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==kl&&(v=n.relatedTarget||n.fromElement)&&(An(v)||v[Qt]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?An(v):null,v!==null&&(C=Hn(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(S=ac,k="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(S=cc,k="onPointerLeave",m="onPointerEnter",f="pointer"),C=g==null?h:qn(g),y=v==null?h:qn(v),h=new S(k,f+"leave",g,n,c),h.target=C,h.relatedTarget=y,k=null,An(c)===u&&(S=new S(m,f+"enter",v,n,c),S.target=y,S.relatedTarget=C,k=S),C=k,g&&v)t:{for(S=g,m=v,f=0,y=S;y;y=Wn(y))f++;for(y=0,k=m;k;k=Wn(k))y++;for(;0<f-y;)S=Wn(S),f--;for(;0<y-f;)m=Wn(m),y--;for(;f--;){if(S===m||m!==null&&S===m.alternate)break t;S=Wn(S),m=Wn(m)}S=null}else S=null;g!==null&&kc(d,h,g,S,!1),v!==null&&C!==null&&kc(d,C,v,S,!0)}}e:{if(h=u?qn(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var P=Uy;else if(hc(h))if(Td)P=Yy;else{P=Wy;var O=Hy}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=Vy);if(P&&(P=P(e,u))){Od(d,P,n,c);break e}O&&O(e,h,u),e==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&yl(h,"number",h.value)}switch(O=u?qn(u):window,e){case"focusin":(hc(O)||O.contentEditable==="true")&&(Jn=O,Ol=u,Jr=null);break;case"focusout":Jr=Ol=Jn=null;break;case"mousedown":Tl=!0;break;case"contextmenu":case"mouseup":case"dragend":Tl=!1,vc(d,n,c);break;case"selectionchange":if(Qy)break;case"keydown":case"keyup":vc(d,n,c)}var _;if(za)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Kn?Pd(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Cd&&n.locale!=="ko"&&(Kn||T!=="onCompositionStart"?T==="onCompositionEnd"&&Kn&&(_=Ed()):(ln=c,Ra="value"in ln?ln.value:ln.textContent,Kn=!0)),O=Ps(u,T),0<O.length&&(T=new uc(T,e,null,n,c),d.push({event:T,listeners:O}),_?T.data=_:(_=Nd(n),_!==null&&(T.data=_)))),(_=Ly?zy(e,n):$y(e,n))&&(u=Ps(u,"onBeforeInput"),0<u.length&&(c=new uc("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=_))}$d(d,t)})}function ui(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ps(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ni(e,n),s!=null&&r.unshift(ui(e,s,i)),s=ni(e,t),s!=null&&r.push(ui(e,s,i))),e=e.return}return r}function Wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=ni(n,s),a!=null&&o.unshift(ui(n,a,l))):i||(a=ni(n,s),a!=null&&o.push(ui(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Gy=/\r\n?/g,eg=/\u0000|\uFFFD/g;function xc(e){return(typeof e=="string"?e:""+e).replace(Gy,`
`).replace(eg,"")}function Ui(e,t,n){if(t=xc(t),xc(e)!==t&&n)throw Error(N(425))}function Ns(){}var jl=null,Al=null;function Il(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ml=typeof setTimeout=="function"?setTimeout:void 0,tg=typeof clearTimeout=="function"?clearTimeout:void 0,_c=typeof Promise=="function"?Promise:void 0,ng=typeof queueMicrotask=="function"?queueMicrotask:typeof _c<"u"?function(e){return _c.resolve(null).then(e).catch(rg)}:Ml;function rg(e){setTimeout(function(){throw e})}function Uo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),si(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);si(t)}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ec(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xr=Math.random().toString(36).slice(2),It="__reactFiber$"+xr,ci="__reactProps$"+xr,Qt="__reactContainer$"+xr,Dl="__reactEvents$"+xr,ig="__reactListeners$"+xr,sg="__reactHandles$"+xr;function An(e){var t=e[It];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qt]||n[It]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ec(e);e!==null;){if(n=e[It])return n;e=Ec(e)}return t}e=n,n=e.parentNode}return null}function Pi(e){return e=e[It]||e[Qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function io(e){return e[ci]||null}var Rl=[],Xn=-1;function _n(e){return{current:e}}function ie(e){0>Xn||(e.current=Rl[Xn],Rl[Xn]=null,Xn--)}function te(e,t){Xn++,Rl[Xn]=e.current,e.current=t}var wn={},Re=_n(wn),Ye=_n(!1),bn=wn;function dr(e,t){var n=e.type.contextTypes;if(!n)return wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ke(e){return e=e.childContextTypes,e!=null}function Os(){ie(Ye),ie(Re)}function Cc(e,t,n){if(Re.current!==wn)throw Error(N(168));te(Re,t),te(Ye,n)}function Bd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(N(108,Hm(e)||"Unknown",i));return ce({},n,r)}function Ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wn,bn=Re.current,te(Re,e),te(Ye,Ye.current),!0}function Pc(e,t,n){var r=e.stateNode;if(!r)throw Error(N(169));n?(e=Bd(e,t,bn),r.__reactInternalMemoizedMergedChildContext=e,ie(Ye),ie(Re),te(Re,e)):ie(Ye),te(Ye,n)}var Ht=null,so=!1,Ho=!1;function Ud(e){Ht===null?Ht=[e]:Ht.push(e)}function og(e){so=!0,Ud(e)}function En(){if(!Ho&&Ht!==null){Ho=!0;var e=0,t=G;try{var n=Ht;for(G=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ht=null,so=!1}catch(i){throw Ht!==null&&(Ht=Ht.slice(e+1)),hd(Aa,En),i}finally{G=t,Ho=!1}}return null}var Zn=[],Gn=0,js=null,As=0,ut=[],ct=0,Ln=null,Wt=1,Vt="";function On(e,t){Zn[Gn++]=As,Zn[Gn++]=js,js=e,As=t}function Hd(e,t,n){ut[ct++]=Wt,ut[ct++]=Vt,ut[ct++]=Ln,Ln=e;var r=Wt;e=Vt;var i=32-Et(r)-1;r&=~(1<<i),n+=1;var s=32-Et(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wt=1<<32-Et(t)+i|n<<i|r,Vt=s+e}else Wt=1<<s|n<<i|r,Vt=e}function Fa(e){e.return!==null&&(On(e,1),Hd(e,1,0))}function Ba(e){for(;e===js;)js=Zn[--Gn],Zn[Gn]=null,As=Zn[--Gn],Zn[Gn]=null;for(;e===Ln;)Ln=ut[--ct],ut[ct]=null,Vt=ut[--ct],ut[ct]=null,Wt=ut[--ct],ut[ct]=null}var tt=null,Ge=null,se=!1,xt=null;function Wd(e,t){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,Ge=dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,Ge=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ln!==null?{id:Wt,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tt=e,Ge=null,!0):!1;default:return!1}}function bl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ll(e){if(se){var t=Ge;if(t){var n=t;if(!Nc(e,t)){if(bl(e))throw Error(N(418));t=dn(n.nextSibling);var r=tt;t&&Nc(e,t)?Wd(r,n):(e.flags=e.flags&-4097|2,se=!1,tt=e)}}else{if(bl(e))throw Error(N(418));e.flags=e.flags&-4097|2,se=!1,tt=e}}}function Oc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function Hi(e){if(e!==tt)return!1;if(!se)return Oc(e),se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Il(e.type,e.memoizedProps)),t&&(t=Ge)){if(bl(e))throw Vd(),Error(N(418));for(;t;)Wd(e,t),t=dn(t.nextSibling)}if(Oc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ge=dn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ge=null}}else Ge=tt?dn(e.stateNode.nextSibling):null;return!0}function Vd(){for(var e=Ge;e;)e=dn(e.nextSibling)}function hr(){Ge=tt=null,se=!1}function Ua(e){xt===null?xt=[e]:xt.push(e)}var lg=Gt.ReactCurrentBatchConfig;function Ar(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tc(e){var t=e._init;return t(e._payload)}function Yd(e){function t(m,f){if(e){var y=m.deletions;y===null?(m.deletions=[f],m.flags|=16):y.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function i(m,f){return m=yn(m,f),m.index=0,m.sibling=null,m}function s(m,f,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<f?(m.flags|=2,f):y):(m.flags|=2,f)):(m.flags|=1048576,f)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,f,y,k){return f===null||f.tag!==6?(f=qo(y,m.mode,k),f.return=m,f):(f=i(f,y),f.return=m,f)}function a(m,f,y,k){var P=y.type;return P===Yn?c(m,f,y.props.children,k,y.key):f!==null&&(f.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===nn&&Tc(P)===f.type)?(k=i(f,y.props),k.ref=Ar(m,f,y),k.return=m,k):(k=hs(y.type,y.key,y.props,null,m.mode,k),k.ref=Ar(m,f,y),k.return=m,k)}function u(m,f,y,k){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=Xo(y,m.mode,k),f.return=m,f):(f=i(f,y.children||[]),f.return=m,f)}function c(m,f,y,k,P){return f===null||f.tag!==7?(f=Rn(y,m.mode,k,P),f.return=m,f):(f=i(f,y),f.return=m,f)}function d(m,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=qo(""+f,m.mode,y),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Mi:return y=hs(f.type,f.key,f.props,null,m.mode,y),y.ref=Ar(m,null,f),y.return=m,y;case Vn:return f=Xo(f,m.mode,y),f.return=m,f;case nn:var k=f._init;return d(m,k(f._payload),y)}if(zr(f)||Pr(f))return f=Rn(f,m.mode,y,null),f.return=m,f;Wi(m,f)}return null}function h(m,f,y,k){var P=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:l(m,f,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mi:return y.key===P?a(m,f,y,k):null;case Vn:return y.key===P?u(m,f,y,k):null;case nn:return P=y._init,h(m,f,P(y._payload),k)}if(zr(y)||Pr(y))return P!==null?null:c(m,f,y,k,null);Wi(m,y)}return null}function g(m,f,y,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(y)||null,l(f,m,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Mi:return m=m.get(k.key===null?y:k.key)||null,a(f,m,k,P);case Vn:return m=m.get(k.key===null?y:k.key)||null,u(f,m,k,P);case nn:var O=k._init;return g(m,f,y,O(k._payload),P)}if(zr(k)||Pr(k))return m=m.get(y)||null,c(f,m,k,P,null);Wi(f,k)}return null}function v(m,f,y,k){for(var P=null,O=null,_=f,T=f=0,U=null;_!==null&&T<y.length;T++){_.index>T?(U=_,_=null):U=_.sibling;var I=h(m,_,y[T],k);if(I===null){_===null&&(_=U);break}e&&_&&I.alternate===null&&t(m,_),f=s(I,f,T),O===null?P=I:O.sibling=I,O=I,_=U}if(T===y.length)return n(m,_),se&&On(m,T),P;if(_===null){for(;T<y.length;T++)_=d(m,y[T],k),_!==null&&(f=s(_,f,T),O===null?P=_:O.sibling=_,O=_);return se&&On(m,T),P}for(_=r(m,_);T<y.length;T++)U=g(_,m,T,y[T],k),U!==null&&(e&&U.alternate!==null&&_.delete(U.key===null?T:U.key),f=s(U,f,T),O===null?P=U:O.sibling=U,O=U);return e&&_.forEach(function(b){return t(m,b)}),se&&On(m,T),P}function S(m,f,y,k){var P=Pr(y);if(typeof P!="function")throw Error(N(150));if(y=P.call(y),y==null)throw Error(N(151));for(var O=P=null,_=f,T=f=0,U=null,I=y.next();_!==null&&!I.done;T++,I=y.next()){_.index>T?(U=_,_=null):U=_.sibling;var b=h(m,_,I.value,k);if(b===null){_===null&&(_=U);break}e&&_&&b.alternate===null&&t(m,_),f=s(b,f,T),O===null?P=b:O.sibling=b,O=b,_=U}if(I.done)return n(m,_),se&&On(m,T),P;if(_===null){for(;!I.done;T++,I=y.next())I=d(m,I.value,k),I!==null&&(f=s(I,f,T),O===null?P=I:O.sibling=I,O=I);return se&&On(m,T),P}for(_=r(m,_);!I.done;T++,I=y.next())I=g(_,m,T,I.value,k),I!==null&&(e&&I.alternate!==null&&_.delete(I.key===null?T:I.key),f=s(I,f,T),O===null?P=I:O.sibling=I,O=I);return e&&_.forEach(function(Y){return t(m,Y)}),se&&On(m,T),P}function C(m,f,y,k){if(typeof y=="object"&&y!==null&&y.type===Yn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Mi:e:{for(var P=y.key,O=f;O!==null;){if(O.key===P){if(P=y.type,P===Yn){if(O.tag===7){n(m,O.sibling),f=i(O,y.props.children),f.return=m,m=f;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===nn&&Tc(P)===O.type){n(m,O.sibling),f=i(O,y.props),f.ref=Ar(m,O,y),f.return=m,m=f;break e}n(m,O);break}else t(m,O);O=O.sibling}y.type===Yn?(f=Rn(y.props.children,m.mode,k,y.key),f.return=m,m=f):(k=hs(y.type,y.key,y.props,null,m.mode,k),k.ref=Ar(m,f,y),k.return=m,m=k)}return o(m);case Vn:e:{for(O=y.key;f!==null;){if(f.key===O)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(m,f.sibling),f=i(f,y.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=Xo(y,m.mode,k),f.return=m,m=f}return o(m);case nn:return O=y._init,C(m,f,O(y._payload),k)}if(zr(y))return v(m,f,y,k);if(Pr(y))return S(m,f,y,k);Wi(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(m,f.sibling),f=i(f,y),f.return=m,m=f):(n(m,f),f=qo(y,m.mode,k),f.return=m,m=f),o(m)):n(m,f)}return C}var pr=Yd(!0),Kd=Yd(!1),Is=_n(null),Ms=null,er=null,Ha=null;function Wa(){Ha=er=Ms=null}function Va(e){var t=Is.current;ie(Is),e._currentValue=t}function zl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ar(e,t){Ms=e,Ha=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ve=!0),e.firstContext=null)}function pt(e){var t=e._currentValue;if(Ha!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(Ms===null)throw Error(N(308));er=e,Ms.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var In=null;function Ya(e){In===null?In=[e]:In.push(e)}function Jd(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ya(t)):(n.next=i.next,i.next=n),t.interleaved=n,qt(e,r)}function qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function Ka(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qt(e,n)}return i=r.interleaved,i===null?(t.next=t,Ya(r)):(t.next=i.next,i.next=t),r.interleaved=t,qt(e,n)}function ls(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ia(e,n)}}function jc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ds(e,t,n,r){var i=e.updateQueue;rn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,g=l.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,S=l;switch(h=t,g=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(g,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,h=typeof v=="function"?v.call(g,d,h):v,h==null)break e;d=ce({},d,h);break e;case 2:rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=d):c=c.next=g,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);$n|=o,e.lanes=o,e.memoizedState=d}}function Ac(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(N(191,i));i.call(r)}}}var Ni={},Dt=_n(Ni),fi=_n(Ni),di=_n(Ni);function Mn(e){if(e===Ni)throw Error(N(174));return e}function Ja(e,t){switch(te(di,t),te(fi,e),te(Dt,Ni),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vl(t,e)}ie(Dt),te(Dt,t)}function mr(){ie(Dt),ie(fi),ie(di)}function qd(e){Mn(di.current);var t=Mn(Dt.current),n=vl(t,e.type);t!==n&&(te(fi,e),te(Dt,n))}function Qa(e){fi.current===e&&(ie(Dt),ie(fi))}var ae=_n(0);function Rs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wo=[];function qa(){for(var e=0;e<Wo.length;e++)Wo[e]._workInProgressVersionPrimary=null;Wo.length=0}var as=Gt.ReactCurrentDispatcher,Vo=Gt.ReactCurrentBatchConfig,zn=0,ue=null,we=null,xe=null,bs=!1,Qr=!1,hi=0,ag=0;function je(){throw Error(N(321))}function Xa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}function Za(e,t,n,r,i,s){if(zn=s,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,as.current=e===null||e.memoizedState===null?dg:hg,e=n(r,i),Qr){s=0;do{if(Qr=!1,hi=0,25<=s)throw Error(N(301));s+=1,xe=we=null,t.updateQueue=null,as.current=pg,e=n(r,i)}while(Qr)}if(as.current=Ls,t=we!==null&&we.next!==null,zn=0,xe=we=ue=null,bs=!1,t)throw Error(N(300));return e}function Ga(){var e=hi!==0;return hi=0,e}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?ue.memoizedState=xe=e:xe=xe.next=e,xe}function mt(){if(we===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=xe===null?ue.memoizedState:xe.next;if(t!==null)xe=t,we=e;else{if(e===null)throw Error(N(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},xe===null?ue.memoizedState=xe=e:xe=xe.next=e}return xe}function pi(e,t){return typeof t=="function"?t(e):t}function Yo(e){var t=mt(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=we,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((zn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ue.lanes|=c,$n|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Pt(r,t.memoizedState)||(Ve=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ue.lanes|=s,$n|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ko(e){var t=mt(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Pt(s,t.memoizedState)||(Ve=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Xd(){}function Zd(e,t){var n=ue,r=mt(),i=t(),s=!Pt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ve=!0),r=r.queue,eu(th.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,mi(9,eh.bind(null,n,r,i,t),void 0,null),_e===null)throw Error(N(349));zn&30||Gd(n,t,i)}return i}function Gd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function eh(e,t,n,r){t.value=n,t.getSnapshot=r,nh(t)&&rh(e)}function th(e,t,n){return n(function(){nh(t)&&rh(e)})}function nh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pt(e,n)}catch{return!0}}function rh(e){var t=qt(e,1);t!==null&&Ct(t,e,1,-1)}function Ic(e){var t=jt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:e},t.queue=e,e=e.dispatch=fg.bind(null,ue,e),[t.memoizedState,e]}function mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ih(){return mt().memoizedState}function us(e,t,n,r){var i=jt();ue.flags|=e,i.memoizedState=mi(1|t,n,void 0,r===void 0?null:r)}function oo(e,t,n,r){var i=mt();r=r===void 0?null:r;var s=void 0;if(we!==null){var o=we.memoizedState;if(s=o.destroy,r!==null&&Xa(r,o.deps)){i.memoizedState=mi(t,n,s,r);return}}ue.flags|=e,i.memoizedState=mi(1|t,n,s,r)}function Mc(e,t){return us(8390656,8,e,t)}function eu(e,t){return oo(2048,8,e,t)}function sh(e,t){return oo(4,2,e,t)}function oh(e,t){return oo(4,4,e,t)}function lh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ah(e,t,n){return n=n!=null?n.concat([e]):null,oo(4,4,lh.bind(null,t,e),n)}function tu(){}function uh(e,t){var n=mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ch(e,t){var n=mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fh(e,t,n){return zn&21?(Pt(n,t)||(n=yd(),ue.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ve=!0),e.memoizedState=n)}function ug(e,t){var n=G;G=n!==0&&4>n?n:4,e(!0);var r=Vo.transition;Vo.transition={};try{e(!1),t()}finally{G=n,Vo.transition=r}}function dh(){return mt().memoizedState}function cg(e,t,n){var r=mn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hh(e))ph(t,n);else if(n=Jd(e,t,n,r),n!==null){var i=Fe();Ct(n,e,r,i),mh(n,t,r)}}function fg(e,t,n){var r=mn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hh(e))ph(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Pt(l,o)){var a=t.interleaved;a===null?(i.next=i,Ya(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Jd(e,t,i,r),n!==null&&(i=Fe(),Ct(n,e,r,i),mh(n,t,r))}}function hh(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function ph(e,t){Qr=bs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ia(e,n)}}var Ls={readContext:pt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},dg={readContext:pt,useCallback:function(e,t){return jt().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:Mc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,us(4194308,4,lh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4194308,4,e,t)},useInsertionEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=jt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cg.bind(null,ue,e),[r.memoizedState,e]},useRef:function(e){var t=jt();return e={current:e},t.memoizedState=e},useState:Ic,useDebugValue:tu,useDeferredValue:function(e){return jt().memoizedState=e},useTransition:function(){var e=Ic(!1),t=e[0];return e=ug.bind(null,e[1]),jt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ue,i=jt();if(se){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),_e===null)throw Error(N(349));zn&30||Gd(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Mc(th.bind(null,r,s,e),[e]),r.flags|=2048,mi(9,eh.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=jt(),t=_e.identifierPrefix;if(se){var n=Vt,r=Wt;n=(r&~(1<<32-Et(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ag++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hg={readContext:pt,useCallback:uh,useContext:pt,useEffect:eu,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:oh,useMemo:ch,useReducer:Yo,useRef:ih,useState:function(){return Yo(pi)},useDebugValue:tu,useDeferredValue:function(e){var t=mt();return fh(t,we.memoizedState,e)},useTransition:function(){var e=Yo(pi)[0],t=mt().memoizedState;return[e,t]},useMutableSource:Xd,useSyncExternalStore:Zd,useId:dh,unstable_isNewReconciler:!1},pg={readContext:pt,useCallback:uh,useContext:pt,useEffect:eu,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:oh,useMemo:ch,useReducer:Ko,useRef:ih,useState:function(){return Ko(pi)},useDebugValue:tu,useDeferredValue:function(e){var t=mt();return we===null?t.memoizedState=e:fh(t,we.memoizedState,e)},useTransition:function(){var e=Ko(pi)[0],t=mt().memoizedState;return[e,t]},useMutableSource:Xd,useSyncExternalStore:Zd,useId:dh,unstable_isNewReconciler:!1};function wt(e,t){if(e&&e.defaultProps){t=ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function $l(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lo={isMounted:function(e){return(e=e._reactInternals)?Hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=mn(e),s=Yt(r,i);s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,i),t!==null&&(Ct(t,e,i,r),ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=mn(e),s=Yt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=hn(e,s,i),t!==null&&(Ct(t,e,i,r),ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fe(),r=mn(e),i=Yt(n,r);i.tag=2,t!=null&&(i.callback=t),t=hn(e,i,r),t!==null&&(Ct(t,e,r,n),ls(t,e,r))}};function Dc(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!li(n,r)||!li(i,s):!0}function yh(e,t,n){var r=!1,i=wn,s=t.contextType;return typeof s=="object"&&s!==null?s=pt(s):(i=Ke(t)?bn:Re.current,r=t.contextTypes,s=(r=r!=null)?dr(e,i):wn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Rc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lo.enqueueReplaceState(t,t.state,null)}function Fl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ka(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=pt(s):(s=Ke(t)?bn:Re.current,i.context=dr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&($l(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&lo.enqueueReplaceState(i,i.state,null),Ds(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=Um(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Jo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Bl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mg=typeof WeakMap=="function"?WeakMap:Map;function gh(e,t,n){n=Yt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Xl=r),Bl(e,t)},n}function vh(e,t,n){n=Yt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Bl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bl(e,t),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function bc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mg;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tg.bind(null,e,t,n),t.then(e,e))}function Lc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Yt(-1,1),t.tag=2,hn(n,t,1))),n.lanes|=1),e)}var yg=Gt.ReactCurrentOwner,Ve=!1;function ze(e,t,n,r){t.child=e===null?Kd(t,null,n,r):pr(t,e.child,n,r)}function $c(e,t,n,r,i){n=n.render;var s=t.ref;return ar(t,i),r=Za(e,t,n,r,s,i),n=Ga(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xt(e,t,i)):(se&&n&&Fa(t),t.flags|=1,ze(e,t,r,i),t.child)}function Fc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!uu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,wh(e,t,s,r,i)):(e=hs(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:li,n(o,r)&&e.ref===t.ref)return Xt(e,t,i)}return t.flags|=1,e=yn(s,r),e.ref=t.ref,e.return=t,t.child=e}function wh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(li(s,r)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ve=!0);else return t.lanes=e.lanes,Xt(e,t,i)}return Ul(e,t,n,r,i)}function Sh(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(nr,Ze),Ze|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,te(nr,Ze),Ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,te(nr,Ze),Ze|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,te(nr,Ze),Ze|=r;return ze(e,t,i,n),t.child}function kh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ul(e,t,n,r,i){var s=Ke(n)?bn:Re.current;return s=dr(t,s),ar(t,i),n=Za(e,t,n,r,s,i),r=Ga(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xt(e,t,i)):(se&&r&&Fa(t),t.flags|=1,ze(e,t,n,i),t.child)}function Bc(e,t,n,r,i){if(Ke(n)){var s=!0;Ts(t)}else s=!1;if(ar(t,i),t.stateNode===null)cs(e,t),yh(t,n,r),Fl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=pt(u):(u=Ke(n)?bn:Re.current,u=dr(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Rc(t,o,r,u),rn=!1;var h=t.memoizedState;o.state=h,Ds(t,r,o,i),a=t.memoizedState,l!==r||h!==a||Ye.current||rn?(typeof c=="function"&&($l(t,n,c,r),a=t.memoizedState),(l=rn||Dc(t,n,l,r,h,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Qd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:wt(t.type,l),o.props=u,d=t.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=pt(a):(a=Ke(n)?bn:Re.current,a=dr(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&Rc(t,o,r,a),rn=!1,h=t.memoizedState,o.state=h,Ds(t,r,o,i);var v=t.memoizedState;l!==d||h!==v||Ye.current||rn?(typeof g=="function"&&($l(t,n,g,r),v=t.memoizedState),(u=rn||Dc(t,n,u,r,h,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Hl(e,t,n,r,s,i)}function Hl(e,t,n,r,i,s){kh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Pc(t,n,!1),Xt(e,t,s);r=t.stateNode,yg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=pr(t,e.child,null,s),t.child=pr(t,null,l,s)):ze(e,t,l,s),t.memoizedState=r.state,i&&Pc(t,n,!0),t.child}function xh(e){var t=e.stateNode;t.pendingContext?Cc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cc(e,t.context,!1),Ja(e,t.containerInfo)}function Uc(e,t,n,r,i){return hr(),Ua(i),t.flags|=256,ze(e,t,n,r),t.child}var Wl={dehydrated:null,treeContext:null,retryLane:0};function Vl(e){return{baseLanes:e,cachePool:null,transitions:null}}function _h(e,t,n){var r=t.pendingProps,i=ae.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),te(ae,i&1),e===null)return Ll(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=co(o,r,0,null),e=Rn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Vl(n),t.memoizedState=Wl,e):nu(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return gg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=yn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=yn(l,s):(s=Rn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Vl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Wl,r}return s=e.child,e=s.sibling,r=yn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nu(e,t){return t=co({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vi(e,t,n,r){return r!==null&&Ua(r),pr(t,e.child,null,n),e=nu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Jo(Error(N(422))),Vi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=co({mode:"visible",children:r.children},i,0,null),s=Rn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&pr(t,e.child,null,o),t.child.memoizedState=Vl(o),t.memoizedState=Wl,s);if(!(t.mode&1))return Vi(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(N(419)),r=Jo(s,r,void 0),Vi(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ve||l){if(r=_e,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qt(e,i),Ct(r,e,i,-1))}return au(),r=Jo(Error(N(421))),Vi(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=jg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Ge=dn(i.nextSibling),tt=t,se=!0,xt=null,e!==null&&(ut[ct++]=Wt,ut[ct++]=Vt,ut[ct++]=Ln,Wt=e.id,Vt=e.overflow,Ln=t),t=nu(t,r.children),t.flags|=4096,t)}function Hc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),zl(e.return,t,n)}function Qo(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Eh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ze(e,t,r.children,n),r=ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hc(e,n,t);else if(e.tag===19)Hc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(te(ae,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Rs(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Rs(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qo(t,!0,n,null,s);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vg(e,t,n){switch(t.tag){case 3:xh(t),hr();break;case 5:qd(t);break;case 1:Ke(t.type)&&Ts(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;te(Is,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(te(ae,ae.current&1),t.flags|=128,null):n&t.child.childLanes?_h(e,t,n):(te(ae,ae.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);te(ae,ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Eh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(ae,ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Sh(e,t,n)}return Xt(e,t,n)}var Ch,Yl,Ph,Nh;Ch=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yl=function(){};Ph=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Mn(Dt.current);var s=null;switch(n){case"input":i=pl(e,i),r=pl(e,r),s=[];break;case"select":i=ce({},i,{value:void 0}),r=ce({},r,{value:void 0}),s=[];break;case"textarea":i=gl(e,i),r=gl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ns)}wl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ei.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ei.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&re("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Nh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ir(e,t){if(!se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ae(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wg(e,t,n){var r=t.pendingProps;switch(Ba(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(t),null;case 1:return Ke(t.type)&&Os(),Ae(t),null;case 3:return r=t.stateNode,mr(),ie(Ye),ie(Re),qa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xt!==null&&(ea(xt),xt=null))),Yl(e,t),Ae(t),null;case 5:Qa(t);var i=Mn(di.current);if(n=t.type,e!==null&&t.stateNode!=null)Ph(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(N(166));return Ae(t),null}if(e=Mn(Dt.current),Hi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[It]=t,r[ci]=s,e=(t.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<Fr.length;i++)re(Fr[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":Zu(r,s),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},re("invalid",r);break;case"textarea":ec(r,s),re("invalid",r)}wl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ui(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ui(r.textContent,l,e),i=["children",""+l]):ei.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&re("scroll",r)}switch(n){case"input":Di(r),Gu(r,s,!0);break;case"textarea":Di(r),tc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ns)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=td(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[It]=t,e[ci]=r,Ch(e,t,!1,!1),t.stateNode=e;e:{switch(o=Sl(n,r),n){case"dialog":re("cancel",e),re("close",e),i=r;break;case"iframe":case"object":case"embed":re("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fr.length;i++)re(Fr[i],e);i=r;break;case"source":re("error",e),i=r;break;case"img":case"image":case"link":re("error",e),re("load",e),i=r;break;case"details":re("toggle",e),i=r;break;case"input":Zu(e,r),i=pl(e,r),re("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ce({},r,{value:void 0}),re("invalid",e);break;case"textarea":ec(e,r),i=gl(e,r),re("invalid",e);break;default:i=r}wl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?id(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&nd(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ti(e,a):typeof a=="number"&&ti(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ei.hasOwnProperty(s)?a!=null&&s==="onScroll"&&re("scroll",e):a!=null&&Pa(e,s,a,o))}switch(n){case"input":Di(e),Gu(e,r,!1);break;case"textarea":Di(e),tc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ir(e,!!r.multiple,s,!1):r.defaultValue!=null&&ir(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ns)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ae(t),null;case 6:if(e&&t.stateNode!=null)Nh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=Mn(di.current),Mn(Dt.current),Hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[It]=t,(s=r.nodeValue!==n)&&(e=tt,e!==null))switch(e.tag){case 3:Ui(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ui(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[It]=t,t.stateNode=r}return Ae(t),null;case 13:if(ie(ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(se&&Ge!==null&&t.mode&1&&!(t.flags&128))Vd(),hr(),t.flags|=98560,s=!1;else if(s=Hi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(N(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(N(317));s[It]=t}else hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ae(t),s=!1}else xt!==null&&(ea(xt),xt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ae.current&1?Se===0&&(Se=3):au())),t.updateQueue!==null&&(t.flags|=4),Ae(t),null);case 4:return mr(),Yl(e,t),e===null&&ai(t.stateNode.containerInfo),Ae(t),null;case 10:return Va(t.type._context),Ae(t),null;case 17:return Ke(t.type)&&Os(),Ae(t),null;case 19:if(ie(ae),s=t.memoizedState,s===null)return Ae(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ir(s,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Rs(e),o!==null){for(t.flags|=128,Ir(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return te(ae,ae.current&1|2),t.child}e=e.sibling}s.tail!==null&&me()>gr&&(t.flags|=128,r=!0,Ir(s,!1),t.lanes=4194304)}else{if(!r)if(e=Rs(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ir(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!se)return Ae(t),null}else 2*me()-s.renderingStartTime>gr&&n!==1073741824&&(t.flags|=128,r=!0,Ir(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=me(),t.sibling=null,n=ae.current,te(ae,r?n&1|2:n&1),t):(Ae(t),null);case 22:case 23:return lu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ze&1073741824&&(Ae(t),t.subtreeFlags&6&&(t.flags|=8192)):Ae(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function Sg(e,t){switch(Ba(t),t.tag){case 1:return Ke(t.type)&&Os(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(),ie(Ye),ie(Re),qa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qa(t),null;case 13:if(ie(ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(ae),null;case 4:return mr(),null;case 10:return Va(t.type._context),null;case 22:case 23:return lu(),null;case 24:return null;default:return null}}var Yi=!1,De=!1,kg=typeof WeakSet=="function"?WeakSet:Set,M=null;function tr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(e,t,r)}else n.current=null}function Kl(e,t,n){try{n()}catch(r){de(e,t,r)}}var Wc=!1;function xg(e,t){if(jl=Es,e=Id(),$a(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===e)break t;if(h===n&&++u===i&&(l=o),h===s&&++c===r&&(a=o),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Al={focusedElem:e,selectionRange:n},Es=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,C=v.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?S:wt(t.type,S),C);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(k){de(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return v=Wc,Wc=!1,v}function qr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Kl(t,n,s)}i=i.next}while(i!==r)}}function ao(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Jl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Oh(e){var t=e.alternate;t!==null&&(e.alternate=null,Oh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[It],delete t[ci],delete t[Dl],delete t[ig],delete t[sg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Th(e){return e.tag===5||e.tag===3||e.tag===4}function Vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ql(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ns));else if(r!==4&&(e=e.child,e!==null))for(Ql(e,t,n),e=e.sibling;e!==null;)Ql(e,t,n),e=e.sibling}function ql(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ql(e,t,n),e=e.sibling;e!==null;)ql(e,t,n),e=e.sibling}var Pe=null,St=!1;function tn(e,t,n){for(n=n.child;n!==null;)jh(e,t,n),n=n.sibling}function jh(e,t,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(eo,n)}catch{}switch(n.tag){case 5:De||tr(n,t);case 6:var r=Pe,i=St;Pe=null,tn(e,t,n),Pe=r,St=i,Pe!==null&&(St?(e=Pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(St?(e=Pe,n=n.stateNode,e.nodeType===8?Uo(e.parentNode,n):e.nodeType===1&&Uo(e,n),si(e)):Uo(Pe,n.stateNode));break;case 4:r=Pe,i=St,Pe=n.stateNode.containerInfo,St=!0,tn(e,t,n),Pe=r,St=i;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Kl(n,t,o),i=i.next}while(i!==r)}tn(e,t,n);break;case 1:if(!De&&(tr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){de(n,t,l)}tn(e,t,n);break;case 21:tn(e,t,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,tn(e,t,n),De=r):tn(e,t,n);break;default:tn(e,t,n)}}function Yc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kg),t.forEach(function(r){var i=Ag.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,St=!1;break e;case 3:Pe=l.stateNode.containerInfo,St=!0;break e;case 4:Pe=l.stateNode.containerInfo,St=!0;break e}l=l.return}if(Pe===null)throw Error(N(160));jh(s,o,i),Pe=null,St=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){de(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ah(t,e),t=t.sibling}function Ah(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vt(t,e),Tt(e),r&4){try{qr(3,e,e.return),ao(3,e)}catch(S){de(e,e.return,S)}try{qr(5,e,e.return)}catch(S){de(e,e.return,S)}}break;case 1:vt(t,e),Tt(e),r&512&&n!==null&&tr(n,n.return);break;case 5:if(vt(t,e),Tt(e),r&512&&n!==null&&tr(n,n.return),e.flags&32){var i=e.stateNode;try{ti(i,"")}catch(S){de(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Gf(i,s),Sl(l,o);var u=Sl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?id(i,d):c==="dangerouslySetInnerHTML"?nd(i,d):c==="children"?ti(i,d):Pa(i,c,d,u)}switch(l){case"input":ml(i,s);break;case"textarea":ed(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ir(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?ir(i,!!s.multiple,s.defaultValue,!0):ir(i,!!s.multiple,s.multiple?[]:"",!1))}i[ci]=s}catch(S){de(e,e.return,S)}}break;case 6:if(vt(t,e),Tt(e),r&4){if(e.stateNode===null)throw Error(N(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(S){de(e,e.return,S)}}break;case 3:if(vt(t,e),Tt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{si(t.containerInfo)}catch(S){de(e,e.return,S)}break;case 4:vt(t,e),Tt(e);break;case 13:vt(t,e),Tt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(su=me())),r&4&&Yc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(De=(u=De)||c,vt(t,e),De=u):vt(t,e),Tt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(M=e,c=e.child;c!==null;){for(d=M=c;M!==null;){switch(h=M,g=h.child,h.tag){case 0:case 11:case 14:case 15:qr(4,h,h.return);break;case 1:tr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){de(r,n,S)}}break;case 5:tr(h,h.return);break;case 22:if(h.memoizedState!==null){Jc(d);continue}}g!==null?(g.return=h,M=g):Jc(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=rd("display",o))}catch(S){de(e,e.return,S)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){de(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vt(t,e),Tt(e),r&4&&Yc(e);break;case 21:break;default:vt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Th(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ti(i,""),r.flags&=-33);var s=Vc(e);ql(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vc(e);Ql(e,l,o);break;default:throw Error(N(161))}}catch(a){de(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _g(e,t,n){M=e,Ih(e)}function Ih(e,t,n){for(var r=(e.mode&1)!==0;M!==null;){var i=M,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yi;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||De;l=Yi;var u=De;if(Yi=o,(De=a)&&!u)for(M=i;M!==null;)o=M,a=o.child,o.tag===22&&o.memoizedState!==null?Qc(i):a!==null?(a.return=o,M=a):Qc(i);for(;s!==null;)M=s,Ih(s),s=s.sibling;M=i,Yi=l,De=u}Kc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,M=s):Kc(e)}}function Kc(e){for(;M!==null;){var t=M;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||ao(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!De)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:wt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Ac(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ac(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&si(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}De||t.flags&512&&Jl(t)}catch(h){de(t,t.return,h)}}if(t===e){M=null;break}if(n=t.sibling,n!==null){n.return=t.return,M=n;break}M=t.return}}function Jc(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var n=t.sibling;if(n!==null){n.return=t.return,M=n;break}M=t.return}}function Qc(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ao(4,t)}catch(a){de(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){de(t,i,a)}}var s=t.return;try{Jl(t)}catch(a){de(t,s,a)}break;case 5:var o=t.return;try{Jl(t)}catch(a){de(t,o,a)}}}catch(a){de(t,t.return,a)}if(t===e){M=null;break}var l=t.sibling;if(l!==null){l.return=t.return,M=l;break}M=t.return}}var Eg=Math.ceil,zs=Gt.ReactCurrentDispatcher,ru=Gt.ReactCurrentOwner,ht=Gt.ReactCurrentBatchConfig,V=0,_e=null,ge=null,Oe=0,Ze=0,nr=_n(0),Se=0,yi=null,$n=0,uo=0,iu=0,Xr=null,We=null,su=0,gr=1/0,Bt=null,$s=!1,Xl=null,pn=null,Ki=!1,an=null,Fs=0,Zr=0,Zl=null,fs=-1,ds=0;function Fe(){return V&6?me():fs!==-1?fs:fs=me()}function mn(e){return e.mode&1?V&2&&Oe!==0?Oe&-Oe:lg.transition!==null?(ds===0&&(ds=yd()),ds):(e=G,e!==0||(e=window.event,e=e===void 0?16:_d(e.type)),e):1}function Ct(e,t,n,r){if(50<Zr)throw Zr=0,Zl=null,Error(N(185));Ei(e,n,r),(!(V&2)||e!==_e)&&(e===_e&&(!(V&2)&&(uo|=n),Se===4&&on(e,Oe)),Je(e,r),n===1&&V===0&&!(t.mode&1)&&(gr=me()+500,so&&En()))}function Je(e,t){var n=e.callbackNode;ly(e,t);var r=_s(e,e===_e?Oe:0);if(r===0)n!==null&&ic(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ic(n),t===1)e.tag===0?og(qc.bind(null,e)):Ud(qc.bind(null,e)),ng(function(){!(V&6)&&En()}),n=null;else{switch(gd(r)){case 1:n=Aa;break;case 4:n=pd;break;case 16:n=xs;break;case 536870912:n=md;break;default:n=xs}n=Fh(n,Mh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Mh(e,t){if(fs=-1,ds=0,V&6)throw Error(N(327));var n=e.callbackNode;if(ur()&&e.callbackNode!==n)return null;var r=_s(e,e===_e?Oe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Bs(e,r);else{t=r;var i=V;V|=2;var s=Rh();(_e!==e||Oe!==t)&&(Bt=null,gr=me()+500,Dn(e,t));do try{Ng();break}catch(l){Dh(e,l)}while(!0);Wa(),zs.current=s,V=i,ge!==null?t=0:(_e=null,Oe=0,t=Se)}if(t!==0){if(t===2&&(i=Cl(e),i!==0&&(r=i,t=Gl(e,i))),t===1)throw n=yi,Dn(e,0),on(e,r),Je(e,me()),n;if(t===6)on(e,r);else{if(i=e.current.alternate,!(r&30)&&!Cg(i)&&(t=Bs(e,r),t===2&&(s=Cl(e),s!==0&&(r=s,t=Gl(e,s))),t===1))throw n=yi,Dn(e,0),on(e,r),Je(e,me()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(N(345));case 2:Tn(e,We,Bt);break;case 3:if(on(e,r),(r&130023424)===r&&(t=su+500-me(),10<t)){if(_s(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Fe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ml(Tn.bind(null,e,We,Bt),t);break}Tn(e,We,Bt);break;case 4:if(on(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Et(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eg(r/1960))-r,10<r){e.timeoutHandle=Ml(Tn.bind(null,e,We,Bt),r);break}Tn(e,We,Bt);break;case 5:Tn(e,We,Bt);break;default:throw Error(N(329))}}}return Je(e,me()),e.callbackNode===n?Mh.bind(null,e):null}function Gl(e,t){var n=Xr;return e.current.memoizedState.isDehydrated&&(Dn(e,t).flags|=256),e=Bs(e,t),e!==2&&(t=We,We=n,t!==null&&ea(t)),e}function ea(e){We===null?We=e:We.push.apply(We,e)}function Cg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~iu,t&=~uo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Et(t),r=1<<n;e[n]=-1,t&=~r}}function qc(e){if(V&6)throw Error(N(327));ur();var t=_s(e,0);if(!(t&1))return Je(e,me()),null;var n=Bs(e,t);if(e.tag!==0&&n===2){var r=Cl(e);r!==0&&(t=r,n=Gl(e,r))}if(n===1)throw n=yi,Dn(e,0),on(e,t),Je(e,me()),n;if(n===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,We,Bt),Je(e,me()),null}function ou(e,t){var n=V;V|=1;try{return e(t)}finally{V=n,V===0&&(gr=me()+500,so&&En())}}function Fn(e){an!==null&&an.tag===0&&!(V&6)&&ur();var t=V;V|=1;var n=ht.transition,r=G;try{if(ht.transition=null,G=1,e)return e()}finally{G=r,ht.transition=n,V=t,!(V&6)&&En()}}function lu(){Ze=nr.current,ie(nr)}function Dn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tg(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(Ba(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Os();break;case 3:mr(),ie(Ye),ie(Re),qa();break;case 5:Qa(r);break;case 4:mr();break;case 13:ie(ae);break;case 19:ie(ae);break;case 10:Va(r.type._context);break;case 22:case 23:lu()}n=n.return}if(_e=e,ge=e=yn(e.current,null),Oe=Ze=t,Se=0,yi=null,iu=uo=$n=0,We=Xr=null,In!==null){for(t=0;t<In.length;t++)if(n=In[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}In=null}return e}function Dh(e,t){do{var n=ge;try{if(Wa(),as.current=Ls,bs){for(var r=ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}bs=!1}if(zn=0,xe=we=ue=null,Qr=!1,hi=0,ru.current=null,n===null||n.return===null){Se=1,yi=t,ge=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=Oe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Lc(o);if(g!==null){g.flags&=-257,zc(g,o,l,s,t),g.mode&1&&bc(s,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var S=new Set;S.add(a),t.updateQueue=S}else v.add(a);break e}else{if(!(t&1)){bc(s,u,t),au();break e}a=Error(N(426))}}else if(se&&l.mode&1){var C=Lc(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),zc(C,o,l,s,t),Ua(yr(a,l));break e}}s=a=yr(a,l),Se!==4&&(Se=2),Xr===null?Xr=[s]:Xr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=gh(s,a,t);jc(s,m);break e;case 1:l=a;var f=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(pn===null||!pn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=vh(s,l,t);jc(s,k);break e}}s=s.return}while(s!==null)}Lh(n)}catch(P){t=P,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function Rh(){var e=zs.current;return zs.current=Ls,e===null?Ls:e}function au(){(Se===0||Se===3||Se===2)&&(Se=4),_e===null||!($n&268435455)&&!(uo&268435455)||on(_e,Oe)}function Bs(e,t){var n=V;V|=2;var r=Rh();(_e!==e||Oe!==t)&&(Bt=null,Dn(e,t));do try{Pg();break}catch(i){Dh(e,i)}while(!0);if(Wa(),V=n,zs.current=r,ge!==null)throw Error(N(261));return _e=null,Oe=0,Se}function Pg(){for(;ge!==null;)bh(ge)}function Ng(){for(;ge!==null&&!Zm();)bh(ge)}function bh(e){var t=$h(e.alternate,e,Ze);e.memoizedProps=e.pendingProps,t===null?Lh(e):ge=t,ru.current=null}function Lh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Sg(n,t),n!==null){n.flags&=32767,ge=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,ge=null;return}}else if(n=wg(n,t,Ze),n!==null){ge=n;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);Se===0&&(Se=5)}function Tn(e,t,n){var r=G,i=ht.transition;try{ht.transition=null,G=1,Og(e,t,n,r)}finally{ht.transition=i,G=r}return null}function Og(e,t,n,r){do ur();while(an!==null);if(V&6)throw Error(N(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ay(e,s),e===_e&&(ge=_e=null,Oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ki||(Ki=!0,Fh(xs,function(){return ur(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ht.transition,ht.transition=null;var o=G;G=1;var l=V;V|=4,ru.current=null,xg(e,n),Ah(n,e),Jy(Al),Es=!!jl,Al=jl=null,e.current=n,_g(n),Gm(),V=l,G=o,ht.transition=s}else e.current=n;if(Ki&&(Ki=!1,an=e,Fs=i),s=e.pendingLanes,s===0&&(pn=null),ny(n.stateNode),Je(e,me()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($s)throw $s=!1,e=Xl,Xl=null,e;return Fs&1&&e.tag!==0&&ur(),s=e.pendingLanes,s&1?e===Zl?Zr++:(Zr=0,Zl=e):Zr=0,En(),null}function ur(){if(an!==null){var e=gd(Fs),t=ht.transition,n=G;try{if(ht.transition=null,G=16>e?16:e,an===null)var r=!1;else{if(e=an,an=null,Fs=0,V&6)throw Error(N(331));var i=V;for(V|=4,M=e.current;M!==null;){var s=M,o=s.child;if(M.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(M=u;M!==null;){var c=M;switch(c.tag){case 0:case 11:case 15:qr(8,c,s)}var d=c.child;if(d!==null)d.return=c,M=d;else for(;M!==null;){c=M;var h=c.sibling,g=c.return;if(Oh(c),c===u){M=null;break}if(h!==null){h.return=g,M=h;break}M=g}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}M=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,M=o;else e:for(;M!==null;){if(s=M,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,M=m;break e}M=s.return}}var f=e.current;for(M=f;M!==null;){o=M;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,M=y;else e:for(o=f;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ao(9,l)}}catch(P){de(l,l.return,P)}if(l===o){M=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,M=k;break e}M=l.return}}if(V=i,En(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(eo,e)}catch{}r=!0}return r}finally{G=n,ht.transition=t}}return!1}function Xc(e,t,n){t=yr(n,t),t=gh(e,t,1),e=hn(e,t,1),t=Fe(),e!==null&&(Ei(e,1,t),Je(e,t))}function de(e,t,n){if(e.tag===3)Xc(e,e,n);else for(;t!==null;){if(t.tag===3){Xc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){e=yr(n,e),e=vh(t,e,1),t=hn(t,e,1),e=Fe(),t!==null&&(Ei(t,1,e),Je(t,e));break}}t=t.return}}function Tg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Fe(),e.pingedLanes|=e.suspendedLanes&n,_e===e&&(Oe&n)===n&&(Se===4||Se===3&&(Oe&130023424)===Oe&&500>me()-su?Dn(e,0):iu|=n),Je(e,t)}function zh(e,t){t===0&&(e.mode&1?(t=Li,Li<<=1,!(Li&130023424)&&(Li=4194304)):t=1);var n=Fe();e=qt(e,t),e!==null&&(Ei(e,t,n),Je(e,n))}function jg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zh(e,n)}function Ag(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(t),zh(e,n)}var $h;$h=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)Ve=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ve=!1,vg(e,t,n);Ve=!!(e.flags&131072)}else Ve=!1,se&&t.flags&1048576&&Hd(t,As,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cs(e,t),e=t.pendingProps;var i=dr(t,Re.current);ar(t,n),i=Za(null,t,r,e,i,n);var s=Ga();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ke(r)?(s=!0,Ts(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ka(t),i.updater=lo,t.stateNode=i,i._reactInternals=t,Fl(t,r,e,n),t=Hl(null,t,r,!0,s,n)):(t.tag=0,se&&s&&Fa(t),ze(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Mg(r),e=wt(r,e),i){case 0:t=Ul(null,t,r,e,n);break e;case 1:t=Bc(null,t,r,e,n);break e;case 11:t=$c(null,t,r,e,n);break e;case 14:t=Fc(null,t,r,wt(r.type,e),n);break e}throw Error(N(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),Ul(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),Bc(e,t,r,i,n);case 3:e:{if(xh(t),e===null)throw Error(N(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Qd(e,t),Ds(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=yr(Error(N(423)),t),t=Uc(e,t,r,n,i);break e}else if(r!==i){i=yr(Error(N(424)),t),t=Uc(e,t,r,n,i);break e}else for(Ge=dn(t.stateNode.containerInfo.firstChild),tt=t,se=!0,xt=null,n=Kd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===i){t=Xt(e,t,n);break e}ze(e,t,r,n)}t=t.child}return t;case 5:return qd(t),e===null&&Ll(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Il(r,i)?o=null:s!==null&&Il(r,s)&&(t.flags|=32),kh(e,t),ze(e,t,o,n),t.child;case 6:return e===null&&Ll(t),null;case 13:return _h(e,t,n);case 4:return Ja(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pr(t,null,r,n):ze(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),$c(e,t,r,i,n);case 7:return ze(e,t,t.pendingProps,n),t.child;case 8:return ze(e,t,t.pendingProps.children,n),t.child;case 12:return ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,te(Is,r._currentValue),r._currentValue=o,s!==null)if(Pt(s.value,o)){if(s.children===i.children&&!Ye.current){t=Xt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Yt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),zl(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(N(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zl(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ze(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ar(t,n),i=pt(i),r=r(i),t.flags|=1,ze(e,t,r,n),t.child;case 14:return r=t.type,i=wt(r,t.pendingProps),i=wt(r.type,i),Fc(e,t,r,i,n);case 15:return wh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wt(r,i),cs(e,t),t.tag=1,Ke(r)?(e=!0,Ts(t)):e=!1,ar(t,n),yh(t,r,i),Fl(t,r,i,n),Hl(null,t,r,!0,e,n);case 19:return Eh(e,t,n);case 22:return Sh(e,t,n)}throw Error(N(156,t.tag))};function Fh(e,t){return hd(e,t)}function Ig(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(e,t,n,r){return new Ig(e,t,n,r)}function uu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mg(e){if(typeof e=="function")return uu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oa)return 11;if(e===Ta)return 14}return 2}function yn(e,t){var n=e.alternate;return n===null?(n=dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function hs(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")uu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yn:return Rn(n.children,i,s,t);case Na:o=8,i|=8;break;case cl:return e=dt(12,n,t,i|2),e.elementType=cl,e.lanes=s,e;case fl:return e=dt(13,n,t,i),e.elementType=fl,e.lanes=s,e;case dl:return e=dt(19,n,t,i),e.elementType=dl,e.lanes=s,e;case qf:return co(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jf:o=10;break e;case Qf:o=9;break e;case Oa:o=11;break e;case Ta:o=14;break e;case nn:o=16,r=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=dt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Rn(e,t,n,r){return e=dt(7,e,r,t),e.lanes=n,e}function co(e,t,n,r){return e=dt(22,e,r,t),e.elementType=qf,e.lanes=n,e.stateNode={isHidden:!1},e}function qo(e,t,n){return e=dt(6,e,null,t),e.lanes=n,e}function Xo(e,t,n){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dg(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cu(e,t,n,r,i,s,o,l,a){return e=new Dg(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=dt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ka(s),e}function Rg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bh(e){if(!e)return wn;e=e._reactInternals;e:{if(Hn(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var n=e.type;if(Ke(n))return Bd(e,n,t)}return t}function Uh(e,t,n,r,i,s,o,l,a){return e=cu(n,r,!0,e,i,s,o,l,a),e.context=Bh(null),n=e.current,r=Fe(),i=mn(n),s=Yt(r,i),s.callback=t??null,hn(n,s,i),e.current.lanes=i,Ei(e,i,r),Je(e,r),e}function fo(e,t,n,r){var i=t.current,s=Fe(),o=mn(i);return n=Bh(n),t.context===null?t.context=n:t.pendingContext=n,t=Yt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hn(i,t,o),e!==null&&(Ct(e,i,o,s),ls(e,i,o)),o}function Us(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fu(e,t){Zc(e,t),(e=e.alternate)&&Zc(e,t)}function bg(){return null}var Hh=typeof reportError=="function"?reportError:function(e){console.error(e)};function du(e){this._internalRoot=e}ho.prototype.render=du.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));fo(e,t,null,null)};ho.prototype.unmount=du.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){fo(null,e,null,null)}),t[Qt]=null}};function ho(e){this._internalRoot=e}ho.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&xd(e)}};function hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gc(){}function Lg(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Us(o);s.call(u)}}var o=Uh(t,r,e,0,null,!1,!1,"",Gc);return e._reactRootContainer=o,e[Qt]=o.current,ai(e.nodeType===8?e.parentNode:e),Fn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Us(a);l.call(u)}}var a=cu(e,0,!1,null,null,!1,!1,"",Gc);return e._reactRootContainer=a,e[Qt]=a.current,ai(e.nodeType===8?e.parentNode:e),Fn(function(){fo(t,a,n,r)}),a}function mo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Us(o);l.call(a)}}fo(t,o,e,i)}else o=Lg(n,t,e,i,r);return Us(o)}vd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$r(t.pendingLanes);n!==0&&(Ia(t,n|1),Je(t,me()),!(V&6)&&(gr=me()+500,En()))}break;case 13:Fn(function(){var r=qt(e,1);if(r!==null){var i=Fe();Ct(r,e,1,i)}}),fu(e,1)}};Ma=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var n=Fe();Ct(t,e,134217728,n)}fu(e,134217728)}};wd=function(e){if(e.tag===13){var t=mn(e),n=qt(e,t);if(n!==null){var r=Fe();Ct(n,e,t,r)}fu(e,t)}};Sd=function(){return G};kd=function(e,t){var n=G;try{return G=e,t()}finally{G=n}};xl=function(e,t,n){switch(t){case"input":if(ml(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=io(r);if(!i)throw Error(N(90));Zf(r),ml(r,i)}}}break;case"textarea":ed(e,n);break;case"select":t=n.value,t!=null&&ir(e,!!n.multiple,t,!1)}};ld=ou;ad=Fn;var zg={usingClientEntryPoint:!1,Events:[Pi,qn,io,sd,od,ou]},Mr={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$g={bundleType:Mr.bundleType,version:Mr.version,rendererPackageName:Mr.rendererPackageName,rendererConfig:Mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fd(e),e===null?null:e.stateNode},findFiberByHostInstance:Mr.findFiberByHostInstance||bg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{eo=Ji.inject($g),Mt=Ji}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zg;st.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hu(t))throw Error(N(200));return Rg(e,t,null,n)};st.createRoot=function(e,t){if(!hu(e))throw Error(N(299));var n=!1,r="",i=Hh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=cu(e,1,!1,null,null,n,!1,r,i),e[Qt]=t.current,ai(e.nodeType===8?e.parentNode:e),new du(t)};st.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=fd(t),e=e===null?null:e.stateNode,e};st.flushSync=function(e){return Fn(e)};st.hydrate=function(e,t,n){if(!po(t))throw Error(N(200));return mo(null,e,t,!0,n)};st.hydrateRoot=function(e,t,n){if(!hu(e))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Hh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Uh(t,null,e,1,n??null,i,!1,s,o),e[Qt]=t.current,ai(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ho(t)};st.render=function(e,t,n){if(!po(t))throw Error(N(200));return mo(null,e,t,!1,n)};st.unmountComponentAtNode=function(e){if(!po(e))throw Error(N(40));return e._reactRootContainer?(Fn(function(){mo(null,null,e,!1,function(){e._reactRootContainer=null,e[Qt]=null})}),!0):!1};st.unstable_batchedUpdates=ou;st.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!po(n))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return mo(e,t,n,!1,r)};st.version="18.3.1-next-f1338f8080-20240426";function Wh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wh)}catch(e){console.error(e)}}Wh(),Wf.exports=st;var Fg=Wf.exports,Vh,ef=Fg;Vh=ef.createRoot,ef.hydrateRoot;let Bg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ug=(e=21)=>{let t="",n=e|0;for(;n--;)t+=Bg[Math.random()*64|0];return t};function _t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function vr(e){return!!e&&!!e[rt]}function Bn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===qg}(e)||Array.isArray(e)||!!e[uf]||!!(!((t=e.constructor)===null||t===void 0)&&t[uf])||pu(e)||mu(e))}function gi(e,t,n){n===void 0&&(n=!1),_r(e)===0?(n?Object.keys:Su)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function _r(e){var t=e[rt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:pu(e)?2:mu(e)?3:0}function ta(e,t){return _r(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Hg(e,t){return _r(e)===2?e.get(t):e[t]}function Yh(e,t,n){var r=_r(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Wg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function pu(e){return Jg&&e instanceof Map}function mu(e){return Qg&&e instanceof Set}function jn(e){return e.o||e.t}function yu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Xg(e);delete t[rt];for(var n=Su(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function gu(e,t){return t===void 0&&(t=!1),vu(e)||vr(e)||!Bn(e)||(_r(e)>1&&(e.set=e.add=e.clear=e.delete=Vg),Object.freeze(e),t&&gi(e,function(n,r){return gu(r,!0)},!0)),e}function Vg(){_t(2)}function vu(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Rt(e){var t=Zg[e];return t||_t(18,e),t}function tf(){return vi}function Zo(e,t){t&&(Rt("Patches"),e.u=[],e.s=[],e.v=t)}function Hs(e){na(e),e.p.forEach(Yg),e.p=null}function na(e){e===vi&&(vi=e.l)}function nf(e){return vi={p:[],l:vi,h:e,m:!0,_:0}}function Yg(e){var t=e[rt];t.i===0||t.i===1?t.j():t.g=!0}function Go(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Rt("ES5").S(t,e,r),r?(n[rt].P&&(Hs(t),_t(4)),Bn(e)&&(e=Ws(t,e),t.l||Vs(t,e)),t.u&&Rt("Patches").M(n[rt].t,e,t.u,t.s)):e=Ws(t,n,[]),Hs(t),t.u&&t.v(t.u,t.s),e!==Kh?e:void 0}function Ws(e,t,n){if(vu(t))return t;var r=t[rt];if(!r)return gi(t,function(l,a){return rf(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Vs(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=yu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),gi(s,function(l,a){return rf(e,r,i,l,a,n,o)}),Vs(e,i,!1),n&&e.u&&Rt("Patches").N(r,n,e.u,e.s)}return r.o}function rf(e,t,n,r,i,s,o){if(vr(i)){var l=Ws(e,i,s&&t&&t.i!==3&&!ta(t.R,r)?s.concat(r):void 0);if(Yh(n,r,l),!vr(l))return;e.m=!1}else o&&n.add(i);if(Bn(i)&&!vu(i)){if(!e.h.D&&e._<1)return;Ws(e,i),t&&t.A.l||Vs(e,i)}}function Vs(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&gu(t,n)}function el(e,t){var n=e[rt];return(n?jn(n):e)[t]}function sf(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ra(e){e.P||(e.P=!0,e.l&&ra(e.l))}function tl(e){e.o||(e.o=yu(e.t))}function ia(e,t,n){var r=pu(t)?Rt("MapSet").F(t,n):mu(t)?Rt("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:tf(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=sa;o&&(a=[l],u=Br);var c=Proxy.revocable(a,u),d=c.revoke,h=c.proxy;return l.k=h,l.j=d,h}(t,n):Rt("ES5").J(t,n);return(n?n.A:tf()).p.push(r),r}function Kg(e){return vr(e)||_t(22,e),function t(n){if(!Bn(n))return n;var r,i=n[rt],s=_r(n);if(i){if(!i.P&&(i.i<4||!Rt("ES5").K(i)))return i.t;i.I=!0,r=of(n,s),i.I=!1}else r=of(n,s);return gi(r,function(o,l){i&&Hg(i.t,o)===l||Yh(r,o,t(l))}),s===3?new Set(r):r}(e)}function of(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return yu(e)}var lf,vi,wu=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Jg=typeof Map<"u",Qg=typeof Set<"u",af=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Kh=wu?Symbol.for("immer-nothing"):((lf={})["immer-nothing"]=!0,lf),uf=wu?Symbol.for("immer-draftable"):"__$immer_draftable",rt=wu?Symbol.for("immer-state"):"__$immer_state",qg=""+Object.prototype.constructor,Su=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Xg=Object.getOwnPropertyDescriptors||function(e){var t={};return Su(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Zg={},sa={get:function(e,t){if(t===rt)return e;var n=jn(e);if(!ta(n,t))return function(i,s,o){var l,a=sf(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Bn(r)?r:r===el(e.t,t)?(tl(e),e.o[t]=ia(e.A.h,r,e)):r},has:function(e,t){return t in jn(e)},ownKeys:function(e){return Reflect.ownKeys(jn(e))},set:function(e,t,n){var r=sf(jn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=el(jn(e),t),s=i==null?void 0:i[rt];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Wg(n,i)&&(n!==void 0||ta(e.t,t)))return!0;tl(e),ra(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return el(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,tl(e),ra(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=jn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){_t(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){_t(12)}},Br={};gi(sa,function(e,t){Br[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Br.deleteProperty=function(e,t){return Br.set.call(this,e,t,void 0)},Br.set=function(e,t,n){return sa.set.call(this,e[0],t,n,e[0])};var Gg=function(){function e(n){var r=this;this.O=af,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(S){var C=this;S===void 0&&(S=l);for(var m=arguments.length,f=Array(m>1?m-1:0),y=1;y<m;y++)f[y-1]=arguments[y];return a.produce(S,function(k){var P;return(P=s).call.apply(P,[C,k].concat(f))})}}var u;if(typeof s!="function"&&_t(6),o!==void 0&&typeof o!="function"&&_t(7),Bn(i)){var c=nf(r),d=ia(r,i,void 0),h=!0;try{u=s(d),h=!1}finally{h?Hs(c):na(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(S){return Zo(c,o),Go(S,c)},function(S){throw Hs(c),S}):(Zo(c,o),Go(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Kh&&(u=void 0),r.D&&gu(u,!0),o){var g=[],v=[];Rt("Patches").M(i,u,g,v),o(g,v)}return u}_t(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(d))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Bn(n)||_t(8),vr(n)&&(n=Kg(n));var r=nf(this),i=ia(this,n,void 0);return i[rt].C=!0,na(r),i},t.finishDraft=function(n,r){var i=n&&n[rt],s=i.A;return Zo(s,r),Go(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!af&&_t(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Rt("Patches").$;return vr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),it=new Gg,ev=it.produce;it.produceWithPatches.bind(it);it.setAutoFreeze.bind(it);it.setUseProxies.bind(it);it.applyPatches.bind(it);it.createDraft.bind(it);it.finishDraft.bind(it);class tv{constructor(t){const n=nv();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function nv(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function cf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Jh(e,t){const n=new tv(e),r=n.next.bind(n);return t&&cf(t,n),r.state=()=>cf(n,{}),r}class ff{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=Jh(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const rv={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new ff(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=ff.seed()),{seed:t}},playerView:()=>{}};var iv=Function.prototype,sv=iv.toString;sv.call(Object);const wi="MAKE_MOVE",yo="GAME_EVENT",go="REDO",ku="RESET",xu="SYNC",vo="UNDO",_u="UPDATE",Eu="PATCH",Qh="PLUGIN",wo="STRIP_TRANSIENTS",qh=(e,t,n,r)=>({type:wi,payload:{type:e,args:t,playerID:n,credentials:r}}),Gr=(e,t,n,r)=>({type:yo,payload:{type:e,args:t,playerID:n,credentials:r}}),Xh=(e,t,n,r)=>({type:yo,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Zh=e=>({type:xu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),Gh=(e,t,n,r)=>({type:Eu,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),ep=(e,t)=>({type:_u,state:e,deltalog:t,clientOnly:!0}),tp=e=>({type:ku,state:e,clientOnly:!0}),np=(e,t)=>({type:vo,payload:{type:null,args:null,playerID:e,credentials:t}}),rp=(e,t)=>({type:go,payload:{type:null,args:null,playerID:e,credentials:t}}),ov=(e,t,n,r)=>({type:Qh,payload:{type:e,args:t,playerID:n,credentials:r}}),ip=()=>({type:wo});var lv=Object.freeze({__proto__:null,makeMove:qh,gameEvent:Gr,automaticGameEvent:Xh,sync:Zh,patch:Gh,update:ep,reset:tp,undo:np,redo:rp,plugin:ov,stripTransients:ip});const Sn="INVALID_MOVE",av={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=ev(t.G,s=>{const o=e({...t,G:s},...n);if(o===Sn){r=!0;return}return o});return r?Sn:i}};var Me;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Me||(Me={}));var Ut;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Ut||(Ut={}));class uv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,Ut.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,Ut.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Me.TURN_ON_END:case Me.PHASE_ON_END:return r(s.error,Ut.StageEventInOnEnd);case Me.PHASE_ON_BEGIN:return r(s.error,Ut.StageEventInPhaseBegin);case Me.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,Ut.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Me.TURN_ON_END||s.calledFrom===Me.PHASE_ON_END)return r(s.error,Ut.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Me.PHASE_ON_END)return r(s.error,Ut.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=Xh(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const Cu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new uv(e.flow,t,n).api()},cv={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},fv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},dv=(...e)=>console.error(...e);function q(e){dv("ERROR:",e)}const Pu=[av,rv,cv,fv],Oi=[...Pu,Cu],hv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),wr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),sp=(e,t,n)=>[...Pu,...n,Cu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),pv=(e,t)=>([...Oi,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),oa=(e,t)=>([...Oi,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),mv=(e,t)=>([...Pu,...t.game.plugins,Cu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),yv=(e,t)=>[...Oi,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),gv=(e,t)=>[...Oi,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,op=(e,t)=>{const n=mv(e,t),r=gv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return q(`${i} plugin declared action invalid:
${s}`),[e,r]},lp=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Oi,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function Ys(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Ks(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Js.NULL),n=a}else{if(Ys(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Qi(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Qi(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Qi(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Qi(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function vv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=Ks(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Qi(e,t,n,r,i){(typeof i!="object"||i===Js.NULL)&&(i={stage:i}),i.stage!==void 0&&(Ys(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function la(e,t){return e[t]+""}function wv(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...wr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((h,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&q(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const d=la(a,u);return r={...r,currentPlayer:d,playOrderPos:u,playOrder:a},r=Ks(r,t.activePlayers||{}),r}function Sv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&q(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=la(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:q(`invalid argument to endTurn: ${u}`)}});else{const c={...wr(e),G:s,ctx:o},d=i.next(c),h=typeof d;d!==void 0&&h!=="number"&&q(`invalid value returned by turn.order.next  expected number or undefined got ${h} ${d}.`),d===void 0?a=!0:(l=d,t=la(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const kv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Js={NULL:null};var Nu={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.Pointer=Kt.escapeToken=Kt.unescapeToken=void 0;function ap(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Kt.unescapeToken=ap;function up(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Kt.escapeToken=up;var xv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(ap);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(up).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Kt.Pointer=xv;var fe={},Ou={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(Ou);var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.diffAny=$e.diffObjects=$e.diffArrays=$e.intersection=$e.subtract=$e.isDestructive=void 0;var Si=Ou;function _v(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}$e.isDestructive=_v;function aa(e,t){var n={};for(var r in e)Si.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)Si.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}$e.subtract=aa;function cp(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)Si.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}$e.intersection=cp;function Ev(e){return e.op==="add"}function Cv(e){return e.op==="remove"}function nl(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function fp(e,t,n,r){r===void 0&&(r=So);var i={"0,0":{operations:[],cost:0}};function s(c,d){var h="".concat(c,",").concat(d),g=i[h];if(g===void 0){if(c>0&&d>0&&!r(e[c-1],t[d-1],n.add(String(c-1))).length)g=s(c-1,d-1);else{var v=[];if(c>0){var S=s(c-1,d),C={op:"remove",index:c-1};v.push(nl(S,C))}if(d>0){var m=s(c,d-1),f={op:"add",index:c-1,value:t[d-1]};v.push(nl(m,f))}if(c>0&&d>0){var y=s(c-1,d-1),k={op:"replace",index:c-1,original:e[c-1],value:t[d-1]};v.push(nl(y,k))}var P=v.sort(function(O,_){return O.cost-_.cost})[0];g=P}i[h]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,d){var h=c[0],g=c[1];if(Ev(d)){var v=d.index+1+g,S=v<o+g?String(v):"-",C={op:d.op,path:n.add(S).toString(),value:d.value};return[h.concat(C),g+1]}else if(Cv(d)){var C={op:d.op,path:n.add(String(d.index+g)).toString()};return[h.concat(C),g-1]}else{var m=n.add(String(d.index+g)),f=r(d.original,d.value,m);return[h.concat.apply(h,f),g]}},[[],0])[0];return u}$e.diffArrays=fp;function dp(e,t,n,r){r===void 0&&(r=So);var i=[];return aa(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),aa(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),cp([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}$e.diffObjects=dp;function So(e,t,n,r){if(r===void 0&&(r=So),e===t)return[];var i=(0,Si.objectType)(e),s=(0,Si.objectType)(t);return i=="array"&&s=="array"?fp(e,t,n,r):i=="object"&&s=="object"?dp(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}$e.diffAny=So;var Tu=Hr&&Hr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(fe,"__esModule",{value:!0});fe.apply=fe.InvalidOperationError=fe.test=fe.copy=fe.move=fe.replace=fe.remove=fe.add=fe.TestError=fe.MissingError=void 0;var Zt=Kt,ju=Ou,Pv=$e,bt=function(e){Tu(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);fe.MissingError=bt;var hp=function(e){Tu(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);fe.TestError=hp;function Au(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function pp(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function mp(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new bt(t.path):(Au(n.parent,n.key,(0,ju.clone)(t.value)),null)}fe.add=mp;function yp(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new bt(t.path):(pp(n.parent,n.key),null)}fe.remove=yp;function gp(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new bt(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new bt(t.path)}else if(n.value===void 0)return new bt(t.path);return n.parent[n.key]=(0,ju.clone)(t.value),null}fe.replace=gp;function vp(e,t){var n=Zt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new bt(t.from);var r=Zt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new bt(t.path):(pp(n.parent,n.key),Au(r.parent,r.key,n.value),null)}fe.move=vp;function wp(e,t){var n=Zt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new bt(t.from);var r=Zt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new bt(t.path):(Au(r.parent,r.key,(0,ju.clone)(n.value)),null)}fe.copy=wp;function Sp(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);return(0,Pv.diffAny)(n.value,t.value,new Zt.Pointer).length?new hp(n.value,t.value):null}fe.test=Sp;var kp=function(e){Tu(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);fe.InvalidOperationError=kp;function Nv(e,t){switch(t.op){case"add":return mp(e,t);case"remove":return yp(e,t);case"replace":return gp(e,t);case"move":return vp(e,t);case"copy":return wp(e,t);case"test":return Sp(e,t)}return new kp(t)}fe.apply=Nv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Kt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=fe,r=$e;function i(u,c){return c.map(function(d){return(0,n.apply)(u,d)})}e.applyPatch=i;function s(u){function c(d,h,g){var v=u(d,h,g);return Array.isArray(v)?v:(0,r.diffAny)(d,h,g,c)}return c}function o(u,c,d){var h=new t.Pointer;return(d?s(d):r.diffAny)(u,c,h)}e.createPatch=o;function l(u,c){var d=t.Pointer.fromJSON(c).evaluate(u);if(d!==void 0)return{op:"test",path:c,value:d.value}}function a(u,c){var d=new Array;return c.filter(r.isDestructive).forEach(function(h){var g=l(u,h.path);if(g&&d.push(g),"from"in h){var v=l(u,h.from);v&&d.push(v)}}),d}e.createTests=a})(Nu);function Ov({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:w})=>w),i||(i={});const l={...t};""in l&&q("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(w=>u.add(w));const d=(w,x)=>{const E=sp(w,x,o);return B=>{const z=wr(B);return E({...z,G:B.G,ctx:B.ctx,playerID:B.playerID})}},h=w=>x=>{const E=wr(x);return w({...E,G:x.G,ctx:x.ctx})},g={onEnd:d(r,Me.GAME_ON_END),endIf:h(n)};for(const w in l){const x=l[w];if(x.start===!0&&(c=w),x.moves!==void 0)for(const E of Object.keys(x.moves))a[w+"."+E]=x.moves[E],u.add(E);x.endIf===void 0&&(x.endIf=()=>{}),x.onBegin===void 0&&(x.onBegin=({G:E})=>E),x.onEnd===void 0&&(x.onEnd=({G:E})=>E),x.turn===void 0&&(x.turn=i),x.turn.order===void 0&&(x.turn.order=kv.DEFAULT),x.turn.onBegin===void 0&&(x.turn.onBegin=({G:E})=>E),x.turn.onEnd===void 0&&(x.turn.onEnd=({G:E})=>E),x.turn.endIf===void 0&&(x.turn.endIf=()=>!1),x.turn.onMove===void 0&&(x.turn.onMove=({G:E})=>E),x.turn.stages===void 0&&(x.turn.stages={}),Ys(x.turn,!0);for(const E in x.turn.stages){const z=x.turn.stages[E].moves||{};for(const L of Object.keys(z)){const ne=w+"."+E+"."+L;a[ne]=z[L],u.add(L)}}if(x.wrapped={onBegin:d(x.onBegin,Me.PHASE_ON_BEGIN),onEnd:d(x.onEnd,Me.PHASE_ON_END),endIf:h(x.endIf)},x.turn.wrapped={onMove:d(x.turn.onMove,Me.TURN_ON_MOVE),onBegin:d(x.turn.onBegin,Me.TURN_ON_BEGIN),onEnd:d(x.turn.onEnd,Me.TURN_ON_END),endIf:h(x.turn.endIf)},typeof x.next!="function"){const{next:E}=x;x.next=()=>E||null}x.wrapped.next=h(x.next)}function v(w){return w.phase?l[w.phase]:l[""]}function S(w){return w}function C(w,x){const E=new Set,B=new Set;for(let z=0;z<x.length;z++){const{fn:L,arg:ne,...ee}=x[z];if(L===Y){B.clear();const D=w.ctx.phase;if(E.has(D)){const Z={...w.ctx,phase:null};return{...w,ctx:Z}}E.add(D)}const be=[];if(w=L(w,{...ee,arg:ne,next:be}),L===b)break;const le=T(w);if(le){x.push({fn:b,arg:le,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}const A=U(w);if(A){x.push({fn:Y,arg:A,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}if([S,O,_].includes(L)){const D=I(w);if(D){x.push({fn:J,arg:D,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}}x.push(...be)}return w}function m(w,{next:x}){return x.push({fn:f}),w}function f(w,{next:x}){let{G:E,ctx:B}=w;return E=v(B).wrapped.onBegin(w),x.push({fn:y}),{...w,G:E,ctx:B}}function y(w,{currentPlayer:x}){let{ctx:E}=w;const B=v(E);x?(E={...E,currentPlayer:x},B.turn.activePlayers&&(E=Ks(E,B.turn.activePlayers))):E=wv(w,B.turn);const z=E.turn+1;E={...E,turn:z,numMoves:0,_prevActivePlayers:[]};const L=B.turn.wrapped.onBegin({...w,ctx:E});return{...w,G:L,ctx:E,_undo:[],_redo:[]}}function k(w,{arg:x,next:E,phase:B}){const z=v({phase:B});let{ctx:L}=w;if(x&&x.next)if(x.next in l)L={...L,phase:x.next};else return q("invalid phase: "+x.next),w;else L={...L,phase:z.wrapped.next(w)||null};return w={...w,ctx:L},E.push({fn:f}),w}function P(w,{arg:x,currentPlayer:E,next:B}){let{G:z,ctx:L}=w;const ne=v(L),{endPhase:ee,ctx:be}=Sv(w,E,ne.turn,x);return L=be,w={...w,G:z,ctx:L},ee?B.push({fn:Y,turn:L.turn,phase:L.phase}):B.push({fn:y,currentPlayer:L.currentPlayer}),w}function O(w,{arg:x,playerID:E}){if((typeof x=="string"||x===Js.NULL)&&(x={stage:x}),typeof x!="object")return w;Ys(x);let{ctx:B}=w,{activePlayers:z,_activePlayersMinMoves:L,_activePlayersMaxMoves:ne,_activePlayersNumMoves:ee}=B;return x.stage!==void 0&&(z===null&&(z={}),z[E]=x.stage,ee[E]=0,x.minMoves&&(L===null&&(L={}),L[E]=x.minMoves),x.maxMoves&&(ne===null&&(ne={}),ne[E]=x.maxMoves)),B={...B,activePlayers:z,_activePlayersMinMoves:L,_activePlayersMaxMoves:ne,_activePlayersNumMoves:ee},{...w,ctx:B}}function _(w,{arg:x}){return{...w,ctx:Ks(w.ctx,x)}}function T(w){return g.endIf(w)}function U(w){return v(w.ctx).wrapped.endIf(w)}function I(w){const x=v(w.ctx),E=w.ctx.numMoves||0;return x.turn.maxMoves&&E>=x.turn.maxMoves?!0:x.turn.wrapped.endIf(w)}function b(w,{arg:x,phase:E}){w=Y(w,{}),x===void 0&&(x=!0),w={...w,ctx:{...w.ctx,gameover:x}};const B=g.onEnd(w);return{...w,G:B}}function Y(w,{arg:x,next:E,turn:B,automatic:z}){w=J(w,{turn:B,force:!0,automatic:!0});const{phase:L,turn:ne}=w.ctx;if(E&&E.push({fn:k,arg:x,phase:L}),L===null)return w;const be=v(w.ctx).wrapped.onEnd(w),le={...w.ctx,phase:null},A=Gr("endPhase",x),{_stateID:D}=w,Z={action:A,_stateID:D,turn:ne,phase:L};z&&(Z.automatic=!0);const Ee=[...w.deltalog||[],Z];return{...w,G:be,ctx:le,deltalog:Ee}}function J(w,{arg:x,next:E,turn:B,force:z,automatic:L,playerID:ne}){if(B!==w.ctx.turn)return w;const{currentPlayer:ee,numMoves:be,phase:le,turn:A}=w.ctx,D=v(w.ctx),Z=be||0;if(!z&&D.turn.minMoves&&Z<D.turn.minMoves)return`${D.turn.minMoves}`,w;const Ee=D.turn.wrapped.onEnd(w);E&&E.push({fn:P,arg:x,currentPlayer:ee});let Ce={...w.ctx,activePlayers:null};if(x&&x.remove){ne=ne||ee;const Ot=Ce.playOrder.filter(Ai=>Ai!=ne),ji=Ce.playOrderPos>Ot.length-1?0:Ce.playOrderPos;if(Ce={...Ce,playOrder:Ot,playOrderPos:ji},Ot.length===0)return E.push({fn:Y,turn:A,phase:le}),w}const qe=Gr("endTurn",x),{_stateID:lt}=w,ke={action:qe,_stateID:lt,turn:A,phase:le};L&&(ke.automatic=!0);const Nt=[...w.deltalog||[],ke];return{...w,G:Ee,ctx:Ce,deltalog:Nt,_undo:[],_redo:[]}}function X(w,{arg:x,next:E,automatic:B,playerID:z}){z=z||w.ctx.currentPlayer;let{ctx:L,_stateID:ne}=w,{activePlayers:ee,_activePlayersNumMoves:be,_activePlayersMinMoves:le,_activePlayersMaxMoves:A,phase:D,turn:Z}=L;const Ee=ee!==null&&z in ee,Ce=v(L);if(!x&&Ee){const Ot=Ce.turn.stages[ee[z]];Ot&&Ot.next&&(x=Ot.next)}if(E&&E.push({fn:O,arg:x,playerID:z}),!Ee)return w;const qe=be[z]||0;if(le&&le[z]&&qe<le[z])return`${le[z]}`,w;ee={...ee},delete ee[z],le&&(le={...le},delete le[z]),A&&(A={...A},delete A[z]),L=vv({...L,activePlayers:ee,_activePlayersMinMoves:le,_activePlayersMaxMoves:A});const ke={action:Gr("endStage",x),_stateID:ne,turn:Z,phase:D};B&&(ke.automatic=!0);const Nt=[...w.deltalog||[],ke];return{...w,ctx:L,deltalog:Nt}}function he(w,x,E){const B=v(w),z=B.turn.stages,{activePlayers:L}=w;if(L&&L[E]!==void 0&&L[E]!==Js.NULL&&z[L[E]]!==void 0&&z[L[E]].moves!==void 0){const ee=z[L[E]].moves;if(x in ee)return ee[x]}else if(B.moves){if(x in B.moves)return B.moves[x]}else if(x in e)return e[x];return null}function pe(w,x){const{playerID:E,type:B}=x,{currentPlayer:z,activePlayers:L,_activePlayersMaxMoves:ne}=w.ctx,ee=he(w.ctx,B,E),be=!ee||typeof ee=="function"||ee.noLimit!==!0;let{numMoves:le,_activePlayersNumMoves:A}=w.ctx;be&&(E===z&&le++,L&&A[E]++),w={...w,ctx:{...w.ctx,numMoves:le,_activePlayersNumMoves:A}},ne&&A[E]>=ne[E]&&(w=X(w,{playerID:E,automatic:!0}));const Z=v(w.ctx).turn.wrapped.onMove({...w,playerID:E});return w={...w,G:Z},C(w,[{fn:S}])}function oe(w,x,E){return C(w,[{fn:X,arg:E,playerID:x}])}function j(w,x){return C(w,[{fn:X,playerID:x}])}function F(w,x,E){return C(w,[{fn:_,arg:E}])}function $(w,x,E){return C(w,[{fn:Y,phase:w.ctx.phase,turn:w.ctx.turn,arg:{next:E}}])}function Q(w){return C(w,[{fn:Y,phase:w.ctx.phase,turn:w.ctx.turn}])}function K(w,x,E){return C(w,[{fn:J,turn:w.ctx.turn,phase:w.ctx.phase,arg:E}])}function $t(w,x,E){return C(w,[{fn:J,turn:w.ctx.turn,phase:w.ctx.phase,force:!0,arg:E}])}function yt(w,x,E){return C(w,[{fn:b,turn:w.ctx.turn,phase:w.ctx.phase,arg:E}])}const gt={endStage:j,setStage:oe,endTurn:K,pass:$t,endPhase:Q,setPhase:$,endGame:yt,setActivePlayers:F},ye=[];s.endTurn!==!1&&ye.push("endTurn"),s.pass!==!1&&ye.push("pass"),s.endPhase!==!1&&ye.push("endPhase"),s.setPhase!==!1&&ye.push("setPhase"),s.endGame!==!1&&ye.push("endGame"),s.setActivePlayers!==!1&&ye.push("setActivePlayers"),s.endStage!==!1&&ye.push("endStage"),s.setStage!==!1&&ye.push("setStage");function Ft(w,x){const{type:E,playerID:B,args:z}=x.payload;return typeof gt[E]!="function"?w:gt[E](w,B,...Array.isArray(z)?z:[z])}function Ti(w,x,E){return x.activePlayers?E in x.activePlayers:x.currentPlayer===E}return{ctx:w=>({numPlayers:w,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:w})].map((x,E)=>E+""),playOrderPos:0,phase:c,activePlayers:null}),init:w=>C(w,[{fn:m}]),isPlayerActive:Ti,eventHandlers:gt,eventNames:Object.keys(gt),enabledEventNames:ye,moveMap:a,moveNames:[...u.values()],processMove:pe,processEvent:Ft,getMove:he}}function Tv(e){return e.processMove!==void 0}function ko(e){if(Tv(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Ov(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(xp(i)&&(i=i.move),i instanceof Function){const s=sp(i,Me.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...wr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return q(`invalid move object: ${r.type}`),n.G}}}function xp(e){return e instanceof Object&&e.move!==void 0}var ua;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(ua||(ua={}));var Ie;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(Ie||(Ie={}));const qi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,jv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function df(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function rl(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function il(e,t,n){const[r,i]=op(e,n);return i?[r,Le(t,Ie.PluginActionInvalid,i)]:[r]}function _p(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function Le(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const Ep=e=>t=>n=>{const r=t(n);switch(n.type){case wo:return r;default:{const[,i]=_p(e.getState());return typeof i<"u"?(e.dispatch(ip()),{...r,transients:i}):r}}};function Iu({game:e,isClient:t}){return e=ko(e),(n=null,r)=>{let[i]=_p(n);switch(r.type){case wo:return i;case yo:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return q("cannot call event after game end"),Le(i,Ie.GameOver);if(qi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return q(`disallowed event: ${r.payload.type}`),Le(i,Ie.InactivePlayer);i=oa(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=il(s,i,{game:e}),o||(s=df(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case wi:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return q(`disallowed move: ${r.payload.type}`),Le(i,Ie.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return q("cannot make move after game end"),Le(i,Ie.GameOver);if(qi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return q(`disallowed move: ${r.payload.type}`),Le(i,Ie.InactivePlayer);i=oa(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===Sn)return q(`invalid move: ${r.payload.type} args: ${r.payload.args}`),Le(i,Ie.InvalidMove);const a={...i,G:l};if(t&&yv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=il(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=rl(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=il(i,s,{game:e}),u||(i=df(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case ku:case _u:case xu:return r.state;case vo:{if(i={...i,deltalog:[]},e.disableUndo)return q("Undo is not enabled"),Le(i,Ie.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return q("No moves to undo"),Le(i,Ie.ActionInvalid);const c=l[l.length-1],d=l[l.length-2];if(qi(r)&&r.payload.playerID!==c.playerID)return q("Cannot undo other players' moves"),Le(i,Ie.ActionInvalid);if(c.moveType){const h=e.flow.getMove(d.ctx,c.moveType,c.playerID);if(!jv(s,o,h))return q("Move cannot be undone"),Le(i,Ie.ActionInvalid)}return i=rl(i,r),{...i,G:d.G,ctx:d.ctx,plugins:d.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case go:{if(i={...i,deltalog:[]},e.disableUndo)return q("Redo is not enabled"),Le(i,Ie.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return q("No moves to redo"),Le(i,Ie.ActionInvalid);const a=o[0];return qi(r)&&r.payload.playerID!==a.playerID?(q("Cannot redo other players' moves"),Le(i,Ie.ActionInvalid)):(i=rl(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case Qh:return hv(i,r,{game:e});case Eu:{const s=i,o=JSON.parse(JSON.stringify(s)),l=Nu.applyPatch(o,r.patch);return l.some(u=>u!==null)?(q(`Patch ${JSON.stringify(r.patch)} apply failed`),Le(s,ua.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(f){typeof f!="function"&&(f=new Function(""+f));for(var y=new Array(arguments.length-1),k=0;k<y.length;k++)y[k]=arguments[k+1];var P={callback:f,args:y};return r[n]=P,o(n),n++}function a(f){delete r[f]}function u(f){var y=f.callback,k=f.args;switch(k.length){case 0:y();break;case 1:y(k[0]);break;case 2:y(k[0],k[1]);break;case 3:y(k[0],k[1],k[2]);break;default:y.apply(t,k);break}}function c(f){if(i)setTimeout(c,0,f);else{var y=r[f];if(y){i=!0;try{u(y)}finally{a(f),i=!1}}}}function d(){o=function(f){process.nextTick(function(){c(f)})}}function h(){if(e.postMessage&&!e.importScripts){var f=!0,y=e.onmessage;return e.onmessage=function(){f=!1},e.postMessage("","*"),e.onmessage=y,f}}function g(){var f="setImmediate$"+Math.random()+"$",y=function(k){k.source===e&&typeof k.data=="string"&&k.data.indexOf(f)===0&&c(+k.data.slice(f.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(k){e.postMessage(f+k,"*")}}function v(){var f=new MessageChannel;f.port1.onmessage=function(y){var k=y.data;c(k)},o=function(y){f.port2.postMessage(y)}}function S(){var f=s.documentElement;o=function(y){var k=s.createElement("script");k.onreadystatechange=function(){c(y),k.onreadystatechange=null,f.removeChild(k),k=null},f.appendChild(k)}}function C(){o=function(f){setTimeout(c,0,f)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?d():h()?g():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?S():C(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?Hr:self);class Av{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return qh(s.move,s.args,r);if("event"in s)return Gr(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=Jh(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Iv=25;class ps extends Av{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Iu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((h,g)=>{const v=a[g];return v.checker(i,s)?h+v.weight:h},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Iv&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),d=this.playout(c);this.backpropagate(c,d),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function ki(e){"@babel/helpers - typeof";return ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ki(e)}function Mv(e,t){if(ki(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ki(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dv(e){var t=Mv(e,"string");return ki(t)=="symbol"?t:t+""}function Rv(e,t,n){return(t=Dv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hf(Object(n),!0).forEach(function(r){Rv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xe(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var mf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),yf=function(){return Math.random().toString(36).substring(7).split("").join(".")},gf={INIT:"@@redux/INIT"+yf(),REPLACE:"@@redux/REPLACE"+yf()};function bv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Mu(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Xe(1));return n(Mu)(e,t)}if(typeof e!="function")throw new Error(Xe(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(Xe(3));return s}function d(S){if(typeof S!="function")throw new Error(Xe(4));if(a)throw new Error(Xe(5));var C=!0;return u(),l.push(S),function(){if(C){if(a)throw new Error(Xe(6));C=!1,u();var f=l.indexOf(S);l.splice(f,1),o=null}}}function h(S){if(!bv(S))throw new Error(Xe(7));if(typeof S.type>"u")throw new Error(Xe(8));if(a)throw new Error(Xe(9));try{a=!0,s=i(s,S)}finally{a=!1}for(var C=o=l,m=0;m<C.length;m++){var f=C[m];f()}return S}function g(S){if(typeof S!="function")throw new Error(Xe(10));i=S,h({type:gf.REPLACE})}function v(){var S,C=d;return S={subscribe:function(f){if(typeof f!="object"||f===null)throw new Error(Xe(11));function y(){f.next&&f.next(c())}y();var k=C(y);return{unsubscribe:k}}},S[mf]=function(){return this},S}return h({type:gf.INIT}),r={dispatch:h,subscribe:d,getState:c,replaceReducer:g},r[mf]=v,r}function Cp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Pp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Xe(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=Cp.apply(void 0,l)(i.dispatch),pf(pf({},i),{},{dispatch:s})}}}function Np({game:e,numPlayers:t,setupData:n}){e=ko(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=pv(i,{game:e}),i=oa(i,{game:e,playerID:void 0});const s=wr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=op(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Du=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Lv extends Du{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const zv=e=>new Lv(e);class $v{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Fv=new $v;function ca(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Ru(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=lv[e](l,a,ca(r,n,s),i);n.dispatch(u)};return o}const Bv=Ru.bind(null,"makeMove"),Uv=Ru.bind(null,"gameEvent"),Hv=Ru.bind(null,"plugin");class Wv{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=ko(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=Fv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Iu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=Np({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(tp(this.initialState))},this.undo=()=>{const g=np(ca(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=rp(ca(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const h=Pp(Ep,()=>g=>v=>{const S=g(v);return this.notifySubscribers(),S},g=>v=>S=>{const C=g.getState(),m=v(S);return!("clientOnly"in S)&&S.type!==wo&&this.transport.sendAction(C,S),m},g=>v=>S=>{const C=v(S),m=g.getState();switch(S.type){case wi:case yo:case vo:case go:{const f=m.deltalog;this.log=[...this.log,...f];break}case ku:{this.log=[];break}case Eu:case _u:{let f=-1;this.log.length>0&&(f=this.log[this.log.length-1]._stateID);let y=S.deltalog||[];y=y.filter(k=>k._stateID>f),this.log=[...this.log,...y];break}case xu:{this.initialState=S.initialState,this.log=S.log||[];break}}return C});a=a!==void 0?Cp(h,a):h,this.store=Mu(this.reducer,this.initialState,a),i||(i=zv),this.transport=i({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:Ug(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=Zh(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=ep(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=Gh(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:lp(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Bv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Uv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Hv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function Vv(e){return new Wv(e)}const Op=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},Pn=e=>Op(e,"game name"),Dr=e=>Op(e,"match ID"),Rr=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class Yv extends Error{constructor(t,n){super(t),this.details=n}}class Kv{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new Yv(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){Pn(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return Pn(t),Dr(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return Pn(t),Rr(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return Pn(t),Dr(n),Rr(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){Pn(t),Dr(n),Rr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){Pn(t),Dr(n),Rr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return Pn(t),Dr(n),Rr(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var Tp={exports:{}},Jv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qv=Jv,qv=Qv;function jp(){}function Ap(){}Ap.resetWarningCache=jp;var Xv=function(){function e(r,i,s,o,l,a){if(a!==qv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ap,resetWarningCache:jp};return n.PropTypes=n,n};Tp.exports=Xv();var Zv=Tp.exports;const At=If(Zv);var en={},bu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */bu.parse=n0;bu.serialize=r0;var Gv=decodeURIComponent,e0=encodeURIComponent,t0=/; */,Xi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function n0(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(t0),s=r.decode||Gv,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=i0(c,s))}}return n}function r0(e,t,n){var r=n||{},i=r.encode||e0;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Xi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Xi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Xi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Xi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function i0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var vf=Object.getOwnPropertySymbols,s0=Object.prototype.hasOwnProperty,o0=Object.prototype.propertyIsEnumerable;function l0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function a0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var u0=a0()?Object.assign:function(e,t){for(var n,r=l0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)s0.call(n,o)&&(r[o]=n[o]);if(vf){i=vf(n);for(var l=0;l<i.length;l++)o0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},c0={};Object.defineProperty(en,"__esModule",{value:!0});var f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};en.load=Rp;en.loadAll=bp;en.select=Lp;en.save=zp;en.remove=$p;en.setRawCookie=Lu;en.plugToRequest=Fp;var d0=bu,Er=Mp(d0),h0=u0,Ip=Mp(h0);function Mp(e){return e&&e.__esModule?e:{default:e}}var xo=typeof document>"u"||typeof process<"u"&&c0&&!1,et={},kn=void 0;function Dp(){return kn&&!kn.headersSent}function Rp(e,t){var n=xo?et:Er.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function bp(e){var t=xo?et:Er.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Lp(e){var t=xo?et:Er.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,Ip.default)({},n,i)},{}):t:{}}function zp(e,t,n){et[e]=t,(typeof t>"u"?"undefined":f0(t))==="object"&&(et[e]=JSON.stringify(t)),xo||(document.cookie=Er.default.serialize(e,et[e],n)),Dp()&&kn.cookie&&kn.cookie(e,t,n)}function $p(e,t){delete et[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Ip.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=Er.default.serialize(e,"",t)),Dp()&&kn.clearCookie&&kn.clearCookie(e,t)}function Lu(e){e?et=Er.default.parse(e):et={}}function Fp(e,t){return e.cookie?et=e.cookie:e.cookies?et=e.cookies:e.headers&&e.headers.cookie?Lu(e.headers.cookie):et={},kn=t,function(){kn=null,et={}}}var wf=en.default={setRawCookie:Lu,load:Rp,loadAll:bp,select:Lp,save:zp,remove:$p,plugToRequest:Fp},Qs;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Qs||(Qs={}));function Nn(e){return e.type()===Qs.SYNC}class p0{type(){return Qs.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const m0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},y0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=m0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=Np({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},Sf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),g0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class v0{constructor(t,n,r,i){this.game=ko(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(Nn(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=g0(t),l=r;let a;if(Nn(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return q(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){q(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Iu({game:this.game}),c=Pp(Ep),d=Mu(u,a,c);if(o.type==vo||o.type==go){const m=a.ctx.activePlayers!==null,f=a.ctx.currentPlayer===i;if(!m&&!f||m&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){q(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){q(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const h=o.type==wi?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==wi&&!h){q(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(h&&xp(h)&&h.ignoreStaleStateID)){q(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const g=d.getState();d.dispatch(o),a=d.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...S}=a;let C;if(s&&(s.gameover===void 0||s.gameover===null)&&(C={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(C.gameover=a.ctx.gameover)),Nn(this.storageAPI))this.storageAPI.setState(l,S,v),C&&this.storageAPI.setMetadata(l,C);else{const m=[this.storageAPI.setState(l,S,v)];C&&m.push(this.storageAPI.setMetadata(l,C)),await Promise.all(m)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=Nn(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:d}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:d}))return{error:"unauthorized"};if(a===void 0){const v=y0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,d=v.metadata,this.subscribeCallback({state:a,matchID:t}),Nn(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:d}):await this.storageAPI.createMatch(s,{initialState:u,metadata:d})}const h=d?Sf(d):void 0,g={state:a,log:c,filteredMetadata:h,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(Nn(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return q(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return q(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=Sf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),Nn(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const Zi=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:lp(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),w0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=sl(o.deltalog,t),a=Zi(e,t,o),u=o._stateID,c=Zi(e,t,s),d=Nu.createPatch(c,a);return{type:"patch",args:[r,i,u,d,l]}}case"update":{const[r,i]=n.args,s=sl(i.deltalog,t),o=Zi(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=Zi(e,t,i.state),o=sl(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function sl(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const zt=Object.create(null);zt.open="0";zt.close="1";zt.ping="2";zt.pong="3";zt.message="4";zt.upgrade="5";zt.noop="6";const ms=Object.create(null);Object.keys(zt).forEach(e=>{ms[zt[e]]=e});const fa={type:"error",data:"parser error"},Bp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Up=typeof ArrayBuffer=="function",Hp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,zu=({type:e,data:t},n,r)=>Bp&&t instanceof Blob?n?r(t):kf(t,r):Up&&(t instanceof ArrayBuffer||Hp(t))?n?r(t):kf(new Blob([t]),r):r(zt[e]+(t||"")),kf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function xf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ol;function S0(e,t){if(Bp&&e.data instanceof Blob)return e.data.arrayBuffer().then(xf).then(t);if(Up&&(e.data instanceof ArrayBuffer||Hp(e.data)))return t(xf(e.data));zu(e,!1,n=>{ol||(ol=new TextEncoder),t(ol.encode(n))})}const _f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ur=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<_f.length;e++)Ur[_f.charCodeAt(e)]=e;const k0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Ur[e.charCodeAt(r)],o=Ur[e.charCodeAt(r+1)],l=Ur[e.charCodeAt(r+2)],a=Ur[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},x0=typeof ArrayBuffer=="function",$u=(e,t)=>{if(typeof e!="string")return{type:"message",data:Wp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:_0(e.substring(1),t)}:ms[n]?e.length>1?{type:ms[n],data:e.substring(1)}:{type:ms[n]}:fa},_0=(e,t)=>{if(x0){const n=k0(e);return Wp(n,t)}else return{base64:!0,data:e}},Wp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Vp="",E0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{zu(s,!1,l=>{r[o]=l,++i===n&&t(r.join(Vp))})})},C0=(e,t)=>{const n=e.split(Vp),r=[];for(let i=0;i<n.length;i++){const s=$u(n[i],t);if(r.push(s),s.type==="error")break}return r};function P0(){return new TransformStream({transform(e,t){S0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let ll;function Gi(e){return e.reduce((t,n)=>t+n.length,0)}function es(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function N0(e,t){ll||(ll=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Gi(n)<1)break;const a=es(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Gi(n)<2)break;const a=es(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Gi(n)<8)break;const a=es(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(fa);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Gi(n)<i)break;const a=es(n,i);l.enqueue($u(s?a:ll.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(fa);break}}}})}const Yp=4;function ve(e){if(e)return O0(e)}function O0(e){for(var t in ve.prototype)e[t]=ve.prototype[t];return e}ve.prototype.on=ve.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ve.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ve.prototype.off=ve.prototype.removeListener=ve.prototype.removeAllListeners=ve.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ve.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ve.prototype.emitReserved=ve.prototype.emit;ve.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ve.prototype.hasListeners=function(e){return!!this.listeners(e).length};const _o=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ft=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),T0="arraybuffer";function Kp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const j0=ft.setTimeout,A0=ft.clearTimeout;function Eo(e,t){t.useNativeTimers?(e.setTimeoutFn=j0.bind(ft),e.clearTimeoutFn=A0.bind(ft)):(e.setTimeoutFn=ft.setTimeout.bind(ft),e.clearTimeoutFn=ft.clearTimeout.bind(ft))}const I0=1.33;function M0(e){return typeof e=="string"?D0(e):Math.ceil((e.byteLength||e.size)*I0)}function D0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Jp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function R0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function b0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class L0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Fu extends ve{constructor(t){super(),this.writable=!1,Eo(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new L0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=$u(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=R0(t);return n.length?"?"+n:""}}class z0 extends Fu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};C0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,E0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Jp()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Qp=!1;try{Qp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const $0=Qp;function F0(){}class B0 extends z0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Lt extends ve{constructor(t,n,r){super(),this.createRequest=t,Eo(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Kp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Lt.requestsCount++,Lt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=F0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Lt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Lt.requestsCount=0;Lt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ef);else if(typeof addEventListener=="function"){const e="onpagehide"in ft?"pagehide":"unload";addEventListener(e,Ef,!1)}}function Ef(){for(let e in Lt.requests)Lt.requests.hasOwnProperty(e)&&Lt.requests[e].abort()}const U0=function(){const e=qp({xdomain:!1});return e&&e.responseType!==null}();class H0 extends B0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=U0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Lt(qp,this.uri(),t)}}function qp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||$0))return new XMLHttpRequest}catch{}if(!t)try{return new ft[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Xp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class W0 extends Fu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Xp?{}:Kp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;zu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&_o(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Jp()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const al=ft.WebSocket||ft.MozWebSocket;class V0 extends W0{createSocket(t,n,r){return Xp?new al(t,n,r):n?new al(t,n):new al(t)}doWrite(t,n){this.ws.send(n)}}class Y0 extends Fu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=N0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=P0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&_o(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const K0={websocket:V0,webtransport:Y0,polling:H0},J0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Q0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function da(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=J0.exec(e||""),s={},o=14;for(;o--;)s[Q0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=q0(s,s.path),s.queryKey=X0(s,s.query),s}function q0(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function X0(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const ha=typeof addEventListener=="function"&&typeof removeEventListener=="function",ys=[];ha&&addEventListener("offline",()=>{ys.forEach(e=>e())},!1);class gn extends ve{constructor(t,n){if(super(),this.binaryType=T0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=da(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=da(n.host).host);Eo(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=b0(this.opts.query)),ha&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ys.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Yp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&gn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",gn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=M0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,_o(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(gn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ha&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ys.indexOf(this._offlineEventListener);r!==-1&&ys.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}gn.protocol=Yp;class Z0 extends gn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;gn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;gn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=d=>{const h=new Error("probe error: "+d);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function a(){o("socket closed")}function u(d){n&&d.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let G0=class extends Z0{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>K0[i]).filter(i=>!!i)),super(t,r)}};function ew(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=da(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const tw=typeof ArrayBuffer=="function",nw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Zp=Object.prototype.toString,rw=typeof Blob=="function"||typeof Blob<"u"&&Zp.call(Blob)==="[object BlobConstructor]",iw=typeof File=="function"||typeof File<"u"&&Zp.call(File)==="[object FileConstructor]";function Bu(e){return tw&&(e instanceof ArrayBuffer||nw(e))||rw&&e instanceof Blob||iw&&e instanceof File}function gs(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(gs(e[n]))return!0;return!1}if(Bu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return gs(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&gs(e[n]))return!0;return!1}function sw(e){const t=[],n=e.data,r=e;return r.data=pa(n,t),r.attachments=t.length,{packet:r,buffers:t}}function pa(e,t){if(!e)return e;if(Bu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=pa(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=pa(e[r],t));return n}return e}function ow(e,t){return e.data=ma(e.data,t),delete e.attachments,e}function ma(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ma(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ma(e[n],t));return e}const Gp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],lw=5;var H;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(H||(H={}));class aw{constructor(t){this.replacer=t}encode(t){return(t.type===H.EVENT||t.type===H.ACK)&&gs(t)?this.encodeAsBinary({type:t.type===H.EVENT?H.BINARY_EVENT:H.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===H.BINARY_EVENT||t.type===H.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=sw(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Uu extends ve{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===H.BINARY_EVENT;r||n.type===H.BINARY_ACK?(n.type=r?H.EVENT:H.ACK,this.reconstructor=new uw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Bu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(H[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===H.BINARY_EVENT||r.type===H.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Uu.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case H.CONNECT:return qs(n);case H.DISCONNECT:return n===void 0;case H.CONNECT_ERROR:return typeof n=="string"||qs(n);case H.EVENT:case H.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Gp.indexOf(n[0])===-1);case H.ACK:case H.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class uw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=ow(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function cw(e){return typeof e=="string"}const fw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function dw(e){return e===void 0||fw(e)}function qs(e){return Object.prototype.toString.call(e)==="[object Object]"}function hw(e,t){switch(e){case H.CONNECT:return t===void 0||qs(t);case H.DISCONNECT:return t===void 0;case H.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Gp.indexOf(t[0])===-1);case H.ACK:return Array.isArray(t);case H.CONNECT_ERROR:return typeof t=="string"||qs(t);default:return!1}}function pw(e){return cw(e.nsp)&&dw(e.id)&&hw(e.type,e.data)}const mw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Uu,Encoder:aw,get PacketType(){return H},isPacketValid:pw,protocol:lw},Symbol.toStringTag,{value:"Module"}));function kt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const yw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class em extends ve{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[kt(t,"open",this.onopen.bind(this)),kt(t,"packet",this.onpacket.bind(this)),kt(t,"error",this.onerror.bind(this)),kt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(yw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:H.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,d=n.pop();this._registerAckCallback(c,d),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:H.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case H.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case H.EVENT:case H.BINARY_EVENT:this.onevent(t);break;case H.ACK:case H.BINARY_ACK:this.onack(t);break;case H.DISCONNECT:this.ondisconnect();break;case H.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:H.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:H.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Cr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Cr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Cr.prototype.reset=function(){this.attempts=0};Cr.prototype.setMin=function(e){this.ms=e};Cr.prototype.setMax=function(e){this.max=e};Cr.prototype.setJitter=function(e){this.jitter=e};class ya extends ve{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Eo(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Cr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||mw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new G0(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=kt(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=kt(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(kt(t,"ping",this.onping.bind(this)),kt(t,"data",this.ondata.bind(this)),kt(t,"error",this.onerror.bind(this)),kt(t,"close",this.onclose.bind(this)),kt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){_o(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new em(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const br={};function vs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=ew(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=br[i]&&s in br[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new ya(r,t):(br[i]||(br[i]=new ya(r,t)),a=br[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(vs,{Manager:ya,Socket:em,io:vs,connect:vs});class tm extends p0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class gw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class vw extends tm{constructor(t="bgio"){super();const n=r=>new gw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function ww(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class Sw extends v0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const d in n){const h=n[d];o[d]=new h({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:d,...h})=>{const g=s[d];g!==void 0&&g(a(d,h))},a=w0(t),u={send:l,sendAll:d=>{for(const h in s)l({playerID:h,...d})}},c=i?new vw(r):new tm;super(t,c,u),this.connect=(d,h)=>{s[d]=h},this.subscribe(({state:d,matchID:h})=>{if(!n)return;const g=ww(d,o);g!==null&&setTimeout(async()=>{const v=await o[g].play(d,g);await this.onUpdate(v.action,d._stateID,h,v.action.payload.playerID)},100)})}}class kw extends Du{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const Cf=new Map;function nm({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=Cf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new Sw({game:s,bots:e,persist:t,storageKey:n}),Cf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new kw({master:o,...r})}}const Pf=vs;class xw extends Du{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=Pf(t+this.gameName,this.socketOpts)}else this.socket=Pf("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function Nf({server:e,socketOpts:t}={}){return n=>new xw({server:e,socketOpts:t,...n})}function rm(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>R.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends R.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=Vv({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return R.createElement(l);let d=null;return i&&(d=R.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),R.createElement("div",{className:"bgio-client"},d)}},t.propTypes={matchID:At.string,playerID:At.string,credentials:At.string,debug:At.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class _w{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Kv({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function Ew(e){return new _w(e)}class im extends R.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return R.createElement("div",null,R.createElement("p",{className:"phase-title"},"Choose a player name:"),R.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),R.createElement("span",{className:"buttons"},R.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),R.createElement("br",null),R.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,R.createElement("br",null)))}}im.defaultProps={playerName:""};class Cw extends R.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>R.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>R.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>R.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>R.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?R.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),R.createElement("tr",{key:"line-"+t.matchID},R.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),R.createElement("td",{key:"cell-status-"+t.matchID},n),R.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),R.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Pw extends R.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>R.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>R.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return R.createElement("div",null,R.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),R.createElement("span",null,"Players:"),R.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),R.createElement("span",{className:"buttons"},R.createElement("button",{onClick:this.onClickCreate},"Create")))}}var He;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(He||(He={}));class sm extends R.Component{constructor(t){super(t),this.state={phase:He.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=Ew({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:He.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:He.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?Nf({server:this.props.gameServer}):Nf()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=ps;s=nm({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:He.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:He.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return R.createElement(Cw,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=wf.load("lobbyState")||{};t.phase&&t.phase===He.PLAY&&(t.phase=He.LIST),t.phase&&t.phase!==He.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||He.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};wf.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):R.createElement("div",{id:"lobby-view",style:{padding:50}},R.createElement("div",{className:this._getPhaseVisibility(He.ENTER)},R.createElement(im,{key:i,playerName:i,onEnter:this._enterLobby})),R.createElement("div",{className:this._getPhaseVisibility(He.LIST)},R.createElement("p",null,"Welcome, ",i),R.createElement("div",{className:"phase-title",id:"match-creation"},R.createElement("span",null,"Create a match:"),R.createElement(Pw,{games:t,createMatch:this._createMatch})),R.createElement("p",{className:"phase-title"},"Join a match:"),R.createElement("div",{id:"instances"},R.createElement("table",null,R.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),R.createElement("span",{className:"error-msg"},r,R.createElement("br",null))),R.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),R.createElement("div",{className:this._getPhaseVisibility(He.PLAY)},o&&R.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),R.createElement("div",{className:"buttons",id:"match-exit"},R.createElement("button",{onClick:this._exitMatch},"Exit match"))),R.createElement("div",{className:"buttons",id:"lobby-exit"},R.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}sm.propTypes={gameComponents:At.array.isRequired,lobbyServer:At.string,gameServer:At.string,debug:At.bool,clientFactory:At.func,refreshInterval:At.number};sm.defaultProps={debug:!1,clientFactory:rm,refreshInterval:2e3};const Qe=["Hearts","Diamonds","Clubs","Spades"],rr=40,om=5,Nw=["","","","","",""],Ow={Hearts:"",Diamonds:"",Clubs:"",Spades:""},Tw={Hearts:"Wheat",Diamonds:"Beets",Clubs:"Potatoes",Spades:"Sunflowers"},lm={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function jw(e,t){const n={};if(e.deckType===36)for(const r of Qe)n[r]=[{suit:r,value:1}];else for(const r of Qe){const i=Array.from({length:om},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function am(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of Qe){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),d=t[o]||[];r[o]=[...d,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function ts(e,t){return t.deckType!==36||e<2||e>5}function um(e,t,n,r,i){const s=[];for(const a of Qe)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])ts(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])ts(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])ts(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>ts(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function cm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function Aw(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function Iw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function Mw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Dw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function ga(e){return e.players.every(t=>t.hand.length===1)}function fm(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=rr&&!e.claimedJobs.includes(r)&&Rw(e,r,n)}function Rw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);e.revealedJobs[t]=null,n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function bw(e){if(!Dw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function va(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=rr||(t.miceVariant?Lw(e,n,r,t):t.deckType===36?zw(e,n,r,t):$w(e,n,r,t))}function Hu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Xs(e,`${r.suit}-${r.value}`),!0;return!1}function Wu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function Vu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Xs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function xi(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Lw(e,t,n,r){if(Hu(e,n,r))return;const i=Wu(n,e.trump,r),s=Vu(n,e.trump,r),o=dm(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),Zs(e,o[0]),s&&o.length>1&&(Zs(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${xi(o[1][1])}`)))}function zw(e,t,n,r){if(Hu(e,n,r))return;const i=Wu(n,e.trump,r),s=Vu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=dm(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(d=>d.suit===t);for(const d of c)l.some(([g,v])=>g===u&&v.suit===d.suit&&v.value===d.value)||l.push([u,d])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((d,h)=>h.value-d.value),Zs(e,[u,c[0]]),s&&c.length>1&&(Zs(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${xi(c[1])}`)))}function $w(e,t,n,r){if(Hu(e,n,r))return;const i=Wu(n,e.trump,r),s=Vu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(h=>h.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(h=>h.suit!==t);const u=(o.plot.revealed||[]).filter(h=>h.suit===t).sort((h,g)=>g.value-h.value);if(u.length===0)continue;const c=u[0],d=o.plot.revealed.findIndex(h=>h.suit===c.suit&&h.value===c.value);if(o.plot.revealed.splice(d,1),Xs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${xi(c)}`),s&&u.length>1){const h=u[1],g=o.plot.revealed.findIndex(v=>v.suit===h.suit&&v.value===h.value);o.plot.revealed.splice(g,1),Xs(e,`${h.suit}-${h.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${xi(h)}`)}}}function dm(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const d of c.revealed||[])d.suit===t&&a.push({card:d,stack:c,location:"revealed"});for(const d of c.hidden||[])d.suit===t&&a.push({card:d,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const d=o.plot.hidden.findIndex(h=>h.suit===c.suit&&h.value===c.value);o.plot.hidden.splice(d,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:d,location:h}of a){const g=h==="hidden"?d.hidden:d.revealed,v=g.findIndex(S=>S.suit===c.suit&&S.value===c.value);v!==-1&&(g.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((h,g)=>g.value>h.value?g:h);if(l.some(h=>h.suit===c.suit&&h.value===c.value)){const h=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(h,1),o.plot.revealed.push(c),s.push([o,c])}else{const h=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(h){const{stack:g,location:v}=h,S=v==="hidden"?g.hidden:g.revealed,C=S.findIndex(m=>m.suit===c.suit&&m.value===c.value);C!==-1&&(S.splice(C,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function Zs(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Xs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${xi(n)}`)}function Fw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function Bw(e,t){const n=Fw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function Uw(e,t){const n=Bw(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function wa(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of Qe)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>om)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of Qe)e.workHours[o]=0;const{jobs:r,isFamine:i}=am(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of Qe)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.trumpSelector=(e.trumpSelector+1)%e.numPlayers,e.workersDeck=um(e.players,e.jobBuckets,e.exiled,t,n),cm(e.players,e.workersDeck,e.isFamine),!1}function hm(e,t){const n=Qe.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function Of(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function pm(e,t,n){var d,h,g;const r=e.workHours[t]||0;if((d=e.claimedJobs)==null?void 0:d.includes(t))return-10;const s=Math.max(0,40-r),o=s<20?(20-s)*2:0,l=e.players[n],c=[...((h=l.plot)==null?void 0:h.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(v=>v.suit===t).length*15;return o+c}function Hw(e,t,n){var d,h,g,v,S;const r=e.players[t],i=r.hand[n];let s=0;const o=e.currentTrick.length===0,l=(h=(d=e.currentTrick[0])==null?void 0:d[1])==null?void 0:h.suit,a=e.currentTrick.map(([,C])=>C),u=Ww(e,i,a),c=Vw(e,t);if(o){const C=pm(e,i.suit,t);s+=C*.3,i.value>=8&&i.value<=11&&(s+=5),i.suit===e.trump&&e.trickCount<2&&(s-=10)}else if(c>0&&u>.5?s+=c*u*20:c<0&&u<.5&&(s+=Math.abs(c)*(1-u)*15),i.suit!==l){const m=[...((g=r.plot)==null?void 0:g.revealed)||[],...((v=r.plot)==null?void 0:v.hidden)||[]].filter(f=>f.suit===i.suit).length;(S=e.claimedJobs)!=null&&S.includes(i.suit)||(s+=m*3)}return s+=Math.random()*2,s}function Ww(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let i=n[0];for(const s of n)(s.suit===e.trump&&i.suit!==e.trump||s.suit===i.suit&&s.value>i.value)&&(i=s);return t.suit===e.trump&&i.suit!==e.trump?.8:t.suit===i.suit&&t.value>i.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function Vw(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,s])=>s.suit))];for(const s of r){const o=pm(e,s,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function Yw(e,t,n){var d,h;let r=0;const i=e.players[n],s=i.hand||[],o=s.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=s.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((d=i.plot)==null?void 0:d.revealed)||[],...((h=i.plot)==null?void 0:h.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function Kw(e,t,n){var s,o,l,a,u,c,d;const r=[],i=e.players[n];if(t.phase==="planning"&&!e.trump)for(const h of Qe){const g=Yw(e,h,n);r.push({move:"setTrump",args:[h],score:g})}else if(t.phase==="trick")for(let h=0;h<i.hand.length;h++){const g=i.hand[h],v=(o=(s=e.currentTrick[0])==null?void 0:s[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&i.hand.some(m=>m.suit===v)&&g.suit!==v)continue;const S=Hw(e,n,h);r.push({move:"playCard",args:[h],score:S})}else if(t.phase==="assignment"&&n===e.lastWinner){const h=[...new Set(e.lastTrick.map(([,_])=>_.suit))],g=e.players[n],v=[...((l=g.plot)==null?void 0:l.revealed)||[],...((a=g.plot)==null?void 0:a.hidden)||[]],S=e.lastTrick.reduce((_,[,T])=>{var U;return _+Of(T,e.trump,(U=e.variants)==null?void 0:U.nomenclature)},0);let C=h[0],m=-1/0;for(const _ of h){const T=e.workHours[_]||0;if((u=e.claimedJobs)==null?void 0:u.includes(_)){m<0&&(m=0,C=_);continue}const I=T+S;let b=0;I>=40?(b+=200,b-=(I-40)*2):(b+=I,I>=30?b+=30:I>=20&&(b+=15));const Y=v.filter(J=>J.suit===_).length;b+=Y*20,b>m&&(m=b,C=_)}let f=0;const y={};for(const[,_]of e.lastTrick){const T=Of(_,e.trump,(c=e.variants)==null?void 0:c.nomenclature);let U=_.suit,I=-1/0;for(const b of h){const Y=e.workHours[b]||0,J=(d=e.claimedJobs)==null?void 0:d.includes(b);let X=0;if(J)X=0;else{const he=Y+T;he>=40?X+=150:(X+=he*.5,he>=30&&(X+=15));const pe=v.filter(oe=>oe.suit===b).length;X+=pe*10}X>I&&(I=X,U=b)}y[`${_.suit}-${_.value}`]=U,f+=I}const k=e.pendingAssignments||{};let P;if(m>=f){P={};for(const[,_]of e.lastTrick)P[`${_.suit}-${_.value}`]=C}else P=y;let O=!1;for(const[_,T]of Object.entries(P))k[_]!==T&&(O=!0,r.push({move:"assignCard",args:[_,T],score:100}));O||r.push({move:"submitAssignments",args:[],score:100})}else t.phase;return r.sort((h,g)=>g.score-h.score),r}function Tf(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function Jw({ctx:e,random:t},n){const r={...lm,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...Nw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Tf(0,!0,""));else{const d=Math.floor(t.Number()*s.length),h=s.splice(d,1)[0];o.push(Tf(c,!1,h))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:jw(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1,trumpSelector:Math.floor(t.Number()*i)};for(const c of Qe)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=am(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=um(l.players,l.jobBuckets,l.exiled,r,t),cm(l.players,l.workersDeck,l.isFamine),l}function Qw({G:e,random:t},n){n&&Qe.includes(n)?e.trump=n:hm(e,t)}function qw({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!Aw(e,i,r))return Sn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function Xw({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function Zw({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return Sn;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return Sn;if(fm(e,e.pendingAssignments,e.variants),e.pendingAssignments={},ga(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),va(e,e.variants),wa(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function Gw({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return Sn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return Sn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function e1({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const t1={name:"kolkhoz",setup:Jw,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:Qw},turn:{order:{first:({G:e})=>e.trumpSelector,next:()=>{}}},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"trumpSelector:",e.trumpSelector,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&hm(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:qw},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=Iw(e);if(n!==null){Mw(e,n);const r=bw(e.lastTrick);if(r?(fm(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&ga(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),va(e,e.variants),wa(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=ga(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:Xw,submitAssignments:Zw},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),va(e,e.variants),wa(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:Gw,confirmSwap:e1},turn:{order:{first:()=>0,next:()=>{}}},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return Uw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),i=Kw(e,t,r);return i.slice(0,Math.min(3,i.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function cr(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function n1(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function at({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,d=s?"assets/cards/back.svg":cr(e);return t!==0||n!==0?p.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[p.jsx("image",{href:d,width:r,height:c,x:-r/2,y:-c/2}),l&&p.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#d4a857",strokeWidth:"3",rx:"8"})]}):p.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:p.jsx("img",{src:d,alt:s?"Card back":`${n1(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function r1({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s}){if(!e||e.length===0)return p.jsx("div",{className:"hand empty",children:"No cards in hand"});const o=Math.min(8,60/e.length),a=-(o*(e.length-1))/2;return p.jsx("div",{className:"hand",children:e.map((u,c)=>{const d=!s||s.includes(c),h=a+c*o,g=Math.abs(h)*.5;return p.jsx("div",{className:`hand-card ${d&&n?"playable":""} ${d?"":"invalid"}`,style:{transform:`rotate(${h}deg) translateY(${g}px)`,zIndex:c},onClick:()=>{n&&d&&t(c)},children:p.jsx(at,{card:u,width:100,highlight:d&&n,dimmed:!d&&n})},`${u.suit}-${u.value}-${c}`)})})}function i1({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450,scale:s=1,year:o,trump:l,phase:a,isMyTurn:u,currentPlayerName:c,showInfo:d=!1}){const h={Hearts:"",Diamonds:"",Clubs:"",Spades:""},g=800*s,v=280*s,S=110*s,C=S*1.4,m=160*s,f=I=>{const Y=[3,0,1,2][I];return{x:-1.5*m+Y*m,y:0}},y=6*s,k=10*s,P=6*s,O=i-v/2+32*s,_=18*s,T=r-g/2+15*s,U=r+g/2-15*s;return p.jsxs("g",{className:"trick-area",children:[p.jsx("rect",{x:r-g/2,y:i-v/2,width:g,height:v,fill:"#1a1a1a",stroke:"#d4a857",strokeWidth:3*s,rx:k}),p.jsx("rect",{x:r-g/2+y,y:i-v/2+y,width:g-y*2,height:v-y*2,fill:"none",stroke:"#8b0000",strokeWidth:2*s,rx:P}),p.jsxs("g",{className:"trick-info-bar",children:[d?p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:T,y:O,textAnchor:"start",fill:"#d4a857",fontSize:_,fontFamily:"'Oswald', sans-serif",children:[p.jsxs("title",{children:["Year ",o," of 5"]})," ",o,"/5"]}),p.jsxs("text",{x:T+75*s,y:O,textAnchor:"start",fill:"#888",fontSize:_,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Trump suit"}),":"]}),p.jsx("text",{x:T+130*s,y:O,textAnchor:"start",fill:l==="Hearts"||l==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:l?h[l]:"?"})]}):null,e.length>0&&p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:r-25*s,y:O,textAnchor:"end",fill:"#888",fontSize:_,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Lead suit"}),":"]}),p.jsx("text",{x:r-20*s,y:O,textAnchor:"start",fill:e[0][1].suit==="Hearts"||e[0][1].suit==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:14*s,children:h[e[0][1].suit]})]}),d&&p.jsxs("text",{x:U,y:O,textAnchor:"end",fill:u?"#4CAF50":"#e8dcc4",fontSize:_,fontWeight:u?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:u?"Your turn":`${c}'s turn`}),u?" ":c]})]}),Array.from({length:t}).map((I,b)=>{if(e.some(([X])=>X===b))return null;const J=f(b);return p.jsx("rect",{x:r+J.x-S/2,y:i+J.y-C/2,width:S,height:C,fill:"none",stroke:"rgba(255,255,255,0.15)",strokeWidth:1*s,strokeDasharray:`${4*s},${4*s}`,rx:4*s},`slot-${b}`)}),e.map(([I,b],Y)=>{const J=f(I);return p.jsx(at,{card:b,x:r+J.x,y:i+J.y,width:S},`${b.suit}-${b.value}`)})]})}function s1({revealedJobs:e,workHours:t,jobBuckets:n,claimedJobs:r,trump:i,phase:s,pendingAssignments:o,onAssign:l,lastTrick:a}){const S=f=>f==="Hearts"||f==="Diamonds"?"#c41e3a":"#e8dcc4",C=f=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[f],m=f=>({11:{russian:"",english:"Jack (Drunkard)",power:"Worth 0 work hours. Gets exiled instead of player cards"},12:{russian:"",english:"Queen (Informant)",power:"All players become vulnerable to requisition"},13:{russian:"",english:"King (Party Official)",power:"Exiles two cards instead of one"}})[f]||null;return p.jsx("g",{className:"job-piles-area",children:Qe.map((f,y)=>{const k=20+y*130,P=(t==null?void 0:t[f])||0,O=r==null?void 0:r.includes(f),_=f===i,T=(n==null?void 0:n[f])||[],U=e==null?void 0:e[f],I=Array.isArray(U)?U:U?[U]:[],b=60,Y=170,J=Y+98+30;return p.jsxs("g",{className:`job-pile ${O?"claimed":""}`,children:[p.jsx("rect",{x:k-65,y:b,width:130,height:100,fill:_?"rgba(255,215,0,0.12)":"rgba(0,0,0,0.5)",stroke:_?"#FFD700":"#444",strokeWidth:_?2:1,rx:"6"}),_&&p.jsxs("text",{x:k,y:b+20,textAnchor:"middle",fill:"#FFD700",fontSize:"16",fontWeight:"bold",children:[p.jsx("title",{children:"Trump suit"}),""]}),p.jsx("text",{x:k,y:b+(_?50:42),textAnchor:"middle",fill:S(f),fontSize:"32",children:C(f)}),p.jsxs("g",{style:{cursor:"help"},children:[p.jsx("title",{children:Tw[f]}),p.jsx("text",{x:k,y:b+(_?70:64),textAnchor:"middle",fill:"#ccc",fontSize:"16",fontWeight:"600",pointerEvents:"all",children:Ow[f]})]}),p.jsx("rect",{x:k-55,y:b+82,width:110,height:14,fill:"#222",rx:"7"}),p.jsx("rect",{x:k-55,y:b+82,width:Math.min(110,P/rr*110),height:14,fill:O||P>=rr?"#4CAF50":"#2196F3",rx:"7"}),p.jsxs("text",{x:k,y:b+93,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"bold",children:[p.jsx("title",{children:O?"Done":`${P} of ${rr} work hours`}),O?" ":`${P}/${rr}`]}),O?p.jsx(at,{card:{},faceDown:!0,x:k,y:Y+98/2,width:70}):I.map((X,he)=>{const pe=m(X.value),oe=X.suit===i&&pe,j=I.length>1?(he-(I.length-1)/2)*15:0;return p.jsxs("g",{children:[p.jsx(at,{card:X,x:k+j,y:Y+98/2,width:70}),oe&&p.jsxs("g",{style:{cursor:"help"},children:[p.jsxs("title",{children:[pe.english,": ",pe.power]}),p.jsx("text",{x:k+j,y:Y+98+22,textAnchor:"middle",fill:"#FFD700",fontSize:"14",fontWeight:"600",pointerEvents:"all",children:pe.russian})]})]},`reward-${he}`)}),T.length>0&&p.jsxs("text",{x:k,y:J-8,textAnchor:"middle",fill:"#999",fontSize:"13",fontWeight:"500",children:[T.length," assigned"]}),T.map((X,he)=>{const pe=J+49+he*22;return p.jsx("g",{children:p.jsx(at,{card:X,x:k,y:pe,width:70})},`assigned-${he}`)}),(()=>{const X=T.map((oe,j)=>({card:oe,idx:j,info:m(oe.value)})).filter(({card:oe,info:j})=>oe.suit===i&&j);if(X.length===0)return null;const pe=J+98/2+(T.length-1)*22+98/2+12;return X.map(({info:oe},j)=>p.jsxs("g",{style:{cursor:"help"},children:[p.jsxs("title",{children:[oe.english,": ",oe.power]}),p.jsx("text",{x:k,y:pe+j*16,textAnchor:"middle",fill:"#FFD700",fontSize:"13",fontWeight:"600",pointerEvents:"all",children:oe.russian})]},`label-${j}`))})()]},f)})})}const jf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function o1({player:e,position:t,isActive:n,isBrigadeLeader:r,playerIndex:i,scale:s=1}){var oe,j,F,$;const{x:o,y:l}=t,a=((oe=e.hand)==null?void 0:oe.length)||0,u=((j=e.plot)==null?void 0:j.revealed)||[],c=(($=(F=e.plot)==null?void 0:F.hidden)==null?void 0:$.length)||0,d=u.reduce((Q,K)=>Q+K.value,0)+c,h=40*s,g=h*1.4,v=17*s,S=48*s,C=8*s,m=12*s,f=70*s,y=Math.min(5,a)*v+h-v,k=u.length>0?u.length*v+h-v:c>0?h:0,P=u.length>0||c>0?8*s:0,O=C+S+m+f+m+y+P+k+C,_=Math.max(S,g)+C*2,T=o-O/2,U=l-_/2,I=l;let b=T+C;const Y=b;b+=S+m;const J=b;b+=f+m;const X=b;b+=y;const he=b+P/2,pe=b+P;return p.jsxs("g",{className:`player-area ${n?"active":""}`,children:[p.jsx("rect",{x:T,y:U,width:O,height:_,fill:n?"rgba(196, 30, 58, 0.2)":"rgba(20,20,20,0.85)",stroke:n?"#d4a857":"#444",strokeWidth:n?2:1,rx:4*s}),p.jsx("image",{href:jf[(i-1)%jf.length],x:Y,y:I-S/2,width:S,height:S,style:{imageRendering:"pixelated"}}),p.jsxs("text",{x:J,y:I-8*s,textAnchor:"start",fill:n?"#d4a857":"#e8dcc4",fontSize:13*s,fontWeight:n?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[e.name,r&&" "]}),p.jsxs("text",{x:J,y:I+12*s,textAnchor:"start",fill:"#888",fontSize:10*s,fontFamily:"'Oswald', sans-serif",children:[a," cards"]}),d>0&&p.jsxs("text",{x:J+48*s,y:I+12*s,textAnchor:"start",fill:"#c41e3a",fontSize:10*s,fontFamily:"'Oswald', sans-serif",children:[d,"pts"]}),Array.from({length:Math.min(5,a)}).map((Q,K)=>p.jsx("image",{href:"assets/cards/back.svg",x:X+K*v,y:I-g/2,width:h,height:g},`hand-${K}`)),(u.length>0||c>0)&&p.jsx("line",{x1:he,y1:I-g/2+4*s,x2:he,y2:I+g/2-4*s,stroke:"#555",strokeWidth:1*s}),u.map((Q,K)=>p.jsx("image",{href:cr(Q),x:pe+K*v,y:I-g/2,width:h,height:g},`revealed-${K}`)),u.length===0&&c>0&&p.jsx("image",{href:"assets/cards/back.svg",x:pe,y:I-g/2,width:h,height:g,opacity:.5})]})}function l1({exiled:e,currentYear:t}){const o=S=>{const[C,m]=S.split("-");return{suit:C,value:parseInt(m,10)}},l=Object.values(e||{}).flat().length,a=32,u=[58,175,292],c=a+145,d=[116,233],h=50,g=22,v=(S,C,m)=>{const f=(e==null?void 0:e[S])||[],y=S<t,k=S===t;return p.jsxs("g",{className:"gulag-year",children:[p.jsx("rect",{x:C-h/2,y:m,width:h,height:g,fill:k?"rgba(196,30,58,0.35)":"rgba(30,30,30,0.9)",stroke:k?"#c41e3a":"#3a3a3a",strokeWidth:k?2:1}),p.jsx("text",{x:C,y:m+15,textAnchor:"middle",fill:y?"#5a5a5a":k?"#ff4757":"#888",fontSize:"12",fontWeight:k?"bold":"normal",fontFamily:"monospace",children:S}),f.map((P,O)=>{const _=o(P),T=m+g+8+O*16,U=cr(_);return p.jsx("image",{href:U,x:C-55/2,y:T,width:55,height:77},O)}),f.length===0&&y&&p.jsx("rect",{x:C-55/2,y:m+g+8,width:55,height:77,fill:"none",stroke:"#2a2a2a",strokeWidth:1,strokeDasharray:"4,4",rx:"3"}),f.length>0&&p.jsxs("g",{children:[p.jsx("circle",{cx:C+55/2,cy:m+g+14,r:9,fill:"#c41e3a"}),p.jsx("text",{x:C+55/2,y:m+g+18,textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:f.length})]})]},S)};return p.jsxs("g",{className:"gulag-area",children:[p.jsxs("text",{x:175,y:4,textAnchor:"middle",fill:"#c41e3a",fontSize:"14",fontWeight:"bold",letterSpacing:"0.2em",fontFamily:"monospace",children:[p.jsx("title",{children:"The North (Gulag)"}),""]}),l>0&&p.jsxs("text",{x:175,y:20,textAnchor:"middle",fill:"#555",fontSize:"10",fontFamily:"monospace",children:[p.jsxs("title",{children:[l," exiled"]}),"[",l," ]"]}),v(1,u[0],a),v(2,u[1],a),v(3,u[2],a),v(4,d[0],c),v(5,d[1],c)]})}function a1({year:e,trump:t,phase:n,currentPlayer:r,players:i,isMyTurn:s,exiled:o}){var h,g;const u=v=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[v]||v,c=v=>v==="Hearts"||v==="Diamonds"?"#c41e3a":"#e8dcc4",d=v=>({planning:{ru:"",en:"Select Trump"},trick:{ru:"",en:"Trick Phase"},assignment:{ru:"",en:"Assign Cards"},plotSelection:{ru:" ",en:"Select Plot Card"},requisition:{ru:"",en:"Requisition"},swap:{ru:"",en:"Swap Cards"}})[v]||{ru:v,en:v};return p.jsxs("g",{className:"right-sidebar",children:[p.jsx("rect",{x:1540,y:120,width:360,height:180,fill:"rgba(20,20,20,0.9)",stroke:"#d4a857",strokeWidth:1,rx:"10"}),p.jsxs("text",{x:1560,y:150,fill:"#a09080",fontSize:"11",children:[p.jsx("title",{children:"Year"}),""]}),p.jsxs("text",{x:1560,y:170,fill:"#d4a857",fontSize:"18",fontWeight:"bold",children:[e,"/5"]}),p.jsxs("text",{x:1640,y:150,fill:"#a09080",fontSize:"11",children:[p.jsx("title",{children:"Trump suit (Main task)"}),""]}),t?p.jsxs("text",{x:1640,y:170,fill:c(t),fontSize:"18",fontWeight:"bold",children:[u(t)," ",t]}):p.jsxs("text",{x:1640,y:170,fill:"#a09080",fontSize:"14",children:[p.jsx("title",{children:"Not selected"})," "]}),p.jsxs("text",{x:1560,y:205,fill:"#a09080",fontSize:"11",children:[p.jsx("title",{children:"Phase"}),""]}),p.jsxs("text",{x:1560,y:225,fill:"#e8dcc4",fontSize:"14",children:[p.jsx("title",{children:d(n).en}),d(n).ru]}),p.jsxs("text",{x:1560,y:255,fill:"#a09080",fontSize:"11",children:[p.jsx("title",{children:"Turn"}),""]}),s?p.jsxs("text",{x:1560,y:275,fill:"#d4a857",fontSize:"14",fontWeight:"bold",children:[p.jsx("title",{children:"Your Turn!"})," !"]}):p.jsxs("text",{x:1560,y:275,fill:"#a09080",fontSize:"12",children:[p.jsxs("title",{children:["Waiting for ",(h=i[parseInt(r,10)])==null?void 0:h.name,"..."]})," ",(g=i[parseInt(r,10)])==null?void 0:g.name,"..."]}),p.jsx("g",{transform:"translate(1545, 315)",children:p.jsx(l1,{exiled:o,currentYear:e})})]})}function u1({G:e,ctx:t,moves:n,playerID:r}){var gt,ye,Ft,Ti,w,x,E,B,z,L,ne,ee,be,le;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=Ne.useState(null),[u,c]=Ne.useState(null),[d,h]=Ne.useState(null),[g,v]=Ne.useState(null),[S,C]=Ne.useState(null),m=A=>C(S===A?null:A),[f,y]=Ne.useState(!1),k=Ne.useRef(e.year),[P,O]=Ne.useState(window.innerWidth);Ne.useEffect(()=>{const A=()=>O(window.innerWidth);return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const _=P>1024,T=_?350:0,U=_?1570:1920,Y=(U-T)/1220;Ne.useEffect(()=>{e.year!==k.current&&(y(!1),k.current=e.year)},[e.year]);const J=A=>{o==="trick"&&s&&n.playCard(A)},X=A=>{o==="planning"&&n.setTrump(A)},he=(A,D)=>{n.assignCard(A,D)},pe=()=>{n.submitAssignments()},oe=()=>{l!==null&&u!==null&&d!==null&&(n.swapCard(u,l,d),a(null),c(null),h(null))},j=(A,D)=>{u===A&&d===D?(c(null),h(null)):(c(A),h(D))},F=()=>{y(!0),n.confirmSwap()},$=(T+U)/2,Q=460,K=80,$t=320*Y,yt=(A,D)=>{const Z=[{x:$,y:800},{x:$-$t,y:K},{x:$,y:K},{x:$+$t,y:K}];return Z[A]||Z[0]};if(t.gameover){const{winner:A,scores:D}=t.gameover;return p.jsxs("div",{className:"game-over",children:[p.jsx("h1",{children:"Game Over!"}),p.jsxs("h2",{children:["Winner: ",e.players[A].name]}),p.jsx("div",{className:"final-scores",children:e.players.map((Z,Ee)=>p.jsxs("div",{className:Ee===A?"winner":"",children:[Z.name,": ",D[Ee]," points"]},Ee))}),p.jsx("p",{children:"(Lowest score wins)"})]})}return p.jsxs("div",{className:"game-board",children:[o==="planning"&&!e.trump&&p.jsxs("div",{className:"trump-selection",children:[p.jsx("h3",{title:"Select Trump Suit",children:"  "}),p.jsx("div",{className:"suit-buttons",children:Qe.map(A=>{const D={Hearts:{ru:"",en:"Hearts (Wheat)"},Diamonds:{ru:"",en:"Diamonds (Beets)"},Clubs:{ru:"",en:"Clubs (Potatoes)"},Spades:{ru:"",en:"Spades (Sunflowers)"}};return p.jsxs("button",{onClick:()=>X(A),className:`suit-btn ${A.toLowerCase()}`,title:D[A].en,children:[Af(A)," ",D[A].ru]},A)})})]}),p.jsxs("svg",{viewBox:"0 0 1920 1080",className:"board-svg",children:[p.jsx(s1,{revealedJobs:e.revealedJobs,workHours:e.workHours,jobBuckets:e.jobBuckets,claimedJobs:e.claimedJobs,trump:e.trump,phase:o,pendingAssignments:e.pendingAssignments,onAssign:he,lastTrick:e.lastTrick}),p.jsx(i1,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:$,centerY:Q,scale:Y,year:e.year,trump:e.trump,phase:o,isMyTurn:s,currentPlayerName:(gt=e.players[t.currentPlayer])==null?void 0:gt.name,showInfo:!_}),e.players.map((A,D)=>{if(D===i)return null;const Z=yt(D,e.numPlayers);return p.jsx(o1,{player:A,position:Z,isActive:parseInt(t.currentPlayer,10)===D,isBrigadeLeader:A.brigadeLeader,playerIndex:D,scale:Y},D)}),p.jsx(a1,{year:e.year,trump:e.trump,phase:o,currentPlayer:t.currentPlayer,players:e.players,isMyTurn:s,exiled:e.exiled})]}),!_&&p.jsxs("div",{className:"mobile-nav-bar",children:[p.jsxs("button",{className:`nav-btn ${S==="options"?"active":""}`,onClick:()=>m("options"),title:"Menu",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",children:"Menu"})]}),p.jsxs("button",{className:`nav-btn ${S==="jobs"?"active":""}`,onClick:()=>m("jobs"),title:"Jobs",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Jobs",children:""})]}),p.jsxs("button",{className:`nav-btn ${S==="gulag"?"active":""}`,onClick:()=>m("gulag"),title:"The North (Gulag)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"The North",children:""})]})]}),!_&&S!==null&&p.jsxs("div",{className:"mobile-panel-content",children:[S==="options"&&p.jsxs("div",{className:"options-panel",children:[p.jsx("h3",{title:"Menu",children:""}),p.jsxs("div",{className:"menu-options",children:[p.jsxs("div",{className:"rules-section",children:[p.jsx("h4",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h5",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h5",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h5",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]})]})]}),p.jsx("button",{className:"menu-btn-action",onClick:()=>window.location.reload(),children:" New Game"})]})]}),S==="jobs"&&p.jsxs("div",{className:"jobs-panel",children:[p.jsxs("div",{className:"jobs-header",children:[p.jsx("h3",{title:"Jobs",children:""}),p.jsxs("span",{className:"jobs-count",children:[((ye=e.claimedJobs)==null?void 0:ye.length)||0,"/4"]})]}),p.jsx("div",{className:"jobs-grid",children:Qe.map(A=>{var Nt,Ot,ji,Ai;const D=((Nt=e.workHours)==null?void 0:Nt[A])||0,Z=(Ot=e.claimedJobs)==null?void 0:Ot.includes(A),Ee=A===e.trump,Ce=((ji=e.jobBuckets)==null?void 0:ji[A])||[],qe=(Ai=e.revealedJobs)==null?void 0:Ai[A],lt=Array.isArray(qe)?qe:qe?[qe]:[],ke=Math.min(100,D/40*100);return p.jsxs("div",{className:`job-column ${Ee?"trump":""} ${Z?"claimed":""}`,children:[p.jsxs("div",{className:"job-header-row",children:[p.jsx("span",{className:`suit-symbol ${A.toLowerCase()}`,children:Af(A)}),p.jsxs("div",{className:"progress-bar-container",children:[p.jsx("div",{className:`progress-bar-fill ${Z?"complete":""}`,style:{width:`${ke}%`}}),p.jsx("span",{className:"progress-text",children:Z?"":`${D}/40`})]})]}),p.jsxs("div",{className:"job-cards-stack",children:[Z?p.jsx("img",{src:"assets/cards/back.svg",alt:"claimed",className:"job-card"}):lt.map((Cn,Co)=>p.jsx("img",{src:cr(Cn),alt:`${Cn.value} of ${Cn.suit}`,className:"job-card reward"},`reward-${Co}`)),Ce.slice(0,8).map((Cn,Co)=>p.jsx("img",{src:cr(Cn),alt:`${Cn.value} of ${Cn.suit}`,className:"job-card",style:{marginTop:"-40px"}},`assigned-${Co}`)),Ce.length>8&&p.jsxs("div",{className:"more-cards",children:["+",Ce.length-8]})]})]},A)})})]}),S==="gulag"&&p.jsxs("div",{className:"gulag-panel",children:[p.jsxs("div",{className:"gulag-header",children:[p.jsx("h3",{title:"The North (Gulag)",children:""}),p.jsxs("span",{className:"gulag-count",children:[Object.values(e.exiled||{}).flat().length," "]})]}),p.jsx("div",{className:"gulag-grid",children:[1,2,3,4,5].map(A=>{var qe;const D=((qe=e.exiled)==null?void 0:qe[A])||[],Z=A===e.year,Ee=A<e.year,Ce=lt=>{const[ke,Nt]=lt.split("-");return{suit:ke,value:parseInt(Nt,10)}};return p.jsxs("div",{className:`year-column ${Z?"current":""} ${Ee?"past":""}`,children:[p.jsxs("div",{className:"year-header",children:[p.jsx("span",{className:"year-number",children:A}),D.length>0&&p.jsx("span",{className:"year-badge",children:D.length})]}),p.jsxs("div",{className:"year-cards",children:[D.length>0?D.slice(0,8).map((lt,ke)=>{const Nt=Ce(lt);return p.jsx("img",{src:cr(Nt),alt:lt,className:"gulag-card",style:{marginTop:ke>0?"-35px":"0"}},ke)}):p.jsx("div",{className:"empty-slot"}),D.length>8&&p.jsxs("div",{className:"more-cards",children:["+",D.length-8]})]})]},A)})})]})]}),p.jsx(r1,{cards:((Ft=e.players[i])==null?void 0:Ft.hand)||[],onPlayCard:J,canPlay:o==="trick"&&s,leadSuit:(w=(Ti=e.currentTrick[0])==null?void 0:Ti[1])==null?void 0:w.suit,trump:e.trump,validIndices:c1(e,i,o)}),o==="assignment"&&e.lastWinner===i&&(()=>{const A=[...new Set(e.lastTrick.map(([,D])=>D.suit))];return p.jsxs("div",{className:"assignment-ui",children:[p.jsx("h3",{children:"Assign cards to jobs"}),p.jsx("p",{children:"Assign each card to a job from this trick"}),p.jsx("div",{className:"assignment-cards",children:e.lastTrick.map(([D,Z],Ee)=>{var lt;const Ce=`${Z.suit}-${Z.value}`,qe=(lt=e.pendingAssignments)==null?void 0:lt[Ce];return p.jsxs("div",{className:"assignment-card",children:[p.jsx(at,{card:Z,width:80}),p.jsx("select",{value:qe||Z.suit,onChange:ke=>he(Ce,ke.target.value),children:A.map(ke=>p.jsx("option",{value:ke,children:ke},ke))})]},Ee)})}),p.jsx("button",{onClick:pe,disabled:Object.keys(e.pendingAssignments||{}).length!==e.lastTrick.length,children:"Submit Assignments"})]})})(),o==="swap"&&!((x=e.swapConfirmed)!=null&&x[i])&&!f&&p.jsxs("div",{className:"swap-ui",children:[p.jsxs("h3",{children:["Swap Cards (Year ",e.year,")"]}),p.jsx("p",{children:"Select a card from your hand and one from your plot to swap, or skip"}),p.jsxs("div",{className:"swap-section",children:[p.jsx("h4",{children:"Your Hand"}),p.jsx("div",{className:"swap-cards",children:(E=e.players[i])==null?void 0:E.hand.map((A,D)=>p.jsx("div",{className:`swap-card ${l===D?"selected":""}`,onClick:()=>a(l===D?null:D),children:p.jsx(at,{card:A,width:80})},`hand-${D}`))})]}),((B=e.players[i])==null?void 0:B.plot.revealed.length)>0&&p.jsxs("div",{className:"swap-section",children:[p.jsx("h4",{children:"Your Revealed Cards (Rewards)"}),p.jsx("div",{className:"swap-cards",children:(z=e.players[i])==null?void 0:z.plot.revealed.map((A,D)=>p.jsx("div",{className:`swap-card ${u===D&&d==="revealed"?"selected":""}`,onClick:()=>j(D,"revealed"),children:p.jsx(at,{card:A,width:80})},`revealed-${D}`))})]}),((L=e.players[i])==null?void 0:L.plot.hidden.length)>0&&p.jsxs("div",{className:"swap-section",children:[p.jsx("h4",{children:"Your Hidden Plot"}),p.jsx("div",{className:"swap-cards",children:(ne=e.players[i])==null?void 0:ne.plot.hidden.map((A,D)=>p.jsx("div",{className:`swap-card ${u===D&&d==="hidden"?"selected":""}`,onClick:()=>j(D,"hidden"),children:p.jsx(at,{card:A,width:80})},`hidden-${D}`))})]}),p.jsxs("div",{className:"swap-buttons",children:[p.jsx("button",{onClick:oe,disabled:l===null||u===null||d===null,children:"Swap Selected Cards"}),p.jsx("button",{onClick:F,children:"Done Swapping"})]})]}),o==="swap"&&(((ee=e.swapConfirmed)==null?void 0:ee[i])||f)&&p.jsx("div",{className:"swap-ui",children:p.jsx("h3",{children:"Waiting for other players..."})}),p.jsxs("div",{className:"player-plot",children:[p.jsx("h4",{title:"Your Plot (Cellar)",children:""}),p.jsxs("div",{className:"plot-cards",children:[(be=e.players[i])==null?void 0:be.plot.revealed.map((A,D)=>p.jsx(at,{card:A,width:60},`r-${D}`)),(le=e.players[i])==null?void 0:le.plot.hidden.map((A,D)=>p.jsxs("div",{className:`hidden-plot-card ${g===D?"revealed":""}`,title:"Tap to reveal",onClick:()=>v(g===D?null:D),children:[p.jsx(at,{card:A,width:60,faceDown:!0,className:"card-back"}),p.jsx(at,{card:A,width:60,className:"card-front"})]},`h-${D}`))]})]})]})}function Af(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function c1(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function f1(){const[e,t]=Ne.useState(!1),[n,r]=Ne.useState({...lm}),i=Ne.useMemo(()=>e?rm({game:t1,board:u1,numPlayers:4,multiplayer:nm({bots:{1:ps,2:ps,3:ps}}),debug:!1}):null,[e]),[s,o]=Ne.useState(!1);return e?p.jsx(i,{playerID:"0",setupData:{variants:n}}):p.jsxs("div",{className:"lobby",children:[p.jsxs("div",{className:"lobby-left",children:[p.jsxs("div",{className:"lobby-title",children:[p.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),p.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""})]}),p.jsxs("div",{className:"lobby-buttons",children:[p.jsx("button",{className:"start-btn",onClick:()=>t(!0),children:"Start Game"}),p.jsx("button",{className:`rules-btn ${s?"active":""}`,onClick:()=>o(!s),children:s?"Options":"Rules"})]})]}),p.jsx("div",{className:"lobby-right-panel",children:s?p.jsxs("div",{className:"rules-panel",children:[p.jsx("h3",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h4",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h4",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h4",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),p.jsx("h4",{children:"Scoring"}),p.jsx("p",{children:"Cards in your plot = penalty points. Lowest score wins!"})]})]}):p.jsxs("div",{className:"variant-options",children:[p.jsx("h3",{children:"Deck Type"}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),p.jsx("h3",{children:"Variant Rules"}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:l=>r({...n,nomenclature:l.target.checked})}),p.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:l=>r({...n,allowSwap:l.target.checked})}),p.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:l=>r({...n,northernStyle:l.target.checked})}),p.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - No job rewards, all vulnerable"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:l=>r({...n,miceVariant:l.target.checked})}),p.jsx("strong",{title:"Myshi - Mice",children:""})," - All reveal during requisition"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:l=>r({...n,ordenNachalniku:l.target.checked})}),p.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards on job complete"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:l=>r({...n,medalsCount:l.target.checked})}),p.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins add to score"]}),n.deckType===52&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:l=>r({...n,accumulateJobs:l.target.checked})}),p.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Job rewards carry over"]})]})})]})}const d1=Vh(document.getElementById("root"));d1.render(p.jsx(f1,{}));
