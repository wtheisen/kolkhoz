(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zf={exports:{}},to={},$f={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=Symbol.for("react.element"),Sm=Symbol.for("react.portal"),km=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),_m=Symbol.for("react.profiler"),Em=Symbol.for("react.provider"),Cm=Symbol.for("react.context"),Pm=Symbol.for("react.forward_ref"),Nm=Symbol.for("react.suspense"),Om=Symbol.for("react.memo"),Tm=Symbol.for("react.lazy"),Xu=Symbol.iterator;function jm(e){return e===null||typeof e!="object"?null:(e=Xu&&e[Xu]||e["@@iterator"],typeof e=="function"?e:null)}var Ff={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bf=Object.assign,Uf={};function _r(e,t,n){this.props=e,this.context=t,this.refs=Uf,this.updater=n||Ff}_r.prototype.isReactComponent={};_r.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hf(){}Hf.prototype=_r.prototype;function xa(e,t,n){this.props=e,this.context=t,this.refs=Uf,this.updater=n||Ff}var _a=xa.prototype=new Hf;_a.constructor=xa;Bf(_a,_r.prototype);_a.isPureReactComponent=!0;var Zu=Array.isArray,Wf=Object.prototype.hasOwnProperty,Ea={current:null},Vf={key:!0,ref:!0,__self:!0,__source:!0};function Yf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Wf.call(t,r)&&!Vf.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ni,type:e,key:s,ref:o,props:i,_owner:Ea.current}}function Am(e,t){return{$$typeof:Ni,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ca(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ni}function Im(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gu=/\/+/g;function Oo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Im(""+e.key):t.toString(36)}function is(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ni:case Sm:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Oo(o,0):r,Zu(i)?(n="",e!=null&&(n=e.replace(Gu,"$&/")+"/"),is(i,t,n,"",function(u){return u})):i!=null&&(Ca(i)&&(i=Am(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Zu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+Oo(s,l);o+=is(s,t,n,a,i)}else if(a=jm(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+Oo(s,l++),o+=is(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Di(e,t,n){if(e==null)return e;var r=[],i=0;return is(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Mm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},ss={transition:null},Dm={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ss,ReactCurrentOwner:Ea};function Kf(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Di,forEach:function(e,t,n){Di(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Di(e,function(){t++}),t},toArray:function(e){return Di(e,function(t){return t})||[]},only:function(e){if(!Ca(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=_r;W.Fragment=km;W.Profiler=_m;W.PureComponent=xa;W.StrictMode=xm;W.Suspense=Nm;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dm;W.act=Kf;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bf({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Ea.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Wf.call(t,a)&&!Vf.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ni,type:e.type,key:i,ref:s,props:r,_owner:o}};W.createContext=function(e){return e={$$typeof:Cm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Em,_context:e},e.Consumer=e};W.createElement=Yf;W.createFactory=function(e){var t=Yf.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:Pm,render:e}};W.isValidElement=Ca;W.lazy=function(e){return{$$typeof:Tm,_payload:{_status:-1,_result:e},_init:Mm}};W.memo=function(e,t){return{$$typeof:Om,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=ss.transition;ss.transition={};try{e()}finally{ss.transition=t}};W.unstable_act=Kf;W.useCallback=function(e,t){return Be.current.useCallback(e,t)};W.useContext=function(e){return Be.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};W.useEffect=function(e,t){return Be.current.useEffect(e,t)};W.useId=function(){return Be.current.useId()};W.useImperativeHandle=function(e,t,n){return Be.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Be.current.useMemo(e,t)};W.useReducer=function(e,t,n){return Be.current.useReducer(e,t,n)};W.useRef=function(e){return Be.current.useRef(e)};W.useState=function(e){return Be.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return Be.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return Be.current.useTransition()};W.version="18.3.1";$f.exports=W;var ye=$f.exports;const b=Lf(ye);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm=ye,Rm=Symbol.for("react.element"),Lm=Symbol.for("react.fragment"),zm=Object.prototype.hasOwnProperty,$m=bm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fm={key:!0,ref:!0,__self:!0,__source:!0};function Jf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)zm.call(t,r)&&!Fm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Rm,type:e,key:s,ref:o,props:i,_owner:$m.current}}to.Fragment=Lm;to.jsx=Jf;to.jsxs=Jf;zf.exports=to;var p=zf.exports,qf={exports:{}},lt={},Qf={exports:{}},Xf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,$){var F=j.length;j.push($);e:for(;0<F;){var q=F-1>>>1,Q=j[q];if(0<i(Q,$))j[q]=$,j[F]=Q,F=q;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],F=j.pop();if(F!==$){j[0]=F;e:for(var q=0,Q=j.length,Ht=Q>>>1;q<Ht;){var vt=2*(q+1)-1,He=j[vt],Se=vt+1,At=j[Se];if(0>i(He,F))Se<Q&&0>i(At,He)?(j[q]=At,j[Se]=F,q=Se):(j[q]=He,j[vt]=F,q=vt);else if(Se<Q&&0>i(At,F))j[q]=At,j[Se]=F,q=Se;else break e}}return $}function i(j,$){var F=j.sortIndex-$.sortIndex;return F!==0?F:j.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,d=null,h=3,g=!1,v=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=j)r(u),$.sortIndex=$.expirationTime,t(a,$);else break;$=n(u)}}function w(j){if(k=!1,y(j),!v)if(n(a)!==null)v=!0,pe(N);else{var $=n(u);$!==null&&te(w,$.startTime-j)}}function N(j,$){v=!1,k&&(k=!1,m(T),T=-1),g=!0;var F=h;try{for(y($),d=n(a);d!==null&&(!(d.expirationTime>$)||j&&!D());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var Q=q(d.expirationTime<=$);$=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(a)&&r(a),y($)}else r(a);d=n(a)}if(d!==null)var Ht=!0;else{var vt=n(u);vt!==null&&te(w,vt.startTime-$),Ht=!1}return Ht}finally{d=null,h=F,g=!1}}var O=!1,_=null,T=-1,U=5,A=-1;function D(){return!(e.unstable_now()-A<U)}function Y(){if(_!==null){var j=e.unstable_now();A=j;var $=!0;try{$=_(!0,j)}finally{$?K():(O=!1,_=null)}}else O=!1}var K;if(typeof f=="function")K=function(){f(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,we=J.port2;J.port1.onmessage=Y,K=function(){we.postMessage(null)}}else K=function(){E(Y,0)};function pe(j){_=j,O||(O=!0,K())}function te(j,$){T=E(function(){j(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,pe(N))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return j()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var F=h;h=j;try{return $()}finally{h=F}},e.unstable_scheduleCallback=function(j,$,F){var q=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?q+F:q):F=q,j){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=F+Q,j={id:c++,callback:$,priorityLevel:j,startTime:F,expirationTime:Q,sortIndex:-1},F>q?(j.sortIndex=F,t(u,j),n(a)===null&&j===n(u)&&(k?(m(T),T=-1):k=!0,te(w,F-q))):(j.sortIndex=Q,t(a,j),v||g||(v=!0,pe(N))),j},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(j){var $=h;return function(){var F=h;h=$;try{return j.apply(this,arguments)}finally{h=F}}}})(Xf);Qf.exports=Xf;var Bm=Qf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=ye,it=Bm;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zf=new Set,ii={};function Vn(e,t){pr(e,t),pr(e+"Capture",t)}function pr(e,t){for(ii[e]=t,e=0;e<t.length;e++)Zf.add(t[e])}var Xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fl=Object.prototype.hasOwnProperty,Hm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ec={},tc={};function Wm(e){return fl.call(tc,e)?!0:fl.call(ec,e)?!1:Hm.test(e)?tc[e]=!0:(ec[e]=!0,!1)}function Vm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ym(e,t,n,r){if(t===null||typeof t>"u"||Vm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ue(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oe[e]=new Ue(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oe[t]=new Ue(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oe[e]=new Ue(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oe[e]=new Ue(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oe[e]=new Ue(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oe[e]=new Ue(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oe[e]=new Ue(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oe[e]=new Ue(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oe[e]=new Ue(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pa=/[\-:]([a-z])/g;function Na(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pa,Na);Oe[t]=new Ue(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pa,Na);Oe[t]=new Ue(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pa,Na);Oe[t]=new Ue(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oe[e]=new Ue(e,1,!1,e.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oe[e]=new Ue(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oa(e,t,n,r){var i=Oe.hasOwnProperty(t)?Oe[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ym(t,n,i,r)&&(n=null),r||i===null?Wm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var nn=Um.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bi=Symbol.for("react.element"),qn=Symbol.for("react.portal"),Qn=Symbol.for("react.fragment"),Ta=Symbol.for("react.strict_mode"),dl=Symbol.for("react.profiler"),Gf=Symbol.for("react.provider"),ed=Symbol.for("react.context"),ja=Symbol.for("react.forward_ref"),hl=Symbol.for("react.suspense"),pl=Symbol.for("react.suspense_list"),Aa=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),td=Symbol.for("react.offscreen"),nc=Symbol.iterator;function Tr(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Object.assign,To;function Fr(e){if(To===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);To=t&&t[1]||""}return`
`+To+e}var jo=!1;function Ao(e,t){if(!e||jo)return"";jo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{jo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fr(e):""}function Km(e){switch(e.tag){case 5:return Fr(e.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 2:case 15:return e=Ao(e.type,!1),e;case 11:return e=Ao(e.type.render,!1),e;case 1:return e=Ao(e.type,!0),e;default:return""}}function ml(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qn:return"Fragment";case qn:return"Portal";case dl:return"Profiler";case Ta:return"StrictMode";case hl:return"Suspense";case pl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ed:return(e.displayName||"Context")+".Consumer";case Gf:return(e._context.displayName||"Context")+".Provider";case ja:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Aa:return t=e.displayName||null,t!==null?t:ml(e.type)||"Memo";case on:t=e._payload,e=e._init;try{return ml(e(t))}catch{}}return null}function Jm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ml(t);case 8:return t===Ta?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qm(e){var t=nd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ri(e){e._valueTracker||(e._valueTracker=qm(e))}function rd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ks(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yl(e,t){var n=t.checked;return ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function id(e,t){t=t.checked,t!=null&&Oa(e,"checked",t,!1)}function gl(e,t){id(e,t);var n=kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vl(e,t.type,n):t.hasOwnProperty("defaultValue")&&vl(e,t.type,kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ic(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function vl(e,t,n){(t!=="number"||ks(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Br=Array.isArray;function lr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function wl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(P(92));if(Br(n)){if(1<n.length)throw Error(P(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kn(n)}}function sd(e,t){var n=kn(t.value),r=kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function oc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function od(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?od(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Li,ld=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Li=Li||document.createElement("div"),Li.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Li.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function si(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qm=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(e){Qm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kr[t]=Kr[e]})});function ad(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kr.hasOwnProperty(e)&&Kr[e]?(""+t).trim():t+"px"}function ud(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ad(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Xm=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kl(e,t){if(t){if(Xm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function xl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _l=null;function Ia(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var El=null,ar=null,ur=null;function lc(e){if(e=ji(e)){if(typeof El!="function")throw Error(P(280));var t=e.stateNode;t&&(t=oo(t),El(e.stateNode,e.type,t))}}function cd(e){ar?ur?ur.push(e):ur=[e]:ar=e}function fd(){if(ar){var e=ar,t=ur;if(ur=ar=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function dd(e,t){return e(t)}function hd(){}var Io=!1;function pd(e,t,n){if(Io)return e(t,n);Io=!0;try{return dd(e,t,n)}finally{Io=!1,(ar!==null||ur!==null)&&(hd(),fd())}}function oi(e,t){var n=e.stateNode;if(n===null)return null;var r=oo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var Cl=!1;if(Xt)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Cl=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Cl=!1}function Zm(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Jr=!1,xs=null,_s=!1,Pl=null,Gm={onError:function(e){Jr=!0,xs=e}};function ey(e,t,n,r,i,s,o,l,a){Jr=!1,xs=null,Zm.apply(Gm,arguments)}function ty(e,t,n,r,i,s,o,l,a){if(ey.apply(this,arguments),Jr){if(Jr){var u=xs;Jr=!1,xs=null}else throw Error(P(198));_s||(_s=!0,Pl=u)}}function Yn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function md(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ac(e){if(Yn(e)!==e)throw Error(P(188))}function ny(e){var t=e.alternate;if(!t){if(t=Yn(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ac(i),e;if(s===r)return ac(i),t;s=s.sibling}throw Error(P(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function yd(e){return e=ny(e),e!==null?gd(e):null}function gd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gd(e);if(t!==null)return t;e=e.sibling}return null}var vd=it.unstable_scheduleCallback,uc=it.unstable_cancelCallback,ry=it.unstable_shouldYield,iy=it.unstable_requestPaint,he=it.unstable_now,sy=it.unstable_getCurrentPriorityLevel,Ma=it.unstable_ImmediatePriority,wd=it.unstable_UserBlockingPriority,Es=it.unstable_NormalPriority,oy=it.unstable_LowPriority,Sd=it.unstable_IdlePriority,no=null,Lt=null;function ly(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(no,e,void 0,(e.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:cy,ay=Math.log,uy=Math.LN2;function cy(e){return e>>>=0,e===0?32:31-(ay(e)/uy|0)|0}var zi=64,$i=4194304;function Ur(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ur(l):(s&=o,s!==0&&(r=Ur(s)))}else o=n&~i,o!==0?r=Ur(o):s!==0&&(r=Ur(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ot(t),i=1<<n,r|=e[n],t&=~i;return r}function fy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ot(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=fy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Nl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kd(){var e=zi;return zi<<=1,!(zi&4194240)&&(zi=64),e}function Mo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Oi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ot(t),e[t]=n}function hy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Da(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Z=0;function xd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _d,ba,Ed,Cd,Pd,Ol=!1,Fi=[],dn=null,hn=null,pn=null,li=new Map,ai=new Map,an=[],py="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cc(e,t){switch(e){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":pn=null;break;case"pointerover":case"pointerout":li.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function Ar(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ji(t),t!==null&&ba(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function my(e,t,n,r,i){switch(t){case"focusin":return dn=Ar(dn,e,t,n,r,i),!0;case"dragenter":return hn=Ar(hn,e,t,n,r,i),!0;case"mouseover":return pn=Ar(pn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return li.set(s,Ar(li.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ai.set(s,Ar(ai.get(s)||null,e,t,n,r,i)),!0}return!1}function Nd(e){var t=Dn(e.target);if(t!==null){var n=Yn(t);if(n!==null){if(t=n.tag,t===13){if(t=md(n),t!==null){e.blockedOn=t,Pd(e.priority,function(){Ed(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function os(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Tl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_l=r,n.target.dispatchEvent(r),_l=null}else return t=ji(n),t!==null&&ba(t),e.blockedOn=n,!1;t.shift()}return!0}function fc(e,t,n){os(e)&&n.delete(t)}function yy(){Ol=!1,dn!==null&&os(dn)&&(dn=null),hn!==null&&os(hn)&&(hn=null),pn!==null&&os(pn)&&(pn=null),li.forEach(fc),ai.forEach(fc)}function Ir(e,t){e.blockedOn===t&&(e.blockedOn=null,Ol||(Ol=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,yy)))}function ui(e){function t(i){return Ir(i,e)}if(0<Fi.length){Ir(Fi[0],e);for(var n=1;n<Fi.length;n++){var r=Fi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(dn!==null&&Ir(dn,e),hn!==null&&Ir(hn,e),pn!==null&&Ir(pn,e),li.forEach(t),ai.forEach(t),n=0;n<an.length;n++)r=an[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<an.length&&(n=an[0],n.blockedOn===null);)Nd(n),n.blockedOn===null&&an.shift()}var cr=nn.ReactCurrentBatchConfig,Ps=!0;function gy(e,t,n,r){var i=Z,s=cr.transition;cr.transition=null;try{Z=1,Ra(e,t,n,r)}finally{Z=i,cr.transition=s}}function vy(e,t,n,r){var i=Z,s=cr.transition;cr.transition=null;try{Z=4,Ra(e,t,n,r)}finally{Z=i,cr.transition=s}}function Ra(e,t,n,r){if(Ps){var i=Tl(e,t,n,r);if(i===null)Ho(e,t,r,Ns,n),cc(e,r);else if(my(i,e,t,n,r))r.stopPropagation();else if(cc(e,r),t&4&&-1<py.indexOf(e)){for(;i!==null;){var s=ji(i);if(s!==null&&_d(s),s=Tl(e,t,n,r),s===null&&Ho(e,t,r,Ns,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ho(e,t,r,null,n)}}var Ns=null;function Tl(e,t,n,r){if(Ns=null,e=Ia(r),e=Dn(e),e!==null)if(t=Yn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=md(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ns=e,null}function Od(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sy()){case Ma:return 1;case wd:return 4;case Es:case oy:return 16;case Sd:return 536870912;default:return 16}default:return 16}}var cn=null,La=null,ls=null;function Td(){if(ls)return ls;var e,t=La,n=t.length,r,i="value"in cn?cn.value:cn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ls=i.slice(e,1<r?1-r:void 0)}function as(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bi(){return!0}function dc(){return!1}function at(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bi:dc,this.isPropagationStopped=dc,this}return ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),t}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=at(Er),Ti=ce({},Er,{view:0,detail:0}),wy=at(Ti),Do,bo,Mr,ro=ce({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mr&&(Mr&&e.type==="mousemove"?(Do=e.screenX-Mr.screenX,bo=e.screenY-Mr.screenY):bo=Do=0,Mr=e),Do)},movementY:function(e){return"movementY"in e?e.movementY:bo}}),hc=at(ro),Sy=ce({},ro,{dataTransfer:0}),ky=at(Sy),xy=ce({},Ti,{relatedTarget:0}),Ro=at(xy),_y=ce({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),Ey=at(_y),Cy=ce({},Er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Py=at(Cy),Ny=ce({},Er,{data:0}),pc=at(Ny),Oy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ty={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ay(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jy[e])?!!t[e]:!1}function $a(){return Ay}var Iy=ce({},Ti,{key:function(e){if(e.key){var t=Oy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ty[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),My=at(Iy),Dy=ce({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=at(Dy),by=ce({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),Ry=at(by),Ly=ce({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),zy=at(Ly),$y=ce({},ro,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fy=at($y),By=[9,13,27,32],Fa=Xt&&"CompositionEvent"in window,qr=null;Xt&&"documentMode"in document&&(qr=document.documentMode);var Uy=Xt&&"TextEvent"in window&&!qr,jd=Xt&&(!Fa||qr&&8<qr&&11>=qr),yc=" ",gc=!1;function Ad(e,t){switch(e){case"keyup":return By.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Id(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xn=!1;function Hy(e,t){switch(e){case"compositionend":return Id(t);case"keypress":return t.which!==32?null:(gc=!0,yc);case"textInput":return e=t.data,e===yc&&gc?null:e;default:return null}}function Wy(e,t){if(Xn)return e==="compositionend"||!Fa&&Ad(e,t)?(e=Td(),ls=La=cn=null,Xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jd&&t.locale!=="ko"?null:t.data;default:return null}}var Vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vy[e.type]:t==="textarea"}function Md(e,t,n,r){cd(r),t=Os(t,"onChange"),0<t.length&&(n=new za("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qr=null,ci=null;function Yy(e){Wd(e,0)}function io(e){var t=er(e);if(rd(t))return e}function Ky(e,t){if(e==="change")return t}var Dd=!1;if(Xt){var Lo;if(Xt){var zo="oninput"in document;if(!zo){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),zo=typeof wc.oninput=="function"}Lo=zo}else Lo=!1;Dd=Lo&&(!document.documentMode||9<document.documentMode)}function Sc(){Qr&&(Qr.detachEvent("onpropertychange",bd),ci=Qr=null)}function bd(e){if(e.propertyName==="value"&&io(ci)){var t=[];Md(t,ci,e,Ia(e)),pd(Yy,t)}}function Jy(e,t,n){e==="focusin"?(Sc(),Qr=t,ci=n,Qr.attachEvent("onpropertychange",bd)):e==="focusout"&&Sc()}function qy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return io(ci)}function Qy(e,t){if(e==="click")return io(t)}function Xy(e,t){if(e==="input"||e==="change")return io(t)}function Zy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:Zy;function fi(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fl.call(t,i)||!jt(e[i],t[i]))return!1}return!0}function kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xc(e,t){var n=kc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kc(n)}}function Rd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ld(){for(var e=window,t=ks();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ks(e.document)}return t}function Ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gy(e){var t=Ld(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Rd(n.ownerDocument.documentElement,n)){if(r!==null&&Ba(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=xc(n,s);var o=xc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eg=Xt&&"documentMode"in document&&11>=document.documentMode,Zn=null,jl=null,Xr=null,Al=!1;function _c(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Al||Zn==null||Zn!==ks(r)||(r=Zn,"selectionStart"in r&&Ba(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xr&&fi(Xr,r)||(Xr=r,r=Os(jl,"onSelect"),0<r.length&&(t=new za("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Zn)))}function Ui(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Gn={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionend:Ui("Transition","TransitionEnd")},$o={},zd={};Xt&&(zd=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function so(e){if($o[e])return $o[e];if(!Gn[e])return e;var t=Gn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zd)return $o[e]=t[n];return e}var $d=so("animationend"),Fd=so("animationiteration"),Bd=so("animationstart"),Ud=so("transitionend"),Hd=new Map,Ec="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,t){Hd.set(e,t),Vn(t,[e])}for(var Fo=0;Fo<Ec.length;Fo++){var Bo=Ec[Fo],tg=Bo.toLowerCase(),ng=Bo[0].toUpperCase()+Bo.slice(1);Cn(tg,"on"+ng)}Cn($d,"onAnimationEnd");Cn(Fd,"onAnimationIteration");Cn(Bd,"onAnimationStart");Cn("dblclick","onDoubleClick");Cn("focusin","onFocus");Cn("focusout","onBlur");Cn(Ud,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function Cc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ty(r,t,void 0,e),e.currentTarget=null}function Wd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Cc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Cc(i,l,u),s=a}}}if(_s)throw e=Pl,_s=!1,Pl=null,e}function re(e,t){var n=t[Rl];n===void 0&&(n=t[Rl]=new Set);var r=e+"__bubble";n.has(r)||(Vd(t,e,2,!1),n.add(r))}function Uo(e,t,n){var r=0;t&&(r|=4),Vd(n,e,r,t)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function di(e){if(!e[Hi]){e[Hi]=!0,Zf.forEach(function(n){n!=="selectionchange"&&(rg.has(n)||Uo(n,!1,e),Uo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hi]||(t[Hi]=!0,Uo("selectionchange",!1,t))}}function Vd(e,t,n,r){switch(Od(t)){case 1:var i=gy;break;case 4:i=vy;break;default:i=Ra}n=i.bind(null,t,n,e),i=void 0,!Cl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ho(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Dn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}pd(function(){var u=s,c=Ia(n),d=[];e:{var h=Hd.get(e);if(h!==void 0){var g=za,v=e;switch(e){case"keypress":if(as(n)===0)break e;case"keydown":case"keyup":g=My;break;case"focusin":v="focus",g=Ro;break;case"focusout":v="blur",g=Ro;break;case"beforeblur":case"afterblur":g=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ky;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ry;break;case $d:case Fd:case Bd:g=Ey;break;case Ud:g=zy;break;case"scroll":g=wy;break;case"wheel":g=Fy;break;case"copy":case"cut":case"paste":g=Py;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=mc}var k=(t&4)!==0,E=!k&&e==="scroll",m=k?h!==null?h+"Capture":null:h;k=[];for(var f=u,y;f!==null;){y=f;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,m!==null&&(w=oi(f,m),w!=null&&k.push(hi(f,w,y)))),E)break;f=f.return}0<k.length&&(h=new g(h,v,null,n,c),d.push({event:h,listeners:k}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==_l&&(v=n.relatedTarget||n.fromElement)&&(Dn(v)||v[Zt]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Dn(v):null,v!==null&&(E=Yn(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(k=hc,w="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(k=mc,w="onPointerLeave",m="onPointerEnter",f="pointer"),E=g==null?h:er(g),y=v==null?h:er(v),h=new k(w,f+"leave",g,n,c),h.target=E,h.relatedTarget=y,w=null,Dn(c)===u&&(k=new k(m,f+"enter",v,n,c),k.target=y,k.relatedTarget=E,w=k),E=w,g&&v)t:{for(k=g,m=v,f=0,y=k;y;y=Jn(y))f++;for(y=0,w=m;w;w=Jn(w))y++;for(;0<f-y;)k=Jn(k),f--;for(;0<y-f;)m=Jn(m),y--;for(;f--;){if(k===m||m!==null&&k===m.alternate)break t;k=Jn(k),m=Jn(m)}k=null}else k=null;g!==null&&Pc(d,h,g,k,!1),v!==null&&E!==null&&Pc(d,E,v,k,!0)}}e:{if(h=u?er(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var N=Ky;else if(vc(h))if(Dd)N=Xy;else{N=qy;var O=Jy}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Qy);if(N&&(N=N(e,u))){Md(d,N,n,c);break e}O&&O(e,h,u),e==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&vl(h,"number",h.value)}switch(O=u?er(u):window,e){case"focusin":(vc(O)||O.contentEditable==="true")&&(Zn=O,jl=u,Xr=null);break;case"focusout":Xr=jl=Zn=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,_c(d,n,c);break;case"selectionchange":if(eg)break;case"keydown":case"keyup":_c(d,n,c)}var _;if(Fa)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Xn?Ad(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(jd&&n.locale!=="ko"&&(Xn||T!=="onCompositionStart"?T==="onCompositionEnd"&&Xn&&(_=Td()):(cn=c,La="value"in cn?cn.value:cn.textContent,Xn=!0)),O=Os(u,T),0<O.length&&(T=new pc(T,e,null,n,c),d.push({event:T,listeners:O}),_?T.data=_:(_=Id(n),_!==null&&(T.data=_)))),(_=Uy?Hy(e,n):Wy(e,n))&&(u=Os(u,"onBeforeInput"),0<u.length&&(c=new pc("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=_))}Wd(d,t)})}function hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Os(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=oi(e,n),s!=null&&r.unshift(hi(e,s,i)),s=oi(e,t),s!=null&&r.push(hi(e,s,i))),e=e.return}return r}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=oi(n,s),a!=null&&o.unshift(hi(n,a,l))):i||(a=oi(n,s),a!=null&&o.push(hi(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ig=/\r\n?/g,sg=/\u0000|\uFFFD/g;function Nc(e){return(typeof e=="string"?e:""+e).replace(ig,`
`).replace(sg,"")}function Wi(e,t,n){if(t=Nc(t),Nc(e)!==t&&n)throw Error(P(425))}function Ts(){}var Il=null,Ml=null;function Dl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bl=typeof setTimeout=="function"?setTimeout:void 0,og=typeof clearTimeout=="function"?clearTimeout:void 0,Oc=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof Oc<"u"?function(e){return Oc.resolve(null).then(e).catch(ag)}:bl;function ag(e){setTimeout(function(){throw e})}function Wo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ui(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ui(t)}function mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Cr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Cr,pi="__reactProps$"+Cr,Zt="__reactContainer$"+Cr,Rl="__reactEvents$"+Cr,ug="__reactListeners$"+Cr,cg="__reactHandles$"+Cr;function Dn(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zt]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tc(e);e!==null;){if(n=e[Rt])return n;e=Tc(e)}return t}e=n,n=e.parentNode}return null}function ji(e){return e=e[Rt]||e[Zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function oo(e){return e[pi]||null}var Ll=[],tr=-1;function Pn(e){return{current:e}}function ie(e){0>tr||(e.current=Ll[tr],Ll[tr]=null,tr--)}function ee(e,t){tr++,Ll[tr]=e.current,e.current=t}var xn={},be=Pn(xn),Ke=Pn(!1),$n=xn;function mr(e,t){var n=e.type.contextTypes;if(!n)return xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Je(e){return e=e.childContextTypes,e!=null}function js(){ie(Ke),ie(be)}function jc(e,t,n){if(be.current!==xn)throw Error(P(168));ee(be,t),ee(Ke,n)}function Yd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(P(108,Jm(e)||"Unknown",i));return ce({},n,r)}function As(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xn,$n=be.current,ee(be,e),ee(Ke,Ke.current),!0}function Ac(e,t,n){var r=e.stateNode;if(!r)throw Error(P(169));n?(e=Yd(e,t,$n),r.__reactInternalMemoizedMergedChildContext=e,ie(Ke),ie(be),ee(be,e)):ie(Ke),ee(Ke,n)}var Yt=null,lo=!1,Vo=!1;function Kd(e){Yt===null?Yt=[e]:Yt.push(e)}function fg(e){lo=!0,Kd(e)}function Nn(){if(!Vo&&Yt!==null){Vo=!0;var e=0,t=Z;try{var n=Yt;for(Z=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yt=null,lo=!1}catch(i){throw Yt!==null&&(Yt=Yt.slice(e+1)),vd(Ma,Nn),i}finally{Z=t,Vo=!1}}return null}var nr=[],rr=0,Is=null,Ms=0,ft=[],dt=0,Fn=null,Kt=1,Jt="";function An(e,t){nr[rr++]=Ms,nr[rr++]=Is,Is=e,Ms=t}function Jd(e,t,n){ft[dt++]=Kt,ft[dt++]=Jt,ft[dt++]=Fn,Fn=e;var r=Kt;e=Jt;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var s=32-Ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Kt=1<<32-Ot(t)+i|n<<i|r,Jt=s+e}else Kt=1<<s|n<<i|r,Jt=e}function Ua(e){e.return!==null&&(An(e,1),Jd(e,1,0))}function Ha(e){for(;e===Is;)Is=nr[--rr],nr[rr]=null,Ms=nr[--rr],nr[rr]=null;for(;e===Fn;)Fn=ft[--dt],ft[dt]=null,Jt=ft[--dt],ft[dt]=null,Kt=ft[--dt],ft[dt]=null}var rt=null,tt=null,oe=!1,Pt=null;function qd(e,t){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ic(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rt=e,tt=mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rt=e,tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fn!==null?{id:Kt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rt=e,tt=null,!0):!1;default:return!1}}function zl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $l(e){if(oe){var t=tt;if(t){var n=t;if(!Ic(e,t)){if(zl(e))throw Error(P(418));t=mn(n.nextSibling);var r=rt;t&&Ic(e,t)?qd(r,n):(e.flags=e.flags&-4097|2,oe=!1,rt=e)}}else{if(zl(e))throw Error(P(418));e.flags=e.flags&-4097|2,oe=!1,rt=e}}}function Mc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rt=e}function Vi(e){if(e!==rt)return!1;if(!oe)return Mc(e),oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dl(e.type,e.memoizedProps)),t&&(t=tt)){if(zl(e))throw Qd(),Error(P(418));for(;t;)qd(e,t),t=mn(t.nextSibling)}if(Mc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tt=mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tt=null}}else tt=rt?mn(e.stateNode.nextSibling):null;return!0}function Qd(){for(var e=tt;e;)e=mn(e.nextSibling)}function yr(){tt=rt=null,oe=!1}function Wa(e){Pt===null?Pt=[e]:Pt.push(e)}var dg=nn.ReactCurrentBatchConfig;function Dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dc(e){var t=e._init;return t(e._payload)}function Xd(e){function t(m,f){if(e){var y=m.deletions;y===null?(m.deletions=[f],m.flags|=16):y.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function i(m,f){return m=wn(m,f),m.index=0,m.sibling=null,m}function s(m,f,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<f?(m.flags|=2,f):y):(m.flags|=2,f)):(m.flags|=1048576,f)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,f,y,w){return f===null||f.tag!==6?(f=Zo(y,m.mode,w),f.return=m,f):(f=i(f,y),f.return=m,f)}function a(m,f,y,w){var N=y.type;return N===Qn?c(m,f,y.props.children,w,y.key):f!==null&&(f.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===on&&Dc(N)===f.type)?(w=i(f,y.props),w.ref=Dr(m,f,y),w.return=m,w):(w=ms(y.type,y.key,y.props,null,m.mode,w),w.ref=Dr(m,f,y),w.return=m,w)}function u(m,f,y,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=Go(y,m.mode,w),f.return=m,f):(f=i(f,y.children||[]),f.return=m,f)}function c(m,f,y,w,N){return f===null||f.tag!==7?(f=zn(y,m.mode,w,N),f.return=m,f):(f=i(f,y),f.return=m,f)}function d(m,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Zo(""+f,m.mode,y),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case bi:return y=ms(f.type,f.key,f.props,null,m.mode,y),y.ref=Dr(m,null,f),y.return=m,y;case qn:return f=Go(f,m.mode,y),f.return=m,f;case on:var w=f._init;return d(m,w(f._payload),y)}if(Br(f)||Tr(f))return f=zn(f,m.mode,y,null),f.return=m,f;Yi(m,f)}return null}function h(m,f,y,w){var N=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(m,f,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bi:return y.key===N?a(m,f,y,w):null;case qn:return y.key===N?u(m,f,y,w):null;case on:return N=y._init,h(m,f,N(y._payload),w)}if(Br(y)||Tr(y))return N!==null?null:c(m,f,y,w,null);Yi(m,y)}return null}function g(m,f,y,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(y)||null,l(f,m,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bi:return m=m.get(w.key===null?y:w.key)||null,a(f,m,w,N);case qn:return m=m.get(w.key===null?y:w.key)||null,u(f,m,w,N);case on:var O=w._init;return g(m,f,y,O(w._payload),N)}if(Br(w)||Tr(w))return m=m.get(y)||null,c(f,m,w,N,null);Yi(f,w)}return null}function v(m,f,y,w){for(var N=null,O=null,_=f,T=f=0,U=null;_!==null&&T<y.length;T++){_.index>T?(U=_,_=null):U=_.sibling;var A=h(m,_,y[T],w);if(A===null){_===null&&(_=U);break}e&&_&&A.alternate===null&&t(m,_),f=s(A,f,T),O===null?N=A:O.sibling=A,O=A,_=U}if(T===y.length)return n(m,_),oe&&An(m,T),N;if(_===null){for(;T<y.length;T++)_=d(m,y[T],w),_!==null&&(f=s(_,f,T),O===null?N=_:O.sibling=_,O=_);return oe&&An(m,T),N}for(_=r(m,_);T<y.length;T++)U=g(_,m,T,y[T],w),U!==null&&(e&&U.alternate!==null&&_.delete(U.key===null?T:U.key),f=s(U,f,T),O===null?N=U:O.sibling=U,O=U);return e&&_.forEach(function(D){return t(m,D)}),oe&&An(m,T),N}function k(m,f,y,w){var N=Tr(y);if(typeof N!="function")throw Error(P(150));if(y=N.call(y),y==null)throw Error(P(151));for(var O=N=null,_=f,T=f=0,U=null,A=y.next();_!==null&&!A.done;T++,A=y.next()){_.index>T?(U=_,_=null):U=_.sibling;var D=h(m,_,A.value,w);if(D===null){_===null&&(_=U);break}e&&_&&D.alternate===null&&t(m,_),f=s(D,f,T),O===null?N=D:O.sibling=D,O=D,_=U}if(A.done)return n(m,_),oe&&An(m,T),N;if(_===null){for(;!A.done;T++,A=y.next())A=d(m,A.value,w),A!==null&&(f=s(A,f,T),O===null?N=A:O.sibling=A,O=A);return oe&&An(m,T),N}for(_=r(m,_);!A.done;T++,A=y.next())A=g(_,m,T,A.value,w),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?T:A.key),f=s(A,f,T),O===null?N=A:O.sibling=A,O=A);return e&&_.forEach(function(Y){return t(m,Y)}),oe&&An(m,T),N}function E(m,f,y,w){if(typeof y=="object"&&y!==null&&y.type===Qn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case bi:e:{for(var N=y.key,O=f;O!==null;){if(O.key===N){if(N=y.type,N===Qn){if(O.tag===7){n(m,O.sibling),f=i(O,y.props.children),f.return=m,m=f;break e}}else if(O.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===on&&Dc(N)===O.type){n(m,O.sibling),f=i(O,y.props),f.ref=Dr(m,O,y),f.return=m,m=f;break e}n(m,O);break}else t(m,O);O=O.sibling}y.type===Qn?(f=zn(y.props.children,m.mode,w,y.key),f.return=m,m=f):(w=ms(y.type,y.key,y.props,null,m.mode,w),w.ref=Dr(m,f,y),w.return=m,m=w)}return o(m);case qn:e:{for(O=y.key;f!==null;){if(f.key===O)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(m,f.sibling),f=i(f,y.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=Go(y,m.mode,w),f.return=m,m=f}return o(m);case on:return O=y._init,E(m,f,O(y._payload),w)}if(Br(y))return v(m,f,y,w);if(Tr(y))return k(m,f,y,w);Yi(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(m,f.sibling),f=i(f,y),f.return=m,m=f):(n(m,f),f=Zo(y,m.mode,w),f.return=m,m=f),o(m)):n(m,f)}return E}var gr=Xd(!0),Zd=Xd(!1),Ds=Pn(null),bs=null,ir=null,Va=null;function Ya(){Va=ir=bs=null}function Ka(e){var t=Ds.current;ie(Ds),e._currentValue=t}function Fl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fr(e,t){bs=e,Va=ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(Va!==e)if(e={context:e,memoizedValue:t,next:null},ir===null){if(bs===null)throw Error(P(308));ir=e,bs.dependencies={lanes:0,firstContext:e}}else ir=ir.next=e;return t}var bn=null;function Ja(e){bn===null?bn=[e]:bn.push(e)}function Gd(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ja(t)):(n.next=i.next,i.next=n),t.interleaved=n,Gt(e,r)}function Gt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ln=!1;function qa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Gt(e,n)}return i=r.interleaved,i===null?(t.next=t,Ja(r)):(t.next=i.next,i.next=t),r.interleaved=t,Gt(e,n)}function us(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Da(e,n)}}function bc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Rs(e,t,n,r){var i=e.updateQueue;ln=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,g=l.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,k=l;switch(h=t,g=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){d=v.call(g,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,h=typeof v=="function"?v.call(g,d,h):v,h==null)break e;d=ce({},d,h);break e;case 2:ln=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=d):c=c.next=g,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Un|=o,e.lanes=o,e.memoizedState=d}}function Rc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(P(191,i));i.call(r)}}}var Ai={},zt=Pn(Ai),mi=Pn(Ai),yi=Pn(Ai);function Rn(e){if(e===Ai)throw Error(P(174));return e}function Qa(e,t){switch(ee(yi,t),ee(mi,e),ee(zt,Ai),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sl(t,e)}ie(zt),ee(zt,t)}function vr(){ie(zt),ie(mi),ie(yi)}function th(e){Rn(yi.current);var t=Rn(zt.current),n=Sl(t,e.type);t!==n&&(ee(mi,e),ee(zt,n))}function Xa(e){mi.current===e&&(ie(zt),ie(mi))}var ae=Pn(0);function Ls(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yo=[];function Za(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var cs=nn.ReactCurrentDispatcher,Ko=nn.ReactCurrentBatchConfig,Bn=0,ue=null,ke=null,Ee=null,zs=!1,Zr=!1,gi=0,hg=0;function je(){throw Error(P(321))}function Ga(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function eu(e,t,n,r,i,s){if(Bn=s,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=e===null||e.memoizedState===null?gg:vg,e=n(r,i),Zr){s=0;do{if(Zr=!1,gi=0,25<=s)throw Error(P(301));s+=1,Ee=ke=null,t.updateQueue=null,cs.current=wg,e=n(r,i)}while(Zr)}if(cs.current=$s,t=ke!==null&&ke.next!==null,Bn=0,Ee=ke=ue=null,zs=!1,t)throw Error(P(300));return e}function tu(){var e=gi!==0;return gi=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ue.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function gt(){if(ke===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Ee===null?ue.memoizedState:Ee.next;if(t!==null)Ee=t,ke=e;else{if(e===null)throw Error(P(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ee===null?ue.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function vi(e,t){return typeof t=="function"?t(e):t}function Jo(e){var t=gt(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Bn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ue.lanes|=c,Un|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,jt(r,t.memoizedState)||(Ye=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ue.lanes|=s,Un|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function qo(e){var t=gt(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);jt(s,t.memoizedState)||(Ye=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function nh(){}function rh(e,t){var n=ue,r=gt(),i=t(),s=!jt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ye=!0),r=r.queue,nu(oh.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,wi(9,sh.bind(null,n,r,i,t),void 0,null),Ce===null)throw Error(P(349));Bn&30||ih(n,t,i)}return i}function ih(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sh(e,t,n,r){t.value=n,t.getSnapshot=r,lh(t)&&ah(e)}function oh(e,t,n){return n(function(){lh(t)&&ah(e)})}function lh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function ah(e){var t=Gt(e,1);t!==null&&Tt(t,e,1,-1)}function Lc(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=yg.bind(null,ue,e),[t.memoizedState,e]}function wi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function uh(){return gt().memoizedState}function fs(e,t,n,r){var i=Dt();ue.flags|=e,i.memoizedState=wi(1|t,n,void 0,r===void 0?null:r)}function ao(e,t,n,r){var i=gt();r=r===void 0?null:r;var s=void 0;if(ke!==null){var o=ke.memoizedState;if(s=o.destroy,r!==null&&Ga(r,o.deps)){i.memoizedState=wi(t,n,s,r);return}}ue.flags|=e,i.memoizedState=wi(1|t,n,s,r)}function zc(e,t){return fs(8390656,8,e,t)}function nu(e,t){return ao(2048,8,e,t)}function ch(e,t){return ao(4,2,e,t)}function fh(e,t){return ao(4,4,e,t)}function dh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hh(e,t,n){return n=n!=null?n.concat([e]):null,ao(4,4,dh.bind(null,t,e),n)}function ru(){}function ph(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mh(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function yh(e,t,n){return Bn&21?(jt(n,t)||(n=kd(),ue.lanes|=n,Un|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=n)}function pg(e,t){var n=Z;Z=n!==0&&4>n?n:4,e(!0);var r=Ko.transition;Ko.transition={};try{e(!1),t()}finally{Z=n,Ko.transition=r}}function gh(){return gt().memoizedState}function mg(e,t,n){var r=vn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vh(e))wh(t,n);else if(n=Gd(e,t,n,r),n!==null){var i=Fe();Tt(n,e,r,i),Sh(n,t,r)}}function yg(e,t,n){var r=vn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vh(e))wh(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,jt(l,o)){var a=t.interleaved;a===null?(i.next=i,Ja(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Gd(e,t,i,r),n!==null&&(i=Fe(),Tt(n,e,r,i),Sh(n,t,r))}}function vh(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function wh(e,t){Zr=zs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Sh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Da(e,n)}}var $s={readContext:yt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},gg={readContext:yt,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:zc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,fs(4194308,4,dh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return fs(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mg.bind(null,ue,e),[r.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:Lc,useDebugValue:ru,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=Lc(!1),t=e[0];return e=pg.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ue,i=Dt();if(oe){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Ce===null)throw Error(P(349));Bn&30||ih(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,zc(oh.bind(null,r,s,e),[e]),r.flags|=2048,wi(9,sh.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Dt(),t=Ce.identifierPrefix;if(oe){var n=Jt,r=Kt;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vg={readContext:yt,useCallback:ph,useContext:yt,useEffect:nu,useImperativeHandle:hh,useInsertionEffect:ch,useLayoutEffect:fh,useMemo:mh,useReducer:Jo,useRef:uh,useState:function(){return Jo(vi)},useDebugValue:ru,useDeferredValue:function(e){var t=gt();return yh(t,ke.memoizedState,e)},useTransition:function(){var e=Jo(vi)[0],t=gt().memoizedState;return[e,t]},useMutableSource:nh,useSyncExternalStore:rh,useId:gh,unstable_isNewReconciler:!1},wg={readContext:yt,useCallback:ph,useContext:yt,useEffect:nu,useImperativeHandle:hh,useInsertionEffect:ch,useLayoutEffect:fh,useMemo:mh,useReducer:qo,useRef:uh,useState:function(){return qo(vi)},useDebugValue:ru,useDeferredValue:function(e){var t=gt();return ke===null?t.memoizedState=e:yh(t,ke.memoizedState,e)},useTransition:function(){var e=qo(vi)[0],t=gt().memoizedState;return[e,t]},useMutableSource:nh,useSyncExternalStore:rh,useId:gh,unstable_isNewReconciler:!1};function _t(e,t){if(e&&e.defaultProps){t=ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Bl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var uo={isMounted:function(e){return(e=e._reactInternals)?Yn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=vn(e),s=qt(r,i);s.payload=t,n!=null&&(s.callback=n),t=yn(e,s,i),t!==null&&(Tt(t,e,i,r),us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Fe(),i=vn(e),s=qt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=yn(e,s,i),t!==null&&(Tt(t,e,i,r),us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Fe(),r=vn(e),i=qt(n,r);i.tag=2,t!=null&&(i.callback=t),t=yn(e,i,r),t!==null&&(Tt(t,e,r,n),us(t,e,r))}};function $c(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!fi(n,r)||!fi(i,s):!0}function kh(e,t,n){var r=!1,i=xn,s=t.contextType;return typeof s=="object"&&s!==null?s=yt(s):(i=Je(t)?$n:be.current,r=t.contextTypes,s=(r=r!=null)?mr(e,i):xn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Fc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&uo.enqueueReplaceState(t,t.state,null)}function Ul(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},qa(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=yt(s):(s=Je(t)?$n:be.current,i.context=mr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Bl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&uo.enqueueReplaceState(i,i.state,null),Rs(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function wr(e,t){try{var n="",r=t;do n+=Km(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Hl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Sg=typeof WeakMap=="function"?WeakMap:Map;function xh(e,t,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,Gl=r),Hl(e,t)},n}function _h(e,t,n){n=qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Hl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hl(e,t),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Bc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Sg;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Dg.bind(null,e,t,n),t.then(e,e))}function Uc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qt(-1,1),t.tag=2,yn(n,t,1))),n.lanes|=1),e)}var kg=nn.ReactCurrentOwner,Ye=!1;function ze(e,t,n,r){t.child=e===null?Zd(t,null,n,r):gr(t,e.child,n,r)}function Wc(e,t,n,r,i){n=n.render;var s=t.ref;return fr(t,i),r=eu(e,t,n,r,s,i),n=tu(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,en(e,t,i)):(oe&&n&&Ua(t),t.flags|=1,ze(e,t,r,i),t.child)}function Vc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!fu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Eh(e,t,s,r,i)):(e=ms(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fi,n(o,r)&&e.ref===t.ref)return en(e,t,i)}return t.flags|=1,e=wn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Eh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(fi(s,r)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,en(e,t,i)}return Wl(e,t,n,r,i)}function Ch(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(or,et),et|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(or,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ee(or,et),et|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ee(or,et),et|=r;return ze(e,t,i,n),t.child}function Ph(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Wl(e,t,n,r,i){var s=Je(n)?$n:be.current;return s=mr(t,s),fr(t,i),n=eu(e,t,n,r,s,i),r=tu(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,en(e,t,i)):(oe&&r&&Ua(t),t.flags|=1,ze(e,t,n,i),t.child)}function Yc(e,t,n,r,i){if(Je(n)){var s=!0;As(t)}else s=!1;if(fr(t,i),t.stateNode===null)ds(e,t),kh(t,n,r),Ul(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=Je(n)?$n:be.current,u=mr(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Fc(t,o,r,u),ln=!1;var h=t.memoizedState;o.state=h,Rs(t,r,o,i),a=t.memoizedState,l!==r||h!==a||Ke.current||ln?(typeof c=="function"&&(Bl(t,n,c,r),a=t.memoizedState),(l=ln||$c(t,n,l,r,h,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,eh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:_t(t.type,l),o.props=u,d=t.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=yt(a):(a=Je(n)?$n:be.current,a=mr(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&Fc(t,o,r,a),ln=!1,h=t.memoizedState,o.state=h,Rs(t,r,o,i);var v=t.memoizedState;l!==d||h!==v||Ke.current||ln?(typeof g=="function"&&(Bl(t,n,g,r),v=t.memoizedState),(u=ln||$c(t,n,u,r,h,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Vl(e,t,n,r,s,i)}function Vl(e,t,n,r,i,s){Ph(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Ac(t,n,!1),en(e,t,s);r=t.stateNode,kg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=gr(t,e.child,null,s),t.child=gr(t,null,l,s)):ze(e,t,l,s),t.memoizedState=r.state,i&&Ac(t,n,!0),t.child}function Nh(e){var t=e.stateNode;t.pendingContext?jc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jc(e,t.context,!1),Qa(e,t.containerInfo)}function Kc(e,t,n,r,i){return yr(),Wa(i),t.flags|=256,ze(e,t,n,r),t.child}var Yl={dehydrated:null,treeContext:null,retryLane:0};function Kl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oh(e,t,n){var r=t.pendingProps,i=ae.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ee(ae,i&1),e===null)return $l(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ho(o,r,0,null),e=zn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Kl(n),t.memoizedState=Yl,e):iu(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return xg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=wn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=wn(l,s):(s=zn(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Kl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Yl,r}return s=e.child,e=s.sibling,r=wn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function iu(e,t){return t=ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ki(e,t,n,r){return r!==null&&Wa(r),gr(t,e.child,null,n),e=iu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Qo(Error(P(422))),Ki(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ho({mode:"visible",children:r.children},i,0,null),s=zn(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&gr(t,e.child,null,o),t.child.memoizedState=Kl(o),t.memoizedState=Yl,s);if(!(t.mode&1))return Ki(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(P(419)),r=Qo(s,r,void 0),Ki(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ye||l){if(r=Ce,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gt(e,i),Tt(r,e,i,-1))}return cu(),r=Qo(Error(P(421))),Ki(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=bg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,tt=mn(i.nextSibling),rt=t,oe=!0,Pt=null,e!==null&&(ft[dt++]=Kt,ft[dt++]=Jt,ft[dt++]=Fn,Kt=e.id,Jt=e.overflow,Fn=t),t=iu(t,r.children),t.flags|=4096,t)}function Jc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fl(e.return,t,n)}function Xo(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Th(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ze(e,t,r.children,n),r=ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jc(e,n,t);else if(e.tag===19)Jc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ee(ae,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ls(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ls(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xo(t,!0,n,null,s);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ds(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function en(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Un|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=wn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=wn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _g(e,t,n){switch(t.tag){case 3:Nh(t),yr();break;case 5:th(t);break;case 1:Je(t.type)&&As(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ee(Ds,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ee(ae,ae.current&1),t.flags|=128,null):n&t.child.childLanes?Oh(e,t,n):(ee(ae,ae.current&1),e=en(e,t,n),e!==null?e.sibling:null);ee(ae,ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Th(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ee(ae,ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Ch(e,t,n)}return en(e,t,n)}var jh,Jl,Ah,Ih;jh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jl=function(){};Ah=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Rn(zt.current);var s=null;switch(n){case"input":i=yl(e,i),r=yl(e,r),s=[];break;case"select":i=ce({},i,{value:void 0}),r=ce({},r,{value:void 0}),s=[];break;case"textarea":i=wl(e,i),r=wl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ts)}kl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ii.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ii.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&re("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Ih=function(e,t,n,r){n!==r&&(t.flags|=4)};function br(e,t){if(!oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ae(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Eg(e,t,n){var r=t.pendingProps;switch(Ha(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(t),null;case 1:return Je(t.type)&&js(),Ae(t),null;case 3:return r=t.stateNode,vr(),ie(Ke),ie(be),Za(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&(na(Pt),Pt=null))),Jl(e,t),Ae(t),null;case 5:Xa(t);var i=Rn(yi.current);if(n=t.type,e!==null&&t.stateNode!=null)Ah(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(P(166));return Ae(t),null}if(e=Rn(zt.current),Vi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Rt]=t,r[pi]=s,e=(t.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<Hr.length;i++)re(Hr[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":rc(r,s),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},re("invalid",r);break;case"textarea":sc(r,s),re("invalid",r)}kl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Wi(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Wi(r.textContent,l,e),i=["children",""+l]):ii.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&re("scroll",r)}switch(n){case"input":Ri(r),ic(r,s,!0);break;case"textarea":Ri(r),oc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ts)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=od(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Rt]=t,e[pi]=r,jh(e,t,!1,!1),t.stateNode=e;e:{switch(o=xl(n,r),n){case"dialog":re("cancel",e),re("close",e),i=r;break;case"iframe":case"object":case"embed":re("load",e),i=r;break;case"video":case"audio":for(i=0;i<Hr.length;i++)re(Hr[i],e);i=r;break;case"source":re("error",e),i=r;break;case"img":case"image":case"link":re("error",e),re("load",e),i=r;break;case"details":re("toggle",e),i=r;break;case"input":rc(e,r),i=yl(e,r),re("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ce({},r,{value:void 0}),re("invalid",e);break;case"textarea":sc(e,r),i=wl(e,r),re("invalid",e);break;default:i=r}kl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?ud(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ld(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&si(e,a):typeof a=="number"&&si(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ii.hasOwnProperty(s)?a!=null&&s==="onScroll"&&re("scroll",e):a!=null&&Oa(e,s,a,o))}switch(n){case"input":Ri(e),ic(e,r,!1);break;case"textarea":Ri(e),oc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?lr(e,!!r.multiple,s,!1):r.defaultValue!=null&&lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ae(t),null;case 6:if(e&&t.stateNode!=null)Ih(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(P(166));if(n=Rn(yi.current),Rn(zt.current),Vi(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rt]=t,(s=r.nodeValue!==n)&&(e=rt,e!==null))switch(e.tag){case 3:Wi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wi(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=t,t.stateNode=r}return Ae(t),null;case 13:if(ie(ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oe&&tt!==null&&t.mode&1&&!(t.flags&128))Qd(),yr(),t.flags|=98560,s=!1;else if(s=Vi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(P(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[Rt]=t}else yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ae(t),s=!1}else Pt!==null&&(na(Pt),Pt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ae.current&1?xe===0&&(xe=3):cu())),t.updateQueue!==null&&(t.flags|=4),Ae(t),null);case 4:return vr(),Jl(e,t),e===null&&di(t.stateNode.containerInfo),Ae(t),null;case 10:return Ka(t.type._context),Ae(t),null;case 17:return Je(t.type)&&js(),Ae(t),null;case 19:if(ie(ae),s=t.memoizedState,s===null)return Ae(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)br(s,!1);else{if(xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ls(e),o!==null){for(t.flags|=128,br(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ee(ae,ae.current&1|2),t.child}e=e.sibling}s.tail!==null&&he()>Sr&&(t.flags|=128,r=!0,br(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ls(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),br(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!oe)return Ae(t),null}else 2*he()-s.renderingStartTime>Sr&&n!==1073741824&&(t.flags|=128,r=!0,br(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=he(),t.sibling=null,n=ae.current,ee(ae,r?n&1|2:n&1),t):(Ae(t),null);case 22:case 23:return uu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?et&1073741824&&(Ae(t),t.subtreeFlags&6&&(t.flags|=8192)):Ae(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Cg(e,t){switch(Ha(t),t.tag){case 1:return Je(t.type)&&js(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vr(),ie(Ke),ie(be),Za(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xa(t),null;case 13:if(ie(ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(ae),null;case 4:return vr(),null;case 10:return Ka(t.type._context),null;case 22:case 23:return uu(),null;case 24:return null;default:return null}}var Ji=!1,De=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,I=null;function sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(e,t,r)}else n.current=null}function ql(e,t,n){try{n()}catch(r){de(e,t,r)}}var qc=!1;function Ng(e,t){if(Il=Ps,e=Ld(),Ba(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===e)break t;if(h===n&&++u===i&&(l=o),h===s&&++c===r&&(a=o),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ml={focusedElem:e,selectionRange:n},Ps=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,E=v.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?k:_t(t.type,k),E);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(w){de(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return v=qc,qc=!1,v}function Gr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&ql(t,n,s)}i=i.next}while(i!==r)}}function co(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ql(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mh(e){var t=e.alternate;t!==null&&(e.alternate=null,Mh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[pi],delete t[Rl],delete t[ug],delete t[cg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dh(e){return e.tag===5||e.tag===3||e.tag===4}function Qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ts));else if(r!==4&&(e=e.child,e!==null))for(Xl(e,t,n),e=e.sibling;e!==null;)Xl(e,t,n),e=e.sibling}function Zl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Zl(e,t,n),e=e.sibling;e!==null;)Zl(e,t,n),e=e.sibling}var Pe=null,Et=!1;function sn(e,t,n){for(n=n.child;n!==null;)bh(e,t,n),n=n.sibling}function bh(e,t,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(no,n)}catch{}switch(n.tag){case 5:De||sr(n,t);case 6:var r=Pe,i=Et;Pe=null,sn(e,t,n),Pe=r,Et=i,Pe!==null&&(Et?(e=Pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(Et?(e=Pe,n=n.stateNode,e.nodeType===8?Wo(e.parentNode,n):e.nodeType===1&&Wo(e,n),ui(e)):Wo(Pe,n.stateNode));break;case 4:r=Pe,i=Et,Pe=n.stateNode.containerInfo,Et=!0,sn(e,t,n),Pe=r,Et=i;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ql(n,t,o),i=i.next}while(i!==r)}sn(e,t,n);break;case 1:if(!De&&(sr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){de(n,t,l)}sn(e,t,n);break;case 21:sn(e,t,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,sn(e,t,n),De=r):sn(e,t,n);break;default:sn(e,t,n)}}function Xc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pg),t.forEach(function(r){var i=Rg.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,Et=!1;break e;case 3:Pe=l.stateNode.containerInfo,Et=!0;break e;case 4:Pe=l.stateNode.containerInfo,Et=!0;break e}l=l.return}if(Pe===null)throw Error(P(160));bh(s,o,i),Pe=null,Et=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){de(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rh(t,e),t=t.sibling}function Rh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),Mt(e),r&4){try{Gr(3,e,e.return),co(3,e)}catch(k){de(e,e.return,k)}try{Gr(5,e,e.return)}catch(k){de(e,e.return,k)}}break;case 1:xt(t,e),Mt(e),r&512&&n!==null&&sr(n,n.return);break;case 5:if(xt(t,e),Mt(e),r&512&&n!==null&&sr(n,n.return),e.flags&32){var i=e.stateNode;try{si(i,"")}catch(k){de(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&id(i,s),xl(l,o);var u=xl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],d=a[o+1];c==="style"?ud(i,d):c==="dangerouslySetInnerHTML"?ld(i,d):c==="children"?si(i,d):Oa(i,c,d,u)}switch(l){case"input":gl(i,s);break;case"textarea":sd(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?lr(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?lr(i,!!s.multiple,s.defaultValue,!0):lr(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(k){de(e,e.return,k)}}break;case 6:if(xt(t,e),Mt(e),r&4){if(e.stateNode===null)throw Error(P(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){de(e,e.return,k)}}break;case 3:if(xt(t,e),Mt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ui(t.containerInfo)}catch(k){de(e,e.return,k)}break;case 4:xt(t,e),Mt(e);break;case 13:xt(t,e),Mt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lu=he())),r&4&&Xc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(De=(u=De)||c,xt(t,e),De=u):xt(t,e),Mt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(I=e,c=e.child;c!==null;){for(d=I=c;I!==null;){switch(h=I,g=h.child,h.tag){case 0:case 11:case 14:case 15:Gr(4,h,h.return);break;case 1:sr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){de(r,n,k)}}break;case 5:sr(h,h.return);break;case 22:if(h.memoizedState!==null){Gc(d);continue}}g!==null?(g.return=h,I=g):Gc(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=ad("display",o))}catch(k){de(e,e.return,k)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(k){de(e,e.return,k)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xt(t,e),Mt(e),r&4&&Xc(e);break;case 21:break;default:xt(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dh(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(si(i,""),r.flags&=-33);var s=Qc(e);Zl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Qc(e);Xl(e,l,o);break;default:throw Error(P(161))}}catch(a){de(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Og(e,t,n){I=e,Lh(e)}function Lh(e,t,n){for(var r=(e.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ji;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||De;l=Ji;var u=De;if(Ji=o,(De=a)&&!u)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?ef(i):a!==null?(a.return=o,I=a):ef(i);for(;s!==null;)I=s,Lh(s),s=s.sibling;I=i,Ji=l,De=u}Zc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):Zc(e)}}function Zc(e){for(;I!==null;){var t=I;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||co(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!De)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:_t(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Rc(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Rc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&ui(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}De||t.flags&512&&Ql(t)}catch(h){de(t,t.return,h)}}if(t===e){I=null;break}if(n=t.sibling,n!==null){n.return=t.return,I=n;break}I=t.return}}function Gc(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var n=t.sibling;if(n!==null){n.return=t.return,I=n;break}I=t.return}}function ef(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{co(4,t)}catch(a){de(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){de(t,i,a)}}var s=t.return;try{Ql(t)}catch(a){de(t,s,a)}break;case 5:var o=t.return;try{Ql(t)}catch(a){de(t,o,a)}}}catch(a){de(t,t.return,a)}if(t===e){I=null;break}var l=t.sibling;if(l!==null){l.return=t.return,I=l;break}I=t.return}}var Tg=Math.ceil,Fs=nn.ReactCurrentDispatcher,su=nn.ReactCurrentOwner,mt=nn.ReactCurrentBatchConfig,V=0,Ce=null,ge=null,Ne=0,et=0,or=Pn(0),xe=0,Si=null,Un=0,fo=0,ou=0,ei=null,Ve=null,lu=0,Sr=1/0,Wt=null,Bs=!1,Gl=null,gn=null,qi=!1,fn=null,Us=0,ti=0,ea=null,hs=-1,ps=0;function Fe(){return V&6?he():hs!==-1?hs:hs=he()}function vn(e){return e.mode&1?V&2&&Ne!==0?Ne&-Ne:dg.transition!==null?(ps===0&&(ps=kd()),ps):(e=Z,e!==0||(e=window.event,e=e===void 0?16:Od(e.type)),e):1}function Tt(e,t,n,r){if(50<ti)throw ti=0,ea=null,Error(P(185));Oi(e,n,r),(!(V&2)||e!==Ce)&&(e===Ce&&(!(V&2)&&(fo|=n),xe===4&&un(e,Ne)),qe(e,r),n===1&&V===0&&!(t.mode&1)&&(Sr=he()+500,lo&&Nn()))}function qe(e,t){var n=e.callbackNode;dy(e,t);var r=Cs(e,e===Ce?Ne:0);if(r===0)n!==null&&uc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&uc(n),t===1)e.tag===0?fg(tf.bind(null,e)):Kd(tf.bind(null,e)),lg(function(){!(V&6)&&Nn()}),n=null;else{switch(xd(r)){case 1:n=Ma;break;case 4:n=wd;break;case 16:n=Es;break;case 536870912:n=Sd;break;default:n=Es}n=Vh(n,zh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zh(e,t){if(hs=-1,ps=0,V&6)throw Error(P(327));var n=e.callbackNode;if(dr()&&e.callbackNode!==n)return null;var r=Cs(e,e===Ce?Ne:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Hs(e,r);else{t=r;var i=V;V|=2;var s=Fh();(Ce!==e||Ne!==t)&&(Wt=null,Sr=he()+500,Ln(e,t));do try{Ig();break}catch(l){$h(e,l)}while(!0);Ya(),Fs.current=s,V=i,ge!==null?t=0:(Ce=null,Ne=0,t=xe)}if(t!==0){if(t===2&&(i=Nl(e),i!==0&&(r=i,t=ta(e,i))),t===1)throw n=Si,Ln(e,0),un(e,r),qe(e,he()),n;if(t===6)un(e,r);else{if(i=e.current.alternate,!(r&30)&&!jg(i)&&(t=Hs(e,r),t===2&&(s=Nl(e),s!==0&&(r=s,t=ta(e,s))),t===1))throw n=Si,Ln(e,0),un(e,r),qe(e,he()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(P(345));case 2:In(e,Ve,Wt);break;case 3:if(un(e,r),(r&130023424)===r&&(t=lu+500-he(),10<t)){if(Cs(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Fe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=bl(In.bind(null,e,Ve,Wt),t);break}In(e,Ve,Wt);break;case 4:if(un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ot(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=he()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tg(r/1960))-r,10<r){e.timeoutHandle=bl(In.bind(null,e,Ve,Wt),r);break}In(e,Ve,Wt);break;case 5:In(e,Ve,Wt);break;default:throw Error(P(329))}}}return qe(e,he()),e.callbackNode===n?zh.bind(null,e):null}function ta(e,t){var n=ei;return e.current.memoizedState.isDehydrated&&(Ln(e,t).flags|=256),e=Hs(e,t),e!==2&&(t=Ve,Ve=n,t!==null&&na(t)),e}function na(e){Ve===null?Ve=e:Ve.push.apply(Ve,e)}function jg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function un(e,t){for(t&=~ou,t&=~fo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ot(t),r=1<<n;e[n]=-1,t&=~r}}function tf(e){if(V&6)throw Error(P(327));dr();var t=Cs(e,0);if(!(t&1))return qe(e,he()),null;var n=Hs(e,t);if(e.tag!==0&&n===2){var r=Nl(e);r!==0&&(t=r,n=ta(e,r))}if(n===1)throw n=Si,Ln(e,0),un(e,t),qe(e,he()),n;if(n===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,In(e,Ve,Wt),qe(e,he()),null}function au(e,t){var n=V;V|=1;try{return e(t)}finally{V=n,V===0&&(Sr=he()+500,lo&&Nn())}}function Hn(e){fn!==null&&fn.tag===0&&!(V&6)&&dr();var t=V;V|=1;var n=mt.transition,r=Z;try{if(mt.transition=null,Z=1,e)return e()}finally{Z=r,mt.transition=n,V=t,!(V&6)&&Nn()}}function uu(){et=or.current,ie(or)}function Ln(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,og(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(Ha(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&js();break;case 3:vr(),ie(Ke),ie(be),Za();break;case 5:Xa(r);break;case 4:vr();break;case 13:ie(ae);break;case 19:ie(ae);break;case 10:Ka(r.type._context);break;case 22:case 23:uu()}n=n.return}if(Ce=e,ge=e=wn(e.current,null),Ne=et=t,xe=0,Si=null,ou=fo=Un=0,Ve=ei=null,bn!==null){for(t=0;t<bn.length;t++)if(n=bn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bn=null}return e}function $h(e,t){do{var n=ge;try{if(Ya(),cs.current=$s,zs){for(var r=ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zs=!1}if(Bn=0,Ee=ke=ue=null,Zr=!1,gi=0,su.current=null,n===null||n.return===null){xe=1,Si=t,ge=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=Ne,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Uc(o);if(g!==null){g.flags&=-257,Hc(g,o,l,s,t),g.mode&1&&Bc(s,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var k=new Set;k.add(a),t.updateQueue=k}else v.add(a);break e}else{if(!(t&1)){Bc(s,u,t),cu();break e}a=Error(P(426))}}else if(oe&&l.mode&1){var E=Uc(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Hc(E,o,l,s,t),Wa(wr(a,l));break e}}s=a=wr(a,l),xe!==4&&(xe=2),ei===null?ei=[s]:ei.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=xh(s,a,t);bc(s,m);break e;case 1:l=a;var f=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(gn===null||!gn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=_h(s,l,t);bc(s,w);break e}}s=s.return}while(s!==null)}Uh(n)}catch(N){t=N,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function Fh(){var e=Fs.current;return Fs.current=$s,e===null?$s:e}function cu(){(xe===0||xe===3||xe===2)&&(xe=4),Ce===null||!(Un&268435455)&&!(fo&268435455)||un(Ce,Ne)}function Hs(e,t){var n=V;V|=2;var r=Fh();(Ce!==e||Ne!==t)&&(Wt=null,Ln(e,t));do try{Ag();break}catch(i){$h(e,i)}while(!0);if(Ya(),V=n,Fs.current=r,ge!==null)throw Error(P(261));return Ce=null,Ne=0,xe}function Ag(){for(;ge!==null;)Bh(ge)}function Ig(){for(;ge!==null&&!ry();)Bh(ge)}function Bh(e){var t=Wh(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?Uh(e):ge=t,su.current=null}function Uh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Cg(n,t),n!==null){n.flags&=32767,ge=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xe=6,ge=null;return}}else if(n=Eg(n,t,et),n!==null){ge=n;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);xe===0&&(xe=5)}function In(e,t,n){var r=Z,i=mt.transition;try{mt.transition=null,Z=1,Mg(e,t,n,r)}finally{mt.transition=i,Z=r}return null}function Mg(e,t,n,r){do dr();while(fn!==null);if(V&6)throw Error(P(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(hy(e,s),e===Ce&&(ge=Ce=null,Ne=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qi||(qi=!0,Vh(Es,function(){return dr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mt.transition,mt.transition=null;var o=Z;Z=1;var l=V;V|=4,su.current=null,Ng(e,n),Rh(n,e),Gy(Ml),Ps=!!Il,Ml=Il=null,e.current=n,Og(n),iy(),V=l,Z=o,mt.transition=s}else e.current=n;if(qi&&(qi=!1,fn=e,Us=i),s=e.pendingLanes,s===0&&(gn=null),ly(n.stateNode),qe(e,he()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bs)throw Bs=!1,e=Gl,Gl=null,e;return Us&1&&e.tag!==0&&dr(),s=e.pendingLanes,s&1?e===ea?ti++:(ti=0,ea=e):ti=0,Nn(),null}function dr(){if(fn!==null){var e=xd(Us),t=mt.transition,n=Z;try{if(mt.transition=null,Z=16>e?16:e,fn===null)var r=!1;else{if(e=fn,fn=null,Us=0,V&6)throw Error(P(331));var i=V;for(V|=4,I=e.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(I=u;I!==null;){var c=I;switch(c.tag){case 0:case 11:case 15:Gr(8,c,s)}var d=c.child;if(d!==null)d.return=c,I=d;else for(;I!==null;){c=I;var h=c.sibling,g=c.return;if(Mh(c),c===u){I=null;break}if(h!==null){h.return=g,I=h;break}I=g}}}var v=s.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var E=k.sibling;k.sibling=null,k=E}while(k!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,I=m;break e}I=s.return}}var f=e.current;for(I=f;I!==null;){o=I;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,I=y;else e:for(o=f;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:co(9,l)}}catch(N){de(l,l.return,N)}if(l===o){I=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,I=w;break e}I=l.return}}if(V=i,Nn(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(no,e)}catch{}r=!0}return r}finally{Z=n,mt.transition=t}}return!1}function nf(e,t,n){t=wr(n,t),t=xh(e,t,1),e=yn(e,t,1),t=Fe(),e!==null&&(Oi(e,1,t),qe(e,t))}function de(e,t,n){if(e.tag===3)nf(e,e,n);else for(;t!==null;){if(t.tag===3){nf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){e=wr(n,e),e=_h(t,e,1),t=yn(t,e,1),e=Fe(),t!==null&&(Oi(t,1,e),qe(t,e));break}}t=t.return}}function Dg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Fe(),e.pingedLanes|=e.suspendedLanes&n,Ce===e&&(Ne&n)===n&&(xe===4||xe===3&&(Ne&130023424)===Ne&&500>he()-lu?Ln(e,0):ou|=n),qe(e,t)}function Hh(e,t){t===0&&(e.mode&1?(t=$i,$i<<=1,!($i&130023424)&&($i=4194304)):t=1);var n=Fe();e=Gt(e,t),e!==null&&(Oi(e,t,n),qe(e,n))}function bg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hh(e,n)}function Rg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(t),Hh(e,n)}var Wh;Wh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ke.current)Ye=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ye=!1,_g(e,t,n);Ye=!!(e.flags&131072)}else Ye=!1,oe&&t.flags&1048576&&Jd(t,Ms,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ds(e,t),e=t.pendingProps;var i=mr(t,be.current);fr(t,n),i=eu(null,t,r,e,i,n);var s=tu();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(s=!0,As(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qa(t),i.updater=uo,t.stateNode=i,i._reactInternals=t,Ul(t,r,e,n),t=Vl(null,t,r,!0,s,n)):(t.tag=0,oe&&s&&Ua(t),ze(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ds(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=zg(r),e=_t(r,e),i){case 0:t=Wl(null,t,r,e,n);break e;case 1:t=Yc(null,t,r,e,n);break e;case 11:t=Wc(null,t,r,e,n);break e;case 14:t=Vc(null,t,r,_t(r.type,e),n);break e}throw Error(P(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_t(r,i),Wl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_t(r,i),Yc(e,t,r,i,n);case 3:e:{if(Nh(t),e===null)throw Error(P(387));r=t.pendingProps,s=t.memoizedState,i=s.element,eh(e,t),Rs(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=wr(Error(P(423)),t),t=Kc(e,t,r,n,i);break e}else if(r!==i){i=wr(Error(P(424)),t),t=Kc(e,t,r,n,i);break e}else for(tt=mn(t.stateNode.containerInfo.firstChild),rt=t,oe=!0,Pt=null,n=Zd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yr(),r===i){t=en(e,t,n);break e}ze(e,t,r,n)}t=t.child}return t;case 5:return th(t),e===null&&$l(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Dl(r,i)?o=null:s!==null&&Dl(r,s)&&(t.flags|=32),Ph(e,t),ze(e,t,o,n),t.child;case 6:return e===null&&$l(t),null;case 13:return Oh(e,t,n);case 4:return Qa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=gr(t,null,r,n):ze(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_t(r,i),Wc(e,t,r,i,n);case 7:return ze(e,t,t.pendingProps,n),t.child;case 8:return ze(e,t,t.pendingProps.children,n),t.child;case 12:return ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ee(Ds,r._currentValue),r._currentValue=o,s!==null)if(jt(s.value,o)){if(s.children===i.children&&!Ke.current){t=en(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=qt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Fl(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(P(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Fl(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ze(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,fr(t,n),i=yt(i),r=r(i),t.flags|=1,ze(e,t,r,n),t.child;case 14:return r=t.type,i=_t(r,t.pendingProps),i=_t(r.type,i),Vc(e,t,r,i,n);case 15:return Eh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_t(r,i),ds(e,t),t.tag=1,Je(r)?(e=!0,As(t)):e=!1,fr(t,n),kh(t,r,i),Ul(t,r,i,n),Vl(null,t,r,!0,e,n);case 19:return Th(e,t,n);case 22:return Ch(e,t,n)}throw Error(P(156,t.tag))};function Vh(e,t){return vd(e,t)}function Lg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,n,r){return new Lg(e,t,n,r)}function fu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zg(e){if(typeof e=="function")return fu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ja)return 11;if(e===Aa)return 14}return 2}function wn(e,t){var n=e.alternate;return n===null?(n=pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ms(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")fu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Qn:return zn(n.children,i,s,t);case Ta:o=8,i|=8;break;case dl:return e=pt(12,n,t,i|2),e.elementType=dl,e.lanes=s,e;case hl:return e=pt(13,n,t,i),e.elementType=hl,e.lanes=s,e;case pl:return e=pt(19,n,t,i),e.elementType=pl,e.lanes=s,e;case td:return ho(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gf:o=10;break e;case ed:o=9;break e;case ja:o=11;break e;case Aa:o=14;break e;case on:o=16,r=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=pt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function zn(e,t,n,r){return e=pt(7,e,r,t),e.lanes=n,e}function ho(e,t,n,r){return e=pt(22,e,r,t),e.elementType=td,e.lanes=n,e.stateNode={isHidden:!1},e}function Zo(e,t,n){return e=pt(6,e,null,t),e.lanes=n,e}function Go(e,t,n){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $g(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mo(0),this.expirationTimes=Mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function du(e,t,n,r,i,s,o,l,a){return e=new $g(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=pt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qa(s),e}function Fg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yh(e){if(!e)return xn;e=e._reactInternals;e:{if(Yn(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var n=e.type;if(Je(n))return Yd(e,n,t)}return t}function Kh(e,t,n,r,i,s,o,l,a){return e=du(n,r,!0,e,i,s,o,l,a),e.context=Yh(null),n=e.current,r=Fe(),i=vn(n),s=qt(r,i),s.callback=t??null,yn(n,s,i),e.current.lanes=i,Oi(e,i,r),qe(e,r),e}function po(e,t,n,r){var i=t.current,s=Fe(),o=vn(i);return n=Yh(n),t.context===null?t.context=n:t.pendingContext=n,t=qt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=yn(i,t,o),e!==null&&(Tt(e,i,o,s),us(e,i,o)),o}function Ws(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hu(e,t){rf(e,t),(e=e.alternate)&&rf(e,t)}function Bg(){return null}var Jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function pu(e){this._internalRoot=e}mo.prototype.render=pu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));po(e,t,null,null)};mo.prototype.unmount=pu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hn(function(){po(null,e,null,null)}),t[Zt]=null}};function mo(e){this._internalRoot=e}mo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<an.length&&t!==0&&t<an[n].priority;n++);an.splice(n,0,e),n===0&&Nd(e)}};function mu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sf(){}function Ug(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ws(o);s.call(u)}}var o=Kh(t,r,e,0,null,!1,!1,"",sf);return e._reactRootContainer=o,e[Zt]=o.current,di(e.nodeType===8?e.parentNode:e),Hn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ws(a);l.call(u)}}var a=du(e,0,!1,null,null,!1,!1,"",sf);return e._reactRootContainer=a,e[Zt]=a.current,di(e.nodeType===8?e.parentNode:e),Hn(function(){po(t,a,n,r)}),a}function go(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Ws(o);l.call(a)}}po(t,o,e,i)}else o=Ug(n,t,e,i,r);return Ws(o)}_d=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ur(t.pendingLanes);n!==0&&(Da(t,n|1),qe(t,he()),!(V&6)&&(Sr=he()+500,Nn()))}break;case 13:Hn(function(){var r=Gt(e,1);if(r!==null){var i=Fe();Tt(r,e,1,i)}}),hu(e,1)}};ba=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var n=Fe();Tt(t,e,134217728,n)}hu(e,134217728)}};Ed=function(e){if(e.tag===13){var t=vn(e),n=Gt(e,t);if(n!==null){var r=Fe();Tt(n,e,t,r)}hu(e,t)}};Cd=function(){return Z};Pd=function(e,t){var n=Z;try{return Z=e,t()}finally{Z=n}};El=function(e,t,n){switch(t){case"input":if(gl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oo(r);if(!i)throw Error(P(90));rd(r),gl(r,i)}}}break;case"textarea":sd(e,n);break;case"select":t=n.value,t!=null&&lr(e,!!n.multiple,t,!1)}};dd=au;hd=Hn;var Hg={usingClientEntryPoint:!1,Events:[ji,er,oo,cd,fd,au]},Rr={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wg={bundleType:Rr.bundleType,version:Rr.version,rendererPackageName:Rr.rendererPackageName,rendererConfig:Rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yd(e),e===null?null:e.stateNode},findFiberByHostInstance:Rr.findFiberByHostInstance||Bg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qi.isDisabled&&Qi.supportsFiber)try{no=Qi.inject(Wg),Lt=Qi}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hg;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mu(t))throw Error(P(200));return Fg(e,t,null,n)};lt.createRoot=function(e,t){if(!mu(e))throw Error(P(299));var n=!1,r="",i=Jh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=du(e,1,!1,null,null,n,!1,r,i),e[Zt]=t.current,di(e.nodeType===8?e.parentNode:e),new pu(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=yd(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return Hn(e)};lt.hydrate=function(e,t,n){if(!yo(t))throw Error(P(200));return go(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!mu(e))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Jh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Kh(t,null,e,1,n??null,i,!1,s,o),e[Zt]=t.current,di(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new mo(t)};lt.render=function(e,t,n){if(!yo(t))throw Error(P(200));return go(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!yo(e))throw Error(P(40));return e._reactRootContainer?(Hn(function(){go(null,null,e,!1,function(){e._reactRootContainer=null,e[Zt]=null})}),!0):!1};lt.unstable_batchedUpdates=au;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!yo(n))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return go(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function qh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qh)}catch(e){console.error(e)}}qh(),qf.exports=lt;var Vg=qf.exports,Qh,of=Vg;Qh=of.createRoot,of.hydrateRoot;let Yg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Kg=(e=21)=>{let t="",n=e|0;for(;n--;)t+=Yg[Math.random()*64|0];return t};function Nt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function kr(e){return!!e&&!!e[st]}function Wn(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===tv}(e)||Array.isArray(e)||!!e[pf]||!!(!((t=e.constructor)===null||t===void 0)&&t[pf])||yu(e)||gu(e))}function ki(e,t,n){n===void 0&&(n=!1),Pr(e)===0?(n?Object.keys:xu)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Pr(e){var t=e[st];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:yu(e)?2:gu(e)?3:0}function ra(e,t){return Pr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Jg(e,t){return Pr(e)===2?e.get(t):e[t]}function Xh(e,t,n){var r=Pr(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function qg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function yu(e){return Gg&&e instanceof Map}function gu(e){return ev&&e instanceof Set}function Mn(e){return e.o||e.t}function vu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=nv(e);delete t[st];for(var n=xu(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function wu(e,t){return t===void 0&&(t=!1),Su(e)||kr(e)||!Wn(e)||(Pr(e)>1&&(e.set=e.add=e.clear=e.delete=Qg),Object.freeze(e),t&&ki(e,function(n,r){return wu(r,!0)},!0)),e}function Qg(){Nt(2)}function Su(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function $t(e){var t=rv[e];return t||Nt(18,e),t}function lf(){return xi}function el(e,t){t&&($t("Patches"),e.u=[],e.s=[],e.v=t)}function Vs(e){ia(e),e.p.forEach(Xg),e.p=null}function ia(e){e===xi&&(xi=e.l)}function af(e){return xi={p:[],l:xi,h:e,m:!0,_:0}}function Xg(e){var t=e[st];t.i===0||t.i===1?t.j():t.g=!0}function tl(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||$t("ES5").S(t,e,r),r?(n[st].P&&(Vs(t),Nt(4)),Wn(e)&&(e=Ys(t,e),t.l||Ks(t,e)),t.u&&$t("Patches").M(n[st].t,e,t.u,t.s)):e=Ys(t,n,[]),Vs(t),t.u&&t.v(t.u,t.s),e!==Zh?e:void 0}function Ys(e,t,n){if(Su(t))return t;var r=t[st];if(!r)return ki(t,function(l,a){return uf(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Ks(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=vu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),ki(s,function(l,a){return uf(e,r,i,l,a,n,o)}),Ks(e,i,!1),n&&e.u&&$t("Patches").N(r,n,e.u,e.s)}return r.o}function uf(e,t,n,r,i,s,o){if(kr(i)){var l=Ys(e,i,s&&t&&t.i!==3&&!ra(t.R,r)?s.concat(r):void 0);if(Xh(n,r,l),!kr(l))return;e.m=!1}else o&&n.add(i);if(Wn(i)&&!Su(i)){if(!e.h.D&&e._<1)return;Ys(e,i),t&&t.A.l||Ks(e,i)}}function Ks(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&wu(t,n)}function nl(e,t){var n=e[st];return(n?Mn(n):e)[t]}function cf(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function sa(e){e.P||(e.P=!0,e.l&&sa(e.l))}function rl(e){e.o||(e.o=vu(e.t))}function oa(e,t,n){var r=yu(t)?$t("MapSet").F(t,n):gu(t)?$t("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:lf(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=la;o&&(a=[l],u=Wr);var c=Proxy.revocable(a,u),d=c.revoke,h=c.proxy;return l.k=h,l.j=d,h}(t,n):$t("ES5").J(t,n);return(n?n.A:lf()).p.push(r),r}function Zg(e){return kr(e)||Nt(22,e),function t(n){if(!Wn(n))return n;var r,i=n[st],s=Pr(n);if(i){if(!i.P&&(i.i<4||!$t("ES5").K(i)))return i.t;i.I=!0,r=ff(n,s),i.I=!1}else r=ff(n,s);return ki(r,function(o,l){i&&Jg(i.t,o)===l||Xh(r,o,t(l))}),s===3?new Set(r):r}(e)}function ff(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return vu(e)}var df,xi,ku=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Gg=typeof Map<"u",ev=typeof Set<"u",hf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Zh=ku?Symbol.for("immer-nothing"):((df={})["immer-nothing"]=!0,df),pf=ku?Symbol.for("immer-draftable"):"__$immer_draftable",st=ku?Symbol.for("immer-state"):"__$immer_state",tv=""+Object.prototype.constructor,xu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,nv=Object.getOwnPropertyDescriptors||function(e){var t={};return xu(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},rv={},la={get:function(e,t){if(t===st)return e;var n=Mn(e);if(!ra(n,t))return function(i,s,o){var l,a=cf(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Wn(r)?r:r===nl(e.t,t)?(rl(e),e.o[t]=oa(e.A.h,r,e)):r},has:function(e,t){return t in Mn(e)},ownKeys:function(e){return Reflect.ownKeys(Mn(e))},set:function(e,t,n){var r=cf(Mn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=nl(Mn(e),t),s=i==null?void 0:i[st];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(qg(n,i)&&(n!==void 0||ra(e.t,t)))return!0;rl(e),sa(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return nl(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,rl(e),sa(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Mn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Nt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Nt(12)}},Wr={};ki(la,function(e,t){Wr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Wr.deleteProperty=function(e,t){return Wr.set.call(this,e,t,void 0)},Wr.set=function(e,t,n){return la.set.call(this,e[0],t,n,e[0])};var iv=function(){function e(n){var r=this;this.O=hf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(k){var E=this;k===void 0&&(k=l);for(var m=arguments.length,f=Array(m>1?m-1:0),y=1;y<m;y++)f[y-1]=arguments[y];return a.produce(k,function(w){var N;return(N=s).call.apply(N,[E,w].concat(f))})}}var u;if(typeof s!="function"&&Nt(6),o!==void 0&&typeof o!="function"&&Nt(7),Wn(i)){var c=af(r),d=oa(r,i,void 0),h=!0;try{u=s(d),h=!1}finally{h?Vs(c):ia(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(k){return el(c,o),tl(k,c)},function(k){throw Vs(c),k}):(el(c,o),tl(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Zh&&(u=void 0),r.D&&wu(u,!0),o){var g=[],v=[];$t("Patches").M(i,u,g,v),o(g,v)}return u}Nt(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(d))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Wn(n)||Nt(8),kr(n)&&(n=Zg(n));var r=af(this),i=oa(this,n,void 0);return i[st].C=!0,ia(r),i},t.finishDraft=function(n,r){var i=n&&n[st],s=i.A;return el(s,r),tl(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!hf&&Nt(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=$t("Patches").$;return kr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),ot=new iv,sv=ot.produce;ot.produceWithPatches.bind(ot);ot.setAutoFreeze.bind(ot);ot.setUseProxies.bind(ot);ot.applyPatches.bind(ot);ot.createDraft.bind(ot);ot.finishDraft.bind(ot);class ov{constructor(t){const n=lv();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function lv(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function mf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Gh(e,t){const n=new ov(e),r=n.next.bind(n);return t&&mf(t,n),r.state=()=>mf(n,{}),r}class yf{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=Gh(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const av={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new yf(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=yf.seed()),{seed:t}},playerView:()=>{}};var uv=Function.prototype,cv=uv.toString;cv.call(Object);const _i="MAKE_MOVE",vo="GAME_EVENT",wo="REDO",_u="RESET",Eu="SYNC",So="UNDO",Cu="UPDATE",Pu="PATCH",ep="PLUGIN",ko="STRIP_TRANSIENTS",tp=(e,t,n,r)=>({type:_i,payload:{type:e,args:t,playerID:n,credentials:r}}),ni=(e,t,n,r)=>({type:vo,payload:{type:e,args:t,playerID:n,credentials:r}}),np=(e,t,n,r)=>({type:vo,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),rp=e=>({type:Eu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),ip=(e,t,n,r)=>({type:Pu,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),sp=(e,t)=>({type:Cu,state:e,deltalog:t,clientOnly:!0}),op=e=>({type:_u,state:e,clientOnly:!0}),lp=(e,t)=>({type:So,payload:{type:null,args:null,playerID:e,credentials:t}}),ap=(e,t)=>({type:wo,payload:{type:null,args:null,playerID:e,credentials:t}}),fv=(e,t,n,r)=>({type:ep,payload:{type:e,args:t,playerID:n,credentials:r}}),up=()=>({type:ko});var dv=Object.freeze({__proto__:null,makeMove:tp,gameEvent:ni,automaticGameEvent:np,sync:rp,patch:ip,update:sp,reset:op,undo:lp,redo:ap,plugin:fv,stripTransients:up});const _n="INVALID_MOVE",hv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=sv(t.G,s=>{const o=e({...t,G:s},...n);if(o===_n){r=!0;return}return o});return r?_n:i}};var Me;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Me||(Me={}));var Vt;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Vt||(Vt={}));class pv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,Vt.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,Vt.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Me.TURN_ON_END:case Me.PHASE_ON_END:return r(s.error,Vt.StageEventInOnEnd);case Me.PHASE_ON_BEGIN:return r(s.error,Vt.StageEventInPhaseBegin);case Me.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,Vt.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Me.TURN_ON_END||s.calledFrom===Me.PHASE_ON_END)return r(s.error,Vt.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Me.PHASE_ON_END)return r(s.error,Vt.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=np(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const Nu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new pv(e.flow,t,n).api()},mv={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},yv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},gv=(...e)=>console.error(...e);function X(e){gv("ERROR:",e)}const Ou=[hv,av,mv,yv],Ii=[...Ou,Nu],vv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),xr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),cp=(e,t,n)=>[...Ou,...n,Nu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),wv=(e,t)=>([...Ii,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),aa=(e,t)=>([...Ii,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),Sv=(e,t)=>([...Ou,...t.game.plugins,Nu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),kv=(e,t)=>[...Ii,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),xv=(e,t)=>[...Ii,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,fp=(e,t)=>{const n=Sv(e,t),r=xv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return X(`${i} plugin declared action invalid:
${s}`),[e,r]},dp=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Ii,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function Js(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function qs(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Qs.NULL),n=a}else{if(Js(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Xi(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Xi(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Xi(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Xi(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function _v(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=qs(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Xi(e,t,n,r,i){(typeof i!="object"||i===Qs.NULL)&&(i={stage:i}),i.stage!==void 0&&(Js(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function ua(e,t){return e[t]+""}function Ev(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...xr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((h,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&X(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const d=ua(a,u);return r={...r,currentPlayer:d,playOrderPos:u,playOrder:a},r=qs(r,t.activePlayers||{}),r}function Cv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&X(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=ua(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:X(`invalid argument to endTurn: ${u}`)}});else{const c={...xr(e),G:s,ctx:o},d=i.next(c),h=typeof d;d!==void 0&&h!=="number"&&X(`invalid value returned by turn.order.next  expected number or undefined got ${h} ${d}.`),d===void 0?a=!0:(l=d,t=ua(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const Pv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Qs={NULL:null};var Tu={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.Pointer=Qt.escapeToken=Qt.unescapeToken=void 0;function hp(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Qt.unescapeToken=hp;function pp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Qt.escapeToken=pp;var Nv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(hp);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(pp).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Qt.Pointer=Nv;var fe={},ju={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(ju);var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.diffAny=$e.diffObjects=$e.diffArrays=$e.intersection=$e.subtract=$e.isDestructive=void 0;var Ei=ju;function Ov(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}$e.isDestructive=Ov;function ca(e,t){var n={};for(var r in e)Ei.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)Ei.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}$e.subtract=ca;function mp(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)Ei.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}$e.intersection=mp;function Tv(e){return e.op==="add"}function jv(e){return e.op==="remove"}function il(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function yp(e,t,n,r){r===void 0&&(r=xo);var i={"0,0":{operations:[],cost:0}};function s(c,d){var h="".concat(c,",").concat(d),g=i[h];if(g===void 0){if(c>0&&d>0&&!r(e[c-1],t[d-1],n.add(String(c-1))).length)g=s(c-1,d-1);else{var v=[];if(c>0){var k=s(c-1,d),E={op:"remove",index:c-1};v.push(il(k,E))}if(d>0){var m=s(c,d-1),f={op:"add",index:c-1,value:t[d-1]};v.push(il(m,f))}if(c>0&&d>0){var y=s(c-1,d-1),w={op:"replace",index:c-1,original:e[c-1],value:t[d-1]};v.push(il(y,w))}var N=v.sort(function(O,_){return O.cost-_.cost})[0];g=N}i[h]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,d){var h=c[0],g=c[1];if(Tv(d)){var v=d.index+1+g,k=v<o+g?String(v):"-",E={op:d.op,path:n.add(k).toString(),value:d.value};return[h.concat(E),g+1]}else if(jv(d)){var E={op:d.op,path:n.add(String(d.index+g)).toString()};return[h.concat(E),g-1]}else{var m=n.add(String(d.index+g)),f=r(d.original,d.value,m);return[h.concat.apply(h,f),g]}},[[],0])[0];return u}$e.diffArrays=yp;function gp(e,t,n,r){r===void 0&&(r=xo);var i=[];return ca(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),ca(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),mp([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}$e.diffObjects=gp;function xo(e,t,n,r){if(r===void 0&&(r=xo),e===t)return[];var i=(0,Ei.objectType)(e),s=(0,Ei.objectType)(t);return i=="array"&&s=="array"?yp(e,t,n,r):i=="object"&&s=="object"?gp(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}$e.diffAny=xo;var Au=Yr&&Yr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(fe,"__esModule",{value:!0});fe.apply=fe.InvalidOperationError=fe.test=fe.copy=fe.move=fe.replace=fe.remove=fe.add=fe.TestError=fe.MissingError=void 0;var tn=Qt,Iu=ju,Av=$e,Ft=function(e){Au(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);fe.MissingError=Ft;var vp=function(e){Au(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);fe.TestError=vp;function Mu(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function wp(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function Sp(e,t){var n=tn.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Ft(t.path):(Mu(n.parent,n.key,(0,Iu.clone)(t.value)),null)}fe.add=Sp;function kp(e,t){var n=tn.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new Ft(t.path):(wp(n.parent,n.key),null)}fe.remove=kp;function xp(e,t){var n=tn.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new Ft(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new Ft(t.path)}else if(n.value===void 0)return new Ft(t.path);return n.parent[n.key]=(0,Iu.clone)(t.value),null}fe.replace=xp;function _p(e,t){var n=tn.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Ft(t.from);var r=tn.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Ft(t.path):(wp(n.parent,n.key),Mu(r.parent,r.key,n.value),null)}fe.move=_p;function Ep(e,t){var n=tn.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Ft(t.from);var r=tn.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Ft(t.path):(Mu(r.parent,r.key,(0,Iu.clone)(n.value)),null)}fe.copy=Ep;function Cp(e,t){var n=tn.Pointer.fromJSON(t.path).evaluate(e);return(0,Av.diffAny)(n.value,t.value,new tn.Pointer).length?new vp(n.value,t.value):null}fe.test=Cp;var Pp=function(e){Au(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);fe.InvalidOperationError=Pp;function Iv(e,t){switch(t.op){case"add":return Sp(e,t);case"remove":return kp(e,t);case"replace":return xp(e,t);case"move":return _p(e,t);case"copy":return Ep(e,t);case"test":return Cp(e,t)}return new Pp(t)}fe.apply=Iv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Qt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=fe,r=$e;function i(u,c){return c.map(function(d){return(0,n.apply)(u,d)})}e.applyPatch=i;function s(u){function c(d,h,g){var v=u(d,h,g);return Array.isArray(v)?v:(0,r.diffAny)(d,h,g,c)}return c}function o(u,c,d){var h=new t.Pointer;return(d?s(d):r.diffAny)(u,c,h)}e.createPatch=o;function l(u,c){var d=t.Pointer.fromJSON(c).evaluate(u);if(d!==void 0)return{op:"test",path:c,value:d.value}}function a(u,c){var d=new Array;return c.filter(r.isDestructive).forEach(function(h){var g=l(u,h.path);if(g&&d.push(g),"from"in h){var v=l(u,h.from);v&&d.push(v)}}),d}e.createTests=a})(Tu);function Mv({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:S})=>S),i||(i={});const l={...t};""in l&&X("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(S=>u.add(S));const d=(S,x)=>{const C=cp(S,x,o);return B=>{const L=xr(B);return C({...L,G:B.G,ctx:B.ctx,playerID:B.playerID})}},h=S=>x=>{const C=xr(x);return S({...C,G:x.G,ctx:x.ctx})},g={onEnd:d(r,Me.GAME_ON_END),endIf:h(n)};for(const S in l){const x=l[S];if(x.start===!0&&(c=S),x.moves!==void 0)for(const C of Object.keys(x.moves))a[S+"."+C]=x.moves[C],u.add(C);x.endIf===void 0&&(x.endIf=()=>{}),x.onBegin===void 0&&(x.onBegin=({G:C})=>C),x.onEnd===void 0&&(x.onEnd=({G:C})=>C),x.turn===void 0&&(x.turn=i),x.turn.order===void 0&&(x.turn.order=Pv.DEFAULT),x.turn.onBegin===void 0&&(x.turn.onBegin=({G:C})=>C),x.turn.onEnd===void 0&&(x.turn.onEnd=({G:C})=>C),x.turn.endIf===void 0&&(x.turn.endIf=()=>!1),x.turn.onMove===void 0&&(x.turn.onMove=({G:C})=>C),x.turn.stages===void 0&&(x.turn.stages={}),Js(x.turn,!0);for(const C in x.turn.stages){const L=x.turn.stages[C].moves||{};for(const R of Object.keys(L)){const ne=S+"."+C+"."+R;a[ne]=L[R],u.add(R)}}if(x.wrapped={onBegin:d(x.onBegin,Me.PHASE_ON_BEGIN),onEnd:d(x.onEnd,Me.PHASE_ON_END),endIf:h(x.endIf)},x.turn.wrapped={onMove:d(x.turn.onMove,Me.TURN_ON_MOVE),onBegin:d(x.turn.onBegin,Me.TURN_ON_BEGIN),onEnd:d(x.turn.onEnd,Me.TURN_ON_END),endIf:h(x.turn.endIf)},typeof x.next!="function"){const{next:C}=x;x.next=()=>C||null}x.wrapped.next=h(x.next)}function v(S){return S.phase?l[S.phase]:l[""]}function k(S){return S}function E(S,x){const C=new Set,B=new Set;for(let L=0;L<x.length;L++){const{fn:R,arg:ne,...G}=x[L];if(R===Y){B.clear();const _e=S.ctx.phase;if(C.has(_e)){const Xe={...S.ctx,phase:null};return{...S,ctx:Xe}}C.add(_e)}const Re=[];if(S=R(S,{...G,arg:ne,next:Re}),R===D)break;const le=T(S);if(le){x.push({fn:D,arg:le,turn:S.ctx.turn,phase:S.ctx.phase,automatic:!0});continue}const me=U(S);if(me){x.push({fn:Y,arg:me,turn:S.ctx.turn,phase:S.ctx.phase,automatic:!0});continue}if([k,O,_].includes(R)){const _e=A(S);if(_e){x.push({fn:K,arg:_e,turn:S.ctx.turn,phase:S.ctx.phase,automatic:!0});continue}}x.push(...Re)}return S}function m(S,{next:x}){return x.push({fn:f}),S}function f(S,{next:x}){let{G:C,ctx:B}=S;return C=v(B).wrapped.onBegin(S),x.push({fn:y}),{...S,G:C,ctx:B}}function y(S,{currentPlayer:x}){let{ctx:C}=S;const B=v(C);x?(C={...C,currentPlayer:x},B.turn.activePlayers&&(C=qs(C,B.turn.activePlayers))):C=Ev(S,B.turn);const L=C.turn+1;C={...C,turn:L,numMoves:0,_prevActivePlayers:[]};const R=B.turn.wrapped.onBegin({...S,ctx:C});return{...S,G:R,ctx:C,_undo:[],_redo:[]}}function w(S,{arg:x,next:C,phase:B}){const L=v({phase:B});let{ctx:R}=S;if(x&&x.next)if(x.next in l)R={...R,phase:x.next};else return X("invalid phase: "+x.next),S;else R={...R,phase:L.wrapped.next(S)||null};return S={...S,ctx:R},C.push({fn:f}),S}function N(S,{arg:x,currentPlayer:C,next:B}){let{G:L,ctx:R}=S;const ne=v(R),{endPhase:G,ctx:Re}=Cv(S,C,ne.turn,x);return R=Re,S={...S,G:L,ctx:R},G?B.push({fn:Y,turn:R.turn,phase:R.phase}):B.push({fn:y,currentPlayer:R.currentPlayer}),S}function O(S,{arg:x,playerID:C}){if((typeof x=="string"||x===Qs.NULL)&&(x={stage:x}),typeof x!="object")return S;Js(x);let{ctx:B}=S,{activePlayers:L,_activePlayersMinMoves:R,_activePlayersMaxMoves:ne,_activePlayersNumMoves:G}=B;return x.stage!==void 0&&(L===null&&(L={}),L[C]=x.stage,G[C]=0,x.minMoves&&(R===null&&(R={}),R[C]=x.minMoves),x.maxMoves&&(ne===null&&(ne={}),ne[C]=x.maxMoves)),B={...B,activePlayers:L,_activePlayersMinMoves:R,_activePlayersMaxMoves:ne,_activePlayersNumMoves:G},{...S,ctx:B}}function _(S,{arg:x}){return{...S,ctx:qs(S.ctx,x)}}function T(S){return g.endIf(S)}function U(S){return v(S.ctx).wrapped.endIf(S)}function A(S){const x=v(S.ctx),C=S.ctx.numMoves||0;return x.turn.maxMoves&&C>=x.turn.maxMoves?!0:x.turn.wrapped.endIf(S)}function D(S,{arg:x,phase:C}){S=Y(S,{}),x===void 0&&(x=!0),S={...S,ctx:{...S.ctx,gameover:x}};const B=g.onEnd(S);return{...S,G:B}}function Y(S,{arg:x,next:C,turn:B,automatic:L}){S=K(S,{turn:B,force:!0,automatic:!0});const{phase:R,turn:ne}=S.ctx;if(C&&C.push({fn:w,arg:x,phase:R}),R===null)return S;const Re=v(S.ctx).wrapped.onEnd(S),le={...S.ctx,phase:null},me=ni("endPhase",x),{_stateID:_e}=S,Xe={action:me,_stateID:_e,turn:ne,phase:R};L&&(Xe.automatic=!0);const It=[...S.deltalog||[],Xe];return{...S,G:Re,ctx:le,deltalog:It}}function K(S,{arg:x,next:C,turn:B,force:L,automatic:R,playerID:ne}){if(B!==S.ctx.turn)return S;const{currentPlayer:G,numMoves:Re,phase:le,turn:me}=S.ctx,_e=v(S.ctx),Xe=Re||0;if(!L&&_e.turn.minMoves&&Xe<_e.turn.minMoves)return`${_e.turn.minMoves}`,S;const It=_e.turn.wrapped.onEnd(S);C&&C.push({fn:N,arg:x,currentPlayer:G});let wt={...S.ctx,activePlayers:null};if(x&&x.remove){ne=ne||G;const Te=wt.playOrder.filter(kt=>kt!=ne),St=wt.playOrderPos>Te.length-1?0:wt.playOrderPos;if(wt={...wt,playOrder:Te,playOrderPos:St},Te.length===0)return C.push({fn:Y,turn:me,phase:le}),S}const M=ni("endTurn",x),{_stateID:z}=S,se={action:M,_stateID:z,turn:me,phase:le};R&&(se.automatic=!0);const Ze=[...S.deltalog||[],se];return{...S,G:It,ctx:wt,deltalog:Ze,_undo:[],_redo:[]}}function J(S,{arg:x,next:C,automatic:B,playerID:L}){L=L||S.ctx.currentPlayer;let{ctx:R,_stateID:ne}=S,{activePlayers:G,_activePlayersNumMoves:Re,_activePlayersMinMoves:le,_activePlayersMaxMoves:me,phase:_e,turn:Xe}=R;const It=G!==null&&L in G,wt=v(R);if(!x&&It){const Te=wt.turn.stages[G[L]];Te&&Te.next&&(x=Te.next)}if(C&&C.push({fn:O,arg:x,playerID:L}),!It)return S;const M=Re[L]||0;if(le&&le[L]&&M<le[L])return`${le[L]}`,S;G={...G},delete G[L],le&&(le={...le},delete le[L]),me&&(me={...me},delete me[L]),R=_v({...R,activePlayers:G,_activePlayersMinMoves:le,_activePlayersMaxMoves:me});const se={action:ni("endStage",x),_stateID:ne,turn:Xe,phase:_e};B&&(se.automatic=!0);const Ze=[...S.deltalog||[],se];return{...S,ctx:R,deltalog:Ze}}function we(S,x,C){const B=v(S),L=B.turn.stages,{activePlayers:R}=S;if(R&&R[C]!==void 0&&R[C]!==Qs.NULL&&L[R[C]]!==void 0&&L[R[C]].moves!==void 0){const G=L[R[C]].moves;if(x in G)return G[x]}else if(B.moves){if(x in B.moves)return B.moves[x]}else if(x in e)return e[x];return null}function pe(S,x){const{playerID:C,type:B}=x,{currentPlayer:L,activePlayers:R,_activePlayersMaxMoves:ne}=S.ctx,G=we(S.ctx,B,C),Re=!G||typeof G=="function"||G.noLimit!==!0;let{numMoves:le,_activePlayersNumMoves:me}=S.ctx;Re&&(C===L&&le++,R&&me[C]++),S={...S,ctx:{...S.ctx,numMoves:le,_activePlayersNumMoves:me}},ne&&me[C]>=ne[C]&&(S=J(S,{playerID:C,automatic:!0}));const Xe=v(S.ctx).turn.wrapped.onMove({...S,playerID:C});return S={...S,G:Xe},E(S,[{fn:k}])}function te(S,x,C){return E(S,[{fn:J,arg:C,playerID:x}])}function j(S,x){return E(S,[{fn:J,playerID:x}])}function $(S,x,C){return E(S,[{fn:_,arg:C}])}function F(S,x,C){return E(S,[{fn:Y,phase:S.ctx.phase,turn:S.ctx.turn,arg:{next:C}}])}function q(S){return E(S,[{fn:Y,phase:S.ctx.phase,turn:S.ctx.turn}])}function Q(S,x,C){return E(S,[{fn:K,turn:S.ctx.turn,phase:S.ctx.phase,arg:C}])}function Ht(S,x,C){return E(S,[{fn:K,turn:S.ctx.turn,phase:S.ctx.phase,force:!0,arg:C}])}function vt(S,x,C){return E(S,[{fn:D,turn:S.ctx.turn,phase:S.ctx.phase,arg:C}])}const He={endStage:j,setStage:te,endTurn:Q,pass:Ht,endPhase:q,setPhase:F,endGame:vt,setActivePlayers:$},Se=[];s.endTurn!==!1&&Se.push("endTurn"),s.pass!==!1&&Se.push("pass"),s.endPhase!==!1&&Se.push("endPhase"),s.setPhase!==!1&&Se.push("setPhase"),s.endGame!==!1&&Se.push("endGame"),s.setActivePlayers!==!1&&Se.push("setActivePlayers"),s.endStage!==!1&&Se.push("endStage"),s.setStage!==!1&&Se.push("setStage");function At(S,x){const{type:C,playerID:B,args:L}=x.payload;return typeof He[C]!="function"?S:He[C](S,B,...Array.isArray(L)?L:[L])}function Mi(S,x,C){return x.activePlayers?C in x.activePlayers:x.currentPlayer===C}return{ctx:S=>({numPlayers:S,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:S})].map((x,C)=>C+""),playOrderPos:0,phase:c,activePlayers:null}),init:S=>E(S,[{fn:m}]),isPlayerActive:Mi,eventHandlers:He,eventNames:Object.keys(He),enabledEventNames:Se,moveMap:a,moveNames:[...u.values()],processMove:pe,processEvent:At,getMove:we}}function Dv(e){return e.processMove!==void 0}function _o(e){if(Dv(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Mv(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(Np(i)&&(i=i.move),i instanceof Function){const s=cp(i,Me.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...xr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return X(`invalid move object: ${r.type}`),n.G}}}function Np(e){return e instanceof Object&&e.move!==void 0}var fa;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(fa||(fa={}));var Ie;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(Ie||(Ie={}));const Zi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,bv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function gf(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function sl(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function ol(e,t,n){const[r,i]=fp(e,n);return i?[r,Le(t,Ie.PluginActionInvalid,i)]:[r]}function Op(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function Le(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const Tp=e=>t=>n=>{const r=t(n);switch(n.type){case ko:return r;default:{const[,i]=Op(e.getState());return typeof i<"u"?(e.dispatch(up()),{...r,transients:i}):r}}};function Du({game:e,isClient:t}){return e=_o(e),(n=null,r)=>{let[i]=Op(n);switch(r.type){case ko:return i;case vo:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return X("cannot call event after game end"),Le(i,Ie.GameOver);if(Zi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return X(`disallowed event: ${r.payload.type}`),Le(i,Ie.InactivePlayer);i=aa(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=ol(s,i,{game:e}),o||(s=gf(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case _i:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return X(`disallowed move: ${r.payload.type}`),Le(i,Ie.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return X("cannot make move after game end"),Le(i,Ie.GameOver);if(Zi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return X(`disallowed move: ${r.payload.type}`),Le(i,Ie.InactivePlayer);i=aa(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===_n)return X(`invalid move: ${r.payload.type} args: ${r.payload.args}`),Le(i,Ie.InvalidMove);const a={...i,G:l};if(t&&kv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=ol(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=sl(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=ol(i,s,{game:e}),u||(i=gf(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case _u:case Cu:case Eu:return r.state;case So:{if(i={...i,deltalog:[]},e.disableUndo)return X("Undo is not enabled"),Le(i,Ie.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return X("No moves to undo"),Le(i,Ie.ActionInvalid);const c=l[l.length-1],d=l[l.length-2];if(Zi(r)&&r.payload.playerID!==c.playerID)return X("Cannot undo other players' moves"),Le(i,Ie.ActionInvalid);if(c.moveType){const h=e.flow.getMove(d.ctx,c.moveType,c.playerID);if(!bv(s,o,h))return X("Move cannot be undone"),Le(i,Ie.ActionInvalid)}return i=sl(i,r),{...i,G:d.G,ctx:d.ctx,plugins:d.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case wo:{if(i={...i,deltalog:[]},e.disableUndo)return X("Redo is not enabled"),Le(i,Ie.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return X("No moves to redo"),Le(i,Ie.ActionInvalid);const a=o[0];return Zi(r)&&r.payload.playerID!==a.playerID?(X("Cannot redo other players' moves"),Le(i,Ie.ActionInvalid)):(i=sl(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case ep:return vv(i,r,{game:e});case Pu:{const s=i,o=JSON.parse(JSON.stringify(s)),l=Tu.applyPatch(o,r.patch);return l.some(u=>u!==null)?(X(`Patch ${JSON.stringify(r.patch)} apply failed`),Le(s,fa.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(f){typeof f!="function"&&(f=new Function(""+f));for(var y=new Array(arguments.length-1),w=0;w<y.length;w++)y[w]=arguments[w+1];var N={callback:f,args:y};return r[n]=N,o(n),n++}function a(f){delete r[f]}function u(f){var y=f.callback,w=f.args;switch(w.length){case 0:y();break;case 1:y(w[0]);break;case 2:y(w[0],w[1]);break;case 3:y(w[0],w[1],w[2]);break;default:y.apply(t,w);break}}function c(f){if(i)setTimeout(c,0,f);else{var y=r[f];if(y){i=!0;try{u(y)}finally{a(f),i=!1}}}}function d(){o=function(f){process.nextTick(function(){c(f)})}}function h(){if(e.postMessage&&!e.importScripts){var f=!0,y=e.onmessage;return e.onmessage=function(){f=!1},e.postMessage("","*"),e.onmessage=y,f}}function g(){var f="setImmediate$"+Math.random()+"$",y=function(w){w.source===e&&typeof w.data=="string"&&w.data.indexOf(f)===0&&c(+w.data.slice(f.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(w){e.postMessage(f+w,"*")}}function v(){var f=new MessageChannel;f.port1.onmessage=function(y){var w=y.data;c(w)},o=function(y){f.port2.postMessage(y)}}function k(){var f=s.documentElement;o=function(y){var w=s.createElement("script");w.onreadystatechange=function(){c(y),w.onreadystatechange=null,f.removeChild(w),w=null},f.appendChild(w)}}function E(){o=function(f){setTimeout(c,0,f)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?d():h()?g():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?k():E(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?Yr:self);class Rv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return tp(s.move,s.args,r);if("event"in s)return ni(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=Gh(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Lv=25;class ys extends Rv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Du({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((h,g)=>{const v=a[g];return v.checker(i,s)?h+v.weight:h},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Lv&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),d=this.playout(c);this.backpropagate(c,d),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function Ci(e){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(e)}function zv(e,t){if(Ci(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ci(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $v(e){var t=zv(e,"string");return Ci(t)=="symbol"?t:t+""}function Fv(e,t,n){return(t=$v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vf(Object(n),!0).forEach(function(r){Fv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ge(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Sf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),kf=function(){return Math.random().toString(36).substring(7).split("").join(".")},xf={INIT:"@@redux/INIT"+kf(),REPLACE:"@@redux/REPLACE"+kf()};function Bv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function bu(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ge(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ge(1));return n(bu)(e,t)}if(typeof e!="function")throw new Error(Ge(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(Ge(3));return s}function d(k){if(typeof k!="function")throw new Error(Ge(4));if(a)throw new Error(Ge(5));var E=!0;return u(),l.push(k),function(){if(E){if(a)throw new Error(Ge(6));E=!1,u();var f=l.indexOf(k);l.splice(f,1),o=null}}}function h(k){if(!Bv(k))throw new Error(Ge(7));if(typeof k.type>"u")throw new Error(Ge(8));if(a)throw new Error(Ge(9));try{a=!0,s=i(s,k)}finally{a=!1}for(var E=o=l,m=0;m<E.length;m++){var f=E[m];f()}return k}function g(k){if(typeof k!="function")throw new Error(Ge(10));i=k,h({type:xf.REPLACE})}function v(){var k,E=d;return k={subscribe:function(f){if(typeof f!="object"||f===null)throw new Error(Ge(11));function y(){f.next&&f.next(c())}y();var w=E(y);return{unsubscribe:w}}},k[Sf]=function(){return this},k}return h({type:xf.INIT}),r={dispatch:h,subscribe:d,getState:c,replaceReducer:g},r[Sf]=v,r}function jp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Ap(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ge(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=jp.apply(void 0,l)(i.dispatch),wf(wf({},i),{},{dispatch:s})}}}function Ip({game:e,numPlayers:t,setupData:n}){e=_o(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=wv(i,{game:e}),i=aa(i,{game:e,playerID:void 0});const s=xr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=fp(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Ru=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Uv extends Ru{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Hv=e=>new Uv(e);class Wv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Vv=new Wv;function da(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Lu(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=dv[e](l,a,da(r,n,s),i);n.dispatch(u)};return o}const Yv=Lu.bind(null,"makeMove"),Kv=Lu.bind(null,"gameEvent"),Jv=Lu.bind(null,"plugin");class qv{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=_o(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=Vv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Du({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=Ip({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(op(this.initialState))},this.undo=()=>{const g=lp(da(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=ap(da(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const h=Ap(Tp,()=>g=>v=>{const k=g(v);return this.notifySubscribers(),k},g=>v=>k=>{const E=g.getState(),m=v(k);return!("clientOnly"in k)&&k.type!==ko&&this.transport.sendAction(E,k),m},g=>v=>k=>{const E=v(k),m=g.getState();switch(k.type){case _i:case vo:case So:case wo:{const f=m.deltalog;this.log=[...this.log,...f];break}case _u:{this.log=[];break}case Pu:case Cu:{let f=-1;this.log.length>0&&(f=this.log[this.log.length-1]._stateID);let y=k.deltalog||[];y=y.filter(w=>w._stateID>f),this.log=[...this.log,...y];break}case Eu:{this.initialState=k.initialState,this.log=k.log||[];break}}return E});a=a!==void 0?jp(h,a):h,this.store=bu(this.reducer,this.initialState,a),i||(i=Hv),this.transport=i({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:Kg(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=rp(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=sp(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=ip(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:dp(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Yv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Kv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Jv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function Qv(e){return new qv(e)}const Mp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},Tn=e=>Mp(e,"game name"),Lr=e=>Mp(e,"match ID"),zr=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class Xv extends Error{constructor(t,n){super(t),this.details=n}}class Zv{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new Xv(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){Tn(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return Tn(t),Lr(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return Tn(t),zr(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return Tn(t),Lr(n),zr(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){Tn(t),Lr(n),zr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){Tn(t),Lr(n),zr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return Tn(t),Lr(n),zr(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var Dp={exports:{}},Gv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",e0=Gv,t0=e0;function bp(){}function Rp(){}Rp.resetWarningCache=bp;var n0=function(){function e(r,i,s,o,l,a){if(a!==t0){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Rp,resetWarningCache:bp};return n.PropTypes=n,n};Dp.exports=n0();var r0=Dp.exports;const bt=Lf(r0);var rn={},zu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */zu.parse=l0;zu.serialize=a0;var i0=decodeURIComponent,s0=encodeURIComponent,o0=/; */,Gi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function l0(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(o0),s=r.decode||i0,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=u0(c,s))}}return n}function a0(e,t,n){var r=n||{},i=r.encode||s0;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Gi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Gi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Gi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Gi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function u0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _f=Object.getOwnPropertySymbols,c0=Object.prototype.hasOwnProperty,f0=Object.prototype.propertyIsEnumerable;function d0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function h0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var p0=h0()?Object.assign:function(e,t){for(var n,r=d0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)c0.call(n,o)&&(r[o]=n[o]);if(_f){i=_f(n);for(var l=0;l<i.length;l++)f0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},m0={};Object.defineProperty(rn,"__esModule",{value:!0});var y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};rn.load=Fp;rn.loadAll=Bp;rn.select=Up;rn.save=Hp;rn.remove=Wp;rn.setRawCookie=$u;rn.plugToRequest=Vp;var g0=zu,Nr=zp(g0),v0=p0,Lp=zp(v0);function zp(e){return e&&e.__esModule?e:{default:e}}var Eo=typeof document>"u"||typeof process<"u"&&m0&&!1,nt={},En=void 0;function $p(){return En&&!En.headersSent}function Fp(e,t){var n=Eo?nt:Nr.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Bp(e){var t=Eo?nt:Nr.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Up(e){var t=Eo?nt:Nr.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,Lp.default)({},n,i)},{}):t:{}}function Hp(e,t,n){nt[e]=t,(typeof t>"u"?"undefined":y0(t))==="object"&&(nt[e]=JSON.stringify(t)),Eo||(document.cookie=Nr.default.serialize(e,nt[e],n)),$p()&&En.cookie&&En.cookie(e,t,n)}function Wp(e,t){delete nt[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Lp.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=Nr.default.serialize(e,"",t)),$p()&&En.clearCookie&&En.clearCookie(e,t)}function $u(e){e?nt=Nr.default.parse(e):nt={}}function Vp(e,t){return e.cookie?nt=e.cookie:e.cookies?nt=e.cookies:e.headers&&e.headers.cookie?$u(e.headers.cookie):nt={},En=t,function(){En=null,nt={}}}var Ef=rn.default={setRawCookie:$u,load:Fp,loadAll:Bp,select:Up,save:Hp,remove:Wp,plugToRequest:Vp},Xs;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Xs||(Xs={}));function jn(e){return e.type()===Xs.SYNC}class w0{type(){return Xs.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const S0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},k0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=S0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=Ip({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},Cf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),x0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class _0{constructor(t,n,r,i){this.game=_o(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(jn(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=x0(t),l=r;let a;if(jn(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return X(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){X(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Du({game:this.game}),c=Ap(Tp),d=bu(u,a,c);if(o.type==So||o.type==wo){const m=a.ctx.activePlayers!==null,f=a.ctx.currentPlayer===i;if(!m&&!f||m&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){X(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){X(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const h=o.type==_i?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==_i&&!h){X(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(h&&Np(h)&&h.ignoreStaleStateID)){X(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const g=d.getState();d.dispatch(o),a=d.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...k}=a;let E;if(s&&(s.gameover===void 0||s.gameover===null)&&(E={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(E.gameover=a.ctx.gameover)),jn(this.storageAPI))this.storageAPI.setState(l,k,v),E&&this.storageAPI.setMetadata(l,E);else{const m=[this.storageAPI.setState(l,k,v)];E&&m.push(this.storageAPI.setMetadata(l,E)),await Promise.all(m)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=jn(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:d}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:d}))return{error:"unauthorized"};if(a===void 0){const v=k0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,d=v.metadata,this.subscribeCallback({state:a,matchID:t}),jn(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:d}):await this.storageAPI.createMatch(s,{initialState:u,metadata:d})}const h=d?Cf(d):void 0,g={state:a,log:c,filteredMetadata:h,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(jn(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return X(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return X(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=Cf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),jn(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const es=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:dp(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),E0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=ll(o.deltalog,t),a=es(e,t,o),u=o._stateID,c=es(e,t,s),d=Tu.createPatch(c,a);return{type:"patch",args:[r,i,u,d,l]}}case"update":{const[r,i]=n.args,s=ll(i.deltalog,t),o=es(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=es(e,t,i.state),o=ll(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function ll(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const Ut=Object.create(null);Ut.open="0";Ut.close="1";Ut.ping="2";Ut.pong="3";Ut.message="4";Ut.upgrade="5";Ut.noop="6";const gs=Object.create(null);Object.keys(Ut).forEach(e=>{gs[Ut[e]]=e});const ha={type:"error",data:"parser error"},Yp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Kp=typeof ArrayBuffer=="function",Jp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Fu=({type:e,data:t},n,r)=>Yp&&t instanceof Blob?n?r(t):Pf(t,r):Kp&&(t instanceof ArrayBuffer||Jp(t))?n?r(t):Pf(new Blob([t]),r):r(Ut[e]+(t||"")),Pf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Nf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let al;function C0(e,t){if(Yp&&e.data instanceof Blob)return e.data.arrayBuffer().then(Nf).then(t);if(Kp&&(e.data instanceof ArrayBuffer||Jp(e.data)))return t(Nf(e.data));Fu(e,!1,n=>{al||(al=new TextEncoder),t(al.encode(n))})}const Of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Of.length;e++)Vr[Of.charCodeAt(e)]=e;const P0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Vr[e.charCodeAt(r)],o=Vr[e.charCodeAt(r+1)],l=Vr[e.charCodeAt(r+2)],a=Vr[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},N0=typeof ArrayBuffer=="function",Bu=(e,t)=>{if(typeof e!="string")return{type:"message",data:qp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:O0(e.substring(1),t)}:gs[n]?e.length>1?{type:gs[n],data:e.substring(1)}:{type:gs[n]}:ha},O0=(e,t)=>{if(N0){const n=P0(e);return qp(n,t)}else return{base64:!0,data:e}},qp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Qp="",T0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Fu(s,!1,l=>{r[o]=l,++i===n&&t(r.join(Qp))})})},j0=(e,t)=>{const n=e.split(Qp),r=[];for(let i=0;i<n.length;i++){const s=Bu(n[i],t);if(r.push(s),s.type==="error")break}return r};function A0(){return new TransformStream({transform(e,t){C0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let ul;function ts(e){return e.reduce((t,n)=>t+n.length,0)}function ns(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function I0(e,t){ul||(ul=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(ts(n)<1)break;const a=ns(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(ts(n)<2)break;const a=ns(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(ts(n)<8)break;const a=ns(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(ha);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(ts(n)<i)break;const a=ns(n,i);l.enqueue(Bu(s?a:ul.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(ha);break}}}})}const Xp=4;function ve(e){if(e)return M0(e)}function M0(e){for(var t in ve.prototype)e[t]=ve.prototype[t];return e}ve.prototype.on=ve.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ve.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ve.prototype.off=ve.prototype.removeListener=ve.prototype.removeAllListeners=ve.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ve.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};ve.prototype.emitReserved=ve.prototype.emit;ve.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ve.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Co=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ht=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),D0="arraybuffer";function Zp(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const b0=ht.setTimeout,R0=ht.clearTimeout;function Po(e,t){t.useNativeTimers?(e.setTimeoutFn=b0.bind(ht),e.clearTimeoutFn=R0.bind(ht)):(e.setTimeoutFn=ht.setTimeout.bind(ht),e.clearTimeoutFn=ht.clearTimeout.bind(ht))}const L0=1.33;function z0(e){return typeof e=="string"?$0(e):Math.ceil((e.byteLength||e.size)*L0)}function $0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Gp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function F0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function B0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class U0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Uu extends ve{constructor(t){super(),this.writable=!1,Po(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new U0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Bu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=F0(t);return n.length?"?"+n:""}}class H0 extends Uu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};j0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,T0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Gp()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let em=!1;try{em=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const W0=em;function V0(){}class Y0 extends H0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Bt extends ve{constructor(t,n,r){super(),this.createRequest=t,Po(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=Zp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Bt.requestsCount++,Bt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=V0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Bt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Bt.requestsCount=0;Bt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Tf);else if(typeof addEventListener=="function"){const e="onpagehide"in ht?"pagehide":"unload";addEventListener(e,Tf,!1)}}function Tf(){for(let e in Bt.requests)Bt.requests.hasOwnProperty(e)&&Bt.requests[e].abort()}const K0=function(){const e=tm({xdomain:!1});return e&&e.responseType!==null}();class J0 extends Y0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=K0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Bt(tm,this.uri(),t)}}function tm(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||W0))return new XMLHttpRequest}catch{}if(!t)try{return new ht[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const nm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class q0 extends Uu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=nm?{}:Zp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Fu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Co(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Gp()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const cl=ht.WebSocket||ht.MozWebSocket;class Q0 extends q0{createSocket(t,n,r){return nm?new cl(t,n,r):n?new cl(t,n):new cl(t)}doWrite(t,n){this.ws.send(n)}}class X0 extends Uu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=I0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=A0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&Co(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Z0={websocket:Q0,webtransport:X0,polling:J0},G0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ew=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function pa(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=G0.exec(e||""),s={},o=14;for(;o--;)s[ew[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=tw(s,s.path),s.queryKey=nw(s,s.query),s}function tw(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function nw(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const ma=typeof addEventListener=="function"&&typeof removeEventListener=="function",vs=[];ma&&addEventListener("offline",()=>{vs.forEach(e=>e())},!1);class Sn extends ve{constructor(t,n){if(super(),this.binaryType=D0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=pa(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=pa(n.host).host);Po(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=B0(this.opts.query)),ma&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Xp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Sn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Sn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=z0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Co(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Sn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ma&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=vs.indexOf(this._offlineEventListener);r!==-1&&vs.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Sn.protocol=Xp;class rw extends Sn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Sn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Sn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=d=>{const h=new Error("probe error: "+d);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function a(){o("socket closed")}function u(d){n&&d.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let iw=class extends rw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Z0[i]).filter(i=>!!i)),super(t,r)}};function sw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=pa(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const ow=typeof ArrayBuffer=="function",lw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,rm=Object.prototype.toString,aw=typeof Blob=="function"||typeof Blob<"u"&&rm.call(Blob)==="[object BlobConstructor]",uw=typeof File=="function"||typeof File<"u"&&rm.call(File)==="[object FileConstructor]";function Hu(e){return ow&&(e instanceof ArrayBuffer||lw(e))||aw&&e instanceof Blob||uw&&e instanceof File}function ws(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(ws(e[n]))return!0;return!1}if(Hu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ws(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ws(e[n]))return!0;return!1}function cw(e){const t=[],n=e.data,r=e;return r.data=ya(n,t),r.attachments=t.length,{packet:r,buffers:t}}function ya(e,t){if(!e)return e;if(Hu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=ya(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=ya(e[r],t));return n}return e}function fw(e,t){return e.data=ga(e.data,t),delete e.attachments,e}function ga(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ga(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ga(e[n],t));return e}const im=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],dw=5;var H;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(H||(H={}));class hw{constructor(t){this.replacer=t}encode(t){return(t.type===H.EVENT||t.type===H.ACK)&&ws(t)?this.encodeAsBinary({type:t.type===H.EVENT?H.BINARY_EVENT:H.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===H.BINARY_EVENT||t.type===H.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=cw(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Wu extends ve{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===H.BINARY_EVENT;r||n.type===H.BINARY_ACK?(n.type=r?H.EVENT:H.ACK,this.reconstructor=new pw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Hu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(H[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===H.BINARY_EVENT||r.type===H.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Wu.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case H.CONNECT:return Zs(n);case H.DISCONNECT:return n===void 0;case H.CONNECT_ERROR:return typeof n=="string"||Zs(n);case H.EVENT:case H.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&im.indexOf(n[0])===-1);case H.ACK:case H.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class pw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=fw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function mw(e){return typeof e=="string"}const yw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function gw(e){return e===void 0||yw(e)}function Zs(e){return Object.prototype.toString.call(e)==="[object Object]"}function vw(e,t){switch(e){case H.CONNECT:return t===void 0||Zs(t);case H.DISCONNECT:return t===void 0;case H.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&im.indexOf(t[0])===-1);case H.ACK:return Array.isArray(t);case H.CONNECT_ERROR:return typeof t=="string"||Zs(t);default:return!1}}function ww(e){return mw(e.nsp)&&gw(e.id)&&vw(e.type,e.data)}const Sw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Wu,Encoder:hw,get PacketType(){return H},isPacketValid:ww,protocol:dw},Symbol.toStringTag,{value:"Module"}));function Ct(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const kw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class sm extends ve{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ct(t,"open",this.onopen.bind(this)),Ct(t,"packet",this.onpacket.bind(this)),Ct(t,"error",this.onerror.bind(this)),Ct(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(kw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:H.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,d=n.pop();this._registerAckCallback(c,d),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:H.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case H.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case H.EVENT:case H.BINARY_EVENT:this.onevent(t);break;case H.ACK:case H.BINARY_ACK:this.onack(t);break;case H.DISCONNECT:this.ondisconnect();break;case H.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:H.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:H.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Or(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Or.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Or.prototype.reset=function(){this.attempts=0};Or.prototype.setMin=function(e){this.ms=e};Or.prototype.setMax=function(e){this.max=e};Or.prototype.setJitter=function(e){this.jitter=e};class va extends ve{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Po(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Or({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||Sw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new iw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Ct(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Ct(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ct(t,"ping",this.onping.bind(this)),Ct(t,"data",this.ondata.bind(this)),Ct(t,"error",this.onerror.bind(this)),Ct(t,"close",this.onclose.bind(this)),Ct(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Co(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new sm(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $r={};function Ss(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=sw(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=$r[i]&&s in $r[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new va(r,t):($r[i]||($r[i]=new va(r,t)),a=$r[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Ss,{Manager:va,Socket:sm,io:Ss,connect:Ss});class om extends w0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class xw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class _w extends om{constructor(t="bgio"){super();const n=r=>new xw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function Ew(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class Cw extends _0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const d in n){const h=n[d];o[d]=new h({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:d,...h})=>{const g=s[d];g!==void 0&&g(a(d,h))},a=E0(t),u={send:l,sendAll:d=>{for(const h in s)l({playerID:h,...d})}},c=i?new _w(r):new om;super(t,c,u),this.connect=(d,h)=>{s[d]=h},this.subscribe(({state:d,matchID:h})=>{if(!n)return;const g=Ew(d,o);g!==null&&setTimeout(async()=>{const v=await o[g].play(d,g);await this.onUpdate(v.action,d._stateID,h,v.action.payload.playerID)},100)})}}class Pw extends Ru{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const jf=new Map;function lm({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=jf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new Cw({game:s,bots:e,persist:t,storageKey:n}),jf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new Pw({master:o,...r})}}const Af=Ss;class Nw extends Ru{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=Af(t+this.gameName,this.socketOpts)}else this.socket=Af("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function If({server:e,socketOpts:t}={}){return n=>new Nw({server:e,socketOpts:t,...n})}function am(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>b.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends b.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=Qv({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return b.createElement(l);let d=null;return i&&(d=b.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),b.createElement("div",{className:"bgio-client"},d)}},t.propTypes={matchID:bt.string,playerID:bt.string,credentials:bt.string,debug:bt.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class Ow{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Zv({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function Tw(e){return new Ow(e)}class um extends b.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return b.createElement("div",null,b.createElement("p",{className:"phase-title"},"Choose a player name:"),b.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),b.createElement("span",{className:"buttons"},b.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),b.createElement("br",null),b.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,b.createElement("br",null)))}}um.defaultProps={playerName:""};class jw extends b.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>b.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>b.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>b.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>b.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?b.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),b.createElement("tr",{key:"line-"+t.matchID},b.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),b.createElement("td",{key:"cell-status-"+t.matchID},n),b.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),b.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Aw extends b.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>b.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>b.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return b.createElement("div",null,b.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),b.createElement("span",null,"Players:"),b.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),b.createElement("span",{className:"buttons"},b.createElement("button",{onClick:this.onClickCreate},"Create")))}}var We;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(We||(We={}));class cm extends b.Component{constructor(t){super(t),this.state={phase:We.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=Tw({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:We.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:We.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?If({server:this.props.gameServer}):If()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=ys;s=lm({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:We.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:We.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return b.createElement(jw,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=Ef.load("lobbyState")||{};t.phase&&t.phase===We.PLAY&&(t.phase=We.LIST),t.phase&&t.phase!==We.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||We.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};Ef.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):b.createElement("div",{id:"lobby-view",style:{padding:50}},b.createElement("div",{className:this._getPhaseVisibility(We.ENTER)},b.createElement(um,{key:i,playerName:i,onEnter:this._enterLobby})),b.createElement("div",{className:this._getPhaseVisibility(We.LIST)},b.createElement("p",null,"Welcome, ",i),b.createElement("div",{className:"phase-title",id:"match-creation"},b.createElement("span",null,"Create a match:"),b.createElement(Aw,{games:t,createMatch:this._createMatch})),b.createElement("p",{className:"phase-title"},"Join a match:"),b.createElement("div",{id:"instances"},b.createElement("table",null,b.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),b.createElement("span",{className:"error-msg"},r,b.createElement("br",null))),b.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),b.createElement("div",{className:this._getPhaseVisibility(We.PLAY)},o&&b.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),b.createElement("div",{className:"buttons",id:"match-exit"},b.createElement("button",{onClick:this._exitMatch},"Exit match"))),b.createElement("div",{className:"buttons",id:"lobby-exit"},b.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}cm.propTypes={gameComponents:bt.array.isRequired,lobbyServer:bt.string,gameServer:bt.string,debug:bt.bool,clientFactory:bt.func,refreshInterval:bt.number};cm.defaultProps={debug:!1,clientFactory:am,refreshInterval:2e3};const Qe=["Hearts","Diamonds","Clubs","Spades"],ri=40,fm=5,Iw=["","","","","",""],Mw={Hearts:"",Diamonds:"",Clubs:"",Spades:""},Dw={Hearts:"Wheat",Diamonds:"Beets",Clubs:"Potatoes",Spades:"Sunflowers"},dm={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function bw(e,t){const n={};if(e.deckType===36)for(const r of Qe)n[r]=[{suit:r,value:1}];else for(const r of Qe){const i=Array.from({length:fm},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function hm(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of Qe){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),d=t[o]||[];r[o]=[...d,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function rs(e,t){return t.deckType!==36||e<2||e>5}function pm(e,t,n,r,i){const s=[];for(const a of Qe)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])rs(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])rs(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])rs(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>rs(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function mm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function Rw(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function Lw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function zw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function $w(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function wa(e){return e.players.every(t=>t.hand.length===1)}function ym(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=ri&&!e.claimedJobs.includes(r)&&Fw(e,r,n)}function Fw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);e.revealedJobs[t]=null,n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Bw(e){if(!$w(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function Sa(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=ri||(t.miceVariant?Uw(e,n,r,t):t.deckType===36?Hw(e,n,r,t):Ww(e,n,r,t))}function Vu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Gs(e,`${r.suit}-${r.value}`),!0;return!1}function Yu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function Ku(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Gs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function Pi(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Uw(e,t,n,r){if(Vu(e,n,r))return;const i=Yu(n,e.trump,r),s=Ku(n,e.trump,r),o=gm(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),eo(e,o[0]),s&&o.length>1&&(eo(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${Pi(o[1][1])}`)))}function Hw(e,t,n,r){if(Vu(e,n,r))return;const i=Yu(n,e.trump,r),s=Ku(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=gm(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(d=>d.suit===t);for(const d of c)l.some(([g,v])=>g===u&&v.suit===d.suit&&v.value===d.value)||l.push([u,d])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((d,h)=>h.value-d.value),eo(e,[u,c[0]]),s&&c.length>1&&(eo(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${Pi(c[1])}`)))}function Ww(e,t,n,r){if(Vu(e,n,r))return;const i=Yu(n,e.trump,r),s=Ku(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(h=>h.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(h=>h.suit!==t);const u=(o.plot.revealed||[]).filter(h=>h.suit===t).sort((h,g)=>g.value-h.value);if(u.length===0)continue;const c=u[0],d=o.plot.revealed.findIndex(h=>h.suit===c.suit&&h.value===c.value);if(o.plot.revealed.splice(d,1),Gs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${Pi(c)}`),s&&u.length>1){const h=u[1],g=o.plot.revealed.findIndex(v=>v.suit===h.suit&&v.value===h.value);o.plot.revealed.splice(g,1),Gs(e,`${h.suit}-${h.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${Pi(h)}`)}}}function gm(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const d of c.revealed||[])d.suit===t&&a.push({card:d,stack:c,location:"revealed"});for(const d of c.hidden||[])d.suit===t&&a.push({card:d,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const d=o.plot.hidden.findIndex(h=>h.suit===c.suit&&h.value===c.value);o.plot.hidden.splice(d,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:d,location:h}of a){const g=h==="hidden"?d.hidden:d.revealed,v=g.findIndex(k=>k.suit===c.suit&&k.value===c.value);v!==-1&&(g.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((h,g)=>g.value>h.value?g:h);if(l.some(h=>h.suit===c.suit&&h.value===c.value)){const h=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(h,1),o.plot.revealed.push(c),s.push([o,c])}else{const h=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(h){const{stack:g,location:v}=h,k=v==="hidden"?g.hidden:g.revealed,E=k.findIndex(m=>m.suit===c.suit&&m.value===c.value);E!==-1&&(k.splice(E,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function eo(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Gs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${Pi(n)}`)}function Vw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function Yw(e,t){const n=Vw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function Kw(e,t){const n=Yw(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function ka(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of Qe)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>fm)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of Qe)e.workHours[o]=0;const{jobs:r,isFamine:i}=hm(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of Qe)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.trumpSelector=(e.trumpSelector+1)%e.numPlayers,e.workersDeck=pm(e.players,e.jobBuckets,e.exiled,t,n),mm(e.players,e.workersDeck,e.isFamine),!1}function vm(e,t){const n=Qe.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function Mf(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function wm(e,t,n){var d,h,g;const r=e.workHours[t]||0;if((d=e.claimedJobs)==null?void 0:d.includes(t))return-10;const s=Math.max(0,40-r),o=s<20?(20-s)*2:0,l=e.players[n],c=[...((h=l.plot)==null?void 0:h.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(v=>v.suit===t).length*15;return o+c}function Jw(e,t,n){var d,h,g,v,k;const r=e.players[t],i=r.hand[n];let s=0;const o=e.currentTrick.length===0,l=(h=(d=e.currentTrick[0])==null?void 0:d[1])==null?void 0:h.suit,a=e.currentTrick.map(([,E])=>E),u=qw(e,i,a),c=Qw(e,t);if(o){const E=wm(e,i.suit,t);s+=E*.3,i.value>=8&&i.value<=11&&(s+=5),i.suit===e.trump&&e.trickCount<2&&(s-=10)}else if(c>0&&u>.5?s+=c*u*20:c<0&&u<.5&&(s+=Math.abs(c)*(1-u)*15),i.suit!==l){const m=[...((g=r.plot)==null?void 0:g.revealed)||[],...((v=r.plot)==null?void 0:v.hidden)||[]].filter(f=>f.suit===i.suit).length;(k=e.claimedJobs)!=null&&k.includes(i.suit)||(s+=m*3)}return s+=Math.random()*2,s}function qw(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let i=n[0];for(const s of n)(s.suit===e.trump&&i.suit!==e.trump||s.suit===i.suit&&s.value>i.value)&&(i=s);return t.suit===e.trump&&i.suit!==e.trump?.8:t.suit===i.suit&&t.value>i.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function Qw(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,s])=>s.suit))];for(const s of r){const o=wm(e,s,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function Xw(e,t,n){var d,h;let r=0;const i=e.players[n],s=i.hand||[],o=s.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=s.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((d=i.plot)==null?void 0:d.revealed)||[],...((h=i.plot)==null?void 0:h.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function Zw(e,t,n){var s,o,l,a,u,c,d;const r=[],i=e.players[n];if(t.phase==="planning"&&!e.trump)for(const h of Qe){const g=Xw(e,h,n);r.push({move:"setTrump",args:[h],score:g})}else if(t.phase==="trick")for(let h=0;h<i.hand.length;h++){const g=i.hand[h],v=(o=(s=e.currentTrick[0])==null?void 0:s[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&i.hand.some(m=>m.suit===v)&&g.suit!==v)continue;const k=Jw(e,n,h);r.push({move:"playCard",args:[h],score:k})}else if(t.phase==="assignment"&&n===e.lastWinner){const h=[...new Set(e.lastTrick.map(([,_])=>_.suit))],g=e.players[n],v=[...((l=g.plot)==null?void 0:l.revealed)||[],...((a=g.plot)==null?void 0:a.hidden)||[]],k=e.lastTrick.reduce((_,[,T])=>{var U;return _+Mf(T,e.trump,(U=e.variants)==null?void 0:U.nomenclature)},0);let E=h[0],m=-1/0;for(const _ of h){const T=e.workHours[_]||0;if((u=e.claimedJobs)==null?void 0:u.includes(_)){m<0&&(m=0,E=_);continue}const A=T+k;let D=0;A>=40?(D+=200,D-=(A-40)*2):(D+=A,A>=30?D+=30:A>=20&&(D+=15));const Y=v.filter(K=>K.suit===_).length;D+=Y*20,D>m&&(m=D,E=_)}let f=0;const y={};for(const[,_]of e.lastTrick){const T=Mf(_,e.trump,(c=e.variants)==null?void 0:c.nomenclature);let U=_.suit,A=-1/0;for(const D of h){const Y=e.workHours[D]||0,K=(d=e.claimedJobs)==null?void 0:d.includes(D);let J=0;if(K)J=0;else{const we=Y+T;we>=40?J+=150:(J+=we*.5,we>=30&&(J+=15));const pe=v.filter(te=>te.suit===D).length;J+=pe*10}J>A&&(A=J,U=D)}y[`${_.suit}-${_.value}`]=U,f+=A}const w=e.pendingAssignments||{};let N;if(m>=f){N={};for(const[,_]of e.lastTrick)N[`${_.suit}-${_.value}`]=E}else N=y;let O=!1;for(const[_,T]of Object.entries(N))w[_]!==T&&(O=!0,r.push({move:"assignCard",args:[_,T],score:100}));O||r.push({move:"submitAssignments",args:[],score:100})}else t.phase;return r.sort((h,g)=>g.score-h.score),r}function Df(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function Gw({ctx:e,random:t},n){const r={...dm,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...Iw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Df(0,!0,""));else{const d=Math.floor(t.Number()*s.length),h=s.splice(d,1)[0];o.push(Df(c,!1,h))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:bw(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1,trumpSelector:Math.floor(t.Number()*i)};for(const c of Qe)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=hm(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=pm(l.players,l.jobBuckets,l.exiled,r,t),mm(l.players,l.workersDeck,l.isFamine),l}function e1({G:e,random:t},n){n&&Qe.includes(n)?e.trump=n:vm(e,t)}function t1({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!Rw(e,i,r))return _n;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function n1({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function r1({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return _n;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return _n;if(ym(e,e.pendingAssignments,e.variants),e.pendingAssignments={},wa(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),Sa(e,e.variants),ka(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function i1({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return _n;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return _n;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function s1({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const o1={name:"kolkhoz",setup:Gw,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:e1},turn:{order:{first:({G:e})=>e.trumpSelector,next:()=>{}}},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"trumpSelector:",e.trumpSelector,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&vm(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:t1},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=Lw(e);if(n!==null){zw(e,n);const r=Bw(e.lastTrick);if(r?(ym(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&wa(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),Sa(e,e.variants),ka(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=wa(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:n1,submitAssignments:r1},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),Sa(e,e.variants),ka(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:i1,confirmSwap:s1},turn:{order:{first:()=>0,next:()=>{}}},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return Kw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),i=Zw(e,t,r);return i.slice(0,Math.min(3,i.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function hr(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function l1(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function ct({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,d=s?"assets/cards/back.svg":hr(e);return t!==0||n!==0?p.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[p.jsx("image",{href:d,width:r,height:c,x:-r/2,y:-c/2}),l&&p.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#d4a857",strokeWidth:"3",rx:"8"})]}):p.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:p.jsx("img",{src:d,alt:s?"Card back":`${l1(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function a1({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s}){if(!e||e.length===0)return p.jsx("div",{className:"hand empty",children:"No cards in hand"});const o=Math.min(8,60/e.length),a=-(o*(e.length-1))/2;return p.jsx("div",{className:"hand",children:e.map((u,c)=>{const d=!s||s.includes(c),h=a+c*o,g=Math.abs(h)*.5;return p.jsx("div",{className:`hand-card ${d&&n?"playable":""} ${d?"":"invalid"}`,style:{transform:`rotate(${h}deg) translateY(${g}px)`,zIndex:c},onClick:()=>{n&&d&&t(c)},children:p.jsx(ct,{card:u,width:100,highlight:d&&n,dimmed:!d&&n})},`${u.suit}-${u.value}-${c}`)})})}function u1({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450,scale:s=1,year:o,trump:l,phase:a,isMyTurn:u,currentPlayerName:c,showInfo:d=!1}){const h={Hearts:"",Diamonds:"",Clubs:"",Spades:""},g=800*s,v=280*s,k=110*s,E=k*1.4,m=160*s,f=A=>{const Y=[3,0,1,2][A];return{x:-1.5*m+Y*m,y:0}},y=6*s,w=10*s,N=6*s,O=i-v/2+32*s,_=18*s,T=r-g/2+15*s,U=r+g/2-15*s;return p.jsxs("g",{className:"trick-area",children:[p.jsx("rect",{x:r-g/2,y:i-v/2,width:g,height:v,fill:"#1a1a1a",stroke:"#d4a857",strokeWidth:3*s,rx:w}),p.jsx("rect",{x:r-g/2+y,y:i-v/2+y,width:g-y*2,height:v-y*2,fill:"none",stroke:"#8b0000",strokeWidth:2*s,rx:N}),p.jsxs("g",{className:"trick-info-bar",children:[d?p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:T,y:O,textAnchor:"start",fill:"#d4a857",fontSize:_,fontFamily:"'Oswald', sans-serif",children:["Year ",o,"/5"]}),p.jsx("text",{x:T+75*s,y:O,textAnchor:"start",fill:"#888",fontSize:_,fontFamily:"'Oswald', sans-serif",children:"Trump:"}),p.jsx("text",{x:T+120*s,y:O,textAnchor:"start",fill:l==="Hearts"||l==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:l?h[l]:"?"})]}):null,e.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("text",{x:r-25*s,y:O,textAnchor:"end",fill:"#888",fontSize:_,fontFamily:"'Oswald', sans-serif",children:"Lead:"}),p.jsx("text",{x:r-20*s,y:O,textAnchor:"start",fill:e[0][1].suit==="Hearts"||e[0][1].suit==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:14*s,children:h[e[0][1].suit]})]}),d&&p.jsx("text",{x:U,y:O,textAnchor:"end",fill:u?"#4CAF50":"#e8dcc4",fontSize:_,fontWeight:u?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:u?"Your turn":c})]}),Array.from({length:t}).map((A,D)=>{if(e.some(([J])=>J===D))return null;const K=f(D);return p.jsx("rect",{x:r+K.x-k/2,y:i+K.y-E/2,width:k,height:E,fill:"none",stroke:"rgba(255,255,255,0.15)",strokeWidth:1*s,strokeDasharray:`${4*s},${4*s}`,rx:4*s},`slot-${D}`)}),e.map(([A,D],Y)=>{const K=f(A);return p.jsx(ct,{card:D,x:r+K.x,y:i+K.y,width:k},`${D.suit}-${D.value}`)})]})}function c1({revealedJobs:e,workHours:t,jobBuckets:n,claimedJobs:r,trump:i,phase:s,pendingAssignments:o,onAssign:l,lastTrick:a}){const k=f=>f==="Hearts"||f==="Diamonds"?"#c41e3a":"#e8dcc4",E=f=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[f],m=f=>({11:{russian:"",english:"Jack (Drunkard)",power:"Worth 0 work hours. Gets exiled instead of player cards"},12:{russian:"",english:"Queen (Informant)",power:"All players become vulnerable to requisition"},13:{russian:"",english:"King (Party Official)",power:"Exiles two cards instead of one"}})[f]||null;return p.jsx("g",{className:"job-piles-area",children:Qe.map((f,y)=>{const w=20+y*130,N=(t==null?void 0:t[f])||0,O=r==null?void 0:r.includes(f),_=f===i,T=(n==null?void 0:n[f])||[],U=e==null?void 0:e[f],A=Array.isArray(U)?U:U?[U]:[],D=60,Y=170,K=Y+98+30;return p.jsxs("g",{className:`job-pile ${O?"claimed":""}`,children:[p.jsx("rect",{x:w-65,y:D,width:130,height:100,fill:_?"rgba(255,215,0,0.12)":"rgba(0,0,0,0.5)",stroke:_?"#FFD700":"#444",strokeWidth:_?2:1,rx:"6"}),_&&p.jsx("text",{x:w,y:D+20,textAnchor:"middle",fill:"#FFD700",fontSize:"16",fontWeight:"bold",children:"TRUMP"}),p.jsx("text",{x:w,y:D+(_?50:42),textAnchor:"middle",fill:k(f),fontSize:"32",children:E(f)}),p.jsxs("g",{style:{cursor:"help"},children:[p.jsx("title",{children:Dw[f]}),p.jsx("text",{x:w,y:D+(_?70:64),textAnchor:"middle",fill:"#ccc",fontSize:"16",fontWeight:"600",pointerEvents:"all",children:Mw[f]})]}),p.jsx("rect",{x:w-55,y:D+82,width:110,height:14,fill:"#222",rx:"7"}),p.jsx("rect",{x:w-55,y:D+82,width:Math.min(110,N/ri*110),height:14,fill:O||N>=ri?"#4CAF50":"#2196F3",rx:"7"}),p.jsx("text",{x:w,y:D+93,textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"bold",children:O?" DONE":`${N}/${ri}`}),O?p.jsx(ct,{card:{},faceDown:!0,x:w,y:Y+98/2,width:70}):A.map((J,we)=>{const pe=m(J.value),te=J.suit===i&&pe,j=A.length>1?(we-(A.length-1)/2)*15:0;return p.jsxs("g",{children:[p.jsx(ct,{card:J,x:w+j,y:Y+98/2,width:70}),te&&p.jsxs("g",{style:{cursor:"help"},children:[p.jsxs("title",{children:[pe.english,": ",pe.power]}),p.jsx("text",{x:w+j,y:Y+98+22,textAnchor:"middle",fill:"#FFD700",fontSize:"14",fontWeight:"600",pointerEvents:"all",children:pe.russian})]})]},`reward-${we}`)}),T.length>0&&p.jsxs("text",{x:w,y:K-8,textAnchor:"middle",fill:"#999",fontSize:"13",fontWeight:"500",children:[T.length," assigned"]}),T.map((J,we)=>{const pe=K+49+we*22;return p.jsx("g",{children:p.jsx(ct,{card:J,x:w,y:pe,width:70})},`assigned-${we}`)}),(()=>{const J=T.map((te,j)=>({card:te,idx:j,info:m(te.value)})).filter(({card:te,info:j})=>te.suit===i&&j);if(J.length===0)return null;const pe=K+98/2+(T.length-1)*22+98/2+12;return J.map(({info:te},j)=>p.jsxs("g",{style:{cursor:"help"},children:[p.jsxs("title",{children:[te.english,": ",te.power]}),p.jsx("text",{x:w,y:pe+j*16,textAnchor:"middle",fill:"#FFD700",fontSize:"13",fontWeight:"600",pointerEvents:"all",children:te.russian})]},`label-${j}`))})()]},f)})})}const bf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function f1({player:e,position:t,isActive:n,isBrigadeLeader:r,playerIndex:i,scale:s=1}){var te,j,$,F;const{x:o,y:l}=t,a=((te=e.hand)==null?void 0:te.length)||0,u=((j=e.plot)==null?void 0:j.revealed)||[],c=((F=($=e.plot)==null?void 0:$.hidden)==null?void 0:F.length)||0,d=u.reduce((q,Q)=>q+Q.value,0)+c,h=40*s,g=h*1.4,v=17*s,k=48*s,E=8*s,m=12*s,f=70*s,y=Math.min(5,a)*v+h-v,w=u.length>0?u.length*v+h-v:c>0?h:0,N=u.length>0||c>0?8*s:0,O=E+k+m+f+m+y+N+w+E,_=Math.max(k,g)+E*2,T=o-O/2,U=l-_/2,A=l;let D=T+E;const Y=D;D+=k+m;const K=D;D+=f+m;const J=D;D+=y;const we=D+N/2,pe=D+N;return p.jsxs("g",{className:`player-area ${n?"active":""}`,children:[p.jsx("rect",{x:T,y:U,width:O,height:_,fill:n?"rgba(196, 30, 58, 0.2)":"rgba(20,20,20,0.85)",stroke:n?"#d4a857":"#444",strokeWidth:n?2:1,rx:4*s}),p.jsx("image",{href:bf[(i-1)%bf.length],x:Y,y:A-k/2,width:k,height:k,style:{imageRendering:"pixelated"}}),p.jsxs("text",{x:K,y:A-8*s,textAnchor:"start",fill:n?"#d4a857":"#e8dcc4",fontSize:13*s,fontWeight:n?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[e.name,r&&" "]}),p.jsxs("text",{x:K,y:A+12*s,textAnchor:"start",fill:"#888",fontSize:10*s,fontFamily:"'Oswald', sans-serif",children:[a," cards"]}),d>0&&p.jsxs("text",{x:K+48*s,y:A+12*s,textAnchor:"start",fill:"#c41e3a",fontSize:10*s,fontFamily:"'Oswald', sans-serif",children:[d,"pts"]}),Array.from({length:Math.min(5,a)}).map((q,Q)=>p.jsx("image",{href:"assets/cards/back.svg",x:J+Q*v,y:A-g/2,width:h,height:g},`hand-${Q}`)),(u.length>0||c>0)&&p.jsx("line",{x1:we,y1:A-g/2+4*s,x2:we,y2:A+g/2-4*s,stroke:"#555",strokeWidth:1*s}),u.map((q,Q)=>p.jsx("image",{href:hr(q),x:pe+Q*v,y:A-g/2,width:h,height:g},`revealed-${Q}`)),u.length===0&&c>0&&p.jsx("image",{href:"assets/cards/back.svg",x:pe,y:A-g/2,width:h,height:g,opacity:.5})]})}function d1({exiled:e,currentYear:t}){const o=k=>{const[E,m]=k.split("-");return{suit:E,value:parseInt(m,10)}},l=Object.values(e||{}).flat().length,a=32,u=[58,175,292],c=a+145,d=[116,233],h=50,g=22,v=(k,E,m)=>{const f=(e==null?void 0:e[k])||[],y=k<t,w=k===t;return p.jsxs("g",{className:"gulag-year",children:[p.jsx("rect",{x:E-h/2,y:m,width:h,height:g,fill:w?"rgba(196,30,58,0.35)":"rgba(30,30,30,0.9)",stroke:w?"#c41e3a":"#3a3a3a",strokeWidth:w?2:1}),p.jsx("text",{x:E,y:m+15,textAnchor:"middle",fill:y?"#5a5a5a":w?"#ff4757":"#888",fontSize:"12",fontWeight:w?"bold":"normal",fontFamily:"monospace",children:k}),f.map((N,O)=>{const _=o(N),T=m+g+8+O*16,U=hr(_);return p.jsx("image",{href:U,x:E-55/2,y:T,width:55,height:77},O)}),f.length===0&&y&&p.jsx("rect",{x:E-55/2,y:m+g+8,width:55,height:77,fill:"none",stroke:"#2a2a2a",strokeWidth:1,strokeDasharray:"4,4",rx:"3"}),f.length>0&&p.jsxs("g",{children:[p.jsx("circle",{cx:E+55/2,cy:m+g+14,r:9,fill:"#c41e3a"}),p.jsx("text",{x:E+55/2,y:m+g+18,textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:f.length})]})]},k)};return p.jsxs("g",{className:"gulag-area",children:[p.jsx("text",{x:175,y:4,textAnchor:"middle",fill:"#c41e3a",fontSize:"14",fontWeight:"bold",letterSpacing:"0.2em",fontFamily:"monospace",children:"GULAG"}),l>0&&p.jsxs("text",{x:175,y:20,textAnchor:"middle",fill:"#555",fontSize:"10",fontFamily:"monospace",children:["[",l," exiled]"]}),v(1,u[0],a),v(2,u[1],a),v(3,u[2],a),v(4,d[0],c),v(5,d[1],c)]})}function h1({year:e,trump:t,phase:n,currentPlayer:r,players:i,isMyTurn:s,exiled:o}){var h;const u=g=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[g]||g,c=g=>g==="Hearts"||g==="Diamonds"?"#c41e3a":"#e8dcc4",d=g=>({planning:"Select Trump",trick:"Trick Phase",assignment:"Assign Cards",plotSelection:"Select Plot Card",requisition:"Requisition",swap:"Swap Cards"})[g]||g;return p.jsxs("g",{className:"right-sidebar",children:[p.jsx("rect",{x:1540,y:120,width:360,height:180,fill:"rgba(20,20,20,0.9)",stroke:"#d4a857",strokeWidth:1,rx:"10"}),p.jsx("text",{x:1560,y:150,fill:"#a09080",fontSize:"11",children:"Year"}),p.jsxs("text",{x:1560,y:170,fill:"#d4a857",fontSize:"18",fontWeight:"bold",children:[e,"/5"]}),p.jsx("text",{x:1640,y:150,fill:"#a09080",fontSize:"11",children:"Trump"}),t?p.jsxs("text",{x:1640,y:170,fill:c(t),fontSize:"18",fontWeight:"bold",children:[u(t)," ",t]}):p.jsx("text",{x:1640,y:170,fill:"#a09080",fontSize:"14",children:"Not selected"}),p.jsx("text",{x:1560,y:205,fill:"#a09080",fontSize:"11",children:"Phase"}),p.jsx("text",{x:1560,y:225,fill:"#e8dcc4",fontSize:"14",children:d(n)}),p.jsx("text",{x:1560,y:255,fill:"#a09080",fontSize:"11",children:"Turn"}),s?p.jsx("text",{x:1560,y:275,fill:"#d4a857",fontSize:"14",fontWeight:"bold",children:"Your Turn!"}):p.jsxs("text",{x:1560,y:275,fill:"#a09080",fontSize:"12",children:["Waiting for ",(h=i[parseInt(r,10)])==null?void 0:h.name,"..."]}),p.jsx("g",{transform:"translate(1545, 315)",children:p.jsx(d1,{exiled:o,currentYear:e})})]})}function p1({G:e,ctx:t,moves:n,playerID:r}){var x,C,B,L,R,ne,G,Re,le,me,_e,Xe,It,wt;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=ye.useState(null),[u,c]=ye.useState(null),[d,h]=ye.useState(null),[g,v]=ye.useState(null),[k,E]=ye.useState(!1),[m,f]=ye.useState(!1),[y,w]=ye.useState(!1),[N,O]=ye.useState(!1),[_,T]=ye.useState(!1),U=ye.useRef(e.year),[A,D]=ye.useState(window.innerWidth);ye.useEffect(()=>{const M=()=>D(window.innerWidth);return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]);const Y=A>1024,K=Y?350:0,J=Y?1570:1920,te=(J-K)/1220;ye.useEffect(()=>{e.year!==U.current&&(T(!1),U.current=e.year)},[e.year]);const j=M=>{o==="trick"&&s&&n.playCard(M)},$=M=>{o==="planning"&&n.setTrump(M)},F=(M,z)=>{n.assignCard(M,z)},q=()=>{n.submitAssignments()},Q=()=>{l!==null&&u!==null&&d!==null&&(n.swapCard(u,l,d),a(null),c(null),h(null))},Ht=(M,z)=>{u===M&&d===z?(c(null),h(null)):(c(M),h(z))},vt=()=>{T(!0),n.confirmSwap()},He=(K+J)/2,Se=460,At=80,Mi=320*te,S=(M,z)=>{const se=[{x:He,y:800},{x:He-Mi,y:At},{x:He,y:At},{x:He+Mi,y:At}];return se[M]||se[0]};if(t.gameover){const{winner:M,scores:z}=t.gameover;return p.jsxs("div",{className:"game-over",children:[p.jsx("h1",{children:"Game Over!"}),p.jsxs("h2",{children:["Winner: ",e.players[M].name]}),p.jsx("div",{className:"final-scores",children:e.players.map((se,Ze)=>p.jsxs("div",{className:Ze===M?"winner":"",children:[se.name,": ",z[Ze]," points"]},Ze))}),p.jsx("p",{children:"(Lowest score wins)"})]})}return p.jsxs("div",{className:"game-board",children:[o==="planning"&&!e.trump&&p.jsxs("div",{className:"trump-selection",children:[p.jsx("h3",{children:"Select Trump Suit"}),p.jsx("div",{className:"suit-buttons",children:Qe.map(M=>p.jsxs("button",{onClick:()=>$(M),className:`suit-btn ${M.toLowerCase()}`,children:[Rf(M)," ",M]},M))})]}),p.jsxs("svg",{viewBox:"0 0 1920 1080",className:"board-svg",children:[p.jsx(c1,{revealedJobs:e.revealedJobs,workHours:e.workHours,jobBuckets:e.jobBuckets,claimedJobs:e.claimedJobs,trump:e.trump,phase:o,pendingAssignments:e.pendingAssignments,onAssign:F,lastTrick:e.lastTrick}),p.jsx(u1,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:He,centerY:Se,scale:te,year:e.year,trump:e.trump,phase:o,isMyTurn:s,currentPlayerName:(x=e.players[t.currentPlayer])==null?void 0:x.name,showInfo:!Y}),e.players.map((M,z)=>{if(z===i)return null;const se=S(z,e.numPlayers);return p.jsx(f1,{player:M,position:se,isActive:parseInt(t.currentPlayer,10)===z,isBrigadeLeader:M.brigadeLeader,playerIndex:z,scale:te},z)}),p.jsx(h1,{year:e.year,trump:e.trump,phase:o,currentPlayer:t.currentPlayer,players:e.players,isMyTurn:s,exiled:e.exiled})]}),p.jsx("div",{className:"mobile-toggles mobile-toggles-left",children:p.jsx("button",{className:`mobile-toggle-btn ${k?"active":""}`,onClick:()=>{E(!k),f(!1),w(!1)},children:"Jobs"})}),p.jsxs("div",{className:"mobile-toggles mobile-toggles-right",children:[p.jsx("button",{className:`mobile-toggle-btn ${m?"active":""}`,onClick:()=>{f(!m),E(!1),w(!1)},children:"Gulag"}),p.jsx("button",{className:`mobile-toggle-btn menu-btn ${y?"active":""}`,onClick:()=>{w(!y),E(!1),f(!1)},children:""})]}),k&&p.jsx("div",{className:"mobile-panel jobs-panel",onClick:()=>E(!1),children:p.jsxs("div",{className:"mobile-panel-content jobs-content",onClick:M=>M.stopPropagation(),children:[p.jsx("button",{className:"mobile-panel-close",onClick:()=>E(!1),children:""}),p.jsxs("div",{className:"jobs-layout",children:[p.jsxs("div",{className:"jobs-title-section",children:[p.jsx("h3",{className:"jobs-title",children:"JOBS"}),p.jsxs("div",{className:"jobs-subtitle",children:[((C=e.claimedJobs)==null?void 0:C.length)||0,"/4 done"]})]}),p.jsx("div",{className:"mobile-jobs-row",children:Qe.map(M=>{var Kn,Ju,qu,Qu;const z=((Kn=e.workHours)==null?void 0:Kn[M])||0,se=(Ju=e.claimedJobs)==null?void 0:Ju.includes(M),Ze=M===e.trump,Te=((qu=e.jobBuckets)==null?void 0:qu[M])||[],St=(Qu=e.revealedJobs)==null?void 0:Qu[M],kt=Array.isArray(St)?St:St?[St]:[],ut=Math.min(100,z/40*100);return p.jsxs("div",{className:`mobile-job-column ${Ze?"trump":""} ${se?"claimed":""}`,children:[p.jsxs("div",{className:"job-header-row",children:[p.jsx("span",{className:`suit-symbol ${M.toLowerCase()}`,children:Rf(M)}),p.jsxs("div",{className:"progress-bar-container",children:[p.jsx("div",{className:`progress-bar-fill ${se?"complete":""}`,style:{width:`${ut}%`}}),p.jsx("span",{className:"progress-text",children:se?"":`${z}/40`})]})]}),p.jsxs("div",{className:"job-cards-stack",children:[se?p.jsx("img",{src:"assets/cards/back.svg",alt:"claimed",className:"job-card"}):kt.map((On,No)=>p.jsx("img",{src:hr(On),alt:`${On.value} of ${On.suit}`,className:"job-card reward"},`reward-${No}`)),Te.slice(0,12).map((On,No)=>p.jsx("img",{src:hr(On),alt:`${On.value} of ${On.suit}`,className:"job-card",style:{marginTop:"-45px"}},`assigned-${No}`)),Te.length>12&&p.jsxs("div",{className:"more-cards",children:["+",Te.length-12]})]})]},M)})})]})]})}),m&&p.jsx("div",{className:"mobile-panel gulag-panel",onClick:()=>f(!1),children:p.jsxs("div",{className:"mobile-panel-content gulag-content",onClick:M=>M.stopPropagation(),children:[p.jsx("button",{className:"mobile-panel-close",onClick:()=>f(!1),children:""}),p.jsxs("div",{className:"gulag-layout",children:[p.jsxs("div",{className:"gulag-title-section",children:[p.jsx("h3",{className:"gulag-title",children:"GULAG"}),p.jsxs("div",{className:"gulag-subtitle",children:[Object.values(e.exiled||{}).flat().length," exiled"]})]}),p.jsx("div",{className:"mobile-gulag-years",children:[1,2,3,4,5].map(M=>{var St;const z=((St=e.exiled)==null?void 0:St[M])||[],se=M===e.year,Ze=M<e.year,Te=kt=>{const[ut,Kn]=kt.split("-");return{suit:ut,value:parseInt(Kn,10)}};return p.jsxs("div",{className:`gulag-year-column ${se?"current":""} ${Ze?"past":""}`,children:[p.jsxs("div",{className:"year-header",children:[p.jsx("span",{className:"year-number",children:M}),z.length>0&&p.jsx("span",{className:"year-badge",children:z.length})]}),p.jsxs("div",{className:"year-cards",children:[z.length>0?z.slice(0,10).map((kt,ut)=>{const Kn=Te(kt);return p.jsx("img",{src:hr(Kn),alt:kt,className:"gulag-card",style:{marginTop:ut>0?"-40px":"0"}},ut)}):p.jsx("div",{className:"empty-slot"}),z.length>10&&p.jsxs("div",{className:"more-cards",children:["+",z.length-10]})]})]},M)})})]})]})}),y&&p.jsx("div",{className:"mobile-panel",onClick:()=>w(!1),children:p.jsxs("div",{className:"mobile-panel-content menu-panel",onClick:M=>M.stopPropagation(),children:[p.jsx("button",{className:"mobile-panel-close",onClick:()=>w(!1),children:""}),p.jsx("h3",{children:"Menu"}),p.jsxs("div",{className:"menu-options",children:[p.jsx("button",{className:"menu-option",onClick:()=>{O(!0),w(!1)},children:" Rules"}),p.jsx("button",{className:"menu-option",onClick:()=>window.location.reload(),children:" New Game"})]})]})}),N&&p.jsx("div",{className:"mobile-panel rules-panel",onClick:()=>O(!1),children:p.jsxs("div",{className:"mobile-panel-content rules-content",onClick:M=>M.stopPropagation(),children:[p.jsx("button",{className:"mobile-panel-close",onClick:()=>O(!1),children:""}),p.jsx("h3",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h4",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h4",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("p",{children:" Face cards (J/Q/K) of trump have special powers"}),p.jsx("h4",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable to requisition"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),p.jsx("h4",{children:"Requisition"}),p.jsx("p",{children:"At year end, failed jobs trigger requisition - your highest matching card goes to the Gulag!"}),p.jsx("h4",{children:"Scoring"}),p.jsx("p",{children:"Cards in your plot = penalty points. Protect your plot to win!"})]})]})}),p.jsx(a1,{cards:((B=e.players[i])==null?void 0:B.hand)||[],onPlayCard:j,canPlay:o==="trick"&&s,leadSuit:(R=(L=e.currentTrick[0])==null?void 0:L[1])==null?void 0:R.suit,trump:e.trump,validIndices:m1(e,i,o)}),o==="assignment"&&e.lastWinner===i&&(()=>{const M=[...new Set(e.lastTrick.map(([,z])=>z.suit))];return p.jsxs("div",{className:"assignment-ui",children:[p.jsx("h3",{children:"Assign cards to jobs"}),p.jsx("p",{children:"Assign each card to a job from this trick"}),p.jsx("div",{className:"assignment-cards",children:e.lastTrick.map(([z,se],Ze)=>{var kt;const Te=`${se.suit}-${se.value}`,St=(kt=e.pendingAssignments)==null?void 0:kt[Te];return p.jsxs("div",{className:"assignment-card",children:[p.jsx(ct,{card:se,width:80}),p.jsx("select",{value:St||se.suit,onChange:ut=>F(Te,ut.target.value),children:M.map(ut=>p.jsx("option",{value:ut,children:ut},ut))})]},Ze)})}),p.jsx("button",{onClick:q,disabled:Object.keys(e.pendingAssignments||{}).length!==e.lastTrick.length,children:"Submit Assignments"})]})})(),o==="swap"&&!((ne=e.swapConfirmed)!=null&&ne[i])&&!_&&p.jsxs("div",{className:"swap-ui",children:[p.jsxs("h3",{children:["Swap Cards (Year ",e.year,")"]}),p.jsx("p",{children:"Select a card from your hand and one from your plot to swap, or skip"}),p.jsxs("div",{className:"swap-section",children:[p.jsx("h4",{children:"Your Hand"}),p.jsx("div",{className:"swap-cards",children:(G=e.players[i])==null?void 0:G.hand.map((M,z)=>p.jsx("div",{className:`swap-card ${l===z?"selected":""}`,onClick:()=>a(l===z?null:z),children:p.jsx(ct,{card:M,width:80})},`hand-${z}`))})]}),((Re=e.players[i])==null?void 0:Re.plot.revealed.length)>0&&p.jsxs("div",{className:"swap-section",children:[p.jsx("h4",{children:"Your Revealed Cards (Rewards)"}),p.jsx("div",{className:"swap-cards",children:(le=e.players[i])==null?void 0:le.plot.revealed.map((M,z)=>p.jsx("div",{className:`swap-card ${u===z&&d==="revealed"?"selected":""}`,onClick:()=>Ht(z,"revealed"),children:p.jsx(ct,{card:M,width:80})},`revealed-${z}`))})]}),((me=e.players[i])==null?void 0:me.plot.hidden.length)>0&&p.jsxs("div",{className:"swap-section",children:[p.jsx("h4",{children:"Your Hidden Plot"}),p.jsx("div",{className:"swap-cards",children:(_e=e.players[i])==null?void 0:_e.plot.hidden.map((M,z)=>p.jsx("div",{className:`swap-card ${u===z&&d==="hidden"?"selected":""}`,onClick:()=>Ht(z,"hidden"),children:p.jsx(ct,{card:M,width:80})},`hidden-${z}`))})]}),p.jsxs("div",{className:"swap-buttons",children:[p.jsx("button",{onClick:Q,disabled:l===null||u===null||d===null,children:"Swap Selected Cards"}),p.jsx("button",{onClick:vt,children:"Done Swapping"})]})]}),o==="swap"&&(((Xe=e.swapConfirmed)==null?void 0:Xe[i])||_)&&p.jsx("div",{className:"swap-ui",children:p.jsx("h3",{children:"Waiting for other players..."})}),p.jsxs("div",{className:"player-plot",children:[p.jsx("h4",{children:"Your Plot"}),p.jsxs("div",{className:"plot-cards",children:[(It=e.players[i])==null?void 0:It.plot.revealed.map((M,z)=>p.jsx(ct,{card:M,width:60},`r-${z}`)),(wt=e.players[i])==null?void 0:wt.plot.hidden.map((M,z)=>p.jsxs("div",{className:`hidden-plot-card ${g===z?"revealed":""}`,title:"Tap to reveal",onClick:()=>v(g===z?null:z),children:[p.jsx(ct,{card:M,width:60,faceDown:!0,className:"card-back"}),p.jsx(ct,{card:M,width:60,className:"card-front"})]},`h-${z}`))]})]})]})}function Rf(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function m1(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function y1(){const[e,t]=ye.useState(!1),[n,r]=ye.useState({...dm}),i=ye.useMemo(()=>e?am({game:o1,board:p1,numPlayers:4,multiplayer:lm({bots:{1:ys,2:ys,3:ys}}),debug:!1}):null,[e]),[s,o]=ye.useState(!1);return e?p.jsx(i,{playerID:"0",setupData:{variants:n}}):p.jsxs("div",{className:"lobby",children:[p.jsxs("div",{className:"lobby-title",children:[p.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),p.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""})]}),p.jsxs("div",{className:"variant-options",children:[p.jsx("h3",{children:"Deck Type"}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),p.jsx("h3",{children:"Variant Rules"}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:l=>r({...n,nomenclature:l.target.checked})}),p.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:l=>r({...n,allowSwap:l.target.checked})}),p.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:l=>r({...n,northernStyle:l.target.checked})}),p.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - No job rewards, all vulnerable"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:l=>r({...n,miceVariant:l.target.checked})}),p.jsx("strong",{title:"Myshi - Mice",children:""})," - All reveal during requisition"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:l=>r({...n,ordenNachalniku:l.target.checked})}),p.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards on job complete"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:l=>r({...n,medalsCount:l.target.checked})}),p.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins add to score"]}),n.deckType===52&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:l=>r({...n,accumulateJobs:l.target.checked})}),p.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Job rewards carry over"]})]}),p.jsxs("div",{className:"lobby-buttons",children:[p.jsx("button",{className:"start-btn",onClick:()=>t(!0),children:"Start Game"}),p.jsx("button",{className:"rules-btn",onClick:()=>o(!0),children:"Rules"})]}),s&&p.jsx("div",{className:"lobby-rules-overlay",onClick:()=>o(!1),children:p.jsxs("div",{className:"lobby-rules",onClick:l=>l.stopPropagation(),children:[p.jsx("button",{className:"close-btn",onClick:()=>o(!1),children:""}),p.jsx("h3",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h4",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h4",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h4",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),p.jsx("h4",{children:"Scoring"}),p.jsx("p",{children:"Cards in your plot = penalty points. Lowest score wins!"})]})]})})]})}const g1=Qh(document.getElementById("root"));g1.render(p.jsx(y1,{}));
