(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pf={exports:{}},Ys={},Cf={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vi=Symbol.for("react.element"),um=Symbol.for("react.portal"),cm=Symbol.for("react.fragment"),fm=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),hm=Symbol.for("react.provider"),pm=Symbol.for("react.context"),mm=Symbol.for("react.forward_ref"),ym=Symbol.for("react.suspense"),gm=Symbol.for("react.memo"),vm=Symbol.for("react.lazy"),Fu=Symbol.iterator;function wm(e){return e===null||typeof e!="object"?null:(e=Fu&&e[Fu]||e["@@iterator"],typeof e=="function"?e:null)}var Nf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Of=Object.assign,Tf={};function hr(e,t,n){this.props=e,this.context=t,this.refs=Tf,this.updater=n||Nf}hr.prototype.isReactComponent={};hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Af(){}Af.prototype=hr.prototype;function pa(e,t,n){this.props=e,this.context=t,this.refs=Tf,this.updater=n||Nf}var ma=pa.prototype=new Af;ma.constructor=pa;Of(ma,hr.prototype);ma.isPureReactComponent=!0;var Uu=Array.isArray,If=Object.prototype.hasOwnProperty,ya={current:null},Mf={key:!0,ref:!0,__self:!0,__source:!0};function Df(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)If.call(t,r)&&!Mf.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vi,type:e,key:s,ref:o,props:i,_owner:ya.current}}function Sm(e,t){return{$$typeof:vi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ga(e){return typeof e=="object"&&e!==null&&e.$$typeof===vi}function km(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vu=/\/+/g;function So(e,t){return typeof e=="object"&&e!==null&&e.key!=null?km(""+e.key):t.toString(36)}function Qi(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vi:case um:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+So(o,0):r,Uu(i)?(n="",e!=null&&(n=e.replace(Vu,"$&/")+"/"),Qi(i,t,n,"",function(u){return u})):i!=null&&(ga(i)&&(i=Sm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vu,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Uu(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+So(s,l);o+=Qi(s,t,n,a,i)}else if(a=wm(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+So(s,l++),o+=Qi(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Pi(e,t,n){if(e==null)return e;var r=[],i=0;return Qi(e,r,"","",function(s){return t.call(n,s,i++)}),r}function _m(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var De={current:null},Ji={transition:null},Em={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Ji,ReactCurrentOwner:ya};function jf(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:Pi,forEach:function(e,t,n){Pi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Pi(e,function(){t++}),t},toArray:function(e){return Pi(e,function(t){return t})||[]},only:function(e){if(!ga(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};U.Component=hr;U.Fragment=cm;U.Profiler=dm;U.PureComponent=pa;U.StrictMode=fm;U.Suspense=ym;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Em;U.act=jf;U.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Of({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ya.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)If.call(t,a)&&!Mf.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:vi,type:e.type,key:i,ref:s,props:r,_owner:o}};U.createContext=function(e){return e={$$typeof:pm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:hm,_context:e},e.Consumer=e};U.createElement=Df;U.createFactory=function(e){var t=Df.bind(null,e);return t.type=e,t};U.createRef=function(){return{current:null}};U.forwardRef=function(e){return{$$typeof:mm,render:e}};U.isValidElement=ga;U.lazy=function(e){return{$$typeof:vm,_payload:{_status:-1,_result:e},_init:_m}};U.memo=function(e,t){return{$$typeof:gm,type:e,compare:t===void 0?null:t}};U.startTransition=function(e){var t=Ji.transition;Ji.transition={};try{e()}finally{Ji.transition=t}};U.unstable_act=jf;U.useCallback=function(e,t){return De.current.useCallback(e,t)};U.useContext=function(e){return De.current.useContext(e)};U.useDebugValue=function(){};U.useDeferredValue=function(e){return De.current.useDeferredValue(e)};U.useEffect=function(e,t){return De.current.useEffect(e,t)};U.useId=function(){return De.current.useId()};U.useImperativeHandle=function(e,t,n){return De.current.useImperativeHandle(e,t,n)};U.useInsertionEffect=function(e,t){return De.current.useInsertionEffect(e,t)};U.useLayoutEffect=function(e,t){return De.current.useLayoutEffect(e,t)};U.useMemo=function(e,t){return De.current.useMemo(e,t)};U.useReducer=function(e,t,n){return De.current.useReducer(e,t,n)};U.useRef=function(e){return De.current.useRef(e)};U.useState=function(e){return De.current.useState(e)};U.useSyncExternalStore=function(e,t,n){return De.current.useSyncExternalStore(e,t,n)};U.useTransition=function(){return De.current.useTransition()};U.version="18.3.1";Cf.exports=U;var tt=Cf.exports;const M=xf(tt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=tt,Pm=Symbol.for("react.element"),Cm=Symbol.for("react.fragment"),Nm=Object.prototype.hasOwnProperty,Om=xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tm={key:!0,ref:!0,__self:!0,__source:!0};function Rf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Nm.call(t,r)&&!Tm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Pm,type:e,key:s,ref:o,props:i,_owner:Om.current}}Ys.Fragment=Cm;Ys.jsx=Rf;Ys.jsxs=Rf;Pf.exports=Ys;var w=Pf.exports,Lf={exports:{}},Ze={},bf={exports:{}},zf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,L){var b=T.length;T.push(L);e:for(;0<b;){var K=b-1>>>1,D=T[K];if(0<i(D,L))T[K]=L,T[b]=D,b=K;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var L=T[0],b=T.pop();if(b!==L){T[0]=b;e:for(var K=0,D=T.length,F=D>>>1;K<F;){var oe=2*(K+1)-1,Re=T[oe],ue=oe+1,Yt=T[ue];if(0>i(Re,b))ue<D&&0>i(Yt,Re)?(T[K]=Yt,T[ue]=b,K=ue):(T[K]=Re,T[oe]=b,K=oe);else if(ue<D&&0>i(Yt,b))T[K]=Yt,T[ue]=b,K=ue;else break e}}return L}function i(T,L){var b=T.sortIndex-L.sortIndex;return b!==0?b:T.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,f=null,h=3,y=!1,v=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(T){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=T)r(u),L.sortIndex=L.expirationTime,t(a,L);else break;L=n(u)}}function S(T){if(k=!1,m(T),!v)if(n(a)!==null)v=!0,Ht(C);else{var L=n(u);L!==null&&Wt(S,L.startTime-T)}}function C(T,L){v=!1,k&&(k=!1,p(I),I=-1),y=!0;var b=h;try{for(m(L),f=n(a);f!==null&&(!(f.expirationTime>L)||T&&!G());){var K=f.callback;if(typeof K=="function"){f.callback=null,h=f.priorityLevel;var D=K(f.expirationTime<=L);L=e.unstable_now(),typeof D=="function"?f.callback=D:f===n(a)&&r(a),m(L)}else r(a);f=n(a)}if(f!==null)var F=!0;else{var oe=n(u);oe!==null&&Wt(S,oe.startTime-L),F=!1}return F}finally{f=null,h=b,y=!1}}var O=!1,N=null,I=-1,H=5,z=-1;function G(){return!(e.unstable_now()-z<H)}function ae(){if(N!==null){var T=e.unstable_now();z=T;var L=!0;try{L=N(!0,T)}finally{L?he():(O=!1,N=null)}}else O=!1}var he;if(typeof d=="function")he=function(){d(ae)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,vn=Tt.port2;Tt.port1.onmessage=ae,he=function(){vn.postMessage(null)}}else he=function(){P(ae,0)};function Ht(T){N=T,O||(O=!0,he())}function Wt(T,L){I=P(function(){T(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,Ht(C))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var b=h;h=L;try{return T()}finally{h=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var b=h;h=T;try{return L()}finally{h=b}},e.unstable_scheduleCallback=function(T,L,b){var K=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?K+b:K):b=K,T){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=b+D,T={id:c++,callback:L,priorityLevel:T,startTime:b,expirationTime:D,sortIndex:-1},b>K?(T.sortIndex=b,t(u,T),n(a)===null&&T===n(u)&&(k?(p(I),I=-1):k=!0,Wt(S,b-K))):(T.sortIndex=D,t(a,T),v||y||(v=!0,Ht(C))),T},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(T){var L=h;return function(){var b=h;h=L;try{return T.apply(this,arguments)}finally{h=b}}}})(zf);bf.exports=zf;var Am=bf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im=tt,Qe=Am;function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $f=new Set,Qr={};function bn(e,t){ir(e,t),ir(e+"Capture",t)}function ir(e,t){for(Qr[e]=t,e=0;e<t.length;e++)$f.add(t[e])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=Object.prototype.hasOwnProperty,Mm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hu={},Wu={};function Dm(e){return rl.call(Wu,e)?!0:rl.call(Hu,e)?!1:Mm.test(e)?Wu[e]=!0:(Hu[e]=!0,!1)}function jm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Rm(e,t,n,r){if(t===null||typeof t>"u"||jm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function je(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ke[e]=new je(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ke[t]=new je(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ke[e]=new je(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ke[e]=new je(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ke[e]=new je(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ke[e]=new je(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ke[e]=new je(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ke[e]=new je(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ke[e]=new je(e,5,!1,e.toLowerCase(),null,!1,!1)});var va=/[\-:]([a-z])/g;function wa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(va,wa);ke[t]=new je(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(va,wa);ke[t]=new je(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(va,wa);ke[t]=new je(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ke[e]=new je(e,1,!1,e.toLowerCase(),null,!1,!1)});ke.xlinkHref=new je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ke[e]=new je(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sa(e,t,n,r){var i=ke.hasOwnProperty(t)?ke[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Rm(t,n,i,r)&&(n=null),r||i===null?Dm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ut=Im.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ci=Symbol.for("react.element"),Bn=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),ka=Symbol.for("react.strict_mode"),il=Symbol.for("react.profiler"),Bf=Symbol.for("react.provider"),Ff=Symbol.for("react.context"),_a=Symbol.for("react.forward_ref"),sl=Symbol.for("react.suspense"),ol=Symbol.for("react.suspense_list"),Ea=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),Uf=Symbol.for("react.offscreen"),Yu=Symbol.iterator;function Sr(e){return e===null||typeof e!="object"?null:(e=Yu&&e[Yu]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,ko;function Ir(e){if(ko===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ko=t&&t[1]||""}return`
`+ko+e}var _o=!1;function Eo(e,t){if(!e||_o)return"";_o=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{_o=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ir(e):""}function Lm(e){switch(e.tag){case 5:return Ir(e.type);case 16:return Ir("Lazy");case 13:return Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 2:case 15:return e=Eo(e.type,!1),e;case 11:return e=Eo(e.type.render,!1),e;case 1:return e=Eo(e.type,!0),e;default:return""}}function ll(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fn:return"Fragment";case Bn:return"Portal";case il:return"Profiler";case ka:return"StrictMode";case sl:return"Suspense";case ol:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ff:return(e.displayName||"Context")+".Consumer";case Bf:return(e._context.displayName||"Context")+".Provider";case _a:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ea:return t=e.displayName||null,t!==null?t:ll(e.type)||"Memo";case Qt:t=e._payload,e=e._init;try{return ll(e(t))}catch{}}return null}function bm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ll(t);case 8:return t===ka?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zm(e){var t=Vf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){e._valueTracker||(e._valueTracker=zm(e))}function Hf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Vf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function al(e,t){var n=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ku(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wf(e,t){t=t.checked,t!=null&&Sa(e,"checked",t,!1)}function ul(e,t){Wf(e,t);var n=fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cl(e,t.type,n):t.hasOwnProperty("defaultValue")&&cl(e,t.type,fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function cl(e,t,n){(t!=="number"||ds(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Mr=Array.isArray;function Zn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function fl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(x(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(x(92));if(Mr(n)){if(1<n.length)throw Error(x(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fn(n)}}function Yf(e,t){var n=fn(t.value),r=fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ju(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Kf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Kf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oi,qf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oi=Oi||document.createElement("div"),Oi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$m=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(e){$m.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zr[t]=zr[e]})});function Qf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||zr.hasOwnProperty(e)&&zr[e]?(""+t).trim():t+"px"}function Jf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Bm=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hl(e,t){if(t){if(Bm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(x(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(x(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(x(61))}if(t.style!=null&&typeof t.style!="object")throw Error(x(62))}}function pl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=null;function xa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yl=null,Gn=null,er=null;function Xu(e){if(e=ki(e)){if(typeof yl!="function")throw Error(x(280));var t=e.stateNode;t&&(t=Xs(t),yl(e.stateNode,e.type,t))}}function Xf(e){Gn?er?er.push(e):er=[e]:Gn=e}function Zf(){if(Gn){var e=Gn,t=er;if(er=Gn=null,Xu(e),t)for(e=0;e<t.length;e++)Xu(t[e])}}function Gf(e,t){return e(t)}function ed(){}var xo=!1;function td(e,t,n){if(xo)return e(t,n);xo=!0;try{return Gf(e,t,n)}finally{xo=!1,(Gn!==null||er!==null)&&(ed(),Zf())}}function Xr(e,t){var n=e.stateNode;if(n===null)return null;var r=Xs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(x(231,t,typeof n));return n}var gl=!1;if(bt)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){gl=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{gl=!1}function Fm(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var $r=!1,hs=null,ps=!1,vl=null,Um={onError:function(e){$r=!0,hs=e}};function Vm(e,t,n,r,i,s,o,l,a){$r=!1,hs=null,Fm.apply(Um,arguments)}function Hm(e,t,n,r,i,s,o,l,a){if(Vm.apply(this,arguments),$r){if($r){var u=hs;$r=!1,hs=null}else throw Error(x(198));ps||(ps=!0,vl=u)}}function zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function nd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zu(e){if(zn(e)!==e)throw Error(x(188))}function Wm(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(x(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zu(i),e;if(s===r)return Zu(i),t;s=s.sibling}throw Error(x(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?e:t}function rd(e){return e=Wm(e),e!==null?id(e):null}function id(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=id(e);if(t!==null)return t;e=e.sibling}return null}var sd=Qe.unstable_scheduleCallback,Gu=Qe.unstable_cancelCallback,Ym=Qe.unstable_shouldYield,Km=Qe.unstable_requestPaint,le=Qe.unstable_now,qm=Qe.unstable_getCurrentPriorityLevel,Pa=Qe.unstable_ImmediatePriority,od=Qe.unstable_UserBlockingPriority,ms=Qe.unstable_NormalPriority,Qm=Qe.unstable_LowPriority,ld=Qe.unstable_IdlePriority,Ks=null,Et=null;function Jm(e){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Ks,e,void 0,(e.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:Gm,Xm=Math.log,Zm=Math.LN2;function Gm(e){return e>>>=0,e===0?32:31-(Xm(e)/Zm|0)|0}var Ti=64,Ai=4194304;function Dr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ys(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Dr(l):(s&=o,s!==0&&(r=Dr(s)))}else o=n&~i,o!==0?r=Dr(o):s!==0&&(r=Dr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-mt(t),i=1<<n,r|=e[n],t&=~i;return r}function ey(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ty(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-mt(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=ey(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function wl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ad(){var e=Ti;return Ti<<=1,!(Ti&4194240)&&(Ti=64),e}function Po(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mt(t),e[t]=n}function ny(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-mt(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Ca(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-mt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Y=0;function ud(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cd,Na,fd,dd,hd,Sl=!1,Ii=[],tn=null,nn=null,rn=null,Zr=new Map,Gr=new Map,Xt=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ec(e,t){switch(e){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":Zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(t.pointerId)}}function _r(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ki(t),t!==null&&Na(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function iy(e,t,n,r,i){switch(t){case"focusin":return tn=_r(tn,e,t,n,r,i),!0;case"dragenter":return nn=_r(nn,e,t,n,r,i),!0;case"mouseover":return rn=_r(rn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zr.set(s,_r(Zr.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Gr.set(s,_r(Gr.get(s)||null,e,t,n,r,i)),!0}return!1}function pd(e){var t=Cn(e.target);if(t!==null){var n=zn(t);if(n!==null){if(t=n.tag,t===13){if(t=nd(n),t!==null){e.blockedOn=t,hd(e.priority,function(){fd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=kl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ml=r,n.target.dispatchEvent(r),ml=null}else return t=ki(n),t!==null&&Na(t),e.blockedOn=n,!1;t.shift()}return!0}function tc(e,t,n){Xi(e)&&n.delete(t)}function sy(){Sl=!1,tn!==null&&Xi(tn)&&(tn=null),nn!==null&&Xi(nn)&&(nn=null),rn!==null&&Xi(rn)&&(rn=null),Zr.forEach(tc),Gr.forEach(tc)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,Sl||(Sl=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,sy)))}function ei(e){function t(i){return Er(i,e)}if(0<Ii.length){Er(Ii[0],e);for(var n=1;n<Ii.length;n++){var r=Ii[n];r.blockedOn===e&&(r.blockedOn=null)}}for(tn!==null&&Er(tn,e),nn!==null&&Er(nn,e),rn!==null&&Er(rn,e),Zr.forEach(t),Gr.forEach(t),n=0;n<Xt.length;n++)r=Xt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xt.length&&(n=Xt[0],n.blockedOn===null);)pd(n),n.blockedOn===null&&Xt.shift()}var tr=Ut.ReactCurrentBatchConfig,gs=!0;function oy(e,t,n,r){var i=Y,s=tr.transition;tr.transition=null;try{Y=1,Oa(e,t,n,r)}finally{Y=i,tr.transition=s}}function ly(e,t,n,r){var i=Y,s=tr.transition;tr.transition=null;try{Y=4,Oa(e,t,n,r)}finally{Y=i,tr.transition=s}}function Oa(e,t,n,r){if(gs){var i=kl(e,t,n,r);if(i===null)Ro(e,t,r,vs,n),ec(e,r);else if(iy(i,e,t,n,r))r.stopPropagation();else if(ec(e,r),t&4&&-1<ry.indexOf(e)){for(;i!==null;){var s=ki(i);if(s!==null&&cd(s),s=kl(e,t,n,r),s===null&&Ro(e,t,r,vs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ro(e,t,r,null,n)}}var vs=null;function kl(e,t,n,r){if(vs=null,e=xa(r),e=Cn(e),e!==null)if(t=zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=nd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vs=e,null}function md(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qm()){case Pa:return 1;case od:return 4;case ms:case Qm:return 16;case ld:return 536870912;default:return 16}default:return 16}}var Gt=null,Ta=null,Zi=null;function yd(){if(Zi)return Zi;var e,t=Ta,n=t.length,r,i="value"in Gt?Gt.value:Gt.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Zi=i.slice(e,1<r?1-r:void 0)}function Gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mi(){return!0}function nc(){return!1}function Ge(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mi:nc,this.isPropagationStopped=nc,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aa=Ge(pr),Si=ne({},pr,{view:0,detail:0}),ay=Ge(Si),Co,No,xr,qs=ne({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xr&&(xr&&e.type==="mousemove"?(Co=e.screenX-xr.screenX,No=e.screenY-xr.screenY):No=Co=0,xr=e),Co)},movementY:function(e){return"movementY"in e?e.movementY:No}}),rc=Ge(qs),uy=ne({},qs,{dataTransfer:0}),cy=Ge(uy),fy=ne({},Si,{relatedTarget:0}),Oo=Ge(fy),dy=ne({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=Ge(dy),py=ne({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),my=Ge(py),yy=ne({},pr,{data:0}),ic=Ge(yy),gy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wy[e])?!!t[e]:!1}function Ia(){return Sy}var ky=ne({},Si,{key:function(e){if(e.key){var t=gy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(e){return e.type==="keypress"?Gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_y=Ge(ky),Ey=ne({},qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=Ge(Ey),xy=ne({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),Py=Ge(xy),Cy=ne({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ny=Ge(Cy),Oy=ne({},qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ty=Ge(Oy),Ay=[9,13,27,32],Ma=bt&&"CompositionEvent"in window,Br=null;bt&&"documentMode"in document&&(Br=document.documentMode);var Iy=bt&&"TextEvent"in window&&!Br,gd=bt&&(!Ma||Br&&8<Br&&11>=Br),oc=" ",lc=!1;function vd(e,t){switch(e){case"keyup":return Ay.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function My(e,t){switch(e){case"compositionend":return wd(t);case"keypress":return t.which!==32?null:(lc=!0,oc);case"textInput":return e=t.data,e===oc&&lc?null:e;default:return null}}function Dy(e,t){if(Un)return e==="compositionend"||!Ma&&vd(e,t)?(e=yd(),Zi=Ta=Gt=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gd&&t.locale!=="ko"?null:t.data;default:return null}}var jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jy[e.type]:t==="textarea"}function Sd(e,t,n,r){Xf(r),t=ws(t,"onChange"),0<t.length&&(n=new Aa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fr=null,ti=null;function Ry(e){Id(e,0)}function Qs(e){var t=Wn(e);if(Hf(t))return e}function Ly(e,t){if(e==="change")return t}var kd=!1;if(bt){var To;if(bt){var Ao="oninput"in document;if(!Ao){var uc=document.createElement("div");uc.setAttribute("oninput","return;"),Ao=typeof uc.oninput=="function"}To=Ao}else To=!1;kd=To&&(!document.documentMode||9<document.documentMode)}function cc(){Fr&&(Fr.detachEvent("onpropertychange",_d),ti=Fr=null)}function _d(e){if(e.propertyName==="value"&&Qs(ti)){var t=[];Sd(t,ti,e,xa(e)),td(Ry,t)}}function by(e,t,n){e==="focusin"?(cc(),Fr=t,ti=n,Fr.attachEvent("onpropertychange",_d)):e==="focusout"&&cc()}function zy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qs(ti)}function $y(e,t){if(e==="click")return Qs(t)}function By(e,t){if(e==="input"||e==="change")return Qs(t)}function Fy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:Fy;function ni(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rl.call(t,i)||!gt(e[i],t[i]))return!1}return!0}function fc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dc(e,t){var n=fc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fc(n)}}function Ed(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ed(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xd(){for(var e=window,t=ds();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ds(e.document)}return t}function Da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uy(e){var t=xd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ed(n.ownerDocument.documentElement,n)){if(r!==null&&Da(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dc(n,s);var o=dc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vy=bt&&"documentMode"in document&&11>=document.documentMode,Vn=null,_l=null,Ur=null,El=!1;function hc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;El||Vn==null||Vn!==ds(r)||(r=Vn,"selectionStart"in r&&Da(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&ni(Ur,r)||(Ur=r,r=ws(_l,"onSelect"),0<r.length&&(t=new Aa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vn)))}function Di(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hn={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionend:Di("Transition","TransitionEnd")},Io={},Pd={};bt&&(Pd=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function Js(e){if(Io[e])return Io[e];if(!Hn[e])return e;var t=Hn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pd)return Io[e]=t[n];return e}var Cd=Js("animationend"),Nd=Js("animationiteration"),Od=Js("animationstart"),Td=Js("transitionend"),Ad=new Map,pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mn(e,t){Ad.set(e,t),bn(t,[e])}for(var Mo=0;Mo<pc.length;Mo++){var Do=pc[Mo],Hy=Do.toLowerCase(),Wy=Do[0].toUpperCase()+Do.slice(1);mn(Hy,"on"+Wy)}mn(Cd,"onAnimationEnd");mn(Nd,"onAnimationIteration");mn(Od,"onAnimationStart");mn("dblclick","onDoubleClick");mn("focusin","onFocus");mn("focusout","onBlur");mn(Td,"onTransitionEnd");ir("onMouseEnter",["mouseout","mouseover"]);ir("onMouseLeave",["mouseout","mouseover"]);ir("onPointerEnter",["pointerout","pointerover"]);ir("onPointerLeave",["pointerout","pointerover"]);bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function mc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Hm(r,t,void 0,e),e.currentTarget=null}function Id(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;mc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;mc(i,l,u),s=a}}}if(ps)throw e=vl,ps=!1,vl=null,e}function J(e,t){var n=t[Ol];n===void 0&&(n=t[Ol]=new Set);var r=e+"__bubble";n.has(r)||(Md(t,e,2,!1),n.add(r))}function jo(e,t,n){var r=0;t&&(r|=4),Md(n,e,r,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function ri(e){if(!e[ji]){e[ji]=!0,$f.forEach(function(n){n!=="selectionchange"&&(Yy.has(n)||jo(n,!1,e),jo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ji]||(t[ji]=!0,jo("selectionchange",!1,t))}}function Md(e,t,n,r){switch(md(t)){case 1:var i=oy;break;case 4:i=ly;break;default:i=Oa}n=i.bind(null,t,n,e),i=void 0,!gl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ro(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Cn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}td(function(){var u=s,c=xa(n),f=[];e:{var h=Ad.get(e);if(h!==void 0){var y=Aa,v=e;switch(e){case"keypress":if(Gi(n)===0)break e;case"keydown":case"keyup":y=_y;break;case"focusin":v="focus",y=Oo;break;case"focusout":v="blur",y=Oo;break;case"beforeblur":case"afterblur":y=Oo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Py;break;case Cd:case Nd:case Od:y=hy;break;case Td:y=Ny;break;case"scroll":y=ay;break;case"wheel":y=Ty;break;case"copy":case"cut":case"paste":y=my;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=sc}var k=(t&4)!==0,P=!k&&e==="scroll",p=k?h!==null?h+"Capture":null:h;k=[];for(var d=u,m;d!==null;){m=d;var S=m.stateNode;if(m.tag===5&&S!==null&&(m=S,p!==null&&(S=Xr(d,p),S!=null&&k.push(ii(d,S,m)))),P)break;d=d.return}0<k.length&&(h=new y(h,v,null,n,c),f.push({event:h,listeners:k}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&n!==ml&&(v=n.relatedTarget||n.fromElement)&&(Cn(v)||v[zt]))break e;if((y||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?Cn(v):null,v!==null&&(P=zn(v),v!==P||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(k=rc,S="onMouseLeave",p="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(k=sc,S="onPointerLeave",p="onPointerEnter",d="pointer"),P=y==null?h:Wn(y),m=v==null?h:Wn(v),h=new k(S,d+"leave",y,n,c),h.target=P,h.relatedTarget=m,S=null,Cn(c)===u&&(k=new k(p,d+"enter",v,n,c),k.target=m,k.relatedTarget=P,S=k),P=S,y&&v)t:{for(k=y,p=v,d=0,m=k;m;m=$n(m))d++;for(m=0,S=p;S;S=$n(S))m++;for(;0<d-m;)k=$n(k),d--;for(;0<m-d;)p=$n(p),m--;for(;d--;){if(k===p||p!==null&&k===p.alternate)break t;k=$n(k),p=$n(p)}k=null}else k=null;y!==null&&yc(f,h,y,k,!1),v!==null&&P!==null&&yc(f,P,v,k,!0)}}e:{if(h=u?Wn(u):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var C=Ly;else if(ac(h))if(kd)C=By;else{C=zy;var O=by}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=$y);if(C&&(C=C(e,u))){Sd(f,C,n,c);break e}O&&O(e,h,u),e==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&cl(h,"number",h.value)}switch(O=u?Wn(u):window,e){case"focusin":(ac(O)||O.contentEditable==="true")&&(Vn=O,_l=u,Ur=null);break;case"focusout":Ur=_l=Vn=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,hc(f,n,c);break;case"selectionchange":if(Vy)break;case"keydown":case"keyup":hc(f,n,c)}var N;if(Ma)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Un?vd(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(gd&&n.locale!=="ko"&&(Un||I!=="onCompositionStart"?I==="onCompositionEnd"&&Un&&(N=yd()):(Gt=c,Ta="value"in Gt?Gt.value:Gt.textContent,Un=!0)),O=ws(u,I),0<O.length&&(I=new ic(I,e,null,n,c),f.push({event:I,listeners:O}),N?I.data=N:(N=wd(n),N!==null&&(I.data=N)))),(N=Iy?My(e,n):Dy(e,n))&&(u=ws(u,"onBeforeInput"),0<u.length&&(c=new ic("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=N))}Id(f,t)})}function ii(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ws(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xr(e,n),s!=null&&r.unshift(ii(e,s,i)),s=Xr(e,t),s!=null&&r.push(ii(e,s,i))),e=e.return}return r}function $n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=Xr(n,s),a!=null&&o.unshift(ii(n,a,l))):i||(a=Xr(n,s),a!=null&&o.push(ii(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ky=/\r\n?/g,qy=/\u0000|\uFFFD/g;function gc(e){return(typeof e=="string"?e:""+e).replace(Ky,`
`).replace(qy,"")}function Ri(e,t,n){if(t=gc(t),gc(e)!==t&&n)throw Error(x(425))}function Ss(){}var xl=null,Pl=null;function Cl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nl=typeof setTimeout=="function"?setTimeout:void 0,Qy=typeof clearTimeout=="function"?clearTimeout:void 0,vc=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof vc<"u"?function(e){return vc.resolve(null).then(e).catch(Xy)}:Nl;function Xy(e){setTimeout(function(){throw e})}function Lo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ei(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ei(t)}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mr=Math.random().toString(36).slice(2),_t="__reactFiber$"+mr,si="__reactProps$"+mr,zt="__reactContainer$"+mr,Ol="__reactEvents$"+mr,Zy="__reactListeners$"+mr,Gy="__reactHandles$"+mr;function Cn(e){var t=e[_t];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[_t]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wc(e);e!==null;){if(n=e[_t])return n;e=wc(e)}return t}e=n,n=e.parentNode}return null}function ki(e){return e=e[_t]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(x(33))}function Xs(e){return e[si]||null}var Tl=[],Yn=-1;function yn(e){return{current:e}}function X(e){0>Yn||(e.current=Tl[Yn],Tl[Yn]=null,Yn--)}function q(e,t){Yn++,Tl[Yn]=e.current,e.current=t}var dn={},Ne=yn(dn),$e=yn(!1),In=dn;function sr(e,t){var n=e.type.contextTypes;if(!n)return dn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Be(e){return e=e.childContextTypes,e!=null}function ks(){X($e),X(Ne)}function Sc(e,t,n){if(Ne.current!==dn)throw Error(x(168));q(Ne,t),q($e,n)}function Dd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(x(108,bm(e)||"Unknown",i));return ne({},n,r)}function _s(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dn,In=Ne.current,q(Ne,e),q($e,$e.current),!0}function kc(e,t,n){var r=e.stateNode;if(!r)throw Error(x(169));n?(e=Dd(e,t,In),r.__reactInternalMemoizedMergedChildContext=e,X($e),X(Ne),q(Ne,e)):X($e),q($e,n)}var Mt=null,Zs=!1,bo=!1;function jd(e){Mt===null?Mt=[e]:Mt.push(e)}function eg(e){Zs=!0,jd(e)}function gn(){if(!bo&&Mt!==null){bo=!0;var e=0,t=Y;try{var n=Mt;for(Y=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mt=null,Zs=!1}catch(i){throw Mt!==null&&(Mt=Mt.slice(e+1)),sd(Pa,gn),i}finally{Y=t,bo=!1}}return null}var Kn=[],qn=0,Es=null,xs=0,nt=[],rt=0,Mn=null,Dt=1,jt="";function En(e,t){Kn[qn++]=xs,Kn[qn++]=Es,Es=e,xs=t}function Rd(e,t,n){nt[rt++]=Dt,nt[rt++]=jt,nt[rt++]=Mn,Mn=e;var r=Dt;e=jt;var i=32-mt(r)-1;r&=~(1<<i),n+=1;var s=32-mt(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Dt=1<<32-mt(t)+i|n<<i|r,jt=s+e}else Dt=1<<s|n<<i|r,jt=e}function ja(e){e.return!==null&&(En(e,1),Rd(e,1,0))}function Ra(e){for(;e===Es;)Es=Kn[--qn],Kn[qn]=null,xs=Kn[--qn],Kn[qn]=null;for(;e===Mn;)Mn=nt[--rt],nt[rt]=null,jt=nt[--rt],nt[rt]=null,Dt=nt[--rt],nt[rt]=null}var Ke=null,We=null,Z=!1,ht=null;function Ld(e,t){var n=st(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _c(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ke=e,We=sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ke=e,We=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mn!==null?{id:Dt,overflow:jt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=st(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ke=e,We=null,!0):!1;default:return!1}}function Al(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Il(e){if(Z){var t=We;if(t){var n=t;if(!_c(e,t)){if(Al(e))throw Error(x(418));t=sn(n.nextSibling);var r=Ke;t&&_c(e,t)?Ld(r,n):(e.flags=e.flags&-4097|2,Z=!1,Ke=e)}}else{if(Al(e))throw Error(x(418));e.flags=e.flags&-4097|2,Z=!1,Ke=e}}}function Ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ke=e}function Li(e){if(e!==Ke)return!1;if(!Z)return Ec(e),Z=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cl(e.type,e.memoizedProps)),t&&(t=We)){if(Al(e))throw bd(),Error(x(418));for(;t;)Ld(e,t),t=sn(t.nextSibling)}if(Ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){We=sn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}We=null}}else We=Ke?sn(e.stateNode.nextSibling):null;return!0}function bd(){for(var e=We;e;)e=sn(e.nextSibling)}function or(){We=Ke=null,Z=!1}function La(e){ht===null?ht=[e]:ht.push(e)}var tg=Ut.ReactCurrentBatchConfig;function Pr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xc(e){var t=e._init;return t(e._payload)}function zd(e){function t(p,d){if(e){var m=p.deletions;m===null?(p.deletions=[d],p.flags|=16):m.push(d)}}function n(p,d){if(!e)return null;for(;d!==null;)t(p,d),d=d.sibling;return null}function r(p,d){for(p=new Map;d!==null;)d.key!==null?p.set(d.key,d):p.set(d.index,d),d=d.sibling;return p}function i(p,d){return p=un(p,d),p.index=0,p.sibling=null,p}function s(p,d,m){return p.index=m,e?(m=p.alternate,m!==null?(m=m.index,m<d?(p.flags|=2,d):m):(p.flags|=2,d)):(p.flags|=1048576,d)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,d,m,S){return d===null||d.tag!==6?(d=Ho(m,p.mode,S),d.return=p,d):(d=i(d,m),d.return=p,d)}function a(p,d,m,S){var C=m.type;return C===Fn?c(p,d,m.props.children,S,m.key):d!==null&&(d.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qt&&xc(C)===d.type)?(S=i(d,m.props),S.ref=Pr(p,d,m),S.return=p,S):(S=os(m.type,m.key,m.props,null,p.mode,S),S.ref=Pr(p,d,m),S.return=p,S)}function u(p,d,m,S){return d===null||d.tag!==4||d.stateNode.containerInfo!==m.containerInfo||d.stateNode.implementation!==m.implementation?(d=Wo(m,p.mode,S),d.return=p,d):(d=i(d,m.children||[]),d.return=p,d)}function c(p,d,m,S,C){return d===null||d.tag!==7?(d=An(m,p.mode,S,C),d.return=p,d):(d=i(d,m),d.return=p,d)}function f(p,d,m){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Ho(""+d,p.mode,m),d.return=p,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Ci:return m=os(d.type,d.key,d.props,null,p.mode,m),m.ref=Pr(p,null,d),m.return=p,m;case Bn:return d=Wo(d,p.mode,m),d.return=p,d;case Qt:var S=d._init;return f(p,S(d._payload),m)}if(Mr(d)||Sr(d))return d=An(d,p.mode,m,null),d.return=p,d;bi(p,d)}return null}function h(p,d,m,S){var C=d!==null?d.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:l(p,d,""+m,S);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ci:return m.key===C?a(p,d,m,S):null;case Bn:return m.key===C?u(p,d,m,S):null;case Qt:return C=m._init,h(p,d,C(m._payload),S)}if(Mr(m)||Sr(m))return C!==null?null:c(p,d,m,S,null);bi(p,m)}return null}function y(p,d,m,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(m)||null,l(d,p,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ci:return p=p.get(S.key===null?m:S.key)||null,a(d,p,S,C);case Bn:return p=p.get(S.key===null?m:S.key)||null,u(d,p,S,C);case Qt:var O=S._init;return y(p,d,m,O(S._payload),C)}if(Mr(S)||Sr(S))return p=p.get(m)||null,c(d,p,S,C,null);bi(d,S)}return null}function v(p,d,m,S){for(var C=null,O=null,N=d,I=d=0,H=null;N!==null&&I<m.length;I++){N.index>I?(H=N,N=null):H=N.sibling;var z=h(p,N,m[I],S);if(z===null){N===null&&(N=H);break}e&&N&&z.alternate===null&&t(p,N),d=s(z,d,I),O===null?C=z:O.sibling=z,O=z,N=H}if(I===m.length)return n(p,N),Z&&En(p,I),C;if(N===null){for(;I<m.length;I++)N=f(p,m[I],S),N!==null&&(d=s(N,d,I),O===null?C=N:O.sibling=N,O=N);return Z&&En(p,I),C}for(N=r(p,N);I<m.length;I++)H=y(N,p,I,m[I],S),H!==null&&(e&&H.alternate!==null&&N.delete(H.key===null?I:H.key),d=s(H,d,I),O===null?C=H:O.sibling=H,O=H);return e&&N.forEach(function(G){return t(p,G)}),Z&&En(p,I),C}function k(p,d,m,S){var C=Sr(m);if(typeof C!="function")throw Error(x(150));if(m=C.call(m),m==null)throw Error(x(151));for(var O=C=null,N=d,I=d=0,H=null,z=m.next();N!==null&&!z.done;I++,z=m.next()){N.index>I?(H=N,N=null):H=N.sibling;var G=h(p,N,z.value,S);if(G===null){N===null&&(N=H);break}e&&N&&G.alternate===null&&t(p,N),d=s(G,d,I),O===null?C=G:O.sibling=G,O=G,N=H}if(z.done)return n(p,N),Z&&En(p,I),C;if(N===null){for(;!z.done;I++,z=m.next())z=f(p,z.value,S),z!==null&&(d=s(z,d,I),O===null?C=z:O.sibling=z,O=z);return Z&&En(p,I),C}for(N=r(p,N);!z.done;I++,z=m.next())z=y(N,p,I,z.value,S),z!==null&&(e&&z.alternate!==null&&N.delete(z.key===null?I:z.key),d=s(z,d,I),O===null?C=z:O.sibling=z,O=z);return e&&N.forEach(function(ae){return t(p,ae)}),Z&&En(p,I),C}function P(p,d,m,S){if(typeof m=="object"&&m!==null&&m.type===Fn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Ci:e:{for(var C=m.key,O=d;O!==null;){if(O.key===C){if(C=m.type,C===Fn){if(O.tag===7){n(p,O.sibling),d=i(O,m.props.children),d.return=p,p=d;break e}}else if(O.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qt&&xc(C)===O.type){n(p,O.sibling),d=i(O,m.props),d.ref=Pr(p,O,m),d.return=p,p=d;break e}n(p,O);break}else t(p,O);O=O.sibling}m.type===Fn?(d=An(m.props.children,p.mode,S,m.key),d.return=p,p=d):(S=os(m.type,m.key,m.props,null,p.mode,S),S.ref=Pr(p,d,m),S.return=p,p=S)}return o(p);case Bn:e:{for(O=m.key;d!==null;){if(d.key===O)if(d.tag===4&&d.stateNode.containerInfo===m.containerInfo&&d.stateNode.implementation===m.implementation){n(p,d.sibling),d=i(d,m.children||[]),d.return=p,p=d;break e}else{n(p,d);break}else t(p,d);d=d.sibling}d=Wo(m,p.mode,S),d.return=p,p=d}return o(p);case Qt:return O=m._init,P(p,d,O(m._payload),S)}if(Mr(m))return v(p,d,m,S);if(Sr(m))return k(p,d,m,S);bi(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,d!==null&&d.tag===6?(n(p,d.sibling),d=i(d,m),d.return=p,p=d):(n(p,d),d=Ho(m,p.mode,S),d.return=p,p=d),o(p)):n(p,d)}return P}var lr=zd(!0),$d=zd(!1),Ps=yn(null),Cs=null,Qn=null,ba=null;function za(){ba=Qn=Cs=null}function $a(e){var t=Ps.current;X(Ps),e._currentValue=t}function Ml(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){Cs=e,ba=Qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ze=!0),e.firstContext=null)}function lt(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},Qn===null){if(Cs===null)throw Error(x(308));Qn=e,Cs.dependencies={lanes:0,firstContext:e}}else Qn=Qn.next=e;return t}var Nn=null;function Ba(e){Nn===null?Nn=[e]:Nn.push(e)}function Bd(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ba(t)):(n.next=i.next,i.next=n),t.interleaved=n,$t(e,r)}function $t(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jt=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function on(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,V&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,$t(e,n)}return i=r.interleaved,i===null?(t.next=t,Ba(r)):(t.next=i.next,i.next=t),r.interleaved=t,$t(e,n)}function es(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ca(e,n)}}function Pc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ns(e,t,n,r){var i=e.updateQueue;Jt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;o=0,c=u=a=null,l=s;do{var h=l.lane,y=l.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,k=l;switch(h=t,y=n,k.tag){case 1:if(v=k.payload,typeof v=="function"){f=v.call(y,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=k.payload,h=typeof v=="function"?v.call(y,f,h):v,h==null)break e;f=ne({},f,h);break e;case 2:Jt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=y,a=f):c=c.next=y,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);jn|=o,e.lanes=o,e.memoizedState=f}}function Cc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(x(191,i));i.call(r)}}}var _i={},xt=yn(_i),oi=yn(_i),li=yn(_i);function On(e){if(e===_i)throw Error(x(174));return e}function Ua(e,t){switch(q(li,t),q(oi,e),q(xt,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dl(t,e)}X(xt),q(xt,t)}function ar(){X(xt),X(oi),X(li)}function Ud(e){On(li.current);var t=On(xt.current),n=dl(t,e.type);t!==n&&(q(oi,e),q(xt,n))}function Va(e){oi.current===e&&(X(xt),X(oi))}var ee=yn(0);function Os(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zo=[];function Ha(){for(var e=0;e<zo.length;e++)zo[e]._workInProgressVersionPrimary=null;zo.length=0}var ts=Ut.ReactCurrentDispatcher,$o=Ut.ReactCurrentBatchConfig,Dn=0,te=null,pe=null,ye=null,Ts=!1,Vr=!1,ai=0,ng=0;function _e(){throw Error(x(321))}function Wa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gt(e[n],t[n]))return!1;return!0}function Ya(e,t,n,r,i,s){if(Dn=s,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ts.current=e===null||e.memoizedState===null?og:lg,e=n(r,i),Vr){s=0;do{if(Vr=!1,ai=0,25<=s)throw Error(x(301));s+=1,ye=pe=null,t.updateQueue=null,ts.current=ag,e=n(r,i)}while(Vr)}if(ts.current=As,t=pe!==null&&pe.next!==null,Dn=0,ye=pe=te=null,Ts=!1,t)throw Error(x(300));return e}function Ka(){var e=ai!==0;return ai=0,e}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?te.memoizedState=ye=e:ye=ye.next=e,ye}function at(){if(pe===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=ye===null?te.memoizedState:ye.next;if(t!==null)ye=t,pe=e;else{if(e===null)throw Error(x(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},ye===null?te.memoizedState=ye=e:ye=ye.next=e}return ye}function ui(e,t){return typeof t=="function"?t(e):t}function Bo(e){var t=at(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=pe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((Dn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,te.lanes|=c,jn|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,gt(r,t.memoizedState)||(ze=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,te.lanes|=s,jn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fo(e){var t=at(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);gt(s,t.memoizedState)||(ze=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Vd(){}function Hd(e,t){var n=te,r=at(),i=t(),s=!gt(r.memoizedState,i);if(s&&(r.memoizedState=i,ze=!0),r=r.queue,qa(Kd.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ye!==null&&ye.memoizedState.tag&1){if(n.flags|=2048,ci(9,Yd.bind(null,n,r,i,t),void 0,null),ge===null)throw Error(x(349));Dn&30||Wd(n,t,i)}return i}function Wd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Yd(e,t,n,r){t.value=n,t.getSnapshot=r,qd(t)&&Qd(e)}function Kd(e,t,n){return n(function(){qd(t)&&Qd(e)})}function qd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gt(e,n)}catch{return!0}}function Qd(e){var t=$t(e,1);t!==null&&yt(t,e,1,-1)}function Nc(e){var t=St();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:e},t.queue=e,e=e.dispatch=sg.bind(null,te,e),[t.memoizedState,e]}function ci(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Jd(){return at().memoizedState}function ns(e,t,n,r){var i=St();te.flags|=e,i.memoizedState=ci(1|t,n,void 0,r===void 0?null:r)}function Gs(e,t,n,r){var i=at();r=r===void 0?null:r;var s=void 0;if(pe!==null){var o=pe.memoizedState;if(s=o.destroy,r!==null&&Wa(r,o.deps)){i.memoizedState=ci(t,n,s,r);return}}te.flags|=e,i.memoizedState=ci(1|t,n,s,r)}function Oc(e,t){return ns(8390656,8,e,t)}function qa(e,t){return Gs(2048,8,e,t)}function Xd(e,t){return Gs(4,2,e,t)}function Zd(e,t){return Gs(4,4,e,t)}function Gd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eh(e,t,n){return n=n!=null?n.concat([e]):null,Gs(4,4,Gd.bind(null,t,e),n)}function Qa(){}function th(e,t){var n=at();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function nh(e,t){var n=at();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function rh(e,t,n){return Dn&21?(gt(n,t)||(n=ad(),te.lanes|=n,jn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ze=!0),e.memoizedState=n)}function rg(e,t){var n=Y;Y=n!==0&&4>n?n:4,e(!0);var r=$o.transition;$o.transition={};try{e(!1),t()}finally{Y=n,$o.transition=r}}function ih(){return at().memoizedState}function ig(e,t,n){var r=an(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sh(e))oh(t,n);else if(n=Bd(e,t,n,r),n!==null){var i=Me();yt(n,e,r,i),lh(n,t,r)}}function sg(e,t,n){var r=an(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sh(e))oh(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,gt(l,o)){var a=t.interleaved;a===null?(i.next=i,Ba(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=Bd(e,t,i,r),n!==null&&(i=Me(),yt(n,e,r,i),lh(n,t,r))}}function sh(e){var t=e.alternate;return e===te||t!==null&&t===te}function oh(e,t){Vr=Ts=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ca(e,n)}}var As={readContext:lt,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},og={readContext:lt,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:lt,useEffect:Oc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ns(4194308,4,Gd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ns(4194308,4,e,t)},useInsertionEffect:function(e,t){return ns(4,2,e,t)},useMemo:function(e,t){var n=St();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=St();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ig.bind(null,te,e),[r.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:Nc,useDebugValue:Qa,useDeferredValue:function(e){return St().memoizedState=e},useTransition:function(){var e=Nc(!1),t=e[0];return e=rg.bind(null,e[1]),St().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=te,i=St();if(Z){if(n===void 0)throw Error(x(407));n=n()}else{if(n=t(),ge===null)throw Error(x(349));Dn&30||Wd(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Oc(Kd.bind(null,r,s,e),[e]),r.flags|=2048,ci(9,Yd.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=St(),t=ge.identifierPrefix;if(Z){var n=jt,r=Dt;n=(r&~(1<<32-mt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ai++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ng++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lg={readContext:lt,useCallback:th,useContext:lt,useEffect:qa,useImperativeHandle:eh,useInsertionEffect:Xd,useLayoutEffect:Zd,useMemo:nh,useReducer:Bo,useRef:Jd,useState:function(){return Bo(ui)},useDebugValue:Qa,useDeferredValue:function(e){var t=at();return rh(t,pe.memoizedState,e)},useTransition:function(){var e=Bo(ui)[0],t=at().memoizedState;return[e,t]},useMutableSource:Vd,useSyncExternalStore:Hd,useId:ih,unstable_isNewReconciler:!1},ag={readContext:lt,useCallback:th,useContext:lt,useEffect:qa,useImperativeHandle:eh,useInsertionEffect:Xd,useLayoutEffect:Zd,useMemo:nh,useReducer:Fo,useRef:Jd,useState:function(){return Fo(ui)},useDebugValue:Qa,useDeferredValue:function(e){var t=at();return pe===null?t.memoizedState=e:rh(t,pe.memoizedState,e)},useTransition:function(){var e=Fo(ui)[0],t=at().memoizedState;return[e,t]},useMutableSource:Vd,useSyncExternalStore:Hd,useId:ih,unstable_isNewReconciler:!1};function ct(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Dl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ne({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var eo={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Me(),i=an(e),s=Rt(r,i);s.payload=t,n!=null&&(s.callback=n),t=on(e,s,i),t!==null&&(yt(t,e,i,r),es(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Me(),i=an(e),s=Rt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=on(e,s,i),t!==null&&(yt(t,e,i,r),es(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Me(),r=an(e),i=Rt(n,r);i.tag=2,t!=null&&(i.callback=t),t=on(e,i,r),t!==null&&(yt(t,e,r,n),es(t,e,r))}};function Tc(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ni(n,r)||!ni(i,s):!0}function ah(e,t,n){var r=!1,i=dn,s=t.contextType;return typeof s=="object"&&s!==null?s=lt(s):(i=Be(t)?In:Ne.current,r=t.contextTypes,s=(r=r!=null)?sr(e,i):dn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ac(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eo.enqueueReplaceState(t,t.state,null)}function jl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fa(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=lt(s):(s=Be(t)?In:Ne.current,i.context=sr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Dl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&eo.enqueueReplaceState(i,i.state,null),Ns(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ur(e,t){try{var n="",r=t;do n+=Lm(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Uo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ug=typeof WeakMap=="function"?WeakMap:Map;function uh(e,t,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ms||(Ms=!0,Wl=r),Rl(e,t)},n}function ch(e,t,n){n=Rt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Rl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rl(e,t),typeof r!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ic(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ug;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eg.bind(null,e,t,n),t.then(e,e))}function Mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rt(-1,1),t.tag=2,on(n,t,1))),n.lanes|=1),e)}var cg=Ut.ReactCurrentOwner,ze=!1;function Ae(e,t,n,r){t.child=e===null?$d(t,null,n,r):lr(t,e.child,n,r)}function jc(e,t,n,r,i){n=n.render;var s=t.ref;return nr(t,i),r=Ya(e,t,n,r,s,i),n=Ka(),e!==null&&!ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bt(e,t,i)):(Z&&n&&ja(t),t.flags|=1,Ae(e,t,r,i),t.child)}function Rc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!ru(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,fh(e,t,s,r,i)):(e=os(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ni,n(o,r)&&e.ref===t.ref)return Bt(e,t,i)}return t.flags|=1,e=un(s,r),e.ref=t.ref,e.return=t,t.child=e}function fh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ni(s,r)&&e.ref===t.ref)if(ze=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ze=!0);else return t.lanes=e.lanes,Bt(e,t,i)}return Ll(e,t,n,r,i)}function dh(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},q(Xn,Ve),Ve|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,q(Xn,Ve),Ve|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,q(Xn,Ve),Ve|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,q(Xn,Ve),Ve|=r;return Ae(e,t,i,n),t.child}function hh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ll(e,t,n,r,i){var s=Be(n)?In:Ne.current;return s=sr(t,s),nr(t,i),n=Ya(e,t,n,r,s,i),r=Ka(),e!==null&&!ze?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Bt(e,t,i)):(Z&&r&&ja(t),t.flags|=1,Ae(e,t,n,i),t.child)}function Lc(e,t,n,r,i){if(Be(n)){var s=!0;_s(t)}else s=!1;if(nr(t,i),t.stateNode===null)rs(e,t),ah(t,n,r),jl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=lt(u):(u=Be(n)?In:Ne.current,u=sr(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Ac(t,o,r,u),Jt=!1;var h=t.memoizedState;o.state=h,Ns(t,r,o,i),a=t.memoizedState,l!==r||h!==a||$e.current||Jt?(typeof c=="function"&&(Dl(t,n,c,r),a=t.memoizedState),(l=Jt||Tc(t,n,l,r,h,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ct(t.type,l),o.props=u,f=t.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=lt(a):(a=Be(n)?In:Ne.current,a=sr(t,a));var y=n.getDerivedStateFromProps;(c=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==a)&&Ac(t,o,r,a),Jt=!1,h=t.memoizedState,o.state=h,Ns(t,r,o,i);var v=t.memoizedState;l!==f||h!==v||$e.current||Jt?(typeof y=="function"&&(Dl(t,n,y,r),v=t.memoizedState),(u=Jt||Tc(t,n,u,r,h,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return bl(e,t,n,r,s,i)}function bl(e,t,n,r,i,s){hh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&kc(t,n,!1),Bt(e,t,s);r=t.stateNode,cg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=lr(t,e.child,null,s),t.child=lr(t,null,l,s)):Ae(e,t,l,s),t.memoizedState=r.state,i&&kc(t,n,!0),t.child}function ph(e){var t=e.stateNode;t.pendingContext?Sc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sc(e,t.context,!1),Ua(e,t.containerInfo)}function bc(e,t,n,r,i){return or(),La(i),t.flags|=256,Ae(e,t,n,r),t.child}var zl={dehydrated:null,treeContext:null,retryLane:0};function $l(e){return{baseLanes:e,cachePool:null,transitions:null}}function mh(e,t,n){var r=t.pendingProps,i=ee.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),q(ee,i&1),e===null)return Il(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ro(o,r,0,null),e=An(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=$l(n),t.memoizedState=zl,e):Ja(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fg(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=un(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=un(l,s):(s=An(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?$l(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=zl,r}return s=e.child,e=s.sibling,r=un(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ja(e,t){return t=ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zi(e,t,n,r){return r!==null&&La(r),lr(t,e.child,null,n),e=Ja(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fg(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Uo(Error(x(422))),zi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ro({mode:"visible",children:r.children},i,0,null),s=An(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&lr(t,e.child,null,o),t.child.memoizedState=$l(o),t.memoizedState=zl,s);if(!(t.mode&1))return zi(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(x(419)),r=Uo(s,r,void 0),zi(e,t,o,r)}if(l=(o&e.childLanes)!==0,ze||l){if(r=ge,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$t(e,i),yt(r,e,i,-1))}return nu(),r=Uo(Error(x(421))),zi(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=xg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,We=sn(i.nextSibling),Ke=t,Z=!0,ht=null,e!==null&&(nt[rt++]=Dt,nt[rt++]=jt,nt[rt++]=Mn,Dt=e.id,jt=e.overflow,Mn=t),t=Ja(t,r.children),t.flags|=4096,t)}function zc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ml(e.return,t,n)}function Vo(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function yh(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ae(e,t,r.children,n),r=ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zc(e,n,t);else if(e.tag===19)zc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(q(ee,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Os(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Os(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(x(153));if(t.child!==null){for(e=t.child,n=un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dg(e,t,n){switch(t.tag){case 3:ph(t),or();break;case 5:Ud(t);break;case 1:Be(t.type)&&_s(t);break;case 4:Ua(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;q(Ps,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(q(ee,ee.current&1),t.flags|=128,null):n&t.child.childLanes?mh(e,t,n):(q(ee,ee.current&1),e=Bt(e,t,n),e!==null?e.sibling:null);q(ee,ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yh(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),q(ee,ee.current),r)break;return null;case 22:case 23:return t.lanes=0,dh(e,t,n)}return Bt(e,t,n)}var gh,Bl,vh,wh;gh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bl=function(){};vh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,On(xt.current);var s=null;switch(n){case"input":i=al(e,i),r=al(e,r),s=[];break;case"select":i=ne({},i,{value:void 0}),r=ne({},r,{value:void 0}),s=[];break;case"textarea":i=fl(e,i),r=fl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ss)}hl(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qr.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qr.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&J("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};wh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Cr(e,t){if(!Z)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ee(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hg(e,t,n){var r=t.pendingProps;switch(Ra(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(t),null;case 1:return Be(t.type)&&ks(),Ee(t),null;case 3:return r=t.stateNode,ar(),X($e),X(Ne),Ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ht!==null&&(ql(ht),ht=null))),Bl(e,t),Ee(t),null;case 5:Va(t);var i=On(li.current);if(n=t.type,e!==null&&t.stateNode!=null)vh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(x(166));return Ee(t),null}if(e=On(xt.current),Li(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_t]=t,r[si]=s,e=(t.mode&1)!==0,n){case"dialog":J("cancel",r),J("close",r);break;case"iframe":case"object":case"embed":J("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)J(jr[i],r);break;case"source":J("error",r);break;case"img":case"image":case"link":J("error",r),J("load",r);break;case"details":J("toggle",r);break;case"input":Ku(r,s),J("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},J("invalid",r);break;case"textarea":Qu(r,s),J("invalid",r)}hl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ri(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ri(r.textContent,l,e),i=["children",""+l]):Qr.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&J("scroll",r)}switch(n){case"input":Ni(r),qu(r,s,!0);break;case"textarea":Ni(r),Ju(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ss)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[_t]=t,e[si]=r,gh(e,t,!1,!1),t.stateNode=e;e:{switch(o=pl(n,r),n){case"dialog":J("cancel",e),J("close",e),i=r;break;case"iframe":case"object":case"embed":J("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)J(jr[i],e);i=r;break;case"source":J("error",e),i=r;break;case"img":case"image":case"link":J("error",e),J("load",e),i=r;break;case"details":J("toggle",e),i=r;break;case"input":Ku(e,r),i=al(e,r),J("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ne({},r,{value:void 0}),J("invalid",e);break;case"textarea":Qu(e,r),i=fl(e,r),J("invalid",e);break;default:i=r}hl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Jf(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&qf(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Jr(e,a):typeof a=="number"&&Jr(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qr.hasOwnProperty(s)?a!=null&&s==="onScroll"&&J("scroll",e):a!=null&&Sa(e,s,a,o))}switch(n){case"input":Ni(e),qu(e,r,!1);break;case"textarea":Ni(e),Ju(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Zn(e,!!r.multiple,s,!1):r.defaultValue!=null&&Zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ss)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ee(t),null;case 6:if(e&&t.stateNode!=null)wh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(x(166));if(n=On(li.current),On(xt.current),Li(t)){if(r=t.stateNode,n=t.memoizedProps,r[_t]=t,(s=r.nodeValue!==n)&&(e=Ke,e!==null))switch(e.tag){case 3:Ri(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ri(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_t]=t,t.stateNode=r}return Ee(t),null;case 13:if(X(ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Z&&We!==null&&t.mode&1&&!(t.flags&128))bd(),or(),t.flags|=98560,s=!1;else if(s=Li(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(x(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(x(317));s[_t]=t}else or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ee(t),s=!1}else ht!==null&&(ql(ht),ht=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?me===0&&(me=3):nu())),t.updateQueue!==null&&(t.flags|=4),Ee(t),null);case 4:return ar(),Bl(e,t),e===null&&ri(t.stateNode.containerInfo),Ee(t),null;case 10:return $a(t.type._context),Ee(t),null;case 17:return Be(t.type)&&ks(),Ee(t),null;case 19:if(X(ee),s=t.memoizedState,s===null)return Ee(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Cr(s,!1);else{if(me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Os(e),o!==null){for(t.flags|=128,Cr(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return q(ee,ee.current&1|2),t.child}e=e.sibling}s.tail!==null&&le()>cr&&(t.flags|=128,r=!0,Cr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Os(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Z)return Ee(t),null}else 2*le()-s.renderingStartTime>cr&&n!==1073741824&&(t.flags|=128,r=!0,Cr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=le(),t.sibling=null,n=ee.current,q(ee,r?n&1|2:n&1),t):(Ee(t),null);case 22:case 23:return tu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ve&1073741824&&(Ee(t),t.subtreeFlags&6&&(t.flags|=8192)):Ee(t),null;case 24:return null;case 25:return null}throw Error(x(156,t.tag))}function pg(e,t){switch(Ra(t),t.tag){case 1:return Be(t.type)&&ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ar(),X($e),X(Ne),Ha(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Va(t),null;case 13:if(X(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(x(340));or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(ee),null;case 4:return ar(),null;case 10:return $a(t.type._context),null;case 22:case 23:return tu(),null;case 24:return null;default:return null}}var $i=!1,Ce=!1,mg=typeof WeakSet=="function"?WeakSet:Set,A=null;function Jn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function Fl(e,t,n){try{n()}catch(r){se(e,t,r)}}var $c=!1;function yg(e,t){if(xl=gs,e=xd(),Da(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)h=f,f=y;for(;;){if(f===e)break t;if(h===n&&++u===i&&(l=o),h===s&&++c===r&&(a=o),(y=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pl={focusedElem:e,selectionRange:n},gs=!1,A=t;A!==null;)if(t=A,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,A=e;else for(;A!==null;){t=A;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var k=v.memoizedProps,P=v.memoizedState,p=t.stateNode,d=p.getSnapshotBeforeUpdate(t.elementType===t.type?k:ct(t.type,k),P);p.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(S){se(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,A=e;break}A=t.return}return v=$c,$c=!1,v}function Hr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fl(t,n,s)}i=i.next}while(i!==r)}}function to(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ul(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Sh(e){var t=e.alternate;t!==null&&(e.alternate=null,Sh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_t],delete t[si],delete t[Ol],delete t[Zy],delete t[Gy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kh(e){return e.tag===5||e.tag===3||e.tag===4}function Bc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ss));else if(r!==4&&(e=e.child,e!==null))for(Vl(e,t,n),e=e.sibling;e!==null;)Vl(e,t,n),e=e.sibling}function Hl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Hl(e,t,n),e=e.sibling;e!==null;)Hl(e,t,n),e=e.sibling}var we=null,ft=!1;function qt(e,t,n){for(n=n.child;n!==null;)_h(e,t,n),n=n.sibling}function _h(e,t,n){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 5:Ce||Jn(n,t);case 6:var r=we,i=ft;we=null,qt(e,t,n),we=r,ft=i,we!==null&&(ft?(e=we,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):we.removeChild(n.stateNode));break;case 18:we!==null&&(ft?(e=we,n=n.stateNode,e.nodeType===8?Lo(e.parentNode,n):e.nodeType===1&&Lo(e,n),ei(e)):Lo(we,n.stateNode));break;case 4:r=we,i=ft,we=n.stateNode.containerInfo,ft=!0,qt(e,t,n),we=r,ft=i;break;case 0:case 11:case 14:case 15:if(!Ce&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fl(n,t,o),i=i.next}while(i!==r)}qt(e,t,n);break;case 1:if(!Ce&&(Jn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){se(n,t,l)}qt(e,t,n);break;case 21:qt(e,t,n);break;case 22:n.mode&1?(Ce=(r=Ce)||n.memoizedState!==null,qt(e,t,n),Ce=r):qt(e,t,n);break;default:qt(e,t,n)}}function Fc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mg),t.forEach(function(r){var i=Pg.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ut(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:we=l.stateNode,ft=!1;break e;case 3:we=l.stateNode.containerInfo,ft=!0;break e;case 4:we=l.stateNode.containerInfo,ft=!0;break e}l=l.return}if(we===null)throw Error(x(160));_h(s,o,i),we=null,ft=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){se(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Eh(t,e),t=t.sibling}function Eh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ut(t,e),wt(e),r&4){try{Hr(3,e,e.return),to(3,e)}catch(k){se(e,e.return,k)}try{Hr(5,e,e.return)}catch(k){se(e,e.return,k)}}break;case 1:ut(t,e),wt(e),r&512&&n!==null&&Jn(n,n.return);break;case 5:if(ut(t,e),wt(e),r&512&&n!==null&&Jn(n,n.return),e.flags&32){var i=e.stateNode;try{Jr(i,"")}catch(k){se(e,e.return,k)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Wf(i,s),pl(l,o);var u=pl(l,s);for(o=0;o<a.length;o+=2){var c=a[o],f=a[o+1];c==="style"?Jf(i,f):c==="dangerouslySetInnerHTML"?qf(i,f):c==="children"?Jr(i,f):Sa(i,c,f,u)}switch(l){case"input":ul(i,s);break;case"textarea":Yf(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Zn(i,!!s.multiple,y,!1):h!==!!s.multiple&&(s.defaultValue!=null?Zn(i,!!s.multiple,s.defaultValue,!0):Zn(i,!!s.multiple,s.multiple?[]:"",!1))}i[si]=s}catch(k){se(e,e.return,k)}}break;case 6:if(ut(t,e),wt(e),r&4){if(e.stateNode===null)throw Error(x(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(k){se(e,e.return,k)}}break;case 3:if(ut(t,e),wt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ei(t.containerInfo)}catch(k){se(e,e.return,k)}break;case 4:ut(t,e),wt(e);break;case 13:ut(t,e),wt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ga=le())),r&4&&Fc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Ce=(u=Ce)||c,ut(t,e),Ce=u):ut(t,e),wt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(A=e,c=e.child;c!==null;){for(f=A=c;A!==null;){switch(h=A,y=h.child,h.tag){case 0:case 11:case 14:case 15:Hr(4,h,h.return);break;case 1:Jn(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(k){se(r,n,k)}}break;case 5:Jn(h,h.return);break;case 22:if(h.memoizedState!==null){Vc(f);continue}}y!==null?(y.return=h,A=y):Vc(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Qf("display",o))}catch(k){se(e,e.return,k)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(k){se(e,e.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ut(t,e),wt(e),r&4&&Fc(e);break;case 21:break;default:ut(t,e),wt(e)}}function wt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(kh(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jr(i,""),r.flags&=-33);var s=Bc(e);Hl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Bc(e);Vl(e,l,o);break;default:throw Error(x(161))}}catch(a){se(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gg(e,t,n){A=e,xh(e)}function xh(e,t,n){for(var r=(e.mode&1)!==0;A!==null;){var i=A,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$i;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ce;l=$i;var u=Ce;if($i=o,(Ce=a)&&!u)for(A=i;A!==null;)o=A,a=o.child,o.tag===22&&o.memoizedState!==null?Hc(i):a!==null?(a.return=o,A=a):Hc(i);for(;s!==null;)A=s,xh(s),s=s.sibling;A=i,$i=l,Ce=u}Uc(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,A=s):Uc(e)}}function Uc(e){for(;A!==null;){var t=A;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ce||to(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ce)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ct(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Cc(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cc(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ei(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Ce||t.flags&512&&Ul(t)}catch(h){se(t,t.return,h)}}if(t===e){A=null;break}if(n=t.sibling,n!==null){n.return=t.return,A=n;break}A=t.return}}function Vc(e){for(;A!==null;){var t=A;if(t===e){A=null;break}var n=t.sibling;if(n!==null){n.return=t.return,A=n;break}A=t.return}}function Hc(e){for(;A!==null;){var t=A;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{to(4,t)}catch(a){se(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){se(t,i,a)}}var s=t.return;try{Ul(t)}catch(a){se(t,s,a)}break;case 5:var o=t.return;try{Ul(t)}catch(a){se(t,o,a)}}}catch(a){se(t,t.return,a)}if(t===e){A=null;break}var l=t.sibling;if(l!==null){l.return=t.return,A=l;break}A=t.return}}var vg=Math.ceil,Is=Ut.ReactCurrentDispatcher,Xa=Ut.ReactCurrentOwner,ot=Ut.ReactCurrentBatchConfig,V=0,ge=null,fe=null,Se=0,Ve=0,Xn=yn(0),me=0,fi=null,jn=0,no=0,Za=0,Wr=null,be=null,Ga=0,cr=1/0,At=null,Ms=!1,Wl=null,ln=null,Bi=!1,en=null,Ds=0,Yr=0,Yl=null,is=-1,ss=0;function Me(){return V&6?le():is!==-1?is:is=le()}function an(e){return e.mode&1?V&2&&Se!==0?Se&-Se:tg.transition!==null?(ss===0&&(ss=ad()),ss):(e=Y,e!==0||(e=window.event,e=e===void 0?16:md(e.type)),e):1}function yt(e,t,n,r){if(50<Yr)throw Yr=0,Yl=null,Error(x(185));wi(e,n,r),(!(V&2)||e!==ge)&&(e===ge&&(!(V&2)&&(no|=n),me===4&&Zt(e,Se)),Fe(e,r),n===1&&V===0&&!(t.mode&1)&&(cr=le()+500,Zs&&gn()))}function Fe(e,t){var n=e.callbackNode;ty(e,t);var r=ys(e,e===ge?Se:0);if(r===0)n!==null&&Gu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gu(n),t===1)e.tag===0?eg(Wc.bind(null,e)):jd(Wc.bind(null,e)),Jy(function(){!(V&6)&&gn()}),n=null;else{switch(ud(r)){case 1:n=Pa;break;case 4:n=od;break;case 16:n=ms;break;case 536870912:n=ld;break;default:n=ms}n=Mh(n,Ph.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ph(e,t){if(is=-1,ss=0,V&6)throw Error(x(327));var n=e.callbackNode;if(rr()&&e.callbackNode!==n)return null;var r=ys(e,e===ge?Se:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=js(e,r);else{t=r;var i=V;V|=2;var s=Nh();(ge!==e||Se!==t)&&(At=null,cr=le()+500,Tn(e,t));do try{kg();break}catch(l){Ch(e,l)}while(!0);za(),Is.current=s,V=i,fe!==null?t=0:(ge=null,Se=0,t=me)}if(t!==0){if(t===2&&(i=wl(e),i!==0&&(r=i,t=Kl(e,i))),t===1)throw n=fi,Tn(e,0),Zt(e,r),Fe(e,le()),n;if(t===6)Zt(e,r);else{if(i=e.current.alternate,!(r&30)&&!wg(i)&&(t=js(e,r),t===2&&(s=wl(e),s!==0&&(r=s,t=Kl(e,s))),t===1))throw n=fi,Tn(e,0),Zt(e,r),Fe(e,le()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(x(345));case 2:xn(e,be,At);break;case 3:if(Zt(e,r),(r&130023424)===r&&(t=Ga+500-le(),10<t)){if(ys(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Me(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Nl(xn.bind(null,e,be,At),t);break}xn(e,be,At);break;case 4:if(Zt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-mt(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vg(r/1960))-r,10<r){e.timeoutHandle=Nl(xn.bind(null,e,be,At),r);break}xn(e,be,At);break;case 5:xn(e,be,At);break;default:throw Error(x(329))}}}return Fe(e,le()),e.callbackNode===n?Ph.bind(null,e):null}function Kl(e,t){var n=Wr;return e.current.memoizedState.isDehydrated&&(Tn(e,t).flags|=256),e=js(e,t),e!==2&&(t=be,be=n,t!==null&&ql(t)),e}function ql(e){be===null?be=e:be.push.apply(be,e)}function wg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zt(e,t){for(t&=~Za,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-mt(t),r=1<<n;e[n]=-1,t&=~r}}function Wc(e){if(V&6)throw Error(x(327));rr();var t=ys(e,0);if(!(t&1))return Fe(e,le()),null;var n=js(e,t);if(e.tag!==0&&n===2){var r=wl(e);r!==0&&(t=r,n=Kl(e,r))}if(n===1)throw n=fi,Tn(e,0),Zt(e,t),Fe(e,le()),n;if(n===6)throw Error(x(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xn(e,be,At),Fe(e,le()),null}function eu(e,t){var n=V;V|=1;try{return e(t)}finally{V=n,V===0&&(cr=le()+500,Zs&&gn())}}function Rn(e){en!==null&&en.tag===0&&!(V&6)&&rr();var t=V;V|=1;var n=ot.transition,r=Y;try{if(ot.transition=null,Y=1,e)return e()}finally{Y=r,ot.transition=n,V=t,!(V&6)&&gn()}}function tu(){Ve=Xn.current,X(Xn)}function Tn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Qy(n)),fe!==null)for(n=fe.return;n!==null;){var r=n;switch(Ra(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ks();break;case 3:ar(),X($e),X(Ne),Ha();break;case 5:Va(r);break;case 4:ar();break;case 13:X(ee);break;case 19:X(ee);break;case 10:$a(r.type._context);break;case 22:case 23:tu()}n=n.return}if(ge=e,fe=e=un(e.current,null),Se=Ve=t,me=0,fi=null,Za=no=jn=0,be=Wr=null,Nn!==null){for(t=0;t<Nn.length;t++)if(n=Nn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Nn=null}return e}function Ch(e,t){do{var n=fe;try{if(za(),ts.current=As,Ts){for(var r=te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ts=!1}if(Dn=0,ye=pe=te=null,Vr=!1,ai=0,Xa.current=null,n===null||n.return===null){me=1,fi=t,fe=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=Se,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var y=Mc(o);if(y!==null){y.flags&=-257,Dc(y,o,l,s,t),y.mode&1&&Ic(s,u,t),t=y,a=u;var v=t.updateQueue;if(v===null){var k=new Set;k.add(a),t.updateQueue=k}else v.add(a);break e}else{if(!(t&1)){Ic(s,u,t),nu();break e}a=Error(x(426))}}else if(Z&&l.mode&1){var P=Mc(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Dc(P,o,l,s,t),La(ur(a,l));break e}}s=a=ur(a,l),me!==4&&(me=2),Wr===null?Wr=[s]:Wr.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=uh(s,a,t);Pc(s,p);break e;case 1:l=a;var d=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof d.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ln===null||!ln.has(m)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=ch(s,l,t);Pc(s,S);break e}}s=s.return}while(s!==null)}Th(n)}catch(C){t=C,fe===n&&n!==null&&(fe=n=n.return);continue}break}while(!0)}function Nh(){var e=Is.current;return Is.current=As,e===null?As:e}function nu(){(me===0||me===3||me===2)&&(me=4),ge===null||!(jn&268435455)&&!(no&268435455)||Zt(ge,Se)}function js(e,t){var n=V;V|=2;var r=Nh();(ge!==e||Se!==t)&&(At=null,Tn(e,t));do try{Sg();break}catch(i){Ch(e,i)}while(!0);if(za(),V=n,Is.current=r,fe!==null)throw Error(x(261));return ge=null,Se=0,me}function Sg(){for(;fe!==null;)Oh(fe)}function kg(){for(;fe!==null&&!Ym();)Oh(fe)}function Oh(e){var t=Ih(e.alternate,e,Ve);e.memoizedProps=e.pendingProps,t===null?Th(e):fe=t,Xa.current=null}function Th(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=pg(n,t),n!==null){n.flags&=32767,fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{me=6,fe=null;return}}else if(n=hg(n,t,Ve),n!==null){fe=n;return}if(t=t.sibling,t!==null){fe=t;return}fe=t=e}while(t!==null);me===0&&(me=5)}function xn(e,t,n){var r=Y,i=ot.transition;try{ot.transition=null,Y=1,_g(e,t,n,r)}finally{ot.transition=i,Y=r}return null}function _g(e,t,n,r){do rr();while(en!==null);if(V&6)throw Error(x(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(x(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ny(e,s),e===ge&&(fe=ge=null,Se=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bi||(Bi=!0,Mh(ms,function(){return rr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ot.transition,ot.transition=null;var o=Y;Y=1;var l=V;V|=4,Xa.current=null,yg(e,n),Eh(n,e),Uy(Pl),gs=!!xl,Pl=xl=null,e.current=n,gg(n),Km(),V=l,Y=o,ot.transition=s}else e.current=n;if(Bi&&(Bi=!1,en=e,Ds=i),s=e.pendingLanes,s===0&&(ln=null),Jm(n.stateNode),Fe(e,le()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ms)throw Ms=!1,e=Wl,Wl=null,e;return Ds&1&&e.tag!==0&&rr(),s=e.pendingLanes,s&1?e===Yl?Yr++:(Yr=0,Yl=e):Yr=0,gn(),null}function rr(){if(en!==null){var e=ud(Ds),t=ot.transition,n=Y;try{if(ot.transition=null,Y=16>e?16:e,en===null)var r=!1;else{if(e=en,en=null,Ds=0,V&6)throw Error(x(331));var i=V;for(V|=4,A=e.current;A!==null;){var s=A,o=s.child;if(A.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(A=u;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 15:Hr(8,c,s)}var f=c.child;if(f!==null)f.return=c,A=f;else for(;A!==null;){c=A;var h=c.sibling,y=c.return;if(Sh(c),c===u){A=null;break}if(h!==null){h.return=y,A=h;break}A=y}}}var v=s.alternate;if(v!==null){var k=v.child;if(k!==null){v.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}A=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,A=o;else e:for(;A!==null;){if(s=A,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hr(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,A=p;break e}A=s.return}}var d=e.current;for(A=d;A!==null;){o=A;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,A=m;else e:for(o=d;A!==null;){if(l=A,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:to(9,l)}}catch(C){se(l,l.return,C)}if(l===o){A=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,A=S;break e}A=l.return}}if(V=i,gn(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Ks,e)}catch{}r=!0}return r}finally{Y=n,ot.transition=t}}return!1}function Yc(e,t,n){t=ur(n,t),t=uh(e,t,1),e=on(e,t,1),t=Me(),e!==null&&(wi(e,1,t),Fe(e,t))}function se(e,t,n){if(e.tag===3)Yc(e,e,n);else for(;t!==null;){if(t.tag===3){Yc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ln===null||!ln.has(r))){e=ur(n,e),e=ch(t,e,1),t=on(t,e,1),e=Me(),t!==null&&(wi(t,1,e),Fe(t,e));break}}t=t.return}}function Eg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Me(),e.pingedLanes|=e.suspendedLanes&n,ge===e&&(Se&n)===n&&(me===4||me===3&&(Se&130023424)===Se&&500>le()-Ga?Tn(e,0):Za|=n),Fe(e,t)}function Ah(e,t){t===0&&(e.mode&1?(t=Ai,Ai<<=1,!(Ai&130023424)&&(Ai=4194304)):t=1);var n=Me();e=$t(e,t),e!==null&&(wi(e,t,n),Fe(e,n))}function xg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ah(e,n)}function Pg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(t),Ah(e,n)}var Ih;Ih=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)ze=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ze=!1,dg(e,t,n);ze=!!(e.flags&131072)}else ze=!1,Z&&t.flags&1048576&&Rd(t,xs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rs(e,t),e=t.pendingProps;var i=sr(t,Ne.current);nr(t,n),i=Ya(null,t,r,e,i,n);var s=Ka();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Be(r)?(s=!0,_s(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fa(t),i.updater=eo,t.stateNode=i,i._reactInternals=t,jl(t,r,e,n),t=bl(null,t,r,!0,s,n)):(t.tag=0,Z&&s&&ja(t),Ae(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Ng(r),e=ct(r,e),i){case 0:t=Ll(null,t,r,e,n);break e;case 1:t=Lc(null,t,r,e,n);break e;case 11:t=jc(null,t,r,e,n);break e;case 14:t=Rc(null,t,r,ct(r.type,e),n);break e}throw Error(x(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),Ll(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),Lc(e,t,r,i,n);case 3:e:{if(ph(t),e===null)throw Error(x(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Fd(e,t),Ns(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ur(Error(x(423)),t),t=bc(e,t,r,n,i);break e}else if(r!==i){i=ur(Error(x(424)),t),t=bc(e,t,r,n,i);break e}else for(We=sn(t.stateNode.containerInfo.firstChild),Ke=t,Z=!0,ht=null,n=$d(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(or(),r===i){t=Bt(e,t,n);break e}Ae(e,t,r,n)}t=t.child}return t;case 5:return Ud(t),e===null&&Il(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Cl(r,i)?o=null:s!==null&&Cl(r,s)&&(t.flags|=32),hh(e,t),Ae(e,t,o,n),t.child;case 6:return e===null&&Il(t),null;case 13:return mh(e,t,n);case 4:return Ua(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lr(t,null,r,n):Ae(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),jc(e,t,r,i,n);case 7:return Ae(e,t,t.pendingProps,n),t.child;case 8:return Ae(e,t,t.pendingProps.children,n),t.child;case 12:return Ae(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,q(Ps,r._currentValue),r._currentValue=o,s!==null)if(gt(s.value,o)){if(s.children===i.children&&!$e.current){t=Bt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Rt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ml(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(x(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ml(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ae(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,nr(t,n),i=lt(i),r=r(i),t.flags|=1,Ae(e,t,r,n),t.child;case 14:return r=t.type,i=ct(r,t.pendingProps),i=ct(r.type,i),Rc(e,t,r,i,n);case 15:return fh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ct(r,i),rs(e,t),t.tag=1,Be(r)?(e=!0,_s(t)):e=!1,nr(t,n),ah(t,r,i),jl(t,r,i,n),bl(null,t,r,!0,e,n);case 19:return yh(e,t,n);case 22:return dh(e,t,n)}throw Error(x(156,t.tag))};function Mh(e,t){return sd(e,t)}function Cg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(e,t,n,r){return new Cg(e,t,n,r)}function ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ng(e){if(typeof e=="function")return ru(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_a)return 11;if(e===Ea)return 14}return 2}function un(e,t){var n=e.alternate;return n===null?(n=st(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function os(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")ru(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Fn:return An(n.children,i,s,t);case ka:o=8,i|=8;break;case il:return e=st(12,n,t,i|2),e.elementType=il,e.lanes=s,e;case sl:return e=st(13,n,t,i),e.elementType=sl,e.lanes=s,e;case ol:return e=st(19,n,t,i),e.elementType=ol,e.lanes=s,e;case Uf:return ro(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Bf:o=10;break e;case Ff:o=9;break e;case _a:o=11;break e;case Ea:o=14;break e;case Qt:o=16,r=null;break e}throw Error(x(130,e==null?e:typeof e,""))}return t=st(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function An(e,t,n,r){return e=st(7,e,r,t),e.lanes=n,e}function ro(e,t,n,r){return e=st(22,e,r,t),e.elementType=Uf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ho(e,t,n){return e=st(6,e,null,t),e.lanes=n,e}function Wo(e,t,n){return t=st(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Og(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Po(0),this.expirationTimes=Po(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Po(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iu(e,t,n,r,i,s,o,l,a){return e=new Og(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=st(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(s),e}function Tg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Dh(e){if(!e)return dn;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(x(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Be(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(x(171))}if(e.tag===1){var n=e.type;if(Be(n))return Dd(e,n,t)}return t}function jh(e,t,n,r,i,s,o,l,a){return e=iu(n,r,!0,e,i,s,o,l,a),e.context=Dh(null),n=e.current,r=Me(),i=an(n),s=Rt(r,i),s.callback=t??null,on(n,s,i),e.current.lanes=i,wi(e,i,r),Fe(e,r),e}function io(e,t,n,r){var i=t.current,s=Me(),o=an(i);return n=Dh(n),t.context===null?t.context=n:t.pendingContext=n,t=Rt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=on(i,t,o),e!==null&&(yt(e,i,o,s),es(e,i,o)),o}function Rs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function su(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}function Ag(){return null}var Rh=typeof reportError=="function"?reportError:function(e){console.error(e)};function ou(e){this._internalRoot=e}so.prototype.render=ou.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(x(409));io(e,t,null,null)};so.prototype.unmount=ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rn(function(){io(null,e,null,null)}),t[zt]=null}};function so(e){this._internalRoot=e}so.prototype.unstable_scheduleHydration=function(e){if(e){var t=dd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xt.length&&t!==0&&t<Xt[n].priority;n++);Xt.splice(n,0,e),n===0&&pd(e)}};function lu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qc(){}function Ig(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Rs(o);s.call(u)}}var o=jh(t,r,e,0,null,!1,!1,"",qc);return e._reactRootContainer=o,e[zt]=o.current,ri(e.nodeType===8?e.parentNode:e),Rn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Rs(a);l.call(u)}}var a=iu(e,0,!1,null,null,!1,!1,"",qc);return e._reactRootContainer=a,e[zt]=a.current,ri(e.nodeType===8?e.parentNode:e),Rn(function(){io(t,a,n,r)}),a}function lo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Rs(o);l.call(a)}}io(t,o,e,i)}else o=Ig(n,t,e,i,r);return Rs(o)}cd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dr(t.pendingLanes);n!==0&&(Ca(t,n|1),Fe(t,le()),!(V&6)&&(cr=le()+500,gn()))}break;case 13:Rn(function(){var r=$t(e,1);if(r!==null){var i=Me();yt(r,e,1,i)}}),su(e,1)}};Na=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var n=Me();yt(t,e,134217728,n)}su(e,134217728)}};fd=function(e){if(e.tag===13){var t=an(e),n=$t(e,t);if(n!==null){var r=Me();yt(n,e,t,r)}su(e,t)}};dd=function(){return Y};hd=function(e,t){var n=Y;try{return Y=e,t()}finally{Y=n}};yl=function(e,t,n){switch(t){case"input":if(ul(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Xs(r);if(!i)throw Error(x(90));Hf(r),ul(r,i)}}}break;case"textarea":Yf(e,n);break;case"select":t=n.value,t!=null&&Zn(e,!!n.multiple,t,!1)}};Gf=eu;ed=Rn;var Mg={usingClientEntryPoint:!1,Events:[ki,Wn,Xs,Xf,Zf,eu]},Nr={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dg={bundleType:Nr.bundleType,version:Nr.version,rendererPackageName:Nr.rendererPackageName,rendererConfig:Nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rd(e),e===null?null:e.stateNode},findFiberByHostInstance:Nr.findFiberByHostInstance||Ag,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Ks=Fi.inject(Dg),Et=Fi}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mg;Ze.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lu(t))throw Error(x(200));return Tg(e,t,null,n)};Ze.createRoot=function(e,t){if(!lu(e))throw Error(x(299));var n=!1,r="",i=Rh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=iu(e,1,!1,null,null,n,!1,r,i),e[zt]=t.current,ri(e.nodeType===8?e.parentNode:e),new ou(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(x(188)):(e=Object.keys(e).join(","),Error(x(268,e)));return e=rd(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return Rn(e)};Ze.hydrate=function(e,t,n){if(!oo(t))throw Error(x(200));return lo(null,e,t,!0,n)};Ze.hydrateRoot=function(e,t,n){if(!lu(e))throw Error(x(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Rh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=jh(t,null,e,1,n??null,i,!1,s,o),e[zt]=t.current,ri(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new so(t)};Ze.render=function(e,t,n){if(!oo(t))throw Error(x(200));return lo(null,e,t,!1,n)};Ze.unmountComponentAtNode=function(e){if(!oo(e))throw Error(x(40));return e._reactRootContainer?(Rn(function(){lo(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};Ze.unstable_batchedUpdates=eu;Ze.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oo(n))throw Error(x(200));if(e==null||e._reactInternals===void 0)throw Error(x(38));return lo(e,t,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function Lh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lh)}catch(e){console.error(e)}}Lh(),Lf.exports=Ze;var jg=Lf.exports,bh,Qc=jg;bh=Qc.createRoot,Qc.hydrateRoot;let Rg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Lg=(e=21)=>{let t="",n=e|0;for(;n--;)t+=Rg[Math.random()*64|0];return t};function pt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fr(e){return!!e&&!!e[Je]}function Ln(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Hg}(e)||Array.isArray(e)||!!e[rf]||!!(!((t=e.constructor)===null||t===void 0)&&t[rf])||au(e)||uu(e))}function di(e,t,n){n===void 0&&(n=!1),yr(e)===0?(n?Object.keys:pu)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function yr(e){var t=e[Je];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:au(e)?2:uu(e)?3:0}function Ql(e,t){return yr(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bg(e,t){return yr(e)===2?e.get(t):e[t]}function zh(e,t,n){var r=yr(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function zg(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function au(e){return Ug&&e instanceof Map}function uu(e){return Vg&&e instanceof Set}function Pn(e){return e.o||e.t}function cu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Wg(e);delete t[Je];for(var n=pu(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function fu(e,t){return t===void 0&&(t=!1),du(e)||fr(e)||!Ln(e)||(yr(e)>1&&(e.set=e.add=e.clear=e.delete=$g),Object.freeze(e),t&&di(e,function(n,r){return fu(r,!0)},!0)),e}function $g(){pt(2)}function du(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Pt(e){var t=Yg[e];return t||pt(18,e),t}function Jc(){return hi}function Yo(e,t){t&&(Pt("Patches"),e.u=[],e.s=[],e.v=t)}function Ls(e){Jl(e),e.p.forEach(Bg),e.p=null}function Jl(e){e===hi&&(hi=e.l)}function Xc(e){return hi={p:[],l:hi,h:e,m:!0,_:0}}function Bg(e){var t=e[Je];t.i===0||t.i===1?t.j():t.g=!0}function Ko(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Pt("ES5").S(t,e,r),r?(n[Je].P&&(Ls(t),pt(4)),Ln(e)&&(e=bs(t,e),t.l||zs(t,e)),t.u&&Pt("Patches").M(n[Je].t,e,t.u,t.s)):e=bs(t,n,[]),Ls(t),t.u&&t.v(t.u,t.s),e!==$h?e:void 0}function bs(e,t,n){if(du(t))return t;var r=t[Je];if(!r)return di(t,function(l,a){return Zc(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return zs(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=cu(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),di(s,function(l,a){return Zc(e,r,i,l,a,n,o)}),zs(e,i,!1),n&&e.u&&Pt("Patches").N(r,n,e.u,e.s)}return r.o}function Zc(e,t,n,r,i,s,o){if(fr(i)){var l=bs(e,i,s&&t&&t.i!==3&&!Ql(t.R,r)?s.concat(r):void 0);if(zh(n,r,l),!fr(l))return;e.m=!1}else o&&n.add(i);if(Ln(i)&&!du(i)){if(!e.h.D&&e._<1)return;bs(e,i),t&&t.A.l||zs(e,i)}}function zs(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&fu(t,n)}function qo(e,t){var n=e[Je];return(n?Pn(n):e)[t]}function Gc(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Xl(e){e.P||(e.P=!0,e.l&&Xl(e.l))}function Qo(e){e.o||(e.o=cu(e.t))}function Zl(e,t,n){var r=au(t)?Pt("MapSet").F(t,n):uu(t)?Pt("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:Jc(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=Gl;o&&(a=[l],u=Rr);var c=Proxy.revocable(a,u),f=c.revoke,h=c.proxy;return l.k=h,l.j=f,h}(t,n):Pt("ES5").J(t,n);return(n?n.A:Jc()).p.push(r),r}function Fg(e){return fr(e)||pt(22,e),function t(n){if(!Ln(n))return n;var r,i=n[Je],s=yr(n);if(i){if(!i.P&&(i.i<4||!Pt("ES5").K(i)))return i.t;i.I=!0,r=ef(n,s),i.I=!1}else r=ef(n,s);return di(r,function(o,l){i&&bg(i.t,o)===l||zh(r,o,t(l))}),s===3?new Set(r):r}(e)}function ef(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return cu(e)}var tf,hi,hu=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Ug=typeof Map<"u",Vg=typeof Set<"u",nf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",$h=hu?Symbol.for("immer-nothing"):((tf={})["immer-nothing"]=!0,tf),rf=hu?Symbol.for("immer-draftable"):"__$immer_draftable",Je=hu?Symbol.for("immer-state"):"__$immer_state",Hg=""+Object.prototype.constructor,pu=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Wg=Object.getOwnPropertyDescriptors||function(e){var t={};return pu(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Yg={},Gl={get:function(e,t){if(t===Je)return e;var n=Pn(e);if(!Ql(n,t))return function(i,s,o){var l,a=Gc(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ln(r)?r:r===qo(e.t,t)?(Qo(e),e.o[t]=Zl(e.A.h,r,e)):r},has:function(e,t){return t in Pn(e)},ownKeys:function(e){return Reflect.ownKeys(Pn(e))},set:function(e,t,n){var r=Gc(Pn(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=qo(Pn(e),t),s=i==null?void 0:i[Je];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(zg(n,i)&&(n!==void 0||Ql(e.t,t)))return!0;Qo(e),Xl(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return qo(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Qo(e),Xl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Pn(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){pt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){pt(12)}},Rr={};di(Gl,function(e,t){Rr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Rr.deleteProperty=function(e,t){return Rr.set.call(this,e,t,void 0)},Rr.set=function(e,t,n){return Gl.set.call(this,e[0],t,n,e[0])};var Kg=function(){function e(n){var r=this;this.O=nf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(k){var P=this;k===void 0&&(k=l);for(var p=arguments.length,d=Array(p>1?p-1:0),m=1;m<p;m++)d[m-1]=arguments[m];return a.produce(k,function(S){var C;return(C=s).call.apply(C,[P,S].concat(d))})}}var u;if(typeof s!="function"&&pt(6),o!==void 0&&typeof o!="function"&&pt(7),Ln(i)){var c=Xc(r),f=Zl(r,i,void 0),h=!0;try{u=s(f),h=!1}finally{h?Ls(c):Jl(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(k){return Yo(c,o),Ko(k,c)},function(k){throw Ls(c),k}):(Yo(c,o),Ko(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===$h&&(u=void 0),r.D&&fu(u,!0),o){var y=[],v=[];Pt("Patches").M(i,u,y,v),o(y,v)}return u}pt(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(y){return i.apply(void 0,[y].concat(f))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ln(n)||pt(8),fr(n)&&(n=Fg(n));var r=Xc(this),i=Zl(this,n,void 0);return i[Je].C=!0,Jl(r),i},t.finishDraft=function(n,r){var i=n&&n[Je],s=i.A;return Yo(s,r),Ko(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!nf&&pt(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Pt("Patches").$;return fr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),Xe=new Kg,qg=Xe.produce;Xe.produceWithPatches.bind(Xe);Xe.setAutoFreeze.bind(Xe);Xe.setUseProxies.bind(Xe);Xe.applyPatches.bind(Xe);Xe.createDraft.bind(Xe);Xe.finishDraft.bind(Xe);class Qg{constructor(t){const n=Jg();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function Jg(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function sf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Bh(e,t){const n=new Qg(e),r=n.next.bind(n);return t&&sf(t,n),r.state=()=>sf(n,{}),r}class of{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=Bh(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const Xg={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new of(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=of.seed()),{seed:t}},playerView:()=>{}};var Zg=Function.prototype,Gg=Zg.toString;Gg.call(Object);const pi="MAKE_MOVE",ao="GAME_EVENT",uo="REDO",mu="RESET",yu="SYNC",co="UNDO",gu="UPDATE",vu="PATCH",Fh="PLUGIN",fo="STRIP_TRANSIENTS",Uh=(e,t,n,r)=>({type:pi,payload:{type:e,args:t,playerID:n,credentials:r}}),Kr=(e,t,n,r)=>({type:ao,payload:{type:e,args:t,playerID:n,credentials:r}}),Vh=(e,t,n,r)=>({type:ao,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),Hh=e=>({type:yu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),Wh=(e,t,n,r)=>({type:vu,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),Yh=(e,t)=>({type:gu,state:e,deltalog:t,clientOnly:!0}),Kh=e=>({type:mu,state:e,clientOnly:!0}),qh=(e,t)=>({type:co,payload:{type:null,args:null,playerID:e,credentials:t}}),Qh=(e,t)=>({type:uo,payload:{type:null,args:null,playerID:e,credentials:t}}),ev=(e,t,n,r)=>({type:Fh,payload:{type:e,args:t,playerID:n,credentials:r}}),Jh=()=>({type:fo});var tv=Object.freeze({__proto__:null,makeMove:Uh,gameEvent:Kr,automaticGameEvent:Vh,sync:Hh,patch:Wh,update:Yh,reset:Kh,undo:qh,redo:Qh,plugin:ev,stripTransients:Jh});const hn="INVALID_MOVE",nv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=qg(t.G,s=>{const o=e({...t,G:s},...n);if(o===hn){r=!0;return}return o});return r?hn:i}};var Pe;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Pe||(Pe={}));var It;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(It||(It={}));class rv{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,It.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,It.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Pe.TURN_ON_END:case Pe.PHASE_ON_END:return r(s.error,It.StageEventInOnEnd);case Pe.PHASE_ON_BEGIN:return r(s.error,It.StageEventInPhaseBegin);case Pe.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,It.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Pe.TURN_ON_END||s.calledFrom===Pe.PHASE_ON_END)return r(s.error,It.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Pe.PHASE_ON_END)return r(s.error,It.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=Vh(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const wu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new rv(e.flow,t,n).api()},iv={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},sv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},ov=(...e)=>console.error(...e);function W(e){ov("ERROR:",e)}const Su=[nv,Xg,iv,sv],Ei=[...Su,wu],lv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),dr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),Xh=(e,t,n)=>[...Su,...n,wu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),av=(e,t)=>([...Ei,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),ea=(e,t)=>([...Ei,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),uv=(e,t)=>([...Su,...t.game.plugins,wu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),cv=(e,t)=>[...Ei,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),fv=(e,t)=>[...Ei,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,Zh=(e,t)=>{const n=uv(e,t),r=fv(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return W(`${i} plugin declared action invalid:
${s}`),[e,r]},Gh=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Ei,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function $s(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function Bs(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Fs.NULL),n=a}else{if($s(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Ui(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Ui(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Ui(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Ui(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function dv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=Bs(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Ui(e,t,n,r,i){(typeof i!="object"||i===Fs.NULL)&&(i={stage:i}),i.stage!==void 0&&($s(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function ta(e,t){return e[t]+""}function hv(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...dr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((h,y)=>y+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&W(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const f=ta(a,u);return r={...r,currentPlayer:f,playOrderPos:u,playOrder:a},r=Bs(r,t.activePlayers||{}),r}function pv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&W(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=ta(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:W(`invalid argument to endTurn: ${u}`)}});else{const c={...dr(e),G:s,ctx:o},f=i.next(c),h=typeof f;f!==void 0&&h!=="number"&&W(`invalid value returned by turn.order.next  expected number or undefined got ${h} ${f}.`),f===void 0?a=!0:(l=f,t=ta(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const mv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Fs={NULL:null};var ku={},Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Pointer=Lt.escapeToken=Lt.unescapeToken=void 0;function ep(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Lt.unescapeToken=ep;function tp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Lt.escapeToken=tp;var yv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(ep);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(tp).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Lt.Pointer=yv;var ie={},_u={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(_u);var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.diffAny=Ie.diffObjects=Ie.diffArrays=Ie.intersection=Ie.subtract=Ie.isDestructive=void 0;var mi=_u;function gv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}Ie.isDestructive=gv;function na(e,t){var n={};for(var r in e)mi.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)mi.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}Ie.subtract=na;function np(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)mi.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}Ie.intersection=np;function vv(e){return e.op==="add"}function wv(e){return e.op==="remove"}function Jo(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function rp(e,t,n,r){r===void 0&&(r=ho);var i={"0,0":{operations:[],cost:0}};function s(c,f){var h="".concat(c,",").concat(f),y=i[h];if(y===void 0){if(c>0&&f>0&&!r(e[c-1],t[f-1],n.add(String(c-1))).length)y=s(c-1,f-1);else{var v=[];if(c>0){var k=s(c-1,f),P={op:"remove",index:c-1};v.push(Jo(k,P))}if(f>0){var p=s(c,f-1),d={op:"add",index:c-1,value:t[f-1]};v.push(Jo(p,d))}if(c>0&&f>0){var m=s(c-1,f-1),S={op:"replace",index:c-1,original:e[c-1],value:t[f-1]};v.push(Jo(m,S))}var C=v.sort(function(O,N){return O.cost-N.cost})[0];y=C}i[h]=y}return y}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,f){var h=c[0],y=c[1];if(vv(f)){var v=f.index+1+y,k=v<o+y?String(v):"-",P={op:f.op,path:n.add(k).toString(),value:f.value};return[h.concat(P),y+1]}else if(wv(f)){var P={op:f.op,path:n.add(String(f.index+y)).toString()};return[h.concat(P),y-1]}else{var p=n.add(String(f.index+y)),d=r(f.original,f.value,p);return[h.concat.apply(h,d),y]}},[[],0])[0];return u}Ie.diffArrays=rp;function ip(e,t,n,r){r===void 0&&(r=ho);var i=[];return na(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),na(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),np([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}Ie.diffObjects=ip;function ho(e,t,n,r){if(r===void 0&&(r=ho),e===t)return[];var i=(0,mi.objectType)(e),s=(0,mi.objectType)(t);return i=="array"&&s=="array"?rp(e,t,n,r):i=="object"&&s=="object"?ip(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Ie.diffAny=ho;var Eu=br&&br.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ie,"__esModule",{value:!0});ie.apply=ie.InvalidOperationError=ie.test=ie.copy=ie.move=ie.replace=ie.remove=ie.add=ie.TestError=ie.MissingError=void 0;var Ft=Lt,xu=_u,Sv=Ie,Ct=function(e){Eu(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);ie.MissingError=Ct;var sp=function(e){Eu(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);ie.TestError=sp;function Pu(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function op(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function lp(e,t){var n=Ft.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new Ct(t.path):(Pu(n.parent,n.key,(0,xu.clone)(t.value)),null)}ie.add=lp;function ap(e,t){var n=Ft.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new Ct(t.path):(op(n.parent,n.key),null)}ie.remove=ap;function up(e,t){var n=Ft.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new Ct(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new Ct(t.path)}else if(n.value===void 0)return new Ct(t.path);return n.parent[n.key]=(0,xu.clone)(t.value),null}ie.replace=up;function cp(e,t){var n=Ft.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Ct(t.from);var r=Ft.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Ct(t.path):(op(n.parent,n.key),Pu(r.parent,r.key,n.value),null)}ie.move=cp;function fp(e,t){var n=Ft.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new Ct(t.from);var r=Ft.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new Ct(t.path):(Pu(r.parent,r.key,(0,xu.clone)(n.value)),null)}ie.copy=fp;function dp(e,t){var n=Ft.Pointer.fromJSON(t.path).evaluate(e);return(0,Sv.diffAny)(n.value,t.value,new Ft.Pointer).length?new sp(n.value,t.value):null}ie.test=dp;var hp=function(e){Eu(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);ie.InvalidOperationError=hp;function kv(e,t){switch(t.op){case"add":return lp(e,t);case"remove":return ap(e,t);case"replace":return up(e,t);case"move":return cp(e,t);case"copy":return fp(e,t);case"test":return dp(e,t)}return new hp(t)}ie.apply=kv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Lt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=ie,r=Ie;function i(u,c){return c.map(function(f){return(0,n.apply)(u,f)})}e.applyPatch=i;function s(u){function c(f,h,y){var v=u(f,h,y);return Array.isArray(v)?v:(0,r.diffAny)(f,h,y,c)}return c}function o(u,c,f){var h=new t.Pointer;return(f?s(f):r.diffAny)(u,c,h)}e.createPatch=o;function l(u,c){var f=t.Pointer.fromJSON(c).evaluate(u);if(f!==void 0)return{op:"test",path:c,value:f.value}}function a(u,c){var f=new Array;return c.filter(r.isDestructive).forEach(function(h){var y=l(u,h.path);if(y&&f.push(y),"from"in h){var v=l(u,h.from);v&&f.push(v)}}),f}e.createTests=a})(ku);function _v({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:g})=>g),i||(i={});const l={...t};""in l&&W("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(g=>u.add(g));const f=(g,_)=>{const E=Xh(g,_,o);return $=>{const R=dr($);return E({...R,G:$.G,ctx:$.ctx,playerID:$.playerID})}},h=g=>_=>{const E=dr(_);return g({...E,G:_.G,ctx:_.ctx})},y={onEnd:f(r,Pe.GAME_ON_END),endIf:h(n)};for(const g in l){const _=l[g];if(_.start===!0&&(c=g),_.moves!==void 0)for(const E of Object.keys(_.moves))a[g+"."+E]=_.moves[E],u.add(E);_.endIf===void 0&&(_.endIf=()=>{}),_.onBegin===void 0&&(_.onBegin=({G:E})=>E),_.onEnd===void 0&&(_.onEnd=({G:E})=>E),_.turn===void 0&&(_.turn=i),_.turn.order===void 0&&(_.turn.order=mv.DEFAULT),_.turn.onBegin===void 0&&(_.turn.onBegin=({G:E})=>E),_.turn.onEnd===void 0&&(_.turn.onEnd=({G:E})=>E),_.turn.endIf===void 0&&(_.turn.endIf=()=>!1),_.turn.onMove===void 0&&(_.turn.onMove=({G:E})=>E),_.turn.stages===void 0&&(_.turn.stages={}),$s(_.turn,!0);for(const E in _.turn.stages){const R=_.turn.stages[E].moves||{};for(const j of Object.keys(R)){const re=g+"."+E+"."+j;a[re]=R[j],u.add(j)}}if(_.wrapped={onBegin:f(_.onBegin,Pe.PHASE_ON_BEGIN),onEnd:f(_.onEnd,Pe.PHASE_ON_END),endIf:h(_.endIf)},_.turn.wrapped={onMove:f(_.turn.onMove,Pe.TURN_ON_MOVE),onBegin:f(_.turn.onBegin,Pe.TURN_ON_BEGIN),onEnd:f(_.turn.onEnd,Pe.TURN_ON_END),endIf:h(_.turn.endIf)},typeof _.next!="function"){const{next:E}=_;_.next=()=>E||null}_.wrapped.next=h(_.next)}function v(g){return g.phase?l[g.phase]:l[""]}function k(g){return g}function P(g,_){const E=new Set,$=new Set;for(let R=0;R<_.length;R++){const{fn:j,arg:re,...Q}=_[R];if(j===ae){$.clear();const Oe=g.ctx.phase;if(E.has(Oe)){const vt={...g.ctx,phase:null};return{...g,ctx:vt}}E.add(Oe)}const et=[];if(g=j(g,{...Q,arg:re,next:et}),j===G)break;const ce=I(g);if(ce){_.push({fn:G,arg:ce,turn:g.ctx.turn,phase:g.ctx.phase,automatic:!0});continue}const ve=H(g);if(ve){_.push({fn:ae,arg:ve,turn:g.ctx.turn,phase:g.ctx.phase,automatic:!0});continue}if([k,O,N].includes(j)){const Oe=z(g);if(Oe){_.push({fn:he,arg:Oe,turn:g.ctx.turn,phase:g.ctx.phase,automatic:!0});continue}}_.push(...et)}return g}function p(g,{next:_}){return _.push({fn:d}),g}function d(g,{next:_}){let{G:E,ctx:$}=g;return E=v($).wrapped.onBegin(g),_.push({fn:m}),{...g,G:E,ctx:$}}function m(g,{currentPlayer:_}){let{ctx:E}=g;const $=v(E);_?(E={...E,currentPlayer:_},$.turn.activePlayers&&(E=Bs(E,$.turn.activePlayers))):E=hv(g,$.turn);const R=E.turn+1;E={...E,turn:R,numMoves:0,_prevActivePlayers:[]};const j=$.turn.wrapped.onBegin({...g,ctx:E});return{...g,G:j,ctx:E,_undo:[],_redo:[]}}function S(g,{arg:_,next:E,phase:$}){const R=v({phase:$});let{ctx:j}=g;if(_&&_.next)if(_.next in l)j={...j,phase:_.next};else return W("invalid phase: "+_.next),g;else j={...j,phase:R.wrapped.next(g)||null};return g={...g,ctx:j},E.push({fn:d}),g}function C(g,{arg:_,currentPlayer:E,next:$}){let{G:R,ctx:j}=g;const re=v(j),{endPhase:Q,ctx:et}=pv(g,E,re.turn,_);return j=et,g={...g,G:R,ctx:j},Q?$.push({fn:ae,turn:j.turn,phase:j.phase}):$.push({fn:m,currentPlayer:j.currentPlayer}),g}function O(g,{arg:_,playerID:E}){if((typeof _=="string"||_===Fs.NULL)&&(_={stage:_}),typeof _!="object")return g;$s(_);let{ctx:$}=g,{activePlayers:R,_activePlayersMinMoves:j,_activePlayersMaxMoves:re,_activePlayersNumMoves:Q}=$;return _.stage!==void 0&&(R===null&&(R={}),R[E]=_.stage,Q[E]=0,_.minMoves&&(j===null&&(j={}),j[E]=_.minMoves),_.maxMoves&&(re===null&&(re={}),re[E]=_.maxMoves)),$={...$,activePlayers:R,_activePlayersMinMoves:j,_activePlayersMaxMoves:re,_activePlayersNumMoves:Q},{...g,ctx:$}}function N(g,{arg:_}){return{...g,ctx:Bs(g.ctx,_)}}function I(g){return y.endIf(g)}function H(g){return v(g.ctx).wrapped.endIf(g)}function z(g){const _=v(g.ctx),E=g.ctx.numMoves||0;return _.turn.maxMoves&&E>=_.turn.maxMoves?!0:_.turn.wrapped.endIf(g)}function G(g,{arg:_,phase:E}){g=ae(g,{}),_===void 0&&(_=!0),g={...g,ctx:{...g.ctx,gameover:_}};const $=y.onEnd(g);return{...g,G:$}}function ae(g,{arg:_,next:E,turn:$,automatic:R}){g=he(g,{turn:$,force:!0,automatic:!0});const{phase:j,turn:re}=g.ctx;if(E&&E.push({fn:S,arg:_,phase:j}),j===null)return g;const et=v(g.ctx).wrapped.onEnd(g),ce={...g.ctx,phase:null},ve=Kr("endPhase",_),{_stateID:Oe}=g,vt={action:ve,_stateID:Oe,turn:re,phase:j};R&&(vt.automatic=!0);const wn=[...g.deltalog||[],vt];return{...g,G:et,ctx:ce,deltalog:wn}}function he(g,{arg:_,next:E,turn:$,force:R,automatic:j,playerID:re}){if($!==g.ctx.turn)return g;const{currentPlayer:Q,numMoves:et,phase:ce,turn:ve}=g.ctx,Oe=v(g.ctx),vt=et||0;if(!R&&Oe.turn.minMoves&&vt<Oe.turn.minMoves)return`${Oe.turn.minMoves}`,g;const wn=Oe.turn.wrapped.onEnd(g);E&&E.push({fn:C,arg:_,currentPlayer:Q});let Kt={...g.ctx,activePlayers:null};if(_&&_.remove){re=re||Q;const Sn=Kt.playOrder.filter(am=>am!=re),lm=Kt.playOrderPos>Sn.length-1?0:Kt.playOrderPos;if(Kt={...Kt,playOrder:Sn,playOrderPos:lm},Sn.length===0)return E.push({fn:ae,turn:ve,phase:ce}),g}const vo=Kr("endTurn",_),{_stateID:Bu}=g,wr={action:vo,_stateID:Bu,turn:ve,phase:ce};j&&(wr.automatic=!0);const wo=[...g.deltalog||[],wr];return{...g,G:wn,ctx:Kt,deltalog:wo,_undo:[],_redo:[]}}function Tt(g,{arg:_,next:E,automatic:$,playerID:R}){R=R||g.ctx.currentPlayer;let{ctx:j,_stateID:re}=g,{activePlayers:Q,_activePlayersNumMoves:et,_activePlayersMinMoves:ce,_activePlayersMaxMoves:ve,phase:Oe,turn:vt}=j;const wn=Q!==null&&R in Q,Kt=v(j);if(!_&&wn){const Sn=Kt.turn.stages[Q[R]];Sn&&Sn.next&&(_=Sn.next)}if(E&&E.push({fn:O,arg:_,playerID:R}),!wn)return g;const vo=et[R]||0;if(ce&&ce[R]&&vo<ce[R])return`${ce[R]}`,g;Q={...Q},delete Q[R],ce&&(ce={...ce},delete ce[R]),ve&&(ve={...ve},delete ve[R]),j=dv({...j,activePlayers:Q,_activePlayersMinMoves:ce,_activePlayersMaxMoves:ve});const wr={action:Kr("endStage",_),_stateID:re,turn:vt,phase:Oe};$&&(wr.automatic=!0);const wo=[...g.deltalog||[],wr];return{...g,ctx:j,deltalog:wo}}function vn(g,_,E){const $=v(g),R=$.turn.stages,{activePlayers:j}=g;if(j&&j[E]!==void 0&&j[E]!==Fs.NULL&&R[j[E]]!==void 0&&R[j[E]].moves!==void 0){const Q=R[j[E]].moves;if(_ in Q)return Q[_]}else if($.moves){if(_ in $.moves)return $.moves[_]}else if(_ in e)return e[_];return null}function Ht(g,_){const{playerID:E,type:$}=_,{currentPlayer:R,activePlayers:j,_activePlayersMaxMoves:re}=g.ctx,Q=vn(g.ctx,$,E),et=!Q||typeof Q=="function"||Q.noLimit!==!0;let{numMoves:ce,_activePlayersNumMoves:ve}=g.ctx;et&&(E===R&&ce++,j&&ve[E]++),g={...g,ctx:{...g.ctx,numMoves:ce,_activePlayersNumMoves:ve}},re&&ve[E]>=re[E]&&(g=Tt(g,{playerID:E,automatic:!0}));const vt=v(g.ctx).turn.wrapped.onMove({...g,playerID:E});return g={...g,G:vt},P(g,[{fn:k}])}function Wt(g,_,E){return P(g,[{fn:Tt,arg:E,playerID:_}])}function T(g,_){return P(g,[{fn:Tt,playerID:_}])}function L(g,_,E){return P(g,[{fn:N,arg:E}])}function b(g,_,E){return P(g,[{fn:ae,phase:g.ctx.phase,turn:g.ctx.turn,arg:{next:E}}])}function K(g){return P(g,[{fn:ae,phase:g.ctx.phase,turn:g.ctx.turn}])}function D(g,_,E){return P(g,[{fn:he,turn:g.ctx.turn,phase:g.ctx.phase,arg:E}])}function F(g,_,E){return P(g,[{fn:he,turn:g.ctx.turn,phase:g.ctx.phase,force:!0,arg:E}])}function oe(g,_,E){return P(g,[{fn:G,turn:g.ctx.turn,phase:g.ctx.phase,arg:E}])}const Re={endStage:T,setStage:Wt,endTurn:D,pass:F,endPhase:K,setPhase:b,endGame:oe,setActivePlayers:L},ue=[];s.endTurn!==!1&&ue.push("endTurn"),s.pass!==!1&&ue.push("pass"),s.endPhase!==!1&&ue.push("endPhase"),s.setPhase!==!1&&ue.push("setPhase"),s.endGame!==!1&&ue.push("endGame"),s.setActivePlayers!==!1&&ue.push("setActivePlayers"),s.endStage!==!1&&ue.push("endStage"),s.setStage!==!1&&ue.push("setStage");function Yt(g,_){const{type:E,playerID:$,args:R}=_.payload;return typeof Re[E]!="function"?g:Re[E](g,$,...Array.isArray(R)?R:[R])}function xi(g,_,E){return _.activePlayers?E in _.activePlayers:_.currentPlayer===E}return{ctx:g=>({numPlayers:g,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:g})].map((_,E)=>E+""),playOrderPos:0,phase:c,activePlayers:null}),init:g=>P(g,[{fn:p}]),isPlayerActive:xi,eventHandlers:Re,eventNames:Object.keys(Re),enabledEventNames:ue,moveMap:a,moveNames:[...u.values()],processMove:Ht,processEvent:Yt,getMove:vn}}function Ev(e){return e.processMove!==void 0}function po(e){if(Ev(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=_v(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(pp(i)&&(i=i.move),i instanceof Function){const s=Xh(i,Pe.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...dr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return W(`invalid move object: ${r.type}`),n.G}}}function pp(e){return e instanceof Object&&e.move!==void 0}var ra;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(ra||(ra={}));var xe;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(xe||(xe={}));const Vi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,xv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function lf(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function Xo(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function Zo(e,t,n){const[r,i]=Zh(e,n);return i?[r,Te(t,xe.PluginActionInvalid,i)]:[r]}function mp(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function Te(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const yp=e=>t=>n=>{const r=t(n);switch(n.type){case fo:return r;default:{const[,i]=mp(e.getState());return typeof i<"u"?(e.dispatch(Jh()),{...r,transients:i}):r}}};function Cu({game:e,isClient:t}){return e=po(e),(n=null,r)=>{let[i]=mp(n);switch(r.type){case fo:return i;case ao:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return W("cannot call event after game end"),Te(i,xe.GameOver);if(Vi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return W(`disallowed event: ${r.payload.type}`),Te(i,xe.InactivePlayer);i=ea(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=Zo(s,i,{game:e}),o||(s=lf(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case pi:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return W(`disallowed move: ${r.payload.type}`),Te(i,xe.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return W("cannot make move after game end"),Te(i,xe.GameOver);if(Vi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return W(`disallowed move: ${r.payload.type}`),Te(i,xe.InactivePlayer);i=ea(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===hn)return W(`invalid move: ${r.payload.type} args: ${r.payload.args}`),Te(i,xe.InvalidMove);const a={...i,G:l};if(t&&cv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=Zo(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=Xo(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=Zo(i,s,{game:e}),u||(i=lf(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case mu:case gu:case yu:return r.state;case co:{if(i={...i,deltalog:[]},e.disableUndo)return W("Undo is not enabled"),Te(i,xe.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return W("No moves to undo"),Te(i,xe.ActionInvalid);const c=l[l.length-1],f=l[l.length-2];if(Vi(r)&&r.payload.playerID!==c.playerID)return W("Cannot undo other players' moves"),Te(i,xe.ActionInvalid);if(c.moveType){const h=e.flow.getMove(f.ctx,c.moveType,c.playerID);if(!xv(s,o,h))return W("Move cannot be undone"),Te(i,xe.ActionInvalid)}return i=Xo(i,r),{...i,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case uo:{if(i={...i,deltalog:[]},e.disableUndo)return W("Redo is not enabled"),Te(i,xe.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return W("No moves to redo"),Te(i,xe.ActionInvalid);const a=o[0];return Vi(r)&&r.payload.playerID!==a.playerID?(W("Cannot redo other players' moves"),Te(i,xe.ActionInvalid)):(i=Xo(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case Fh:return lv(i,r,{game:e});case vu:{const s=i,o=JSON.parse(JSON.stringify(s)),l=ku.applyPatch(o,r.patch);return l.some(u=>u!==null)?(W(`Patch ${JSON.stringify(r.patch)} apply failed`),Te(s,ra.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(d){typeof d!="function"&&(d=new Function(""+d));for(var m=new Array(arguments.length-1),S=0;S<m.length;S++)m[S]=arguments[S+1];var C={callback:d,args:m};return r[n]=C,o(n),n++}function a(d){delete r[d]}function u(d){var m=d.callback,S=d.args;switch(S.length){case 0:m();break;case 1:m(S[0]);break;case 2:m(S[0],S[1]);break;case 3:m(S[0],S[1],S[2]);break;default:m.apply(t,S);break}}function c(d){if(i)setTimeout(c,0,d);else{var m=r[d];if(m){i=!0;try{u(m)}finally{a(d),i=!1}}}}function f(){o=function(d){process.nextTick(function(){c(d)})}}function h(){if(e.postMessage&&!e.importScripts){var d=!0,m=e.onmessage;return e.onmessage=function(){d=!1},e.postMessage("","*"),e.onmessage=m,d}}function y(){var d="setImmediate$"+Math.random()+"$",m=function(S){S.source===e&&typeof S.data=="string"&&S.data.indexOf(d)===0&&c(+S.data.slice(d.length))};e.addEventListener?e.addEventListener("message",m,!1):e.attachEvent("onmessage",m),o=function(S){e.postMessage(d+S,"*")}}function v(){var d=new MessageChannel;d.port1.onmessage=function(m){var S=m.data;c(S)},o=function(m){d.port2.postMessage(m)}}function k(){var d=s.documentElement;o=function(m){var S=s.createElement("script");S.onreadystatechange=function(){c(m),S.onreadystatechange=null,d.removeChild(S),S=null},d.appendChild(S)}}function P(){o=function(d){setTimeout(c,0,d)}}var p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,{}.toString.call(e.process)==="[object process]"?f():h()?y():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?k():P(),p.setImmediate=l,p.clearImmediate=a})(typeof self>"u"?br:self);class Pv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return Uh(s.move,s.args,r);if("event"in s)return Kr(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=Bh(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Cv=25;class ls extends Pv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Cu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((h,y)=>{const v=a[y];return v.checker(i,s)?h+v.weight:h},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Cv&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),f=this.playout(c);this.backpropagate(c,f),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function yi(e){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(e)}function Nv(e,t){if(yi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ov(e){var t=Nv(e,"string");return yi(t)=="symbol"?t:t+""}function Tv(e,t,n){return(t=Ov(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?af(Object(n),!0).forEach(function(r){Tv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ue(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var cf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ff=function(){return Math.random().toString(36).substring(7).split("").join(".")},df={INIT:"@@redux/INIT"+ff(),REPLACE:"@@redux/REPLACE"+ff()};function Av(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Nu(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ue(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ue(1));return n(Nu)(e,t)}if(typeof e!="function")throw new Error(Ue(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(Ue(3));return s}function f(k){if(typeof k!="function")throw new Error(Ue(4));if(a)throw new Error(Ue(5));var P=!0;return u(),l.push(k),function(){if(P){if(a)throw new Error(Ue(6));P=!1,u();var d=l.indexOf(k);l.splice(d,1),o=null}}}function h(k){if(!Av(k))throw new Error(Ue(7));if(typeof k.type>"u")throw new Error(Ue(8));if(a)throw new Error(Ue(9));try{a=!0,s=i(s,k)}finally{a=!1}for(var P=o=l,p=0;p<P.length;p++){var d=P[p];d()}return k}function y(k){if(typeof k!="function")throw new Error(Ue(10));i=k,h({type:df.REPLACE})}function v(){var k,P=f;return k={subscribe:function(d){if(typeof d!="object"||d===null)throw new Error(Ue(11));function m(){d.next&&d.next(c())}m();var S=P(m);return{unsubscribe:S}}},k[cf]=function(){return this},k}return h({type:df.INIT}),r={dispatch:h,subscribe:f,getState:c,replaceReducer:y},r[cf]=v,r}function gp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function vp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ue(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=gp.apply(void 0,l)(i.dispatch),uf(uf({},i),{},{dispatch:s})}}}function wp({game:e,numPlayers:t,setupData:n}){e=po(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=av(i,{game:e}),i=ea(i,{game:e,playerID:void 0});const s=dr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=Zh(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let Ou=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Iv extends Ou{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Mv=e=>new Iv(e);class Dv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const jv=new Dv;function ia(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function Tu(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=tv[e](l,a,ia(r,n,s),i);n.dispatch(u)};return o}const Rv=Tu.bind(null,"makeMove"),Lv=Tu.bind(null,"gameEvent"),bv=Tu.bind(null,"plugin");class zv{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=po(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=jv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Cu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=wp({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(Kh(this.initialState))},this.undo=()=>{const y=qh(ia(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(y)},this.redo=()=>{const y=Qh(ia(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(y)},this.log=[];const h=vp(yp,()=>y=>v=>{const k=y(v);return this.notifySubscribers(),k},y=>v=>k=>{const P=y.getState(),p=v(k);return!("clientOnly"in k)&&k.type!==fo&&this.transport.sendAction(P,k),p},y=>v=>k=>{const P=v(k),p=y.getState();switch(k.type){case pi:case ao:case co:case uo:{const d=p.deltalog;this.log=[...this.log,...d];break}case mu:{this.log=[];break}case vu:case gu:{let d=-1;this.log.length>0&&(d=this.log[this.log.length-1]._stateID);let m=k.deltalog||[];m=m.filter(S=>S._stateID>d),this.log=[...this.log,...m];break}case yu:{this.initialState=k.initialState,this.log=k.log||[];break}}return P});a=a!==void 0?gp(h,a):h,this.store=Nu(this.reducer,this.initialState,a),i||(i=Mv),this.transport=i({transportDataCallback:y=>this.receiveTransportData(y),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=y=>{this.transport.sendChatMessage(this.matchID,{id:Lg(7),sender:this.playerID,payload:y})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=Hh(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=Yh(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=Wh(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:Gh(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Rv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Lv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=bv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function $v(e){return new zv(e)}const Sp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},kn=e=>Sp(e,"game name"),Or=e=>Sp(e,"match ID"),Tr=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class Bv extends Error{constructor(t,n){super(t),this.details=n}}class Fv{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new Bv(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){kn(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return kn(t),Or(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return kn(t),Tr(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return kn(t),Or(n),Tr(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){kn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){kn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return kn(t),Or(n),Tr(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var kp={exports:{}},Uv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Vv=Uv,Hv=Vv;function _p(){}function Ep(){}Ep.resetWarningCache=_p;var Wv=function(){function e(r,i,s,o,l,a){if(a!==Hv){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ep,resetWarningCache:_p};return n.PropTypes=n,n};kp.exports=Wv();var Yv=kp.exports;const kt=xf(Yv);var Vt={},Au={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Au.parse=Jv;Au.serialize=Xv;var Kv=decodeURIComponent,qv=encodeURIComponent,Qv=/; */,Hi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Jv(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(Qv),s=r.decode||Kv,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=Zv(c,s))}}return n}function Xv(e,t,n){var r=n||{},i=r.encode||qv;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Hi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Hi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Hi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Hi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function Zv(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var hf=Object.getOwnPropertySymbols,Gv=Object.prototype.hasOwnProperty,e0=Object.prototype.propertyIsEnumerable;function t0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var r0=n0()?Object.assign:function(e,t){for(var n,r=t0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)Gv.call(n,o)&&(r[o]=n[o]);if(hf){i=hf(n);for(var l=0;l<i.length;l++)e0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},i0={};Object.defineProperty(Vt,"__esModule",{value:!0});var s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Vt.load=Np;Vt.loadAll=Op;Vt.select=Tp;Vt.save=Ap;Vt.remove=Ip;Vt.setRawCookie=Iu;Vt.plugToRequest=Mp;var o0=Au,gr=Pp(o0),l0=r0,xp=Pp(l0);function Pp(e){return e&&e.__esModule?e:{default:e}}var mo=typeof document>"u"||typeof process<"u"&&i0&&!1,Ye={},pn=void 0;function Cp(){return pn&&!pn.headersSent}function Np(e,t){var n=mo?Ye:gr.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Op(e){var t=mo?Ye:gr.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Tp(e){var t=mo?Ye:gr.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,xp.default)({},n,i)},{}):t:{}}function Ap(e,t,n){Ye[e]=t,(typeof t>"u"?"undefined":s0(t))==="object"&&(Ye[e]=JSON.stringify(t)),mo||(document.cookie=gr.default.serialize(e,Ye[e],n)),Cp()&&pn.cookie&&pn.cookie(e,t,n)}function Ip(e,t){delete Ye[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,xp.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=gr.default.serialize(e,"",t)),Cp()&&pn.clearCookie&&pn.clearCookie(e,t)}function Iu(e){e?Ye=gr.default.parse(e):Ye={}}function Mp(e,t){return e.cookie?Ye=e.cookie:e.cookies?Ye=e.cookies:e.headers&&e.headers.cookie?Iu(e.headers.cookie):Ye={},pn=t,function(){pn=null,Ye={}}}var pf=Vt.default={setRawCookie:Iu,load:Np,loadAll:Op,select:Tp,save:Ap,remove:Ip,plugToRequest:Mp},Us;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Us||(Us={}));function _n(e){return e.type()===Us.SYNC}class a0{type(){return Us.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const u0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},c0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=u0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=wp({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},mf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),f0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class d0{constructor(t,n,r,i){this.game=po(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(_n(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=f0(t),l=r;let a;if(_n(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return W(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){W(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Cu({game:this.game}),c=vp(yp),f=Nu(u,a,c);if(o.type==co||o.type==uo){const p=a.ctx.activePlayers!==null,d=a.ctx.currentPlayer===i;if(!p&&!d||p&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){W(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){W(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const h=o.type==pi?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==pi&&!h){W(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(h&&pp(h)&&h.ignoreStaleStateID)){W(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const y=f.getState();f.dispatch(o),a=f.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,y,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...k}=a;let P;if(s&&(s.gameover===void 0||s.gameover===null)&&(P={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(P.gameover=a.ctx.gameover)),_n(this.storageAPI))this.storageAPI.setState(l,k,v),P&&this.storageAPI.setMetadata(l,P);else{const p=[this.storageAPI.setState(l,k,v)];P&&p.push(this.storageAPI.setMetadata(l,P)),await Promise.all(p)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=_n(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:f}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:f}))return{error:"unauthorized"};if(a===void 0){const v=c0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,f=v.metadata,this.subscribeCallback({state:a,matchID:t}),_n(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:f}):await this.storageAPI.createMatch(s,{initialState:u,metadata:f})}const h=f?mf(f):void 0,y={state:a,log:c,filteredMetadata:h,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,y]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(_n(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return W(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return W(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=mf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),_n(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const Wi=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:Gh(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),h0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=Go(o.deltalog,t),a=Wi(e,t,o),u=o._stateID,c=Wi(e,t,s),f=ku.createPatch(c,a);return{type:"patch",args:[r,i,u,f,l]}}case"update":{const[r,i]=n.args,s=Go(i.deltalog,t),o=Wi(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=Wi(e,t,i.state),o=Go(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function Go(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const Ot=Object.create(null);Ot.open="0";Ot.close="1";Ot.ping="2";Ot.pong="3";Ot.message="4";Ot.upgrade="5";Ot.noop="6";const as=Object.create(null);Object.keys(Ot).forEach(e=>{as[Ot[e]]=e});const sa={type:"error",data:"parser error"},Dp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",jp=typeof ArrayBuffer=="function",Rp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Mu=({type:e,data:t},n,r)=>Dp&&t instanceof Blob?n?r(t):yf(t,r):jp&&(t instanceof ArrayBuffer||Rp(t))?n?r(t):yf(new Blob([t]),r):r(Ot[e]+(t||"")),yf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function gf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let el;function p0(e,t){if(Dp&&e.data instanceof Blob)return e.data.arrayBuffer().then(gf).then(t);if(jp&&(e.data instanceof ArrayBuffer||Rp(e.data)))return t(gf(e.data));Mu(e,!1,n=>{el||(el=new TextEncoder),t(el.encode(n))})}const vf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<vf.length;e++)Lr[vf.charCodeAt(e)]=e;const m0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Lr[e.charCodeAt(r)],o=Lr[e.charCodeAt(r+1)],l=Lr[e.charCodeAt(r+2)],a=Lr[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},y0=typeof ArrayBuffer=="function",Du=(e,t)=>{if(typeof e!="string")return{type:"message",data:Lp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:g0(e.substring(1),t)}:as[n]?e.length>1?{type:as[n],data:e.substring(1)}:{type:as[n]}:sa},g0=(e,t)=>{if(y0){const n=m0(e);return Lp(n,t)}else return{base64:!0,data:e}},Lp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},bp="",v0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Mu(s,!1,l=>{r[o]=l,++i===n&&t(r.join(bp))})})},w0=(e,t)=>{const n=e.split(bp),r=[];for(let i=0;i<n.length;i++){const s=Du(n[i],t);if(r.push(s),s.type==="error")break}return r};function S0(){return new TransformStream({transform(e,t){p0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let tl;function Yi(e){return e.reduce((t,n)=>t+n.length,0)}function Ki(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function k0(e,t){tl||(tl=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Yi(n)<1)break;const a=Ki(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Yi(n)<2)break;const a=Ki(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Yi(n)<8)break;const a=Ki(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(sa);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Yi(n)<i)break;const a=Ki(n,i);l.enqueue(Du(s?a:tl.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(sa);break}}}})}const zp=4;function de(e){if(e)return _0(e)}function _0(e){for(var t in de.prototype)e[t]=de.prototype[t];return e}de.prototype.on=de.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};de.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};de.prototype.off=de.prototype.removeListener=de.prototype.removeAllListeners=de.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};de.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};de.prototype.emitReserved=de.prototype.emit;de.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};de.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yo=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),it=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),E0="arraybuffer";function $p(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const x0=it.setTimeout,P0=it.clearTimeout;function go(e,t){t.useNativeTimers?(e.setTimeoutFn=x0.bind(it),e.clearTimeoutFn=P0.bind(it)):(e.setTimeoutFn=it.setTimeout.bind(it),e.clearTimeoutFn=it.clearTimeout.bind(it))}const C0=1.33;function N0(e){return typeof e=="string"?O0(e):Math.ceil((e.byteLength||e.size)*C0)}function O0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Bp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function T0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function A0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class I0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class ju extends de{constructor(t){super(),this.writable=!1,go(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new I0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Du(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=T0(t);return n.length?"?"+n:""}}class M0 extends ju{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};w0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,v0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Bp()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Fp=!1;try{Fp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const D0=Fp;function j0(){}class R0 extends M0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Nt extends de{constructor(t,n,r){super(),this.createRequest=t,go(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=$p(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Nt.requestsCount++,Nt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=j0,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Nt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Nt.requestsCount=0;Nt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wf);else if(typeof addEventListener=="function"){const e="onpagehide"in it?"pagehide":"unload";addEventListener(e,wf,!1)}}function wf(){for(let e in Nt.requests)Nt.requests.hasOwnProperty(e)&&Nt.requests[e].abort()}const L0=function(){const e=Up({xdomain:!1});return e&&e.responseType!==null}();class b0 extends R0{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=L0&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Nt(Up,this.uri(),t)}}function Up(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||D0))return new XMLHttpRequest}catch{}if(!t)try{return new it[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class z0 extends ju{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Vp?{}:$p(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Mu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Bp()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const nl=it.WebSocket||it.MozWebSocket;class $0 extends z0{createSocket(t,n,r){return Vp?new nl(t,n,r):n?new nl(t,n):new nl(t)}doWrite(t,n){this.ws.send(n)}}class B0 extends ju{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=k0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=S0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&yo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const F0={websocket:$0,webtransport:B0,polling:b0},U0=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,V0=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function oa(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=U0.exec(e||""),s={},o=14;for(;o--;)s[V0[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=H0(s,s.path),s.queryKey=W0(s,s.query),s}function H0(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function W0(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const la=typeof addEventListener=="function"&&typeof removeEventListener=="function",us=[];la&&addEventListener("offline",()=>{us.forEach(e=>e())},!1);class cn extends de{constructor(t,n){if(super(),this.binaryType=E0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=oa(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=oa(n.host).host);go(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=A0(this.opts.query)),la&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},us.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=zp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&cn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",cn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=N0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,yo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(cn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),la&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=us.indexOf(this._offlineEventListener);r!==-1&&us.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}cn.protocol=zp;class Y0 extends cn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;cn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;cn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let K0=class extends Y0{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>F0[i]).filter(i=>!!i)),super(t,r)}};function q0(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=oa(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Q0=typeof ArrayBuffer=="function",J0=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Hp=Object.prototype.toString,X0=typeof Blob=="function"||typeof Blob<"u"&&Hp.call(Blob)==="[object BlobConstructor]",Z0=typeof File=="function"||typeof File<"u"&&Hp.call(File)==="[object FileConstructor]";function Ru(e){return Q0&&(e instanceof ArrayBuffer||J0(e))||X0&&e instanceof Blob||Z0&&e instanceof File}function cs(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(cs(e[n]))return!0;return!1}if(Ru(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return cs(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&cs(e[n]))return!0;return!1}function G0(e){const t=[],n=e.data,r=e;return r.data=aa(n,t),r.attachments=t.length,{packet:r,buffers:t}}function aa(e,t){if(!e)return e;if(Ru(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=aa(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=aa(e[r],t));return n}return e}function ew(e,t){return e.data=ua(e.data,t),delete e.attachments,e}function ua(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ua(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ua(e[n],t));return e}const Wp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tw=5;var B;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(B||(B={}));class nw{constructor(t){this.replacer=t}encode(t){return(t.type===B.EVENT||t.type===B.ACK)&&cs(t)?this.encodeAsBinary({type:t.type===B.EVENT?B.BINARY_EVENT:B.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===B.BINARY_EVENT||t.type===B.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=G0(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Lu extends de{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===B.BINARY_EVENT;r||n.type===B.BINARY_ACK?(n.type=r?B.EVENT:B.ACK,this.reconstructor=new rw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ru(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(B[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===B.BINARY_EVENT||r.type===B.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Lu.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case B.CONNECT:return Vs(n);case B.DISCONNECT:return n===void 0;case B.CONNECT_ERROR:return typeof n=="string"||Vs(n);case B.EVENT:case B.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Wp.indexOf(n[0])===-1);case B.ACK:case B.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class rw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=ew(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function iw(e){return typeof e=="string"}const sw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function ow(e){return e===void 0||sw(e)}function Vs(e){return Object.prototype.toString.call(e)==="[object Object]"}function lw(e,t){switch(e){case B.CONNECT:return t===void 0||Vs(t);case B.DISCONNECT:return t===void 0;case B.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Wp.indexOf(t[0])===-1);case B.ACK:return Array.isArray(t);case B.CONNECT_ERROR:return typeof t=="string"||Vs(t);default:return!1}}function aw(e){return iw(e.nsp)&&ow(e.id)&&lw(e.type,e.data)}const uw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Lu,Encoder:nw,get PacketType(){return B},isPacketValid:aw,protocol:tw},Symbol.toStringTag,{value:"Module"}));function dt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const cw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Yp extends de{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[dt(t,"open",this.onopen.bind(this)),dt(t,"packet",this.onpacket.bind(this)),dt(t,"error",this.onerror.bind(this)),dt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(cw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:B.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:B.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case B.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case B.EVENT:case B.BINARY_EVENT:this.onevent(t);break;case B.ACK:case B.BINARY_ACK:this.onack(t);break;case B.DISCONNECT:this.ondisconnect();break;case B.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:B.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:B.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function vr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}vr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};vr.prototype.reset=function(){this.attempts=0};vr.prototype.setMin=function(e){this.ms=e};vr.prototype.setMax=function(e){this.max=e};vr.prototype.setJitter=function(e){this.jitter=e};class ca extends de{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,go(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new vr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||uw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new K0(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=dt(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=dt(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(dt(t,"ping",this.onping.bind(this)),dt(t,"data",this.ondata.bind(this)),dt(t,"error",this.onerror.bind(this)),dt(t,"close",this.onclose.bind(this)),dt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){yo(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Yp(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ar={};function fs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=q0(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Ar[i]&&s in Ar[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new ca(r,t):(Ar[i]||(Ar[i]=new ca(r,t)),a=Ar[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(fs,{Manager:ca,Socket:Yp,io:fs,connect:fs});class Kp extends a0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class fw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class dw extends Kp{constructor(t="bgio"){super();const n=r=>new fw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function hw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class pw extends d0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const f in n){const h=n[f];o[f]=new h({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:f,...h})=>{const y=s[f];y!==void 0&&y(a(f,h))},a=h0(t),u={send:l,sendAll:f=>{for(const h in s)l({playerID:h,...f})}},c=i?new dw(r):new Kp;super(t,c,u),this.connect=(f,h)=>{s[f]=h},this.subscribe(({state:f,matchID:h})=>{if(!n)return;const y=hw(f,o);y!==null&&setTimeout(async()=>{const v=await o[y].play(f,y);await this.onUpdate(v.action,f._stateID,h,v.action.payload.playerID)},100)})}}class mw extends Ou{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const Sf=new Map;function qp({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=Sf.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new pw({game:s,bots:e,persist:t,storageKey:n}),Sf.set(i,{master:o,bots:e,persist:t,storageKey:n})),new mw({master:o,...r})}}const kf=fs;class yw extends Ou{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=kf(t+this.gameName,this.socketOpts)}else this.socket=kf("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function _f({server:e,socketOpts:t}={}){return n=>new yw({server:e,socketOpts:t,...n})}function Qp(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>M.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends M.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=$v({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return M.createElement(l);let f=null;return i&&(f=M.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),M.createElement("div",{className:"bgio-client"},f)}},t.propTypes={matchID:kt.string,playerID:kt.string,credentials:kt.string,debug:kt.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class gw{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new Fv({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function vw(e){return new gw(e)}class Jp extends M.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return M.createElement("div",null,M.createElement("p",{className:"phase-title"},"Choose a player name:"),M.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),M.createElement("span",{className:"buttons"},M.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),M.createElement("br",null),M.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,M.createElement("br",null)))}}Jp.defaultProps={playerName:""};class ww extends M.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>M.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>M.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>M.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>M.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?M.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),M.createElement("tr",{key:"line-"+t.matchID},M.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),M.createElement("td",{key:"cell-status-"+t.matchID},n),M.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),M.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Sw extends M.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>M.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>M.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return M.createElement("div",null,M.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),M.createElement("span",null,"Players:"),M.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),M.createElement("span",{className:"buttons"},M.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Le;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(Le||(Le={}));class Xp extends M.Component{constructor(t){super(t),this.state={phase:Le.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=vw({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:Le.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Le.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?_f({server:this.props.gameServer}):_f()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=ls;s=qp({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Le.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Le.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return M.createElement(ww,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=pf.load("lobbyState")||{};t.phase&&t.phase===Le.PLAY&&(t.phase=Le.LIST),t.phase&&t.phase!==Le.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||Le.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};pf.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):M.createElement("div",{id:"lobby-view",style:{padding:50}},M.createElement("div",{className:this._getPhaseVisibility(Le.ENTER)},M.createElement(Jp,{key:i,playerName:i,onEnter:this._enterLobby})),M.createElement("div",{className:this._getPhaseVisibility(Le.LIST)},M.createElement("p",null,"Welcome, ",i),M.createElement("div",{className:"phase-title",id:"match-creation"},M.createElement("span",null,"Create a match:"),M.createElement(Sw,{games:t,createMatch:this._createMatch})),M.createElement("p",{className:"phase-title"},"Join a match:"),M.createElement("div",{id:"instances"},M.createElement("table",null,M.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),M.createElement("span",{className:"error-msg"},r,M.createElement("br",null))),M.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),M.createElement("div",{className:this._getPhaseVisibility(Le.PLAY)},o&&M.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),M.createElement("div",{className:"buttons",id:"match-exit"},M.createElement("button",{onClick:this._exitMatch},"Exit match"))),M.createElement("div",{className:"buttons",id:"lobby-exit"},M.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}Xp.propTypes={gameComponents:kt.array.isRequired,lobbyServer:kt.string,gameServer:kt.string,debug:kt.bool,clientFactory:kt.func,refreshInterval:kt.number};Xp.defaultProps={debug:!1,clientFactory:Qp,refreshInterval:2e3};const qe=["Hearts","Diamonds","Clubs","Spades"],qr=40,Zp=5,kw=["","","","","",""],_w={Hearts:"",Diamonds:"",Clubs:"",Spades:""},Gp={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function Ew(e,t){const n={};if(e.deckType===36)for(const r of qe)n[r]=[{suit:r,value:1}];else for(const r of qe){const i=Array.from({length:Zp},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function em(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of qe){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),f=t[o]||[];r[o]=[...f,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function qi(e,t){return t.deckType!==36||e<2||e>5}function tm(e,t,n,r,i){const s=[];for(const a of qe)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])qi(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>qi(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function nm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function rm(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function xw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function Pw(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Cw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function fa(e){return e.players.every(t=>t.hand.length===1)}function im(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=qr&&!e.claimedJobs.includes(r)&&Nw(e,r,n)}function Nw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Ow(e){if(!Cw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function da(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=qr||(t.miceVariant?Tw(e,n,r,t):t.deckType===36?Aw(e,n,r,t):Iw(e,n,r,t))}function bu(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Hs(e,`${r.suit}-${r.value}`),!0;return!1}function zu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function $u(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Hs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function gi(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function Tw(e,t,n,r){if(bu(e,n,r))return;const i=zu(n,e.trump,r),s=$u(n,e.trump,r),o=sm(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),Ws(e,o[0]),s&&o.length>1&&(Ws(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${gi(o[1][1])}`)))}function Aw(e,t,n,r){if(bu(e,n,r))return;const i=zu(n,e.trump,r),s=$u(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=sm(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(f=>f.suit===t);for(const f of c)l.some(([y,v])=>y===u&&v.suit===f.suit&&v.value===f.value)||l.push([u,f])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((f,h)=>h.value-f.value),Ws(e,[u,c[0]]),s&&c.length>1&&(Ws(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${gi(c[1])}`)))}function Iw(e,t,n,r){if(bu(e,n,r))return;const i=zu(n,e.trump,r),s=$u(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(h=>h.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(h=>h.suit!==t);const u=(o.plot.revealed||[]).filter(h=>h.suit===t).sort((h,y)=>y.value-h.value);if(u.length===0)continue;const c=u[0],f=o.plot.revealed.findIndex(h=>h.suit===c.suit&&h.value===c.value);if(o.plot.revealed.splice(f,1),Hs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${gi(c)}`),s&&u.length>1){const h=u[1],y=o.plot.revealed.findIndex(v=>v.suit===h.suit&&v.value===h.value);o.plot.revealed.splice(y,1),Hs(e,`${h.suit}-${h.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${gi(h)}`)}}}function sm(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const f of c.revealed||[])f.suit===t&&a.push({card:f,stack:c,location:"revealed"});for(const f of c.hidden||[])f.suit===t&&a.push({card:f,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const f=o.plot.hidden.findIndex(h=>h.suit===c.suit&&h.value===c.value);o.plot.hidden.splice(f,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:f,location:h}of a){const y=h==="hidden"?f.hidden:f.revealed,v=y.findIndex(k=>k.suit===c.suit&&k.value===c.value);v!==-1&&(y.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((h,y)=>y.value>h.value?y:h);if(l.some(h=>h.suit===c.suit&&h.value===c.value)){const h=o.plot.hidden.findIndex(y=>y.suit===c.suit&&y.value===c.value);o.plot.hidden.splice(h,1),o.plot.revealed.push(c),s.push([o,c])}else{const h=a.find(y=>y.card.suit===c.suit&&y.card.value===c.value);if(h){const{stack:y,location:v}=h,k=v==="hidden"?y.hidden:y.revealed,P=k.findIndex(p=>p.suit===c.suit&&p.value===c.value);P!==-1&&(k.splice(P,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function Ws(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Hs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${gi(n)}`)}function Mw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function Dw(e,t){const n=Mw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function jw(e,t){const n=Dw(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function ha(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of qe)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>Zp)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of qe)e.workHours[o]=0;const{jobs:r,isFamine:i}=em(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of qe)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.workersDeck=tm(e.players,e.jobBuckets,e.exiled,t,n),nm(e.players,e.workersDeck,e.isFamine),!1}function om(e,t){const n=qe.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function Ef(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function Rw({ctx:e,random:t},n){const r={...Gp,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...kw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Ef(0,!0,""));else{const f=Math.floor(t.Number()*s.length),h=s.splice(f,1)[0];o.push(Ef(c,!1,h))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:Ew(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1};for(const c of qe)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=em(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=tm(l.players,l.jobBuckets,l.exiled,r,t),nm(l.players,l.workersDeck,l.isFamine),l}function Lw({G:e,random:t},n){n&&qe.includes(n)?e.trump=n:om(e,t)}function bw({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!rm(e,i,r))return hn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function zw({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function $w({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return hn;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return hn;if(im(e,e.pendingAssignments,e.variants),e.pendingAssignments={},fa(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),da(e,e.variants),ha(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function Bw({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return hn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return hn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function Fw({G:e,playerID:t,events:n}){const r=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[r]=!0,n.endStage()}const Uw={name:"kolkhoz",setup:Rw,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:Lw},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&om(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:bw},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=xw(e);if(n!==null){Pw(e,n);const r=Ow(e.lastTrick);if(r?(im(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&fa(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),da(e,e.variants),ha(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=fa(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:zw,submitAssignments:$w},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),da(e,e.variants),ha(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{turn:{activePlayers:{all:"swapping"},stages:{swapping:{moves:{swapCard:Bw,confirmSwap:Fw}}}},onBegin:({G:e})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(t=>t.hand.length),"plots:",e.players.map(t=>t.plot.hidden.length)),e.swapConfirmed={}},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return jw(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{var o;const r=[],i=parseInt(n,10),s=e.players[i];if(t.phase==="planning")for(const l of qe)r.push({move:"setTrump",args:[l]});else if(t.phase==="trick")for(let l=0;l<s.hand.length;l++)rm(e,i,l)&&r.push({move:"playCard",args:[l]});else if(t.phase==="assignment"&&i===e.lastWinner){const l=e.pendingAssignments||{};if(Object.keys(l).length===e.lastTrick.length)r.push({move:"submitAssignments",args:[]});else{const u=[...new Set(e.lastTrick.map(([,c])=>c.suit))];for(const[,c]of e.lastTrick){const f=`${c.suit}-${c.value}`;if(!l[f]){for(const h of u)r.push({move:"assignCard",args:[f,h]});break}}}}else(t.phase==="swap"||((o=t.activePlayers)==null?void 0:o[n])==="swapping")&&r.push({move:"confirmSwap",args:[]});return r}}};function Vw(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function Hw(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function He({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,f=s?"assets/cards/back.svg":Vw(e);return t!==0||n!==0?w.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[w.jsx("image",{href:f,width:r,height:c,x:-r/2,y:-c/2}),l&&w.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#4CAF50",strokeWidth:"3",rx:"8"})]}):w.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:w.jsx("img",{src:f,alt:s?"Card back":`${Hw(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}function Ww({cards:e,onPlayCard:t,canPlay:n,leadSuit:r,trump:i,validIndices:s}){if(!e||e.length===0)return w.jsx("div",{className:"hand empty",children:"No cards in hand"});const o=Math.min(8,60/e.length),a=-(o*(e.length-1))/2;return w.jsx("div",{className:"hand",children:e.map((u,c)=>{const f=!s||s.includes(c),h=a+c*o,y=Math.abs(h)*.5;return w.jsx("div",{className:`hand-card ${f&&n?"playable":""} ${f?"":"invalid"}`,style:{transform:`rotate(${h}deg) translateY(${y}px)`,zIndex:c},onClick:()=>{n&&f&&t(c)},children:w.jsx(He,{card:u,width:100,highlight:f&&n,dimmed:!f&&n})},`${u.suit}-${u.value}-${c}`)})})}function Yw({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450}){const o=l=>{const a=[{x:0,y:100},{x:-100,y:0},{x:0,y:-100},{x:100,y:0}];return a[l]||a[0]};return w.jsxs("g",{className:"trick-area",children:[w.jsx("circle",{cx:r,cy:i,r:180,fill:"#2d5016",stroke:"#8B4513",strokeWidth:"8"}),w.jsx("circle",{cx:r,cy:i,r:160,fill:"none",stroke:"#3d6b1e",strokeWidth:"2"}),e.length>0&&w.jsxs("text",{x:r,y:i-100-40,textAnchor:"middle",fill:"#FFD700",fontSize:"14",children:["Lead: ",e[0][1].suit]}),e.map(([l,a],u)=>{const c=o(l);return w.jsx(He,{card:a,x:r+c.x,y:i+c.y,width:80,rotation:l*90},`${a.suit}-${a.value}`)}),Array.from({length:t}).map((l,a)=>{if(e.some(([f])=>f===a))return null;const c=o(a);return w.jsx("rect",{x:r+c.x-40,y:i+c.y-56,width:80,height:112,fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"2",strokeDasharray:"5,5",rx:"8"},`slot-${a}`)})]})}function Kw({revealedJobs:e,workHours:t,jobBuckets:n,claimedJobs:r,trump:i,phase:s,pendingAssignments:o,onAssign:l,lastTrick:a}){const v=P=>P==="Hearts"||P==="Diamonds"?"#c41e3a":"#1a1a2e",k=P=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[P];return w.jsx("g",{className:"job-piles-area",children:qe.map((P,p)=>{const d=80+p*130,m=150,S=(t==null?void 0:t[P])||0,C=r==null?void 0:r.includes(P),O=P===i,N=(n==null?void 0:n[P])||[],I=Math.min(80,S/qr*80),H=e==null?void 0:e[P],z=Array.isArray(H)?H:H?[H]:[],G=100;return w.jsxs("g",{className:`job-pile ${C?"claimed":""}`,children:[w.jsx("rect",{x:d-55,y:m-30,width:110,height:G,fill:O?"rgba(255,215,0,0.15)":"rgba(0,0,0,0.4)",stroke:O?"#FFD700":"#555",strokeWidth:O?2:1,rx:"8"}),O&&w.jsx("text",{x:d,y:m-15,textAnchor:"middle",fill:"#FFD700",fontSize:"9",fontWeight:"bold",children:"TRUMP"}),w.jsx("text",{x:d,y:m+8,textAnchor:"middle",fill:v(P),fontSize:"20",children:k(P)}),w.jsx("text",{x:d,y:m+25,textAnchor:"middle",fill:"#bbb",fontSize:"10",children:_w[P]}),w.jsx("rect",{x:d-40,y:m+35,width:80,height:8,fill:"#333",rx:"4"}),w.jsx("rect",{x:d-40,y:m+35,width:I,height:8,fill:C||S>=qr?"#4CAF50":"#2196F3",rx:"4"}),w.jsxs("text",{x:d,y:m+42,textAnchor:"middle",fill:"white",fontSize:"7",children:[S,"/",qr]}),C&&w.jsx("text",{x:d,y:m+60,textAnchor:"middle",fill:"#4CAF50",fontSize:"9",fontWeight:"bold",children:"COMPLETE"}),z.map((ae,he)=>w.jsx(He,{card:ae,x:d-45/2+he*8,y:m+G-25,width:45},`reward-${he}`)),N.map((ae,he)=>w.jsx(He,{card:ae,x:d-45/2,y:m+G+50+he*20,width:45},`assigned-${he}`)),N.length>0&&w.jsxs("text",{x:d,y:m+G+40,textAnchor:"middle",fill:"#888",fontSize:"9",children:[N.length," assigned"]})]},P)})})}function qw({player:e,position:t,isActive:n,isBrigadeLeader:r}){var h,y,v,k;const{x:i,y:s}=t,o=((h=e.hand)==null?void 0:h.length)||0,l=((y=e.plot)==null?void 0:y.revealed)||[],a=((k=(v=e.plot)==null?void 0:v.hidden)==null?void 0:k.length)||0,u=35,c=10,f=l.length>0?l.length*(u+c)-c:0;return w.jsxs("g",{className:`player-area ${n?"active":""}`,children:[w.jsx("rect",{x:i-100,y:s-70,width:200,height:140,fill:n?"rgba(76, 175, 80, 0.2)":"rgba(0,0,0,0.3)",stroke:n?"#4CAF50":"#444",strokeWidth:n?2:1,rx:"10"}),w.jsxs("text",{x:i,y:s-52,textAnchor:"middle",fill:n?"#4CAF50":"#fff",fontSize:"14",fontWeight:n?"bold":"normal",children:[e.name,r&&" "]}),e.medals>0&&w.jsxs("text",{x:i+70,y:s-52,fill:"#FFD700",fontSize:"12",children:[" ",e.medals]}),w.jsxs("g",{transform:`translate(${i-40}, ${s-35})`,children:[Array.from({length:Math.min(5,o)}).map((P,p)=>w.jsx(He,{card:{},faceDown:!0,x:p*15+u/2,y:u*.7,width:u},`hand-${p}`)),w.jsxs("text",{x:40,y:u*1.4+18,textAnchor:"middle",fill:"#888",fontSize:"10",children:["Hand: ",o]})]}),l.length>0&&w.jsx("g",{transform:`translate(${i-f/2}, ${s+25})`,children:l.map((P,p)=>w.jsx(He,{card:P,x:p*(u+c)+u/2,y:u*.7,width:u},`revealed-${p}`))}),a>0&&w.jsxs("text",{x:i,y:s+62,textAnchor:"middle",fill:"#888",fontSize:"10",children:["+",a," hidden"]})]})}function Qw({exiled:e,currentYear:t}){const l=u=>{const[c,f]=u.split("-");return{suit:c,value:parseInt(f,10)}},a=[1,2,3,4,5];return w.jsxs("g",{className:"gulag-area",children:[w.jsx("text",{x:140,y:0,textAnchor:"middle",fill:"#888",fontSize:"12",fontWeight:"bold",children:"GULAG"}),a.map((u,c)=>{const f=0+c*70,h=20,y=e[u]||[],v=u<t,k=u===t;return w.jsxs("g",{className:"gulag-year",children:[w.jsx("rect",{x:f,y:h,width:60,height:25,fill:k?"rgba(196,30,58,0.3)":"rgba(0,0,0,0.3)",stroke:k?"#c41e3a":"#444",strokeWidth:1,rx:"4"}),w.jsxs("text",{x:f+30,y:h+17,textAnchor:"middle",fill:v?"#666":k?"#c41e3a":"#888",fontSize:"11",children:["Year ",u]}),y.map((P,p)=>{const d=l(P);return w.jsx(He,{card:d,x:f+10,y:h+35+p*18,width:40},p)}),y.length===0&&v&&w.jsx("text",{x:f+30,y:h+55,textAnchor:"middle",fill:"#444",fontSize:"9",children:"-"})]},u)})]})}function Jw({year:e,trump:t,phase:n,currentPlayer:r,players:i,isMyTurn:s,exiled:o}){var h;const u=y=>({Hearts:"",Diamonds:"",Clubs:"",Spades:""})[y]||y,c=y=>y==="Hearts"||y==="Diamonds"?"#c41e3a":"#1a1a2e",f=y=>({planning:"Select Trump",trick:"Trick Phase",assignment:"Assign Cards",plotSelection:"Select Plot Card",requisition:"Requisition",swap:"Swap Cards"})[y]||y;return w.jsxs("g",{className:"right-sidebar",children:[w.jsx("rect",{x:1540,y:120,width:360,height:180,fill:"rgba(0,0,0,0.5)",stroke:"#444",strokeWidth:1,rx:"10"}),w.jsx("text",{x:1560,y:150,fill:"#888",fontSize:"11",children:"Year"}),w.jsxs("text",{x:1560,y:170,fill:"#fff",fontSize:"18",fontWeight:"bold",children:[e,"/5"]}),w.jsx("text",{x:1640,y:150,fill:"#888",fontSize:"11",children:"Trump"}),t?w.jsxs("text",{x:1640,y:170,fill:c(t),fontSize:"18",fontWeight:"bold",children:[u(t)," ",t]}):w.jsx("text",{x:1640,y:170,fill:"#666",fontSize:"14",children:"Not selected"}),w.jsx("text",{x:1560,y:205,fill:"#888",fontSize:"11",children:"Phase"}),w.jsx("text",{x:1560,y:225,fill:"#fff",fontSize:"14",children:f(n)}),w.jsx("text",{x:1560,y:255,fill:"#888",fontSize:"11",children:"Turn"}),s?w.jsx("text",{x:1560,y:275,fill:"#4CAF50",fontSize:"14",fontWeight:"bold",children:"Your Turn!"}):w.jsxs("text",{x:1560,y:275,fill:"#888",fontSize:"12",children:["Waiting for ",(h=i[parseInt(r,10)])==null?void 0:h.name,"..."]}),w.jsx("g",{transform:"translate(1545, 320)",children:w.jsx(Qw,{exiled:o,currentYear:e})})]})}function Xw({G:e,ctx:t,moves:n,playerID:r}){var z,G,ae,he,Tt,vn,Ht,Wt,T,L,b,K;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=tt.useState(null),[u,c]=tt.useState(null),[f,h]=tt.useState(null),[y,v]=tt.useState(!1),k=tt.useRef(e.year);tt.useEffect(()=>{e.year!==k.current&&(v(!1),k.current=e.year)},[e.year]);const P=D=>{o==="trick"&&s&&n.playCard(D)},p=D=>{o==="planning"&&n.setTrump(D)},d=(D,F)=>{n.assignCard(D,F)},m=()=>{n.submitAssignments()},S=()=>{l!==null&&u!==null&&f!==null&&(n.swapCard(u,l,f),a(null),c(null),h(null))},C=(D,F)=>{u===D&&f===F?(c(null),h(null)):(c(D),h(F))},O=()=>{v(!0),n.confirmSwap()},N=1e3,I=450,H=(D,F)=>{const oe=[{x:N,y:750},{x:N-280,y:450},{x:N,y:150},{x:N+280,y:450}];return oe[D]||oe[0]};if(t.gameover){const{winner:D,scores:F}=t.gameover;return w.jsxs("div",{className:"game-over",children:[w.jsx("h1",{children:"Game Over!"}),w.jsxs("h2",{children:["Winner: ",e.players[D].name]}),w.jsx("div",{className:"final-scores",children:e.players.map((oe,Re)=>w.jsxs("div",{className:Re===D?"winner":"",children:[oe.name,": ",F[Re]," points"]},Re))}),w.jsx("p",{children:"(Lowest score wins)"})]})}return w.jsxs("div",{className:"game-board",children:[o==="planning"&&!e.trump&&w.jsxs("div",{className:"trump-selection",children:[w.jsx("h3",{children:"Select Trump Suit"}),w.jsx("div",{className:"suit-buttons",children:qe.map(D=>w.jsxs("button",{onClick:()=>p(D),className:`suit-btn ${D.toLowerCase()}`,children:[Zw(D)," ",D]},D))})]}),w.jsxs("svg",{viewBox:"0 0 1920 1080",className:"board-svg",children:[w.jsx(Kw,{revealedJobs:e.revealedJobs,workHours:e.workHours,jobBuckets:e.jobBuckets,claimedJobs:e.claimedJobs,trump:e.trump,phase:o,pendingAssignments:e.pendingAssignments,onAssign:d,lastTrick:e.lastTrick}),w.jsx(Yw,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:N,centerY:I}),e.players.map((D,F)=>{if(F===i)return null;const oe=H(F,e.numPlayers);return w.jsx(qw,{player:D,position:oe,isActive:parseInt(t.currentPlayer,10)===F,isBrigadeLeader:D.brigadeLeader},F)}),w.jsx(Jw,{year:e.year,trump:e.trump,phase:o,currentPlayer:t.currentPlayer,players:e.players,isMyTurn:s,exiled:e.exiled})]}),w.jsx(Ww,{cards:((z=e.players[i])==null?void 0:z.hand)||[],onPlayCard:P,canPlay:o==="trick"&&s,leadSuit:(ae=(G=e.currentTrick[0])==null?void 0:G[1])==null?void 0:ae.suit,trump:e.trump,validIndices:Gw(e,i,o)}),o==="assignment"&&e.lastWinner===i&&(()=>{const D=[...new Set(e.lastTrick.map(([,F])=>F.suit))];return w.jsxs("div",{className:"assignment-ui",children:[w.jsx("h3",{children:"Assign cards to jobs"}),w.jsx("p",{children:"Assign each card to a job from this trick"}),w.jsx("div",{className:"assignment-cards",children:e.lastTrick.map(([F,oe],Re)=>{var xi;const ue=`${oe.suit}-${oe.value}`,Yt=(xi=e.pendingAssignments)==null?void 0:xi[ue];return w.jsxs("div",{className:"assignment-card",children:[w.jsx(He,{card:oe,width:80}),w.jsx("select",{value:Yt||oe.suit,onChange:g=>d(ue,g.target.value),children:D.map(g=>w.jsx("option",{value:g,children:g},g))})]},Re)})}),w.jsx("button",{onClick:m,disabled:Object.keys(e.pendingAssignments||{}).length!==e.lastTrick.length,children:"Submit Assignments"})]})})(),o==="swap"&&!((he=e.swapConfirmed)!=null&&he[i])&&!y&&w.jsxs("div",{className:"swap-ui",children:[w.jsxs("h3",{children:["Swap Cards (Year ",e.year,")"]}),w.jsx("p",{children:"Select a card from your hand and one from your plot to swap, or skip"}),w.jsxs("div",{className:"swap-section",children:[w.jsx("h4",{children:"Your Hand"}),w.jsx("div",{className:"swap-cards",children:(Tt=e.players[i])==null?void 0:Tt.hand.map((D,F)=>w.jsx("div",{className:`swap-card ${l===F?"selected":""}`,onClick:()=>a(l===F?null:F),children:w.jsx(He,{card:D,width:80})},`hand-${F}`))})]}),((vn=e.players[i])==null?void 0:vn.plot.revealed.length)>0&&w.jsxs("div",{className:"swap-section",children:[w.jsx("h4",{children:"Your Revealed Cards (Rewards)"}),w.jsx("div",{className:"swap-cards",children:(Ht=e.players[i])==null?void 0:Ht.plot.revealed.map((D,F)=>w.jsx("div",{className:`swap-card ${u===F&&f==="revealed"?"selected":""}`,onClick:()=>C(F,"revealed"),children:w.jsx(He,{card:D,width:80})},`revealed-${F}`))})]}),((Wt=e.players[i])==null?void 0:Wt.plot.hidden.length)>0&&w.jsxs("div",{className:"swap-section",children:[w.jsx("h4",{children:"Your Hidden Plot"}),w.jsx("div",{className:"swap-cards",children:(T=e.players[i])==null?void 0:T.plot.hidden.map((D,F)=>w.jsx("div",{className:`swap-card ${u===F&&f==="hidden"?"selected":""}`,onClick:()=>C(F,"hidden"),children:w.jsx(He,{card:D,width:80})},`hidden-${F}`))})]}),w.jsxs("div",{className:"swap-buttons",children:[w.jsx("button",{onClick:S,disabled:l===null||u===null||f===null,children:"Swap Selected Cards"}),w.jsx("button",{onClick:O,children:"Done Swapping"})]})]}),o==="swap"&&(((L=e.swapConfirmed)==null?void 0:L[i])||y)&&w.jsx("div",{className:"swap-ui",children:w.jsx("h3",{children:"Waiting for other players..."})}),w.jsxs("div",{className:"player-plot",children:[w.jsx("h4",{children:"Your Plot"}),w.jsxs("div",{className:"plot-cards",children:[(b=e.players[i])==null?void 0:b.plot.revealed.map((D,F)=>w.jsx(He,{card:D,width:60},`r-${F}`)),(K=e.players[i])==null?void 0:K.plot.hidden.map((D,F)=>w.jsx(He,{card:D,width:60,faceDown:!0},`h-${F}`))]})]})]})}function Zw(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function Gw(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function e1(){const[e,t]=tt.useState(!1),[n,r]=tt.useState({...Gp}),i=tt.useMemo(()=>e?Qp({game:Uw,board:Xw,numPlayers:4,multiplayer:qp({bots:{1:ls,2:ls,3:ls}}),debug:!1}):null,[e]);return e?w.jsx(i,{playerID:"0",setupData:{variants:n}}):w.jsxs("div",{className:"lobby",children:[w.jsx("h1",{children:""}),w.jsx("h2",{children:""}),w.jsxs("div",{className:"variant-options",children:[w.jsx("h3",{children:"Deck Type"}),w.jsxs("label",{children:[w.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Classic)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (With job rewards)"]}),w.jsx("h3",{children:"Variant Rules"}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:s=>r({...n,nomenclature:s.target.checked})}),w.jsx("strong",{children:""})," - Face card special effects (Drunkard Jack, etc.)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:s=>r({...n,allowSwap:s.target.checked})}),w.jsx("strong",{children:""})," - Swap hand/plot cards at year start"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:s=>r({...n,northernStyle:s.target.checked})}),w.jsx("strong",{children:" "})," - Northern style (no job rewards, all vulnerable)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:s=>r({...n,miceVariant:s.target.checked})}),w.jsx("strong",{children:""})," - Mice variant (all reveal during requisition)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:s=>r({...n,ordenNachalniku:s.target.checked})}),w.jsx("strong",{children:" "})," - Stack cards when jobs complete (36-card only)"]}),w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:s=>r({...n,medalsCount:s.target.checked})}),w.jsx("strong",{children:""})," - Trick wins contribute to final score"]}),n.deckType===52&&w.jsxs("label",{children:[w.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:s=>r({...n,accumulateJobs:s.target.checked})}),w.jsx("strong",{children:""})," - Unclaimed job rewards carry over to next year"]})]}),w.jsx("button",{onClick:()=>t(!0),children:"Start Game"})]})}const t1=bh(document.getElementById("root"));t1.render(w.jsx(e1,{}));
