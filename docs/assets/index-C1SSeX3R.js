(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ff={exports:{}},to={},Uf={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pi=Symbol.for("react.element"),Tm=Symbol.for("react.portal"),jm=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),Mm=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),Rm=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),bm=Symbol.for("react.memo"),$m=Symbol.for("react.lazy"),Gu=Symbol.iterator;function zm(e){return e===null||typeof e!="object"?null:(e=Gu&&e[Gu]||e["@@iterator"],typeof e=="function"?e:null)}var Hf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vf=Object.assign,Wf={};function Sr(e,t,n){this.props=e,this.context=t,this.refs=Wf,this.updater=n||Hf}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yf(){}Yf.prototype=Sr.prototype;function _a(e,t,n){this.props=e,this.context=t,this.refs=Wf,this.updater=n||Hf}var Ca=_a.prototype=new Yf;Ca.constructor=_a;Vf(Ca,Sr.prototype);Ca.isPureReactComponent=!0;var ec=Array.isArray,Kf=Object.prototype.hasOwnProperty,Pa={current:null},Qf={key:!0,ref:!0,__self:!0,__source:!0};function qf(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Kf.call(t,r)&&!Qf.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Pi,type:e,key:s,ref:o,props:i,_owner:Pa.current}}function Bm(e,t){return{$$typeof:Pi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Na(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pi}function Fm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tc=/\/+/g;function jo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fm(""+e.key):t.toString(36)}function is(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Pi:case Tm:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+jo(o,0):r,ec(i)?(n="",e!=null&&(n=e.replace(tc,"$&/")+"/"),is(i,t,n,"",function(u){return u})):i!=null&&(Na(i)&&(i=Bm(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(tc,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",ec(e))for(var l=0;l<e.length;l++){s=e[l];var a=r+jo(s,l);o+=is(s,t,n,a,i)}else if(a=zm(e),typeof a=="function")for(e=a.call(e),l=0;!(s=e.next()).done;)s=s.value,a=r+jo(s,l++),o+=is(s,t,n,a,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Di(e,t,n){if(e==null)return e;var r=[],i=0;return is(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Um(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},ss={transition:null},Hm={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:ss,ReactCurrentOwner:Pa};function Jf(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Di,forEach:function(e,t,n){Di(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Di(e,function(){t++}),t},toArray:function(e){return Di(e,function(t){return t})||[]},only:function(e){if(!Na(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=Sr;G.Fragment=jm;G.Profiler=Im;G.PureComponent=_a;G.StrictMode=Am;G.Suspense=Lm;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hm;G.act=Jf;G.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vf({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Pa.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(a in t)Kf.call(t,a)&&!Qf.hasOwnProperty(a)&&(r[a]=t[a]===void 0&&l!==void 0?l[a]:t[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Pi,type:e.type,key:i,ref:s,props:r,_owner:o}};G.createContext=function(e){return e={$$typeof:Dm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mm,_context:e},e.Consumer=e};G.createElement=qf;G.createFactory=function(e){var t=qf.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:Rm,render:e}};G.isValidElement=Na;G.lazy=function(e){return{$$typeof:$m,_payload:{_status:-1,_result:e},_init:Um}};G.memo=function(e,t){return{$$typeof:bm,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=ss.transition;ss.transition={};try{e()}finally{ss.transition=t}};G.unstable_act=Jf;G.useCallback=function(e,t){return Ve.current.useCallback(e,t)};G.useContext=function(e){return Ve.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};G.useEffect=function(e,t){return Ve.current.useEffect(e,t)};G.useId=function(){return Ve.current.useId()};G.useImperativeHandle=function(e,t,n){return Ve.current.useImperativeHandle(e,t,n)};G.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Ve.current.useMemo(e,t)};G.useReducer=function(e,t,n){return Ve.current.useReducer(e,t,n)};G.useRef=function(e){return Ve.current.useRef(e)};G.useState=function(e){return Ve.current.useState(e)};G.useSyncExternalStore=function(e,t,n){return Ve.current.useSyncExternalStore(e,t,n)};G.useTransition=function(){return Ve.current.useTransition()};G.version="18.3.1";Uf.exports=G;var Q=Uf.exports;const H=Bf(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm=Q,Wm=Symbol.for("react.element"),Ym=Symbol.for("react.fragment"),Km=Object.prototype.hasOwnProperty,Qm=Vm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qm={key:!0,ref:!0,__self:!0,__source:!0};function Xf(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Km.call(t,r)&&!qm.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Wm,type:e,key:s,ref:o,props:i,_owner:Qm.current}}to.Fragment=Ym;to.jsx=Xf;to.jsxs=Xf;Ff.exports=to;var p=Ff.exports,Zf={exports:{}},at={},Gf={exports:{}},ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,F){var B=D.length;D.push(F);e:for(;0<B;){var M=B-1>>>1,U=D[M];if(0<i(U,F))D[M]=F,D[B]=U,B=M;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var F=D[0],B=D.pop();if(B!==F){D[0]=B;e:for(var M=0,U=D.length,V=U>>>1;M<V;){var W=2*(M+1)-1,te=D[W],q=W+1,se=D[q];if(0>i(te,B))q<U&&0>i(se,te)?(D[M]=se,D[q]=B,M=q):(D[M]=te,D[W]=B,M=W);else if(q<U&&0>i(se,B))D[M]=se,D[q]=B,M=q;else break e}}return F}function i(D,F){var B=D.sortIndex-F.sortIndex;return B!==0?B:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,f=null,d=3,g=!1,v=!1,x=!1,j=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=D)r(u),F.sortIndex=F.expirationTime,t(a,F);else break;F=n(u)}}function E(D){if(x=!1,y(D),!v)if(n(a)!==null)v=!0,Oe(S);else{var F=n(u);F!==null&&ae(E,F.startTime-D)}}function S(D,F){v=!1,x&&(x=!1,m(N),N=-1),g=!0;var B=d;try{for(y(F),f=n(a);f!==null&&(!(f.expirationTime>F)||D&&!R());){var M=f.callback;if(typeof M=="function"){f.callback=null,d=f.priorityLevel;var U=M(f.expirationTime<=F);F=e.unstable_now(),typeof U=="function"?f.callback=U:f===n(a)&&r(a),y(F)}else r(a);f=n(a)}if(f!==null)var V=!0;else{var W=n(u);W!==null&&ae(E,W.startTime-F),V=!1}return V}finally{f=null,d=B,g=!1}}var P=!1,k=null,N=-1,T=5,C=-1;function R(){return!(e.unstable_now()-C<T)}function L(){if(k!==null){var D=e.unstable_now();C=D;var F=!0;try{F=k(!0,D)}finally{F?K():(P=!1,k=null)}}else P=!1}var K;if(typeof h=="function")K=function(){h(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,le=Y.port2;Y.port1.onmessage=L,K=function(){le.postMessage(null)}}else K=function(){j(L,0)};function Oe(D){k=D,P||(P=!0,K())}function ae(D,F){N=j(function(){D(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,Oe(S))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(a)},e.unstable_next=function(D){switch(d){case 1:case 2:case 3:var F=3;break;default:F=d}var B=d;d=F;try{return D()}finally{d=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=d;d=D;try{return F()}finally{d=B}},e.unstable_scheduleCallback=function(D,F,B){var M=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?M+B:M):B=M,D){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=B+U,D={id:c++,callback:F,priorityLevel:D,startTime:B,expirationTime:U,sortIndex:-1},B>M?(D.sortIndex=B,t(u,D),n(a)===null&&D===n(u)&&(x?(m(N),N=-1):x=!0,ae(E,B-M))):(D.sortIndex=U,t(a,D),v||g||(v=!0,Oe(S))),D},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(D){var F=d;return function(){var B=d;d=F;try{return D.apply(this,arguments)}finally{d=B}}}})(ed);Gf.exports=ed;var Jm=Gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=Q,st=Jm;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var td=new Set,ri={};function Hn(e,t){fr(e,t),fr(e+"Capture",t)}function fr(e,t){for(ri[e]=t,e=0;e<t.length;e++)td.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=Object.prototype.hasOwnProperty,Zm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nc={},rc={};function Gm(e){return hl.call(rc,e)?!0:hl.call(nc,e)?!1:Zm.test(e)?rc[e]=!0:(nc[e]=!0,!1)}function ey(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ty(e,t,n,r){if(t===null||typeof t>"u"||ey(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var Oa=/[\-:]([a-z])/g;function Ta(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Oa,Ta);Ae[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Oa,Ta);Ae[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Oa,Ta);Ae[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function ja(e,t,n,r){var i=Ae.hasOwnProperty(t)?Ae[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ty(t,n,i,r)&&(n=null),r||i===null?Gm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gt=Xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ri=Symbol.for("react.element"),Kn=Symbol.for("react.portal"),Qn=Symbol.for("react.fragment"),Aa=Symbol.for("react.strict_mode"),pl=Symbol.for("react.profiler"),nd=Symbol.for("react.provider"),rd=Symbol.for("react.context"),Ia=Symbol.for("react.forward_ref"),ml=Symbol.for("react.suspense"),yl=Symbol.for("react.suspense_list"),Ma=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),id=Symbol.for("react.offscreen"),ic=Symbol.iterator;function Tr(e){return e===null||typeof e!="object"?null:(e=ic&&e[ic]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,Ao;function Br(e){if(Ao===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ao=t&&t[1]||""}return`
`+Ao+e}var Io=!1;function Mo(e,t){if(!e||Io)return"";Io=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=o&&0<=l);break}}}finally{Io=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Br(e):""}function ny(e){switch(e.tag){case 5:return Br(e.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 2:case 15:return e=Mo(e.type,!1),e;case 11:return e=Mo(e.type.render,!1),e;case 1:return e=Mo(e.type,!0),e;default:return""}}function gl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qn:return"Fragment";case Kn:return"Portal";case pl:return"Profiler";case Aa:return"StrictMode";case ml:return"Suspense";case yl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rd:return(e.displayName||"Context")+".Consumer";case nd:return(e._context.displayName||"Context")+".Provider";case Ia:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ma:return t=e.displayName||null,t!==null?t:gl(e.type)||"Memo";case rn:t=e._payload,e=e._init;try{return gl(e(t))}catch{}}return null}function ry(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gl(t);case 8:return t===Aa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iy(e){var t=sd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Li(e){e._valueTracker||(e._valueTracker=iy(e))}function od(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=sd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vl(e,t){var n=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=wn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ld(e,t){t=t.checked,t!=null&&ja(e,"checked",t,!1)}function wl(e,t){ld(e,t);var n=wn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Sl(e,t.type,wn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Sl(e,t,n){(t!=="number"||xs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fr=Array.isArray;function sr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+wn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(Fr(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wn(n)}}function ad(e,t){var n=wn(t.value),r=wn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ac(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ud(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ud(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bi,cd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bi=bi||document.createElement("div"),bi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ii(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sy=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(e){sy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kr[t]=Kr[e]})});function fd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kr.hasOwnProperty(e)&&Kr[e]?(""+t).trim():t+"px"}function dd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var oy=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function El(e,t){if(t){if(oy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function _l(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cl=null;function Da(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pl=null,or=null,lr=null;function uc(e){if(e=Ti(e)){if(typeof Pl!="function")throw Error(I(280));var t=e.stateNode;t&&(t=oo(t),Pl(e.stateNode,e.type,t))}}function hd(e){or?lr?lr.push(e):lr=[e]:or=e}function pd(){if(or){var e=or,t=lr;if(lr=or=null,uc(e),t)for(e=0;e<t.length;e++)uc(t[e])}}function md(e,t){return e(t)}function yd(){}var Do=!1;function gd(e,t,n){if(Do)return e(t,n);Do=!0;try{return md(e,t,n)}finally{Do=!1,(or!==null||lr!==null)&&(yd(),pd())}}function si(e,t){var n=e.stateNode;if(n===null)return null;var r=oo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var Nl=!1;if(Qt)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Nl=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Nl=!1}function ly(e,t,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Qr=!1,ks=null,Es=!1,Ol=null,ay={onError:function(e){Qr=!0,ks=e}};function uy(e,t,n,r,i,s,o,l,a){Qr=!1,ks=null,ly.apply(ay,arguments)}function cy(e,t,n,r,i,s,o,l,a){if(uy.apply(this,arguments),Qr){if(Qr){var u=ks;Qr=!1,ks=null}else throw Error(I(198));Es||(Es=!0,Ol=u)}}function Vn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cc(e){if(Vn(e)!==e)throw Error(I(188))}function fy(e){var t=e.alternate;if(!t){if(t=Vn(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return cc(i),e;if(s===r)return cc(i),t;s=s.sibling}throw Error(I(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function wd(e){return e=fy(e),e!==null?Sd(e):null}function Sd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sd(e);if(t!==null)return t;e=e.sibling}return null}var xd=st.unstable_scheduleCallback,fc=st.unstable_cancelCallback,dy=st.unstable_shouldYield,hy=st.unstable_requestPaint,xe=st.unstable_now,py=st.unstable_getCurrentPriorityLevel,Ra=st.unstable_ImmediatePriority,kd=st.unstable_UserBlockingPriority,_s=st.unstable_NormalPriority,my=st.unstable_LowPriority,Ed=st.unstable_IdlePriority,no=null,Dt=null;function yy(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(no,e,void 0,(e.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:wy,gy=Math.log,vy=Math.LN2;function wy(e){return e>>>=0,e===0?32:31-(gy(e)/vy|0)|0}var $i=64,zi=4194304;function Ur(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ur(l):(s&=o,s!==0&&(r=Ur(s)))}else o=n&~i,o!==0?r=Ur(o):s!==0&&(r=Ur(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ct(t),i=1<<n,r|=e[n],t&=~i;return r}function Sy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ct(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Sy(l,t)):a<=t&&(e.expiredLanes|=l),s&=~l}}function Tl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _d(){var e=$i;return $i<<=1,!($i&4194240)&&($i=64),e}function Ro(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ni(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ct(t),e[t]=n}function ky(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ct(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function La(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ct(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var oe=0;function Cd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pd,ba,Nd,Od,Td,jl=!1,Bi=[],cn=null,fn=null,dn=null,oi=new Map,li=new Map,on=[],Ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(e,t){switch(e){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(t.pointerId)}}function Ar(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Ti(t),t!==null&&ba(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function _y(e,t,n,r,i){switch(t){case"focusin":return cn=Ar(cn,e,t,n,r,i),!0;case"dragenter":return fn=Ar(fn,e,t,n,r,i),!0;case"mouseover":return dn=Ar(dn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return oi.set(s,Ar(oi.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,li.set(s,Ar(li.get(s)||null,e,t,n,r,i)),!0}return!1}function jd(e){var t=In(e.target);if(t!==null){var n=Vn(t);if(n!==null){if(t=n.tag,t===13){if(t=vd(n),t!==null){e.blockedOn=t,Td(e.priority,function(){Nd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function os(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Al(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Cl=r,n.target.dispatchEvent(r),Cl=null}else return t=Ti(n),t!==null&&ba(t),e.blockedOn=n,!1;t.shift()}return!0}function hc(e,t,n){os(e)&&n.delete(t)}function Cy(){jl=!1,cn!==null&&os(cn)&&(cn=null),fn!==null&&os(fn)&&(fn=null),dn!==null&&os(dn)&&(dn=null),oi.forEach(hc),li.forEach(hc)}function Ir(e,t){e.blockedOn===t&&(e.blockedOn=null,jl||(jl=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Cy)))}function ai(e){function t(i){return Ir(i,e)}if(0<Bi.length){Ir(Bi[0],e);for(var n=1;n<Bi.length;n++){var r=Bi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cn!==null&&Ir(cn,e),fn!==null&&Ir(fn,e),dn!==null&&Ir(dn,e),oi.forEach(t),li.forEach(t),n=0;n<on.length;n++)r=on[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)jd(n),n.blockedOn===null&&on.shift()}var ar=Gt.ReactCurrentBatchConfig,Ps=!0;function Py(e,t,n,r){var i=oe,s=ar.transition;ar.transition=null;try{oe=1,$a(e,t,n,r)}finally{oe=i,ar.transition=s}}function Ny(e,t,n,r){var i=oe,s=ar.transition;ar.transition=null;try{oe=4,$a(e,t,n,r)}finally{oe=i,ar.transition=s}}function $a(e,t,n,r){if(Ps){var i=Al(e,t,n,r);if(i===null)Wo(e,t,r,Ns,n),dc(e,r);else if(_y(i,e,t,n,r))r.stopPropagation();else if(dc(e,r),t&4&&-1<Ey.indexOf(e)){for(;i!==null;){var s=Ti(i);if(s!==null&&Pd(s),s=Al(e,t,n,r),s===null&&Wo(e,t,r,Ns,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wo(e,t,r,null,n)}}var Ns=null;function Al(e,t,n,r){if(Ns=null,e=Da(r),e=In(e),e!==null)if(t=Vn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ns=e,null}function Ad(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(py()){case Ra:return 1;case kd:return 4;case _s:case my:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var an=null,za=null,ls=null;function Id(){if(ls)return ls;var e,t=za,n=t.length,r,i="value"in an?an.value:an.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ls=i.slice(e,1<r?1-r:void 0)}function as(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fi(){return!0}function pc(){return!1}function ut(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fi:pc,this.isPropagationStopped=pc,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),t}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ba=ut(xr),Oi=ve({},xr,{view:0,detail:0}),Oy=ut(Oi),Lo,bo,Mr,ro=ve({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mr&&(Mr&&e.type==="mousemove"?(Lo=e.screenX-Mr.screenX,bo=e.screenY-Mr.screenY):bo=Lo=0,Mr=e),Lo)},movementY:function(e){return"movementY"in e?e.movementY:bo}}),mc=ut(ro),Ty=ve({},ro,{dataTransfer:0}),jy=ut(Ty),Ay=ve({},Oi,{relatedTarget:0}),$o=ut(Ay),Iy=ve({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),My=ut(Iy),Dy=ve({},xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ry=ut(Dy),Ly=ve({},xr,{data:0}),yc=ut(Ly),by={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zy[e])?!!t[e]:!1}function Fa(){return By}var Fy=ve({},Oi,{key:function(e){if(e.key){var t=by[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$y[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Uy=ut(Fy),Hy=ve({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gc=ut(Hy),Vy=ve({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),Wy=ut(Vy),Yy=ve({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ky=ut(Yy),Qy=ve({},ro,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qy=ut(Qy),Jy=[9,13,27,32],Ua=Qt&&"CompositionEvent"in window,qr=null;Qt&&"documentMode"in document&&(qr=document.documentMode);var Xy=Qt&&"TextEvent"in window&&!qr,Md=Qt&&(!Ua||qr&&8<qr&&11>=qr),vc=" ",wc=!1;function Dd(e,t){switch(e){case"keyup":return Jy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qn=!1;function Zy(e,t){switch(e){case"compositionend":return Rd(t);case"keypress":return t.which!==32?null:(wc=!0,vc);case"textInput":return e=t.data,e===vc&&wc?null:e;default:return null}}function Gy(e,t){if(qn)return e==="compositionend"||!Ua&&Dd(e,t)?(e=Id(),ls=za=an=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Md&&t.locale!=="ko"?null:t.data;default:return null}}var eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eg[e.type]:t==="textarea"}function Ld(e,t,n,r){hd(r),t=Os(t,"onChange"),0<t.length&&(n=new Ba("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jr=null,ui=null;function tg(e){Kd(e,0)}function io(e){var t=Zn(e);if(od(t))return e}function ng(e,t){if(e==="change")return t}var bd=!1;if(Qt){var zo;if(Qt){var Bo="oninput"in document;if(!Bo){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),Bo=typeof xc.oninput=="function"}zo=Bo}else zo=!1;bd=zo&&(!document.documentMode||9<document.documentMode)}function kc(){Jr&&(Jr.detachEvent("onpropertychange",$d),ui=Jr=null)}function $d(e){if(e.propertyName==="value"&&io(ui)){var t=[];Ld(t,ui,e,Da(e)),gd(tg,t)}}function rg(e,t,n){e==="focusin"?(kc(),Jr=t,ui=n,Jr.attachEvent("onpropertychange",$d)):e==="focusout"&&kc()}function ig(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return io(ui)}function sg(e,t){if(e==="click")return io(t)}function og(e,t){if(e==="input"||e==="change")return io(t)}function lg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:lg;function ci(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hl.call(t,i)||!Nt(e[i],t[i]))return!1}return!0}function Ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _c(e,t){var n=Ec(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ec(n)}}function zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bd(){for(var e=window,t=xs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xs(e.document)}return t}function Ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ag(e){var t=Bd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zd(n.ownerDocument.documentElement,n)){if(r!==null&&Ha(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=_c(n,s);var o=_c(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ug=Qt&&"documentMode"in document&&11>=document.documentMode,Jn=null,Il=null,Xr=null,Ml=!1;function Cc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ml||Jn==null||Jn!==xs(r)||(r=Jn,"selectionStart"in r&&Ha(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xr&&ci(Xr,r)||(Xr=r,r=Os(Il,"onSelect"),0<r.length&&(t=new Ba("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jn)))}function Ui(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xn={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionend:Ui("Transition","TransitionEnd")},Fo={},Fd={};Qt&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function so(e){if(Fo[e])return Fo[e];if(!Xn[e])return e;var t=Xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fd)return Fo[e]=t[n];return e}var Ud=so("animationend"),Hd=so("animationiteration"),Vd=so("animationstart"),Wd=so("transitionend"),Yd=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(e,t){Yd.set(e,t),Hn(t,[e])}for(var Uo=0;Uo<Pc.length;Uo++){var Ho=Pc[Uo],cg=Ho.toLowerCase(),fg=Ho[0].toUpperCase()+Ho.slice(1);En(cg,"on"+fg)}En(Ud,"onAnimationEnd");En(Hd,"onAnimationIteration");En(Vd,"onAnimationStart");En("dblclick","onDoubleClick");En("focusin","onFocus");En("focusout","onBlur");En(Wd,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hr));function Nc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,cy(r,t,void 0,e),e.currentTarget=null}function Kd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Nc(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Nc(i,l,u),s=a}}}if(Es)throw e=Ol,Es=!1,Ol=null,e}function de(e,t){var n=t[$l];n===void 0&&(n=t[$l]=new Set);var r=e+"__bubble";n.has(r)||(Qd(t,e,2,!1),n.add(r))}function Vo(e,t,n){var r=0;t&&(r|=4),Qd(n,e,r,t)}var Hi="_reactListening"+Math.random().toString(36).slice(2);function fi(e){if(!e[Hi]){e[Hi]=!0,td.forEach(function(n){n!=="selectionchange"&&(dg.has(n)||Vo(n,!1,e),Vo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hi]||(t[Hi]=!0,Vo("selectionchange",!1,t))}}function Qd(e,t,n,r){switch(Ad(t)){case 1:var i=Py;break;case 4:i=Ny;break;default:i=$a}n=i.bind(null,t,n,e),i=void 0,!Nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wo(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=In(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}gd(function(){var u=s,c=Da(n),f=[];e:{var d=Yd.get(e);if(d!==void 0){var g=Ba,v=e;switch(e){case"keypress":if(as(n)===0)break e;case"keydown":case"keyup":g=Uy;break;case"focusin":v="focus",g=$o;break;case"focusout":v="blur",g=$o;break;case"beforeblur":case"afterblur":g=$o;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=jy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Wy;break;case Ud:case Hd:case Vd:g=My;break;case Wd:g=Ky;break;case"scroll":g=Oy;break;case"wheel":g=qy;break;case"copy":case"cut":case"paste":g=Ry;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=gc}var x=(t&4)!==0,j=!x&&e==="scroll",m=x?d!==null?d+"Capture":null:d;x=[];for(var h=u,y;h!==null;){y=h;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,m!==null&&(E=si(h,m),E!=null&&x.push(di(h,E,y)))),j)break;h=h.return}0<x.length&&(d=new g(d,v,null,n,c),f.push({event:d,listeners:x}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==Cl&&(v=n.relatedTarget||n.fromElement)&&(In(v)||v[qt]))break e;if((g||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?In(v):null,v!==null&&(j=Vn(v),v!==j||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(x=mc,E="onMouseLeave",m="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(x=gc,E="onPointerLeave",m="onPointerEnter",h="pointer"),j=g==null?d:Zn(g),y=v==null?d:Zn(v),d=new x(E,h+"leave",g,n,c),d.target=j,d.relatedTarget=y,E=null,In(c)===u&&(x=new x(m,h+"enter",v,n,c),x.target=y,x.relatedTarget=j,E=x),j=E,g&&v)t:{for(x=g,m=v,h=0,y=x;y;y=Yn(y))h++;for(y=0,E=m;E;E=Yn(E))y++;for(;0<h-y;)x=Yn(x),h--;for(;0<y-h;)m=Yn(m),y--;for(;h--;){if(x===m||m!==null&&x===m.alternate)break t;x=Yn(x),m=Yn(m)}x=null}else x=null;g!==null&&Oc(f,d,g,x,!1),v!==null&&j!==null&&Oc(f,j,v,x,!0)}}e:{if(d=u?Zn(u):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var S=ng;else if(Sc(d))if(bd)S=og;else{S=ig;var P=rg}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=sg);if(S&&(S=S(e,u))){Ld(f,S,n,c);break e}P&&P(e,d,u),e==="focusout"&&(P=d._wrapperState)&&P.controlled&&d.type==="number"&&Sl(d,"number",d.value)}switch(P=u?Zn(u):window,e){case"focusin":(Sc(P)||P.contentEditable==="true")&&(Jn=P,Il=u,Xr=null);break;case"focusout":Xr=Il=Jn=null;break;case"mousedown":Ml=!0;break;case"contextmenu":case"mouseup":case"dragend":Ml=!1,Cc(f,n,c);break;case"selectionchange":if(ug)break;case"keydown":case"keyup":Cc(f,n,c)}var k;if(Ua)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else qn?Dd(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Md&&n.locale!=="ko"&&(qn||N!=="onCompositionStart"?N==="onCompositionEnd"&&qn&&(k=Id()):(an=c,za="value"in an?an.value:an.textContent,qn=!0)),P=Os(u,N),0<P.length&&(N=new yc(N,e,null,n,c),f.push({event:N,listeners:P}),k?N.data=k:(k=Rd(n),k!==null&&(N.data=k)))),(k=Xy?Zy(e,n):Gy(e,n))&&(u=Os(u,"onBeforeInput"),0<u.length&&(c=new yc("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=k))}Kd(f,t)})}function di(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Os(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=si(e,n),s!=null&&r.unshift(di(e,s,i)),s=si(e,t),s!=null&&r.push(di(e,s,i))),e=e.return}return r}function Yn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=si(n,s),a!=null&&o.unshift(di(n,a,l))):i||(a=si(n,s),a!=null&&o.push(di(n,a,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var hg=/\r\n?/g,pg=/\u0000|\uFFFD/g;function Tc(e){return(typeof e=="string"?e:""+e).replace(hg,`
`).replace(pg,"")}function Vi(e,t,n){if(t=Tc(t),Tc(e)!==t&&n)throw Error(I(425))}function Ts(){}var Dl=null,Rl=null;function Ll(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bl=typeof setTimeout=="function"?setTimeout:void 0,mg=typeof clearTimeout=="function"?clearTimeout:void 0,jc=typeof Promise=="function"?Promise:void 0,yg=typeof queueMicrotask=="function"?queueMicrotask:typeof jc<"u"?function(e){return jc.resolve(null).then(e).catch(gg)}:bl;function gg(e){setTimeout(function(){throw e})}function Yo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ai(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ai(t)}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ac(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var kr=Math.random().toString(36).slice(2),It="__reactFiber$"+kr,hi="__reactProps$"+kr,qt="__reactContainer$"+kr,$l="__reactEvents$"+kr,vg="__reactListeners$"+kr,wg="__reactHandles$"+kr;function In(e){var t=e[It];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[It]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ac(e);e!==null;){if(n=e[It])return n;e=Ac(e)}return t}e=n,n=e.parentNode}return null}function Ti(e){return e=e[It]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function oo(e){return e[hi]||null}var zl=[],Gn=-1;function _n(e){return{current:e}}function he(e){0>Gn||(e.current=zl[Gn],zl[Gn]=null,Gn--)}function ce(e,t){Gn++,zl[Gn]=e.current,e.current=t}var Sn={},$e=_n(Sn),qe=_n(!1),bn=Sn;function dr(e,t){var n=e.type.contextTypes;if(!n)return Sn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Je(e){return e=e.childContextTypes,e!=null}function js(){he(qe),he($e)}function Ic(e,t,n){if($e.current!==Sn)throw Error(I(168));ce($e,t),ce(qe,n)}function qd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(I(108,ry(e)||"Unknown",i));return ve({},n,r)}function As(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sn,bn=$e.current,ce($e,e),ce(qe,qe.current),!0}function Mc(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=qd(e,t,bn),r.__reactInternalMemoizedMergedChildContext=e,he(qe),he($e),ce($e,e)):he(qe),ce(qe,n)}var Ht=null,lo=!1,Ko=!1;function Jd(e){Ht===null?Ht=[e]:Ht.push(e)}function Sg(e){lo=!0,Jd(e)}function Cn(){if(!Ko&&Ht!==null){Ko=!0;var e=0,t=oe;try{var n=Ht;for(oe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ht=null,lo=!1}catch(i){throw Ht!==null&&(Ht=Ht.slice(e+1)),xd(Ra,Cn),i}finally{oe=t,Ko=!1}}return null}var er=[],tr=0,Is=null,Ms=0,ft=[],dt=0,$n=null,Vt=1,Wt="";function Tn(e,t){er[tr++]=Ms,er[tr++]=Is,Is=e,Ms=t}function Xd(e,t,n){ft[dt++]=Vt,ft[dt++]=Wt,ft[dt++]=$n,$n=e;var r=Vt;e=Wt;var i=32-Ct(r)-1;r&=~(1<<i),n+=1;var s=32-Ct(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vt=1<<32-Ct(t)+i|n<<i|r,Wt=s+e}else Vt=1<<s|n<<i|r,Wt=e}function Va(e){e.return!==null&&(Tn(e,1),Xd(e,1,0))}function Wa(e){for(;e===Is;)Is=er[--tr],er[tr]=null,Ms=er[--tr],er[tr]=null;for(;e===$n;)$n=ft[--dt],ft[dt]=null,Wt=ft[--dt],ft[dt]=null,Vt=ft[--dt],ft[dt]=null}var rt=null,tt=null,pe=!1,Et=null;function Zd(e,t){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Dc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rt=e,tt=hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rt=e,tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$n!==null?{id:Vt,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rt=e,tt=null,!0):!1;default:return!1}}function Bl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fl(e){if(pe){var t=tt;if(t){var n=t;if(!Dc(e,t)){if(Bl(e))throw Error(I(418));t=hn(n.nextSibling);var r=rt;t&&Dc(e,t)?Zd(r,n):(e.flags=e.flags&-4097|2,pe=!1,rt=e)}}else{if(Bl(e))throw Error(I(418));e.flags=e.flags&-4097|2,pe=!1,rt=e}}}function Rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rt=e}function Wi(e){if(e!==rt)return!1;if(!pe)return Rc(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ll(e.type,e.memoizedProps)),t&&(t=tt)){if(Bl(e))throw Gd(),Error(I(418));for(;t;)Zd(e,t),t=hn(t.nextSibling)}if(Rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tt=hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tt=null}}else tt=rt?hn(e.stateNode.nextSibling):null;return!0}function Gd(){for(var e=tt;e;)e=hn(e.nextSibling)}function hr(){tt=rt=null,pe=!1}function Ya(e){Et===null?Et=[e]:Et.push(e)}var xg=Gt.ReactCurrentBatchConfig;function Dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lc(e){var t=e._init;return t(e._payload)}function eh(e){function t(m,h){if(e){var y=m.deletions;y===null?(m.deletions=[h],m.flags|=16):y.push(h)}}function n(m,h){if(!e)return null;for(;h!==null;)t(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function i(m,h){return m=gn(m,h),m.index=0,m.sibling=null,m}function s(m,h,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<h?(m.flags|=2,h):y):(m.flags|=2,h)):(m.flags|=1048576,h)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,h,y,E){return h===null||h.tag!==6?(h=el(y,m.mode,E),h.return=m,h):(h=i(h,y),h.return=m,h)}function a(m,h,y,E){var S=y.type;return S===Qn?c(m,h,y.props.children,E,y.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rn&&Lc(S)===h.type)?(E=i(h,y.props),E.ref=Dr(m,h,y),E.return=m,E):(E=ms(y.type,y.key,y.props,null,m.mode,E),E.ref=Dr(m,h,y),E.return=m,E)}function u(m,h,y,E){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=tl(y,m.mode,E),h.return=m,h):(h=i(h,y.children||[]),h.return=m,h)}function c(m,h,y,E,S){return h===null||h.tag!==7?(h=Ln(y,m.mode,E,S),h.return=m,h):(h=i(h,y),h.return=m,h)}function f(m,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=el(""+h,m.mode,y),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ri:return y=ms(h.type,h.key,h.props,null,m.mode,y),y.ref=Dr(m,null,h),y.return=m,y;case Kn:return h=tl(h,m.mode,y),h.return=m,h;case rn:var E=h._init;return f(m,E(h._payload),y)}if(Fr(h)||Tr(h))return h=Ln(h,m.mode,y,null),h.return=m,h;Yi(m,h)}return null}function d(m,h,y,E){var S=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:l(m,h,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ri:return y.key===S?a(m,h,y,E):null;case Kn:return y.key===S?u(m,h,y,E):null;case rn:return S=y._init,d(m,h,S(y._payload),E)}if(Fr(y)||Tr(y))return S!==null?null:c(m,h,y,E,null);Yi(m,y)}return null}function g(m,h,y,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(y)||null,l(h,m,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ri:return m=m.get(E.key===null?y:E.key)||null,a(h,m,E,S);case Kn:return m=m.get(E.key===null?y:E.key)||null,u(h,m,E,S);case rn:var P=E._init;return g(m,h,y,P(E._payload),S)}if(Fr(E)||Tr(E))return m=m.get(y)||null,c(h,m,E,S,null);Yi(h,E)}return null}function v(m,h,y,E){for(var S=null,P=null,k=h,N=h=0,T=null;k!==null&&N<y.length;N++){k.index>N?(T=k,k=null):T=k.sibling;var C=d(m,k,y[N],E);if(C===null){k===null&&(k=T);break}e&&k&&C.alternate===null&&t(m,k),h=s(C,h,N),P===null?S=C:P.sibling=C,P=C,k=T}if(N===y.length)return n(m,k),pe&&Tn(m,N),S;if(k===null){for(;N<y.length;N++)k=f(m,y[N],E),k!==null&&(h=s(k,h,N),P===null?S=k:P.sibling=k,P=k);return pe&&Tn(m,N),S}for(k=r(m,k);N<y.length;N++)T=g(k,m,N,y[N],E),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?N:T.key),h=s(T,h,N),P===null?S=T:P.sibling=T,P=T);return e&&k.forEach(function(R){return t(m,R)}),pe&&Tn(m,N),S}function x(m,h,y,E){var S=Tr(y);if(typeof S!="function")throw Error(I(150));if(y=S.call(y),y==null)throw Error(I(151));for(var P=S=null,k=h,N=h=0,T=null,C=y.next();k!==null&&!C.done;N++,C=y.next()){k.index>N?(T=k,k=null):T=k.sibling;var R=d(m,k,C.value,E);if(R===null){k===null&&(k=T);break}e&&k&&R.alternate===null&&t(m,k),h=s(R,h,N),P===null?S=R:P.sibling=R,P=R,k=T}if(C.done)return n(m,k),pe&&Tn(m,N),S;if(k===null){for(;!C.done;N++,C=y.next())C=f(m,C.value,E),C!==null&&(h=s(C,h,N),P===null?S=C:P.sibling=C,P=C);return pe&&Tn(m,N),S}for(k=r(m,k);!C.done;N++,C=y.next())C=g(k,m,N,C.value,E),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?N:C.key),h=s(C,h,N),P===null?S=C:P.sibling=C,P=C);return e&&k.forEach(function(L){return t(m,L)}),pe&&Tn(m,N),S}function j(m,h,y,E){if(typeof y=="object"&&y!==null&&y.type===Qn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ri:e:{for(var S=y.key,P=h;P!==null;){if(P.key===S){if(S=y.type,S===Qn){if(P.tag===7){n(m,P.sibling),h=i(P,y.props.children),h.return=m,m=h;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===rn&&Lc(S)===P.type){n(m,P.sibling),h=i(P,y.props),h.ref=Dr(m,P,y),h.return=m,m=h;break e}n(m,P);break}else t(m,P);P=P.sibling}y.type===Qn?(h=Ln(y.props.children,m.mode,E,y.key),h.return=m,m=h):(E=ms(y.type,y.key,y.props,null,m.mode,E),E.ref=Dr(m,h,y),E.return=m,m=E)}return o(m);case Kn:e:{for(P=y.key;h!==null;){if(h.key===P)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(m,h.sibling),h=i(h,y.children||[]),h.return=m,m=h;break e}else{n(m,h);break}else t(m,h);h=h.sibling}h=tl(y,m.mode,E),h.return=m,m=h}return o(m);case rn:return P=y._init,j(m,h,P(y._payload),E)}if(Fr(y))return v(m,h,y,E);if(Tr(y))return x(m,h,y,E);Yi(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(m,h.sibling),h=i(h,y),h.return=m,m=h):(n(m,h),h=el(y,m.mode,E),h.return=m,m=h),o(m)):n(m,h)}return j}var pr=eh(!0),th=eh(!1),Ds=_n(null),Rs=null,nr=null,Ka=null;function Qa(){Ka=nr=Rs=null}function qa(e){var t=Ds.current;he(Ds),e._currentValue=t}function Ul(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ur(e,t){Rs=e,Ka=nr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(Ka!==e)if(e={context:e,memoizedValue:t,next:null},nr===null){if(Rs===null)throw Error(I(308));nr=e,Rs.dependencies={lanes:0,firstContext:e}}else nr=nr.next=e;return t}var Mn=null;function Ja(e){Mn===null?Mn=[e]:Mn.push(e)}function nh(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Ja(t)):(n.next=i.next,i.next=n),t.interleaved=n,Jt(e,r)}function Jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var sn=!1;function Xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Jt(e,n)}return i=r.interleaved,i===null?(t.next=t,Ja(r)):(t.next=i.next,i.next=t),r.interleaved=t,Jt(e,n)}function us(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,La(e,n)}}function bc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ls(e,t,n,r){var i=e.updateQueue;sn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;o=0,c=u=a=null,l=s;do{var d=l.lane,g=l.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(d=t,g=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(g,f,d);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,d=typeof v=="function"?v.call(g,f,d):v,d==null)break e;f=ve({},f,d);break e;case 2:sn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else g={eventTime:g,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,a=f):c=c.next=g,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(a=f),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Bn|=o,e.lanes=o,e.memoizedState=f}}function $c(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(I(191,i));i.call(r)}}}var ji={},Rt=_n(ji),pi=_n(ji),mi=_n(ji);function Dn(e){if(e===ji)throw Error(I(174));return e}function Za(e,t){switch(ce(mi,t),ce(pi,e),ce(Rt,ji),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kl(t,e)}he(Rt),ce(Rt,t)}function mr(){he(Rt),he(pi),he(mi)}function ih(e){Dn(mi.current);var t=Dn(Rt.current),n=kl(t,e.type);t!==n&&(ce(pi,e),ce(Rt,n))}function Ga(e){pi.current===e&&(he(Rt),he(pi))}var ye=_n(0);function bs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qo=[];function eu(){for(var e=0;e<Qo.length;e++)Qo[e]._workInProgressVersionPrimary=null;Qo.length=0}var cs=Gt.ReactCurrentDispatcher,qo=Gt.ReactCurrentBatchConfig,zn=0,ge=null,_e=null,Pe=null,$s=!1,Zr=!1,yi=0,kg=0;function Ie(){throw Error(I(321))}function tu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nt(e[n],t[n]))return!1;return!0}function nu(e,t,n,r,i,s){if(zn=s,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=e===null||e.memoizedState===null?Pg:Ng,e=n(r,i),Zr){s=0;do{if(Zr=!1,yi=0,25<=s)throw Error(I(301));s+=1,Pe=_e=null,t.updateQueue=null,cs.current=Og,e=n(r,i)}while(Zr)}if(cs.current=zs,t=_e!==null&&_e.next!==null,zn=0,Pe=_e=ge=null,$s=!1,t)throw Error(I(300));return e}function ru(){var e=yi!==0;return yi=0,e}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?ge.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function gt(){if(_e===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=Pe===null?ge.memoizedState:Pe.next;if(t!==null)Pe=t,_e=e;else{if(e===null)throw Error(I(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Pe===null?ge.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function gi(e,t){return typeof t=="function"?t(e):t}function Jo(e){var t=gt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=_e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((zn&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,ge.lanes|=c,Bn|=c}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,Nt(r,t.memoizedState)||(Qe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ge.lanes|=s,Bn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xo(e){var t=gt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Nt(s,t.memoizedState)||(Qe=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function sh(){}function oh(e,t){var n=ge,r=gt(),i=t(),s=!Nt(r.memoizedState,i);if(s&&(r.memoizedState=i,Qe=!0),r=r.queue,iu(uh.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,vi(9,ah.bind(null,n,r,i,t),void 0,null),Ne===null)throw Error(I(349));zn&30||lh(n,t,i)}return i}function lh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ah(e,t,n,r){t.value=n,t.getSnapshot=r,ch(t)&&fh(e)}function uh(e,t,n){return n(function(){ch(t)&&fh(e)})}function ch(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nt(e,n)}catch{return!0}}function fh(e){var t=Jt(e,1);t!==null&&Pt(t,e,1,-1)}function zc(e){var t=jt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:e},t.queue=e,e=e.dispatch=Cg.bind(null,ge,e),[t.memoizedState,e]}function vi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dh(){return gt().memoizedState}function fs(e,t,n,r){var i=jt();ge.flags|=e,i.memoizedState=vi(1|t,n,void 0,r===void 0?null:r)}function ao(e,t,n,r){var i=gt();r=r===void 0?null:r;var s=void 0;if(_e!==null){var o=_e.memoizedState;if(s=o.destroy,r!==null&&tu(r,o.deps)){i.memoizedState=vi(t,n,s,r);return}}ge.flags|=e,i.memoizedState=vi(1|t,n,s,r)}function Bc(e,t){return fs(8390656,8,e,t)}function iu(e,t){return ao(2048,8,e,t)}function hh(e,t){return ao(4,2,e,t)}function ph(e,t){return ao(4,4,e,t)}function mh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yh(e,t,n){return n=n!=null?n.concat([e]):null,ao(4,4,mh.bind(null,t,e),n)}function su(){}function gh(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vh(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wh(e,t,n){return zn&21?(Nt(n,t)||(n=_d(),ge.lanes|=n,Bn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n)}function Eg(e,t){var n=oe;oe=n!==0&&4>n?n:4,e(!0);var r=qo.transition;qo.transition={};try{e(!1),t()}finally{oe=n,qo.transition=r}}function Sh(){return gt().memoizedState}function _g(e,t,n){var r=yn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xh(e))kh(t,n);else if(n=nh(e,t,n,r),n!==null){var i=He();Pt(n,e,r,i),Eh(n,t,r)}}function Cg(e,t,n){var r=yn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xh(e))kh(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Nt(l,o)){var a=t.interleaved;a===null?(i.next=i,Ja(t)):(i.next=a.next,a.next=i),t.interleaved=i;return}}catch{}finally{}n=nh(e,t,i,r),n!==null&&(i=He(),Pt(n,e,r,i),Eh(n,t,r))}}function xh(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function kh(e,t){Zr=$s=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Eh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,La(e,n)}}var zs={readContext:yt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Pg={readContext:yt,useCallback:function(e,t){return jt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:Bc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,fs(4194308,4,mh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fs(4194308,4,e,t)},useInsertionEffect:function(e,t){return fs(4,2,e,t)},useMemo:function(e,t){var n=jt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_g.bind(null,ge,e),[r.memoizedState,e]},useRef:function(e){var t=jt();return e={current:e},t.memoizedState=e},useState:zc,useDebugValue:su,useDeferredValue:function(e){return jt().memoizedState=e},useTransition:function(){var e=zc(!1),t=e[0];return e=Eg.bind(null,e[1]),jt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ge,i=jt();if(pe){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),Ne===null)throw Error(I(349));zn&30||lh(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Bc(uh.bind(null,r,s,e),[e]),r.flags|=2048,vi(9,ah.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=jt(),t=Ne.identifierPrefix;if(pe){var n=Wt,r=Vt;n=(r&~(1<<32-Ct(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ng={readContext:yt,useCallback:gh,useContext:yt,useEffect:iu,useImperativeHandle:yh,useInsertionEffect:hh,useLayoutEffect:ph,useMemo:vh,useReducer:Jo,useRef:dh,useState:function(){return Jo(gi)},useDebugValue:su,useDeferredValue:function(e){var t=gt();return wh(t,_e.memoizedState,e)},useTransition:function(){var e=Jo(gi)[0],t=gt().memoizedState;return[e,t]},useMutableSource:sh,useSyncExternalStore:oh,useId:Sh,unstable_isNewReconciler:!1},Og={readContext:yt,useCallback:gh,useContext:yt,useEffect:iu,useImperativeHandle:yh,useInsertionEffect:hh,useLayoutEffect:ph,useMemo:vh,useReducer:Xo,useRef:dh,useState:function(){return Xo(gi)},useDebugValue:su,useDeferredValue:function(e){var t=gt();return _e===null?t.memoizedState=e:wh(t,_e.memoizedState,e)},useTransition:function(){var e=Xo(gi)[0],t=gt().memoizedState;return[e,t]},useMutableSource:sh,useSyncExternalStore:oh,useId:Sh,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Hl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var uo={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=He(),i=yn(e),s=Yt(r,i);s.payload=t,n!=null&&(s.callback=n),t=pn(e,s,i),t!==null&&(Pt(t,e,i,r),us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=He(),i=yn(e),s=Yt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=pn(e,s,i),t!==null&&(Pt(t,e,i,r),us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),r=yn(e),i=Yt(n,r);i.tag=2,t!=null&&(i.callback=t),t=pn(e,i,r),t!==null&&(Pt(t,e,r,n),us(t,e,r))}};function Fc(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ci(n,r)||!ci(i,s):!0}function _h(e,t,n){var r=!1,i=Sn,s=t.contextType;return typeof s=="object"&&s!==null?s=yt(s):(i=Je(t)?bn:$e.current,r=t.contextTypes,s=(r=r!=null)?dr(e,i):Sn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Uc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&uo.enqueueReplaceState(t,t.state,null)}function Vl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Xa(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=yt(s):(s=Je(t)?bn:$e.current,i.context=dr(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Hl(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&uo.enqueueReplaceState(i,i.state,null),Ls(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=ny(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Zo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Wl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Tg=typeof WeakMap=="function"?WeakMap:Map;function Ch(e,t,n){n=Yt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fs||(Fs=!0,ta=r),Wl(e,t)},n}function Ph(e,t,n){n=Yt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Wl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wl(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Hc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Tg;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Hg.bind(null,e,t,n),t.then(e,e))}function Vc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wc(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Yt(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var jg=Gt.ReactCurrentOwner,Qe=!1;function Fe(e,t,n,r){t.child=e===null?th(t,null,n,r):pr(t,e.child,n,r)}function Yc(e,t,n,r,i){n=n.render;var s=t.ref;return ur(t,i),r=nu(e,t,n,r,s,i),n=ru(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xt(e,t,i)):(pe&&n&&Va(t),t.flags|=1,Fe(e,t,r,i),t.child)}function Kc(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!hu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Nh(e,t,s,r,i)):(e=ms(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ci,n(o,r)&&e.ref===t.ref)return Xt(e,t,i)}return t.flags|=1,e=gn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Nh(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ci(s,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Xt(e,t,i)}return Yl(e,t,n,r,i)}function Oh(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(ir,et),et|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ce(ir,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ce(ir,et),et|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ce(ir,et),et|=r;return Fe(e,t,i,n),t.child}function Th(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yl(e,t,n,r,i){var s=Je(n)?bn:$e.current;return s=dr(t,s),ur(t,i),n=nu(e,t,n,r,s,i),r=ru(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xt(e,t,i)):(pe&&r&&Va(t),t.flags|=1,Fe(e,t,n,i),t.child)}function Qc(e,t,n,r,i){if(Je(n)){var s=!0;As(t)}else s=!1;if(ur(t,i),t.stateNode===null)ds(e,t),_h(t,n,r),Vl(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=Je(n)?bn:$e.current,u=dr(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Uc(t,o,r,u),sn=!1;var d=t.memoizedState;o.state=d,Ls(t,r,o,i),a=t.memoizedState,l!==r||d!==a||qe.current||sn?(typeof c=="function"&&(Hl(t,n,c,r),a=t.memoizedState),(l=sn||Fc(t,n,l,r,d,a,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,rh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:St(t.type,l),o.props=u,f=t.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=yt(a):(a=Je(n)?bn:$e.current,a=dr(t,a));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||d!==a)&&Uc(t,o,r,a),sn=!1,d=t.memoizedState,o.state=d,Ls(t,r,o,i);var v=t.memoizedState;l!==f||d!==v||qe.current||sn?(typeof g=="function"&&(Hl(t,n,g,r),v=t.memoizedState),(u=sn||Fc(t,n,u,r,d,v,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,a)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Kl(e,t,n,r,s,i)}function Kl(e,t,n,r,i,s){Th(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Mc(t,n,!1),Xt(e,t,s);r=t.stateNode,jg.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=pr(t,e.child,null,s),t.child=pr(t,null,l,s)):Fe(e,t,l,s),t.memoizedState=r.state,i&&Mc(t,n,!0),t.child}function jh(e){var t=e.stateNode;t.pendingContext?Ic(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ic(e,t.context,!1),Za(e,t.containerInfo)}function qc(e,t,n,r,i){return hr(),Ya(i),t.flags|=256,Fe(e,t,n,r),t.child}var Ql={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ah(e,t,n){var r=t.pendingProps,i=ye.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ce(ye,i&1),e===null)return Fl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ho(o,r,0,null),e=Ln(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=ql(n),t.memoizedState=Ql,e):ou(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Ag(e,t,o,r,l,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=a,t.deletions=null):(r=gn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=gn(l,s):(s=Ln(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?ql(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Ql,r}return s=e.child,e=s.sibling,r=gn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ou(e,t){return t=ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ki(e,t,n,r){return r!==null&&Ya(r),pr(t,e.child,null,n),e=ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ag(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Zo(Error(I(422))),Ki(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ho({mode:"visible",children:r.children},i,0,null),s=Ln(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&pr(t,e.child,null,o),t.child.memoizedState=ql(o),t.memoizedState=Ql,s);if(!(t.mode&1))return Ki(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(I(419)),r=Zo(s,r,void 0),Ki(e,t,o,r)}if(l=(o&e.childLanes)!==0,Qe||l){if(r=Ne,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Jt(e,i),Pt(r,e,i,-1))}return du(),r=Zo(Error(I(421))),Ki(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Vg.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,tt=hn(i.nextSibling),rt=t,pe=!0,Et=null,e!==null&&(ft[dt++]=Vt,ft[dt++]=Wt,ft[dt++]=$n,Vt=e.id,Wt=e.overflow,$n=t),t=ou(t,r.children),t.flags|=4096,t)}function Jc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ul(e.return,t,n)}function Go(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ih(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fe(e,t,r.children,n),r=ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jc(e,n,t);else if(e.tag===19)Jc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ce(ye,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&bs(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Go(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&bs(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Go(t,!0,n,null,s);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ds(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ig(e,t,n){switch(t.tag){case 3:jh(t),hr();break;case 5:ih(t);break;case 1:Je(t.type)&&As(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ce(Ds,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ce(ye,ye.current&1),t.flags|=128,null):n&t.child.childLanes?Ah(e,t,n):(ce(ye,ye.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);ce(ye,ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ih(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(ye,ye.current),r)break;return null;case 22:case 23:return t.lanes=0,Oh(e,t,n)}return Xt(e,t,n)}var Mh,Jl,Dh,Rh;Mh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jl=function(){};Dh=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dn(Rt.current);var s=null;switch(n){case"input":i=vl(e,i),r=vl(e,r),s=[];break;case"select":i=ve({},i,{value:void 0}),r=ve({},r,{value:void 0}),s=[];break;case"textarea":i=xl(e,i),r=xl(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ts)}El(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ri.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ri.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&de("scroll",e),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Rh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Rr(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Mg(e,t,n){var r=t.pendingProps;switch(Wa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Je(t.type)&&js(),Me(t),null;case 3:return r=t.stateNode,mr(),he(qe),he($e),eu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Wi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Et!==null&&(ia(Et),Et=null))),Jl(e,t),Me(t),null;case 5:Ga(t);var i=Dn(mi.current);if(n=t.type,e!==null&&t.stateNode!=null)Dh(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return Me(t),null}if(e=Dn(Rt.current),Wi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[It]=t,r[hi]=s,e=(t.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(i=0;i<Hr.length;i++)de(Hr[i],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":sc(r,s),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},de("invalid",r);break;case"textarea":lc(r,s),de("invalid",r)}El(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Vi(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Vi(r.textContent,l,e),i=["children",""+l]):ri.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":Li(r),oc(r,s,!0);break;case"textarea":Li(r),ac(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ts)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ud(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[It]=t,e[hi]=r,Mh(e,t,!1,!1),t.stateNode=e;e:{switch(o=_l(n,r),n){case"dialog":de("cancel",e),de("close",e),i=r;break;case"iframe":case"object":case"embed":de("load",e),i=r;break;case"video":case"audio":for(i=0;i<Hr.length;i++)de(Hr[i],e);i=r;break;case"source":de("error",e),i=r;break;case"img":case"image":case"link":de("error",e),de("load",e),i=r;break;case"details":de("toggle",e),i=r;break;case"input":sc(e,r),i=vl(e,r),de("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ve({},r,{value:void 0}),de("invalid",e);break;case"textarea":lc(e,r),i=xl(e,r),de("invalid",e);break;default:i=r}El(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?dd(e,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&cd(e,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ii(e,a):typeof a=="number"&&ii(e,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ri.hasOwnProperty(s)?a!=null&&s==="onScroll"&&de("scroll",e):a!=null&&ja(e,s,a,o))}switch(n){case"input":Li(e),oc(e,r,!1);break;case"textarea":Li(e),ac(e);break;case"option":r.value!=null&&e.setAttribute("value",""+wn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?sr(e,!!r.multiple,s,!1):r.defaultValue!=null&&sr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)Rh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=Dn(mi.current),Dn(Rt.current),Wi(t)){if(r=t.stateNode,n=t.memoizedProps,r[It]=t,(s=r.nodeValue!==n)&&(e=rt,e!==null))switch(e.tag){case 3:Vi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vi(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[It]=t,t.stateNode=r}return Me(t),null;case 13:if(he(ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&tt!==null&&t.mode&1&&!(t.flags&128))Gd(),hr(),t.flags|=98560,s=!1;else if(s=Wi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(I(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(I(317));s[It]=t}else hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),s=!1}else Et!==null&&(ia(Et),Et=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ye.current&1?Ce===0&&(Ce=3):du())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return mr(),Jl(e,t),e===null&&fi(t.stateNode.containerInfo),Me(t),null;case 10:return qa(t.type._context),Me(t),null;case 17:return Je(t.type)&&js(),Me(t),null;case 19:if(he(ye),s=t.memoizedState,s===null)return Me(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Rr(s,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bs(e),o!==null){for(t.flags|=128,Rr(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ce(ye,ye.current&1|2),t.child}e=e.sibling}s.tail!==null&&xe()>gr&&(t.flags|=128,r=!0,Rr(s,!1),t.lanes=4194304)}else{if(!r)if(e=bs(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Rr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pe)return Me(t),null}else 2*xe()-s.renderingStartTime>gr&&n!==1073741824&&(t.flags|=128,r=!0,Rr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=xe(),t.sibling=null,n=ye.current,ce(ye,r?n&1|2:n&1),t):(Me(t),null);case 22:case 23:return fu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?et&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function Dg(e,t){switch(Wa(t),t.tag){case 1:return Je(t.type)&&js(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(),he(qe),he($e),eu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ga(t),null;case 13:if(he(ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(ye),null;case 4:return mr(),null;case 10:return qa(t.type._context),null;case 22:case 23:return fu(),null;case 24:return null;default:return null}}var Qi=!1,Le=!1,Rg=typeof WeakSet=="function"?WeakSet:Set,z=null;function rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(e,t,r)}else n.current=null}function Xl(e,t,n){try{n()}catch(r){Se(e,t,r)}}var Xc=!1;function Lg(e,t){if(Dl=Ps,e=Bd(),Ha(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)d=f,f=g;for(;;){if(f===e)break t;if(d===n&&++u===i&&(l=o),d===s&&++c===r&&(a=o),(g=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rl={focusedElem:e,selectionRange:n},Ps=!1,z=t;z!==null;)if(t=z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,z=e;else for(;z!==null;){t=z;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,j=v.memoizedState,m=t.stateNode,h=m.getSnapshotBeforeUpdate(t.elementType===t.type?x:St(t.type,x),j);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(E){Se(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}return v=Xc,Xc=!1,v}function Gr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xl(t,n,s)}i=i.next}while(i!==r)}}function co(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Zl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Lh(e){var t=e.alternate;t!==null&&(e.alternate=null,Lh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[It],delete t[hi],delete t[$l],delete t[vg],delete t[wg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bh(e){return e.tag===5||e.tag===3||e.tag===4}function Zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ts));else if(r!==4&&(e=e.child,e!==null))for(Gl(e,t,n),e=e.sibling;e!==null;)Gl(e,t,n),e=e.sibling}function ea(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ea(e,t,n),e=e.sibling;e!==null;)ea(e,t,n),e=e.sibling}var Te=null,xt=!1;function nn(e,t,n){for(n=n.child;n!==null;)$h(e,t,n),n=n.sibling}function $h(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(no,n)}catch{}switch(n.tag){case 5:Le||rr(n,t);case 6:var r=Te,i=xt;Te=null,nn(e,t,n),Te=r,xt=i,Te!==null&&(xt?(e=Te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(xt?(e=Te,n=n.stateNode,e.nodeType===8?Yo(e.parentNode,n):e.nodeType===1&&Yo(e,n),ai(e)):Yo(Te,n.stateNode));break;case 4:r=Te,i=xt,Te=n.stateNode.containerInfo,xt=!0,nn(e,t,n),Te=r,xt=i;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xl(n,t,o),i=i.next}while(i!==r)}nn(e,t,n);break;case 1:if(!Le&&(rr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Se(n,t,l)}nn(e,t,n);break;case 21:nn(e,t,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,nn(e,t,n),Le=r):nn(e,t,n);break;default:nn(e,t,n)}}function Gc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Rg),t.forEach(function(r){var i=Wg.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Te=l.stateNode,xt=!1;break e;case 3:Te=l.stateNode.containerInfo,xt=!0;break e;case 4:Te=l.stateNode.containerInfo,xt=!0;break e}l=l.return}if(Te===null)throw Error(I(160));$h(s,o,i),Te=null,xt=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){Se(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zh(t,e),t=t.sibling}function zh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wt(t,e),Tt(e),r&4){try{Gr(3,e,e.return),co(3,e)}catch(x){Se(e,e.return,x)}try{Gr(5,e,e.return)}catch(x){Se(e,e.return,x)}}break;case 1:wt(t,e),Tt(e),r&512&&n!==null&&rr(n,n.return);break;case 5:if(wt(t,e),Tt(e),r&512&&n!==null&&rr(n,n.return),e.flags&32){var i=e.stateNode;try{ii(i,"")}catch(x){Se(e,e.return,x)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&ld(i,s),_l(l,o);var u=_l(l,s);for(o=0;o<a.length;o+=2){var c=a[o],f=a[o+1];c==="style"?dd(i,f):c==="dangerouslySetInnerHTML"?cd(i,f):c==="children"?ii(i,f):ja(i,c,f,u)}switch(l){case"input":wl(i,s);break;case"textarea":ad(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?sr(i,!!s.multiple,g,!1):d!==!!s.multiple&&(s.defaultValue!=null?sr(i,!!s.multiple,s.defaultValue,!0):sr(i,!!s.multiple,s.multiple?[]:"",!1))}i[hi]=s}catch(x){Se(e,e.return,x)}}break;case 6:if(wt(t,e),Tt(e),r&4){if(e.stateNode===null)throw Error(I(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(x){Se(e,e.return,x)}}break;case 3:if(wt(t,e),Tt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ai(t.containerInfo)}catch(x){Se(e,e.return,x)}break;case 4:wt(t,e),Tt(e);break;case 13:wt(t,e),Tt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(uu=xe())),r&4&&Gc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Le=(u=Le)||c,wt(t,e),Le=u):wt(t,e),Tt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(z=e,c=e.child;c!==null;){for(f=z=c;z!==null;){switch(d=z,g=d.child,d.tag){case 0:case 11:case 14:case 15:Gr(4,d,d.return);break;case 1:rr(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){Se(r,n,x)}}break;case 5:rr(d,d.return);break;case 22:if(d.memoizedState!==null){tf(f);continue}}g!==null?(g.return=d,z=g):tf(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=fd("display",o))}catch(x){Se(e,e.return,x)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Se(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:wt(t,e),Tt(e),r&4&&Gc(e);break;case 21:break;default:wt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bh(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ii(i,""),r.flags&=-33);var s=Zc(e);ea(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Zc(e);Gl(e,l,o);break;default:throw Error(I(161))}}catch(a){Se(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bg(e,t,n){z=e,Bh(e)}function Bh(e,t,n){for(var r=(e.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Qi;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Le;l=Qi;var u=Le;if(Qi=o,(Le=a)&&!u)for(z=i;z!==null;)o=z,a=o.child,o.tag===22&&o.memoizedState!==null?nf(i):a!==null?(a.return=o,z=a):nf(i);for(;s!==null;)z=s,Bh(s),s=s.sibling;z=i,Qi=l,Le=u}ef(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):ef(e)}}function ef(e){for(;z!==null;){var t=z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||co(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Le)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&$c(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$c(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&ai(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Le||t.flags&512&&Zl(t)}catch(d){Se(t,t.return,d)}}if(t===e){z=null;break}if(n=t.sibling,n!==null){n.return=t.return,z=n;break}z=t.return}}function tf(e){for(;z!==null;){var t=z;if(t===e){z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,z=n;break}z=t.return}}function nf(e){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{co(4,t)}catch(a){Se(t,n,a)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(a){Se(t,i,a)}}var s=t.return;try{Zl(t)}catch(a){Se(t,s,a)}break;case 5:var o=t.return;try{Zl(t)}catch(a){Se(t,o,a)}}}catch(a){Se(t,t.return,a)}if(t===e){z=null;break}var l=t.sibling;if(l!==null){l.return=t.return,z=l;break}z=t.return}}var $g=Math.ceil,Bs=Gt.ReactCurrentDispatcher,lu=Gt.ReactCurrentOwner,mt=Gt.ReactCurrentBatchConfig,ne=0,Ne=null,ke=null,je=0,et=0,ir=_n(0),Ce=0,wi=null,Bn=0,fo=0,au=0,ei=null,Ke=null,uu=0,gr=1/0,Ft=null,Fs=!1,ta=null,mn=null,qi=!1,un=null,Us=0,ti=0,na=null,hs=-1,ps=0;function He(){return ne&6?xe():hs!==-1?hs:hs=xe()}function yn(e){return e.mode&1?ne&2&&je!==0?je&-je:xg.transition!==null?(ps===0&&(ps=_d()),ps):(e=oe,e!==0||(e=window.event,e=e===void 0?16:Ad(e.type)),e):1}function Pt(e,t,n,r){if(50<ti)throw ti=0,na=null,Error(I(185));Ni(e,n,r),(!(ne&2)||e!==Ne)&&(e===Ne&&(!(ne&2)&&(fo|=n),Ce===4&&ln(e,je)),Xe(e,r),n===1&&ne===0&&!(t.mode&1)&&(gr=xe()+500,lo&&Cn()))}function Xe(e,t){var n=e.callbackNode;xy(e,t);var r=Cs(e,e===Ne?je:0);if(r===0)n!==null&&fc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&fc(n),t===1)e.tag===0?Sg(rf.bind(null,e)):Jd(rf.bind(null,e)),yg(function(){!(ne&6)&&Cn()}),n=null;else{switch(Cd(r)){case 1:n=Ra;break;case 4:n=kd;break;case 16:n=_s;break;case 536870912:n=Ed;break;default:n=_s}n=Qh(n,Fh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fh(e,t){if(hs=-1,ps=0,ne&6)throw Error(I(327));var n=e.callbackNode;if(cr()&&e.callbackNode!==n)return null;var r=Cs(e,e===Ne?je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Hs(e,r);else{t=r;var i=ne;ne|=2;var s=Hh();(Ne!==e||je!==t)&&(Ft=null,gr=xe()+500,Rn(e,t));do try{Fg();break}catch(l){Uh(e,l)}while(!0);Qa(),Bs.current=s,ne=i,ke!==null?t=0:(Ne=null,je=0,t=Ce)}if(t!==0){if(t===2&&(i=Tl(e),i!==0&&(r=i,t=ra(e,i))),t===1)throw n=wi,Rn(e,0),ln(e,r),Xe(e,xe()),n;if(t===6)ln(e,r);else{if(i=e.current.alternate,!(r&30)&&!zg(i)&&(t=Hs(e,r),t===2&&(s=Tl(e),s!==0&&(r=s,t=ra(e,s))),t===1))throw n=wi,Rn(e,0),ln(e,r),Xe(e,xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:jn(e,Ke,Ft);break;case 3:if(ln(e,r),(r&130023424)===r&&(t=uu+500-xe(),10<t)){if(Cs(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){He(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=bl(jn.bind(null,e,Ke,Ft),t);break}jn(e,Ke,Ft);break;case 4:if(ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ct(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$g(r/1960))-r,10<r){e.timeoutHandle=bl(jn.bind(null,e,Ke,Ft),r);break}jn(e,Ke,Ft);break;case 5:jn(e,Ke,Ft);break;default:throw Error(I(329))}}}return Xe(e,xe()),e.callbackNode===n?Fh.bind(null,e):null}function ra(e,t){var n=ei;return e.current.memoizedState.isDehydrated&&(Rn(e,t).flags|=256),e=Hs(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&ia(t)),e}function ia(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function zg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(e,t){for(t&=~au,t&=~fo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ct(t),r=1<<n;e[n]=-1,t&=~r}}function rf(e){if(ne&6)throw Error(I(327));cr();var t=Cs(e,0);if(!(t&1))return Xe(e,xe()),null;var n=Hs(e,t);if(e.tag!==0&&n===2){var r=Tl(e);r!==0&&(t=r,n=ra(e,r))}if(n===1)throw n=wi,Rn(e,0),ln(e,t),Xe(e,xe()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jn(e,Ke,Ft),Xe(e,xe()),null}function cu(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(gr=xe()+500,lo&&Cn())}}function Fn(e){un!==null&&un.tag===0&&!(ne&6)&&cr();var t=ne;ne|=1;var n=mt.transition,r=oe;try{if(mt.transition=null,oe=1,e)return e()}finally{oe=r,mt.transition=n,ne=t,!(ne&6)&&Cn()}}function fu(){et=ir.current,he(ir)}function Rn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mg(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Wa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&js();break;case 3:mr(),he(qe),he($e),eu();break;case 5:Ga(r);break;case 4:mr();break;case 13:he(ye);break;case 19:he(ye);break;case 10:qa(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Ne=e,ke=e=gn(e.current,null),je=et=t,Ce=0,wi=null,au=fo=Bn=0,Ke=ei=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mn=null}return e}function Uh(e,t){do{var n=ke;try{if(Qa(),cs.current=zs,$s){for(var r=ge.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$s=!1}if(zn=0,Pe=_e=ge=null,Zr=!1,yi=0,lu.current=null,n===null||n.return===null){Ce=1,wi=t,ke=null;break}e:{var s=e,o=n.return,l=n,a=t;if(t=je,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Vc(o);if(g!==null){g.flags&=-257,Wc(g,o,l,s,t),g.mode&1&&Hc(s,u,t),t=g,a=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(a),t.updateQueue=x}else v.add(a);break e}else{if(!(t&1)){Hc(s,u,t),du();break e}a=Error(I(426))}}else if(pe&&l.mode&1){var j=Vc(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Wc(j,o,l,s,t),Ya(yr(a,l));break e}}s=a=yr(a,l),Ce!==4&&(Ce=2),ei===null?ei=[s]:ei.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=Ch(s,a,t);bc(s,m);break e;case 1:l=a;var h=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(mn===null||!mn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=Ph(s,l,t);bc(s,E);break e}}s=s.return}while(s!==null)}Wh(n)}catch(S){t=S,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function Hh(){var e=Bs.current;return Bs.current=zs,e===null?zs:e}function du(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Ne===null||!(Bn&268435455)&&!(fo&268435455)||ln(Ne,je)}function Hs(e,t){var n=ne;ne|=2;var r=Hh();(Ne!==e||je!==t)&&(Ft=null,Rn(e,t));do try{Bg();break}catch(i){Uh(e,i)}while(!0);if(Qa(),ne=n,Bs.current=r,ke!==null)throw Error(I(261));return Ne=null,je=0,Ce}function Bg(){for(;ke!==null;)Vh(ke)}function Fg(){for(;ke!==null&&!dy();)Vh(ke)}function Vh(e){var t=Kh(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?Wh(e):ke=t,lu.current=null}function Wh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Dg(n,t),n!==null){n.flags&=32767,ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,ke=null;return}}else if(n=Mg(n,t,et),n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ce===0&&(Ce=5)}function jn(e,t,n){var r=oe,i=mt.transition;try{mt.transition=null,oe=1,Ug(e,t,n,r)}finally{mt.transition=i,oe=r}return null}function Ug(e,t,n,r){do cr();while(un!==null);if(ne&6)throw Error(I(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ky(e,s),e===Ne&&(ke=Ne=null,je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qi||(qi=!0,Qh(_s,function(){return cr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mt.transition,mt.transition=null;var o=oe;oe=1;var l=ne;ne|=4,lu.current=null,Lg(e,n),zh(n,e),ag(Rl),Ps=!!Dl,Rl=Dl=null,e.current=n,bg(n),hy(),ne=l,oe=o,mt.transition=s}else e.current=n;if(qi&&(qi=!1,un=e,Us=i),s=e.pendingLanes,s===0&&(mn=null),yy(n.stateNode),Xe(e,xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fs)throw Fs=!1,e=ta,ta=null,e;return Us&1&&e.tag!==0&&cr(),s=e.pendingLanes,s&1?e===na?ti++:(ti=0,na=e):ti=0,Cn(),null}function cr(){if(un!==null){var e=Cd(Us),t=mt.transition,n=oe;try{if(mt.transition=null,oe=16>e?16:e,un===null)var r=!1;else{if(e=un,un=null,Us=0,ne&6)throw Error(I(331));var i=ne;for(ne|=4,z=e.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(z=u;z!==null;){var c=z;switch(c.tag){case 0:case 11:case 15:Gr(8,c,s)}var f=c.child;if(f!==null)f.return=c,z=f;else for(;z!==null;){c=z;var d=c.sibling,g=c.return;if(Lh(c),c===u){z=null;break}if(d!==null){d.return=g,z=d;break}z=g}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var j=x.sibling;x.sibling=null,x=j}while(x!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gr(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,z=m;break e}z=s.return}}var h=e.current;for(z=h;z!==null;){o=z;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,z=y;else e:for(o=h;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:co(9,l)}}catch(S){Se(l,l.return,S)}if(l===o){z=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,z=E;break e}z=l.return}}if(ne=i,Cn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(no,e)}catch{}r=!0}return r}finally{oe=n,mt.transition=t}}return!1}function sf(e,t,n){t=yr(n,t),t=Ch(e,t,1),e=pn(e,t,1),t=He(),e!==null&&(Ni(e,1,t),Xe(e,t))}function Se(e,t,n){if(e.tag===3)sf(e,e,n);else for(;t!==null;){if(t.tag===3){sf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=yr(n,e),e=Ph(t,e,1),t=pn(t,e,1),e=He(),t!==null&&(Ni(t,1,e),Xe(t,e));break}}t=t.return}}function Hg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&n,Ne===e&&(je&n)===n&&(Ce===4||Ce===3&&(je&130023424)===je&&500>xe()-uu?Rn(e,0):au|=n),Xe(e,t)}function Yh(e,t){t===0&&(e.mode&1?(t=zi,zi<<=1,!(zi&130023424)&&(zi=4194304)):t=1);var n=He();e=Jt(e,t),e!==null&&(Ni(e,t,n),Xe(e,n))}function Vg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yh(e,n)}function Wg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),Yh(e,n)}var Kh;Kh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||qe.current)Qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qe=!1,Ig(e,t,n);Qe=!!(e.flags&131072)}else Qe=!1,pe&&t.flags&1048576&&Xd(t,Ms,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ds(e,t),e=t.pendingProps;var i=dr(t,$e.current);ur(t,n),i=nu(null,t,r,e,i,n);var s=ru();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(s=!0,As(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xa(t),i.updater=uo,t.stateNode=i,i._reactInternals=t,Vl(t,r,e,n),t=Kl(null,t,r,!0,s,n)):(t.tag=0,pe&&s&&Va(t),Fe(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ds(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Kg(r),e=St(r,e),i){case 0:t=Yl(null,t,r,e,n);break e;case 1:t=Qc(null,t,r,e,n);break e;case 11:t=Yc(null,t,r,e,n);break e;case 14:t=Kc(null,t,r,St(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:St(r,i),Yl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:St(r,i),Qc(e,t,r,i,n);case 3:e:{if(jh(t),e===null)throw Error(I(387));r=t.pendingProps,s=t.memoizedState,i=s.element,rh(e,t),Ls(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=yr(Error(I(423)),t),t=qc(e,t,r,n,i);break e}else if(r!==i){i=yr(Error(I(424)),t),t=qc(e,t,r,n,i);break e}else for(tt=hn(t.stateNode.containerInfo.firstChild),rt=t,pe=!0,Et=null,n=th(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===i){t=Xt(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return ih(t),e===null&&Fl(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Ll(r,i)?o=null:s!==null&&Ll(r,s)&&(t.flags|=32),Th(e,t),Fe(e,t,o,n),t.child;case 6:return e===null&&Fl(t),null;case 13:return Ah(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:St(r,i),Yc(e,t,r,i,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ce(Ds,r._currentValue),r._currentValue=o,s!==null)if(Nt(s.value,o)){if(s.children===i.children&&!qe.current){t=Xt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Yt(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ul(s.return,n,t),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(I(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ul(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Fe(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ur(t,n),i=yt(i),r=r(i),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,i=St(r,t.pendingProps),i=St(r.type,i),Kc(e,t,r,i,n);case 15:return Nh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:St(r,i),ds(e,t),t.tag=1,Je(r)?(e=!0,As(t)):e=!1,ur(t,n),_h(t,r,i),Vl(t,r,i,n),Kl(null,t,r,!0,e,n);case 19:return Ih(e,t,n);case 22:return Oh(e,t,n)}throw Error(I(156,t.tag))};function Qh(e,t){return xd(e,t)}function Yg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,n,r){return new Yg(e,t,n,r)}function hu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kg(e){if(typeof e=="function")return hu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ia)return 11;if(e===Ma)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ms(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")hu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Qn:return Ln(n.children,i,s,t);case Aa:o=8,i|=8;break;case pl:return e=pt(12,n,t,i|2),e.elementType=pl,e.lanes=s,e;case ml:return e=pt(13,n,t,i),e.elementType=ml,e.lanes=s,e;case yl:return e=pt(19,n,t,i),e.elementType=yl,e.lanes=s,e;case id:return ho(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nd:o=10;break e;case rd:o=9;break e;case Ia:o=11;break e;case Ma:o=14;break e;case rn:o=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=pt(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Ln(e,t,n,r){return e=pt(7,e,r,t),e.lanes=n,e}function ho(e,t,n,r){return e=pt(22,e,r,t),e.elementType=id,e.lanes=n,e.stateNode={isHidden:!1},e}function el(e,t,n){return e=pt(6,e,null,t),e.lanes=n,e}function tl(e,t,n){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qg(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pu(e,t,n,r,i,s,o,l,a){return e=new Qg(e,t,n,l,a),t===1?(t=1,s===!0&&(t|=8)):t=0,s=pt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xa(s),e}function qg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function qh(e){if(!e)return Sn;e=e._reactInternals;e:{if(Vn(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(Je(n))return qd(e,n,t)}return t}function Jh(e,t,n,r,i,s,o,l,a){return e=pu(n,r,!0,e,i,s,o,l,a),e.context=qh(null),n=e.current,r=He(),i=yn(n),s=Yt(r,i),s.callback=t??null,pn(n,s,i),e.current.lanes=i,Ni(e,i,r),Xe(e,r),e}function po(e,t,n,r){var i=t.current,s=He(),o=yn(i);return n=qh(n),t.context===null?t.context=n:t.pendingContext=n,t=Yt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(i,t,o),e!==null&&(Pt(e,i,o,s),us(e,i,o)),o}function Vs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function of(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mu(e,t){of(e,t),(e=e.alternate)&&of(e,t)}function Jg(){return null}var Xh=typeof reportError=="function"?reportError:function(e){console.error(e)};function yu(e){this._internalRoot=e}mo.prototype.render=yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));po(e,t,null,null)};mo.prototype.unmount=yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){po(null,e,null,null)}),t[qt]=null}};function mo(e){this._internalRoot=e}mo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Od();e={blockedOn:null,target:e,priority:t};for(var n=0;n<on.length&&t!==0&&t<on[n].priority;n++);on.splice(n,0,e),n===0&&jd(e)}};function gu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lf(){}function Xg(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Vs(o);s.call(u)}}var o=Jh(t,r,e,0,null,!1,!1,"",lf);return e._reactRootContainer=o,e[qt]=o.current,fi(e.nodeType===8?e.parentNode:e),Fn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Vs(a);l.call(u)}}var a=pu(e,0,!1,null,null,!1,!1,"",lf);return e._reactRootContainer=a,e[qt]=a.current,fi(e.nodeType===8?e.parentNode:e),Fn(function(){po(t,a,n,r)}),a}function go(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=Vs(o);l.call(a)}}po(t,o,e,i)}else o=Xg(n,t,e,i,r);return Vs(o)}Pd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ur(t.pendingLanes);n!==0&&(La(t,n|1),Xe(t,xe()),!(ne&6)&&(gr=xe()+500,Cn()))}break;case 13:Fn(function(){var r=Jt(e,1);if(r!==null){var i=He();Pt(r,e,1,i)}}),mu(e,1)}};ba=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var n=He();Pt(t,e,134217728,n)}mu(e,134217728)}};Nd=function(e){if(e.tag===13){var t=yn(e),n=Jt(e,t);if(n!==null){var r=He();Pt(n,e,t,r)}mu(e,t)}};Od=function(){return oe};Td=function(e,t){var n=oe;try{return oe=e,t()}finally{oe=n}};Pl=function(e,t,n){switch(t){case"input":if(wl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oo(r);if(!i)throw Error(I(90));od(r),wl(r,i)}}}break;case"textarea":ad(e,n);break;case"select":t=n.value,t!=null&&sr(e,!!n.multiple,t,!1)}};md=cu;yd=Fn;var Zg={usingClientEntryPoint:!1,Events:[Ti,Zn,oo,hd,pd,cu]},Lr={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gg={bundleType:Lr.bundleType,version:Lr.version,rendererPackageName:Lr.rendererPackageName,rendererConfig:Lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wd(e),e===null?null:e.stateNode},findFiberByHostInstance:Lr.findFiberByHostInstance||Jg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{no=Ji.inject(Gg),Dt=Ji}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zg;at.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gu(t))throw Error(I(200));return qg(e,t,null,n)};at.createRoot=function(e,t){if(!gu(e))throw Error(I(299));var n=!1,r="",i=Xh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=pu(e,1,!1,null,null,n,!1,r,i),e[qt]=t.current,fi(e.nodeType===8?e.parentNode:e),new yu(t)};at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=wd(t),e=e===null?null:e.stateNode,e};at.flushSync=function(e){return Fn(e)};at.hydrate=function(e,t,n){if(!yo(t))throw Error(I(200));return go(null,e,t,!0,n)};at.hydrateRoot=function(e,t,n){if(!gu(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Xh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Jh(t,null,e,1,n??null,i,!1,s,o),e[qt]=t.current,fi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new mo(t)};at.render=function(e,t,n){if(!yo(t))throw Error(I(200));return go(null,e,t,!1,n)};at.unmountComponentAtNode=function(e){if(!yo(e))throw Error(I(40));return e._reactRootContainer?(Fn(function(){go(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1};at.unstable_batchedUpdates=cu;at.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!yo(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return go(e,t,n,!1,r)};at.version="18.3.1-next-f1338f8080-20240426";function Zh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zh)}catch(e){console.error(e)}}Zh(),Zf.exports=at;var ev=Zf.exports,Gh,af=ev;Gh=af.createRoot,af.hydrateRoot;let tv="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nv=(e=21)=>{let t="",n=e|0;for(;n--;)t+=tv[Math.random()*64|0];return t};function _t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function vr(e){return!!e&&!!e[ot]}function Un(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===cv}(e)||Array.isArray(e)||!!e[yf]||!!(!((t=e.constructor)===null||t===void 0)&&t[yf])||vu(e)||wu(e))}function Si(e,t,n){n===void 0&&(n=!1),Er(e)===0?(n?Object.keys:_u)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Er(e){var t=e[ot];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:vu(e)?2:wu(e)?3:0}function sa(e,t){return Er(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rv(e,t){return Er(e)===2?e.get(t):e[t]}function ep(e,t,n){var r=Er(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function iv(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function vu(e){return av&&e instanceof Map}function wu(e){return uv&&e instanceof Set}function An(e){return e.o||e.t}function Su(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=fv(e);delete t[ot];for(var n=_u(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function xu(e,t){return t===void 0&&(t=!1),ku(e)||vr(e)||!Un(e)||(Er(e)>1&&(e.set=e.add=e.clear=e.delete=sv),Object.freeze(e),t&&Si(e,function(n,r){return xu(r,!0)},!0)),e}function sv(){_t(2)}function ku(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Lt(e){var t=dv[e];return t||_t(18,e),t}function uf(){return xi}function nl(e,t){t&&(Lt("Patches"),e.u=[],e.s=[],e.v=t)}function Ws(e){oa(e),e.p.forEach(ov),e.p=null}function oa(e){e===xi&&(xi=e.l)}function cf(e){return xi={p:[],l:xi,h:e,m:!0,_:0}}function ov(e){var t=e[ot];t.i===0||t.i===1?t.j():t.g=!0}function rl(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Lt("ES5").S(t,e,r),r?(n[ot].P&&(Ws(t),_t(4)),Un(e)&&(e=Ys(t,e),t.l||Ks(t,e)),t.u&&Lt("Patches").M(n[ot].t,e,t.u,t.s)):e=Ys(t,n,[]),Ws(t),t.u&&t.v(t.u,t.s),e!==tp?e:void 0}function Ys(e,t,n){if(ku(t))return t;var r=t[ot];if(!r)return Si(t,function(l,a){return ff(e,r,t,l,a,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Ks(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Su(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Si(s,function(l,a){return ff(e,r,i,l,a,n,o)}),Ks(e,i,!1),n&&e.u&&Lt("Patches").N(r,n,e.u,e.s)}return r.o}function ff(e,t,n,r,i,s,o){if(vr(i)){var l=Ys(e,i,s&&t&&t.i!==3&&!sa(t.R,r)?s.concat(r):void 0);if(ep(n,r,l),!vr(l))return;e.m=!1}else o&&n.add(i);if(Un(i)&&!ku(i)){if(!e.h.D&&e._<1)return;Ys(e,i),t&&t.A.l||Ks(e,i)}}function Ks(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&xu(t,n)}function il(e,t){var n=e[ot];return(n?An(n):e)[t]}function df(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function la(e){e.P||(e.P=!0,e.l&&la(e.l))}function sl(e){e.o||(e.o=Su(e.t))}function aa(e,t,n){var r=vu(t)?Lt("MapSet").F(t,n):wu(t)?Lt("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),l={i:o?1:0,A:s?s.A:uf(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},a=l,u=ua;o&&(a=[l],u=Vr);var c=Proxy.revocable(a,u),f=c.revoke,d=c.proxy;return l.k=d,l.j=f,d}(t,n):Lt("ES5").J(t,n);return(n?n.A:uf()).p.push(r),r}function lv(e){return vr(e)||_t(22,e),function t(n){if(!Un(n))return n;var r,i=n[ot],s=Er(n);if(i){if(!i.P&&(i.i<4||!Lt("ES5").K(i)))return i.t;i.I=!0,r=hf(n,s),i.I=!1}else r=hf(n,s);return Si(r,function(o,l){i&&rv(i.t,o)===l||ep(r,o,t(l))}),s===3?new Set(r):r}(e)}function hf(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Su(e)}var pf,xi,Eu=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",av=typeof Map<"u",uv=typeof Set<"u",mf=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",tp=Eu?Symbol.for("immer-nothing"):((pf={})["immer-nothing"]=!0,pf),yf=Eu?Symbol.for("immer-draftable"):"__$immer_draftable",ot=Eu?Symbol.for("immer-state"):"__$immer_state",cv=""+Object.prototype.constructor,_u=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,fv=Object.getOwnPropertyDescriptors||function(e){var t={};return _u(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},dv={},ua={get:function(e,t){if(t===ot)return e;var n=An(e);if(!sa(n,t))return function(i,s,o){var l,a=df(s,o);return a?"value"in a?a.value:(l=a.get)===null||l===void 0?void 0:l.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Un(r)?r:r===il(e.t,t)?(sl(e),e.o[t]=aa(e.A.h,r,e)):r},has:function(e,t){return t in An(e)},ownKeys:function(e){return Reflect.ownKeys(An(e))},set:function(e,t,n){var r=df(An(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=il(An(e),t),s=i==null?void 0:i[ot];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(iv(n,i)&&(n!==void 0||sa(e.t,t)))return!0;sl(e),la(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return il(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,sl(e),la(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=An(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){_t(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){_t(12)}},Vr={};Si(ua,function(e,t){Vr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Vr.deleteProperty=function(e,t){return Vr.set.call(this,e,t,void 0)},Vr.set=function(e,t,n){return ua.set.call(this,e[0],t,n,e[0])};var hv=function(){function e(n){var r=this;this.O=mf,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var l=s;s=i;var a=r;return function(x){var j=this;x===void 0&&(x=l);for(var m=arguments.length,h=Array(m>1?m-1:0),y=1;y<m;y++)h[y-1]=arguments[y];return a.produce(x,function(E){var S;return(S=s).call.apply(S,[j,E].concat(h))})}}var u;if(typeof s!="function"&&_t(6),o!==void 0&&typeof o!="function"&&_t(7),Un(i)){var c=cf(r),f=aa(r,i,void 0),d=!0;try{u=s(f),d=!1}finally{d?Ws(c):oa(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(x){return nl(c,o),rl(x,c)},function(x){throw Ws(c),x}):(nl(c,o),rl(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===tp&&(u=void 0),r.D&&xu(u,!0),o){var g=[],v=[];Lt("Patches").M(i,u,g,v),o(g,v)}return u}_t(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(f))})};var o,l,a=r.produce(i,s,function(u,c){o=u,l=c});return typeof Promise<"u"&&a instanceof Promise?a.then(function(u){return[u,o,l]}):[a,o,l]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Un(n)||_t(8),vr(n)&&(n=lv(n));var r=cf(this),i=aa(this,n,void 0);return i[ot].C=!0,oa(r),i},t.finishDraft=function(n,r){var i=n&&n[ot],s=i.A;return nl(s,r),rl(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!mf&&_t(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Lt("Patches").$;return vr(n)?o(n,r):this.produce(n,function(l){return o(l,r)})},e}(),lt=new hv,pv=lt.produce;lt.produceWithPatches.bind(lt);lt.setAutoFreeze.bind(lt);lt.setUseProxies.bind(lt);lt.applyPatches.bind(lt);lt.createDraft.bind(lt);lt.finishDraft.bind(lt);class mv{constructor(t){const n=yv();this.c=1,this.s0=n(" "),this.s1=n(" "),this.s2=n(" "),this.s0-=n(t),this.s0<0&&(this.s0+=1),this.s1-=n(t),this.s1<0&&(this.s1+=1),this.s2-=n(t),this.s2<0&&(this.s2+=1)}next(){const t=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=t-(this.c=Math.trunc(t))}}function yv(){let e=4022871197;return function(n){const r=n.toString();for(let i=0;i<r.length;i++){e+=r.charCodeAt(i);let s=.02519603282416938*e;e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=s*4294967296}return(e>>>0)*23283064365386963e-26}}function gf(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function np(e,t){const n=new mv(e),r=n.next.bind(n);return t&&gf(t,n),r.state=()=>gf(n,{}),r}class vf{constructor(t){this.state=t||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const t=this.state,n=t.prngstate?"":t.seed,r=np(n,t.prngstate),i=r();return this.state={...t,prngstate:r.state()},i}api(){const t=this._random.bind(this),n={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},r={};for(const s in n){const o=n[s];r[s]=l=>l===void 0?Math.floor(t()*o)+1:Array.from({length:l}).map(()=>Math.floor(t()*o)+1)}function i(s=6,o){return o===void 0?Math.floor(t()*s)+1:Array.from({length:o}).map(()=>Math.floor(t()*s)+1)}return{...r,Die:i,Number:()=>t(),Shuffle:s=>{const o=[...s];let l=s.length,a=0;const u=Array.from({length:l});for(;l;){const c=Math.trunc(l*t());u[a++]=o[c],o[c]=o[--l]}return u},_private:this}}}const gv={name:"random",noClient:({api:e})=>e._private.isUsed(),flush:({api:e})=>e._private.getState(),api:({data:e})=>new vf(e).api(),setup:({game:e})=>{let{seed:t}=e;return t===void 0&&(t=vf.seed()),{seed:t}},playerView:()=>{}};var vv=Function.prototype,wv=vv.toString;wv.call(Object);const ki="MAKE_MOVE",vo="GAME_EVENT",wo="REDO",Cu="RESET",Pu="SYNC",So="UNDO",Nu="UPDATE",Ou="PATCH",rp="PLUGIN",xo="STRIP_TRANSIENTS",ip=(e,t,n,r)=>({type:ki,payload:{type:e,args:t,playerID:n,credentials:r}}),ni=(e,t,n,r)=>({type:vo,payload:{type:e,args:t,playerID:n,credentials:r}}),sp=(e,t,n,r)=>({type:vo,payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),op=e=>({type:Pu,state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),lp=(e,t,n,r)=>({type:Ou,prevStateID:e,stateID:t,patch:n,deltalog:r,clientOnly:!0}),ap=(e,t)=>({type:Nu,state:e,deltalog:t,clientOnly:!0}),up=e=>({type:Cu,state:e,clientOnly:!0}),cp=(e,t)=>({type:So,payload:{type:null,args:null,playerID:e,credentials:t}}),fp=(e,t)=>({type:wo,payload:{type:null,args:null,playerID:e,credentials:t}}),Sv=(e,t,n,r)=>({type:rp,payload:{type:e,args:t,playerID:n,credentials:r}}),dp=()=>({type:xo});var xv=Object.freeze({__proto__:null,makeMove:ip,gameEvent:ni,automaticGameEvent:sp,sync:op,patch:lp,update:ap,reset:up,undo:cp,redo:fp,plugin:Sv,stripTransients:dp});const xn="INVALID_MOVE",kv={name:"plugin-immer",fnWrap:e=>(t,...n)=>{let r=!1;const i=pv(t.G,s=>{const o=e({...t,G:s},...n);if(o===xn){r=!0;return}return o});return r?xn:i}};var Re;(function(e){e.MOVE="MOVE",e.GAME_ON_END="GAME_ON_END",e.PHASE_ON_BEGIN="PHASE_ON_BEGIN",e.PHASE_ON_END="PHASE_ON_END",e.TURN_ON_BEGIN="TURN_ON_BEGIN",e.TURN_ON_MOVE="TURN_ON_MOVE",e.TURN_ON_END="TURN_ON_END"})(Re||(Re={}));var Ut;(function(e){e.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",e.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",e.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,e.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",e.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",e.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",e.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Ut||(Ut={}));class Ev{constructor(t,n,r){this.flow=t,this.playerID=r,this.dispatch=[],this.initialTurn=n.turn,this.updateTurnContext(n,void 0),this.maxEndedTurnsPerAction=n.numPlayers*100}api(){const t={_private:this};for(const n of this.flow.eventNames)t[n]=(...r)=>{this.dispatch.push({type:n,args:r,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return t}isUsed(){return this.dispatch.length>0}updateTurnContext(t,n){this.currentPhase=t.phase,this.currentTurn=t.turn,this.currentMethod=n}unsetCurrentMethod(){this.currentMethod=void 0}update(t){const n=t,r=({stack:i},s)=>({...n,plugins:{...n.plugins,events:{...n.plugins.events,data:{error:s+`
`+i}}}});e:for(let i=0;i<this.dispatch.length;i++){const s=this.dispatch[i],o=s.turn!==t.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return r(s.error,Ut.MaxTurnEndings);if(s.calledFrom===void 0)return r(s.error,Ut.CalledOutsideHook);if(t.ctx.gameover)break e;switch(s.type){case"endStage":case"setStage":case"setActivePlayers":{switch(s.calledFrom){case Re.TURN_ON_END:case Re.PHASE_ON_END:return r(s.error,Ut.StageEventInOnEnd);case Re.PHASE_ON_BEGIN:return r(s.error,Ut.StageEventInPhaseBegin);case Re.TURN_ON_BEGIN:if(s.type==="setActivePlayers")break;return r(s.error,Ut.StageEventInTurnBegin)}if(o)continue e;break}case"endTurn":{if(s.calledFrom===Re.TURN_ON_END||s.calledFrom===Re.PHASE_ON_END)return r(s.error,Ut.EndTurnInOnEnd);if(o)continue e;break}case"endPhase":case"setPhase":{if(s.calledFrom===Re.PHASE_ON_END)return r(s.error,Ut.PhaseEventInOnEnd);if(s.phase!==t.ctx.phase)continue e;break}}const a=sp(s.type,s.args,this.playerID);t=this.flow.processEvent(t,a)}return t}}const Tu={name:"events",noClient:({api:e})=>e._private.isUsed(),isInvalid:({data:e})=>e.error||!1,fnWrap:(e,t)=>(n,...r)=>{const i=n.events;i&&i._private.updateTurnContext(n.ctx,t);const s=e(n,...r);return i&&i._private.unsetCurrentMethod(),s},dangerouslyFlushRawState:({state:e,api:t})=>t._private.update(e),api:({game:e,ctx:t,playerID:n})=>new Ev(e.flow,t,n).api()},_v={name:"log",flush:()=>({}),api:({data:e})=>({setMetadata:t=>{e.metadata=t}}),setup:()=>({})},Cv={name:"plugin-serializable",fnWrap:e=>(t,...n)=>e(t,...n)},Pv=(...e)=>console.error(...e);function ie(e){Pv("ERROR:",e)}const ju=[kv,gv,_v,Cv],Ai=[...ju,Tu],Nv=(e,t,n)=>(n.game.plugins.filter(r=>r.action!==void 0).filter(r=>r.name===t.payload.type).forEach(r=>{const i=r.name,s=e.plugins[i]||{data:{}},o=r.action(s.data,t.payload);e={...e,plugins:{...e.plugins,[i]:{...s,data:o}}}}),e),wr=({plugins:e})=>Object.entries(e||{}).reduce((t,[n,{api:r}])=>(t[n]=r,t),{}),hp=(e,t,n)=>[...ju,...n,Tu].filter(r=>r.fnWrap!==void 0).reduce((r,{fnWrap:i})=>i(r,t),e),Ov=(e,t)=>([...Ai,...t.game.plugins].filter(n=>n.setup!==void 0).forEach(n=>{const r=n.name,i=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:i}}}}),e),ca=(e,t)=>([...Ai,...t.game.plugins].filter(n=>n.api!==void 0).forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}},s=n.api({G:e.G,ctx:e.ctx,data:i.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...i,api:s}}}}),e),Tv=(e,t)=>([...ju,...t.game.plugins,Tu].reverse().forEach(n=>{const r=n.name,i=e.plugins[r]||{data:{}};if(n.flush){const s=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data});e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}else if(n.dangerouslyFlushRawState){e=n.dangerouslyFlushRawState({state:e,game:t.game,api:i.api,data:i.data});const s=e.plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:s}}}}}),e),jv=(e,t)=>[...Ai,...t.game.plugins].filter(n=>n.noClient!==void 0).map(n=>{const r=n.name,i=e.plugins[r];return i?n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:i.api,data:i.data}):!1}).includes(!0),Av=(e,t)=>[...Ai,...t.game.plugins].filter(r=>r.isInvalid!==void 0).map(r=>{const{name:i}=r,s=e.plugins[i],o=r.isInvalid({G:e.G,ctx:e.ctx,game:t.game,data:s&&s.data});return o?{plugin:i,message:o}:!1}).find(r=>r)||!1,pp=(e,t)=>{const n=Tv(e,t),r=Av(n,t);if(!r)return[n];const{plugin:i,message:s}=r;return ie(`${i} plugin declared action invalid:
${s}`),[e,r]},mp=({G:e,ctx:t,plugins:n={}},{game:r,playerID:i})=>([...Ai,...r.plugins].forEach(({name:s,playerView:o})=>{if(!o)return;const{data:l}=n[s]||{data:{}},a=o({G:e,ctx:t,game:r,data:l,playerID:i});n={...n,[s]:{data:a}}}),n);function Qs(e,t=!1){e.moveLimit&&(t&&(e.minMoves=e.moveLimit),e.maxMoves=e.moveLimit,delete e.moveLimit)}function qs(e,t){let n={},r=[],i=null,s={},o={};if(Array.isArray(t)){const a={};t.forEach(u=>a[u]=Js.NULL),n=a}else{if(Qs(t),t.next&&(i=t.next),t.revert&&(r=[...e._prevActivePlayers,{activePlayers:e.activePlayers,_activePlayersMinMoves:e._activePlayersMinMoves,_activePlayersMaxMoves:e._activePlayersMaxMoves,_activePlayersNumMoves:e._activePlayersNumMoves}]),t.currentPlayer!==void 0&&Xi(n,s,o,e.currentPlayer,t.currentPlayer),t.others!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];u!==e.currentPlayer&&Xi(n,s,o,u,t.others)}if(t.all!==void 0)for(let a=0;a<e.playOrder.length;a++){const u=e.playOrder[a];Xi(n,s,o,u,t.all)}if(t.value)for(const a in t.value)Xi(n,s,o,a,t.value[a]);if(t.minMoves)for(const a in n)s[a]===void 0&&(s[a]=t.minMoves);if(t.maxMoves)for(const a in n)o[a]===void 0&&(o[a]=t.maxMoves)}Object.keys(n).length===0&&(n=null),Object.keys(s).length===0&&(s=null),Object.keys(o).length===0&&(o=null);const l={};for(const a in n)l[a]=0;return{...e,activePlayers:n,_activePlayersMinMoves:s,_activePlayersMaxMoves:o,_activePlayersNumMoves:l,_prevActivePlayers:r,_nextActivePlayers:i}}function Iv(e){let{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s,_nextActivePlayers:o}=e;if(t&&Object.keys(t).length===0)if(o)e=qs(e,o),{activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}=e;else if(s.length>0){const l=s.length-1;({activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i}=s[l]),s=s.slice(0,l)}else t=null,n=null,r=null;return{...e,activePlayers:t,_activePlayersMinMoves:n,_activePlayersMaxMoves:r,_activePlayersNumMoves:i,_prevActivePlayers:s}}function Xi(e,t,n,r,i){(typeof i!="object"||i===Js.NULL)&&(i={stage:i}),i.stage!==void 0&&(Qs(i),e[r]=i.stage,i.minMoves&&(t[r]=i.minMoves),i.maxMoves&&(n[r]=i.maxMoves))}function fa(e,t){return e[t]+""}function Mv(e,t){let{G:n,ctx:r}=e;const{numPlayers:i}=r,o={...wr(e),G:n,ctx:r},l=t.order;let a=[...Array.from({length:i})].map((d,g)=>g+"");l.playOrder!==void 0&&(a=l.playOrder(o));const u=l.first(o),c=typeof u;c!=="number"&&ie(`invalid value returned by turn.order.first  expected number got ${c} ${u}.`);const f=fa(a,u);return r={...r,currentPlayer:f,playOrderPos:u,playOrder:a},r=qs(r,t.activePlayers||{}),r}function Dv(e,t,n,r){const i=n.order;let{G:s,ctx:o}=e,l=o.playOrderPos,a=!1;if(r&&r!==!0)typeof r!="object"&&ie(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(u=>{switch(u){case"remove":t=fa(o.playOrder,l);break;case"next":l=o.playOrder.indexOf(r.next),t=r.next;break;default:ie(`invalid argument to endTurn: ${u}`)}});else{const c={...wr(e),G:s,ctx:o},f=i.next(c),d=typeof f;f!==void 0&&d!=="number"&&ie(`invalid value returned by turn.order.next  expected number or undefined got ${d} ${f}.`),f===void 0?a=!0:(l=f,t=fa(o.playOrder,l))}return o={...o,playOrderPos:l,currentPlayer:t},{endPhase:a,ctx:o}}const Rv={DEFAULT:{first:({ctx:e})=>e.turn===0?e.playOrderPos:(e.playOrderPos+1)%e.playOrder.length,next:({ctx:e})=>(e.playOrderPos+1)%e.playOrder.length}},Js={NULL:null};var Au={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.Pointer=Kt.escapeToken=Kt.unescapeToken=void 0;function yp(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Kt.unescapeToken=yp;function gp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Kt.escapeToken=gp;var Lv=function(){function e(t){t===void 0&&(t=[""]),this.tokens=t}return e.fromJSON=function(t){var n=t.split("/").map(yp);if(n[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(t));return new e(n)},e.prototype.toString=function(){return this.tokens.map(gp).join("/")},e.prototype.evaluate=function(t){for(var n=null,r="",i=t,s=1,o=this.tokens.length;s<o;s++)n=i,r=this.tokens[s],!(r=="__proto__"||r=="constructor"||r=="prototype")&&(i=(n||{})[r]);return{parent:n,key:r,value:i}},e.prototype.get=function(t){return this.evaluate(t).value},e.prototype.set=function(t,n){var r=this.evaluate(t);r.parent&&(r.parent[r.key]=n)},e.prototype.push=function(t){this.tokens.push(t)},e.prototype.add=function(t){var n=this.tokens.concat(String(t));return new e(n)},e}();Kt.Pointer=Lv;var we={},Iu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.objectType=e.hasOwnProperty=void 0,e.hasOwnProperty=Object.prototype.hasOwnProperty;function t(i){return i===void 0?"undefined":i===null?"null":Array.isArray(i)?"array":typeof i}e.objectType=t;function n(i){return i!=null&&typeof i=="object"}function r(i){if(!n(i))return i;if(i.constructor==Array){for(var s=i.length,o=new Array(s),l=0;l<s;l++)o[l]=r(i[l]);return o}if(i.constructor==Date){var a=new Date(+i);return a}var u={};for(var c in i)e.hasOwnProperty.call(i,c)&&(u[c]=r(i[c]));return u}e.clone=r})(Iu);var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.diffAny=Ue.diffObjects=Ue.diffArrays=Ue.intersection=Ue.subtract=Ue.isDestructive=void 0;var Ei=Iu;function bv(e){var t=e.op;return t==="remove"||t==="replace"||t==="copy"||t==="move"}Ue.isDestructive=bv;function da(e,t){var n={};for(var r in e)Ei.hasOwnProperty.call(e,r)&&e[r]!==void 0&&(n[r]=1);for(var i in t)Ei.hasOwnProperty.call(t,i)&&t[i]!==void 0&&delete n[i];return Object.keys(n)}Ue.subtract=da;function vp(e){for(var t=e.length,n={},r=0;r<t;r++){var i=e[r];for(var s in i)Ei.hasOwnProperty.call(i,s)&&i[s]!==void 0&&(n[s]=(n[s]||0)+1)}for(var s in n)n[s]<t&&delete n[s];return Object.keys(n)}Ue.intersection=vp;function $v(e){return e.op==="add"}function zv(e){return e.op==="remove"}function ol(e,t){return{operations:e.operations.concat(t),cost:e.cost+1}}function wp(e,t,n,r){r===void 0&&(r=ko);var i={"0,0":{operations:[],cost:0}};function s(c,f){var d="".concat(c,",").concat(f),g=i[d];if(g===void 0){if(c>0&&f>0&&!r(e[c-1],t[f-1],n.add(String(c-1))).length)g=s(c-1,f-1);else{var v=[];if(c>0){var x=s(c-1,f),j={op:"remove",index:c-1};v.push(ol(x,j))}if(f>0){var m=s(c,f-1),h={op:"add",index:c-1,value:t[f-1]};v.push(ol(m,h))}if(c>0&&f>0){var y=s(c-1,f-1),E={op:"replace",index:c-1,original:e[c-1],value:t[f-1]};v.push(ol(y,E))}var S=v.sort(function(P,k){return P.cost-k.cost})[0];g=S}i[d]=g}return g}var o=isNaN(e.length)||e.length<=0?0:e.length,l=isNaN(t.length)||t.length<=0?0:t.length,a=s(o,l).operations,u=a.reduce(function(c,f){var d=c[0],g=c[1];if($v(f)){var v=f.index+1+g,x=v<o+g?String(v):"-",j={op:f.op,path:n.add(x).toString(),value:f.value};return[d.concat(j),g+1]}else if(zv(f)){var j={op:f.op,path:n.add(String(f.index+g)).toString()};return[d.concat(j),g-1]}else{var m=n.add(String(f.index+g)),h=r(f.original,f.value,m);return[d.concat.apply(d,h),g]}},[[],0])[0];return u}Ue.diffArrays=wp;function Sp(e,t,n,r){r===void 0&&(r=ko);var i=[];return da(e,t).forEach(function(s){i.push({op:"remove",path:n.add(s).toString()})}),da(t,e).forEach(function(s){i.push({op:"add",path:n.add(s).toString(),value:t[s]})}),vp([e,t]).forEach(function(s){i.push.apply(i,r(e[s],t[s],n.add(s)))}),i}Ue.diffObjects=Sp;function ko(e,t,n,r){if(r===void 0&&(r=ko),e===t)return[];var i=(0,Ei.objectType)(e),s=(0,Ei.objectType)(t);return i=="array"&&s=="array"?wp(e,t,n,r):i=="object"&&s=="object"?Sp(e,t,n,r):[{op:"replace",path:n.toString(),value:t}]}Ue.diffAny=ko;var Mu=Yr&&Yr.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(we,"__esModule",{value:!0});we.apply=we.InvalidOperationError=we.test=we.copy=we.move=we.replace=we.remove=we.add=we.TestError=we.MissingError=void 0;var Zt=Kt,Du=Iu,Bv=Ue,bt=function(e){Mu(t,e);function t(n){var r=e.call(this,"Value required at path: ".concat(n))||this;return r.path=n,r.name="MissingError",r}return t}(Error);we.MissingError=bt;var xp=function(e){Mu(t,e);function t(n,r){var i=e.call(this,"Test failed: ".concat(n," != ").concat(r))||this;return i.actual=n,i.expected=r,i.name="TestError",i}return t}(Error);we.TestError=xp;function Ru(e,t,n){if(Array.isArray(e))if(t=="-")e.push(n);else{var r=parseInt(t,10);e.splice(r,0,n)}else e[t]=n}function kp(e,t){if(Array.isArray(e)){var n=parseInt(t,10);e.splice(n,1)}else delete e[t]}function Ep(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);return n.parent===void 0?new bt(t.path):(Ru(n.parent,n.key,(0,Du.clone)(t.value)),null)}we.add=Ep;function _p(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);return n.value===void 0?new bt(t.path):(kp(n.parent,n.key),null)}we.remove=_p;function Cp(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);if(n.parent===null)return new bt(t.path);if(Array.isArray(n.parent)){if(parseInt(n.key,10)>=n.parent.length)return new bt(t.path)}else if(n.value===void 0)return new bt(t.path);return n.parent[n.key]=(0,Du.clone)(t.value),null}we.replace=Cp;function Pp(e,t){var n=Zt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new bt(t.from);var r=Zt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new bt(t.path):(kp(n.parent,n.key),Ru(r.parent,r.key,n.value),null)}we.move=Pp;function Np(e,t){var n=Zt.Pointer.fromJSON(t.from).evaluate(e);if(n.value===void 0)return new bt(t.from);var r=Zt.Pointer.fromJSON(t.path).evaluate(e);return r.parent===void 0?new bt(t.path):(Ru(r.parent,r.key,(0,Du.clone)(n.value)),null)}we.copy=Np;function Op(e,t){var n=Zt.Pointer.fromJSON(t.path).evaluate(e);return(0,Bv.diffAny)(n.value,t.value,new Zt.Pointer).length?new xp(n.value,t.value):null}we.test=Op;var Tp=function(e){Mu(t,e);function t(n){var r=e.call(this,"Invalid operation: ".concat(n.op))||this;return r.operation=n,r.name="InvalidOperationError",r}return t}(Error);we.InvalidOperationError=Tp;function Fv(e,t){switch(t.op){case"add":return Ep(e,t);case"remove":return _p(e,t);case"replace":return Cp(e,t);case"move":return Pp(e,t);case"copy":return Np(e,t);case"test":return Op(e,t)}return new Tp(t)}we.apply=Fv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createTests=e.createPatch=e.applyPatch=e.Pointer=void 0;var t=Kt;Object.defineProperty(e,"Pointer",{enumerable:!0,get:function(){return t.Pointer}});var n=we,r=Ue;function i(u,c){return c.map(function(f){return(0,n.apply)(u,f)})}e.applyPatch=i;function s(u){function c(f,d,g){var v=u(f,d,g);return Array.isArray(v)?v:(0,r.diffAny)(f,d,g,c)}return c}function o(u,c,f){var d=new t.Pointer;return(f?s(f):r.diffAny)(u,c,d)}e.createPatch=o;function l(u,c){var f=t.Pointer.fromJSON(c).evaluate(u);if(f!==void 0)return{op:"test",path:c,value:f.value}}function a(u,c){var f=new Array;return c.filter(r.isDestructive).forEach(function(d){var g=l(u,d.path);if(g&&f.push(g),"from"in d){var v=l(u,d.from);v&&f.push(v)}}),f}e.createTests=a})(Au);function Uv({moves:e,phases:t,endIf:n,onEnd:r,turn:i,events:s,plugins:o}){e===void 0&&(e={}),s===void 0&&(s={}),o===void 0&&(o=[]),t===void 0&&(t={}),n||(n=()=>{}),r||(r=({G:w})=>w),i||(i={});const l={...t};""in l&&ie("cannot specify phase with empty name"),l[""]={};const a={},u=new Set;let c=null;Object.keys(e).forEach(w=>u.add(w));const f=(w,_)=>{const O=hp(w,_,o);return A=>{const b=wr(A);return O({...b,G:A.G,ctx:A.ctx,playerID:A.playerID})}},d=w=>_=>{const O=wr(_);return w({...O,G:_.G,ctx:_.ctx})},g={onEnd:f(r,Re.GAME_ON_END),endIf:d(n)};for(const w in l){const _=l[w];if(_.start===!0&&(c=w),_.moves!==void 0)for(const O of Object.keys(_.moves))a[w+"."+O]=_.moves[O],u.add(O);_.endIf===void 0&&(_.endIf=()=>{}),_.onBegin===void 0&&(_.onBegin=({G:O})=>O),_.onEnd===void 0&&(_.onEnd=({G:O})=>O),_.turn===void 0&&(_.turn=i),_.turn.order===void 0&&(_.turn.order=Rv.DEFAULT),_.turn.onBegin===void 0&&(_.turn.onBegin=({G:O})=>O),_.turn.onEnd===void 0&&(_.turn.onEnd=({G:O})=>O),_.turn.endIf===void 0&&(_.turn.endIf=()=>!1),_.turn.onMove===void 0&&(_.turn.onMove=({G:O})=>O),_.turn.stages===void 0&&(_.turn.stages={}),Qs(_.turn,!0);for(const O in _.turn.stages){const b=_.turn.stages[O].moves||{};for(const $ of Object.keys(b)){const X=w+"."+O+"."+$;a[X]=b[$],u.add($)}}if(_.wrapped={onBegin:f(_.onBegin,Re.PHASE_ON_BEGIN),onEnd:f(_.onEnd,Re.PHASE_ON_END),endIf:d(_.endIf)},_.turn.wrapped={onMove:f(_.turn.onMove,Re.TURN_ON_MOVE),onBegin:f(_.turn.onBegin,Re.TURN_ON_BEGIN),onEnd:f(_.turn.onEnd,Re.TURN_ON_END),endIf:d(_.turn.endIf)},typeof _.next!="function"){const{next:O}=_;_.next=()=>O||null}_.wrapped.next=d(_.next)}function v(w){return w.phase?l[w.phase]:l[""]}function x(w){return w}function j(w,_){const O=new Set,A=new Set;for(let b=0;b<_.length;b++){const{fn:$,arg:X,...J}=_[b];if($===L){A.clear();const me=w.ctx.phase;if(O.has(me)){const ze={...w.ctx,phase:null};return{...w,ctx:ze}}O.add(me)}const re=[];if(w=$(w,{...J,arg:X,next:re}),$===R)break;const ee=N(w);if(ee){_.push({fn:R,arg:ee,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}const ue=T(w);if(ue){_.push({fn:L,arg:ue,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}if([x,P,k].includes($)){const me=C(w);if(me){_.push({fn:K,arg:me,turn:w.ctx.turn,phase:w.ctx.phase,automatic:!0});continue}}_.push(...re)}return w}function m(w,{next:_}){return _.push({fn:h}),w}function h(w,{next:_}){let{G:O,ctx:A}=w;return O=v(A).wrapped.onBegin(w),_.push({fn:y}),{...w,G:O,ctx:A}}function y(w,{currentPlayer:_}){let{ctx:O}=w;const A=v(O);_?(O={...O,currentPlayer:_},A.turn.activePlayers&&(O=qs(O,A.turn.activePlayers))):O=Mv(w,A.turn);const b=O.turn+1;O={...O,turn:b,numMoves:0,_prevActivePlayers:[]};const $=A.turn.wrapped.onBegin({...w,ctx:O});return{...w,G:$,ctx:O,_undo:[],_redo:[]}}function E(w,{arg:_,next:O,phase:A}){const b=v({phase:A});let{ctx:$}=w;if(_&&_.next)if(_.next in l)$={...$,phase:_.next};else return ie("invalid phase: "+_.next),w;else $={...$,phase:b.wrapped.next(w)||null};return w={...w,ctx:$},O.push({fn:h}),w}function S(w,{arg:_,currentPlayer:O,next:A}){let{G:b,ctx:$}=w;const X=v($),{endPhase:J,ctx:re}=Dv(w,O,X.turn,_);return $=re,w={...w,G:b,ctx:$},J?A.push({fn:L,turn:$.turn,phase:$.phase}):A.push({fn:y,currentPlayer:$.currentPlayer}),w}function P(w,{arg:_,playerID:O}){if((typeof _=="string"||_===Js.NULL)&&(_={stage:_}),typeof _!="object")return w;Qs(_);let{ctx:A}=w,{activePlayers:b,_activePlayersMinMoves:$,_activePlayersMaxMoves:X,_activePlayersNumMoves:J}=A;return _.stage!==void 0&&(b===null&&(b={}),b[O]=_.stage,J[O]=0,_.minMoves&&($===null&&($={}),$[O]=_.minMoves),_.maxMoves&&(X===null&&(X={}),X[O]=_.maxMoves)),A={...A,activePlayers:b,_activePlayersMinMoves:$,_activePlayersMaxMoves:X,_activePlayersNumMoves:J},{...w,ctx:A}}function k(w,{arg:_}){return{...w,ctx:qs(w.ctx,_)}}function N(w){return g.endIf(w)}function T(w){return v(w.ctx).wrapped.endIf(w)}function C(w){const _=v(w.ctx),O=w.ctx.numMoves||0;return _.turn.maxMoves&&O>=_.turn.maxMoves?!0:_.turn.wrapped.endIf(w)}function R(w,{arg:_,phase:O}){w=L(w,{}),_===void 0&&(_=!0),w={...w,ctx:{...w.ctx,gameover:_}};const A=g.onEnd(w);return{...w,G:A}}function L(w,{arg:_,next:O,turn:A,automatic:b}){w=K(w,{turn:A,force:!0,automatic:!0});const{phase:$,turn:X}=w.ctx;if(O&&O.push({fn:E,arg:_,phase:$}),$===null)return w;const re=v(w.ctx).wrapped.onEnd(w),ee={...w.ctx,phase:null},ue=ni("endPhase",_),{_stateID:me}=w,ze={action:ue,_stateID:me,turn:X,phase:$};b&&(ze.automatic=!0);const Ze=[...w.deltalog||[],ze];return{...w,G:re,ctx:ee,deltalog:Ze}}function K(w,{arg:_,next:O,turn:A,force:b,automatic:$,playerID:X}){if(A!==w.ctx.turn)return w;const{currentPlayer:J,numMoves:re,phase:ee,turn:ue}=w.ctx,me=v(w.ctx),ze=re||0;if(!b&&me.turn.minMoves&&ze<me.turn.minMoves)return`${me.turn.minMoves}`,w;const Ze=me.turn.wrapped.onEnd(w);O&&O.push({fn:S,arg:_,currentPlayer:J});let ct={...w.ctx,activePlayers:null};if(_&&_.remove){X=X||J;const vt=ct.playOrder.filter(Nr=>Nr!=X),Pr=ct.playOrderPos>vt.length-1?0:ct.playOrderPos;if(ct={...ct,playOrder:vt,playOrderPos:Pr},vt.length===0)return O.push({fn:L,turn:ue,phase:ee}),w}const Wn=ni("endTurn",_),{_stateID:Pn}=w,Bt={action:Wn,_stateID:Pn,turn:ue,phase:ee};$&&(Bt.automatic=!0);const tn=[...w.deltalog||[],Bt];return{...w,G:Ze,ctx:ct,deltalog:tn,_undo:[],_redo:[]}}function Y(w,{arg:_,next:O,automatic:A,playerID:b}){b=b||w.ctx.currentPlayer;let{ctx:$,_stateID:X}=w,{activePlayers:J,_activePlayersNumMoves:re,_activePlayersMinMoves:ee,_activePlayersMaxMoves:ue,phase:me,turn:ze}=$;const Ze=J!==null&&b in J,ct=v($);if(!_&&Ze){const vt=ct.turn.stages[J[b]];vt&&vt.next&&(_=vt.next)}if(O&&O.push({fn:P,arg:_,playerID:b}),!Ze)return w;const Wn=re[b]||0;if(ee&&ee[b]&&Wn<ee[b])return`${ee[b]}`,w;J={...J},delete J[b],ee&&(ee={...ee},delete ee[b]),ue&&(ue={...ue},delete ue[b]),$=Iv({...$,activePlayers:J,_activePlayersMinMoves:ee,_activePlayersMaxMoves:ue});const Bt={action:ni("endStage",_),_stateID:X,turn:ze,phase:me};A&&(Bt.automatic=!0);const tn=[...w.deltalog||[],Bt];return{...w,ctx:$,deltalog:tn}}function le(w,_,O){const A=v(w),b=A.turn.stages,{activePlayers:$}=w;if($&&$[O]!==void 0&&$[O]!==Js.NULL&&b[$[O]]!==void 0&&b[$[O]].moves!==void 0){const J=b[$[O]].moves;if(_ in J)return J[_]}else if(A.moves){if(_ in A.moves)return A.moves[_]}else if(_ in e)return e[_];return null}function Oe(w,_){const{playerID:O,type:A}=_,{currentPlayer:b,activePlayers:$,_activePlayersMaxMoves:X}=w.ctx,J=le(w.ctx,A,O),re=!J||typeof J=="function"||J.noLimit!==!0;let{numMoves:ee,_activePlayersNumMoves:ue}=w.ctx;re&&(O===b&&ee++,$&&ue[O]++),w={...w,ctx:{...w.ctx,numMoves:ee,_activePlayersNumMoves:ue}},X&&ue[O]>=X[O]&&(w=Y(w,{playerID:O,automatic:!0}));const ze=v(w.ctx).turn.wrapped.onMove({...w,playerID:O});return w={...w,G:ze},j(w,[{fn:x}])}function ae(w,_,O){return j(w,[{fn:Y,arg:O,playerID:_}])}function D(w,_){return j(w,[{fn:Y,playerID:_}])}function F(w,_,O){return j(w,[{fn:k,arg:O}])}function B(w,_,O){return j(w,[{fn:L,phase:w.ctx.phase,turn:w.ctx.turn,arg:{next:O}}])}function M(w){return j(w,[{fn:L,phase:w.ctx.phase,turn:w.ctx.turn}])}function U(w,_,O){return j(w,[{fn:K,turn:w.ctx.turn,phase:w.ctx.phase,arg:O}])}function V(w,_,O){return j(w,[{fn:K,turn:w.ctx.turn,phase:w.ctx.phase,force:!0,arg:O}])}function W(w,_,O){return j(w,[{fn:R,turn:w.ctx.turn,phase:w.ctx.phase,arg:O}])}const te={endStage:D,setStage:ae,endTurn:U,pass:V,endPhase:M,setPhase:B,endGame:W,setActivePlayers:F},q=[];s.endTurn!==!1&&q.push("endTurn"),s.pass!==!1&&q.push("pass"),s.endPhase!==!1&&q.push("endPhase"),s.setPhase!==!1&&q.push("setPhase"),s.endGame!==!1&&q.push("endGame"),s.setActivePlayers!==!1&&q.push("setActivePlayers"),s.endStage!==!1&&q.push("endStage"),s.setStage!==!1&&q.push("setStage");function se(w,_){const{type:O,playerID:A,args:b}=_.payload;return typeof te[O]!="function"?w:te[O](w,A,...Array.isArray(b)?b:[b])}function fe(w,_,O){return _.activePlayers?O in _.activePlayers:_.currentPlayer===O}return{ctx:w=>({numPlayers:w,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:w})].map((_,O)=>O+""),playOrderPos:0,phase:c,activePlayers:null}),init:w=>j(w,[{fn:m}]),isPlayerActive:fe,eventHandlers:te,eventNames:Object.keys(te),enabledEventNames:q,moveMap:a,moveNames:[...u.values()],processMove:Oe,processEvent:se,getMove:le}}function Hv(e){return e.processMove!==void 0}function Eo(e){if(Hv(e))return e;if(e.name===void 0&&(e.name="default"),e.deltaState===void 0&&(e.deltaState=!1),e.disableUndo===void 0&&(e.disableUndo=!1),e.setup===void 0&&(e.setup=()=>({})),e.moves===void 0&&(e.moves={}),e.playerView===void 0&&(e.playerView=({G:n})=>n),e.plugins===void 0&&(e.plugins=[]),e.plugins.forEach(n=>{if(n.name===void 0)throw new Error("Plugin missing name attribute");if(n.name.includes(" "))throw new Error(n.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Uv(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(n=>n.name),processMove:(n,r)=>{let i=t.getMove(n.ctx,r.type,r.playerID);if(jp(i)&&(i=i.move),i instanceof Function){const s=hp(i,Re.MOVE,e.plugins);let o=[];r.args!==void 0&&(o=Array.isArray(r.args)?r.args:[r.args]);const l={...wr(n),G:n.G,ctx:n.ctx,playerID:r.playerID};return s(l,...o)}return ie(`invalid move object: ${r.type}`),n.G}}}function jp(e){return e instanceof Object&&e.move!==void 0}var ha;(function(e){e.UnauthorizedAction="update/unauthorized_action",e.MatchNotFound="update/match_not_found",e.PatchFailed="update/patch_failed"})(ha||(ha={}));var De;(function(e){e.StaleStateId="action/stale_state_id",e.UnavailableMove="action/unavailable_move",e.InvalidMove="action/invalid_move",e.InactivePlayer="action/inactive_player",e.GameOver="action/gameover",e.ActionDisabled="action/action_disabled",e.ActionInvalid="action/action_invalid",e.PluginActionInvalid="action/plugin_invalid"})(De||(De={}));const Zi=e=>e.payload.playerID!==null&&e.payload.playerID!==void 0,Vv=(e,t,n)=>{function r(s){return s.undoable!==void 0}function i(s){return s instanceof Function}return r(n)?i(n.undoable)?n.undoable({G:e,ctx:t}):n.undoable:!0};function wf(e,t){if(t.game.disableUndo)return e;const n={G:e.G,ctx:e.ctx,plugins:e.plugins,playerID:t.action.payload.playerID||e.ctx.currentPlayer};return t.action.type==="MAKE_MOVE"&&(n.moveType=t.action.payload.type),{...e,_undo:[...e._undo,n],_redo:[]}}function ll(e,t,n){const r={action:t,_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase},i=e.plugins.log.data.metadata;return i!==void 0&&(r.metadata=i),typeof n=="object"&&n.redact===!0?r.redact=!0:typeof n=="object"&&n.redact instanceof Function&&(r.redact=n.redact({G:e.G,ctx:e.ctx})),{...e,deltalog:[r]}}function al(e,t,n){const[r,i]=pp(e,n);return i?[r,Be(t,De.PluginActionInvalid,i)]:[r]}function Ap(e){if(!e)return[null,void 0];const{transients:t,...n}=e;return[n,t]}function Be(e,t,n){return{...e,transients:{error:{type:t,payload:n}}}}const Ip=e=>t=>n=>{const r=t(n);switch(n.type){case xo:return r;default:{const[,i]=Ap(e.getState());return typeof i<"u"?(e.dispatch(dp()),{...r,transients:i}):r}}};function Lu({game:e,isClient:t}){return e=Eo(e),(n=null,r)=>{let[i]=Ap(n);switch(r.type){case xo:return i;case vo:{if(i={...i,deltalog:[]},t)return i;if(i.ctx.gameover!==void 0)return ie("cannot call event after game end"),Be(i,De.GameOver);if(Zi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return ie(`disallowed event: ${r.payload.type}`),Be(i,De.InactivePlayer);i=ca(i,{game:e,playerID:r.payload.playerID});let s=e.flow.processEvent(i,r),o;return[s,o]=al(s,i,{game:e}),o||(s=wf(s,{game:e,action:r}),{...s,_stateID:i._stateID+1})}case ki:{const s=i={...i,deltalog:[]},o=e.flow.getMove(i.ctx,r.payload.type,r.payload.playerID||i.ctx.currentPlayer);if(o===null)return ie(`disallowed move: ${r.payload.type}`),Be(i,De.UnavailableMove);if(t&&o.client===!1)return i;if(i.ctx.gameover!==void 0)return ie("cannot make move after game end"),Be(i,De.GameOver);if(Zi(r)&&!e.flow.isPlayerActive(i.G,i.ctx,r.payload.playerID))return ie(`disallowed move: ${r.payload.type}`),Be(i,De.InactivePlayer);i=ca(i,{game:e,playerID:r.payload.playerID});const l=e.processMove(i,r.payload);if(l===xn)return ie(`invalid move: ${r.payload.type} args: ${r.payload.args}`),Be(i,De.InvalidMove);const a={...i,G:l};if(t&&jv(a,{game:e}))return i;if(i=a,t){let c;return[i,c]=al(i,s,{game:e}),c||{...i,_stateID:i._stateID+1}}i=ll(i,r,o),i=e.flow.processMove(i,r.payload);let u;return[i,u]=al(i,s,{game:e}),u||(i=wf(i,{game:e,action:r}),{...i,_stateID:i._stateID+1})}case Cu:case Nu:case Pu:return r.state;case So:{if(i={...i,deltalog:[]},e.disableUndo)return ie("Undo is not enabled"),Be(i,De.ActionDisabled);const{G:s,ctx:o,_undo:l,_redo:a,_stateID:u}=i;if(l.length<2)return ie("No moves to undo"),Be(i,De.ActionInvalid);const c=l[l.length-1],f=l[l.length-2];if(Zi(r)&&r.payload.playerID!==c.playerID)return ie("Cannot undo other players' moves"),Be(i,De.ActionInvalid);if(c.moveType){const d=e.flow.getMove(f.ctx,c.moveType,c.playerID);if(!Vv(s,o,d))return ie("Move cannot be undone"),Be(i,De.ActionInvalid)}return i=ll(i,r),{...i,G:f.G,ctx:f.ctx,plugins:f.plugins,_stateID:u+1,_undo:l.slice(0,-1),_redo:[c,...a]}}case wo:{if(i={...i,deltalog:[]},e.disableUndo)return ie("Redo is not enabled"),Be(i,De.ActionDisabled);const{_undo:s,_redo:o,_stateID:l}=i;if(o.length===0)return ie("No moves to redo"),Be(i,De.ActionInvalid);const a=o[0];return Zi(r)&&r.payload.playerID!==a.playerID?(ie("Cannot redo other players' moves"),Be(i,De.ActionInvalid)):(i=ll(i,r),{...i,G:a.G,ctx:a.ctx,plugins:a.plugins,_stateID:l+1,_undo:[...s,a],_redo:o.slice(1)})}case rp:return Nv(i,r,{game:e});case Ou:{const s=i,o=JSON.parse(JSON.stringify(s)),l=Au.applyPatch(o,r.patch);return l.some(u=>u!==null)?(ie(`Patch ${JSON.stringify(r.patch)} apply failed`),Be(s,ha.PatchFailed,l)):o}default:return i}}}(function(e,t){if(e.setImmediate)return;var n=1,r={},i=!1,s=e.document,o;function l(h){typeof h!="function"&&(h=new Function(""+h));for(var y=new Array(arguments.length-1),E=0;E<y.length;E++)y[E]=arguments[E+1];var S={callback:h,args:y};return r[n]=S,o(n),n++}function a(h){delete r[h]}function u(h){var y=h.callback,E=h.args;switch(E.length){case 0:y();break;case 1:y(E[0]);break;case 2:y(E[0],E[1]);break;case 3:y(E[0],E[1],E[2]);break;default:y.apply(t,E);break}}function c(h){if(i)setTimeout(c,0,h);else{var y=r[h];if(y){i=!0;try{u(y)}finally{a(h),i=!1}}}}function f(){o=function(h){process.nextTick(function(){c(h)})}}function d(){if(e.postMessage&&!e.importScripts){var h=!0,y=e.onmessage;return e.onmessage=function(){h=!1},e.postMessage("","*"),e.onmessage=y,h}}function g(){var h="setImmediate$"+Math.random()+"$",y=function(E){E.source===e&&typeof E.data=="string"&&E.data.indexOf(h)===0&&c(+E.data.slice(h.length))};e.addEventListener?e.addEventListener("message",y,!1):e.attachEvent("onmessage",y),o=function(E){e.postMessage(h+E,"*")}}function v(){var h=new MessageChannel;h.port1.onmessage=function(y){var E=y.data;c(E)},o=function(y){h.port2.postMessage(y)}}function x(){var h=s.documentElement;o=function(y){var E=s.createElement("script");E.onreadystatechange=function(){c(y),E.onreadystatechange=null,h.removeChild(E),E=null},h.appendChild(E)}}function j(){o=function(h){setTimeout(c,0,h)}}var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?f():d()?g():e.MessageChannel?v():s&&"onreadystatechange"in s.createElement("script")?x():j(),m.setImmediate=l,m.clearImmediate=a})(typeof self>"u"?Yr:self);class Wv{constructor({enumerate:t,seed:n}){this.enumerateFn=t,this.seed=n,this.iterationCounter=0,this._opts={}}addOpt({key:t,range:n,initial:r}){this._opts[t]={range:n,value:r}}getOpt(t){return this._opts[t].value}setOpt(t,n){t in this._opts&&(this._opts[t].value=n)}opts(){return this._opts}enumerate(t,n,r){return this.enumerateFn(t,n,r).map(s=>{if("payload"in s)return s;if("move"in s)return ip(s.move,s.args,r);if("event"in s)return ni(s.event,s.args,r)})}random(t){let n;if(this.seed!==void 0){const r=this.prngstate?"":this.seed,i=np(r,this.prngstate);n=i(),this.prngstate=i.state()}else n=Math.random();if(t)if(Array.isArray(t)){const r=Math.floor(n*t.length);return t[r]}else return Math.floor(n*t);return n}}const Yv=25;class ys extends Wv{constructor({enumerate:t,seed:n,objectives:r,game:i,iterations:s,playoutDepth:o,iterationCallback:l}){super({enumerate:t,seed:n}),r===void 0&&(r=()=>({})),this.objectives=r,this.iterationCallback=l||(()=>{}),this.reducer=Lu({game:i}),this.iterations=s,this.playoutDepth=o,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof s=="number"?s:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof o=="number"?o:50,range:{min:1,max:100}})}createNode({state:t,parentAction:n,parent:r,playerID:i}){const{G:s,ctx:o}=t;let l=[],a=[];if(i!==void 0)l=this.enumerate(s,o,i),a=this.objectives(s,o,i);else if(o.activePlayers)for(const u in o.activePlayers)l.push(...this.enumerate(s,o,u)),a.push(this.objectives(s,o,u));else l=this.enumerate(s,o,o.currentPlayer),a=this.objectives(s,o,o.currentPlayer);return{state:t,parent:r,parentAction:n,actions:l,objectives:a,children:[],visits:0,value:0}}select(t){if(t.actions.length>0||t.children.length===0)return t;let n=null,r=0;for(const i of t.children){const s=i.visits+Number.EPSILON,o=i.value/s+Math.sqrt(2*Math.log(t.visits)/s);(n==null||o>r)&&(r=o,n=i)}return this.select(n)}expand(t){const n=t.actions;if(n.length===0||t.state.ctx.gameover!==void 0)return t;const r=this.random(n.length),i=n[r];t.actions.splice(r,1);const s=this.reducer(t.state,i),o=this.createNode({state:s,parentAction:i,parent:t});return t.children.push(o),o}playout({state:t}){let n=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(n=this.playoutDepth(t.G,t.ctx));for(let r=0;r<n&&t.ctx.gameover===void 0;r++){const{G:i,ctx:s}=t;let o=s.currentPlayer;s.activePlayers&&(o=Object.keys(s.activePlayers)[0]);const l=this.enumerate(i,s,o),a=this.objectives(i,s,o),u=Object.keys(a).reduce((d,g)=>{const v=a[g];return v.checker(i,s)?d+v.weight:d},0);if(u>0)return{score:u};if(!l||l.length===0)return;const c=this.random(l.length);t=this.reducer(t,l[c])}return t.ctx.gameover}backpropagate(t,n={}){t.visits++,n.score!==void 0&&(t.value+=n.score),n.draw===!0&&(t.value+=.5),t.parentAction&&n.winner===t.parentAction.payload.playerID&&t.value++,t.parent&&this.backpropagate(t.parent,n)}play(t,n){const r=this.createNode({state:t,playerID:n});let i=this.getOpt("iterations");typeof this.iterations=="function"&&(i=this.iterations(t.G,t.ctx));const s=()=>{let o=null;for(const u of r.children)(o==null||u.visits>o.visits)&&(o=u);return{action:o&&o.parentAction,metadata:r}};return new Promise(o=>{const l=()=>{for(let a=0;a<Yv&&this.iterationCounter<i;a++){const u=this.select(r),c=this.expand(u),f=this.playout(c);this.backpropagate(c,f),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:i,metadata:r})};if(this.iterationCounter=0,this.getOpt("async")){const a=()=>{this.iterationCounter<i?(l(),setImmediate(a)):o(s())};a()}else{for(;this.iterationCounter<i;)l();o(s())}})}}function _i(e){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_i(e)}function Kv(e,t){if(_i(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_i(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qv(e){var t=Kv(e,"string");return _i(t)=="symbol"?t:t+""}function qv(e,t,n){return(t=Qv(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sf(Object(n),!0).forEach(function(r){qv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ge(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var kf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ef=function(){return Math.random().toString(36).substring(7).split("").join(".")},_f={INIT:"@@redux/INIT"+Ef(),REPLACE:"@@redux/REPLACE"+Ef()};function Jv(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function bu(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ge(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ge(1));return n(bu)(e,t)}if(typeof e!="function")throw new Error(Ge(2));var i=e,s=t,o=[],l=o,a=!1;function u(){l===o&&(l=o.slice())}function c(){if(a)throw new Error(Ge(3));return s}function f(x){if(typeof x!="function")throw new Error(Ge(4));if(a)throw new Error(Ge(5));var j=!0;return u(),l.push(x),function(){if(j){if(a)throw new Error(Ge(6));j=!1,u();var h=l.indexOf(x);l.splice(h,1),o=null}}}function d(x){if(!Jv(x))throw new Error(Ge(7));if(typeof x.type>"u")throw new Error(Ge(8));if(a)throw new Error(Ge(9));try{a=!0,s=i(s,x)}finally{a=!1}for(var j=o=l,m=0;m<j.length;m++){var h=j[m];h()}return x}function g(x){if(typeof x!="function")throw new Error(Ge(10));i=x,d({type:_f.REPLACE})}function v(){var x,j=f;return x={subscribe:function(h){if(typeof h!="object"||h===null)throw new Error(Ge(11));function y(){h.next&&h.next(c())}y();var E=j(y);return{unsubscribe:E}}},x[kf]=function(){return this},x}return d({type:_f.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:g},r[kf]=v,r}function Mp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Dp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Ge(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},l=t.map(function(a){return a(o)});return s=Mp.apply(void 0,l)(i.dispatch),xf(xf({},i),{},{dispatch:s})}}}function Rp({game:e,numPlayers:t,setupData:n}){e=Eo(e),t||(t=2);const r=e.flow.ctx(t);let i={G:{},ctx:r,plugins:{}};i=Ov(i,{game:e}),i=ca(i,{game:e,playerID:void 0});const s=wr(i);i.G=e.setup({...s,ctx:i.ctx},n);let o={...i,_undo:[],_redo:[],_stateID:0};return o=e.flow.init(o),[o]=pp(o,{game:e}),e.disableUndo||(o._undo=[{G:o.G,ctx:o.ctx,plugins:o.plugins}]),o}let $u=class{constructor({transportDataCallback:t,gameName:n,playerID:r,matchID:i,credentials:s,numPlayers:o}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=t,this.gameName=n||"default",this.playerID=r||null,this.matchID=i||"default",this.credentials=s,this.numPlayers=o||2}subscribeToConnectionStatus(t){this.connectionStatusCallback=t}setConnectionStatus(t){this.isConnected=t,this.connectionStatusCallback()}notifyClient(t){this.transportDataCallback(t)}};class Xv extends $u{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Zv=e=>new Xv(e);class Gv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(t){this.clients.set(t,t),this.mountDebug(t),this.notifySubscribers()}unregister(t){if(this.clients.delete(t),this.currentClient===t){this.unmountDebug();for(const[n]of this.clients){if(this.debugPanel)break;this.mountDebug(n)}}this.notifySubscribers()}subscribe(t){const n=Symbol();return this.subscribers.set(n,t),t(this.getState()),()=>{this.subscribers.delete(n)}}switchPlayerID(t){if(this.currentClient.multiplayer){for(const[n]of this.clients)if(n.playerID===t&&n.debugOpt!==!1&&n.multiplayer===this.currentClient.multiplayer){this.switchToClient(n);return}}this.currentClient.updatePlayerID(t),this.notifySubscribers()}switchToClient(t){t!==this.currentClient&&(this.unmountDebug(),this.mountDebug(t),this.notifySubscribers())}notifySubscribers(){const t=this.getState();this.subscribers.forEach(n=>{n(t)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(t=>t.debugOpt!==!1)}mountDebug(t){if(t.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let n,r=document.body;t.debugOpt&&t.debugOpt!==!0&&(n=t.debugOpt.impl||n,r=t.debugOpt.target||r),n&&(this.currentClient=t,this.debugPanel=new n({target:r,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const e0=new Gv;function pa(e,t,n){return!n&&e==null&&(e=t.getState().ctx.currentPlayer),e}function zu(e,t,n,r,i,s){const o={};for(const l of t)o[l]=(...a)=>{const u=xv[e](l,a,pa(r,n,s),i);n.dispatch(u)};return o}const t0=zu.bind(null,"makeMove"),n0=zu.bind(null,"gameEvent"),r0=zu.bind(null,"plugin");class i0{constructor({game:t,debug:n,numPlayers:r,multiplayer:i,matchID:s,playerID:o,credentials:l,enhancer:a}){this.game=Eo(t),this.playerID=o,this.matchID=s||"default",this.credentials=l,this.multiplayer=i,this.debugOpt=n,this.manager=e0,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Lu({game:this.game,isClient:i!==void 0}),this.initialState=null,i||(this.initialState=Rp({game:this.game,numPlayers:r})),this.reset=()=>{this.store.dispatch(up(this.initialState))},this.undo=()=>{const g=cp(pa(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.redo=()=>{const g=fp(pa(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(g)},this.log=[];const d=Dp(Ip,()=>g=>v=>{const x=g(v);return this.notifySubscribers(),x},g=>v=>x=>{const j=g.getState(),m=v(x);return!("clientOnly"in x)&&x.type!==xo&&this.transport.sendAction(j,x),m},g=>v=>x=>{const j=v(x),m=g.getState();switch(x.type){case ki:case vo:case So:case wo:{const h=m.deltalog;this.log=[...this.log,...h];break}case Cu:{this.log=[];break}case Ou:case Nu:{let h=-1;this.log.length>0&&(h=this.log[this.log.length-1]._stateID);let y=x.deltalog||[];y=y.filter(E=>E._stateID>h),this.log=[...this.log,...y];break}case Pu:{this.initialState=x.initialState,this.log=x.log||[];break}}return j});a=a!==void 0?Mp(d,a):d,this.store=bu(this.reducer,this.initialState,a),i||(i=Zv),this.transport=i({transportDataCallback:g=>this.receiveTransportData(g),gameKey:t,game:this.game,matchID:s,playerID:o,credentials:l,gameName:this.game.name,numPlayers:r}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=g=>{this.transport.sendChatMessage(this.matchID,{id:nv(7),sender:this.playerID,payload:g})}}receiveMatchData(t){this.matchData=t,this.notifySubscribers()}receiveChatMessage(t){this.chatMessages=[...this.chatMessages,t],this.notifySubscribers()}receiveTransportData(t){const[n]=t.args;if(n===this.matchID)switch(t.type){case"sync":{const[,r]=t.args,i=op(r);this.receiveMatchData(r.filteredMetadata),this.store.dispatch(i);break}case"update":{const[,r,i]=t.args,s=this.store.getState();if(r._stateID>=s._stateID){const o=ap(r,i);this.store.dispatch(o)}break}case"patch":{const[,r,i,s,o]=t.args,l=this.store.getState()._stateID;if(r!==l)break;const a=lp(r,i,s,o);this.store.dispatch(a),this.store.getState()._stateID===l&&this.transport.requestSync();break}case"matchData":{const[,r]=t.args;this.receiveMatchData(r);break}case"chat":{const[,r]=t.args;this.receiveChatMessage(r);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(t=>t(this.getState()))}overrideGameState(t){this.gameStateOverride=t,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(t){const n=Object.keys(this.subscribers).length;return this.subscribers[n]=t,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&t(this.getState()),()=>{delete this.subscribers[n]}}getInitialState(){return this.initialState}getState(){let t=this.store.getState();if(this.gameStateOverride!==null&&(t=this.gameStateOverride),t===null)return t;let n=!0;const r=this.game.flow.isPlayerActive(t.G,t.ctx,this.playerID);return this.multiplayer&&!r&&(n=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!r&&(n=!1),t.ctx.gameover!==void 0&&(n=!1),this.multiplayer||(t={...t,G:this.game.playerView({G:t.G,ctx:t.ctx,playerID:this.playerID}),plugins:mp(t,this)}),{...t,log:this.log,isActive:n,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=t0(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=n0(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=r0(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(t){this.playerID=t,this.createDispatchers(),this.transport.updatePlayerID(t),this.notifySubscribers()}updateMatchID(t){this.matchID=t,this.createDispatchers(),this.transport.updateMatchID(t),this.notifySubscribers()}updateCredentials(t){this.credentials=t,this.createDispatchers(),this.transport.updateCredentials(t),this.notifySubscribers()}}function s0(e){return new i0(e)}const Lp=(e,t)=>{if(!e||typeof e!="string")throw new Error(`Expected ${t} string, got "${e}".`)},Nn=e=>Lp(e,"game name"),br=e=>Lp(e,"match ID"),$r=(e,t)=>{if(!e)throw new Error(`Expected body, got ${e}.`);for(const n in t){const r=t[n],i=Array.isArray(r)?r:[r],s=e[n];if(!i.includes(typeof s)){const o=i.join("|");throw new TypeError(`Expected body.${n} to be of type ${o}, got ${s}.`)}}};class o0 extends Error{constructor(t,n){super(t),this.details=n}}class l0{constructor({server:t=""}={}){this.server=t.replace(/\/$/,"")}async request(t,n){const r=await fetch(this.server+t,n);if(!r.ok){let i;try{i=await r.clone().json()}catch{try{i=await r.text()}catch(s){i=s.message}}throw new o0(`HTTP status ${r.status}`,i)}return r.json()}async post(t,n){let r={method:"post",body:JSON.stringify(n.body),headers:{"Content-Type":"application/json"}};return n.init&&(r={...r,...n.init,headers:{...r.headers,...n.init.headers}}),this.request(t,r)}async listGames(t){return this.request("/games",t)}async listMatches(t,n,r){Nn(t);let i="";if(n){const s=[],{isGameover:o,updatedBefore:l,updatedAfter:a}=n;o!==void 0&&s.push(`isGameover=${o}`),l&&s.push(`updatedBefore=${l}`),a&&s.push(`updatedAfter=${a}`),s.length>0&&(i="?"+s.join("&"))}return this.request(`/games/${t}${i}`,r)}async getMatch(t,n,r){return Nn(t),br(n),this.request(`/games/${t}/${n}`,r)}async createMatch(t,n,r){return Nn(t),$r(n,{numPlayers:"number"}),this.post(`/games/${t}/create`,{body:n,init:r})}async joinMatch(t,n,r,i){return Nn(t),br(n),$r(r,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${t}/${n}/join`,{body:r,init:i})}async leaveMatch(t,n,r,i){Nn(t),br(n),$r(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/leave`,{body:r,init:i})}async updatePlayer(t,n,r,i){Nn(t),br(n),$r(r,{playerID:"string",credentials:"string"}),await this.post(`/games/${t}/${n}/update`,{body:r,init:i})}async playAgain(t,n,r,i){return Nn(t),br(n),$r(r,{playerID:"string",credentials:"string"}),this.post(`/games/${t}/${n}/playAgain`,{body:r,init:i})}}var bp={exports:{}},a0="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",u0=a0,c0=u0;function $p(){}function zp(){}zp.resetWarningCache=$p;var f0=function(){function e(r,i,s,o,l,a){if(a!==c0){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:zp,resetWarningCache:$p};return n.PropTypes=n,n};bp.exports=f0();var d0=bp.exports;const At=Bf(d0);var en={},Bu={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */Bu.parse=y0;Bu.serialize=g0;var h0=decodeURIComponent,p0=encodeURIComponent,m0=/; */,Gi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function y0(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},i=e.split(m0),s=r.decode||h0,o=0;o<i.length;o++){var l=i[o],a=l.indexOf("=");if(!(a<0)){var u=l.substr(0,a).trim(),c=l.substr(++a,l.length).trim();c[0]=='"'&&(c=c.slice(1,-1)),n[u]==null&&(n[u]=v0(c,s))}}return n}function g0(e,t,n){var r=n||{},i=r.encode||p0;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!Gi.test(e))throw new TypeError("argument name is invalid");var s=i(t);if(s&&!Gi.test(s))throw new TypeError("argument val is invalid");var o=e+"="+s;if(r.maxAge!=null){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(l)}if(r.domain){if(!Gi.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Gi.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var a=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(a){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return o}function v0(e,t){try{return t(e)}catch{return e}}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Cf=Object.getOwnPropertySymbols,w0=Object.prototype.hasOwnProperty,S0=Object.prototype.propertyIsEnumerable;function x0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function k0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var E0=k0()?Object.assign:function(e,t){for(var n,r=x0(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)w0.call(n,o)&&(r[o]=n[o]);if(Cf){i=Cf(n);for(var l=0;l<i.length;l++)S0.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},_0={};Object.defineProperty(en,"__esModule",{value:!0});var C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};en.load=Hp;en.loadAll=Vp;en.select=Wp;en.save=Yp;en.remove=Kp;en.setRawCookie=Fu;en.plugToRequest=Qp;var P0=Bu,_r=Fp(P0),N0=E0,Bp=Fp(N0);function Fp(e){return e&&e.__esModule?e:{default:e}}var _o=typeof document>"u"||typeof process<"u"&&_0&&!1,nt={},kn=void 0;function Up(){return kn&&!kn.headersSent}function Hp(e,t){var n=_o?nt:_r.default.parse(document.cookie),r=n&&n[e];if(typeof t>"u"&&(t=!r||r[0]!=="{"&&r[0]!=="["),!t)try{r=JSON.parse(r)}catch{}return r}function Vp(e){var t=_o?nt:_r.default.parse(document.cookie),n=t;if(typeof e>"u"&&(e=!n||n[0]!=="{"&&n[0]!=="["),!e)try{n=JSON.parse(n)}catch{}return n}function Wp(e){var t=_o?nt:_r.default.parse(document.cookie);return t?e?Object.keys(t).reduce(function(n,r){if(!e.test(r))return n;var i={};return i[r]=t[r],(0,Bp.default)({},n,i)},{}):t:{}}function Yp(e,t,n){nt[e]=t,(typeof t>"u"?"undefined":C0(t))==="object"&&(nt[e]=JSON.stringify(t)),_o||(document.cookie=_r.default.serialize(e,nt[e],n)),Up()&&kn.cookie&&kn.cookie(e,t,n)}function Kp(e,t){delete nt[e],typeof t>"u"?t={}:typeof t=="string"?t={path:t}:t=(0,Bp.default)({},t),typeof document<"u"&&(t.expires=new Date(1970,1,1,0,0,1),t.maxAge=0,document.cookie=_r.default.serialize(e,"",t)),Up()&&kn.clearCookie&&kn.clearCookie(e,t)}function Fu(e){e?nt=_r.default.parse(e):nt={}}function Qp(e,t){return e.cookie?nt=e.cookie:e.cookies?nt=e.cookies:e.headers&&e.headers.cookie?Fu(e.headers.cookie):nt={},kn=t,function(){kn=null,nt={}}}var Pf=en.default={setRawCookie:Fu,load:Hp,loadAll:Vp,select:Wp,save:Yp,remove:Kp,plugToRequest:Qp},Xs;(function(e){e[e.SYNC=0]="SYNC",e[e.ASYNC=1]="ASYNC"})(Xs||(Xs={}));function On(e){return e.type()===Xs.SYNC}class O0{type(){return Xs.SYNC}connect(){}createMatch(t,n){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(t,n);console.error("The database connector does not implement a createMatch method.")}listMatches(t){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(t);console.error("The database connector does not implement a listMatches method.")}}const T0=({game:e,unlisted:t,setupData:n,numPlayers:r})=>{const i={gameName:e.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let s=0;s<r;s++)i.players[s]={id:s};return i},j0=({game:e,numPlayers:t,setupData:n,unlisted:r})=>{(!t||typeof t!="number")&&(t=2);const i=e.validateSetupData&&e.validateSetupData(n,t);if(i!==void 0)return{setupDataError:i};const s=T0({game:e,numPlayers:t,setupData:n,unlisted:r}),o=Rp({game:e,numPlayers:t,setupData:n});return{metadata:s,initialState:o}},Nf=e=>Object.values(e.players).map(t=>{const{credentials:n,...r}=t;return r}),A0=e=>{const{credentials:t,...n}=e.payload;return{...e,payload:n}};class I0{constructor(t,n,r,i){this.game=Eo(t),this.storageAPI=n,this.transportAPI=r,this.subscribeCallback=()=>{},this.auth=i}subscribe(t){this.subscribeCallback=t}async onUpdate(t,n,r,i){if(!t||!t.payload)return{error:"missing action or action payload"};let s;if(On(this.storageAPI)?{metadata:s}=this.storageAPI.fetch(r,{metadata:!0}):{metadata:s}=await this.storageAPI.fetch(r,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:i,credentials:t.payload.credentials,metadata:s}))return{error:"unauthorized action"};const o=A0(t),l=r;let a;if(On(this.storageAPI)?{state:a}=this.storageAPI.fetch(l,{state:!0}):{state:a}=await this.storageAPI.fetch(l,{state:!0}),a===void 0)return ie(`game not found, matchID=[${l}]`),{error:"game not found"};if(a.ctx.gameover!==void 0){ie(`game over - matchID=[${l}] - playerID=[${i}] - action[${o.payload.type}]`);return}const u=Lu({game:this.game}),c=Dp(Ip),f=bu(u,a,c);if(o.type==So||o.type==wo){const m=a.ctx.activePlayers!==null,h=a.ctx.currentPlayer===i;if(!m&&!h||m&&(a.ctx.activePlayers[i]===void 0||Object.keys(a.ctx.activePlayers).length>1)){ie(`playerID=[${i}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(a.G,a.ctx,i)){ie(`player not active - playerID=[${i}] - action[${o.payload.type}]`);return}const d=o.type==ki?this.game.flow.getMove(a.ctx,o.payload.type,i):null;if(o.type==ki&&!d){ie(`move not processed - canPlayerMakeMove=false - playerID=[${i}] - action[${o.payload.type}]`);return}if(a._stateID!==n&&!(d&&jp(d)&&d.ignoreStaleStateID)){ie(`invalid stateID, was=[${n}], expected=[${a._stateID}] - playerID=[${i}] - action[${o.payload.type}]`);return}const g=f.getState();f.dispatch(o),a=f.getState(),this.subscribeCallback({state:a,action:o,matchID:r}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[r,n,g,a]}):this.transportAPI.sendAll({type:"update",args:[r,a]});const{deltalog:v,...x}=a;let j;if(s&&(s.gameover===void 0||s.gameover===null)&&(j={...s,updatedAt:Date.now()},a.ctx.gameover!==void 0&&(j.gameover=a.ctx.gameover)),On(this.storageAPI))this.storageAPI.setState(l,x,v),j&&this.storageAPI.setMetadata(l,j);else{const m=[this.storageAPI.setState(l,x,v)];j&&m.push(this.storageAPI.setMetadata(l,j)),await Promise.all(m)}}async onSync(t,n,r,i=2){const s=t,o={state:!0,metadata:!0,log:!0,initialState:!0},l=On(this.storageAPI)?this.storageAPI.fetch(s,o):await this.storageAPI.fetch(s,o);let{state:a,initialState:u,log:c,metadata:f}=l;if(this.auth&&n!==void 0&&n!==null&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:f}))return{error:"unauthorized"};if(a===void 0){const v=j0({game:this.game,unlisted:!0,numPlayers:i,setupData:void 0});if("setupDataError"in v)return{error:"game requires setupData"};u=a=v.initialState,f=v.metadata,this.subscribeCallback({state:a,matchID:t}),On(this.storageAPI)?this.storageAPI.createMatch(s,{initialState:u,metadata:f}):await this.storageAPI.createMatch(s,{initialState:u,metadata:f})}const d=f?Nf(f):void 0,g={state:a,log:c,filteredMetadata:d,initialState:u};this.transportAPI.send({playerID:n,type:"sync",args:[t,g]})}async onConnectionChange(t,n,r,i){const s=t;if(n==null)return;let o;if(On(this.storageAPI)?{metadata:o}=this.storageAPI.fetch(s,{metadata:!0}):{metadata:o}=await this.storageAPI.fetch(s,{metadata:!0}),o===void 0)return ie(`metadata not found for matchID=[${s}]`),{error:"metadata not found"};if(o.players[n]===void 0)return ie(`Player not in the match, matchID=[${s}] playerID=[${n}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:n,credentials:r,metadata:o}))return{error:"unauthorized"};o.players[n].isConnected=i;const l=Nf(o);this.transportAPI.sendAll({type:"matchData",args:[t,l]}),On(this.storageAPI)?this.storageAPI.setMetadata(s,o):await this.storageAPI.setMetadata(s,o)}async onChatMessage(t,n,r){const i=t;if(this.auth){const{metadata:s}=await this.storageAPI.fetch(i,{metadata:!0});if(!(n&&typeof n.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:n.sender,credentials:r,metadata:s}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[t,n]})}}const es=(e,t,n)=>({...n,G:e.playerView({G:n.G,ctx:n.ctx,playerID:t}),plugins:mp(n,{playerID:t,game:e}),deltalog:void 0,_undo:[],_redo:[]}),M0=e=>(t,n)=>{switch(n.type){case"patch":{const[r,i,s,o]=n.args,l=ul(o.deltalog,t),a=es(e,t,o),u=o._stateID,c=es(e,t,s),f=Au.createPatch(c,a);return{type:"patch",args:[r,i,u,f,l]}}case"update":{const[r,i]=n.args,s=ul(i.deltalog,t),o=es(e,t,i);return{type:"update",args:[r,o,s]}}case"sync":{const[r,i]=n.args,s=es(e,t,i.state),o=ul(i.log,t),l={...i,state:s,log:o};return{type:"sync",args:[r,l]}}default:return n}};function ul(e,t){return e===void 0?e:e.map(n=>{if(t!==null&&+t==+n.action.payload.playerID||n.redact!==!0)return n;const r={...n.action.payload,args:null},i={...n,action:{...n.action,payload:r}},{redact:s,...o}=i;return o})}const zt=Object.create(null);zt.open="0";zt.close="1";zt.ping="2";zt.pong="3";zt.message="4";zt.upgrade="5";zt.noop="6";const gs=Object.create(null);Object.keys(zt).forEach(e=>{gs[zt[e]]=e});const ma={type:"error",data:"parser error"},qp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Jp=typeof ArrayBuffer=="function",Xp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Uu=({type:e,data:t},n,r)=>qp&&t instanceof Blob?n?r(t):Of(t,r):Jp&&(t instanceof ArrayBuffer||Xp(t))?n?r(t):Of(new Blob([t]),r):r(zt[e]+(t||"")),Of=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Tf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let cl;function D0(e,t){if(qp&&e.data instanceof Blob)return e.data.arrayBuffer().then(Tf).then(t);if(Jp&&(e.data instanceof ArrayBuffer||Xp(e.data)))return t(Tf(e.data));Uu(e,!1,n=>{cl||(cl=new TextEncoder),t(cl.encode(n))})}const jf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<jf.length;e++)Wr[jf.charCodeAt(e)]=e;const R0=e=>{let t=e.length*.75,n=e.length,r,i=0,s,o,l,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(r=0;r<n;r+=4)s=Wr[e.charCodeAt(r)],o=Wr[e.charCodeAt(r+1)],l=Wr[e.charCodeAt(r+2)],a=Wr[e.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|l>>2,c[i++]=(l&3)<<6|a&63;return u},L0=typeof ArrayBuffer=="function",Hu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Zp(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:b0(e.substring(1),t)}:gs[n]?e.length>1?{type:gs[n],data:e.substring(1)}:{type:gs[n]}:ma},b0=(e,t)=>{if(L0){const n=R0(e);return Zp(n,t)}else return{base64:!0,data:e}},Zp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Gp="",$0=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,o)=>{Uu(s,!1,l=>{r[o]=l,++i===n&&t(r.join(Gp))})})},z0=(e,t)=>{const n=e.split(Gp),r=[];for(let i=0;i<n.length;i++){const s=Hu(n[i],t);if(r.push(s),s.type==="error")break}return r};function B0(){return new TransformStream({transform(e,t){D0(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let fl;function ts(e){return e.reduce((t,n)=>t+n.length,0)}function ns(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function F0(e,t){fl||(fl=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(ts(n)<1)break;const a=ns(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(ts(n)<2)break;const a=ns(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(ts(n)<8)break;const a=ns(n,8),u=new DataView(a.buffer,a.byteOffset,a.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){l.enqueue(ma);break}i=c*Math.pow(2,32)+u.getUint32(4),r=3}else{if(ts(n)<i)break;const a=ns(n,i);l.enqueue(Hu(s?a:fl.decode(a),t)),r=0}if(i===0||i>e){l.enqueue(ma);break}}}})}const em=4;function Ee(e){if(e)return U0(e)}function U0(e){for(var t in Ee.prototype)e[t]=Ee.prototype[t];return e}Ee.prototype.on=Ee.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ee.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Ee.prototype.off=Ee.prototype.removeListener=Ee.prototype.removeAllListeners=Ee.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Ee.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};Ee.prototype.emitReserved=Ee.prototype.emit;Ee.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ee.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Co=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),ht=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),H0="arraybuffer";function tm(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const V0=ht.setTimeout,W0=ht.clearTimeout;function Po(e,t){t.useNativeTimers?(e.setTimeoutFn=V0.bind(ht),e.clearTimeoutFn=W0.bind(ht)):(e.setTimeoutFn=ht.setTimeout.bind(ht),e.clearTimeoutFn=ht.clearTimeout.bind(ht))}const Y0=1.33;function K0(e){return typeof e=="string"?Q0(e):Math.ceil((e.byteLength||e.size)*Y0)}function Q0(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function nm(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function q0(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function J0(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class X0 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Vu extends Ee{constructor(t){super(),this.writable=!1,Po(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new X0(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Hu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=q0(t);return n.length?"?"+n:""}}class Z0 extends Vu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};z0(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$0(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=nm()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let rm=!1;try{rm=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const G0=rm;function ew(){}class tw extends Z0{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class $t extends Ee{constructor(t,n,r){super(),this.createRequest=t,Po(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=tm(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=$t.requestsCount++,$t.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ew,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $t.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$t.requestsCount=0;$t.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Af);else if(typeof addEventListener=="function"){const e="onpagehide"in ht?"pagehide":"unload";addEventListener(e,Af,!1)}}function Af(){for(let e in $t.requests)$t.requests.hasOwnProperty(e)&&$t.requests[e].abort()}const nw=function(){const e=im({xdomain:!1});return e&&e.responseType!==null}();class rw extends tw{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=nw&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new $t(im,this.uri(),t)}}function im(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||G0))return new XMLHttpRequest}catch{}if(!t)try{return new ht[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const sm=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class iw extends Vu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=sm?{}:tm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Uu(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Co(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=nm()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const dl=ht.WebSocket||ht.MozWebSocket;class sw extends iw{createSocket(t,n,r){return sm?new dl(t,n,r):n?new dl(t,n):new dl(t)}doWrite(t,n){this.ws.send(n)}}class ow extends Vu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=F0(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=B0();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&Co(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const lw={websocket:sw,webtransport:ow,polling:rw},aw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,uw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ya(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=aw.exec(e||""),s={},o=14;for(;o--;)s[uw[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=cw(s,s.path),s.queryKey=fw(s,s.query),s}function cw(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function fw(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const ga=typeof addEventListener=="function"&&typeof removeEventListener=="function",vs=[];ga&&addEventListener("offline",()=>{vs.forEach(e=>e())},!1);class vn extends Ee{constructor(t,n){if(super(),this.binaryType=H0,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=ya(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=ya(n.host).host);Po(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=J0(this.opts.query)),ga&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=em,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&vn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",vn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=K0(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Co(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(vn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ga&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=vs.indexOf(this._offlineEventListener);r!==-1&&vs.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}vn.protocol=em;class dw extends vn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;vn.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;vn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,c(),n.close(),n=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=n.name,s(),this.emitReserved("upgradeError",d)};function l(){o("transport closed")}function a(){o("socket closed")}function u(f){n&&f.name!==n.name&&s()}const c=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",u)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let hw=class extends dw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>lw[i]).filter(i=>!!i)),super(t,r)}};function pw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=ya(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const mw=typeof ArrayBuffer=="function",yw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,om=Object.prototype.toString,gw=typeof Blob=="function"||typeof Blob<"u"&&om.call(Blob)==="[object BlobConstructor]",vw=typeof File=="function"||typeof File<"u"&&om.call(File)==="[object FileConstructor]";function Wu(e){return mw&&(e instanceof ArrayBuffer||yw(e))||gw&&e instanceof Blob||vw&&e instanceof File}function ws(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(ws(e[n]))return!0;return!1}if(Wu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ws(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&ws(e[n]))return!0;return!1}function ww(e){const t=[],n=e.data,r=e;return r.data=va(n,t),r.attachments=t.length,{packet:r,buffers:t}}function va(e,t){if(!e)return e;if(Wu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=va(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=va(e[r],t));return n}return e}function Sw(e,t){return e.data=wa(e.data,t),delete e.attachments,e}function wa(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=wa(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=wa(e[n],t));return e}const lm=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],xw=5;var Z;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Z||(Z={}));class kw{constructor(t){this.replacer=t}encode(t){return(t.type===Z.EVENT||t.type===Z.ACK)&&ws(t)?this.encodeAsBinary({type:t.type===Z.EVENT?Z.BINARY_EVENT:Z.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Z.BINARY_EVENT||t.type===Z.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=ww(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class Yu extends Ee{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Z.BINARY_EVENT;r||n.type===Z.BINARY_ACK?(n.type=r?Z.EVENT:Z.ACK,this.reconstructor=new Ew(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Wu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Z[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Z.BINARY_EVENT||r.type===Z.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(s,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(Yu.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Z.CONNECT:return Zs(n);case Z.DISCONNECT:return n===void 0;case Z.CONNECT_ERROR:return typeof n=="string"||Zs(n);case Z.EVENT:case Z.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&lm.indexOf(n[0])===-1);case Z.ACK:case Z.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ew{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Sw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function _w(e){return typeof e=="string"}const Cw=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function Pw(e){return e===void 0||Cw(e)}function Zs(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nw(e,t){switch(e){case Z.CONNECT:return t===void 0||Zs(t);case Z.DISCONNECT:return t===void 0;case Z.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&lm.indexOf(t[0])===-1);case Z.ACK:return Array.isArray(t);case Z.CONNECT_ERROR:return typeof t=="string"||Zs(t);default:return!1}}function Ow(e){return _w(e.nsp)&&Pw(e.id)&&Nw(e.type,e.data)}const Tw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Yu,Encoder:kw,get PacketType(){return Z},isPacketValid:Ow,protocol:xw},Symbol.toStringTag,{value:"Module"}));function kt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const jw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class am extends Ee{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[kt(t,"open",this.onopen.bind(this)),kt(t,"packet",this.onpacket.bind(this)),kt(t,"error",this.onerror.bind(this)),kt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(jw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Z.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const c=this.ids++,f=n.pop();this._registerAckCallback(c,f),o.id=c}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Z.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Z.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Z.EVENT:case Z.BINARY_EVENT:this.onevent(t);break;case Z.ACK:case Z.BINARY_ACK:this.onack(t);break;case Z.DISCONNECT:this.ondisconnect();break;case Z.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Z.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Cr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Cr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Cr.prototype.reset=function(){this.attempts=0};Cr.prototype.setMin=function(e){this.ms=e};Cr.prototype.setMax=function(e){this.max=e};Cr.prototype.setJitter=function(e){this.jitter=e};class Sa extends Ee{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Po(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Cr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||Tw;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new hw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=kt(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=kt(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(kt(t,"ping",this.onping.bind(this)),kt(t,"data",this.ondata.bind(this)),kt(t,"error",this.onerror.bind(this)),kt(t,"close",this.onclose.bind(this)),kt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Co(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new am(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const zr={};function Ss(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=pw(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=zr[i]&&s in zr[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return l?a=new Sa(r,t):(zr[i]||(zr[i]=new Sa(r,t)),a=zr[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Ss,{Manager:Sa,Socket:am,io:Ss,connect:Ss});class um extends O0{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(t,n){this.initial.set(t,n.initialState),this.setState(t,n.initialState),this.setMetadata(t,n.metadata)}setMetadata(t,n){this.metadata.set(t,n)}setState(t,n,r){if(r&&r.length>0){const i=this.log.get(t)||[];this.log.set(t,[...i,...r])}this.state.set(t,n)}fetch(t,n){const r={};return n.state&&(r.state=this.state.get(t)),n.metadata&&(r.metadata=this.metadata.get(t)),n.log&&(r.log=this.log.get(t)||[]),n.initialState&&(r.initialState=this.initial.get(t)),r}wipe(t){this.state.delete(t),this.metadata.delete(t)}listMatches(t){return[...this.metadata.entries()].filter(([,n])=>t?!(t.gameName!==void 0&&n.gameName!==t.gameName||t.where!==void 0&&(t.where.isGameover!==void 0&&n.gameover!==void 0!==t.where.isGameover||t.where.updatedBefore!==void 0&&n.updatedAt>=t.where.updatedBefore||t.where.updatedAfter!==void 0&&n.updatedAt<=t.where.updatedAfter)):!0).map(([n])=>n)}}class Aw extends Map{constructor(t){super(),this.key=t,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(r=>this.set(...r))}sync(){const t=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(t))}set(t,n){return super.set(t,n),this.sync(),this}delete(t){const n=super.delete(t);return this.sync(),n}}class Iw extends um{constructor(t="bgio"){super();const n=r=>new Aw(`${t}_${r}`);this.state=n("state"),this.initial=n("initial"),this.metadata=n("metadata"),this.log=n("log")}}function Mw(e,t){if(e.ctx.gameover!==void 0)return null;if(e.ctx.activePlayers){for(const n of Object.keys(t))if(n in e.ctx.activePlayers)return n}else if(e.ctx.currentPlayer in t)return e.ctx.currentPlayer;return null}class Dw extends I0{constructor({game:t,bots:n,storageKey:r,persist:i}){const s={},o={};if(t&&t.ai&&n)for(const f in n){const d=n[f];o[f]=new d({game:t,enumerate:t.ai.enumerate,seed:t.seed})}const l=({playerID:f,...d})=>{const g=s[f];g!==void 0&&g(a(f,d))},a=M0(t),u={send:l,sendAll:f=>{for(const d in s)l({playerID:d,...f})}},c=i?new Iw(r):new um;super(t,c,u),this.connect=(f,d)=>{s[f]=d},this.subscribe(({state:f,matchID:d})=>{if(!n)return;const g=Mw(f,o);g!==null&&setTimeout(async()=>{const v=await o[g].play(f,g);await this.onUpdate(v.action,f._stateID,d,v.action.payload.playerID)},100)})}}class Rw extends $u{constructor({master:t,...n}){super(n),this.master=t}sendChatMessage(t,n){const r=[t,n,this.credentials];this.master.onChatMessage(...r)}sendAction(t,n){this.master.onUpdate(n,t._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,t=>this.notifyClient(t)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(t){this.matchID=t,this.connect()}updatePlayerID(t){this.playerID=t,this.connect()}updateCredentials(t){this.credentials=t,this.connect()}}const If=new Map;function cm({bots:e,persist:t,storageKey:n}={}){return r=>{const{gameKey:i,game:s}=r;let o;const l=If.get(i);return l&&l.bots===e&&l.storageKey===n&&l.persist===t&&(o=l.master),o||(o=new Dw({game:s,bots:e,persist:t,storageKey:n}),If.set(i,{master:o,bots:e,persist:t,storageKey:n})),new Rw({master:o,...r})}}const Mf=Ss;class Lw extends $u{constructor({socket:t,socketOpts:n,server:r,...i}){super(i),this.server=r,this.socket=t,this.socketOpts=n}sendAction(t,n){const r=[n,t._stateID,this.matchID,this.playerID];this.socket.emit("update",...r)}sendChatMessage(t,n){const r=[t,n,this.credentials];this.socket.emit("chat",...r)}connect(){if(!this.socket)if(this.server){let t=this.server;t.search(/^https?:\/\//)==-1&&(t="http://"+this.server),t.slice(-1)!="/"&&(t=t+"/"),this.socket=Mf(t+this.gameName,this.socketOpts)}else this.socket=Mf("/"+this.gameName,this.socketOpts);this.socket.on("patch",(t,n,r,i,s)=>{this.notifyClient({type:"patch",args:[t,n,r,i,s]})}),this.socket.on("update",(t,n,r)=>{this.notifyClient({type:"update",args:[t,n,r]})}),this.socket.on("sync",(t,n)=>{this.notifyClient({type:"sync",args:[t,n]})}),this.socket.on("matchData",(t,n)=>{this.notifyClient({type:"matchData",args:[t,n]})}),this.socket.on("chat",(t,n)=>{this.notifyClient({type:"chat",args:[t,n]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const t=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...t)}}updateMatchID(t){this.matchID=t,this.requestSync()}updatePlayerID(t){this.playerID=t,this.requestSync()}updateCredentials(t){this.credentials=t,this.requestSync()}}function Df({server:e,socketOpts:t}={}){return n=>new Lw({server:e,socketOpts:t,...n})}function fm(e){var t;const{game:n,numPlayers:r,board:i,multiplayer:s,enhancer:o}=e;let{loading:l,debug:a}=e;return l===void 0&&(l=()=>H.createElement("div",{className:"bgio-loading"},"connecting...")),t=class extends H.Component{constructor(c){super(c),a===void 0&&(a=c.debug),this.client=s0({game:n,debug:a,numPlayers:r,multiplayer:s,matchID:c.matchID,playerID:c.playerID,credentials:c.credentials,enhancer:o})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(c){this.props.matchID!=c.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=c.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=c.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const c=this.client.getState();if(c===null)return H.createElement(l);let f=null;return i&&(f=H.createElement(i,{...c,...this.props,isMultiplayer:!!s,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),H.createElement("div",{className:"bgio-client"},f)}},t.propTypes={matchID:At.string,playerID:At.string,credentials:At.string,debug:At.any},t.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},t}class bw{constructor({server:t,gameComponents:n,playerName:r,playerCredentials:i}){this.client=new l0({server:t}),this.gameComponents=n,this.playerName=r||"Visitor",this.playerCredentials=i,this.matches=[]}async refresh(){try{this.matches=[];const t=await this.client.listGames();for(const n of t){if(!this._getGameComponents(n))continue;const{matches:r}=await this.client.listMatches(n);this.matches.push(...r)}}catch(t){throw new Error("failed to retrieve list of matches ("+t+")")}}_getMatchInstance(t){for(const n of this.matches)if(n.matchID===t)return n}_getGameComponents(t){for(const n of this.gameComponents)if(n.game.name===t)return n}_findPlayer(t){for(const n of this.matches)if(n.players.some(r=>r.name===t))return n}async join(t,n,r){try{let i=this._findPlayer(this.playerName);if(i)throw new Error("player has already joined "+i.matchID);if(i=this._getMatchInstance(n),!i)throw new Error("game instance "+n+" not found");const s=await this.client.joinMatch(t,n,{playerID:r,playerName:this.playerName});i.players[Number.parseInt(r)].name=this.playerName,this.playerCredentials=s.playerCredentials}catch(i){throw new Error("failed to join match "+n+" ("+i+")")}}async leave(t,n){try{const r=this._getMatchInstance(n);if(!r)throw new Error("match instance not found");for(const i of r.players)if(i.name===this.playerName){await this.client.leaveMatch(t,n,{playerID:i.id.toString(),credentials:this.playerCredentials}),delete i.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(r){throw new Error("failed to leave match "+n+" ("+r+")")}}async disconnect(){const t=this._findPlayer(this.playerName);t&&await this.leave(t.gameName,t.matchID),this.matches=[],this.playerName="Visitor"}async create(t,n){try{const r=this._getGameComponents(t);if(!r)throw new Error("game not found");if(n<r.game.minPlayers||n>r.game.maxPlayers)throw new Error("invalid number of players "+n);await this.client.createMatch(t,{numPlayers:n})}catch(r){throw new Error("failed to create match for "+t+" ("+r+")")}}}function $w(e){return new bw(e)}class dm extends H.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=t=>{t.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=t=>{const n=t.target.value.trim();this.setState({playerName:n,nameErrorMsg:n.length>0?"":"empty player name"})}}render(){return H.createElement("div",null,H.createElement("p",{className:"phase-title"},"Choose a player name:"),H.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),H.createElement("span",{className:"buttons"},H.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),H.createElement("br",null),H.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,H.createElement("br",null)))}}dm.defaultProps={playerName:""};class zw extends H.Component{constructor(){super(...arguments),this._createSeat=t=>t.name||"[free]",this._createButtonJoin=(t,n)=>H.createElement("button",{key:"button-join-"+t.matchID,onClick:()=>this.props.onClickJoin(t.gameName,t.matchID,""+n)},"Join"),this._createButtonLeave=t=>H.createElement("button",{key:"button-leave-"+t.matchID,onClick:()=>this.props.onClickLeave(t.gameName,t.matchID)},"Leave"),this._createButtonPlay=(t,n)=>H.createElement("button",{key:"button-play-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,playerID:""+n,numPlayers:t.players.length})},"Play"),this._createButtonSpectate=t=>H.createElement("button",{key:"button-spectate-"+t.matchID,onClick:()=>this.props.onClickPlay(t.gameName,{matchID:t.matchID,numPlayers:t.players.length})},"Spectate"),this._createInstanceButtons=t=>{const n=t.players.find(i=>i.name===this.props.playerName),r=t.players.find(i=>!i.name);return n&&r?this._createButtonLeave(t):r?this._createButtonJoin(t,r.id):n?H.createElement("div",null,[this._createButtonPlay(t,n.id),this._createButtonLeave(t)]):this._createButtonSpectate(t)}}render(){const t=this.props.match;let n="OPEN";return t.players.some(r=>!r.name)||(n="RUNNING"),H.createElement("tr",{key:"line-"+t.matchID},H.createElement("td",{key:"cell-name-"+t.matchID},t.gameName),H.createElement("td",{key:"cell-status-"+t.matchID},n),H.createElement("td",{key:"cell-seats-"+t.matchID},t.players.map(r=>this._createSeat(r)).join(", ")),H.createElement("td",{key:"cell-buttons-"+t.matchID},this._createInstanceButtons(t)))}}class Bw extends H.Component{constructor(t){super(t),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(n,r)=>H.createElement("option",{key:"name-option-"+r,value:r},n.game.name),this._createNumPlayersOption=n=>H.createElement("option",{key:"num-option-"+n,value:n},n),this._createNumPlayersRange=n=>Array.from({length:n.maxPlayers+1}).map((r,i)=>i).slice(n.minPlayers),this.onChangeNumPlayers=n=>{this.setState({numPlayers:Number.parseInt(n.target.value)})},this.onChangeSelectedGame=n=>{const r=Number.parseInt(n.target.value);this.setState({selectedGame:r,numPlayers:this.props.games[r].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const n of t.games){const r=n.game;r.minPlayers||(r.minPlayers=1),r.maxPlayers||(r.maxPlayers=4),console.assert(r.maxPlayers>=r.minPlayers)}this.state={selectedGame:0,numPlayers:t.games[0].game.minPlayers}}render(){return H.createElement("div",null,H.createElement("select",{value:this.state.selectedGame,onChange:t=>this.onChangeSelectedGame(t)},this.props.games.map((t,n)=>this._createGameNameOption(t,n))),H.createElement("span",null,"Players:"),H.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(t=>this._createNumPlayersOption(t))),H.createElement("span",{className:"buttons"},H.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Ye;(function(e){e.ENTER="enter",e.PLAY="play",e.LIST="list"})(Ye||(Ye={}));class hm extends H.Component{constructor(t){super(t),this.state={phase:Ye.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=n=>{const r=this.state.playerName;this.connection=$w({server:n.lobbyServer,gameComponents:n.gameComponents,playerName:r,playerCredentials:this.state.credentialStore[r]})},this._updateCredentials=(n,r)=>{this.setState(i=>{const s=Object.assign({},i.credentialStore);return s[n]=r,{credentialStore:s}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=n=>{this._startRefreshInterval(),this.setState({playerName:n,phase:Ye.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Ye.ENTER,errorMsg:""})},this._createMatch=async(n,r)=>{try{await this.connection.create(n,r),await this.connection.refresh(),this.setState({})}catch(i){this.setState({errorMsg:i.message})}},this._joinMatch=async(n,r,i)=>{try{await this.connection.join(n,r,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(s){this.setState({errorMsg:s.message})}},this._leaveMatch=async(n,r)=>{try{await this.connection.leave(n,r),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(i){this.setState({errorMsg:i.message})}},this._startMatch=(n,r)=>{const i=this.connection._getGameComponents(n);if(!i){this.setState({errorMsg:"game "+n+" not supported"});return}let s;if(r.numPlayers>1&&(s=this.props.gameServer?Df({server:this.props.gameServer}):Df()),r.numPlayers==1){const a=i.game.maxPlayers,u={};for(let c=1;c<a;c++)u[c+""]=ys;s=cm({bots:u})}const l={app:this.props.clientFactory({game:i.game,board:i.board,debug:this.props.debug,multiplayer:s}),matchID:r.matchID,playerID:r.numPlayers>1?r.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Ye.PLAY,runningMatch:l})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Ye.LIST,runningMatch:null})},this._getPhaseVisibility=n=>this.state.phase!==n?"hidden":"phase",this.renderMatches=(n,r)=>n.map(i=>{const{matchID:s,gameName:o,players:l}=i;return H.createElement(zw,{key:"instance-"+s,match:{matchID:s,gameName:o,players:Object.values(l)},playerName:r,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const t=Pf.load("lobbyState")||{};t.phase&&t.phase===Ye.PLAY&&(t.phase=Ye.LIST),t.phase&&t.phase!==Ye.ENTER&&this._startRefreshInterval(),this.setState({phase:t.phase||Ye.ENTER,playerName:t.playerName||"Visitor",credentialStore:t.credentialStore||{}})}componentDidUpdate(t,n){const r=this.state.playerName,i=this.state.credentialStore[r];if(n.phase!==this.state.phase||n.credentialStore[r]!==i||n.playerName!==r){this._createConnection(this.props),this._updateConnection();const s={phase:this.state.phase,playerName:r,credentialStore:this.state.credentialStore};Pf.save("lobbyState",s,{path:"/"})}t.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:t,renderer:n}=this.props,{errorMsg:r,playerName:i,phase:s,runningMatch:o}=this.state;return n?n({errorMsg:r,gameComponents:t,matches:this.connection.matches,phase:s,playerName:i,runningMatch:o,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):H.createElement("div",{id:"lobby-view",style:{padding:50}},H.createElement("div",{className:this._getPhaseVisibility(Ye.ENTER)},H.createElement(dm,{key:i,playerName:i,onEnter:this._enterLobby})),H.createElement("div",{className:this._getPhaseVisibility(Ye.LIST)},H.createElement("p",null,"Welcome, ",i),H.createElement("div",{className:"phase-title",id:"match-creation"},H.createElement("span",null,"Create a match:"),H.createElement(Bw,{games:t,createMatch:this._createMatch})),H.createElement("p",{className:"phase-title"},"Join a match:"),H.createElement("div",{id:"instances"},H.createElement("table",null,H.createElement("tbody",null,this.renderMatches(this.connection.matches,i))),H.createElement("span",{className:"error-msg"},r,H.createElement("br",null))),H.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),H.createElement("div",{className:this._getPhaseVisibility(Ye.PLAY)},o&&H.createElement(o.app,{matchID:o.matchID,playerID:o.playerID,credentials:o.credentials}),H.createElement("div",{className:"buttons",id:"match-exit"},H.createElement("button",{onClick:this._exitMatch},"Exit match"))),H.createElement("div",{className:"buttons",id:"lobby-exit"},H.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}}hm.propTypes={gameComponents:At.array.isRequired,lobbyServer:At.string,gameServer:At.string,debug:At.bool,clientFactory:At.func,refreshInterval:At.number};hm.defaultProps={debug:!1,clientFactory:fm,refreshInterval:2e3};const it=["Hearts","Diamonds","Clubs","Spades"],pm=40,mm=5,Fw=["","","","","",""],ym={deckType:52,nomenclature:!0,allowSwap:!0,northernStyle:!1,miceVariant:!1,ordenNachalniku:!1,medalsCount:!1,accumulateJobs:!1};function Uw(e,t){const n={};if(e.deckType===36)for(const r of it)n[r]=[{suit:r,value:1}];else for(const r of it){const i=Array.from({length:mm},(s,o)=>({suit:r,value:o+1}));n[r]=t.Shuffle(i)}return n}function gm(e,t,n){var s;const r={};let i=!1;if(!e)return console.error("revealJobs called with undefined jobPiles"),{jobs:r,isFamine:i};for(const o of it){const l=e[o];if(!l||l.length===0){r[o]=null;continue}if((n==null?void 0:n.deckType)===36)r[o]=l[0];else if(n!=null&&n.accumulateJobs&&((s=t==null?void 0:t[o])==null?void 0:s.length)>0){const c=l.pop(),f=t[o]||[];r[o]=[...f,c].filter(Boolean)}else r[o]=l.pop();const a=r[o],u=Array.isArray(a)?a:[a];for(const c of u)c&&c.suit==="Clubs"&&c.value===1&&(i=!0)}return{jobs:r,isFamine:i}}function rs(e,t){return t.deckType!==36||e<2||e>5}function vm(e,t,n,r,i){const s=[];for(const a of it)for(let u=6;u<=13;u++)s.push({suit:a,value:u});const o=new Set;for(const a of e){for(const u of a.hand||[])rs(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.revealed||[])rs(u.value,r)&&o.add(`${u.suit}-${u.value}`);for(const u of a.plot.hidden||[])rs(u.value,r)&&o.add(`${u.suit}-${u.value}`)}if(!r.ordenNachalniku)for(const a of Object.values(n||{}))for(const u of a)o.add(u);const l=s.filter(a=>rs(a.value,r)&&!o.has(`${a.suit}-${a.value}`));return i.Shuffle(l)}function wm(e,t,n=!1){e.length;const r=n?4:5;for(const i of e)i.hand=[];for(let i=0;i<r;i++)for(const s of e)t.length>0&&s.hand.push(t.pop())}function Hw(e,t,n){const r=e.players[t];if(n<0||n>=r.hand.length)return!1;const i=r.hand[n];if(e.currentTrick.length===0)return!0;const s=e.currentTrick[0][1].suit;return r.hand.some(l=>l.suit===s)?i.suit===s:!0}function Vw(e){if(e.currentTrick.length!==e.numPlayers)return null;const t=e.currentTrick[0][1].suit,n=e.currentTrick.filter(([,o])=>o.suit===e.trump),r=n.length>0?n:e.currentTrick.filter(([,o])=>o.suit===t);let i=null,s=-1;for(const[o,l]of r)l.value>s&&(s=l.value,i=o);return i}function Ww(e,t){e.lastWinner=t,e.lastTrick=[...e.currentTrick],e.currentTrick=[],e.trickCount++,e.lead=t;for(const n of e.players)n.brigadeLeader=!1;return e.players[t].brigadeLeader=!0,e.players[t].hasWonTrickThisYear=!0,e.players[t].medals++,t}function Yw(e){if(e.length===0)return!1;const t=e[0][1].suit;return e.every(([,n])=>n.suit===t)}function xa(e){return e.players.every(t=>t.hand.length===1)}function Sm(e,t,n){for(const[r,i]of Object.entries(t)){const[s,o]=r.split("-"),l=parseInt(o,10),a={suit:s,value:l};e.jobBuckets[i].push(a);let u=l;n.nomenclature&&s===e.trump&&l===11&&(u=0),e.workHours[i]+=u}for(const r of Object.keys(e.workHours))e.workHours[r]>=pm&&!e.claimedJobs.includes(r)&&Kw(e,r,n)}function Kw(e,t,n){if(e.claimedJobs.push(t),n.deckType===36&&n.ordenNachalniku){const r=[...e.jobBuckets[t]];if(r.length===0)return;const i=r.reduce((l,a)=>a.value<l.value?a:l),s=r.filter(l=>!(l.suit===i.suit&&l.value===i.value)).sort((l,a)=>l.value-a.value),o=e.players[e.lastWinner];o.plot.stacks||(o.plot.stacks=[]),o.plot.stacks.push({revealed:[i],hidden:s}),e.jobBuckets[t]=[]}else if(n.deckType!==36){const r=e.players[e.lastWinner],i=Array.isArray(e.revealedJobs[t])?e.revealedJobs[t]:[e.revealedJobs[t]];for(const s of i)r.plot.revealed.push(s);e.revealedJobs[t]=null,n.accumulateJobs&&(e.accumulatedJobCards[t]=[])}}function Qw(e){if(!Yw(e))return null;const t=e[0][1].suit,n={};for(const[,r]of e){const i=`${r.suit}-${r.value}`;n[i]=t}return n}function ka(e,t){e.trickHistory||(e.trickHistory=[]),e.trickHistory.push({type:"jobs",year:e.year,jobs:{...e.workHours}}),e.trickHistory.push({type:"requisition",year:e.year,requisitions:[]});for(const[n,r]of Object.entries(e.jobBuckets))e.workHours[n]>=pm||(t.miceVariant?qw(e,n,r,t):t.deckType===36?Jw(e,n,r,t):Xw(e,n,r,t))}function Ku(e,t,n){if(!n.nomenclature)return!1;for(const r of t)if(r.value===11&&r.suit===e.trump)return e.trickHistory[e.trickHistory.length-1].requisitions.push("   "),Gs(e,`${r.suit}-${r.value}`),!0;return!1}function Qu(e,t,n){return n.nomenclature?e.some(r=>r.value===12&&r.suit===t):!1}function qu(e,t,n){return n.nomenclature?e.some(r=>r.value===13&&r.suit===t):!1}function Gs(e,t){e.exiled[e.year]||(e.exiled[e.year]=[]),e.exiled[e.year].push(t)}function Ci(e){return`${{11:"J",12:"Q",13:"K"}[e.value]||e.value} of ${e.suit}`}function qw(e,t,n,r){if(Ku(e,n,r))return;const i=Qu(n,e.trump,r),s=qu(n,e.trump,r),o=xm(e,t,i,null,r);o.length!==0&&(o.sort((l,a)=>a[1].value-l[1].value),eo(e,o[0]),s&&o.length>1&&(eo(e,o[1]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o[1][0].name}    ${Ci(o[1][1])}`)))}function Jw(e,t,n,r){if(Ku(e,n,r))return;const i=Qu(n,e.trump,r),s=qu(n,e.trump,r),o=u=>{if(!r.ordenNachalniku)return!0;const c=u.plot.stacks&&u.plot.stacks.length>0;return i||c},l=xm(e,t,i,o,r);for(const u of e.players){if(!o(u))continue;const c=(u.plot.revealed||[]).filter(f=>f.suit===t);for(const f of c)l.some(([g,v])=>g===u&&v.suit===f.suit&&v.value===f.value)||l.push([u,f])}const a=new Map;for(const[u,c]of l)a.has(u)||a.set(u,[]),a.get(u).push(c);for(const[u,c]of a.entries())c.length!==0&&(c.sort((f,d)=>d.value-f.value),eo(e,[u,c[0]]),s&&c.length>1&&(eo(e,[u,c[1]]),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${u.name}    ${Ci(c[1])}`)))}function Xw(e,t,n,r){if(Ku(e,n,r))return;const i=Qu(n,e.trump,r),s=qu(n,e.trump,r);for(const o of e.players){if(!(r.northernStyle||o.hasWonTrickThisYear||i))continue;const a=(o.plot.hidden||[]).filter(d=>d.suit===t);o.plot.revealed.push(...a),o.plot.hidden=(o.plot.hidden||[]).filter(d=>d.suit!==t);const u=(o.plot.revealed||[]).filter(d=>d.suit===t).sort((d,g)=>g.value-d.value);if(u.length===0)continue;const c=u[0],f=o.plot.revealed.findIndex(d=>d.suit===c.suit&&d.value===c.value);if(o.plot.revealed.splice(f,1),Gs(e,`${c.suit}-${c.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${o.name}    ${Ci(c)}`),s&&u.length>1){const d=u[1],g=o.plot.revealed.findIndex(v=>v.suit===d.suit&&v.value===d.value);o.plot.revealed.splice(g,1),Gs(e,`${d.suit}-${d.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(` : ${o.name}    ${Ci(d)}`)}}}function xm(e,t,n,r,i){const s=[];for(const o of e.players){if(r&&!r(o))continue;const l=(o.plot.hidden||[]).filter(c=>c.suit===t),a=[];if(i.ordenNachalniku&&i.deckType===36&&o.plot.stacks)for(const c of o.plot.stacks){for(const f of c.revealed||[])f.suit===t&&a.push({card:f,stack:c,location:"revealed"});for(const f of c.hidden||[])f.suit===t&&a.push({card:f,stack:c,location:"hidden"})}const u=[...l,...a.map(c=>c.card)];if(u.length!==0){if(n){for(const c of l){const f=o.plot.hidden.findIndex(d=>d.suit===c.suit&&d.value===c.value);o.plot.hidden.splice(f,1),o.plot.revealed.push(c),s.push([o,c])}for(const{card:c,stack:f,location:d}of a){const g=d==="hidden"?f.hidden:f.revealed,v=g.findIndex(x=>x.suit===c.suit&&x.value===c.value);v!==-1&&(g.splice(v,1),o.plot.revealed.push(c),s.push([o,c]))}}else{const c=u.reduce((d,g)=>g.value>d.value?g:d);if(l.some(d=>d.suit===c.suit&&d.value===c.value)){const d=o.plot.hidden.findIndex(g=>g.suit===c.suit&&g.value===c.value);o.plot.hidden.splice(d,1),o.plot.revealed.push(c),s.push([o,c])}else{const d=a.find(g=>g.card.suit===c.suit&&g.card.value===c.value);if(d){const{stack:g,location:v}=d,x=v==="hidden"?g.hidden:g.revealed,j=x.findIndex(m=>m.suit===c.suit&&m.value===c.value);j!==-1&&(x.splice(j,1),o.plot.revealed.push(c),s.push([o,c]))}}}o.plot.stacks&&(o.plot.stacks=o.plot.stacks.filter(c=>c.revealed&&c.revealed.length>0||c.hidden&&c.hidden.length>0))}}return s}function eo(e,[t,n]){let r=(t.plot.revealed||[]).findIndex(i=>i.suit===n.suit&&i.value===n.value);if(r!==-1)t.plot.revealed.splice(r,1);else if(t.plot.stacks){for(const i of t.plot.stacks){if(r=(i.revealed||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.revealed.splice(r,1);break}if(r=(i.hidden||[]).findIndex(s=>s.suit===n.suit&&s.value===n.value),r!==-1){i.hidden.splice(r,1);break}}t.plot.stacks=t.plot.stacks.filter(i=>i.revealed&&i.revealed.length>0||i.hidden&&i.hidden.length>0)}Gs(e,`${n.suit}-${n.value}`),e.trickHistory[e.trickHistory.length-1].requisitions.push(`${t.name}    ${Ci(n)}`)}function Zw(e,t){const n={};for(let r=0;r<e.players.length;r++){const i=e.players[r];let s=0;for(const o of i.plot.revealed||[])s+=o.value;if(t.medalsCount&&(s+=(i.plot.medals||0)+(i.medals||0)),i.plot.stacks)for(const o of i.plot.stacks)for(const l of o.revealed||[])s+=l.value;n[r]=s}return n}function Gw(e,t){const n=Zw(e,t);for(let r=0;r<e.players.length;r++){const i=e.players[r];for(const s of i.plot.hidden||[])n[r]+=s.value}return n}function e1(e,t){const n=Gw(e,t);let r=1/0,i=0;for(const[s,o]of Object.entries(n))o<r&&(r=o,i=parseInt(s,10));return{winner:i,scores:n}}function Ea(e,t,n){var s;if((t==null?void 0:t.deckType)!==36&&!(t!=null&&t.northernStyle)&&e.revealedJobs){for(const o of it)if(!((s=e.claimedJobs)!=null&&s.includes(o))){const l=e.revealedJobs[o];if(!l)continue;const a=Array.isArray(l)?l:[l];if(t.accumulateJobs)e.accumulatedJobCards[o]||(e.accumulatedJobCards[o]=[]),e.accumulatedJobCards[o].push(...a.filter(Boolean));else{e.exiled[e.year]||(e.exiled[e.year]=[]);for(const u of a)u&&e.exiled[e.year].push(`${u.suit}-${u.value}`)}}}if(e.year++,e.year>mm)return!0;e.trickCount=0,e.currentTrick=[],e.trump=null;for(const o of it)e.workHours[o]=0;const{jobs:r,isFamine:i}=gm(e.jobPiles,e.accumulatedJobCards,t);if(e.revealedJobs=r,e.isFamine=i,t.ordenNachalniku&&t.deckType===36){for(const o of e.players)if(o.plot.stacks){for(const l of o.plot.stacks)l.revealed&&l.revealed.length>0&&o.plot.revealed.push(...l.revealed);o.plot.stacks=[]}}for(const o of it)e.jobBuckets[o]=[];e.claimedJobs=[];for(const o of e.players)o.hand=[],t.medalsCount&&o.medals>0&&(o.plot.medals=(o.plot.medals||0)+o.medals),o.medals=0,o.hasWonTrickThisYear=!1,o.brigadeLeader=!1;return e.trumpSelector=(e.trumpSelector+1)%e.numPlayers,e.workersDeck=vm(e.players,e.jobBuckets,e.exiled,t,n),wm(e.players,e.workersDeck,e.isFamine),!1}function km(e,t){const n=it.filter(r=>e.jobPiles[r].length>0);if(n.length>0){const r=t.Die(n.length)-1;e.trump=n[r]}}function Rf(e,t,n=!0){return n&&e.value===11&&e.suit===t?0:e.value}function Em(e,t,n){var f,d,g;const r=e.workHours[t]||0;if((f=e.claimedJobs)==null?void 0:f.includes(t))return-10;const s=Math.max(0,40-r),o=s<20?(20-s)*2:0,l=e.players[n],c=[...((d=l.plot)==null?void 0:d.revealed)||[],...((g=l.plot)==null?void 0:g.hidden)||[]].filter(v=>v.suit===t).length*15;return o+c}function t1(e,t,n){var f,d,g,v,x;const r=e.players[t],i=r.hand[n];let s=0;const o=e.currentTrick.length===0,l=(d=(f=e.currentTrick[0])==null?void 0:f[1])==null?void 0:d.suit,a=e.currentTrick.map(([,j])=>j),u=n1(e,i,a),c=r1(e,t);if(o){const j=Em(e,i.suit,t);s+=j*.3,i.value>=8&&i.value<=11&&(s+=5),i.suit===e.trump&&e.trickCount<2&&(s-=10)}else if(c>0&&u>.5?s+=c*u*20:c<0&&u<.5&&(s+=Math.abs(c)*(1-u)*15),i.suit!==l){const m=[...((g=r.plot)==null?void 0:g.revealed)||[],...((v=r.plot)==null?void 0:v.hidden)||[]].filter(h=>h.suit===i.suit).length;(x=e.claimedJobs)!=null&&x.includes(i.suit)||(s+=m*3)}return s+=Math.random()*2,s}function n1(e,t,n){if(n.length===0)return .5;const r=n[0].suit;let i=n[0];for(const s of n)(s.suit===e.trump&&i.suit!==e.trump||s.suit===i.suit&&s.value>i.value)&&(i=s);return t.suit===e.trump&&i.suit!==e.trump?.8:t.suit===i.suit&&t.value>i.value?.7:t.suit!==r&&t.suit!==e.trump?.1:.3}function r1(e,t){let n=0;const r=[...new Set(e.currentTrick.map(([,s])=>s.suit))];for(const s of r){const o=Em(e,s,t);n+=o*.1}return e.players[t].brigadeLeader&&(n+=5),e.trickCount>=2&&(n+=3),n}function i1(e,t,n){var f,d;let r=0;const i=e.players[n],s=i.hand||[],o=s.filter(g=>g.suit===t&&g.value>=11).length;r+=o*15;const l=s.filter(g=>g.suit===t).length;r+=l*5;const a=e.workHours[t]||0;a>=20&&a<40&&(r+=10);const c=[...((f=i.plot)==null?void 0:f.revealed)||[],...((d=i.plot)==null?void 0:d.hidden)||[]].filter(g=>g.suit===t).length;return r-=c*8,r+=Math.random()*5,r}function s1(e,t,n){var s,o,l,a,u,c,f;const r=[],i=e.players[n];if(t.phase==="planning"&&!e.trump)for(const d of it){const g=i1(e,d,n);r.push({move:"setTrump",args:[d],score:g})}else if(t.phase==="trick")for(let d=0;d<i.hand.length;d++){const g=i.hand[d],v=(o=(s=e.currentTrick[0])==null?void 0:s[1])==null?void 0:o.suit;if(e.currentTrick.length>0&&i.hand.some(m=>m.suit===v)&&g.suit!==v)continue;const x=t1(e,n,d);r.push({move:"playCard",args:[d],score:x})}else if(t.phase==="assignment"&&n===e.lastWinner){const d=[...new Set(e.lastTrick.map(([,k])=>k.suit))],g=e.players[n],v=[...((l=g.plot)==null?void 0:l.revealed)||[],...((a=g.plot)==null?void 0:a.hidden)||[]],x=e.lastTrick.reduce((k,[,N])=>{var T;return k+Rf(N,e.trump,(T=e.variants)==null?void 0:T.nomenclature)},0);let j=d[0],m=-1/0;for(const k of d){const N=e.workHours[k]||0;if((u=e.claimedJobs)==null?void 0:u.includes(k)){m<0&&(m=0,j=k);continue}const C=N+x;let R=0;C>=40?(R+=200,R-=(C-40)*2):(R+=C,C>=30?R+=30:C>=20&&(R+=15));const L=v.filter(K=>K.suit===k).length;R+=L*20,R>m&&(m=R,j=k)}let h=0;const y={};for(const[,k]of e.lastTrick){const N=Rf(k,e.trump,(c=e.variants)==null?void 0:c.nomenclature);let T=k.suit,C=-1/0;for(const R of d){const L=e.workHours[R]||0,K=(f=e.claimedJobs)==null?void 0:f.includes(R);let Y=0;if(K)Y=0;else{const le=L+N;le>=40?Y+=150:(Y+=le*.5,le>=30&&(Y+=15));const Oe=v.filter(ae=>ae.suit===R).length;Y+=Oe*10}Y>C&&(C=Y,T=R)}y[`${k.suit}-${k.value}`]=T,h+=C}const E=e.pendingAssignments||{};let S;if(m>=h){S={};for(const[,k]of e.lastTrick)S[`${k.suit}-${k.value}`]=j}else S=y;let P=!1;for(const[k,N]of Object.entries(S))E[k]!==N&&(P=!0,r.push({move:"assignCard",args:[k,N],score:100}));P||r.push({move:"submitAssignments",args:[],score:100})}else t.phase;return r.sort((d,g)=>g.score-d.score),r}function Lf(e,t,n){return{idx:e,isHuman:t,name:n,hand:[],plot:{revealed:[],hidden:[],medals:0,stacks:[]},brigadeLeader:!1,hasWonTrickThisYear:!1,medals:0}}function o1({ctx:e,random:t},n){const r={...ym,...(n==null?void 0:n.variants)||{}},i=e.numPlayers,s=[...Fw],o=[];for(let c=0;c<i;c++)if(c===0)o.push(Lf(0,!0,""));else{const f=Math.floor(t.Number()*s.length),d=s.splice(f,1)[0];o.push(Lf(c,!1,d))}const l={numPlayers:i,players:o,lead:Math.floor(t.Number()*i),year:1,trump:null,jobPiles:Uw(r,t),revealedJobs:{},claimedJobs:[],accumulatedJobCards:{},workHours:{},jobBuckets:{},currentTrick:[],lastTrick:[],lastWinner:null,trickHistory:[],trickCount:0,exiled:{},workersDeck:[],isFamine:!1,variants:r,pendingAssignments:{},needsManualAssignment:!1,trumpSelector:Math.floor(t.Number()*i)};for(const c of it)l.accumulatedJobCards[c]=[],l.workHours[c]=0,l.jobBuckets[c]=[];const{jobs:a,isFamine:u}=gm(l.jobPiles,l.accumulatedJobCards,r);return l.revealedJobs=a,l.isFamine=u,l.workersDeck=vm(l.players,l.jobBuckets,l.exiled,r,t),wm(l.players,l.workersDeck,l.isFamine),l}function l1({G:e,random:t},n){n&&it.includes(n)?e.trump=n:km(e,t)}function a1({G:e,ctx:t,playerID:n},r){const i=parseInt(n,10);if(!Hw(e,i,r))return xn;const o=e.players[i].hand.splice(r,1)[0];e.currentTrick.push([i,o])}function u1({G:e},t,n){e.pendingAssignments||(e.pendingAssignments={}),e.pendingAssignments[t]=n}function c1({G:e,events:t,random:n}){if(Object.keys(e.pendingAssignments).length!==e.lastTrick.length)return xn;const r=new Set(e.lastTrick.map(([,i])=>i.suit));for(const[,i]of Object.entries(e.pendingAssignments))if(!r.has(i))return xn;if(Sm(e,e.pendingAssignments,e.variants),e.pendingAssignments={},xa(e)){console.log("[submitAssignments] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[submitAssignments] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),ka(e,e.variants),Ea(e,e.variants,n),console.log("[submitAssignments] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0,t.setPhase("planning")}else t.setPhase("trick")}function f1({G:e,playerID:t},n,r,i="hidden"){const s=parseInt(t,10),o=e.players[s];if(n<0||r<0)return;if(r>=o.hand.length)return xn;const l=i==="revealed"?o.plot.revealed:o.plot.hidden;if(n>=l.length)return xn;const a=l[n];l[n]=o.hand[r],o.hand[r]=a}function d1({G:e,playerID:t}){const n=parseInt(t,10);e.swapConfirmed||(e.swapConfirmed={}),e.swapConfirmed[n]=!0}const h1={name:"kolkhoz",setup:o1,minPlayers:2,maxPlayers:4,phases:{planning:{start:!0,moves:{setTrump:l1},turn:{order:{first:({G:e})=>e.trumpSelector,next:()=>{}}},onBegin:({G:e})=>{console.log("[planning onBegin] year:",e.year,"trumpSelector:",e.trumpSelector,"isFamine:",e.isFamine,"hands:",e.players.map(t=>t.hand.length)),e.yearEndProcessed=!1,e.isFamine&&(e.trump=null)},endIf:({G:e})=>{const t=e.isFamine||e.trump!==null;return console.log("[planning endIf]",t,"- isFamine:",e.isFamine,"trump:",e.trump),t},onEnd:({G:e,random:t})=>{console.log("[planning onEnd] year:",e.year),!e.isFamine&&!e.trump&&km(e,t)},next:({G:e})=>{const t=e.variants.allowSwap&&e.year>1?"swap":"trick";return console.log("[planning next] ->",t,"- allowSwap:",e.variants.allowSwap,"year:",e.year),t}},trick:{moves:{playCard:a1},turn:{order:{first:({G:e})=>e.lead,next:({G:e,ctx:t})=>(t.playOrderPos+1)%t.numPlayers},minMoves:1,maxMoves:1},endIf:({G:e,ctx:t})=>e.currentTrick.length===t.numPlayers,onEnd:({G:e,random:t})=>{const n=Vw(e);if(n!==null){Ww(e,n);const r=Qw(e.lastTrick);if(r?(Sm(e,r,e.variants),e.needsManualAssignment=!1):e.needsManualAssignment=!0,!e.needsManualAssignment&&xa(e)){console.log("[trick onEnd] Last trick - processing year end");for(const i of e.players)for(;i.hand.length>0;){const s=i.hand.pop();i.plot.hidden.push(s)}console.log("[trick onEnd] Cards moved to plots:",e.players.map(i=>i.plot.hidden.length)),ka(e,e.variants),Ea(e,e.variants,t),console.log("[trick onEnd] After transition - year:",e.year,"hands:",e.players.map(i=>i.hand.length)),e.yearEndProcessed=!0}}},next:({G:e})=>{var n;if(e.yearEndProcessed)return console.log("[trick next] Year end processed, going to planning"),"planning";if(e.needsManualAssignment)return"assignment";const t=xa(e);return console.log("[trick next] trickCount:",e.trickCount,"yearComplete:",t,"handSize:",(n=e.players[0])==null?void 0:n.hand.length),t?"plotSelection":"trick"}},assignment:{moves:{assignCard:u1,submitAssignments:c1},turn:{order:{first:({G:e})=>e.lastWinner,next:()=>{}}},onBegin:({G:e})=>{e.pendingAssignments={};for(const[,t]of e.lastTrick){const n=`${t.suit}-${t.value}`;e.pendingAssignments[n]=t.suit}},next:"trick"},plotSelection:{onBegin:({G:e,events:t})=>{console.log("[plotSelection onBegin] START - hands before:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots before:",e.players.map(n=>n.plot.hidden.length));for(const n of e.players)for(;n.hand.length>0;){const r=n.hand.pop();n.plot.hidden.push(r)}console.log("[plotSelection onBegin] END - hands after:",e.players.map(n=>n.hand.length)),console.log("[plotSelection onBegin] plots after:",e.players.map(n=>n.plot.hidden.length)),t.setPhase("requisition")},next:"requisition"},requisition:{onBegin:({G:e,random:t,events:n})=>{console.log("[requisition onBegin] START - year:",e.year),console.log("[requisition onBegin] hands before transition:",e.players.map(r=>r.hand.length)),ka(e,e.variants),Ea(e,e.variants,t),console.log("[requisition onBegin] after transition - year:",e.year),console.log("[requisition onBegin] hands after transition:",e.players.map(r=>r.hand.length)),console.log("[requisition onBegin] isFamine:",e.isFamine),!(e.year>5)&&(console.log("[requisition onBegin] calling setPhase(planning)"),n.setPhase("planning"))},next:({G:e})=>{if(!(e.year>5))return"planning"}},swap:{moves:{swapCard:f1,confirmSwap:d1},turn:{order:{first:()=>0,next:()=>{}}},onBegin:({G:e,ctx:t})=>{console.log("[swap onBegin] year:",e.year,"hands:",e.players.map(n=>n.hand.length),"plots:",e.players.map(n=>n.plot.hidden.length)),e.swapConfirmed={};for(let n=1;n<t.numPlayers;n++)e.swapConfirmed[n]=!0},endIf:({G:e,ctx:t})=>{if(!e.swapConfirmed)return!1;for(let n=0;n<t.numPlayers;n++)if(!e.swapConfirmed[n])return!1;return!0},onEnd:({G:e})=>{delete e.swapConfirmed},next:"trick"}},endIf:({G:e})=>{if(e.year>5)return e1(e,e.variants)},playerView:({G:e,ctx:t,playerID:n})=>{if(n===null)return e;const r=parseInt(n,10),i=JSON.parse(JSON.stringify(e));return i.players=e.players.map((s,o)=>{const l=o===r;return{...s,hand:l?s.hand:s.hand.map(()=>({hidden:!0})),plot:{...s.plot,hidden:l?s.plot.hidden:s.plot.hidden.map(()=>({hidden:!0}))}}}),i.workersDeck=e.workersDeck.map(()=>({hidden:!0})),i},ai:{enumerate:(e,t,n)=>{const r=parseInt(n,10),i=s1(e,t,r);return i.slice(0,Math.min(3,i.length)).map(({move:o,args:l})=>({move:o,args:l}))}}};function Mt(e){return`assets/cards/${{1:"ace",11:"jack",12:"queen",13:"king"}[e.value]||e.value}_of_${e.suit.toLowerCase()}.svg`}function p1(e){return{1:"Ace",11:"Jack",12:"Queen",13:"King"}[e]||String(e)}function be({card:e,x:t=0,y:n=0,width:r=100,rotation:i=0,faceDown:s=!1,onClick:o,highlight:l=!1,dimmed:a=!1,className:u=""}){const c=r*1.4,f=s?"assets/cards/back.svg":Mt(e);return t!==0||n!==0?p.jsxs("g",{className:`card-svg ${u} ${l?"highlight":""} ${a?"dimmed":""}`,transform:`translate(${t}, ${n}) rotate(${i})`,onClick:o,style:{cursor:o?"pointer":"default"},children:[p.jsx("image",{href:f,width:r,height:c,x:-r/2,y:-c/2}),l&&p.jsx("rect",{x:-r/2-4,y:-c/2-4,width:r+8,height:c+8,fill:"none",stroke:"#d4a857",strokeWidth:"3",rx:"8"})]}):p.jsx("div",{className:`card-html ${u} ${l?"highlight":""} ${a?"dimmed":""}`,onClick:o,style:{width:`${r}px`,height:`${c}px`,cursor:o?"pointer":"default"},children:p.jsx("img",{src:f,alt:s?"Card back":`${p1(e.value)} of ${e.suit}`,style:{width:"100%",height:"100%"}})})}const bf=["/assets/portraits/worker1.svg","/assets/portraits/worker2.svg","/assets/portraits/worker3.svg","/assets/portraits/worker4.svg"];function m1({player:e,position:t,isActive:n,isBrigadeLeader:r,playerIndex:i,scale:s=1,isHuman:o=!1}){var D,F,B,M;const{x:l,y:a}=t,u=((D=e.hand)==null?void 0:D.length)||0,c=((F=e.plot)==null?void 0:F.revealed)||[],f=((M=(B=e.plot)==null?void 0:B.hidden)==null?void 0:M.length)||0,d=c.reduce((U,V)=>U+V.value,0)+f,g=60*s,v=g*1.4,x=34*s,j=68*s,m=10*s,h=8*s;if(o){const U=300*s,V=170*s,W=l-U/2,te=a-V/2,q=c.length+f,se=q>0?(Math.min(4,q)-1)*x+g:0,fe=l-se/2,w=a-v/2+10*s;return p.jsxs("g",{className:"player-area human-plot",children:[p.jsx("rect",{x:W,y:te,width:U,height:V,fill:"none",stroke:"#d4a857",strokeWidth:2*s,strokeDasharray:`${6*s},${4*s}`,rx:4*s}),p.jsx("text",{x:W+10*s,y:te+20*s,textAnchor:"start",fill:"#d4a857",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:""}),c.map((_,O)=>p.jsx("image",{href:Mt(_),x:fe+O*x,y:w,width:g,height:v},`plot-${O}`)),Array.from({length:f}).map((_,O)=>p.jsx("image",{href:"assets/cards/back.svg",x:fe+(c.length+O)*x,y:w,width:g,height:v,opacity:.7},`hidden-${O}`))]})}const y=300*s,E=170*s,S=l-y/2,P=a-E/2,k=P+m,N=k+j/2,T=k+j+h,R=S+m,L=R+j+8*s,K=85*s,Y=L+K,le=Y+8*s,Oe=Math.min(4,u)*x+g-x,ae=l-Oe/2;return p.jsxs("g",{className:`player-area ${n?"active":""}`,children:[p.jsx("rect",{x:S,y:P,width:y,height:E,fill:n?"rgba(196, 30, 58, 0.25)":"rgba(20,20,20,0.9)",stroke:n?"#d4a857":"#444",strokeWidth:n?2:1,rx:4*s}),p.jsx("image",{href:bf[(i-1)%bf.length],x:R,y:k,width:j,height:j,style:{imageRendering:"pixelated"}}),p.jsxs("text",{x:L,y:N-8*s,textAnchor:"start",fill:n?"#d4a857":"#e8dcc4",fontSize:15*s,fontWeight:n?"bold":"normal",fontFamily:"'Oswald', sans-serif",children:[e.name,r&&" "]}),p.jsx("text",{x:L,y:N+14*s,textAnchor:"start",fill:d>0?"#c41e3a":"#888",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:d>0?`${d} pts`:`${u} cards`}),p.jsx("line",{x1:Y,y1:k+4*s,x2:Y,y2:k+j-4*s,stroke:"#555",strokeWidth:1}),c.slice(0,2).map((U,V)=>p.jsx("image",{href:Mt(U),x:le+V*x,y:k+(j-v)/2,width:g,height:v},`plot-${V}`)),c.length===0&&f>0&&p.jsx("image",{href:"assets/cards/back.svg",x:le,y:k+(j-v)/2,width:g,height:v,opacity:.5}),Array.from({length:Math.min(4,u)}).map((U,V)=>p.jsx("image",{href:"assets/cards/back.svg",x:ae+V*x,y:T,width:g,height:v},`hand-${V}`)),u>4&&p.jsxs("text",{x:ae+4*x+g/2,y:T+v/2,textAnchor:"middle",fill:"#888",fontSize:9*s,children:["+",u-4]})]})}const $f=["Hearts","Diamonds","Clubs","Spades"];function y1({trick:e,numPlayers:t,lead:n,centerX:r=960,centerY:i=450,scale:s=1,year:o,trump:l,phase:a,isMyTurn:u,currentPlayerName:c,showInfo:f=!1,players:d,currentPlayer:g,brigadeLeader:v,displayMode:x="game",workHours:j,claimedJobs:m,jobBuckets:h,revealedJobs:y,exiled:E,playerPlot:S}){const P={Hearts:"",Diamonds:"",Clubs:"",Spades:""},k=1700*s,N=750*s,T=280*s,C=T*1.4,R=350*s,L=120*s,K=M=>{const V=[3,0,1,2][M];return{x:-1.5*R+V*R,y:L}},Y=6*s,le=10*s,Oe=6*s,ae=i-N/2+45*s,D=30*s,F=26*s,B=r-k/2+30*s;return p.jsxs("g",{className:"trick-area",children:[p.jsx("rect",{x:r-k/2,y:i-N/2,width:k,height:N,fill:"#1a1a1a",stroke:"#d4a857",strokeWidth:3*s,rx:le}),p.jsx("rect",{x:r-k/2+Y,y:i-N/2+Y,width:k-Y*2,height:N-Y*2,fill:"none",stroke:"#8b0000",strokeWidth:2*s,rx:Oe}),p.jsxs("g",{className:"trick-info-bar",children:[f?p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:B,y:ae,textAnchor:"start",fill:"#d4a857",fontSize:D,fontFamily:"'Oswald', sans-serif",children:[p.jsxs("title",{children:["Year ",o," of 5"]})," ",o,"/5"]}),p.jsxs("text",{x:B+100*s,y:ae,textAnchor:"start",fill:"#888",fontSize:D,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Trump suit"}),":"]}),p.jsx("text",{x:B+175*s,y:ae,textAnchor:"start",fill:l==="Hearts"||l==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:F,fontFamily:"'Oswald', sans-serif",children:l?P[l]:"?"})]}):null,e.length>0&&p.jsxs(p.Fragment,{children:[p.jsxs("text",{x:B+200*s,y:ae,textAnchor:"start",fill:"#888",fontSize:D,fontFamily:"'Oswald', sans-serif",children:[p.jsx("title",{children:"Lead suit"}),":"]}),p.jsx("text",{x:B+268*s,y:ae,textAnchor:"start",fill:e[0][1].suit==="Hearts"||e[0][1].suit==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:F,children:P[e[0][1].suit]})]}),f&&j&&p.jsx("g",{className:"job-progress-bar",children:$f.map((M,U)=>{const V=j[M]||0,W=m==null?void 0:m.includes(M),te=M===l,q=70*s,fe=B+320*s+U*q;return p.jsxs("g",{children:[p.jsx("text",{x:fe,y:ae,textAnchor:"middle",fill:M==="Hearts"||M==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:F,opacity:te?1:.7,children:P[M]}),p.jsx("text",{x:fe+16*s,y:ae,textAnchor:"start",fill:W?"#4CAF50":"#888",fontSize:F,fontFamily:"'Oswald', sans-serif",children:W?"":`${V}/40`})]},M)})})]}),x==="game"&&p.jsxs(p.Fragment,{children:[Array.from({length:t}).map((M,U)=>{if(e.some(([te])=>te===U))return null;const W=K(U);return p.jsx("rect",{x:r+W.x-T/2,y:i+W.y-C/2,width:T,height:C,fill:"none",stroke:"rgba(255,255,255,0.15)",strokeWidth:1*s,strokeDasharray:`${4*s},${4*s}`,rx:4*s},`slot-${U}`)}),u&&!e.some(([M])=>M===0)&&p.jsxs("g",{className:"turn-highlight-group",children:[p.jsx("rect",{x:r+1.5*R-T/2,y:i+L-C/2,width:T,height:C,fill:"rgba(212, 168, 87, 0.1)",stroke:"#d4a857",strokeWidth:3*s,strokeDasharray:`${8*s},${4*s}`,rx:8*s,className:"turn-highlight"}),p.jsx("text",{x:r+1.5*R,y:i+L,textAnchor:"middle",dominantBaseline:"middle",fill:"#d4a857",fontSize:28*s,fontFamily:"'Russo One', 'Oswald', sans-serif",className:"turn-text",children:" "})]}),!u&&g!==0&&!e.some(([M])=>M===g)&&(()=>{const M=K(g);return p.jsxs("g",{className:"turn-highlight-group bot-turn",children:[p.jsx("rect",{x:r+M.x-T/2,y:i+M.y-C/2,width:T,height:C,fill:"rgba(196, 30, 58, 0.1)",stroke:"#c41e3a",strokeWidth:3*s,strokeDasharray:`${8*s},${4*s}`,rx:8*s,className:"turn-highlight bot"}),p.jsx("text",{x:r+M.x,y:i+M.y,textAnchor:"middle",dominantBaseline:"middle",fill:"#c41e3a",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",className:"turn-text bot",children:c})]})})(),e.map(([M,U],V)=>{const W=K(M);return p.jsx(be,{card:U,x:r+W.x,y:i+W.y,width:T},`${U.suit}-${U.value}`)}),d&&[0,1,2,3].map(M=>{const U=K(M),V=i-N/2+160*s;return p.jsx(m1,{player:d[M],position:{x:r+U.x,y:V},isActive:g===M,isBrigadeLeader:v===M,playerIndex:M,scale:s,isHuman:M===0},`player-${M}`)})]}),x==="jobs"&&p.jsxs("g",{className:"jobs-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),$f.map((M,U)=>{const V=(j==null?void 0:j[M])||0,W=m==null?void 0:m.includes(M),te=M===l,q=(h==null?void 0:h[M])||[],se=y==null?void 0:y[M],fe=Array.isArray(se)?se:se?[se]:[],w=95*s,_=100*s,O=i-N/2+95*s+U*_,A=r-k/2+20*s,b=k-40*s,$=55*s,X=$*1.4,J=42*s,re=A+140*s;return p.jsxs("g",{className:`job-row ${te?"trump":""}`,children:[p.jsx("rect",{x:A,y:O,width:b,height:w,fill:te?"rgba(196, 30, 58, 0.15)":"rgba(30,30,30,0.5)",stroke:W?"#4CAF50":te?"#c41e3a":"#444",strokeWidth:W?2:1,rx:4*s}),p.jsx("text",{x:A+25*s,y:O+35*s,textAnchor:"middle",fill:M==="Hearts"||M==="Diamonds"?"#c41e3a":"#e8dcc4",fontSize:28*s,children:P[M]}),p.jsx("text",{x:A+25*s,y:O+65*s,textAnchor:"middle",fill:W?"#4CAF50":"#e8dcc4",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:W?"":`${V}/40`}),fe.length>0&&!W?p.jsx("image",{href:Mt(fe[0]),x:A+55*s,y:O+(w-X)/2,width:$,height:X}):p.jsx("image",{href:"assets/cards/back.svg",x:A+55*s,y:O+(w-X)/2,width:$,height:X,opacity:W?.3:.5}),p.jsx("line",{x1:A+120*s,y1:O+10*s,x2:A+120*s,y2:O+w-10*s,stroke:"#555",strokeWidth:1}),q.slice(0,16).map((ee,ue)=>p.jsx("image",{href:Mt(ee),x:re+ue*J,y:O+(w-X)/2,width:$,height:X},`assigned-${ue}`)),q.length>16&&p.jsxs("text",{x:re+16*J+$/2,y:O+w/2+5*s,textAnchor:"middle",fill:"#888",fontSize:11*s,children:["+",q.length-16]}),q.length===0&&p.jsx("rect",{x:re,y:O+(w-X)/2,width:$,height:X,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]},M)})]}),x==="gulag"&&p.jsxs("g",{className:"gulag-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),[1,2,3,4,5].map((M,U)=>{const V=(E==null?void 0:E[M])||[],W=M===o,te=M<o,q=80*s,se=85*s,fe=i-N/2+90*s+U*se,w=r-k/2+20*s,_=k-40*s,O=50*s,A=O*1.4,b=38*s,$=w+80*s,X=J=>{const[re,ee]=J.split("-");return{suit:re,value:parseInt(ee,10)}};return p.jsxs("g",{className:`year-row ${W?"current":""}`,children:[p.jsx("rect",{x:w,y:fe,width:_,height:q,fill:W?"rgba(196, 30, 58, 0.2)":te?"rgba(50,50,50,0.3)":"rgba(30,30,30,0.5)",stroke:W?"#c41e3a":"#444",strokeWidth:W?2:1,rx:4*s}),p.jsx("text",{x:w+35*s,y:fe+q/2+10*s,textAnchor:"middle",fill:W?"#c41e3a":te?"#666":"#e8dcc4",fontSize:28*s,fontFamily:"'Russo One', 'Oswald', sans-serif",fontWeight:W?"bold":"normal",children:M}),V.length>0&&p.jsxs("g",{children:[p.jsx("circle",{cx:w+60*s,cy:fe+20*s,r:12*s,fill:"#c41e3a"}),p.jsx("text",{x:w+60*s,y:fe+24*s,textAnchor:"middle",fill:"#fff",fontSize:11*s,fontWeight:"bold",children:V.length})]}),V.length>0?V.slice(0,15).map((J,re)=>{const ee=X(J);return p.jsx("image",{href:Mt(ee),x:$+re*b,y:fe+(q-A)/2,width:O,height:A},re)}):p.jsx("rect",{x:$,y:fe+(q-A)/2,width:O,height:A,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s}),V.length>15&&p.jsxs("text",{x:$+15*b+O/2,y:fe+q/2+5*s,textAnchor:"middle",fill:"#888",fontSize:11*s,children:["+",V.length-15]})]},M)})]}),x==="plot"&&p.jsxs("g",{className:"plot-content",children:[p.jsx("text",{x:r,y:i-N/2+70*s,textAnchor:"middle",fill:"#d4a857",fontSize:24*s,fontFamily:"'Russo One', 'Oswald', sans-serif",children:""}),(()=>{const M=(S==null?void 0:S.revealed)||[],U=120*s,V=i-N/2+95*s,W=r-k/2+20*s,te=k-40*s,q=70*s,se=q*1.4,fe=55*s,w=W+120*s;return p.jsxs("g",{className:"revealed-row",children:[p.jsx("rect",{x:W,y:V,width:te,height:U,fill:"rgba(76, 175, 80, 0.1)",stroke:"#4CAF50",strokeWidth:1,rx:4*s}),p.jsx("text",{x:W+15*s,y:V+35*s,textAnchor:"start",fill:"#4CAF50",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:""}),p.jsx("text",{x:W+15*s,y:V+55*s,textAnchor:"start",fill:"#888",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:"(Revealed)"}),p.jsx("line",{x1:W+100*s,y1:V+10*s,x2:W+100*s,y2:V+U-10*s,stroke:"#555",strokeWidth:1}),M.map((_,O)=>p.jsx("image",{href:Mt(_),x:w+O*fe,y:V+(U-se)/2,width:q,height:se,className:"plot-card","data-type":"revealed","data-index":O},`revealed-${O}`)),M.length===0&&p.jsx("rect",{x:w,y:V+(U-se)/2,width:q,height:se,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]})})(),(()=>{const M=(S==null?void 0:S.hidden)||[],U=120*s,V=i-N/2+230*s,W=r-k/2+20*s,te=k-40*s,q=70*s,se=q*1.4,fe=55*s,w=W+120*s;return p.jsxs("g",{className:"hidden-row",children:[p.jsx("rect",{x:W,y:V,width:te,height:U,fill:"rgba(196, 30, 58, 0.1)",stroke:"#c41e3a",strokeWidth:1,rx:4*s}),p.jsx("text",{x:W+15*s,y:V+35*s,textAnchor:"start",fill:"#c41e3a",fontSize:14*s,fontFamily:"'Oswald', sans-serif",children:""}),p.jsx("text",{x:W+15*s,y:V+55*s,textAnchor:"start",fill:"#888",fontSize:12*s,fontFamily:"'Oswald', sans-serif",children:"(Hidden)"}),p.jsx("line",{x1:W+100*s,y1:V+10*s,x2:W+100*s,y2:V+U-10*s,stroke:"#555",strokeWidth:1}),M.map((_,O)=>p.jsx("image",{href:Mt(_),x:w+O*fe,y:V+(U-se)/2,width:q,height:se,className:"plot-card","data-type":"hidden","data-index":O},`hidden-${O}`)),M.length===0&&p.jsx("rect",{x:w,y:V+(U-se)/2,width:q,height:se,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeDasharray:`${4*s},${4*s}`,rx:4*s})]})})(),(()=>{const M=(S==null?void 0:S.revealed)||[],U=(S==null?void 0:S.hidden)||[],V=M.reduce((te,q)=>te+q.value,0)+U.reduce((te,q)=>te+q.value,0),W=i-N/2+365*s;return p.jsxs("text",{x:r,y:W,textAnchor:"middle",fill:V>0?"#c41e3a":"#888",fontSize:18*s,fontFamily:"'Oswald', sans-serif",children:["Total: ",V," points (",M.length+U.length," cards)"]})})()]})]})}const g1=["Hearts","Diamonds","Clubs","Spades"],zf={Hearts:"",Diamonds:"",Clubs:"",Spades:""};function v1({lastTrick:e,pendingAssignments:t,onAssign:n,onSubmit:r,svgRef:i,centerY:s=470,scale:o=1}){const[l,a]=Q.useState(null),[u,c]=Q.useState(null),[f,d]=Q.useState([]),g=Q.useRef(null),v=Q.useMemo(()=>[...new Set(e.map(([,S])=>S.suit))],[e]),x=Q.useCallback(()=>{if(!(i!=null&&i.current))return;const P=i.current.getBoundingClientRect(),k={width:1920,height:1080},N=P.width/k.width,T=P.height/k.height,C=540*o,R=1100*o,L=960,K=100*o,Y=95*o,le=g1.map((Oe,ae)=>{const D=s-C/2+95*o+ae*K,F=L-R/2+20*o,B=R-40*o;return{suit:Oe,left:P.left+F*N,top:P.top+D*T,width:B*N,height:Y*T,centerX:P.left+(F+B/2)*N,centerY:P.top+(D+Y/2)*T}});d(le)},[i,s,o]);Q.useEffect(()=>(x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[x]);const j=S=>S.touches&&S.touches.length>0?{x:S.touches[0].clientX,y:S.touches[0].clientY}:{x:S.clientX,y:S.clientY},m=(S,P)=>{for(const k of f)if(S>=k.left&&S<=k.left+k.width&&P>=k.top&&P<=k.top+k.height&&v.includes(k.suit))return k.suit;return null},h=(S,P,k)=>{k.preventDefault();const N=j(k),C=k.currentTarget.getBoundingClientRect();a({cardKey:S,card:P,position:N,offset:{x:N.x-(C.left+C.width/2),y:N.y-(C.top+C.height/2)},origin:{x:C.left+C.width/2,y:C.top+C.height/2},hoverZone:null})};Q.useEffect(()=>{if(!l)return;const S=k=>{const N=j(k),T=m(N.x,N.y);a(C=>({...C,position:N,hoverZone:T}))},P=k=>{const N=j(k),T=m(N.x,N.y);if(T&&v.includes(T)){const C=f.find(R=>R.suit===T);c({card:l.card,cardKey:l.cardKey,targetSuit:T,from:{x:N.x-l.offset.x,y:N.y-l.offset.y},to:{x:C.centerX,y:C.centerY}})}a(null)};return document.addEventListener("mousemove",S),document.addEventListener("mouseup",P),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("touchend",P),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",P),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",P)}},[l,f,v]),Q.useEffect(()=>{if(!u)return;const S=setTimeout(()=>{n(u.cardKey,u.targetSuit),c(null)},300);return()=>clearTimeout(S)},[u,n]);const y=Object.keys(t||{}).length===e.length,E=S=>(u==null?void 0:u.cardKey)===S?"flying":(l==null?void 0:l.cardKey)===S?"dragging":t!=null&&t[S]?"assigned":"available";return p.jsxs("div",{className:"assignment-drag-drop",ref:g,children:[p.jsxs("div",{className:"assignment-header",children:[p.jsx("h3",{children:"Assign Cards to Jobs"}),p.jsx("p",{children:"Drag each card to a job pile"})]}),p.jsx("div",{className:"drop-zones",children:f.map(S=>{const P=v.includes(S.suit),k=(l==null?void 0:l.hoverZone)===S.suit;return p.jsx("div",{className:`drop-zone ${P?"valid":"invalid"} ${k?"hover":""}`,style:{left:S.left,top:S.top,width:S.width,height:S.height},children:k&&p.jsxs("span",{className:"drop-hint",children:[zf[S.suit]," Drop here"]})},S.suit)})}),p.jsx("div",{className:"drag-cards",children:e.map(([S,P])=>{const k=`${P.suit}-${P.value}`,N=E(k);return N==="flying"||N==="dragging"?p.jsx("div",{className:"drag-card placeholder",children:p.jsx(be,{card:P,width:90,dimmed:!0})},k):p.jsxs("div",{className:`drag-card ${N}`,onMouseDown:T=>h(k,P,T),onTouchStart:T=>h(k,P,T),children:[p.jsx(be,{card:P,width:90}),N==="assigned"&&p.jsx("div",{className:"assigned-badge",children:zf[t[k]]})]},k)})}),l&&p.jsx("div",{className:"drag-ghost",style:{left:l.position.x-l.offset.x,top:l.position.y-l.offset.y},children:p.jsx(be,{card:l.card,width:90})}),u&&p.jsx("div",{className:"flying-card",style:{"--from-x":`${u.from.x}px`,"--from-y":`${u.from.y}px`,"--to-x":`${u.to.x}px`,"--to-y":`${u.to.y}px`},children:p.jsx(be,{card:u.card,width:60})}),p.jsx("button",{className:"assignment-submit",onClick:r,disabled:!y,children:y?"Submit Assignments":`Assign ${e.length-Object.keys(t||{}).length} more`})]})}function w1({hand:e,plot:t,onSwap:n,onConfirm:r,svgRef:i,centerY:s=470,scale:o=1,year:l}){var k,N;const[a,u]=Q.useState(null),[c,f]=Q.useState(null),[d,g]=Q.useState(null),[v,x]=Q.useState({revealed:null,hidden:null}),j=Q.useRef(null),m=Q.useCallback(()=>{if(!(i!=null&&i.current))return;const C=i.current.getBoundingClientRect(),R={width:1920,height:1080},L=C.width/R.width,K=C.height/R.height,Y=540*o,le=1100*o,Oe=960,ae=120*o,D=s-Y/2+95*o,F=Oe-le/2+20*o,B=le-40*o,M=s-Y/2+230*o;x({revealed:{left:C.left+F*L,top:C.top+D*K,width:B*L,height:ae*K,centerX:C.left+(F+B/2)*L,centerY:C.top+(D+ae/2)*K},hidden:{left:C.left+F*L,top:C.top+M*K,width:B*L,height:ae*K,centerX:C.left+(F+B/2)*L,centerY:C.top+(M+ae/2)*K}})},[i,s,o]);Q.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[m]);const h=T=>T.touches&&T.touches.length>0?{x:T.touches[0].clientX,y:T.touches[0].clientY}:{x:T.clientX,y:T.clientY},y=(T,C)=>{for(const[R,L]of Object.entries(v))if(L&&T>=L.left&&T<=L.left+L.width&&C>=L.top&&C<=L.top+L.height)return R;return null},E=(T,C,R)=>{(a==null?void 0:a.type)===T&&(a==null?void 0:a.index)===C?u(null):u({type:T,index:C,card:R})},S=(T,C,R)=>{R.preventDefault();const L=h(R),Y=R.currentTarget.getBoundingClientRect();f({source:{type:"hand",index:T},card:C,position:L,offset:{x:L.x-(Y.left+Y.width/2),y:L.y-(Y.top+Y.height/2)},origin:{x:Y.left+Y.width/2,y:Y.top+Y.height/2},hoverZone:null})};Q.useEffect(()=>{if(!c)return;const T=R=>{const L=h(R),K=y(L.x,L.y);f(Y=>({...Y,position:L,hoverZone:K}))},C=R=>{const L=h(R),K=y(L.x,L.y);if(K&&a&&a.type===K){const Y=v[K];g({card:c.card,from:{x:L.x-c.offset.x,y:L.y-c.offset.y},to:{x:Y.centerX,y:Y.centerY},swapData:{plotIdx:a.index,handIdx:c.source.index,plotType:K}}),u(null)}else if(K){const Y=K==="revealed"?t==null?void 0:t.revealed:t==null?void 0:t.hidden;if(Y&&Y.length>0){const le=v[K];g({card:c.card,from:{x:L.x-c.offset.x,y:L.y-c.offset.y},to:{x:le.centerX,y:le.centerY},swapData:{plotIdx:0,handIdx:c.source.index,plotType:K}})}}f(null)};return document.addEventListener("mousemove",T),document.addEventListener("mouseup",C),document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("touchend",C),()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",C),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",C)}},[c,v,a,t]),Q.useEffect(()=>{if(!d)return;const T=setTimeout(()=>{const{plotIdx:C,handIdx:R,plotType:L}=d.swapData;n(C,R,L),g(null)},300);return()=>clearTimeout(T)},[d,n]);const P=(T,C)=>(a==null?void 0:a.type)===T&&(a==null?void 0:a.index)===C;return p.jsxs("div",{className:"swap-drag-drop",ref:j,children:[p.jsxs("div",{className:"swap-header",children:[p.jsxs("h3",{children:["Swap Phase - Year ",l]}),p.jsx("p",{children:a?`Selected: ${a.type} card - drag a hand card to swap`:"Click a plot card to select, then drag a hand card to swap"})]}),p.jsxs("div",{className:"drop-zones",children:[v.revealed&&p.jsx("div",{className:`drop-zone revealed ${(c==null?void 0:c.hoverZone)==="revealed"?"hover":""} ${(a==null?void 0:a.type)==="revealed"?"target-selected":""}`,style:{left:v.revealed.left,top:v.revealed.top,width:v.revealed.width,height:v.revealed.height}}),v.hidden&&p.jsx("div",{className:`drop-zone hidden ${(c==null?void 0:c.hoverZone)==="hidden"?"hover":""} ${(a==null?void 0:a.type)==="hidden"?"target-selected":""}`,style:{left:v.hidden.left,top:v.hidden.top,width:v.hidden.width,height:v.hidden.height}})]}),p.jsxs("div",{className:"plot-card-overlays",children:[(k=t==null?void 0:t.revealed)==null?void 0:k.map((T,C)=>{if(!v.revealed)return null;const R=70*o,L=55*o,Y=v.revealed.left+120*o*(v.revealed.width/(1060*o))+C*L*(v.revealed.width/(1060*o)),le=v.revealed.top+(v.revealed.height-R*1.4)/2;return p.jsx("div",{className:`plot-card-overlay ${P("revealed",C)?"selected":""}`,style:{left:Y,top:le,width:R*(v.revealed.width/(1060*o)),height:R*1.4*(v.revealed.height/(120*o))},onClick:()=>E("revealed",C,T)},`revealed-overlay-${C}`)}),(N=t==null?void 0:t.hidden)==null?void 0:N.map((T,C)=>{if(!v.hidden)return null;const R=70*o,L=55*o,Y=v.hidden.left+120*o*(v.hidden.width/(1060*o))+C*L*(v.hidden.width/(1060*o)),le=v.hidden.top+(v.hidden.height-R*1.4)/2;return p.jsx("div",{className:`plot-card-overlay ${P("hidden",C)?"selected":""}`,style:{left:Y,top:le,width:R*(v.hidden.width/(1060*o)),height:R*1.4*(v.hidden.height/(120*o))},onClick:()=>E("hidden",C,T)},`hidden-overlay-${C}`)})]}),p.jsx("div",{className:"swap-hand-cards",children:e.map((T,C)=>{const R=(c==null?void 0:c.source.index)===C,L=(d==null?void 0:d.swapData.handIdx)===C;return R||L?p.jsx("div",{className:"swap-card placeholder",children:p.jsx(be,{card:T,width:90,dimmed:!0})},`hand-${C}`):p.jsx("div",{className:"swap-card",onMouseDown:K=>S(C,T,K),onTouchStart:K=>S(C,T,K),children:p.jsx(be,{card:T,width:90})},`hand-${C}`)})}),c&&p.jsx("div",{className:"drag-ghost",style:{left:c.position.x-c.offset.x,top:c.position.y-c.offset.y},children:p.jsx(be,{card:c.card,width:90})}),d&&p.jsx("div",{className:"flying-card",style:{"--from-x":`${d.from.x}px`,"--from-y":`${d.from.y}px`,"--to-x":`${d.to.x}px`,"--to-y":`${d.to.y}px`},children:p.jsx(be,{card:d.card,width:60})}),p.jsx("button",{className:"swap-confirm",onClick:r,children:"Done Swapping"})]})}function S1({hand:e,onPlayCard:t,canPlay:n=!1,validIndices:r,svgRef:i,centerX:s=960,centerY:o=560,cardWidth:l=280,cardSpacing:a=350}){const[u,c]=Q.useState(null),[f,d]=Q.useState(null),[g,v]=Q.useState(null),[x,j]=Q.useState(null),m=Q.useCallback(()=>{if(!(i!=null&&i.current))return;const P=i.current.getBoundingClientRect(),k=P.width/1920,N=P.height/1080,T=s+1.5*a,C=o+120,R=l*1.4;v({left:P.left+(T-l/2)*k,top:P.top+(C-R/2)*N,width:l*k,height:R*N,centerX:P.left+T*k,centerY:P.top+C*N}),j(P.left+s*k)},[i,s,o,l,a]);Q.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[m]);const h=S=>S.touches&&S.touches.length>0?{x:S.touches[0].clientX,y:S.touches[0].clientY}:{x:S.clientX,y:S.clientY},y=(S,P)=>g?S>=g.left&&S<=g.left+g.width&&P>=g.top&&P<=g.top+g.height:!1,E=(S,P,k)=>{if(!n||!r||!r.includes(S))return;k.preventDefault();const N=h(k),C=k.currentTarget.getBoundingClientRect();c({index:S,card:P,position:N,offset:{x:N.x-(C.left+C.width/2),y:N.y-(C.top+C.height/2)},origin:{x:C.left+C.width/2,y:C.top+C.height/2},isOverTarget:!1})};return Q.useEffect(()=>{if(!u)return;const S=k=>{const N=h(k),T=y(N.x,N.y);c(C=>({...C,position:N,isOverTarget:T}))},P=k=>{const N=h(k);y(N.x,N.y)&&g&&d({card:u.card,index:u.index,from:{x:N.x-u.offset.x,y:N.y-u.offset.y},to:{x:g.centerX,y:g.centerY}}),c(null)};return document.addEventListener("mousemove",S),document.addEventListener("mouseup",P),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("touchend",P),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",P),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",P)}},[u,g]),Q.useEffect(()=>{if(!f)return;const S=setTimeout(()=>{t(f.index),d(null)},250);return()=>clearTimeout(S)},[f,t]),p.jsxs("div",{className:"play-card-drag-drop",children:[u&&g&&p.jsx("div",{className:`play-drop-zone ${u.isOverTarget?"hover":""}`,style:{left:g.left,top:g.top,width:g.width,height:g.height},children:u.isOverTarget&&p.jsx("span",{className:"drop-hint",children:"Drop"})}),p.jsx("div",{className:"play-hand-cards",style:x?{left:x}:{},children:e.map((S,P)=>{const k=!n||r&&r.includes(P),N=(u==null?void 0:u.index)===P,T=(f==null?void 0:f.index)===P;return N||T?p.jsx("div",{className:"play-card placeholder",children:p.jsx(be,{card:S,width:90,dimmed:!0})},`hand-${P}`):p.jsx("div",{className:`play-card ${n&&k?"valid":""} ${n&&!k?"invalid":""}`,onMouseDown:C=>E(P,S,C),onTouchStart:C=>E(P,S,C),children:p.jsx(be,{card:S,width:90,dimmed:n&&!k})},`hand-${P}`)})}),u&&p.jsx("div",{className:"drag-ghost",style:{left:u.position.x-u.offset.x,top:u.position.y-u.offset.y},children:p.jsx(be,{card:u.card,width:90})}),f&&p.jsx("div",{className:"flying-card play-flying",style:{"--from-x":`${f.from.x}px`,"--from-y":`${f.from.y}px`,"--to-x":`${f.to.x}px`,"--to-y":`${f.to.y}px`},children:p.jsx(be,{card:f.card,width:90})})]})}function x1({G:e,ctx:t,moves:n,playerID:r}){var U,V,W,te,q,se,fe,w,_,O;const i=parseInt(r,10),s=t.currentPlayer===r,o=t.phase,[l,a]=Q.useState(null),[u,c]=Q.useState(null),[f,d]=Q.useState(null),[g,v]=Q.useState(null),[x,j]=Q.useState(null),m=A=>j(x===A?null:A),[h,y]=Q.useState(!1),E=Q.useRef(e.year),S=Q.useRef(null),P=1,[k,N]=Q.useState([]),T=Q.useRef(null),C=Q.useRef(o),R=Q.useRef(null),[L,K]=Q.useState(null),Y=Q.useRef(((U=e.currentTrick)==null?void 0:U.length)||0);Q.useEffect(()=>{o==="assignment"&&C.current!=="assignment"&&(R.current={trick:e.lastTrick,winner:e.lastWinner,jobBuckets:JSON.parse(JSON.stringify(e.jobBuckets))}),C.current=o},[o,e.lastTrick,e.lastWinner,e.jobBuckets]),Q.useEffect(()=>{var $,X;if(e.lastWinner===i){T.current=e.jobBuckets;return}const A=R.current;if(!A||!T.current){T.current=e.jobBuckets;return}const b=[];for(const J of it){const re=(($=T.current[J])==null?void 0:$.length)||0;(((X=e.jobBuckets[J])==null?void 0:X.length)||0)>re&&e.jobBuckets[J].slice(re).forEach(me=>{b.push({card:me,targetSuit:J})})}if(b.length>0&&A.trick&&S.current){const J=S.current.getBoundingClientRect(),re=1920,ee=1080,ue=J.width/re,me=J.height/ee,ze=960,Ze=470,ct=1100,Wn=540,Pn=265,Bt=Ot=>{const Mi=[3,0,1,2][Ot],To=-1.5*Pn;return{x:ze+To+Mi*Pn,y:Ze+85}},tn=ze-ct/2+20,vt=Ze-Wn/2+38,Pr=tn+320,Nr=70,No={Hearts:0,Diamonds:1,Clubs:2,Spades:3},Oo=Ot=>{const Or=No[Ot];return{x:Pr+Or*Nr,y:vt}},Ii=b.map((Ot,Or)=>{const Mi=A.trick.find(([,Zu])=>Zu.suit===Ot.card.suit&&Zu.value===Ot.card.value),To=Mi?Mi[0]:0,Ju=Bt(To),Xu=Oo(Ot.targetSuit),Cm=J.left+Ju.x*ue,Pm=J.top+Ju.y*me,Nm=J.left+Xu.x*ue,Om=J.top+Xu.y*me;return{id:`${Ot.card.suit}-${Ot.card.value}-${Date.now()}-${Or}`,card:Ot.card,fromX:Cm,fromY:Pm,toX:Nm,toY:Om,delay:Or*100}});N(Ii);const _m=Ii.length*100;setTimeout(()=>{N([]),R.current=null},500+_m)}T.current=e.jobBuckets},[e.jobBuckets,e.lastWinner,i]),Q.useEffect(()=>{e.year!==E.current&&(y(!1),E.current=e.year)},[e.year]),Q.useEffect(()=>{var $;const A=(($=e.currentTrick)==null?void 0:$.length)||0,b=Y.current;if(A>b&&A>0){const X=e.currentTrick[A-1],[J,re]=X;if(J!==0&&S.current){const ee=S.current.getBoundingClientRect(),ue=ee.width/1920,me=ee.height/1080,ze=750,Ze=350,ct=120,Pn=[3,0,1,2][J],Bt=-1.5*Ze,tn=B+Bt+Pn*Ze,vt=M-ze/2+160,Pr=M+ct,Nr=ee.left+tn*ue,No=ee.top+vt*me,Oo=ee.left+tn*ue,Ii=ee.top+Pr*me;K({id:`${re.suit}-${re.value}-${Date.now()}`,card:re,playerId:J,fromX:Nr,fromY:No,toX:Oo,toY:Ii}),setTimeout(()=>{K(null)},350)}}Y.current=A},[e.currentTrick,B,M]);const le=A=>{o==="trick"&&s&&n.playCard(A)},Oe=A=>{o==="planning"&&n.setTrump(A)},ae=(A,b)=>{n.assignCard(A,b)},D=()=>{n.submitAssignments()},F=()=>{y(!0),n.confirmSwap()},B=960,M=450;if(t.gameover){const{winner:A,scores:b}=t.gameover;return p.jsxs("div",{className:"game-over",children:[p.jsx("h1",{children:"Game Over!"}),p.jsxs("h2",{children:["Winner: ",e.players[A].name]}),p.jsx("div",{className:"final-scores",children:e.players.map(($,X)=>p.jsxs("div",{className:X===A?"winner":"",children:[$.name,": ",b[X]," points"]},X))}),p.jsx("p",{children:"(Lowest score wins)"})]})}return p.jsxs("div",{className:"game-board",children:[p.jsxs("div",{className:"mobile-nav-bar",children:[p.jsxs("button",{className:`nav-btn ${x==="options"?"active":""}`,onClick:()=>m("options"),title:"Menu",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",children:"Menu"})]}),p.jsxs("button",{className:`nav-btn ${x===null?"active":""}`,onClick:()=>j(null),title:"Brigade (Playing Area)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Brigade",children:""})]}),p.jsxs("button",{className:`nav-btn ${x==="jobs"?"active":""}`,onClick:()=>m("jobs"),title:"Jobs",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Jobs",children:""})]}),p.jsxs("button",{className:`nav-btn ${x==="gulag"?"active":""}`,onClick:()=>m("gulag"),title:"The North (Gulag)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"The North",children:""})]}),p.jsxs("button",{className:`nav-btn ${x==="plot"?"active":""}`,onClick:()=>m("plot"),title:"Your Plot (Cellar)",children:[p.jsx("span",{className:"nav-icon",children:""}),p.jsx("span",{className:"nav-label",title:"Plot",children:""})]})]}),x==="options"&&p.jsx("div",{className:"mobile-panel-content",children:p.jsxs("div",{className:"options-panel",children:[p.jsx("h3",{title:"Menu",children:""}),p.jsxs("div",{className:"menu-options",children:[p.jsxs("div",{className:"rules-section",children:[p.jsx("h4",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h5",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h5",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h5",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0 hours, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]})]})]}),p.jsx("button",{className:"menu-btn-action",onClick:()=>window.location.reload(),children:" New Game"})]})]})}),p.jsxs("div",{className:"game-content",children:[o==="planning"&&!e.trump&&p.jsxs("div",{className:"trump-selection",children:[p.jsx("h3",{title:"Select Trump Suit",children:"  "}),p.jsx("div",{className:"suit-buttons",children:it.map(A=>{const b={Hearts:{ru:"",en:"Hearts (Wheat)"},Diamonds:{ru:"",en:"Diamonds (Beets)"},Clubs:{ru:"",en:"Clubs (Potatoes)"},Spades:{ru:"",en:"Spades (Sunflowers)"}};return p.jsxs("button",{onClick:()=>Oe(A),className:`suit-btn ${A.toLowerCase()}`,title:b[A].en,children:[k1(A)," ",b[A].ru]},A)})})]}),p.jsxs("div",{className:"svg-container",children:[p.jsx("svg",{ref:S,viewBox:"0 0 1920 1080",className:"board-svg",preserveAspectRatio:"xMidYMid slice",children:p.jsx(y1,{trick:o==="assignment"?e.lastTrick:e.currentTrick,numPlayers:e.numPlayers,lead:e.lead,centerX:B,centerY:M,scale:P,year:e.year,trump:e.trump,phase:o,isMyTurn:s,currentPlayerName:(V=e.players[t.currentPlayer])==null?void 0:V.name,showInfo:!0,players:e.players,currentPlayer:parseInt(t.currentPlayer,10),brigadeLeader:e.players.findIndex(A=>A.brigadeLeader),displayMode:o==="assignment"?"jobs":o==="swap"?"plot":x==="jobs"?"jobs":x==="gulag"?"gulag":x==="plot"?"plot":"game",workHours:e.workHours,claimedJobs:e.claimedJobs,jobBuckets:e.jobBuckets,revealedJobs:e.revealedJobs,exiled:e.exiled,playerPlot:(W=e.players[i])==null?void 0:W.plot})}),o==="assignment"&&e.lastWinner===i&&p.jsx(v1,{lastTrick:e.lastTrick,pendingAssignments:e.pendingAssignments,onAssign:ae,onSubmit:D,svgRef:S,centerY:M,scale:P}),o==="swap"&&!((te=e.swapConfirmed)!=null&&te[i])&&!h&&p.jsx(w1,{hand:((q=e.players[i])==null?void 0:q.hand)||[],plot:(se=e.players[i])==null?void 0:se.plot,onSwap:(A,b,$)=>n.swapCard(A,b,$),onConfirm:F,svgRef:S,centerY:M,scale:P,year:e.year}),o==="swap"&&(((fe=e.swapConfirmed)==null?void 0:fe[i])||h)&&p.jsx("div",{className:"swap-ui",children:p.jsx("h3",{children:"Waiting for other players..."})}),p.jsx(S1,{hand:((w=e.players[i])==null?void 0:w.hand)||[],onPlayCard:le,canPlay:o==="trick"&&s,validIndices:E1(e,i,o),svgRef:S,centerX:B,centerY:M,cardWidth:280,cardSpacing:350}),p.jsxs("div",{className:"player-plot",children:[p.jsx("h4",{title:"Your Plot (Cellar)",children:""}),p.jsxs("div",{className:"plot-cards",children:[(_=e.players[i])==null?void 0:_.plot.revealed.map((A,b)=>p.jsx(be,{card:A,width:60},`r-${b}`)),(O=e.players[i])==null?void 0:O.plot.hidden.map((A,b)=>p.jsxs("div",{className:`hidden-plot-card ${g===b?"revealed":""}`,title:"Tap to reveal",onClick:()=>v(g===b?null:b),children:[p.jsx(be,{card:A,width:60,faceDown:!0,className:"card-back"}),p.jsx(be,{card:A,width:60,className:"card-front"})]},`h-${b}`))]})]}),k.map(A=>p.jsx("div",{className:"ai-flying-card",style:{"--from-x":`${A.fromX}px`,"--from-y":`${A.fromY}px`,"--to-x":`${A.toX}px`,"--to-y":`${A.toY}px`,"--delay":`${A.delay}ms`},children:p.jsx("img",{src:Mt(A.card),alt:`${A.card.value} of ${A.card.suit}`,width:80,height:112})},A.id)),L&&p.jsx("div",{className:"ai-play-card",style:{"--from-x":`${L.fromX}px`,"--from-y":`${L.fromY}px`,"--to-x":`${L.toX}px`,"--to-y":`${L.toY}px`},children:p.jsx("img",{src:Mt(L.card),alt:`${L.card.value} of ${L.card.suit}`,width:100,height:140})})]})]})]})}function k1(e){return{Hearts:"",Diamonds:"",Clubs:"",Spades:""}[e]||e}function E1(e,t,n){if(n!=="trick")return null;const r=e.players[t];if(!r||!r.hand)return[];if(e.currentTrick.length===0)return r.hand.map((o,l)=>l);const i=e.currentTrick[0][1].suit;return r.hand.some(o=>o.suit===i)?r.hand.map((o,l)=>o.suit===i?l:-1).filter(o=>o>=0):r.hand.map((o,l)=>l)}function _1(){const[e,t]=Q.useState(!1),[n,r]=Q.useState({...ym}),i=Q.useMemo(()=>e?fm({game:h1,board:x1,numPlayers:4,multiplayer:cm({bots:{1:ys,2:ys,3:ys}}),debug:!1}):null,[e]),[s,o]=Q.useState(!1);return e?p.jsx(i,{playerID:"0",setupData:{variants:n}}):p.jsxs("div",{className:"lobby",children:[p.jsxs("div",{className:"lobby-left",children:[p.jsxs("div",{className:"lobby-title",children:[p.jsx("h1",{title:"Kolkhoz - Collective Farm",children:""}),p.jsx("h2",{title:"Pyatiletka - Five-Year Plan",children:""})]}),p.jsxs("div",{className:"lobby-buttons",children:[p.jsx("button",{className:"start-btn",onClick:()=>t(!0),children:"Start Game"}),p.jsx("button",{className:`rules-btn ${s?"active":""}`,onClick:()=>o(!s),children:s?"Options":"Rules"})]})]}),p.jsx("div",{className:"lobby-right-panel",children:s?p.jsxs("div",{className:"rules-panel",children:[p.jsx("h3",{children:"Kolkhoz Rules"}),p.jsxs("div",{className:"rules-text",children:[p.jsx("h4",{children:"Objective"}),p.jsx("p",{children:"Complete collective farm jobs while protecting your private plot. Lowest score wins!"}),p.jsx("h4",{children:"Gameplay"}),p.jsx("p",{children:" Play cards to tricks - must follow lead suit if able"}),p.jsx("p",{children:" Trick winner assigns cards to matching job suits"}),p.jsx("p",{children:" Jobs need 40 work hours to complete"}),p.jsx("h4",{children:"Trump Face Cards"}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Jack ()"}),": Worth 0, gets exiled instead of your cards"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"Queen ()"}),": All players become vulnerable"]}),p.jsxs("p",{children:[" ",p.jsx("strong",{children:"King ()"}),": Exiles two cards instead of one"]}),p.jsx("h4",{children:"Scoring"}),p.jsx("p",{children:"Cards in your plot = penalty points. Lowest score wins!"})]})]}):p.jsxs("div",{className:"variant-options",children:[p.jsx("h3",{children:"Deck Type"}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===52,onChange:()=>r({...n,deckType:52})}),"52-card deck (Classic)"]}),p.jsxs("label",{children:[p.jsx("input",{type:"radio",name:"deckType",checked:n.deckType===36,onChange:()=>r({...n,deckType:36})}),"36-card deck (Camp-style)"]}),p.jsx("h3",{children:"Variant Rules"}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.nomenclature,onChange:l=>r({...n,nomenclature:l.target.checked})}),p.jsx("strong",{title:"Nomenklatura - The Party Elite",children:""})," - Face card special effects"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.allowSwap,onChange:l=>r({...n,allowSwap:l.target.checked})}),p.jsx("strong",{title:"Obmen - Exchange",children:""})," - Swap hand/plot cards at year start"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.northernStyle,onChange:l=>r({...n,northernStyle:l.target.checked})}),p.jsx("strong",{title:"Severny Stil - Northern Style",children:" "})," - No job rewards, all vulnerable"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.miceVariant,onChange:l=>r({...n,miceVariant:l.target.checked})}),p.jsx("strong",{title:"Myshi - Mice",children:""})," - All reveal during requisition"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.ordenNachalniku,onChange:l=>r({...n,ordenNachalniku:l.target.checked})}),p.jsx("strong",{title:"Orden Nachalniku - Medal for the Boss",children:" "})," - Stack cards on job complete"]}),p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.medalsCount,onChange:l=>r({...n,medalsCount:l.target.checked})}),p.jsx("strong",{title:"Medali - Medals",children:""})," - Trick wins add to score"]}),n.deckType===52&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:n.accumulateJobs,onChange:l=>r({...n,accumulateJobs:l.target.checked})}),p.jsx("strong",{title:"Nakoplenie - Accumulation",children:""})," - Job rewards carry over"]})]})})]})}const C1=Gh(document.getElementById("root"));C1.render(p.jsx(_1,{}));
